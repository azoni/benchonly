const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-Bf58tHbe.js","assets/chevron-left-CvOHcSLt.js","assets/calorieService-6-LCVeV1.js","assets/index-CNvf9wai.js","assets/LineChart-DS-D-U0I.js","assets/moon-KoPi0KQh.js","assets/index-KYtICFU1.js","assets/index-CFpF1Pe-.js","assets/pen-Bt6hHu0V.js","assets/eye-off-DLex2NQd.js","assets/WorkoutsPage-Dv-3Fm5i.js","assets/search-CjdYFuNf.js","assets/message-square-DqcUYucI.js","assets/clock-DjapWf3y.js","assets/more-vertical-DWFfU6UG.js","assets/share-2-Dhl9j_Ey.js","assets/trash-2-BfpgiwwA.js","assets/index-Dv5IdJ7g.js","assets/NewWorkoutPage-Bs543VY8.js","assets/save-490TuTnS.js","assets/wodLibrary-BricFkkX.js","assets/trophy-PDFjo0x7.js","assets/info-A1JU0cij.js","assets/WorkoutDetailPage-Bo48k0II.js","assets/ExerciseInfoModal-DsZL8d_c.js","assets/external-link-D9DGizLx.js","assets/WorkoutSummaryCard-BjOPrzKA.js","assets/file-text-4fyQo_E-.js","assets/pencil-D1KRYuJz.js","assets/GroupWorkoutPage-KvbEpmCU.js","assets/CalendarPage-BNTpqpCK.js","assets/skip-forward-DB7Coyj7.js","assets/GroupsPage-Y5M4xHKu.js","assets/crown-Dsi_BXO1.js","assets/GroupDetailPage-DmCsQ3iS.js","assets/timer-D9FC-9LZ.js","assets/copy-D78hIkPk.js","assets/GroupBatchViewPage-BCMuOrjm.js","assets/GoalsPage-B8VG01gC.js","assets/index-DkPuhs2j.js","assets/ToolsPage-C8I9yL80.js","assets/HealthPage-BbLK0xK-.js","assets/index-iIQZbxkE.js","assets/UsagePage-D-TPUOcp.js","assets/SettingsPage-D_VwC7eD.js","assets/camera-7VptqMmQ.js","assets/scale-Dsb2V1-P.js","assets/globe-_N1dOSoj.js","assets/lock-5UYcp17S.js","assets/AdminPage-DdxFfPzI.js","assets/FeedPage-CNQ3Mzef.js","assets/FriendsPage-OTa0dUKO.js","assets/user-minus-CYVGJ9J8.js","assets/ProfilePage-D4Y3O0zw.js","assets/GenerateWorkoutPage-Cko18MoG.js","assets/ProgramsPage-BK2drkdK.js","assets/index-Co_xhios.js","assets/pause-jSnuuXYY.js","assets/ProgramDetailPage-7v4aZ7oV.js","assets/DocsPage-BRLM2EBC.js","assets/CoachesPage-DyR43IUl.js","assets/check-circle-O2U5nVFK.js","assets/OnboardingPage-Vqr5_wyw.js","assets/TrainerPage-B9vR1Zoc.js","assets/x-circle-DoqQqZJx.js","assets/FormCheckPage-BrxBflj0.js"])))=>i.map(i=>d[i]);
function yV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DX(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Ab={exports:{}},Zp={},Pb={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.element"),vV=Symbol.for("react.portal"),wV=Symbol.for("react.fragment"),xV=Symbol.for("react.strict_mode"),_V=Symbol.for("react.profiler"),EV=Symbol.for("react.provider"),TV=Symbol.for("react.context"),IV=Symbol.for("react.forward_ref"),SV=Symbol.for("react.suspense"),bV=Symbol.for("react.memo"),kV=Symbol.for("react.lazy"),nE=Symbol.iterator;function AV(t){return t===null||typeof t!="object"?null:(t=nE&&t[nE]||t["@@iterator"],typeof t=="function"?t:null)}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rb=Object.assign,Nb={};function _u(t,e,n){this.props=t,this.context=e,this.refs=Nb,this.updater=n||Cb}_u.prototype.isReactComponent={};_u.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_u.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Db(){}Db.prototype=_u.prototype;function bv(t,e,n){this.props=t,this.context=e,this.refs=Nb,this.updater=n||Cb}var kv=bv.prototype=new Db;kv.constructor=bv;Rb(kv,_u.prototype);kv.isPureReactComponent=!0;var rE=Array.isArray,Vb=Object.prototype.hasOwnProperty,Av={current:null},jb={key:!0,ref:!0,__self:!0,__source:!0};function Ob(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vb.call(e,r)&&!jb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vd,type:t,key:s,ref:o,props:i,_owner:Av.current}}function PV(t,e){return{$$typeof:Vd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vd}function CV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iE=/\/+/g;function cg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CV(""+t.key):e.toString(36)}function uf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vd:case vV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+cg(o,0):r,rE(i)?(n="",t!=null&&(n=t.replace(iE,"$&/")+"/"),uf(i,e,n,"",function(u){return u})):i!=null&&(Pv(i)&&(i=PV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",rE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+cg(s,a);o+=uf(s,e,n,l,i)}else if(l=AV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+cg(s,a++),o+=uf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ih(t,e,n){if(t==null)return t;var r=[],i=0;return uf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function RV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},cf={transition:null},NV={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:cf,ReactCurrentOwner:Av};function Mb(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Ih,forEach:function(t,e,n){Ih(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ih(t,function(){e++}),e},toArray:function(t){return Ih(t,function(e){return e})||[]},only:function(t){if(!Pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=_u;Ke.Fragment=wV;Ke.Profiler=_V;Ke.PureComponent=bv;Ke.StrictMode=xV;Ke.Suspense=SV;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NV;Ke.act=Mb;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Av.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Vb.call(e,l)&&!jb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Vd,type:t.type,key:i,ref:s,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:TV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EV,_context:t},t.Consumer=t};Ke.createElement=Ob;Ke.createFactory=function(t){var e=Ob.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:IV,render:t}};Ke.isValidElement=Pv;Ke.lazy=function(t){return{$$typeof:kV,_payload:{_status:-1,_result:t},_init:RV}};Ke.memo=function(t,e){return{$$typeof:bV,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=cf.transition;cf.transition={};try{t()}finally{cf.transition=e}};Ke.unstable_act=Mb;Ke.useCallback=function(t,e){return tr.current.useCallback(t,e)};Ke.useContext=function(t){return tr.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return tr.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return tr.current.useEffect(t,e)};Ke.useId=function(){return tr.current.useId()};Ke.useImperativeHandle=function(t,e,n){return tr.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return tr.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return tr.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return tr.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return tr.current.useReducer(t,e,n)};Ke.useRef=function(t){return tr.current.useRef(t)};Ke.useState=function(t){return tr.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return tr.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return tr.current.useTransition()};Ke.version="18.3.1";Pb.exports=Ke;var b=Pb.exports;const jd=Jp(b),DV=yV({__proto__:null,default:jd},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VV=b,jV=Symbol.for("react.element"),OV=Symbol.for("react.fragment"),MV=Object.prototype.hasOwnProperty,LV=VV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FV={key:!0,ref:!0,__self:!0,__source:!0};function Lb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MV.call(e,r)&&!FV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jV,type:t,key:s,ref:o,props:i,_owner:LV.current}}Zp.Fragment=OV;Zp.jsx=Lb;Zp.jsxs=Lb;Ab.exports=Zp;var f=Ab.exports,by={},Fb={exports:{}},Nr={},Ub={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ce){var D=X.length;X.push(ce);e:for(;0<D;){var ue=D-1>>>1,ke=X[ue];if(0<i(ke,ce))X[ue]=ce,X[D]=ke,D=ue;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],D=X.pop();if(D!==ce){X[0]=D;e:for(var ue=0,ke=X.length,O=ke>>>1;ue<O;){var ft=2*(ue+1)-1,_t=X[ft],$e=ft+1,rt=X[$e];if(0>i(_t,D))$e<ke&&0>i(rt,_t)?(X[ue]=rt,X[$e]=D,ue=$e):(X[ue]=_t,X[ft]=D,ue=ft);else if($e<ke&&0>i(rt,D))X[ue]=rt,X[$e]=D,ue=$e;else break e}}return ce}function i(X,ce){var D=X.sortIndex-ce.sortIndex;return D!==0?D:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,p=3,m=!1,y=!1,v=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var ce=n(u);ce!==null;){if(ce.callback===null)r(u);else if(ce.startTime<=X)r(u),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=n(u)}}function V(X){if(v=!1,E(X),!y)if(n(l)!==null)y=!0,be(L);else{var ce=n(u);ce!==null&&Ae(V,ce.startTime-X)}}function L(X,ce){y=!1,v&&(v=!1,_(T),T=-1),m=!0;var D=p;try{for(E(ce),h=n(l);h!==null&&(!(h.expirationTime>ce)||X&&!P());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,p=h.priorityLevel;var ke=ue(h.expirationTime<=ce);ce=t.unstable_now(),typeof ke=="function"?h.callback=ke:h===n(l)&&r(l),E(ce)}else r(l);h=n(l)}if(h!==null)var O=!0;else{var ft=n(u);ft!==null&&Ae(V,ft.startTime-ce),O=!1}return O}finally{h=null,p=D,m=!1}}var j=!1,S=null,T=-1,k=5,C=-1;function P(){return!(t.unstable_now()-C<k)}function N(){if(S!==null){var X=t.unstable_now();C=X;var ce=!0;try{ce=S(!0,X)}finally{ce?R():(j=!1,S=null)}}else j=!1}var R;if(typeof x=="function")R=function(){x(N)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ge=H.port2;H.port1.onmessage=N,R=function(){ge.postMessage(null)}}else R=function(){I(N,0)};function be(X){S=X,j||(j=!0,R())}function Ae(X,ce){T=I(function(){X(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,be(L))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(p){case 1:case 2:case 3:var ce=3;break;default:ce=p}var D=p;p=ce;try{return X()}finally{p=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var D=p;p=X;try{return ce()}finally{p=D}},t.unstable_scheduleCallback=function(X,ce,D){var ue=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?ue+D:ue):D=ue,X){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=D+ke,X={id:c++,callback:ce,priorityLevel:X,startTime:D,expirationTime:ke,sortIndex:-1},D>ue?(X.sortIndex=D,e(u,X),n(l)===null&&X===n(u)&&(v?(_(T),T=-1):v=!0,Ae(V,D-ue))):(X.sortIndex=ke,e(l,X),y||m||(y=!0,be(L))),X},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(X){var ce=p;return function(){var D=p;p=ce;try{return X.apply(this,arguments)}finally{p=D}}}})(Bb);Ub.exports=Bb;var UV=Ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BV=b,Ar=UV;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zb=new Set,Jc={};function Fa(t,e){Wl(t,e),Wl(t+"Capture",e)}function Wl(t,e){for(Jc[t]=e,t=0;t<e.length;t++)zb.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ky=Object.prototype.hasOwnProperty,zV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sE={},oE={};function $V(t){return ky.call(oE,t)?!0:ky.call(sE,t)?!1:zV.test(t)?oE[t]=!0:(sE[t]=!0,!1)}function WV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qV(t,e,n,r){if(e===null||typeof e>"u"||WV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cv=/[\-:]([a-z])/g;function Rv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cv,Rv);jn[e]=new nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cv,Rv);jn[e]=new nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cv,Rv);jn[e]=new nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new nr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nv(t,e,n,r){var i=jn.hasOwnProperty(e)?jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qV(e,n,i,r)&&(n=null),r||i===null?$V(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cs=BV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),dl=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Ay=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Wb=Symbol.for("react.context"),Vv=Symbol.for("react.forward_ref"),Py=Symbol.for("react.suspense"),Cy=Symbol.for("react.suspense_list"),jv=Symbol.for("react.memo"),ks=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),aE=Symbol.iterator;function Yu(t){return t===null||typeof t!="object"?null:(t=aE&&t[aE]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,dg;function mc(t){if(dg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dg=e&&e[1]||""}return`
`+dg+t}var hg=!1;function fg(t,e){if(!t||hg)return"";hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mc(t):""}function GV(t){switch(t.tag){case 5:return mc(t.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 2:case 15:return t=fg(t.type,!1),t;case 11:return t=fg(t.type.render,!1),t;case 1:return t=fg(t.type,!0),t;default:return""}}function Ry(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hl:return"Fragment";case dl:return"Portal";case Ay:return"Profiler";case Dv:return"StrictMode";case Py:return"Suspense";case Cy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wb:return(t.displayName||"Context")+".Consumer";case $b:return(t._context.displayName||"Context")+".Provider";case Vv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jv:return e=t.displayName||null,e!==null?e:Ry(t.type)||"Memo";case ks:e=t._payload,t=t._init;try{return Ry(t(e))}catch{}}return null}function HV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ry(e);case 8:return e===Dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KV(t){var e=Gb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bh(t){t._valueTracker||(t._valueTracker=KV(t))}function Hb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ny(t,e){var n=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=so(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kb(t,e){e=e.checked,e!=null&&Nv(t,"checked",e,!1)}function Dy(t,e){Kb(t,e);var n=so(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vy(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vy(t,e,n){(e!=="number"||$f(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gc=Array.isArray;function Al(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+so(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(gc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:so(n)}}function Qb(t,e){var n=so(e.value),r=so(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kh,Xb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kh=kh||document.createElement("div"),kh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QV=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(t){QV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ic[e]=Ic[t]})});function Jb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ic.hasOwnProperty(t)&&Ic[t]?(""+e).trim():e+"px"}function Zb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var YV=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function My(t,e){if(e){if(YV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Ly(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fy=null;function Ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uy=null,Pl=null,Cl=null;function hE(t){if(t=Ld(t)){if(typeof Uy!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=im(e),Uy(t.stateNode,t.type,e))}}function ek(t){Pl?Cl?Cl.push(t):Cl=[t]:Pl=t}function tk(){if(Pl){var t=Pl,e=Cl;if(Cl=Pl=null,hE(t),e)for(t=0;t<e.length;t++)hE(e[t])}}function nk(t,e){return t(e)}function rk(){}var pg=!1;function ik(t,e,n){if(pg)return t(e,n);pg=!0;try{return nk(t,e,n)}finally{pg=!1,(Pl!==null||Cl!==null)&&(rk(),tk())}}function ed(t,e){var n=t.stateNode;if(n===null)return null;var r=im(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var By=!1;if(ts)try{var Xu={};Object.defineProperty(Xu,"passive",{get:function(){By=!0}}),window.addEventListener("test",Xu,Xu),window.removeEventListener("test",Xu,Xu)}catch{By=!1}function XV(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Sc=!1,Wf=null,qf=!1,zy=null,JV={onError:function(t){Sc=!0,Wf=t}};function ZV(t,e,n,r,i,s,o,a,l){Sc=!1,Wf=null,XV.apply(JV,arguments)}function ej(t,e,n,r,i,s,o,a,l){if(ZV.apply(this,arguments),Sc){if(Sc){var u=Wf;Sc=!1,Wf=null}else throw Error(Z(198));qf||(qf=!0,zy=u)}}function Ua(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fE(t){if(Ua(t)!==t)throw Error(Z(188))}function tj(t){var e=t.alternate;if(!e){if(e=Ua(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fE(i),t;if(s===r)return fE(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function ok(t){return t=tj(t),t!==null?ak(t):null}function ak(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ak(t);if(e!==null)return e;t=t.sibling}return null}var lk=Ar.unstable_scheduleCallback,pE=Ar.unstable_cancelCallback,nj=Ar.unstable_shouldYield,rj=Ar.unstable_requestPaint,on=Ar.unstable_now,ij=Ar.unstable_getCurrentPriorityLevel,Mv=Ar.unstable_ImmediatePriority,uk=Ar.unstable_UserBlockingPriority,Gf=Ar.unstable_NormalPriority,sj=Ar.unstable_LowPriority,ck=Ar.unstable_IdlePriority,em=null,Ti=null;function oj(t){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(em,t,void 0,(t.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:uj,aj=Math.log,lj=Math.LN2;function uj(t){return t>>>=0,t===0?32:31-(aj(t)/lj|0)|0}var Ah=64,Ph=4194304;function yc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=yc(a):(s&=o,s!==0&&(r=yc(s)))}else o=n&~i,o!==0?r=yc(o):s!==0&&(r=yc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ti(e),i=1<<n,r|=t[n],e&=~i;return r}function cj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ti(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=cj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $y(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dk(){var t=Ah;return Ah<<=1,!(Ah&4194240)&&(Ah=64),t}function mg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Od(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ti(e),t[e]=n}function hj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ti(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ti(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yt=0;function hk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fk,Fv,pk,mk,gk,Wy=!1,Ch=[],Ws=null,qs=null,Gs=null,td=new Map,nd=new Map,Rs=[],fj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mE(t,e){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":td.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(e.pointerId)}}function Ju(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ld(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function pj(t,e,n,r,i){switch(e){case"focusin":return Ws=Ju(Ws,t,e,n,r,i),!0;case"dragenter":return qs=Ju(qs,t,e,n,r,i),!0;case"mouseover":return Gs=Ju(Gs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return td.set(s,Ju(td.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nd.set(s,Ju(nd.get(s)||null,t,e,n,r,i)),!0}return!1}function yk(t){var e=sa(t.target);if(e!==null){var n=Ua(e);if(n!==null){if(e=n.tag,e===13){if(e=sk(n),e!==null){t.blockedOn=e,gk(t.priority,function(){pk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function df(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fy=r,n.target.dispatchEvent(r),Fy=null}else return e=Ld(n),e!==null&&Fv(e),t.blockedOn=n,!1;e.shift()}return!0}function gE(t,e,n){df(t)&&n.delete(e)}function mj(){Wy=!1,Ws!==null&&df(Ws)&&(Ws=null),qs!==null&&df(qs)&&(qs=null),Gs!==null&&df(Gs)&&(Gs=null),td.forEach(gE),nd.forEach(gE)}function Zu(t,e){t.blockedOn===e&&(t.blockedOn=null,Wy||(Wy=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,mj)))}function rd(t){function e(i){return Zu(i,t)}if(0<Ch.length){Zu(Ch[0],t);for(var n=1;n<Ch.length;n++){var r=Ch[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ws!==null&&Zu(Ws,t),qs!==null&&Zu(qs,t),Gs!==null&&Zu(Gs,t),td.forEach(e),nd.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)yk(n),n.blockedOn===null&&Rs.shift()}var Rl=cs.ReactCurrentBatchConfig,Kf=!0;function gj(t,e,n,r){var i=yt,s=Rl.transition;Rl.transition=null;try{yt=1,Uv(t,e,n,r)}finally{yt=i,Rl.transition=s}}function yj(t,e,n,r){var i=yt,s=Rl.transition;Rl.transition=null;try{yt=4,Uv(t,e,n,r)}finally{yt=i,Rl.transition=s}}function Uv(t,e,n,r){if(Kf){var i=qy(t,e,n,r);if(i===null)Sg(t,e,r,Qf,n),mE(t,r);else if(pj(i,t,e,n,r))r.stopPropagation();else if(mE(t,r),e&4&&-1<fj.indexOf(t)){for(;i!==null;){var s=Ld(i);if(s!==null&&fk(s),s=qy(t,e,n,r),s===null&&Sg(t,e,r,Qf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sg(t,e,r,null,n)}}var Qf=null;function qy(t,e,n,r){if(Qf=null,t=Ov(r),t=sa(t),t!==null)if(e=Ua(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qf=t,null}function vk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ij()){case Mv:return 1;case uk:return 4;case Gf:case sj:return 16;case ck:return 536870912;default:return 16}default:return 16}}var Fs=null,Bv=null,hf=null;function wk(){if(hf)return hf;var t,e=Bv,n=e.length,r,i="value"in Fs?Fs.value:Fs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return hf=i.slice(t,1<r?1-r:void 0)}function ff(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rh(){return!0}function yE(){return!1}function Dr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rh:yE,this.isPropagationStopped=yE,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rh)},persist:function(){},isPersistent:Rh}),e}var Eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zv=Dr(Eu),Md=Gt({},Eu,{view:0,detail:0}),vj=Dr(Md),gg,yg,ec,tm=Gt({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ec&&(ec&&t.type==="mousemove"?(gg=t.screenX-ec.screenX,yg=t.screenY-ec.screenY):yg=gg=0,ec=t),gg)},movementY:function(t){return"movementY"in t?t.movementY:yg}}),vE=Dr(tm),wj=Gt({},tm,{dataTransfer:0}),xj=Dr(wj),_j=Gt({},Md,{relatedTarget:0}),vg=Dr(_j),Ej=Gt({},Eu,{animationName:0,elapsedTime:0,pseudoElement:0}),Tj=Dr(Ej),Ij=Gt({},Eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sj=Dr(Ij),bj=Gt({},Eu,{data:0}),wE=Dr(bj),kj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Pj[t])?!!e[t]:!1}function $v(){return Cj}var Rj=Gt({},Md,{key:function(t){if(t.key){var e=kj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ff(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Aj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$v,charCode:function(t){return t.type==="keypress"?ff(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ff(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nj=Dr(Rj),Dj=Gt({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xE=Dr(Dj),Vj=Gt({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$v}),jj=Dr(Vj),Oj=Gt({},Eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mj=Dr(Oj),Lj=Gt({},tm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fj=Dr(Lj),Uj=[9,13,27,32],Wv=ts&&"CompositionEvent"in window,bc=null;ts&&"documentMode"in document&&(bc=document.documentMode);var Bj=ts&&"TextEvent"in window&&!bc,xk=ts&&(!Wv||bc&&8<bc&&11>=bc),_E=" ",EE=!1;function _k(t,e){switch(t){case"keyup":return Uj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ek(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fl=!1;function zj(t,e){switch(t){case"compositionend":return Ek(e);case"keypress":return e.which!==32?null:(EE=!0,_E);case"textInput":return t=e.data,t===_E&&EE?null:t;default:return null}}function $j(t,e){if(fl)return t==="compositionend"||!Wv&&_k(t,e)?(t=wk(),hf=Bv=Fs=null,fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xk&&e.locale!=="ko"?null:e.data;default:return null}}var Wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wj[t.type]:e==="textarea"}function Tk(t,e,n,r){ek(r),e=Yf(e,"onChange"),0<e.length&&(n=new zv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kc=null,id=null;function qj(t){Vk(t,0)}function nm(t){var e=gl(t);if(Hb(e))return t}function Gj(t,e){if(t==="change")return e}var Ik=!1;if(ts){var wg;if(ts){var xg="oninput"in document;if(!xg){var IE=document.createElement("div");IE.setAttribute("oninput","return;"),xg=typeof IE.oninput=="function"}wg=xg}else wg=!1;Ik=wg&&(!document.documentMode||9<document.documentMode)}function SE(){kc&&(kc.detachEvent("onpropertychange",Sk),id=kc=null)}function Sk(t){if(t.propertyName==="value"&&nm(id)){var e=[];Tk(e,id,t,Ov(t)),ik(qj,e)}}function Hj(t,e,n){t==="focusin"?(SE(),kc=e,id=n,kc.attachEvent("onpropertychange",Sk)):t==="focusout"&&SE()}function Kj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nm(id)}function Qj(t,e){if(t==="click")return nm(e)}function Yj(t,e){if(t==="input"||t==="change")return nm(e)}function Xj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oi=typeof Object.is=="function"?Object.is:Xj;function sd(t,e){if(oi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ky.call(e,i)||!oi(t[i],e[i]))return!1}return!0}function bE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kE(t,e){var n=bE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bE(n)}}function bk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kk(){for(var t=window,e=$f();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$f(t.document)}return e}function qv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jj(t){var e=kk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bk(n.ownerDocument.documentElement,n)){if(r!==null&&qv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kE(n,s);var o=kE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zj=ts&&"documentMode"in document&&11>=document.documentMode,pl=null,Gy=null,Ac=null,Hy=!1;function AE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hy||pl==null||pl!==$f(r)||(r=pl,"selectionStart"in r&&qv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ac&&sd(Ac,r)||(Ac=r,r=Yf(Gy,"onSelect"),0<r.length&&(e=new zv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pl)))}function Nh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ml={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},_g={},Ak={};ts&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function rm(t){if(_g[t])return _g[t];if(!ml[t])return t;var e=ml[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ak)return _g[t]=e[n];return t}var Pk=rm("animationend"),Ck=rm("animationiteration"),Rk=rm("animationstart"),Nk=rm("transitionend"),Dk=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){Dk.set(t,e),Fa(e,[t])}for(var Eg=0;Eg<PE.length;Eg++){var Tg=PE[Eg],eO=Tg.toLowerCase(),tO=Tg[0].toUpperCase()+Tg.slice(1);xo(eO,"on"+tO)}xo(Pk,"onAnimationEnd");xo(Ck,"onAnimationIteration");xo(Rk,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(Nk,"onTransitionEnd");Wl("onMouseEnter",["mouseout","mouseover"]);Wl("onMouseLeave",["mouseout","mouseover"]);Wl("onPointerEnter",["pointerout","pointerover"]);Wl("onPointerLeave",["pointerout","pointerover"]);Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nO=new Set("cancel close invalid load scroll toggle".split(" ").concat(vc));function CE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ej(r,e,void 0,t),t.currentTarget=null}function Vk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;CE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;CE(i,a,u),s=l}}}if(qf)throw t=zy,qf=!1,zy=null,t}function Rt(t,e){var n=e[Jy];n===void 0&&(n=e[Jy]=new Set);var r=t+"__bubble";n.has(r)||(jk(e,t,2,!1),n.add(r))}function Ig(t,e,n){var r=0;e&&(r|=4),jk(n,t,r,e)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function od(t){if(!t[Dh]){t[Dh]=!0,zb.forEach(function(n){n!=="selectionchange"&&(nO.has(n)||Ig(n,!1,t),Ig(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dh]||(e[Dh]=!0,Ig("selectionchange",!1,e))}}function jk(t,e,n,r){switch(vk(e)){case 1:var i=gj;break;case 4:i=yj;break;default:i=Uv}n=i.bind(null,e,n,t),i=void 0,!By||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=sa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ik(function(){var u=s,c=Ov(n),h=[];e:{var p=Dk.get(t);if(p!==void 0){var m=zv,y=t;switch(t){case"keypress":if(ff(n)===0)break e;case"keydown":case"keyup":m=Nj;break;case"focusin":y="focus",m=vg;break;case"focusout":y="blur",m=vg;break;case"beforeblur":case"afterblur":m=vg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=jj;break;case Pk:case Ck:case Rk:m=Tj;break;case Nk:m=Mj;break;case"scroll":m=vj;break;case"wheel":m=Fj;break;case"copy":case"cut":case"paste":m=Sj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=xE}var v=(e&4)!==0,I=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,E;x!==null;){E=x;var V=E.stateNode;if(E.tag===5&&V!==null&&(E=V,_!==null&&(V=ed(x,_),V!=null&&v.push(ad(x,V,E)))),I)break;x=x.return}0<v.length&&(p=new m(p,y,null,n,c),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Fy&&(y=n.relatedTarget||n.fromElement)&&(sa(y)||y[ns]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?sa(y):null,y!==null&&(I=Ua(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=vE,V="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=xE,V="onPointerLeave",_="onPointerEnter",x="pointer"),I=m==null?p:gl(m),E=y==null?p:gl(y),p=new v(V,x+"leave",m,n,c),p.target=I,p.relatedTarget=E,V=null,sa(c)===u&&(v=new v(_,x+"enter",y,n,c),v.target=E,v.relatedTarget=I,V=v),I=V,m&&y)t:{for(v=m,_=y,x=0,E=v;E;E=Za(E))x++;for(E=0,V=_;V;V=Za(V))E++;for(;0<x-E;)v=Za(v),x--;for(;0<E-x;)_=Za(_),E--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=Za(v),_=Za(_)}v=null}else v=null;m!==null&&RE(h,p,m,v,!1),y!==null&&I!==null&&RE(h,I,y,v,!0)}}e:{if(p=u?gl(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var L=Gj;else if(TE(p))if(Ik)L=Yj;else{L=Kj;var j=Hj}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=Qj);if(L&&(L=L(t,u))){Tk(h,L,n,c);break e}j&&j(t,p,u),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&Vy(p,"number",p.value)}switch(j=u?gl(u):window,t){case"focusin":(TE(j)||j.contentEditable==="true")&&(pl=j,Gy=u,Ac=null);break;case"focusout":Ac=Gy=pl=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,AE(h,n,c);break;case"selectionchange":if(Zj)break;case"keydown":case"keyup":AE(h,n,c)}var S;if(Wv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else fl?_k(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(xk&&n.locale!=="ko"&&(fl||T!=="onCompositionStart"?T==="onCompositionEnd"&&fl&&(S=wk()):(Fs=c,Bv="value"in Fs?Fs.value:Fs.textContent,fl=!0)),j=Yf(u,T),0<j.length&&(T=new wE(T,t,null,n,c),h.push({event:T,listeners:j}),S?T.data=S:(S=Ek(n),S!==null&&(T.data=S)))),(S=Bj?zj(t,n):$j(t,n))&&(u=Yf(u,"onBeforeInput"),0<u.length&&(c=new wE("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=S))}Vk(h,e)})}function ad(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ed(t,n),s!=null&&r.unshift(ad(t,s,i)),s=ed(t,e),s!=null&&r.push(ad(t,s,i))),t=t.return}return r}function Za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ed(n,s),l!=null&&o.unshift(ad(n,l,a))):i||(l=ed(n,s),l!=null&&o.push(ad(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rO=/\r\n?/g,iO=/\u0000|\uFFFD/g;function NE(t){return(typeof t=="string"?t:""+t).replace(rO,`
`).replace(iO,"")}function Vh(t,e,n){if(e=NE(e),NE(t)!==e&&n)throw Error(Z(425))}function Xf(){}var Ky=null,Qy=null;function Yy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xy=typeof setTimeout=="function"?setTimeout:void 0,sO=typeof clearTimeout=="function"?clearTimeout:void 0,DE=typeof Promise=="function"?Promise:void 0,oO=typeof queueMicrotask=="function"?queueMicrotask:typeof DE<"u"?function(t){return DE.resolve(null).then(t).catch(aO)}:Xy;function aO(t){setTimeout(function(){throw t})}function bg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),rd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rd(e)}function Hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function VE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),yi="__reactFiber$"+Tu,ld="__reactProps$"+Tu,ns="__reactContainer$"+Tu,Jy="__reactEvents$"+Tu,lO="__reactListeners$"+Tu,uO="__reactHandles$"+Tu;function sa(t){var e=t[yi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[yi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=VE(t);t!==null;){if(n=t[yi])return n;t=VE(t)}return e}t=n,n=t.parentNode}return null}function Ld(t){return t=t[yi]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function im(t){return t[ld]||null}var Zy=[],yl=-1;function _o(t){return{current:t}}function Vt(t){0>yl||(t.current=Zy[yl],Zy[yl]=null,yl--)}function It(t,e){yl++,Zy[yl]=t.current,t.current=e}var oo={},Qn=_o(oo),fr=_o(!1),xa=oo;function ql(t,e){var n=t.type.contextTypes;if(!n)return oo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pr(t){return t=t.childContextTypes,t!=null}function Jf(){Vt(fr),Vt(Qn)}function jE(t,e,n){if(Qn.current!==oo)throw Error(Z(168));It(Qn,e),It(fr,n)}function Ok(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,HV(t)||"Unknown",i));return Gt({},n,r)}function Zf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oo,xa=Qn.current,It(Qn,t),It(fr,fr.current),!0}function OE(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=Ok(t,e,xa),r.__reactInternalMemoizedMergedChildContext=t,Vt(fr),Vt(Qn),It(Qn,t)):Vt(fr),It(fr,n)}var zi=null,sm=!1,kg=!1;function Mk(t){zi===null?zi=[t]:zi.push(t)}function cO(t){sm=!0,Mk(t)}function Eo(){if(!kg&&zi!==null){kg=!0;var t=0,e=yt;try{var n=zi;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zi=null,sm=!1}catch(i){throw zi!==null&&(zi=zi.slice(t+1)),lk(Mv,Eo),i}finally{yt=e,kg=!1}}return null}var vl=[],wl=0,ep=null,tp=0,Ur=[],Br=0,_a=null,Wi=1,qi="";function $o(t,e){vl[wl++]=tp,vl[wl++]=ep,ep=t,tp=e}function Lk(t,e,n){Ur[Br++]=Wi,Ur[Br++]=qi,Ur[Br++]=_a,_a=t;var r=Wi;t=qi;var i=32-ti(r)-1;r&=~(1<<i),n+=1;var s=32-ti(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wi=1<<32-ti(e)+i|n<<i|r,qi=s+t}else Wi=1<<s|n<<i|r,qi=t}function Gv(t){t.return!==null&&($o(t,1),Lk(t,1,0))}function Hv(t){for(;t===ep;)ep=vl[--wl],vl[wl]=null,tp=vl[--wl],vl[wl]=null;for(;t===_a;)_a=Ur[--Br],Ur[Br]=null,qi=Ur[--Br],Ur[Br]=null,Wi=Ur[--Br],Ur[Br]=null}var kr=null,Sr=null,Mt=!1,ei=null;function Fk(t,e){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ME(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Sr=Hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_a!==null?{id:Wi,overflow:qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,Sr=null,!0):!1;default:return!1}}function e0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t0(t){if(Mt){var e=Sr;if(e){var n=e;if(!ME(t,e)){if(e0(t))throw Error(Z(418));e=Hs(n.nextSibling);var r=kr;e&&ME(t,e)?Fk(r,n):(t.flags=t.flags&-4097|2,Mt=!1,kr=t)}}else{if(e0(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Mt=!1,kr=t}}}function LE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function jh(t){if(t!==kr)return!1;if(!Mt)return LE(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yy(t.type,t.memoizedProps)),e&&(e=Sr)){if(e0(t))throw Uk(),Error(Z(418));for(;e;)Fk(t,e),e=Hs(e.nextSibling)}if(LE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sr=Hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=kr?Hs(t.stateNode.nextSibling):null;return!0}function Uk(){for(var t=Sr;t;)t=Hs(t.nextSibling)}function Gl(){Sr=kr=null,Mt=!1}function Kv(t){ei===null?ei=[t]:ei.push(t)}var dO=cs.ReactCurrentBatchConfig;function tc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function FE(t){var e=t._init;return e(t._payload)}function Bk(t){function e(_,x){if(t){var E=_.deletions;E===null?(_.deletions=[x],_.flags|=16):E.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=Xs(_,x),_.index=0,_.sibling=null,_}function s(_,x,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<x?(_.flags|=2,x):E):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,E,V){return x===null||x.tag!==6?(x=Vg(E,_.mode,V),x.return=_,x):(x=i(x,E),x.return=_,x)}function l(_,x,E,V){var L=E.type;return L===hl?c(_,x,E.props.children,V,E.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ks&&FE(L)===x.type)?(V=i(x,E.props),V.ref=tc(_,x,E),V.return=_,V):(V=xf(E.type,E.key,E.props,null,_.mode,V),V.ref=tc(_,x,E),V.return=_,V)}function u(_,x,E,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=jg(E,_.mode,V),x.return=_,x):(x=i(x,E.children||[]),x.return=_,x)}function c(_,x,E,V,L){return x===null||x.tag!==7?(x=ha(E,_.mode,V,L),x.return=_,x):(x=i(x,E),x.return=_,x)}function h(_,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Vg(""+x,_.mode,E),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sh:return E=xf(x.type,x.key,x.props,null,_.mode,E),E.ref=tc(_,null,x),E.return=_,E;case dl:return x=jg(x,_.mode,E),x.return=_,x;case ks:var V=x._init;return h(_,V(x._payload),E)}if(gc(x)||Yu(x))return x=ha(x,_.mode,E,null),x.return=_,x;Oh(_,x)}return null}function p(_,x,E,V){var L=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(_,x,""+E,V);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sh:return E.key===L?l(_,x,E,V):null;case dl:return E.key===L?u(_,x,E,V):null;case ks:return L=E._init,p(_,x,L(E._payload),V)}if(gc(E)||Yu(E))return L!==null?null:c(_,x,E,V,null);Oh(_,E)}return null}function m(_,x,E,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return _=_.get(E)||null,a(x,_,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Sh:return _=_.get(V.key===null?E:V.key)||null,l(x,_,V,L);case dl:return _=_.get(V.key===null?E:V.key)||null,u(x,_,V,L);case ks:var j=V._init;return m(_,x,E,j(V._payload),L)}if(gc(V)||Yu(V))return _=_.get(E)||null,c(x,_,V,L,null);Oh(x,V)}return null}function y(_,x,E,V){for(var L=null,j=null,S=x,T=x=0,k=null;S!==null&&T<E.length;T++){S.index>T?(k=S,S=null):k=S.sibling;var C=p(_,S,E[T],V);if(C===null){S===null&&(S=k);break}t&&S&&C.alternate===null&&e(_,S),x=s(C,x,T),j===null?L=C:j.sibling=C,j=C,S=k}if(T===E.length)return n(_,S),Mt&&$o(_,T),L;if(S===null){for(;T<E.length;T++)S=h(_,E[T],V),S!==null&&(x=s(S,x,T),j===null?L=S:j.sibling=S,j=S);return Mt&&$o(_,T),L}for(S=r(_,S);T<E.length;T++)k=m(S,_,T,E[T],V),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),x=s(k,x,T),j===null?L=k:j.sibling=k,j=k);return t&&S.forEach(function(P){return e(_,P)}),Mt&&$o(_,T),L}function v(_,x,E,V){var L=Yu(E);if(typeof L!="function")throw Error(Z(150));if(E=L.call(E),E==null)throw Error(Z(151));for(var j=L=null,S=x,T=x=0,k=null,C=E.next();S!==null&&!C.done;T++,C=E.next()){S.index>T?(k=S,S=null):k=S.sibling;var P=p(_,S,C.value,V);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(_,S),x=s(P,x,T),j===null?L=P:j.sibling=P,j=P,S=k}if(C.done)return n(_,S),Mt&&$o(_,T),L;if(S===null){for(;!C.done;T++,C=E.next())C=h(_,C.value,V),C!==null&&(x=s(C,x,T),j===null?L=C:j.sibling=C,j=C);return Mt&&$o(_,T),L}for(S=r(_,S);!C.done;T++,C=E.next())C=m(S,_,T,C.value,V),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),x=s(C,x,T),j===null?L=C:j.sibling=C,j=C);return t&&S.forEach(function(N){return e(_,N)}),Mt&&$o(_,T),L}function I(_,x,E,V){if(typeof E=="object"&&E!==null&&E.type===hl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Sh:e:{for(var L=E.key,j=x;j!==null;){if(j.key===L){if(L=E.type,L===hl){if(j.tag===7){n(_,j.sibling),x=i(j,E.props.children),x.return=_,_=x;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ks&&FE(L)===j.type){n(_,j.sibling),x=i(j,E.props),x.ref=tc(_,j,E),x.return=_,_=x;break e}n(_,j);break}else e(_,j);j=j.sibling}E.type===hl?(x=ha(E.props.children,_.mode,V,E.key),x.return=_,_=x):(V=xf(E.type,E.key,E.props,null,_.mode,V),V.ref=tc(_,x,E),V.return=_,_=V)}return o(_);case dl:e:{for(j=E.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(_,x.sibling),x=i(x,E.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=jg(E,_.mode,V),x.return=_,_=x}return o(_);case ks:return j=E._init,I(_,x,j(E._payload),V)}if(gc(E))return y(_,x,E,V);if(Yu(E))return v(_,x,E,V);Oh(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,E),x.return=_,_=x):(n(_,x),x=Vg(E,_.mode,V),x.return=_,_=x),o(_)):n(_,x)}return I}var Hl=Bk(!0),zk=Bk(!1),np=_o(null),rp=null,xl=null,Qv=null;function Yv(){Qv=xl=rp=null}function Xv(t){var e=np.current;Vt(np),t._currentValue=e}function n0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Nl(t,e){rp=t,Qv=xl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ur=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(Qv!==t)if(t={context:t,memoizedValue:e,next:null},xl===null){if(rp===null)throw Error(Z(308));xl=t,rp.dependencies={lanes:0,firstContext:t}}else xl=xl.next=t;return e}var oa=null;function Jv(t){oa===null?oa=[t]:oa.push(t)}function $k(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Jv(e)):(n.next=i.next,i.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function Zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rs(t,n)}return i=r.interleaved,i===null?(e.next=e,Jv(r)):(e.next=i.next,i.next=e),r.interleaved=e,rs(t,n)}function pf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ip(t,e,n,r){var i=t.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=Gt({},h,p);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ta|=o,t.lanes=o,t.memoizedState=h}}function BE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Fd={},Ii=_o(Fd),ud=_o(Fd),cd=_o(Fd);function aa(t){if(t===Fd)throw Error(Z(174));return t}function ew(t,e){switch(It(cd,e),It(ud,t),It(Ii,Fd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oy(e,t)}Vt(Ii),It(Ii,e)}function Kl(){Vt(Ii),Vt(ud),Vt(cd)}function qk(t){aa(cd.current);var e=aa(Ii.current),n=Oy(e,t.type);e!==n&&(It(ud,t),It(Ii,n))}function tw(t){ud.current===t&&(Vt(Ii),Vt(ud))}var zt=_o(0);function sp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ag=[];function nw(){for(var t=0;t<Ag.length;t++)Ag[t]._workInProgressVersionPrimary=null;Ag.length=0}var mf=cs.ReactCurrentDispatcher,Pg=cs.ReactCurrentBatchConfig,Ea=0,qt=null,yn=null,In=null,op=!1,Pc=!1,dd=0,hO=0;function Bn(){throw Error(Z(321))}function rw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oi(t[n],e[n]))return!1;return!0}function iw(t,e,n,r,i,s){if(Ea=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mf.current=t===null||t.memoizedState===null?gO:yO,t=n(r,i),Pc){s=0;do{if(Pc=!1,dd=0,25<=s)throw Error(Z(301));s+=1,In=yn=null,e.updateQueue=null,mf.current=vO,t=n(r,i)}while(Pc)}if(mf.current=ap,e=yn!==null&&yn.next!==null,Ea=0,In=yn=qt=null,op=!1,e)throw Error(Z(300));return t}function sw(){var t=dd!==0;return dd=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?qt.memoizedState=In=t:In=In.next=t,In}function Gr(){if(yn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=In===null?qt.memoizedState:In.next;if(e!==null)In=e,yn=t;else{if(t===null)throw Error(Z(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},In===null?qt.memoizedState=In=t:In=In.next=t}return In}function hd(t,e){return typeof e=="function"?e(t):e}function Cg(t){var e=Gr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=yn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ea&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qt.lanes|=c,Ta|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,oi(r,e.memoizedState)||(ur=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qt.lanes|=s,Ta|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rg(t){var e=Gr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);oi(s,e.memoizedState)||(ur=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Gk(){}function Hk(t,e){var n=qt,r=Gr(),i=e(),s=!oi(r.memoizedState,i);if(s&&(r.memoizedState=i,ur=!0),r=r.queue,ow(Yk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,fd(9,Qk.bind(null,n,r,i,e),void 0,null),bn===null)throw Error(Z(349));Ea&30||Kk(n,e,i)}return i}function Kk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qk(t,e,n,r){e.value=n,e.getSnapshot=r,Xk(e)&&Jk(t)}function Yk(t,e,n){return n(function(){Xk(e)&&Jk(t)})}function Xk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oi(t,n)}catch{return!0}}function Jk(t){var e=rs(t,1);e!==null&&ni(e,t,1,-1)}function zE(t){var e=mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:t},e.queue=t,t=t.dispatch=mO.bind(null,qt,t),[e.memoizedState,t]}function fd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zk(){return Gr().memoizedState}function gf(t,e,n,r){var i=mi();qt.flags|=t,i.memoizedState=fd(1|e,n,void 0,r===void 0?null:r)}function om(t,e,n,r){var i=Gr();r=r===void 0?null:r;var s=void 0;if(yn!==null){var o=yn.memoizedState;if(s=o.destroy,r!==null&&rw(r,o.deps)){i.memoizedState=fd(e,n,s,r);return}}qt.flags|=t,i.memoizedState=fd(1|e,n,s,r)}function $E(t,e){return gf(8390656,8,t,e)}function ow(t,e){return om(2048,8,t,e)}function eA(t,e){return om(4,2,t,e)}function tA(t,e){return om(4,4,t,e)}function nA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rA(t,e,n){return n=n!=null?n.concat([t]):null,om(4,4,nA.bind(null,e,t),n)}function aw(){}function iA(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sA(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oA(t,e,n){return Ea&21?(oi(n,e)||(n=dk(),qt.lanes|=n,Ta|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ur=!0),t.memoizedState=n)}function fO(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=Pg.transition;Pg.transition={};try{t(!1),e()}finally{yt=n,Pg.transition=r}}function aA(){return Gr().memoizedState}function pO(t,e,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lA(t))uA(e,n);else if(n=$k(t,e,n,r),n!==null){var i=er();ni(n,t,r,i),cA(n,e,r)}}function mO(t,e,n){var r=Ys(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lA(t))uA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,oi(a,o)){var l=e.interleaved;l===null?(i.next=i,Jv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$k(t,e,i,r),n!==null&&(i=er(),ni(n,t,r,i),cA(n,e,r))}}function lA(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function uA(t,e){Pc=op=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}var ap={readContext:qr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},gO={readContext:qr,useCallback:function(t,e){return mi().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:$E,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gf(4194308,4,nA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gf(4194308,4,t,e)},useInsertionEffect:function(t,e){return gf(4,2,t,e)},useMemo:function(t,e){var n=mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pO.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=mi();return t={current:t},e.memoizedState=t},useState:zE,useDebugValue:aw,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=zE(!1),e=t[0];return t=fO.bind(null,t[1]),mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,i=mi();if(Mt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),bn===null)throw Error(Z(349));Ea&30||Kk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,$E(Yk.bind(null,r,s,t),[t]),r.flags|=2048,fd(9,Qk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=mi(),e=bn.identifierPrefix;if(Mt){var n=qi,r=Wi;n=(r&~(1<<32-ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yO={readContext:qr,useCallback:iA,useContext:qr,useEffect:ow,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:Cg,useRef:Zk,useState:function(){return Cg(hd)},useDebugValue:aw,useDeferredValue:function(t){var e=Gr();return oA(e,yn.memoizedState,t)},useTransition:function(){var t=Cg(hd)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:Gk,useSyncExternalStore:Hk,useId:aA,unstable_isNewReconciler:!1},vO={readContext:qr,useCallback:iA,useContext:qr,useEffect:ow,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:Rg,useRef:Zk,useState:function(){return Rg(hd)},useDebugValue:aw,useDeferredValue:function(t){var e=Gr();return yn===null?e.memoizedState=t:oA(e,yn.memoizedState,t)},useTransition:function(){var t=Rg(hd)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:Gk,useSyncExternalStore:Hk,useId:aA,unstable_isNewReconciler:!1};function Jr(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var am={isMounted:function(t){return(t=t._reactInternals)?Ua(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=er(),i=Ys(t),s=Ji(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ks(t,s,i),e!==null&&(ni(e,t,i,r),pf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=er(),i=Ys(t),s=Ji(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ks(t,s,i),e!==null&&(ni(e,t,i,r),pf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),r=Ys(t),i=Ji(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ks(t,i,r),e!==null&&(ni(e,t,r,n),pf(e,t,r))}};function WE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!sd(n,r)||!sd(i,s):!0}function dA(t,e,n){var r=!1,i=oo,s=e.contextType;return typeof s=="object"&&s!==null?s=qr(s):(i=pr(e)?xa:Qn.current,r=e.contextTypes,s=(r=r!=null)?ql(t,i):oo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=am,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function qE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&am.enqueueReplaceState(e,e.state,null)}function i0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Zv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qr(s):(s=pr(e)?xa:Qn.current,i.context=ql(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(r0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&am.enqueueReplaceState(i,i.state,null),ip(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ql(t,e){try{var n="",r=e;do n+=GV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ng(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wO=typeof WeakMap=="function"?WeakMap:Map;function hA(t,e,n){n=Ji(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){up||(up=!0,m0=r),s0(t,e)},n}function fA(t,e,n){n=Ji(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){s0(t,e),typeof r!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function GE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=DO.bind(null,t,e,n),e.then(t,t))}function HE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ji(-1,1),e.tag=2,Ks(n,e,1))),n.lanes|=1),t)}var xO=cs.ReactCurrentOwner,ur=!1;function Zn(t,e,n,r){e.child=t===null?zk(e,null,n,r):Hl(e,t.child,n,r)}function QE(t,e,n,r,i){n=n.render;var s=e.ref;return Nl(e,i),r=iw(t,e,n,r,s,i),n=sw(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(Mt&&n&&Gv(e),e.flags|=1,Zn(t,e,r,i),e.child)}function YE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pA(t,e,s,r,i)):(t=xf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sd,n(o,r)&&t.ref===e.ref)return is(t,e,i)}return e.flags|=1,t=Xs(s,r),t.ref=e.ref,t.return=e,e.child=t}function pA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(sd(s,r)&&t.ref===e.ref)if(ur=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ur=!0);else return e.lanes=t.lanes,is(t,e,i)}return o0(t,e,n,r,i)}function mA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(El,Ir),Ir|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(El,Ir),Ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,It(El,Ir),Ir|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,It(El,Ir),Ir|=r;return Zn(t,e,i,n),e.child}function gA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o0(t,e,n,r,i){var s=pr(n)?xa:Qn.current;return s=ql(e,s),Nl(e,i),n=iw(t,e,n,r,s,i),r=sw(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(Mt&&r&&Gv(e),e.flags|=1,Zn(t,e,n,i),e.child)}function XE(t,e,n,r,i){if(pr(n)){var s=!0;Zf(e)}else s=!1;if(Nl(e,i),e.stateNode===null)yf(t,e),dA(e,n,r),i0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qr(u):(u=pr(n)?xa:Qn.current,u=ql(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&qE(e,o,r,u),As=!1;var p=e.memoizedState;o.state=p,ip(e,r,o,i),l=e.memoizedState,a!==r||p!==l||fr.current||As?(typeof c=="function"&&(r0(e,n,c,r),l=e.memoizedState),(a=As||WE(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jr(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=pr(n)?xa:Qn.current,l=ql(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&qE(e,o,r,l),As=!1,p=e.memoizedState,o.state=p,ip(e,r,o,i);var y=e.memoizedState;a!==h||p!==y||fr.current||As?(typeof m=="function"&&(r0(e,n,m,r),y=e.memoizedState),(u=As||WE(e,n,u,r,p,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return a0(t,e,n,r,s,i)}function a0(t,e,n,r,i,s){gA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&OE(e,n,!1),is(t,e,s);r=e.stateNode,xO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,s),e.child=Hl(e,null,a,s)):Zn(t,e,a,s),e.memoizedState=r.state,i&&OE(e,n,!0),e.child}function yA(t){var e=t.stateNode;e.pendingContext?jE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jE(t,e.context,!1),ew(t,e.containerInfo)}function JE(t,e,n,r,i){return Gl(),Kv(i),e.flags|=256,Zn(t,e,n,r),e.child}var l0={dehydrated:null,treeContext:null,retryLane:0};function u0(t){return{baseLanes:t,cachePool:null,transitions:null}}function vA(t,e,n){var r=e.pendingProps,i=zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),It(zt,i&1),t===null)return t0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cm(o,r,0,null),t=ha(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=u0(n),e.memoizedState=l0,t):lw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _O(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xs(a,s):(s=ha(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?u0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=l0,r}return s=t.child,t=s.sibling,r=Xs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lw(t,e){return e=cm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mh(t,e,n,r){return r!==null&&Kv(r),Hl(e,t.child,null,n),t=lw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _O(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ng(Error(Z(422))),Mh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cm({mode:"visible",children:r.children},i,0,null),s=ha(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=u0(o),e.memoizedState=l0,s);if(!(e.mode&1))return Mh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Ng(s,r,void 0),Mh(t,e,o,r)}if(a=(o&t.childLanes)!==0,ur||a){if(r=bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rs(t,i),ni(r,t,i,-1))}return pw(),r=Ng(Error(Z(421))),Mh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sr=Hs(i.nextSibling),kr=e,Mt=!0,ei=null,t!==null&&(Ur[Br++]=Wi,Ur[Br++]=qi,Ur[Br++]=_a,Wi=t.id,qi=t.overflow,_a=e),e=lw(e,r.children),e.flags|=4096,e)}function ZE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n0(t.return,e,n)}function Dg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Zn(t,e,r.children,n),r=zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZE(t,n,e);else if(t.tag===19)ZE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(zt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dg(e,!0,n,null,s);break;case"together":Dg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ta|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EO(t,e,n){switch(e.tag){case 3:yA(e),Gl();break;case 5:qk(e);break;case 1:pr(e.type)&&Zf(e);break;case 4:ew(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;It(np,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(zt,zt.current&1),e.flags|=128,null):n&e.child.childLanes?vA(t,e,n):(It(zt,zt.current&1),t=is(t,e,n),t!==null?t.sibling:null);It(zt,zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(zt,zt.current),r)break;return null;case 22:case 23:return e.lanes=0,mA(t,e,n)}return is(t,e,n)}var xA,c0,_A,EA;xA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c0=function(){};_A=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,aa(Ii.current);var s=null;switch(n){case"input":i=Ny(t,i),r=Ny(t,r),s=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),s=[];break;case"textarea":i=jy(t,i),r=jy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xf)}My(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};EA=function(t,e,n,r){n!==r&&(e.flags|=4)};function nc(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TO(t,e,n){var r=e.pendingProps;switch(Hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return pr(e.type)&&Jf(),zn(e),null;case 3:return r=e.stateNode,Kl(),Vt(fr),Vt(Qn),nw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ei!==null&&(v0(ei),ei=null))),c0(t,e),zn(e),null;case 5:tw(e);var i=aa(cd.current);if(n=e.type,t!==null&&e.stateNode!=null)_A(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return zn(e),null}if(t=aa(Ii.current),jh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yi]=e,r[ld]=s,t=(e.mode&1)!==0,n){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(i=0;i<vc.length;i++)Rt(vc[i],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":lE(r,s),Rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rt("invalid",r);break;case"textarea":cE(r,s),Rt("invalid",r)}My(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vh(r.textContent,a,t),i=["children",""+a]):Jc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",r)}switch(n){case"input":bh(r),uE(r,s,!0);break;case"textarea":bh(r),dE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yi]=e,t[ld]=r,xA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ly(n,r),n){case"dialog":Rt("cancel",t),Rt("close",t),i=r;break;case"iframe":case"object":case"embed":Rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<vc.length;i++)Rt(vc[i],t);i=r;break;case"source":Rt("error",t),i=r;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),i=r;break;case"details":Rt("toggle",t),i=r;break;case"input":lE(t,r),i=Ny(t,r),Rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),Rt("invalid",t);break;case"textarea":cE(t,r),i=jy(t,r),Rt("invalid",t);break;default:i=r}My(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Zb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zc(t,l):typeof l=="number"&&Zc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rt("scroll",t):l!=null&&Nv(t,s,l,o))}switch(n){case"input":bh(t),uE(t,r,!1);break;case"textarea":bh(t),dE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+so(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Al(t,!!r.multiple,s,!1):r.defaultValue!=null&&Al(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(t&&e.stateNode!=null)EA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=aa(cd.current),aa(Ii.current),jh(e)){if(r=e.stateNode,n=e.memoizedProps,r[yi]=e,(s=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:Vh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yi]=e,e.stateNode=r}return zn(e),null;case 13:if(Vt(zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&Sr!==null&&e.mode&1&&!(e.flags&128))Uk(),Gl(),e.flags|=98560,s=!1;else if(s=jh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[yi]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),s=!1}else ei!==null&&(v0(ei),ei=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||zt.current&1?vn===0&&(vn=3):pw())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return Kl(),c0(t,e),t===null&&od(e.stateNode.containerInfo),zn(e),null;case 10:return Xv(e.type._context),zn(e),null;case 17:return pr(e.type)&&Jf(),zn(e),null;case 19:if(Vt(zt),s=e.memoizedState,s===null)return zn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)nc(s,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sp(t),o!==null){for(e.flags|=128,nc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(zt,zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&on()>Yl&&(e.flags|=128,r=!0,nc(s,!1),e.lanes=4194304)}else{if(!r)if(t=sp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return zn(e),null}else 2*on()-s.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,nc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=on(),e.sibling=null,n=zt.current,It(zt,r?n&1|2:n&1),e):(zn(e),null);case 22:case 23:return fw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function IO(t,e){switch(Hv(e),e.tag){case 1:return pr(e.type)&&Jf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),Vt(fr),Vt(Qn),nw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tw(e),null;case 13:if(Vt(zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(zt),null;case 4:return Kl(),null;case 10:return Xv(e.type._context),null;case 22:case 23:return fw(),null;case 24:return null;default:return null}}var Lh=!1,Gn=!1,SO=typeof WeakSet=="function"?WeakSet:Set,me=null;function _l(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yt(t,e,r)}else n.current=null}function d0(t,e,n){try{n()}catch(r){Yt(t,e,r)}}var eT=!1;function bO(t,e){if(Ky=Kf,t=kk(),qv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++c===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qy={focusedElem:t,selectionRange:n},Kf=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,I=y.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Jr(e.type,v),I);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(V){Yt(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return y=eT,eT=!1,y}function Cc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&d0(e,n,s)}i=i.next}while(i!==r)}}function lm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TA(t){var e=t.alternate;e!==null&&(t.alternate=null,TA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yi],delete e[ld],delete e[Jy],delete e[lO],delete e[uO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IA(t){return t.tag===5||t.tag===3||t.tag===4}function tT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xf));else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}function p0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(p0(t,e,n),t=t.sibling;t!==null;)p0(t,e,n),t=t.sibling}var Rn=null,Zr=!1;function xs(t,e,n){for(n=n.child;n!==null;)SA(t,e,n),n=n.sibling}function SA(t,e,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(em,n)}catch{}switch(n.tag){case 5:Gn||_l(n,e);case 6:var r=Rn,i=Zr;Rn=null,xs(t,e,n),Rn=r,Zr=i,Rn!==null&&(Zr?(t=Rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(Zr?(t=Rn,n=n.stateNode,t.nodeType===8?bg(t.parentNode,n):t.nodeType===1&&bg(t,n),rd(t)):bg(Rn,n.stateNode));break;case 4:r=Rn,i=Zr,Rn=n.stateNode.containerInfo,Zr=!0,xs(t,e,n),Rn=r,Zr=i;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&d0(n,e,o),i=i.next}while(i!==r)}xs(t,e,n);break;case 1:if(!Gn&&(_l(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yt(n,e,a)}xs(t,e,n);break;case 21:xs(t,e,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,xs(t,e,n),Gn=r):xs(t,e,n);break;default:xs(t,e,n)}}function nT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SO),e.forEach(function(r){var i=jO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rn=a.stateNode,Zr=!1;break e;case 3:Rn=a.stateNode.containerInfo,Zr=!0;break e;case 4:Rn=a.stateNode.containerInfo,Zr=!0;break e}a=a.return}if(Rn===null)throw Error(Z(160));SA(s,o,i),Rn=null,Zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Yt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bA(e,t),e=e.sibling}function bA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xr(e,t),pi(t),r&4){try{Cc(3,t,t.return),lm(3,t)}catch(v){Yt(t,t.return,v)}try{Cc(5,t,t.return)}catch(v){Yt(t,t.return,v)}}break;case 1:Xr(e,t),pi(t),r&512&&n!==null&&_l(n,n.return);break;case 5:if(Xr(e,t),pi(t),r&512&&n!==null&&_l(n,n.return),t.flags&32){var i=t.stateNode;try{Zc(i,"")}catch(v){Yt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Kb(i,s),Ly(a,o);var u=Ly(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Zb(i,h):c==="dangerouslySetInnerHTML"?Xb(i,h):c==="children"?Zc(i,h):Nv(i,c,h,u)}switch(a){case"input":Dy(i,s);break;case"textarea":Qb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Al(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Al(i,!!s.multiple,s.defaultValue,!0):Al(i,!!s.multiple,s.multiple?[]:"",!1))}i[ld]=s}catch(v){Yt(t,t.return,v)}}break;case 6:if(Xr(e,t),pi(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Yt(t,t.return,v)}}break;case 3:if(Xr(e,t),pi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rd(e.containerInfo)}catch(v){Yt(t,t.return,v)}break;case 4:Xr(e,t),pi(t);break;case 13:Xr(e,t),pi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dw=on())),r&4&&nT(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Gn=(u=Gn)||c,Xr(e,t),Gn=u):Xr(e,t),pi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(me=t,c=t.child;c!==null;){for(h=me=c;me!==null;){switch(p=me,m=p.child,p.tag){case 0:case 11:case 14:case 15:Cc(4,p,p.return);break;case 1:_l(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Yt(r,n,v)}}break;case 5:_l(p,p.return);break;case 22:if(p.memoizedState!==null){iT(h);continue}}m!==null?(m.return=p,me=m):iT(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jb("display",o))}catch(v){Yt(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Yt(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xr(e,t),pi(t),r&4&&nT(t);break;case 21:break;default:Xr(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IA(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zc(i,""),r.flags&=-33);var s=tT(t);p0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tT(t);f0(t,a,o);break;default:throw Error(Z(161))}}catch(l){Yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kO(t,e,n){me=t,kA(t)}function kA(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var i=me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Lh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Gn;a=Lh;var u=Gn;if(Lh=o,(Gn=l)&&!u)for(me=i;me!==null;)o=me,l=o.child,o.tag===22&&o.memoizedState!==null?sT(i):l!==null?(l.return=o,me=l):sT(i);for(;s!==null;)me=s,kA(s),s=s.sibling;me=i,Lh=a,Gn=u}rT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,me=s):rT(t)}}function rT(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gn||lm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&rd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Gn||e.flags&512&&h0(e)}catch(p){Yt(e,e.return,p)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function iT(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function sT(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lm(4,e)}catch(l){Yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yt(e,i,l)}}var s=e.return;try{h0(e)}catch(l){Yt(e,s,l)}break;case 5:var o=e.return;try{h0(e)}catch(l){Yt(e,o,l)}}}catch(l){Yt(e,e.return,l)}if(e===t){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var AO=Math.ceil,lp=cs.ReactCurrentDispatcher,uw=cs.ReactCurrentOwner,Wr=cs.ReactCurrentBatchConfig,st=0,bn=null,mn=null,Vn=0,Ir=0,El=_o(0),vn=0,pd=null,Ta=0,um=0,cw=0,Rc=null,lr=null,dw=0,Yl=1/0,Bi=null,up=!1,m0=null,Qs=null,Fh=!1,Us=null,cp=0,Nc=0,g0=null,vf=-1,wf=0;function er(){return st&6?on():vf!==-1?vf:vf=on()}function Ys(t){return t.mode&1?st&2&&Vn!==0?Vn&-Vn:dO.transition!==null?(wf===0&&(wf=dk()),wf):(t=yt,t!==0||(t=window.event,t=t===void 0?16:vk(t.type)),t):1}function ni(t,e,n,r){if(50<Nc)throw Nc=0,g0=null,Error(Z(185));Od(t,n,r),(!(st&2)||t!==bn)&&(t===bn&&(!(st&2)&&(um|=n),vn===4&&Ns(t,Vn)),mr(t,r),n===1&&st===0&&!(e.mode&1)&&(Yl=on()+500,sm&&Eo()))}function mr(t,e){var n=t.callbackNode;dj(t,e);var r=Hf(t,t===bn?Vn:0);if(r===0)n!==null&&pE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pE(n),e===1)t.tag===0?cO(oT.bind(null,t)):Mk(oT.bind(null,t)),oO(function(){!(st&6)&&Eo()}),n=null;else{switch(hk(r)){case 1:n=Mv;break;case 4:n=uk;break;case 16:n=Gf;break;case 536870912:n=ck;break;default:n=Gf}n=jA(n,AA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AA(t,e){if(vf=-1,wf=0,st&6)throw Error(Z(327));var n=t.callbackNode;if(Dl()&&t.callbackNode!==n)return null;var r=Hf(t,t===bn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dp(t,r);else{e=r;var i=st;st|=2;var s=CA();(bn!==t||Vn!==e)&&(Bi=null,Yl=on()+500,da(t,e));do try{RO();break}catch(a){PA(t,a)}while(!0);Yv(),lp.current=s,st=i,mn!==null?e=0:(bn=null,Vn=0,e=vn)}if(e!==0){if(e===2&&(i=$y(t),i!==0&&(r=i,e=y0(t,i))),e===1)throw n=pd,da(t,0),Ns(t,r),mr(t,on()),n;if(e===6)Ns(t,r);else{if(i=t.current.alternate,!(r&30)&&!PO(i)&&(e=dp(t,r),e===2&&(s=$y(t),s!==0&&(r=s,e=y0(t,s))),e===1))throw n=pd,da(t,0),Ns(t,r),mr(t,on()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Wo(t,lr,Bi);break;case 3:if(Ns(t,r),(r&130023424)===r&&(e=dw+500-on(),10<e)){if(Hf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){er(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xy(Wo.bind(null,t,lr,Bi),e);break}Wo(t,lr,Bi);break;case 4:if(Ns(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ti(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AO(r/1960))-r,10<r){t.timeoutHandle=Xy(Wo.bind(null,t,lr,Bi),r);break}Wo(t,lr,Bi);break;case 5:Wo(t,lr,Bi);break;default:throw Error(Z(329))}}}return mr(t,on()),t.callbackNode===n?AA.bind(null,t):null}function y0(t,e){var n=Rc;return t.current.memoizedState.isDehydrated&&(da(t,e).flags|=256),t=dp(t,e),t!==2&&(e=lr,lr=n,e!==null&&v0(e)),t}function v0(t){lr===null?lr=t:lr.push.apply(lr,t)}function PO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!oi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ns(t,e){for(e&=~cw,e&=~um,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ti(e),r=1<<n;t[n]=-1,e&=~r}}function oT(t){if(st&6)throw Error(Z(327));Dl();var e=Hf(t,0);if(!(e&1))return mr(t,on()),null;var n=dp(t,e);if(t.tag!==0&&n===2){var r=$y(t);r!==0&&(e=r,n=y0(t,r))}if(n===1)throw n=pd,da(t,0),Ns(t,e),mr(t,on()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wo(t,lr,Bi),mr(t,on()),null}function hw(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(Yl=on()+500,sm&&Eo())}}function Ia(t){Us!==null&&Us.tag===0&&!(st&6)&&Dl();var e=st;st|=1;var n=Wr.transition,r=yt;try{if(Wr.transition=null,yt=1,t)return t()}finally{yt=r,Wr.transition=n,st=e,!(st&6)&&Eo()}}function fw(){Ir=El.current,Vt(El)}function da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sO(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(Hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:Kl(),Vt(fr),Vt(Qn),nw();break;case 5:tw(r);break;case 4:Kl();break;case 13:Vt(zt);break;case 19:Vt(zt);break;case 10:Xv(r.type._context);break;case 22:case 23:fw()}n=n.return}if(bn=t,mn=t=Xs(t.current,null),Vn=Ir=e,vn=0,pd=null,cw=um=Ta=0,lr=Rc=null,oa!==null){for(e=0;e<oa.length;e++)if(n=oa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}oa=null}return t}function PA(t,e){do{var n=mn;try{if(Yv(),mf.current=ap,op){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}op=!1}if(Ea=0,In=yn=qt=null,Pc=!1,dd=0,uw.current=null,n===null||n.return===null){vn=1,pd=e,mn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=HE(o);if(m!==null){m.flags&=-257,KE(m,o,a,s,e),m.mode&1&&GE(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){GE(s,u,e),pw();break e}l=Error(Z(426))}}else if(Mt&&a.mode&1){var I=HE(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),KE(I,o,a,s,e),Kv(Ql(l,a));break e}}s=l=Ql(l,a),vn!==4&&(vn=2),Rc===null?Rc=[s]:Rc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=hA(s,l,e);UE(s,_);break e;case 1:a=l;var x=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qs===null||!Qs.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=fA(s,a,e);UE(s,V);break e}}s=s.return}while(s!==null)}NA(n)}catch(L){e=L,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(!0)}function CA(){var t=lp.current;return lp.current=ap,t===null?ap:t}function pw(){(vn===0||vn===3||vn===2)&&(vn=4),bn===null||!(Ta&268435455)&&!(um&268435455)||Ns(bn,Vn)}function dp(t,e){var n=st;st|=2;var r=CA();(bn!==t||Vn!==e)&&(Bi=null,da(t,e));do try{CO();break}catch(i){PA(t,i)}while(!0);if(Yv(),st=n,lp.current=r,mn!==null)throw Error(Z(261));return bn=null,Vn=0,vn}function CO(){for(;mn!==null;)RA(mn)}function RO(){for(;mn!==null&&!nj();)RA(mn)}function RA(t){var e=VA(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?NA(t):mn=e,uw.current=null}function NA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IO(n,e),n!==null){n.flags&=32767,mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,mn=null;return}}else if(n=TO(n,e,Ir),n!==null){mn=n;return}if(e=e.sibling,e!==null){mn=e;return}mn=e=t}while(e!==null);vn===0&&(vn=5)}function Wo(t,e,n){var r=yt,i=Wr.transition;try{Wr.transition=null,yt=1,NO(t,e,n,r)}finally{Wr.transition=i,yt=r}return null}function NO(t,e,n,r){do Dl();while(Us!==null);if(st&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hj(t,s),t===bn&&(mn=bn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,jA(Gf,function(){return Dl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wr.transition,Wr.transition=null;var o=yt;yt=1;var a=st;st|=4,uw.current=null,bO(t,n),bA(n,t),Jj(Qy),Kf=!!Ky,Qy=Ky=null,t.current=n,kO(n),rj(),st=a,yt=o,Wr.transition=s}else t.current=n;if(Fh&&(Fh=!1,Us=t,cp=i),s=t.pendingLanes,s===0&&(Qs=null),oj(n.stateNode),mr(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(up)throw up=!1,t=m0,m0=null,t;return cp&1&&t.tag!==0&&Dl(),s=t.pendingLanes,s&1?t===g0?Nc++:(Nc=0,g0=t):Nc=0,Eo(),null}function Dl(){if(Us!==null){var t=hk(cp),e=Wr.transition,n=yt;try{if(Wr.transition=null,yt=16>t?16:t,Us===null)var r=!1;else{if(t=Us,Us=null,cp=0,st&6)throw Error(Z(331));var i=st;for(st|=4,me=t.current;me!==null;){var s=me,o=s.child;if(me.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(me=u;me!==null;){var c=me;switch(c.tag){case 0:case 11:case 15:Cc(8,c,s)}var h=c.child;if(h!==null)h.return=c,me=h;else for(;me!==null;){c=me;var p=c.sibling,m=c.return;if(TA(c),c===u){me=null;break}if(p!==null){p.return=m,me=p;break}me=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var I=v.sibling;v.sibling=null,v=I}while(v!==null)}}me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,me=o;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cc(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,me=_;break e}me=s.return}}var x=t.current;for(me=x;me!==null;){o=me;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,me=E;else e:for(o=x;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lm(9,a)}}catch(L){Yt(a,a.return,L)}if(a===o){me=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,me=V;break e}me=a.return}}if(st=i,Eo(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(em,t)}catch{}r=!0}return r}finally{yt=n,Wr.transition=e}}return!1}function aT(t,e,n){e=Ql(n,e),e=hA(t,e,1),t=Ks(t,e,1),e=er(),t!==null&&(Od(t,1,e),mr(t,e))}function Yt(t,e,n){if(t.tag===3)aT(t,t,n);else for(;e!==null;){if(e.tag===3){aT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qs===null||!Qs.has(r))){t=Ql(n,t),t=fA(e,t,1),e=Ks(e,t,1),t=er(),e!==null&&(Od(e,1,t),mr(e,t));break}}e=e.return}}function DO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,bn===t&&(Vn&n)===n&&(vn===4||vn===3&&(Vn&130023424)===Vn&&500>on()-dw?da(t,0):cw|=n),mr(t,e)}function DA(t,e){e===0&&(t.mode&1?(e=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):e=1);var n=er();t=rs(t,e),t!==null&&(Od(t,e,n),mr(t,n))}function VO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DA(t,n)}function jO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),DA(t,n)}var VA;VA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fr.current)ur=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ur=!1,EO(t,e,n);ur=!!(t.flags&131072)}else ur=!1,Mt&&e.flags&1048576&&Lk(e,tp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yf(t,e),t=e.pendingProps;var i=ql(e,Qn.current);Nl(e,n),i=iw(null,e,r,t,i,n);var s=sw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(r)?(s=!0,Zf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zv(e),i.updater=am,e.stateNode=i,i._reactInternals=e,i0(e,r,t,n),e=a0(null,e,r,!0,s,n)):(e.tag=0,Mt&&s&&Gv(e),Zn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MO(r),t=Jr(r,t),i){case 0:e=o0(null,e,r,t,n);break e;case 1:e=XE(null,e,r,t,n);break e;case 11:e=QE(null,e,r,t,n);break e;case 14:e=YE(null,e,r,Jr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),o0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),XE(t,e,r,i,n);case 3:e:{if(yA(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wk(t,e),ip(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ql(Error(Z(423)),e),e=JE(t,e,r,n,i);break e}else if(r!==i){i=Ql(Error(Z(424)),e),e=JE(t,e,r,n,i);break e}else for(Sr=Hs(e.stateNode.containerInfo.firstChild),kr=e,Mt=!0,ei=null,n=zk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),r===i){e=is(t,e,n);break e}Zn(t,e,r,n)}e=e.child}return e;case 5:return qk(e),t===null&&t0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yy(r,i)?o=null:s!==null&&Yy(r,s)&&(e.flags|=32),gA(t,e),Zn(t,e,o,n),e.child;case 6:return t===null&&t0(e),null;case 13:return vA(t,e,n);case 4:return ew(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hl(e,null,r,n):Zn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),QE(t,e,r,i,n);case 7:return Zn(t,e,e.pendingProps,n),e.child;case 8:return Zn(t,e,e.pendingProps.children,n),e.child;case 12:return Zn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,It(np,r._currentValue),r._currentValue=o,s!==null)if(oi(s.value,o)){if(s.children===i.children&&!fr.current){e=is(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ji(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),n0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),n0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Zn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Nl(e,n),i=qr(i),r=r(i),e.flags|=1,Zn(t,e,r,n),e.child;case 14:return r=e.type,i=Jr(r,e.pendingProps),i=Jr(r.type,i),YE(t,e,r,i,n);case 15:return pA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),yf(t,e),e.tag=1,pr(r)?(t=!0,Zf(e)):t=!1,Nl(e,n),dA(e,r,i),i0(e,r,i,n),a0(null,e,r,!0,t,n);case 19:return wA(t,e,n);case 22:return mA(t,e,n)}throw Error(Z(156,e.tag))};function jA(t,e){return lk(t,e)}function OO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(t,e,n,r){return new OO(t,e,n,r)}function mw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MO(t){if(typeof t=="function")return mw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vv)return 11;if(t===jv)return 14}return 2}function Xs(t,e){var n=t.alternate;return n===null?(n=$r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hl:return ha(n.children,i,s,e);case Dv:o=8,i|=8;break;case Ay:return t=$r(12,n,e,i|2),t.elementType=Ay,t.lanes=s,t;case Py:return t=$r(13,n,e,i),t.elementType=Py,t.lanes=s,t;case Cy:return t=$r(19,n,e,i),t.elementType=Cy,t.lanes=s,t;case qb:return cm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $b:o=10;break e;case Wb:o=9;break e;case Vv:o=11;break e;case jv:o=14;break e;case ks:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=$r(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ha(t,e,n,r){return t=$r(7,t,r,e),t.lanes=n,t}function cm(t,e,n,r){return t=$r(22,t,r,e),t.elementType=qb,t.lanes=n,t.stateNode={isHidden:!1},t}function Vg(t,e,n){return t=$r(6,t,null,e),t.lanes=n,t}function jg(t,e,n){return e=$r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gw(t,e,n,r,i,s,o,a,l){return t=new LO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(s),t}function FO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OA(t){if(!t)return oo;t=t._reactInternals;e:{if(Ua(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(pr(n))return Ok(t,n,e)}return e}function MA(t,e,n,r,i,s,o,a,l){return t=gw(n,r,!0,t,i,s,o,a,l),t.context=OA(null),n=t.current,r=er(),i=Ys(n),s=Ji(r,i),s.callback=e??null,Ks(n,s,i),t.current.lanes=i,Od(t,i,r),mr(t,r),t}function dm(t,e,n,r){var i=e.current,s=er(),o=Ys(i);return n=OA(n),e.context===null?e.context=n:e.pendingContext=n,e=Ji(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ks(i,e,o),t!==null&&(ni(t,i,o,s),pf(t,i,o)),o}function hp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yw(t,e){lT(t,e),(t=t.alternate)&&lT(t,e)}function UO(){return null}var LA=typeof reportError=="function"?reportError:function(t){console.error(t)};function vw(t){this._internalRoot=t}hm.prototype.render=vw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));dm(t,e,null,null)};hm.prototype.unmount=vw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ia(function(){dm(null,t,null,null)}),e[ns]=null}};function hm(t){this._internalRoot=t}hm.prototype.unstable_scheduleHydration=function(t){if(t){var e=mk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&yk(t)}};function ww(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uT(){}function BO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=hp(o);s.call(u)}}var o=MA(e,r,t,0,null,!1,!1,"",uT);return t._reactRootContainer=o,t[ns]=o.current,od(t.nodeType===8?t.parentNode:t),Ia(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=hp(l);a.call(u)}}var l=gw(t,0,!1,null,null,!1,!1,"",uT);return t._reactRootContainer=l,t[ns]=l.current,od(t.nodeType===8?t.parentNode:t),Ia(function(){dm(e,l,n,r)}),l}function pm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=hp(o);a.call(l)}}dm(e,o,t,i)}else o=BO(n,e,t,i,r);return hp(o)}fk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yc(e.pendingLanes);n!==0&&(Lv(e,n|1),mr(e,on()),!(st&6)&&(Yl=on()+500,Eo()))}break;case 13:Ia(function(){var r=rs(t,1);if(r!==null){var i=er();ni(r,t,1,i)}}),yw(t,1)}};Fv=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=er();ni(e,t,134217728,n)}yw(t,134217728)}};pk=function(t){if(t.tag===13){var e=Ys(t),n=rs(t,e);if(n!==null){var r=er();ni(n,t,e,r)}yw(t,e)}};mk=function(){return yt};gk=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};Uy=function(t,e,n){switch(e){case"input":if(Dy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=im(r);if(!i)throw Error(Z(90));Hb(r),Dy(r,i)}}}break;case"textarea":Qb(t,n);break;case"select":e=n.value,e!=null&&Al(t,!!n.multiple,e,!1)}};nk=hw;rk=Ia;var zO={usingClientEntryPoint:!1,Events:[Ld,gl,im,ek,tk,hw]},rc={findFiberByHostInstance:sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$O={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ok(t),t===null?null:t.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||UO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{em=Uh.inject($O),Ti=Uh}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zO;Nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ww(e))throw Error(Z(200));return FO(t,e,null,n)};Nr.createRoot=function(t,e){if(!ww(t))throw Error(Z(299));var n=!1,r="",i=LA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gw(t,1,!1,null,null,n,!1,r,i),t[ns]=e.current,od(t.nodeType===8?t.parentNode:t),new vw(e)};Nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=ok(e),t=t===null?null:t.stateNode,t};Nr.flushSync=function(t){return Ia(t)};Nr.hydrate=function(t,e,n){if(!fm(e))throw Error(Z(200));return pm(null,t,e,!0,n)};Nr.hydrateRoot=function(t,e,n){if(!ww(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=LA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MA(e,null,t,1,n??null,i,!1,s,o),t[ns]=e.current,od(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hm(e)};Nr.render=function(t,e,n){if(!fm(e))throw Error(Z(200));return pm(null,t,e,!1,n)};Nr.unmountComponentAtNode=function(t){if(!fm(t))throw Error(Z(40));return t._reactRootContainer?(Ia(function(){pm(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};Nr.unstable_batchedUpdates=hw;Nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fm(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return pm(t,e,n,!1,r)};Nr.version="18.3.1-next-f1338f8080-20240426";function FA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FA)}catch(t){console.error(t)}}FA(),Fb.exports=Nr;var WO=Fb.exports,cT=WO;by.createRoot=cT.createRoot,by.hydrateRoot=cT.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}var Bs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bs||(Bs={}));const dT="popstate";function qO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return w0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fp(i)}return HO(e,n,null,t)}function un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GO(){return Math.random().toString(36).substr(2,8)}function hT(t,e){return{usr:t.state,key:t.key,idx:e}}function w0(t,e,n,r){return n===void 0&&(n=null),md({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Iu(e):e,{state:n,key:e&&e.key||r||GO()})}function fp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Iu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Bs.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(md({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Bs.Pop;let I=c(),_=I==null?null:I-u;u=I,l&&l({action:a,location:v.location,delta:_})}function p(I,_){a=Bs.Push;let x=w0(v.location,I,_);u=c()+1;let E=hT(x,u),V=v.createHref(x);try{o.pushState(E,"",V)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(V)}s&&l&&l({action:a,location:v.location,delta:1})}function m(I,_){a=Bs.Replace;let x=w0(v.location,I,_);u=c();let E=hT(x,u),V=v.createHref(x);o.replaceState(E,"",V),s&&l&&l({action:a,location:v.location,delta:0})}function y(I){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof I=="string"?I:fp(I);return x=x.replace(/ $/,"%20"),un(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let v={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dT,h),l=I,()=>{i.removeEventListener(dT,h),l=null}},createHref(I){return e(i,I)},createURL:y,encodeLocation(I){let _=y(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(I){return o.go(I)}};return v}var fT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fT||(fT={}));function KO(t,e,n){return n===void 0&&(n="/"),QO(t,e,n)}function QO(t,e,n,r){let i=typeof e=="string"?Iu(e):e,s=_w(i.pathname||"/",n);if(s==null)return null;let o=UA(t);YO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=lM(s);a=sM(o[l],u)}return a}function UA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(un(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Js([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(un(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),UA(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rM(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of BA(s.path))i(s,o,l)}),e}function BA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=BA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XO=/^:[\w-]+$/,JO=3,ZO=2,eM=1,tM=10,nM=-2,pT=t=>t==="*";function rM(t,e){let n=t.split("/"),r=n.length;return n.some(pT)&&(r+=nM),e&&(r+=ZO),n.filter(i=>!pT(i)).reduce((i,s)=>i+(XO.test(s)?JO:s===""?eM:tM),r)}function iM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sM(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=oM({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Js([s,h.pathname]),pathnameBase:fM(Js([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Js([s,h.pathnameBase]))}return o}function oM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:p,isOptional:m}=c;if(p==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _w(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const uM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cM=t=>uM.test(t);function dM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Iu(t):t,s;if(n)if(cM(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),xw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=mT(n.substring(1),"/"):s=mT(n,e)}else s=e;return{pathname:s,search:pM(r),hash:mM(i)}}function mT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Og(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ew(t,e){let n=hM(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tw(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Iu(t):(i=md({},t),un(!i.pathname||!i.pathname.includes("?"),Og("?","pathname","search",i)),un(!i.pathname||!i.pathname.includes("#"),Og("#","pathname","hash",i)),un(!i.search||!i.search.includes("#"),Og("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=dM(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),fM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zA=["post","put","patch","delete"];new Set(zA);const yM=["get",...zA];new Set(yM);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(this,arguments)}const Iw=b.createContext(null),vM=b.createContext(null),To=b.createContext(null),mm=b.createContext(null),Di=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$A=b.createContext(null);function wM(t,e){let{relative:n}=e===void 0?{}:e;Su()||un(!1);let{basename:r,navigator:i}=b.useContext(To),{hash:s,pathname:o,search:a}=qA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Js([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Su(){return b.useContext(mm)!=null}function Ba(){return Su()||un(!1),b.useContext(mm).location}function WA(t){b.useContext(To).static||b.useLayoutEffect(t)}function Io(){let{isDataRoute:t}=b.useContext(Di);return t?VM():xM()}function xM(){Su()||un(!1);let t=b.useContext(Iw),{basename:e,future:n,navigator:r}=b.useContext(To),{matches:i}=b.useContext(Di),{pathname:s}=Ba(),o=JSON.stringify(Ew(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return WA(()=>{a.current=!0}),b.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Tw(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Js([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}const _M=b.createContext(null);function EM(t){let e=b.useContext(Di).outlet;return e&&b.createElement(_M.Provider,{value:t},e)}function VX(){let{matches:t}=b.useContext(Di),e=t[t.length-1];return e?e.params:{}}function qA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(To),{matches:i}=b.useContext(Di),{pathname:s}=Ba(),o=JSON.stringify(Ew(i,r.v7_relativeSplatPath));return b.useMemo(()=>Tw(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function TM(t,e){return IM(t,e)}function IM(t,e,n,r){Su()||un(!1);let{navigator:i}=b.useContext(To),{matches:s}=b.useContext(Di),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ba(),c;if(e){var h;let I=typeof e=="string"?Iu(e):e;l==="/"||(h=I.pathname)!=null&&h.startsWith(l)||un(!1),c=I}else c=u;let p=c.pathname||"/",m=p;if(l!=="/"){let I=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(I.length).join("/")}let y=KO(t,{pathname:m}),v=PM(y&&y.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Js([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Js([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&v?b.createElement(mm.Provider,{value:{location:gd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Bs.Pop}},v):v}function SM(){let t=DM(),e=gM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const bM=b.createElement(SM,null);class kM extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Di.Provider,{value:this.props.routeContext},b.createElement($A.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AM(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(Iw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Di.Provider,{value:e},r)}function PM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);c>=0||un(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,p)=>{let m,y=!1,v=null,I=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||bM,l&&(u<0&&p===0?(jM("route-fallback"),y=!0,I=null):u===p&&(y=!0,I=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),x=()=>{let E;return m?E=v:y?E=I:h.route.Component?E=b.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=c,b.createElement(AM,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(kM,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var GA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GA||{}),HA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(HA||{});function CM(t){let e=b.useContext(Iw);return e||un(!1),e}function RM(t){let e=b.useContext(vM);return e||un(!1),e}function NM(t){let e=b.useContext(Di);return e||un(!1),e}function KA(t){let e=NM(),n=e.matches[e.matches.length-1];return n.route.id||un(!1),n.route.id}function DM(){var t;let e=b.useContext($A),n=RM(),r=KA();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function VM(){let{router:t}=CM(GA.UseNavigateStable),e=KA(HA.UseNavigateStable),n=b.useRef(!1);return WA(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gd({fromRouteId:e},s)))},[t,e])}const gT={};function jM(t,e,n){gT[t]||(gT[t]=!0)}function OM(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xl(t){let{to:e,replace:n,state:r,relative:i}=t;Su()||un(!1);let{future:s,static:o}=b.useContext(To),{matches:a}=b.useContext(Di),{pathname:l}=Ba(),u=Io(),c=Tw(e,Ew(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function MM(t){return EM(t.context)}function Ye(t){un(!1)}function LM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Bs.Pop,navigator:s,static:o=!1,future:a}=t;Su()&&un(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:s,static:o,future:gd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Iu(r));let{pathname:c="/",search:h="",hash:p="",state:m=null,key:y="default"}=r,v=b.useMemo(()=>{let I=_w(c,l);return I==null?null:{location:{pathname:I,search:h,hash:p,state:m,key:y},navigationType:i}},[l,c,h,p,m,y,i]);return v==null?null:b.createElement(To.Provider,{value:u},b.createElement(mm.Provider,{children:n,value:v}))}function FM(t){let{children:e,location:n}=t;return TM(x0(e),n)}new Promise(()=>{});function x0(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,x0(r.props.children,s));return}r.type!==Ye&&un(!1),!r.props.index||!r.props.children||un(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=x0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(this,arguments)}function UM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function BM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zM(t,e){return t.button===0&&(!e||e==="_self")&&!BM(t)}function E0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function $M(t,e){let n=E0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const WM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qM="6";try{window.__reactRouterVersion=qM}catch{}const GM="startTransition",yT=DV[GM];function HM(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=qO({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=b.useCallback(h=>{u&&yT?yT(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(c),[o,c]),b.useEffect(()=>OM(r),[r]),b.createElement(LM,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const KM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,p=UM(e,WM),{basename:m}=b.useContext(To),y,v=!1;if(typeof u=="string"&&QM.test(u)&&(y=u,KM))try{let E=new URL(window.location.href),V=u.startsWith("//")?new URL(E.protocol+u):new URL(u),L=_w(V.pathname,m);V.origin===E.origin&&L!=null?u=L+V.search+V.hash:v=!0}catch{}let I=wM(u,{relative:i}),_=YM(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function x(E){r&&r(E),E.defaultPrevented||_(E)}return b.createElement("a",_0({},p,{href:y||I,onClick:v||s?r:x,ref:n,target:l}))});var vT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vT||(vT={}));var wT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wT||(wT={}));function YM(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Io(),u=Ba(),c=qA(t,{relative:o});return b.useCallback(h=>{if(zM(h,n)){h.preventDefault();let p=r!==void 0?r:fp(u)===fp(c);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function jX(t){let e=b.useRef(E0(t)),n=b.useRef(!1),r=Ba(),i=b.useMemo(()=>$M(r.search,n.current?null:e.current),[r.search]),s=Io(),o=b.useCallback((a,l)=>{const u=E0(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var xT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},YA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[c],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new JM;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZM=function(t){const e=QA(t);return YA.encodeByteArray(e,!0)},pp=function(t){return ZM(t).replace(/\./g,"")},XA=function(t){try{return YA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=()=>eL().__FIREBASE_DEFAULTS__,nL=()=>{if(typeof process>"u"||typeof xT>"u")return;const t=xT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XA(t[1]);return e&&JSON.parse(e)},gm=()=>{try{return tL()||nL()||rL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JA=t=>{var e,n;return(n=(e=gm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},iL=t=>{const e=JA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ZA=()=>{var t;return(t=gm())===null||t===void 0?void 0:t.config},eP=t=>{var e;return(e=gm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pp(JSON.stringify(n)),pp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function lL(){var t;const e=(t=gm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hL(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tP(){return!lL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nP(){try{return typeof indexedDB=="object"}catch{return!1}}function fL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="FirebaseError";class ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pL,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ud.prototype.create)}}class Ud{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ds(i,a,r)}}function mL(t,e){return t.replace(gL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gL=/\{\$([^}]+)}/g;function yL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_T(s)&&_T(o)){if(!ao(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _T(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vL(t,e){const n=new wL(t,e);return n.subscribe.bind(n)}class wL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mg),i.error===void 0&&(i.error=Mg),i.complete===void 0&&(i.complete=Mg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Sa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TL(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EL(t){return t===qo?void 0:t}function TL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const SL={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},bL=Xe.INFO,kL={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},AL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sw{constructor(e){this.name=e,this._logLevel=bL,this._logHandler=AL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const PL=(t,e)=>e.some(n=>t instanceof n);let ET,TT;function CL(){return ET||(ET=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RL(){return TT||(TT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rP=new WeakMap,T0=new WeakMap,iP=new WeakMap,Lg=new WeakMap,bw=new WeakMap;function NL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rP.set(n,t)}).catch(()=>{}),bw.set(e,t),e}function DL(t){if(T0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});T0.set(t,e)}let I0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return T0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VL(t){I0=t(I0)}function jL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fg(this),e,...n);return iP.set(r,e.sort?e.sort():[e]),Zs(r)}:RL().includes(t)?function(...e){return t.apply(Fg(this),e),Zs(rP.get(this))}:function(...e){return Zs(t.apply(Fg(this),e))}}function OL(t){return typeof t=="function"?jL(t):(t instanceof IDBTransaction&&DL(t),PL(t,CL())?new Proxy(t,I0):t)}function Zs(t){if(t instanceof IDBRequest)return NL(t);if(Lg.has(t))return Lg.get(t);const e=OL(t);return e!==t&&(Lg.set(t,e),bw.set(e,t)),e}const Fg=t=>bw.get(t);function ML(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Zs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zs(o.result),l.oldVersion,l.newVersion,Zs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const LL=["get","getKey","getAll","getAllKeys","count"],FL=["put","add","delete","clear"],Ug=new Map;function IT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ug.get(e))return Ug.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Ug.set(e,s),s}VL(t=>({...t,get:(e,n,r)=>IT(e,n)||t.get(e,n,r),has:(e,n)=>!!IT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S0="@firebase/app",ST="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Sw("@firebase/app"),zL="@firebase/app-compat",$L="@firebase/analytics-compat",WL="@firebase/analytics",qL="@firebase/app-check-compat",GL="@firebase/app-check",HL="@firebase/auth",KL="@firebase/auth-compat",QL="@firebase/database",YL="@firebase/data-connect",XL="@firebase/database-compat",JL="@firebase/functions",ZL="@firebase/functions-compat",e4="@firebase/installations",t4="@firebase/installations-compat",n4="@firebase/messaging",r4="@firebase/messaging-compat",i4="@firebase/performance",s4="@firebase/performance-compat",o4="@firebase/remote-config",a4="@firebase/remote-config-compat",l4="@firebase/storage",u4="@firebase/storage-compat",c4="@firebase/firestore",d4="@firebase/vertexai-preview",h4="@firebase/firestore-compat",f4="firebase",p4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="[DEFAULT]",m4={[S0]:"fire-core",[zL]:"fire-core-compat",[WL]:"fire-analytics",[$L]:"fire-analytics-compat",[GL]:"fire-app-check",[qL]:"fire-app-check-compat",[HL]:"fire-auth",[KL]:"fire-auth-compat",[QL]:"fire-rtdb",[YL]:"fire-data-connect",[XL]:"fire-rtdb-compat",[JL]:"fire-fn",[ZL]:"fire-fn-compat",[e4]:"fire-iid",[t4]:"fire-iid-compat",[n4]:"fire-fcm",[r4]:"fire-fcm-compat",[i4]:"fire-perf",[s4]:"fire-perf-compat",[o4]:"fire-rc",[a4]:"fire-rc-compat",[l4]:"fire-gcs",[u4]:"fire-gcs-compat",[c4]:"fire-fst",[h4]:"fire-fst-compat",[d4]:"fire-vertex","fire-js":"fire-js",[f4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=new Map,g4=new Map,b0=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jl(t){const e=t.name;if(b0.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;b0.set(e,t);for(const n of gp.values())bT(n,t);for(const n of g4.values())bT(n,t);return!0}function zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function y4(t,e,n=mp){zd(t,e).clearInstance(n)}function xi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new Ud("app","Firebase",v4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=p4;function sP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(n||(n=ZA()),!n)throw eo.create("no-options");const s=gp.get(i);if(s){if(ao(n,s.options)&&ao(r,s.config))return s;throw eo.create("duplicate-app",{appName:i})}const o=new IL(i);for(const l of b0.values())o.addComponent(l);const a=new w4(n,r,o);return gp.set(i,a),a}function oP(t=mp){const e=gp.get(t);if(!e&&t===mp&&ZA())return sP();if(!e)throw eo.create("no-app",{appName:t});return e}function to(t,e,n){var r;let i=(r=m4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(a.join(" "));return}Jl(new Sa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",_4=1,yd="firebase-heartbeat-store";let Bg=null;function aP(){return Bg||(Bg=ML(x4,_4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yd)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),Bg}async function E4(t){try{const n=(await aP()).transaction(yd),r=await n.objectStore(yd).get(lP(t));return await n.done,r}catch(e){if(e instanceof ds)ss.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ss.warn(n.message)}}}async function kT(t,e){try{const r=(await aP()).transaction(yd,"readwrite");await r.objectStore(yd).put(e,lP(t)),await r.done}catch(n){if(n instanceof ds)ss.warn(n.message);else{const r=eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ss.warn(r.message)}}}function lP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,I4=30*24*60*60*1e3;class S4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=AT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=I4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AT(),{heartbeatsToSend:r,unsentEntries:i}=b4(this._heartbeatsCache.heartbeats),s=pp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ss.warn(n),""}}}function AT(){return new Date().toISOString().substring(0,10)}function b4(t,e=T4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),PT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class k4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nP()?fL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PT(t){return pp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){Jl(new Sa("platform-logger",e=>new UL(e),"PRIVATE")),Jl(new Sa("heartbeat",e=>new S4(e),"PRIVATE")),to(S0,ST,t),to(S0,ST,"esm2017"),to("fire-js","")}A4("");function kw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P4=uP,cP=new Ud("auth","Firebase",uP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=new Sw("@firebase/auth");function C4(t,...e){yp.logLevel<=Xe.WARN&&yp.warn(`Auth (${bu}): ${t}`,...e)}function _f(t,...e){yp.logLevel<=Xe.ERROR&&yp.error(`Auth (${bu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,...e){throw Pw(t,...e)}function ri(t,...e){return Pw(t,...e)}function Aw(t,e,n){const r=Object.assign(Object.assign({},P4()),{[e]:n});return new Ud("auth","Firebase",r).create(e,{appName:t.name})}function no(t){return Aw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pi(t,"argument-error"),Aw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cP.create(t,...e)}function Oe(t,e,...n){if(!t)throw Pw(e,...n)}function Gi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _f(e),new Error(e)}function os(t,e){t||Gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function R4(){return CT()==="http:"||CT()==="https:"}function CT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R4()||cL()||"connection"in navigator)?navigator.onLine:!0}function D4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.shortDelay=e,this.longDelay=n,os(n>e,"Short delay should be less than long delay!"),this.isMobile=aL()||dL()}get(){return N4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new $d(3e4,6e4);function Rw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ku(t,e,n,r,i={}){return fP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return uL()||(u.referrerPolicy="no-referrer"),hP.fetch()(pP(t,t.config.apiHost,n,a),u)})}async function fP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V4),e);try{const i=new M4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Bh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bh(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Aw(t,c,u);Pi(t,c)}}catch(i){if(i instanceof ds)throw i;Pi(t,"network-request-failed",{message:String(i)})}}async function O4(t,e,n,r,i={}){const s=await ku(t,e,n,r,i);return"mfaPendingCredential"in s&&Pi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function pP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Cw(t.config,i):`${t.config.apiScheme}://${i}`}class M4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),j4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ri(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(t,e){return ku(t,"POST","/v1/accounts:delete",e)}async function mP(t,e){return ku(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F4(t,e=!1){const n=kt(t),r=await n.getIdToken(e),i=Nw(r);Oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dc(zg(i.auth_time)),issuedAtTime:Dc(zg(i.iat)),expirationTime:Dc(zg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zg(t){return Number(t)*1e3}function Nw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const i=XA(n);return i?JSON.parse(i):(_f("Failed to decode base64 JWT payload"),null)}catch(i){return _f("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function RT(t){const e=Nw(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ds&&U4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function U4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vd(t,mP(n,{idToken:r}));Oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?gP(s.providerUserInfo):[],a=$4(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new A0(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function z4(t){const e=kt(t);await vp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gP(t){return t.map(e=>{var{providerId:n}=e,r=kw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){const n=await fP(t,{},async()=>{const r=Bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=pP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q4(t,e){return ku(t,"POST","/v2/accounts:revokeToken",Rw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=RT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await W4(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vl;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=kw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new B4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new A0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vd(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return F4(this,e)}reload(){return z4(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(no(this.auth));const e=await this.getIdToken();return await vd(this,L4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:V,isAnonymous:L,providerData:j,stsTokenManager:S}=n;Oe(E&&S,e,"internal-error");const T=Vl.fromJSON(this.name,S);Oe(typeof E=="string",e,"internal-error"),_s(h,e.name),_s(p,e.name),Oe(typeof V=="boolean",e,"internal-error"),Oe(typeof L=="boolean",e,"internal-error"),_s(m,e.name),_s(y,e.name),_s(v,e.name),_s(I,e.name),_s(_,e.name),_s(x,e.name);const k=new Hi({uid:E,auth:e,email:p,emailVerified:V,displayName:h,isAnonymous:L,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:T,createdAt:_,lastLoginAt:x});return j&&Array.isArray(j)&&(k.providerData=j.map(C=>Object.assign({},C))),I&&(k._redirectEventId=I),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vl;i.updateFromServerResponse(n);const s=new Hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?gP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vl;a.updateFromIdToken(r);const l=new Hi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new A0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Map;function Ki(t){os(t instanceof Function,"Expected a class definition");let e=NT.get(t);return e?(os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,NT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yP.type="NONE";const DT=yP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class jl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ef(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ef("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jl(Ki(DT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ki(DT);const o=Ef(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Hi._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new jl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new jl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_P(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TP(e))return"Blackberry";if(IP(e))return"Webos";if(wP(e))return"Safari";if((e.includes("chrome/")||xP(e))&&!e.includes("edge/"))return"Chrome";if(EP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vP(t=xn()){return/firefox\//i.test(t)}function wP(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xP(t=xn()){return/crios\//i.test(t)}function _P(t=xn()){return/iemobile/i.test(t)}function EP(t=xn()){return/android/i.test(t)}function TP(t=xn()){return/blackberry/i.test(t)}function IP(t=xn()){return/webos/i.test(t)}function Dw(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G4(t=xn()){var e;return Dw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H4(){return hL()&&document.documentMode===10}function SP(t=xn()){return Dw(t)||EP(t)||IP(t)||TP(t)||/windows phone/i.test(t)||_P(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t,e=[]){let n;switch(t){case"Browser":n=VT(xn());break;case"Worker":n=`${VT(xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4(t,e={}){return ku(t,"GET","/v2/passwordPolicy",Rw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=6;class X4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Y4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jT(this),this.idTokenSubscription=new jT(this),this.beforeStateQueue=new K4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ki(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mP(this,{idToken:e}),r=await Hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(no(this));const n=e?kt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(no(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(no(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q4(this),n=new X4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ud("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ki(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[Ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&C4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Au(t){return kt(t)}class jT{constructor(e){this.auth=e,this.observer=null,this.addObserver=vL(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z4(t){Vw=t}function e5(t){return Vw.loadJS(t)}function t5(){return Vw.gapiScript}function n5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t,e){const n=zd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ao(s,e??{}))return i;Pi(i,"already-initialized")}return n.initialize({options:e})}function r5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function i5(t,e,n){const r=Au(t);Oe(r._canInitEmulator,r,"emulator-config-failed"),Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=AP(e),{host:o,port:a}=s5(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),o5()}function AP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function s5(t){const e=AP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:OT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:OT(o)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,n){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t,e){return O4(t,"POST","/v1/accounts:signInWithIdp",Rw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="http://localhost";class ba extends PP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=kw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ba(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ol(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ol(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ol(e,n)}buildRequest(){const e={requestUri:a5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Wd{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ba._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $i.credential(n,r)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Wd{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Wd{constructor(){super("twitter.com")}static credential(e,n){return ba._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return js.credential(n,r)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hi._fromIdTokenResponse(e,r,i),o=MT(r);return new Zl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=MT(r);return new Zl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function MT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends ds{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wp(e,n,r,i)}}function CP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wp._fromErrorAndOperation(t,s,e,r):s})}async function l5(t,e,n=!1){const r=await vd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e,n=!1){const{auth:r}=t;if(xi(r.app))return Promise.reject(no(r));const i="reauthenticate";try{const s=await vd(t,CP(r,i,e,t),n);Oe(s.idToken,r,"internal-error");const o=Nw(s.idToken);Oe(o,r,"internal-error");const{sub:a}=o;return Oe(t.uid===a,r,"user-mismatch"),Zl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t,e,n=!1){if(xi(t.app))return Promise.reject(no(t));const r="signIn",i=await CP(t,r,e),s=await Zl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function d5(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function h5(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function f5(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function p5(t){return kt(t).signOut()}const xp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xp,"1"),this.storage.removeItem(xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=1e3,g5=10;class NP extends RP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);H4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,g5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},m5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NP.type="LOCAL";const DP=NP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP extends RP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VP.type="SESSION";const jP=VP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await y5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=jw("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function w5(t){Si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function x5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function E5(){return OP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firebaseLocalStorageDb",T5=1,_p="firebaseLocalStorage",LP="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wm(t,e){return t.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function I5(){const t=indexedDB.deleteDatabase(MP);return new qd(t).toPromise()}function P0(){const t=indexedDB.open(MP,T5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_p,{keyPath:LP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_p)?e(r):(r.close(),await I5(),e(await P0()))})})}async function LT(t,e,n){const r=wm(t,!0).put({[LP]:e,value:n});return new qd(r).toPromise()}async function S5(t,e){const n=wm(t,!1).get(e),r=await new qd(n).toPromise();return r===void 0?null:r.value}function FT(t,e){const n=wm(t,!0).delete(e);return new qd(n).toPromise()}const b5=800,k5=3;class FP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>k5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vm._getInstance(E5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await x5(),!this.activeServiceWorker)return;this.sender=new v5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await LT(e,xp,"1"),await FT(e,xp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>LT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>S5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wm(i,!1).getAll();return new qd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FP.type="LOCAL";const UP=FP;new $d(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){return e?Ki(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends PP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function A5(t){return c5(t.auth,new Mw(t),t.bypassAuthState)}function P5(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),u5(n,new Mw(t),t.bypassAuthState)}async function C5(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),l5(n,new Mw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A5;case"linkViaPopup":case"linkViaRedirect":return C5;case"reauthViaPopup":case"reauthViaRedirect":return P5;default:Pi(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=new $d(2e3,1e4);async function N5(t,e,n){if(xi(t.app))return Promise.reject(ri(t,"operation-not-supported-in-this-environment"));const r=Au(t);dP(t,e,ym);const i=Ow(r,n);return new la(r,"signInViaPopup",e,i).executeNotNull()}class la extends BP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=jw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R5.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="pendingRedirect",Tf=new Map;class V5 extends BP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tf.get(this.auth._key());if(!e){try{const r=await j5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tf.set(this.auth._key(),e)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j5(t,e){const n=$P(e),r=zP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function O5(t,e){return zP(t)._set($P(e),"true")}function M5(t,e){Tf.set(t._key(),e)}function zP(t){return Ki(t._redirectPersistence)}function $P(t){return Ef(D5,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t,e,n){return F5(t,e,n)}async function F5(t,e,n){if(xi(t.app))return Promise.reject(no(t));const r=Au(t);dP(t,e,ym),await r._initializationPromise;const i=Ow(r,n);return await O5(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function U5(t,e){return await Au(t)._initializationPromise,WP(t,e,!1)}async function WP(t,e,n=!1){if(xi(t.app))return Promise.reject(no(t));const r=Au(t),i=Ow(r,e),o=await new V5(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=10*60*1e3;class z5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B5&&this.cachedEventUids.clear(),this.cachedEventUids.has(UT(e))}saveEventToCache(e){this.cachedEventUids.add(UT(e)),this.lastProcessedEventTime=Date.now()}}function UT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e={}){return ku(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G5=/^https?/;async function H5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W5(t);for(const n of e)try{if(K5(n))return}catch{}Pi(t,"unauthorized-domain")}function K5(t){const e=k0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!G5.test(n))return!1;if(q5.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=new $d(3e4,6e4);function BT(){const t=Si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y5(t){return new Promise((e,n)=>{var r,i,s;function o(){BT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BT(),n(ri(t,"network-request-failed"))},timeout:Q5.get()})}if(!((i=(r=Si().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Si().gapi)===null||s===void 0)&&s.load)o();else{const a=n5("iframefcb");return Si()[a]=()=>{gapi.load?o():n(ri(t,"network-request-failed"))},e5(`${t5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw If=null,e})}let If=null;function X5(t){return If=If||Y5(t),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new $d(5e3,15e3),Z5="__/auth/iframe",eF="emulator/auth/iframe",tF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rF(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cw(e,eF):`https://${t.config.authDomain}/${Z5}`,r={apiKey:e.apiKey,appName:t.name,v:bu},i=nF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bd(r).slice(1)}`}async function iF(t){const e=await X5(t),n=Si().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:rF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ri(t,"network-request-failed"),a=Si().setTimeout(()=>{s(o)},J5.get());function l(){Si().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oF=500,aF=600,lF="_blank",uF="http://localhost";class zT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cF(t,e,n,r=oF,i=aF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=xn().toLowerCase();n&&(a=xP(u)?lF:n),vP(u)&&(e=e||uF,l.scrollbars="yes");const c=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(G4(u)&&a!=="_self")return dF(e||"",a),new zT(null);const h=window.open(e||"",a,c);Oe(h,t,"popup-blocked");try{h.focus()}catch{}return new zT(h)}function dF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="__/auth/handler",fF="emulator/auth/handler",pF=encodeURIComponent("fac");async function $T(t,e,n,r,i,s){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bu,eventId:i};if(e instanceof ym){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Wd){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${pF}=${encodeURIComponent(l)}`:"";return`${mF(t)}?${Bd(a).slice(1)}${u}`}function mF({config:t}){return t.emulator?Cw(t,fF):`https://${t.authDomain}/${hF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class gF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jP,this._completeRedirectFn=WP,this._overrideRedirectResult=M5}async _openPopup(e,n,r,i){var s;os((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $T(e,n,r,k0(),i);return cF(e,o,jw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $T(e,n,r,k0(),i);return w5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(os(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iF(e),r=new z5(e);return n.register("authEvent",i=>(Oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($g,{type:$g},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$g];o!==void 0&&n(!!o),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SP()||wP()||Dw()}}const yF=gF;var WT="@firebase/auth",qT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xF(t){Jl(new Sa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bP(t)},u=new J4(r,i,s,l);return r5(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jl(new Sa("auth-internal",e=>{const n=Au(e.getProvider("auth").getImmediate());return(r=>new vF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),to(WT,qT,wF(t)),to(WT,qT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=5*60,EF=eP("authIdTokenMaxAge")||_F;let GT=null;const TF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EF)return;const i=n==null?void 0:n.token;GT!==i&&(GT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IF(t=oP()){const e=zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kP(t,{popupRedirectResolver:yF,persistence:[UP,DP,jP]}),r=eP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=TF(s.toString());h5(n,o,()=>o(n.currentUser)),d5(n,a=>o(a))}}const i=JA("auth");return i&&i5(n,`http://${i}`),n}function SF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Z4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ri("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",SF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xF("Browser");var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fa,GP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function k(){}k.prototype=T.prototype,S.D=T.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(C,P,N){for(var R=Array(arguments.length-2),H=2;H<arguments.length;H++)R[H-2]=arguments[H];return T.prototype[P].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,k){k||(k=0);var C=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)C[P]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(P=0;16>P;++P)C[P]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=S.g[0],k=S.g[1],P=S.g[2];var N=S.g[3],R=T+(N^k&(P^N))+C[0]+3614090360&4294967295;T=k+(R<<7&4294967295|R>>>25),R=N+(P^T&(k^P))+C[1]+3905402710&4294967295,N=T+(R<<12&4294967295|R>>>20),R=P+(k^N&(T^k))+C[2]+606105819&4294967295,P=N+(R<<17&4294967295|R>>>15),R=k+(T^P&(N^T))+C[3]+3250441966&4294967295,k=P+(R<<22&4294967295|R>>>10),R=T+(N^k&(P^N))+C[4]+4118548399&4294967295,T=k+(R<<7&4294967295|R>>>25),R=N+(P^T&(k^P))+C[5]+1200080426&4294967295,N=T+(R<<12&4294967295|R>>>20),R=P+(k^N&(T^k))+C[6]+2821735955&4294967295,P=N+(R<<17&4294967295|R>>>15),R=k+(T^P&(N^T))+C[7]+4249261313&4294967295,k=P+(R<<22&4294967295|R>>>10),R=T+(N^k&(P^N))+C[8]+1770035416&4294967295,T=k+(R<<7&4294967295|R>>>25),R=N+(P^T&(k^P))+C[9]+2336552879&4294967295,N=T+(R<<12&4294967295|R>>>20),R=P+(k^N&(T^k))+C[10]+4294925233&4294967295,P=N+(R<<17&4294967295|R>>>15),R=k+(T^P&(N^T))+C[11]+2304563134&4294967295,k=P+(R<<22&4294967295|R>>>10),R=T+(N^k&(P^N))+C[12]+1804603682&4294967295,T=k+(R<<7&4294967295|R>>>25),R=N+(P^T&(k^P))+C[13]+4254626195&4294967295,N=T+(R<<12&4294967295|R>>>20),R=P+(k^N&(T^k))+C[14]+2792965006&4294967295,P=N+(R<<17&4294967295|R>>>15),R=k+(T^P&(N^T))+C[15]+1236535329&4294967295,k=P+(R<<22&4294967295|R>>>10),R=T+(P^N&(k^P))+C[1]+4129170786&4294967295,T=k+(R<<5&4294967295|R>>>27),R=N+(k^P&(T^k))+C[6]+3225465664&4294967295,N=T+(R<<9&4294967295|R>>>23),R=P+(T^k&(N^T))+C[11]+643717713&4294967295,P=N+(R<<14&4294967295|R>>>18),R=k+(N^T&(P^N))+C[0]+3921069994&4294967295,k=P+(R<<20&4294967295|R>>>12),R=T+(P^N&(k^P))+C[5]+3593408605&4294967295,T=k+(R<<5&4294967295|R>>>27),R=N+(k^P&(T^k))+C[10]+38016083&4294967295,N=T+(R<<9&4294967295|R>>>23),R=P+(T^k&(N^T))+C[15]+3634488961&4294967295,P=N+(R<<14&4294967295|R>>>18),R=k+(N^T&(P^N))+C[4]+3889429448&4294967295,k=P+(R<<20&4294967295|R>>>12),R=T+(P^N&(k^P))+C[9]+568446438&4294967295,T=k+(R<<5&4294967295|R>>>27),R=N+(k^P&(T^k))+C[14]+3275163606&4294967295,N=T+(R<<9&4294967295|R>>>23),R=P+(T^k&(N^T))+C[3]+4107603335&4294967295,P=N+(R<<14&4294967295|R>>>18),R=k+(N^T&(P^N))+C[8]+1163531501&4294967295,k=P+(R<<20&4294967295|R>>>12),R=T+(P^N&(k^P))+C[13]+2850285829&4294967295,T=k+(R<<5&4294967295|R>>>27),R=N+(k^P&(T^k))+C[2]+4243563512&4294967295,N=T+(R<<9&4294967295|R>>>23),R=P+(T^k&(N^T))+C[7]+1735328473&4294967295,P=N+(R<<14&4294967295|R>>>18),R=k+(N^T&(P^N))+C[12]+2368359562&4294967295,k=P+(R<<20&4294967295|R>>>12),R=T+(k^P^N)+C[5]+4294588738&4294967295,T=k+(R<<4&4294967295|R>>>28),R=N+(T^k^P)+C[8]+2272392833&4294967295,N=T+(R<<11&4294967295|R>>>21),R=P+(N^T^k)+C[11]+1839030562&4294967295,P=N+(R<<16&4294967295|R>>>16),R=k+(P^N^T)+C[14]+4259657740&4294967295,k=P+(R<<23&4294967295|R>>>9),R=T+(k^P^N)+C[1]+2763975236&4294967295,T=k+(R<<4&4294967295|R>>>28),R=N+(T^k^P)+C[4]+1272893353&4294967295,N=T+(R<<11&4294967295|R>>>21),R=P+(N^T^k)+C[7]+4139469664&4294967295,P=N+(R<<16&4294967295|R>>>16),R=k+(P^N^T)+C[10]+3200236656&4294967295,k=P+(R<<23&4294967295|R>>>9),R=T+(k^P^N)+C[13]+681279174&4294967295,T=k+(R<<4&4294967295|R>>>28),R=N+(T^k^P)+C[0]+3936430074&4294967295,N=T+(R<<11&4294967295|R>>>21),R=P+(N^T^k)+C[3]+3572445317&4294967295,P=N+(R<<16&4294967295|R>>>16),R=k+(P^N^T)+C[6]+76029189&4294967295,k=P+(R<<23&4294967295|R>>>9),R=T+(k^P^N)+C[9]+3654602809&4294967295,T=k+(R<<4&4294967295|R>>>28),R=N+(T^k^P)+C[12]+3873151461&4294967295,N=T+(R<<11&4294967295|R>>>21),R=P+(N^T^k)+C[15]+530742520&4294967295,P=N+(R<<16&4294967295|R>>>16),R=k+(P^N^T)+C[2]+3299628645&4294967295,k=P+(R<<23&4294967295|R>>>9),R=T+(P^(k|~N))+C[0]+4096336452&4294967295,T=k+(R<<6&4294967295|R>>>26),R=N+(k^(T|~P))+C[7]+1126891415&4294967295,N=T+(R<<10&4294967295|R>>>22),R=P+(T^(N|~k))+C[14]+2878612391&4294967295,P=N+(R<<15&4294967295|R>>>17),R=k+(N^(P|~T))+C[5]+4237533241&4294967295,k=P+(R<<21&4294967295|R>>>11),R=T+(P^(k|~N))+C[12]+1700485571&4294967295,T=k+(R<<6&4294967295|R>>>26),R=N+(k^(T|~P))+C[3]+2399980690&4294967295,N=T+(R<<10&4294967295|R>>>22),R=P+(T^(N|~k))+C[10]+4293915773&4294967295,P=N+(R<<15&4294967295|R>>>17),R=k+(N^(P|~T))+C[1]+2240044497&4294967295,k=P+(R<<21&4294967295|R>>>11),R=T+(P^(k|~N))+C[8]+1873313359&4294967295,T=k+(R<<6&4294967295|R>>>26),R=N+(k^(T|~P))+C[15]+4264355552&4294967295,N=T+(R<<10&4294967295|R>>>22),R=P+(T^(N|~k))+C[6]+2734768916&4294967295,P=N+(R<<15&4294967295|R>>>17),R=k+(N^(P|~T))+C[13]+1309151649&4294967295,k=P+(R<<21&4294967295|R>>>11),R=T+(P^(k|~N))+C[4]+4149444226&4294967295,T=k+(R<<6&4294967295|R>>>26),R=N+(k^(T|~P))+C[11]+3174756917&4294967295,N=T+(R<<10&4294967295|R>>>22),R=P+(T^(N|~k))+C[2]+718787259&4294967295,P=N+(R<<15&4294967295|R>>>17),R=k+(N^(P|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var k=T-this.blockSize,C=this.B,P=this.h,N=0;N<T;){if(P==0)for(;N<=k;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(C[P++]=S.charCodeAt(N++),P==this.blockSize){i(this,C),P=0;break}}else for(;N<T;)if(C[P++]=S[N++],P==this.blockSize){i(this,C),P=0;break}}this.h=P,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var k=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=k&255,k/=256;for(this.u(S),S=Array(16),T=k=0;4>T;++T)for(var C=0;32>C;C+=8)S[k++]=this.g[T]>>>C&255;return S};function s(S,T){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=T(S)}function o(S,T){this.h=T;for(var k=[],C=!0,P=S.length-1;0<=P;P--){var N=S[P]|0;C&&N==T||(k[P]=N,C=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return I(u(-S));for(var T=[],k=1,C=0;S>=k;C++)T[C]=S/k|0,k*=4294967296;return new o(T,0)}function c(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return I(c(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(T,8)),C=h,P=0;P<S.length;P+=8){var N=Math.min(8,S.length-P),R=parseInt(S.substring(P,P+N),T);8>N?(N=u(Math.pow(T,N)),C=C.j(N).add(u(R))):(C=C.j(k),C=C.add(u(R)))}return C}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-I(this).m();for(var S=0,T=1,k=0;k<this.g.length;k++){var C=this.i(k);S+=(0<=C?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+I(this).toString(S);for(var T=u(Math.pow(S,6)),k=this,C="";;){var P=V(k,T).g;k=_(k,P.j(T));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=P,y(k))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=_(this,S),v(S)?-1:y(S)?0:1};function I(S){for(var T=S.g.length,k=[],C=0;C<T;C++)k[C]=~S.g[C];return new o(k,~S.h).add(p)}t.abs=function(){return v(this)?I(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],C=0,P=0;P<=T;P++){var N=C+(this.i(P)&65535)+(S.i(P)&65535),R=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);C=R>>>16,N&=65535,R&=65535,k[P]=R<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(I(T))}t.j=function(S){if(y(this)||y(S))return h;if(v(this))return v(S)?I(this).j(I(S)):I(I(this).j(S));if(v(S))return I(this.j(I(S)));if(0>this.l(m)&&0>S.l(m))return u(this.m()*S.m());for(var T=this.g.length+S.g.length,k=[],C=0;C<2*T;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<S.g.length;P++){var N=this.i(C)>>>16,R=this.i(C)&65535,H=S.i(P)>>>16,ge=S.i(P)&65535;k[2*C+2*P]+=R*ge,x(k,2*C+2*P),k[2*C+2*P+1]+=N*ge,x(k,2*C+2*P+1),k[2*C+2*P+1]+=R*H,x(k,2*C+2*P+1),k[2*C+2*P+2]+=N*H,x(k,2*C+2*P+2)}for(C=0;C<T;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=T;C<2*T;C++)k[C]=0;return new o(k,0)};function x(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function V(S,T){if(y(T))throw Error("division by zero");if(y(S))return new E(h,h);if(v(S))return T=V(I(S),T),new E(I(T.g),I(T.h));if(v(T))return T=V(S,I(T)),new E(I(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var k=p,C=T;0>=C.l(S);)k=L(k),C=L(C);var P=j(k,1),N=j(C,1);for(C=j(C,2),k=j(k,2);!y(C);){var R=N.add(C);0>=R.l(S)&&(P=P.add(k),N=R),C=j(C,1),k=j(k,1)}return T=_(S,P.j(T)),new E(P,T)}for(P=h;0<=S.l(T);){for(k=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(k),R=N.j(T);v(R)||0<R.l(S);)k-=C,N=u(k),R=N.j(T);y(N)&&(N=p),P=P.add(N),S=_(S,R)}return new E(P,S)}t.A=function(S){return V(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],C=0;C<T;C++)k[C]=this.i(C)&S.i(C);return new o(k,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],C=0;C<T;C++)k[C]=this.i(C)|S.i(C);return new o(k,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],C=0;C<T;C++)k[C]=this.i(C)^S.i(C);return new o(k,this.h^S.h)};function L(S){for(var T=S.g.length+1,k=[],C=0;C<T;C++)k[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(k,S.h)}function j(S,T){var k=T>>5;T%=32;for(var C=S.g.length-k,P=[],N=0;N<C;N++)P[N]=0<T?S.i(N+k)>>>T|S.i(N+k+1)<<32-T:S.i(N+k);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,fa=o}).apply(typeof HT<"u"?HT:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HP,wc,KP,Sf,C0,QP,YP,XP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,w){return d==Array.prototype||d==Object.prototype||(d[g]=w.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var g=0;g<d.length;++g){var w=d[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var w=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var U=d[A];if(!(U in w))break e;w=w[U]}d=d[d.length-1],A=w[d],g=g(A),g!=A&&g!=null&&e(w,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var w=0,A=!1,U={next:function(){if(!A&&w<d.length){var q=w++;return{value:g(q,d[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,w){return d.call.apply(d.bind,arguments)}function h(d,g,w){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),d.apply(g,U)}}return function(){return d.apply(g,arguments)}}function p(d,g,w){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,p.apply(null,arguments)}function m(d,g){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function y(d,g){function w(){}w.prototype=g.prototype,d.aa=g.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(A,U,q){for(var ae=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)ae[xt-2]=arguments[xt];return g.prototype[U].apply(A,ae)}}function v(d){const g=d.length;if(0<g){const w=Array(g);for(let A=0;A<g;A++)w[A]=d[A];return w}return[]}function I(d,g){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(l(A)){const U=d.length||0,q=A.length||0;d.length=U+q;for(let ae=0;ae<q;ae++)d[U+ae]=A[ae]}else d.push(A)}}class _{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){return/^[\s\xa0]*$/.test(d)}function E(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function j(d,g,w){for(const A in d)g.call(w,d[A],A,d)}function S(d,g){for(const w in d)g.call(void 0,d[w],w,d)}function T(d){const g={};for(const w in d)g[w]=d[w];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,g){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)d[w]=A[w];for(let q=0;q<k.length;q++)w=k[q],Object.prototype.hasOwnProperty.call(A,w)&&(d[w]=A[w])}}function P(d){var g=1;d=d.split(":");const w=[];for(;0<g&&d.length;)w.push(d.shift()),g--;return d.length&&w.push(d.join(":")),w}function N(d){a.setTimeout(()=>{throw d},0)}function R(){var d=ce;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class H{constructor(){this.h=this.g=null}add(g,w){const A=ge.get();A.set(g,w),this.h?this.h.next=A:this.g=A,this.h=A}}var ge=new _(()=>new be,d=>d.reset());class be{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,X=!1,ce=new H,D=()=>{const d=a.Promise.resolve(void 0);Ae=()=>{d.then(ue)}};var ue=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(w){N(w)}var g=ge;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}X=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return d}();function _t(d,g){if(O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(L){e:{try{V(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else w=="mouseover"?g=d.fromElement:w=="mouseout"&&(g=d.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:$e[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&_t.aa.h.call(this)}}y(_t,O);var $e={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),On=0;function en(d,g,w,A,U){this.listener=d,this.proxy=null,this.src=g,this.type=w,this.capture=!!A,this.ha=U,this.key=++On,this.da=this.fa=!1}function dn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function tn(d){this.src=d,this.g={},this.h=0}tn.prototype.add=function(d,g,w,A,U){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var ae=Vi(d,g,A,U);return-1<ae?(g=d[ae],w||(g.fa=!1)):(g=new en(g,this.src,q,!!A,U),g.fa=w,d.push(g)),g};function Vr(d,g){var w=g.type;if(w in d.g){var A=d.g[w],U=Array.prototype.indexOf.call(A,g,void 0),q;(q=0<=U)&&Array.prototype.splice.call(A,U,1),q&&(dn(g),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Vi(d,g,w,A){for(var U=0;U<d.length;++U){var q=d[U];if(!q.da&&q.listener==g&&q.capture==!!w&&q.ha==A)return U}return-1}var jr="closure_lm_"+(1e6*Math.random()|0),rr={};function li(d,g,w,A,U){if(Array.isArray(g)){for(var q=0;q<g.length;q++)li(d,g[q],w,A,U);return null}return w=Se(w),d&&d[rt]?d.K(g,w,u(A)?!!A.capture:!1,U):ji(d,g,w,!1,A,U)}function ji(d,g,w,A,U,q){if(!g)throw Error("Invalid event type");var ae=u(U)?!!U.capture:!!U,xt=G(d);if(xt||(d[jr]=xt=new tn(d)),w=xt.add(g,w,A,ae,q),w.proxy)return w;if(A=Vo(),w.proxy=A,A.src=d,A.listener=w,d.addEventListener)ft||(U=ae),U===void 0&&(U=!1),d.addEventListener(g.toString(),A,U);else if(d.attachEvent)d.attachEvent(Kr(g.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Vo(){function d(w){return g.call(d.src,d.listener,w)}const g=gs;return d}function Hr(d,g,w,A,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)Hr(d,g[q],w,A,U);else A=u(A)?!!A.capture:!!A,w=Se(w),d&&d[rt]?(d=d.i,g=String(g).toString(),g in d.g&&(q=d.g[g],w=Vi(q,w,A,U),-1<w&&(dn(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete d.g[g],d.h--)))):d&&(d=G(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Vi(g,w,A,U)),(w=-1<d?g[d]:null)&&ui(w))}function ui(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[rt])Vr(g.i,d);else{var w=d.type,A=d.proxy;g.removeEventListener?g.removeEventListener(w,A,d.capture):g.detachEvent?g.detachEvent(Kr(w),A):g.addListener&&g.removeListener&&g.removeListener(A),(w=G(g))?(Vr(w,d),w.h==0&&(w.src=null,g[jr]=null)):dn(d)}}}function Kr(d){return d in rr?rr[d]:rr[d]="on"+d}function gs(d,g){if(d.da)d=!0;else{g=new _t(g,this);var w=d.listener,A=d.ha||d.src;d.fa&&ui(d),d=w.call(A,g)}return d}function G(d){return d=d[jr],d instanceof tn?d:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(d){return typeof d=="function"?d:(d[Ie]||(d[Ie]=function(g){return d.handleEvent(g)}),d[Ie])}function B(){ke.call(this),this.i=new tn(this),this.M=this,this.F=null}y(B,ke),B.prototype[rt]=!0,B.prototype.removeEventListener=function(d,g,w,A){Hr(this,d,g,w,A)};function W(d,g){var w,A=d.F;if(A)for(w=[];A;A=A.F)w.push(A);if(d=d.M,A=g.type||g,typeof g=="string")g=new O(g,d);else if(g instanceof O)g.target=g.target||d;else{var U=g;g=new O(A,d),C(g,U)}if(U=!0,w)for(var q=w.length-1;0<=q;q--){var ae=g.g=w[q];U=J(ae,A,!0,g)&&U}if(ae=g.g=d,U=J(ae,A,!0,g)&&U,U=J(ae,A,!1,g)&&U,w)for(q=0;q<w.length;q++)ae=g.g=w[q],U=J(ae,A,!1,g)&&U}B.prototype.N=function(){if(B.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var w=d.g[g],A=0;A<w.length;A++)dn(w[A]);delete d.g[g],d.h--}}this.F=null},B.prototype.K=function(d,g,w,A){return this.i.add(String(d),g,!1,w,A)},B.prototype.L=function(d,g,w,A){return this.i.add(String(d),g,!0,w,A)};function J(d,g,w,A){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,q=0;q<g.length;++q){var ae=g[q];if(ae&&!ae.da&&ae.capture==w){var xt=ae.listener,Cn=ae.ha||ae.src;ae.fa&&Vr(d.i,ae),U=xt.call(Cn,A)!==!1&&U}}return U&&!A.defaultPrevented}function he(d,g,w){if(typeof d=="function")w&&(d=p(d,w));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function pe(d){d.g=he(()=>{d.g=null,d.i&&(d.i=!1,pe(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class De extends ke{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(d){ke.call(this),this.h=d,this.g={}}y(Le,ke);var qe=[];function ir(d){j(d.g,function(g,w){this.g.hasOwnProperty(w)&&ui(g)},d),d.g={}}Le.prototype.N=function(){Le.aa.N.call(this),ir(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=a.JSON.stringify,Et=a.JSON.parse,En=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Mn(){}Mn.prototype.h=null;function ci(d){return d.h||(d.h=d.i())}function jo(){}var Ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){O.call(this,"d")}y(Oi,O);function Oo(){O.call(this,"c")}y(Oo,O);var Or={},di=null;function ys(){return di=di||new B}Or.La="serverreachability";function hi(d){O.call(this,Or.La,d)}y(hi,O);function Mi(d){const g=ys();W(g,new hi(g))}Or.STAT_EVENT="statevent";function te(d,g){O.call(this,Or.STAT_EVENT,d),this.stat=g}y(te,O);function xe(d){const g=ys();W(g,new te(g,d))}Or.Ma="timingevent";function Ne(d,g){O.call(this,Or.Ma,d),this.size=g}y(Ne,O);function Ge(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function ve(){this.g=!0}ve.prototype.xa=function(){this.g=!1};function pt(d,g,w,A,U,q){d.info(function(){if(d.g)if(q)for(var ae="",xt=q.split("&"),Cn=0;Cn<xt.length;Cn++){var ot=xt[Cn].split("=");if(1<ot.length){var Fn=ot[0];ot=ot[1];var Un=Fn.split("_");ae=2<=Un.length&&Un[1]=="type"?ae+(Fn+"="+ot+"&"):ae+(Fn+"=redacted&")}}else ae=null;else ae=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+g+`
`+w+`
`+ae})}function nn(d,g,w,A,U,q,ae){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+g+`
`+w+`
`+q+" "+ae})}function z(d,g,w,A){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+re(d,w)+(A?" "+A:"")})}function Ee(d,g){d.info(function(){return"TIMEOUT: "+g})}ve.prototype.info=function(){};function re(d,g){if(!d.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var A=w[d];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return sr(w)}catch{return g}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},it={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function Kt(){}y(Kt,Mn),Kt.prototype.g=function(){return new XMLHttpRequest},Kt.prototype.i=function(){return{}},Pt=new Kt;function Qe(d,g,w,A){this.j=d,this.i=g,this.l=w,this.R=A||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rn}function rn(){this.i=null,this.g="",this.h=!1}var Pn={},sn={};function gn(d,g,w){d.L=1,d.v=mh(Li(g)),d.m=w,d.P=!0,Bt(d,null)}function Bt(d,g){d.F=Date.now(),or(d),d.A=Li(d.v);var w=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),V_(w.i,"t",A),d.C=0,w=d.j.J,d.h=new rn,d.g=J_(d.j,w?g:null,!d.m),0<d.O&&(d.M=new De(p(d.Y,d,d.g),d.O)),g=d.U,w=d.g,A=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(qe[0]=U.toString()),U=qe);for(var q=0;q<U.length;q++){var ae=li(w,U[q],A||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Mi(),pt(d.i,d.u,d.A,d.l,d.R,d.m)}Qe.prototype.ca=function(d){d=d.target;const g=this.M;g&&Fi(d)==3?g.j():this.Y(d)},Qe.prototype.Y=function(d){try{if(d==this.g)e:{const Un=Fi(this.g);var g=this.g.Ba();const Ja=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||B_(this.g)))){this.J||Un!=4||g==7||(g==8||0>=Ja?Mi(3):Mi(2)),Xn(this);var w=this.g.Z();this.X=w;t:if(Qr(this)){var A=B_(this.g);d="";var U=A.length,q=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),ie(this);var ae="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,d+=this.h.i.decode(A[g],{stream:!(q&&g==U-1)});A.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=w==200,nn(this.i,this.u,this.A,this.l,this.R,Un,w),this.o){if(this.T&&!this.K){t:{if(this.g){var xt,Cn=this.g;if((xt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(xt)){var ot=xt;break t}}ot=null}if(w=ot)z(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fe(this,w);else{this.o=!1,this.s=3,xe(12),Pe(this),ie(this);break e}}if(this.P){w=!0;let Yr;for(;!this.J&&this.C<ae.length;)if(Yr=Mr(this,ae),Yr==sn){Un==4&&(this.s=4,xe(14),w=!1),z(this.i,this.l,null,"[Incomplete Response]");break}else if(Yr==Pn){this.s=4,xe(15),z(this.i,this.l,ae,"[Invalid Chunk]"),w=!1;break}else z(this.i,this.l,Yr,null),Fe(this,Yr);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||ae.length!=0||this.h.h||(this.s=1,xe(16),w=!1),this.o=this.o&&w,!w)z(this.i,this.l,ae,"[Invalid Chunked Response]"),Pe(this),ie(this);else if(0<ae.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),lg(Fn),Fn.M=!0,xe(11))}}else z(this.i,this.l,ae,null),Fe(this,ae);Un==4&&Pe(this),this.o&&!this.J&&(Un==4?K_(this.j,this):(this.o=!1,or(this)))}else mV(this.g),w==400&&0<ae.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Pe(this),ie(this)}}}catch{}finally{}};function Qr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Mr(d,g){var w=d.C,A=g.indexOf(`
`,w);return A==-1?sn:(w=Number(g.substring(w,A)),isNaN(w)?Pn:(A+=1,A+w>g.length?sn:(g=g.slice(A,A+w),d.C=A+w,g)))}Qe.prototype.cancel=function(){this.J=!0,Pe(this)};function or(d){d.S=Date.now()+d.I,Ln(d,d.I)}function Ln(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ge(p(d.ba,d),g)}function Xn(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Qe.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ee(this.i,this.A),this.L!=2&&(Mi(),xe(17)),Pe(this),this.s=2,ie(this)):Ln(this,this.S-d)};function ie(d){d.j.G==0||d.J||K_(d.j,d)}function Pe(d){Xn(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,ir(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Fe(d,g){try{var w=d.j;if(w.G!=0&&(w.g==d||rg(w.h,d))){if(!d.K&&rg(w.h,d)&&w.G==3){try{var A=w.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)_h(w),wh(w);else break e;ag(w),xe(18)}}else w.za=U[1],0<w.za-w.T&&37500>U[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ge(p(w.Za,w),6e3));if(1>=ng(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Lo(w,11)}else if((d.K||w.g==d)&&_h(w),!x(g))for(U=w.Da.g.parse(g),g=0;g<U.length;g++){let ot=U[g];if(w.T=ot[0],ot=ot[1],w.G==2)if(ot[0]=="c"){w.K=ot[1],w.ia=ot[2];const Fn=ot[3];Fn!=null&&(w.la=Fn,w.j.info("VER="+w.la));const Un=ot[4];Un!=null&&(w.Aa=Un,w.j.info("SVER="+w.Aa));const Ja=ot[5];Ja!=null&&typeof Ja=="number"&&0<Ja&&(A=1.5*Ja,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Yr=d.g;if(Yr){const Th=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Th){var q=A.h;q.g||Th.indexOf("spdy")==-1&&Th.indexOf("quic")==-1&&Th.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ig(q,q.h),q.h=null))}if(A.D){const ug=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;ug&&(A.ya=ug,Ct(A.I,A.D,ug))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var ae=d;if(A.qa=X_(A,A.J?A.ia:null,A.W),ae.K){b_(A.h,ae);var xt=ae,Cn=A.L;Cn&&(xt.I=Cn),xt.B&&(Xn(xt),or(xt)),A.g=ae}else G_(A);0<w.i.length&&xh(w)}else ot[0]!="stop"&&ot[0]!="close"||Lo(w,7);else w.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Lo(w,7):og(w):ot[0]!="noop"&&w.l&&w.l.ta(ot),w.v=0)}}Mi(4)}catch{}}var ut=class{constructor(d,g){this.g=d,this.map=g}};function xr(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fi(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ng(d){return d.h?1:d.g?d.g.size:0}function rg(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function ig(d,g){d.g?d.g.add(g):d.h=g}function b_(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}xr.prototype.cancel=function(){if(this.i=k_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function k_(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const w of d.g.values())g=g.concat(w.D);return g}return v(d.i)}function eV(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],w=d.length,A=0;A<w;A++)g.push(d[A]);return g}g=[],w=0;for(A in d)g[w++]=d[A];return g}function tV(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var w=0;w<d;w++)g.push(w);return g}g=[],w=0;for(const A in d)g[w++]=A;return g}}}function A_(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var w=tV(d),A=eV(d),U=A.length,q=0;q<U;q++)g.call(void 0,A[q],w&&w[q],d)}var P_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nV(d,g){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var A=d[w].indexOf("="),U=null;if(0<=A){var q=d[w].substring(0,A);U=d[w].substring(A+1)}else q=d[w];g(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Mo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Mo){this.h=d.h,fh(this,d.j),this.o=d.o,this.g=d.g,ph(this,d.s),this.l=d.l;var g=d.i,w=new qu;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),C_(this,w),this.m=d.m}else d&&(g=String(d).match(P_))?(this.h=!1,fh(this,g[1]||"",!0),this.o=$u(g[2]||""),this.g=$u(g[3]||"",!0),ph(this,g[4]),this.l=$u(g[5]||"",!0),C_(this,g[6]||"",!0),this.m=$u(g[7]||"")):(this.h=!1,this.i=new qu(null,this.h))}Mo.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Wu(g,R_,!0),":");var w=this.g;return(w||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Wu(g,R_,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Wu(w,w.charAt(0)=="/"?sV:iV,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Wu(w,aV)),d.join("")};function Li(d){return new Mo(d)}function fh(d,g,w){d.j=w?$u(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ph(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function C_(d,g,w){g instanceof qu?(d.i=g,lV(d.i,d.h)):(w||(g=Wu(g,oV)),d.i=new qu(g,d.h))}function Ct(d,g,w){d.i.set(g,w)}function mh(d){return Ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function $u(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wu(d,g,w){return typeof d=="string"?(d=encodeURI(d).replace(g,rV),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var R_=/[#\/\?@]/g,iV=/[#\?:]/g,sV=/[#\?]/g,oV=/[#\?@]/g,aV=/#/g;function qu(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function vs(d){d.g||(d.g=new Map,d.h=0,d.i&&nV(d.i,function(g,w){d.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=qu.prototype,t.add=function(d,g){vs(this),this.i=null,d=Ya(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(g),this.h+=1,this};function N_(d,g){vs(d),g=Ya(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function D_(d,g){return vs(d),g=Ya(d,g),d.g.has(g)}t.forEach=function(d,g){vs(this),this.g.forEach(function(w,A){w.forEach(function(U){d.call(g,U,A,this)},this)},this)},t.na=function(){vs(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let A=0;A<g.length;A++){const U=d[A];for(let q=0;q<U.length;q++)w.push(g[A])}return w},t.V=function(d){vs(this);let g=[];if(typeof d=="string")D_(this,d)&&(g=g.concat(this.g.get(Ya(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)g=g.concat(d[w])}return g},t.set=function(d,g){return vs(this),this.i=null,d=Ya(this,d),D_(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function V_(d,g,w){N_(d,g),0<w.length&&(d.i=null,d.g.set(Ya(d,g),v(w)),d.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var A=g[w];const q=encodeURIComponent(String(A)),ae=this.V(A);for(A=0;A<ae.length;A++){var U=q;ae[A]!==""&&(U+="="+encodeURIComponent(String(ae[A]))),d.push(U)}}return this.i=d.join("&")};function Ya(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function lV(d,g){g&&!d.j&&(vs(d),d.i=null,d.g.forEach(function(w,A){var U=A.toLowerCase();A!=U&&(N_(this,A),V_(this,U,w))},d)),d.j=g}function uV(d,g){const w=new ve;if(a.Image){const A=new Image;A.onload=m(ws,w,"TestLoadImage: loaded",!0,g,A),A.onerror=m(ws,w,"TestLoadImage: error",!1,g,A),A.onabort=m(ws,w,"TestLoadImage: abort",!1,g,A),A.ontimeout=m(ws,w,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else g(!1)}function cV(d,g){const w=new ve,A=new AbortController,U=setTimeout(()=>{A.abort(),ws(w,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?ws(w,"TestPingServer: ok",!0,g):ws(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),ws(w,"TestPingServer: error",!1,g)})}function ws(d,g,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function dV(){this.g=new En}function hV(d,g,w){const A=w||"";try{A_(d,function(U,q){let ae=U;u(U)&&(ae=sr(U)),g.push(A+q+"="+encodeURIComponent(ae))})}catch(U){throw g.push(A+"type="+encodeURIComponent("_badmap")),U}}function gh(d){this.l=d.Ub||null,this.j=d.eb||!1}y(gh,Mn),gh.prototype.g=function(){return new yh(this.l,this.j)},gh.prototype.i=function(d){return function(){return d}}({});function yh(d,g){B.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(yh,B),t=yh.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Hu(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gu(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hu(this)),this.g&&(this.readyState=3,Hu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function j_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Gu(this):Hu(this),this.readyState==3&&j_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Gu(this))},t.Qa=function(d){this.g&&(this.response=d,Gu(this))},t.ga=function(){this.g&&Gu(this)};function Gu(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Hu(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=g.next();return d.join(`\r
`)};function Hu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(yh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function O_(d){let g="";return j(d,function(w,A){g+=A,g+=":",g+=w,g+=`\r
`}),g}function sg(d,g,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=O_(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):Ct(d,g,w))}function Qt(d){B.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Qt,B);var fV=/^https?$/i,pV=["POST","PUT"];t=Qt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?ci(this.o):ci(Pt),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(q){M_(this,q);return}if(d=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())w.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pV,g,void 0))||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ae]of w)this.g.setRequestHeader(q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{U_(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){M_(this,q)}};function M_(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,L_(d),vh(d)}function L_(d){d.A||(d.A=!0,W(d,"complete"),W(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,W(this,"complete"),W(this,"abort"),vh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vh(this,!0)),Qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?F_(this):this.bb())},t.bb=function(){F_(this)};function F_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Fi(d)!=4||d.Z()!=2)){if(d.u&&Fi(d)==4)he(d.Ea,0,d);else if(W(d,"readystatechange"),Fi(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var A;if(A=ae===0){var U=String(d.D).match(P_)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),A=!fV.test(U?U.toLowerCase():"")}w=A}if(w)W(d,"complete"),W(d,"success");else{d.m=6;try{var q=2<Fi(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",L_(d)}}finally{vh(d)}}}}function vh(d,g){if(d.g){U_(d);const w=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||W(d,"ready");try{w.onreadystatechange=A}catch{}}}function U_(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Fi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Et(g)}};function B_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function mV(d){const g={};d=(d.g&&2<=Fi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(x(d[A]))continue;var w=P(d[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=g[U]||[];g[U]=q,q.push(w)}S(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ku(d,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||g}function z_(d){this.Aa=0,this.i=[],this.j=new ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ku("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ku("baseRetryDelayMs",5e3,d),this.cb=Ku("retryDelaySeedMs",1e4,d),this.Wa=Ku("forwardChannelMaxRetries",2,d),this.wa=Ku("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new xr(d&&d.concurrentRequestLimit),this.Da=new dV,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z_.prototype,t.la=8,t.G=1,t.connect=function(d,g,w,A){xe(0),this.W=d,this.H=g||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=X_(this,null,this.W),xh(this)};function og(d){if($_(d),d.G==3){var g=d.U++,w=Li(d.I);if(Ct(w,"SID",d.K),Ct(w,"RID",g),Ct(w,"TYPE","terminate"),Qu(d,w),g=new Qe(d,d.j,g),g.L=2,g.v=mh(Li(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.v,w=!0),w||(g.g=J_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),or(g)}Y_(d)}function wh(d){d.g&&(lg(d),d.g.cancel(),d.g=null)}function $_(d){wh(d),d.u&&(a.clearTimeout(d.u),d.u=null),_h(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function xh(d){if(!fi(d.h)&&!d.s){d.s=!0;var g=d.Ga;Ae||D(),X||(Ae(),X=!0),ce.add(g,d),d.B=0}}function gV(d,g){return ng(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ge(p(d.Ga,d,g),Q_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const U=new Qe(this,this.j,d);let q=this.o;if(this.S&&(q?(q=T(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=q_(this,U,g),w=Li(this.I),Ct(w,"RID",d),Ct(w,"CVER",22),this.D&&Ct(w,"X-HTTP-Session-Id",this.D),Qu(this,w),q&&(this.O?g="headers="+encodeURIComponent(String(O_(q)))+"&"+g:this.m&&sg(w,this.m,q)),ig(this.h,U),this.Ua&&Ct(w,"TYPE","init"),this.P?(Ct(w,"$req",g),Ct(w,"SID","null"),U.T=!0,gn(U,w,null)):gn(U,w,g),this.G=2}}else this.G==3&&(d?W_(this,d):this.i.length==0||fi(this.h)||W_(this))};function W_(d,g){var w;g?w=g.l:w=d.U++;const A=Li(d.I);Ct(A,"SID",d.K),Ct(A,"RID",w),Ct(A,"AID",d.T),Qu(d,A),d.m&&d.o&&sg(A,d.m,d.o),w=new Qe(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),g&&(d.i=g.D.concat(d.i)),g=q_(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ig(d.h,w),gn(w,A,g)}function Qu(d,g){d.H&&j(d.H,function(w,A){Ct(g,A,w)}),d.l&&A_({},function(w,A){Ct(g,A,w)})}function q_(d,g,w){w=Math.min(d.i.length,w);var A=d.l?p(d.l.Na,d.l,d):null;e:{var U=d.i;let q=-1;for(;;){const ae=["count="+w];q==-1?0<w?(q=U[0].g,ae.push("ofs="+q)):q=0:ae.push("ofs="+q);let xt=!0;for(let Cn=0;Cn<w;Cn++){let ot=U[Cn].g;const Fn=U[Cn].map;if(ot-=q,0>ot)q=Math.max(0,U[Cn].g-100),xt=!1;else try{hV(Fn,ae,"req"+ot+"_")}catch{A&&A(Fn)}}if(xt){A=ae.join("&");break e}}}return d=d.i.splice(0,w),g.D=d,A}function G_(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Ae||D(),X||(Ae(),X=!0),ce.add(g,d),d.v=0}}function ag(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ge(p(d.Fa,d),Q_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,H_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ge(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),wh(this),H_(this))};function lg(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function H_(d){d.g=new Qe(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Li(d.qa);Ct(g,"RID","rpc"),Ct(g,"SID",d.K),Ct(g,"AID",d.T),Ct(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ct(g,"TO",d.ja),Ct(g,"TYPE","xmlhttp"),Qu(d,g),d.m&&d.o&&sg(g,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=mh(Li(g)),w.m=null,w.P=!0,Bt(w,d)}t.Za=function(){this.C!=null&&(this.C=null,wh(this),ag(this),xe(19))};function _h(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function K_(d,g){var w=null;if(d.g==g){_h(d),lg(d),d.g=null;var A=2}else if(rg(d.h,g))w=g.D,b_(d.h,g),A=1;else return;if(d.G!=0){if(g.o)if(A==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var U=d.B;A=ys(),W(A,new Ne(A,w)),xh(d)}else G_(d);else if(U=g.s,U==3||U==0&&0<g.X||!(A==1&&gV(d,g)||A==2&&ag(d)))switch(w&&0<w.length&&(g=d.h,g.i=g.i.concat(w)),U){case 1:Lo(d,5);break;case 4:Lo(d,10);break;case 3:Lo(d,6);break;default:Lo(d,2)}}}function Q_(d,g){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*g}function Lo(d,g){if(d.j.info("Error code "+g),g==2){var w=p(d.fb,d),A=d.Xa;const U=!A;A=new Mo(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fh(A,"https"),mh(A),U?uV(A.toString(),w):cV(A.toString(),w)}else xe(2);d.G=0,d.l&&d.l.sa(g),Y_(d),$_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Y_(d){if(d.G=0,d.ka=[],d.l){const g=k_(d.h);(g.length!=0||d.i.length!=0)&&(I(d.ka,g),I(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function X_(d,g,w){var A=w instanceof Mo?Li(w):new Mo(w);if(A.g!="")g&&(A.g=g+"."+A.g),ph(A,A.s);else{var U=a.location;A=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var q=new Mo(null);A&&fh(q,A),g&&(q.g=g),U&&ph(q,U),w&&(q.l=w),A=q}return w=d.D,g=d.ya,w&&g&&Ct(A,w,g),Ct(A,"VER",d.la),Qu(d,A),A}function J_(d,g,w){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Qt(new gh({eb:w})):new Qt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z_(){}t=Z_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eh(){}Eh.prototype.g=function(d,g){return new _r(d,g)};function _r(d,g){B.call(this),this.g=new z_(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!x(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Xa(this)}y(_r,B),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){og(this.g)},_r.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=sr(d),d=w);g.i.push(new ut(g.Ya++,d)),g.G==3&&xh(g)},_r.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,_r.aa.N.call(this)};function eE(d){Oi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const w in g){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(eE,Oi);function tE(){Oo.call(this),this.status=1}y(tE,Oo);function Xa(d){this.g=d}y(Xa,Z_),Xa.prototype.ua=function(){W(this.g,"a")},Xa.prototype.ta=function(d){W(this.g,new eE(d))},Xa.prototype.sa=function(d){W(this.g,new tE)},Xa.prototype.ra=function(){W(this.g,"b")},Eh.prototype.createWebChannel=Eh.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,XP=function(){return new Eh},YP=function(){return ys()},QP=Or,C0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Sf=We,it.COMPLETE="complete",KP=it,jo.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",B.prototype.listen=B.prototype.K,wc=jo,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,HP=Qt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const KT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new Sw("@firebase/firestore");function ol(){return lo.logLevel}function bF(t){lo.setLogLevel(t)}function Q(t,...e){if(lo.logLevel<=Xe.DEBUG){const n=e.map(Lw);lo.debug(`Firestore (${Pu}): ${t}`,...n)}}function an(t,...e){if(lo.logLevel<=Xe.ERROR){const n=e.map(Lw);lo.error(`Firestore (${Pu}): ${t}`,...n)}}function Pr(t,...e){if(lo.logLevel<=Xe.WARN){const n=e.map(Lw);lo.warn(`Firestore (${Pu}): ${t}`,...n)}}function Lw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: `+t;throw an(e),new Error(e)}function ye(t,e){t||fe()}function kF(t,e){t||fe()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sn.UNAUTHENTICATED))}shutdown(){}}class AF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PF{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new JP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Sn(e)}}class CF{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new eC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class DF{getToken(){return Promise.resolve(new eC(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function eu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function tC(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new jt(0,0))}static max(){return new Te(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends wd{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const jF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends wd{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return jF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Je.fromString(e))}static fromName(e){return new le(Je.fromString(e).popFirst(5))}static empty(){return new le(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function R0(t){return t.fields.find(e=>e.kind===2)}function Go(t){return t.fields.filter(e=>e.kind!==2)}function OF(t,e){let n=Ve(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=MF(t.fields[r],e.fields[r]),n!==0)return n;return Ve(t.fields.length,e.fields.length)}tu.UNKNOWN_ID=-1;class pa{constructor(e,n){this.fieldPath=e,this.kind=n}}function MF(t,e){const n=Dt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Ve(t.kind,e.kind)}class nu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new nu(0,Cr.min())}}function nC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Cr(i,le.empty(),e)}function rC(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(Te.min(),le.empty(),-1)}static max(){return new Cr(Te.max(),le.empty(),-1)}}function Uw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==iC)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new kn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Vc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Bw(r.target.error);this.V.reject(new Vc(e,i))}}static open(e,n,r,i){try{return new xm(n,e.transaction(i,r))}catch(s){throw new Vc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new FF(n)}}class bi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,bi.S(xn())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Q("SimpleDb","Removing database:",e),Jo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nP())return!1;if(bi.v())return!0;const e=xn(),n=bi.S(e),r=0<n&&n<10,i=oC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new K($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vc(e,o))},i.onupgradeneeded=s=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=xm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),F.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class LF{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Jo(this.B.delete())}}class Vc extends K{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bo(t){return t.name==="IndexedDbTransactionError"}class FF{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jo(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),Jo(this.store.add(e))}get(e){return Jo(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),Jo(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),Jo(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new F((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new F((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new F((r,i)=>{n.onerror=s=>{const o=Bw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new F((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new LF(a),u=n(a.primaryKey,a.value,l);if(u instanceof F){const c=u.catch(h=>(l.done(),F.reject(h)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>F.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Jo(t){return new F((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Bw(r.target.error);n(i)}})}let QT=!1;function Bw(t){const e=bi.S(xn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QT||(QT=!0,setTimeout(()=>{throw r},0)),r}}return t}class UF{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){bo(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await So(n)}await this.X(6e4)})}}class BF{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return F.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=rC(s);Uw(o,r)>0&&(r=o)}),new Cr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cr.oe=-1;function Gd(t){return t==null}function xd(t){return t===0&&1/t==-1/0}function aC(t){return typeof t=="number"&&Number.isInteger(t)&&!xd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YT(e)),e=zF(t.get(n),e);return YT(e)}function zF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function YT(t){return t+""}function _i(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Je.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&fe(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:fe()}s=o+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e){return[t,Hn(e)]}function lC(t,e,n){return[t,Hn(e),n]}const $F={},WF=["prefixPath","collectionGroup","readTime","documentId"],qF=["prefixPath","collectionGroup","documentId"],GF=["collectionGroup","readTime","prefixPath","documentId"],HF=["canonicalId","targetId"],KF=["targetId","path"],QF=["path","targetId"],YF=["collectionId","parent"],XF=["indexId","uid"],JF=["uid","sequenceNumber"],ZF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e3=["indexId","uid","orderedDocumentKey"],t3=["userId","collectionPath","documentId"],n3=["userId","collectionPath","largestBatchId"],r3=["userId","collectionGroup","largestBatchId"],uC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],i3=[...uC,"documentOverlays"],cC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dC=cC,zw=[...dC,"indexConfiguration","indexState","indexEntries"],s3=zw,o3=[...zw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends sC{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function _n(t,e){const n=oe(t);return bi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hC(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function fC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||Nn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Nn.RED,this.left=i??Nn.EMPTY,this.right=s??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Nn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ZT(this.data.getIterator())}getIteratorFrom(e){return new ZT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class ZT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new dr([])}unionWith(e){let n=new vt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pC("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const l3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(ye(!!t),typeof t=="string"){let e=0;const n=l3.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Em(t){const e=t.mapValue.fields.__previous_value__;return _m(e)?Em(e):e}function _d(t){const e=as(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class uo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kf={nullValue:"NULL_VALUE"};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_m(t)?4:mC(t)?9007199254740991:Tm(t)?10:11:fe()}function Ci(t,e){if(t===e)return!0;const n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _d(t).isEqual(_d(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=as(i.timestampValue),a=as(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ls(i.bytesValue).isEqual(ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ot(i.geoPointValue.latitude)===Ot(s.geoPointValue.latitude)&&Ot(i.geoPointValue.longitude)===Ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ot(i.integerValue)===Ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ot(i.doubleValue),a=Ot(s.doubleValue);return o===a?xd(o)===xd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return eu(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JT(o)!==JT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ci(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Ed(t,e){return(t.values||[]).find(n=>Ci(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=co(t),r=co(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ot(s.integerValue||s.doubleValue),l=Ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return e1(t.timestampValue,e.timestampValue);case 4:return e1(_d(t),_d(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ls(s),l=ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Ve(a[u],l[u]);if(c!==0)return c}return Ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ve(Ot(s.latitude),Ot(o.latitude));return a!==0?a:Ve(Ot(s.longitude),Ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return t1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Ve(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0);return v!==0?v:t1(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===zs.mapValue&&o===zs.mapValue)return 0;if(s===zs.mapValue)return 1;if(o===zs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const p=Ve(l[h],c[h]);if(p!==0)return p;const m=ho(a[l[h]],u[c[h]]);if(m!==0)return m}return Ve(l.length,c.length)}(t.mapValue,e.mapValue);default:throw fe()}}function e1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=as(t),r=as(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function t1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return Ve(n.length,r.length)}function ru(t){return D0(t)}function D0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=as(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=D0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${D0(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function Af(t){switch(co(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(t);return e?16+Af(e):16;case 5:return 2*t.stringValue.length;case 6:return ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Af(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(s,o)=>{i+=s.length+Af(o)}),i}(t.mapValue);default:throw fe()}}function ka(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function Td(t){return!!t&&"arrayValue"in t}function n1(t){return!!t&&"nullValue"in t}function r1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function Tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const gC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function c3(t){return"nullValue"in t?kf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ka(uo.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tm(t)?gC:{mapValue:{}}:fe()}function d3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ka(uo.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?gC:"mapValue"in t?Tm(t)?{mapValue:{}}:zs:fe()}function i1(t,e){const n=ho(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function s1(t,e){const n=ho(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=jc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dn(jc(this.value))}}function yC(t){const e=[];return ko(t.fields,(n,r)=>{const i=new Dt([n]);if(Pf(r)){const s=yC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,Te.min(),Te.min(),Te.min(),Dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,Te.min(),Te.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,Te.min(),Te.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.position=e,this.inclusive=n}}function o1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function a1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n="asc"){this.field=e,this.dir=n}}function h3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class et extends vC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new f3(e,n,r):n==="array-contains"?new g3(e,r):n==="in"?new IC(e,r):n==="not-in"?new y3(e,r):n==="array-contains-any"?new v3(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p3(e,r):new m3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends vC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gt(e,n)}matches(e){return iu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iu(t){return t.op==="and"}function j0(t){return t.op==="or"}function $w(t){return wC(t)&&iu(t)}function wC(t){for(const e of t.filters)if(e instanceof gt)return!1;return!0}function O0(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+ru(t.value);if($w(t))return t.filters.map(e=>O0(e)).join(",");{const e=t.filters.map(n=>O0(n)).join(",");return`${t.op}(${e})`}}function xC(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Ci(r.value,i.value)}(t,e):t instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&xC(o,i.filters[a]),!0):!1}(t,e):void fe()}function _C(t,e){const n=t.filters.concat(e);return gt.create(n,t.op)}function EC(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${ru(n.value)}`}(t):t instanceof gt?function(n){return n.op.toString()+" {"+n.getFilters().map(EC).join(" ,")+"}"}(t):"Filter"}class f3 extends et{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class p3 extends et{constructor(e,n){super(e,"in",n),this.keys=TC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class m3 extends et{constructor(e,n){super(e,"not-in",n),this.keys=TC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class g3 extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Td(n)&&Ed(n.arrayValue,this.value)}}class IC extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ed(this.value.arrayValue,n)}}class y3 extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ed(this.value.arrayValue,n)}}class v3 extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ed(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function M0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new w3(t,e,n,r,i,s,o)}function Aa(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>O0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ru(r)).join(",")),e.ue=n}return e.ue}function Hd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!a1(t.startAt,e.startAt)&&a1(t.endAt,e.endAt)}function Ep(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Tp(t,e){return t.filters.filter(n=>n instanceof et&&n.field.isEqual(e))}function l1(t,e,n){let r=kf,i=!0;for(const s of Tp(t,e)){let o=kf,a=!0;switch(s.op){case"<":case"<=":o=c3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kf}i1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];i1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function u1(t,e,n){let r=zs,i=!0;for(const s of Tp(t,e)){let o=zs,a=!0;switch(s.op){case">=":case">":o=d3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zs}s1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];s1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SC(t,e,n,r,i,s,o,a){return new hs(t,e,n,r,i,s,o,a)}function Cu(t){return new hs(t)}function c1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ww(t){return t.collectionGroup!==null}function Ml(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(Dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Id(s,r))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new Id(Dt.keyField(),r))}return e.ce}function Kn(t){const e=oe(t);return e.le||(e.le=kC(e,Ml(t))),e.le}function bC(t){const e=oe(t);return e.he||(e.he=kC(e,t.explicitOrderBy)),e.he}function kC(t,e){if(t.limitType==="F")return M0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Id(i.field,s)});const n=t.endAt?new fo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fo(t.startAt.position,t.startAt.inclusive):null;return M0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function L0(t,e){const n=t.filters.concat([e]);return new hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ip(t,e,n){return new hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kd(t,e){return Hd(Kn(t),Kn(e))&&t.limitType===e.limitType}function AC(t){return`${Aa(Kn(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EC(i)).join(", ")}]`),Gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ru(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ru(i)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function Qd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ml(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=o1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ml(r),i)||r.endAt&&!function(o,a,l){const u=o1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ml(r),i))}(t,e)}function PC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CC(t){return(e,n)=>{let r=!1;for(const i of Ml(t)){const s=x3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function x3(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ho(l,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new At(le.comparator);function hr(){return _3}const RC=new At(le.comparator);function xc(...t){let e=RC;for(const n of t)e=e.insert(n.key,n);return e}function NC(t){let e=RC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return Oc()}function DC(){return Oc()}function Oc(){return new fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const E3=new At(le.comparator),T3=new vt(le.comparator);function Be(...t){let e=T3;for(const n of t)e=e.add(n);return e}const I3=new vt(Ve);function qw(){return I3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xd(e)?"-0":e}}function VC(t){return{integerValue:""+t}}function jC(t,e){return aC(e)?VC(e):Gw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function S3(t,e,n){return t instanceof su?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_m(s)&&(s=Em(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Pa?MC(t,e):t instanceof Ca?LC(t,e):function(i,s){const o=OC(i,s),a=d1(o)+d1(i.Pe);return V0(o)&&V0(i.Pe)?VC(a):Gw(i.serializer,a)}(t,e)}function b3(t,e,n){return t instanceof Pa?MC(t,e):t instanceof Ca?LC(t,e):n}function OC(t,e){return t instanceof ou?function(r){return V0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class su extends Im{}class Pa extends Im{constructor(e){super(),this.elements=e}}function MC(t,e){const n=FC(e);for(const r of t.elements)n.some(i=>Ci(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ca extends Im{constructor(e){super(),this.elements=e}}function LC(t,e){let n=FC(e);for(const r of t.elements)n=n.filter(i=>!Ci(i,r));return{arrayValue:{values:n}}}class ou extends Im{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function d1(t){return Ot(t.integerValue||t.doubleValue)}function FC(t){return Td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.field=e,this.transform=n}}function k3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Pa&&i instanceof Pa||r instanceof Ca&&i instanceof Ca?eu(r.elements,i.elements,Ci):r instanceof ou&&i instanceof ou?Ci(r.Pe,i.Pe):r instanceof su&&i instanceof su}(t.transform,e.transform)}class A3{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sm{}function UC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,Lt.none()):new Ru(t.key,t.data,Lt.none());{const n=t.data,r=Dn.empty();let i=new vt(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ps(t.key,r,new dr(i.toArray()),Lt.none())}}function P3(t,e,n){t instanceof Ru?function(i,s,o){const a=i.value.clone(),l=f1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ps?function(i,s,o){if(!Cf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=f1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(BC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mc(t,e,n,r){return t instanceof Ru?function(s,o,a,l){if(!Cf(s.precondition,o))return a;const u=s.value.clone(),c=p1(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ps?function(s,o,a,l){if(!Cf(s.precondition,o))return a;const u=p1(s.fieldTransforms,l,o),c=o.data;return c.setAll(BC(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Cf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function C3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OC(r.transform,i||null);s!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,s))}return n||null}function h1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&eu(r,i,(s,o)=>k3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ru extends Sm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ps extends Sm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function BC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function f1(t,e,n){const r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,b3(o,a,n[i]))}return r}function p1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,S3(s,o,e))}return r}class Nu extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&P3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=UC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(n,r)=>h1(n,r))&&eu(this.baseMutations,e.baseMutations,(n,r)=>h1(n,r))}}class Qw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=function(){return E3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Qw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,nt;function $C(t){switch(t){default:return fe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function WC(t){if(t===void 0)return an("GRPC error has no .code"),$.UNKNOWN;switch(t){case hn.OK:return $.OK;case hn.CANCELLED:return $.CANCELLED;case hn.UNKNOWN:return $.UNKNOWN;case hn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case hn.INTERNAL:return $.INTERNAL;case hn.UNAVAILABLE:return $.UNAVAILABLE;case hn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case hn.NOT_FOUND:return $.NOT_FOUND;case hn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case hn.ABORTED:return $.ABORTED;case hn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case hn.DATA_LOSS:return $.DATA_LOSS;default:return fe()}}(nt=hn||(hn={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=new fa([4294967295,4294967295],0);function m1(t){const e=qC().encode(t),n=new GP;return n.update(e),new Uint8Array(n.digest())}function g1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fa([n,r],0),new fa([i,s],0)]}class Xw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fa.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fa.fromNumber(r)));return i.compare(N3)===1&&(i=new fa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=m1(e),[r,i]=g1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=m1(e),[r,i]=g1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xd(Te.min(),i,new At(Ve),hr(),Be())}}class Jd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jd(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class GC{constructor(e,n){this.targetId=e,this.me=n}}class HC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class y1{constructor(){this.fe=0,this.ge=w1(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),r=Be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new Jd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=w1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D3{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=v1(),this.Qe=new At(Ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ep(s))if(r===0){const o=new le(s.path);this.Ue(n,o,Nt.newNoDocument(o,Te.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}Sp==null||Sp.et(function(c,h,p,m,y){var v,I,_,x,E,V;const L={localCacheCount:c,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},j=h.unchangedNames;return j&&(L.bloomFilter={applied:y===0,hashCount:(v=j==null?void 0:j.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(x=(_=(I=j==null?void 0:j.bits)===null||I===void 0?void 0:I.bitmap)===null||_===void 0?void 0:_.length)!==null&&x!==void 0?x:0,padding:(V=(E=j==null?void 0:j.bits)===null||E===void 0?void 0:E.padding)!==null&&V!==void 0?V:0,mightContain:S=>{var T;return(T=m==null?void 0:m.mightContain(S))!==null&&T!==void 0&&T}}),L}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ls(r).toUint8Array()}catch(l){if(l instanceof pC)return Pr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xw(o,i,s)}catch(l){return Pr(l instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ep(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Nt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Xd(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=v1(),this.Qe=new At(Ve),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new y1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new y1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function v1(){return new At(le.comparator)}function w1(){return new At(le.comparator)}const V3={asc:"ASCENDING",desc:"DESCENDING"},j3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O3={and:"AND",or:"OR"};class M3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function F0(t,e){return t.useProto3Json||Gd(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L3(t,e){return au(t,e.toTimestamp())}function cn(t){return ye(!!t),Te.fromTimestamp(function(n){const r=as(n);return new jt(r.seconds,r.nanos)}(t))}function Jw(t,e){return U0(t,e).canonicalString()}function U0(t,e){const n=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QC(t){const e=Je.fromString(t);return ye(sR(e)),e}function Sd(t,e){return Jw(t.databaseId,e.path)}function ki(t,e){const n=QC(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(JC(n))}function YC(t,e){return Jw(t.databaseId,e)}function XC(t){const e=QC(t);return e.length===4?Je.emptyPath():JC(e)}function B0(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JC(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function x1(t,e,n){return{name:Sd(t,e),fields:n.value.mapValue.fields}}function ZC(t,e,n){const r=ki(t,e.name),i=cn(e.updateTime),s=e.createTime?cn(e.createTime):Te.min(),o=new Dn({mapValue:{fields:e.fields}}),a=Nt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function F3(t,e){return"found"in e?function(r,i){ye(!!i.found),i.found.name,i.found.updateTime;const s=ki(r,i.found.name),o=cn(i.found.updateTime),a=i.found.createTime?cn(i.found.createTime):Te.min(),l=new Dn({mapValue:{fields:i.found.fields}});return Nt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ye(!!i.missing),ye(!!i.readTime);const s=ki(r,i.missing),o=cn(i.readTime);return Nt.newNoDocument(s,o)}(t,e):fe()}function U3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ye(c===void 0||typeof c=="string"),Ht.fromBase64String(c||"")):(ye(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ht.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?$.UNKNOWN:WC(u.code);return new K(c,u.message||"")}(o);n=new HC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ki(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):Te.min(),a=new Dn({mapValue:{fields:r.document.fields}}),l=Nt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Rf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ki(t,r.document),s=r.readTime?cn(r.readTime):Te.min(),o=Nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Rf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ki(t,r.document),s=r.removedTargetIds||[];n=new Rf([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new R3(i,s),a=r.targetId;n=new GC(a,o)}}return n}function bd(t,e){let n;if(e instanceof Ru)n={update:x1(t,e.key,e.value)};else if(e instanceof Nu)n={delete:Sd(t,e.key)};else if(e instanceof ps)n={update:x1(t,e.key,e.data),updateMask:G3(e.fieldMask)};else{if(!(e instanceof Hw))return fe();n={verify:Sd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof su)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ca)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ou)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:L3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function z0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Lt.updateTime(cn(s.updateTime)):s.exists!==void 0?Lt.exists(s.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ye(a.setToServerValue==="REQUEST_TIME"),l=new su;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Pa(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Ca(c)}else"increment"in a?l=new ou(o,a.increment):fe();const u=Dt.fromServerFormat(a.fieldPath);return new Yd(u,l)}(t,i)):[];if(e.update){e.update.name;const i=ki(t,e.update.name),s=new Dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new dr(u.map(c=>Dt.fromServerFormat(c)))}(e.updateMask);return new ps(i,s,o,n,r)}return new Ru(i,s,n,r)}if(e.delete){const i=ki(t,e.delete);return new Nu(i,n)}if(e.verify){const i=ki(t,e.verify);return new Hw(i,n)}return fe()}function B3(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(Te.min())&&(o=cn(s)),new A3(o,i.transformResults||[])}(n,e))):[]}function eR(t,e){return{documents:[YC(t,e.path)]}}function bm(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YC(t,i);const s=function(u){if(u.length!==0)return iR(gt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(p){return{field:Os(p.field),direction:$3(p.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=F0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function tR(t,e,n,r){const{_t:i,parent:s}=bm(t,e),o={},a=[];let l=0;return n.forEach(u=>{const c=r?u.alias:"aggregate_"+l++;o[c]=u.alias,u.aggregateType==="count"?a.push({alias:c,count:{}}):u.aggregateType==="avg"?a.push({alias:c,avg:{field:Os(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:c,sum:{field:Os(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function nR(t){let e=XC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const p=rR(h);return p instanceof gt&&$w(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new Id(ll(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Gd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new fo(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,m=h.values||[];return new fo(m,p)}(n.endAt)),SC(e,i,o,s,a,"F",l,u)}function z3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ll(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ll(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ll(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ll(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return et.create(ll(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gt.create(n.compositeFilter.filters.map(r=>rR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function $3(t){return V3[t]}function W3(t){return j3[t]}function q3(t){return O3[t]}function Os(t){return{fieldPath:t.canonicalString()}}function ll(t){return Dt.fromServerFormat(t.fieldPath)}function iR(t){return t instanceof et?function(n){if(n.op==="=="){if(r1(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(n1(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r1(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(n1(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:W3(n.op),value:n.value}}}(t):t instanceof gt?function(n){const r=n.getFilters().map(i=>iR(i));return r.length===1?r[0]:{compositeFilter:{op:q3(n.op),filters:r}}}(t):fe()}function G3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,r,i,s=Te.min(),o=Te.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.ct=e}}function H3(t,e){let n;if(e.document)n=ZC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Na(e.noDocument.readTime);n=Nt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe();{const r=le.fromSegments(e.unknownDocument.path),i=Na(e.unknownDocument.version);n=Nt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new jt(i[0],i[1]);return Te.fromTimestamp(s)}(e.readTime)),n}function _1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Sd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:au(s,o.version.toTimestamp()),createTime:au(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return fe();r.unknownDocument={path:n.path.toArray(),version:Ra(e.version)}}return r}function bp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Na(t){const e=new jt(t.seconds,t.nanoseconds);return Te.fromTimestamp(e)}function Zo(t,e){const n=(e.baseMutations||[]).map(s=>z0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>z0(t.ct,s)),i=jt.fromMillis(e.localWriteTimeMs);return new Kw(e.batchId,i,n,r)}function Ec(t){const e=Na(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Na(t.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ye(s.documents.length===1),Kn(Cu(XC(s.documents[0])))}(t.query):function(s){return Kn(nR(s))}(t.query),new Qi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ht.fromBase64String(t.resumeToken))}function aR(t,e){const n=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion);let i;i=Ep(e.target)?eR(t.ct,e.target):bm(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zw(t){const e=nR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ip(e,e.limit,"L"):e}function Wg(t,e){return new Yw(e.largestBatchId,z0(t.ct,e.overlayMutation))}function E1(t,e){const n=e.path.lastSegment();return[t,Hn(e.path.popLast()),n]}function T1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ra(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{getBundleMetadata(e,n){return I1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Na(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return I1(e).put(function(i){return{bundleId:i.id,createTime:Ra(cn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return S1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Zw(s.bundledQuery),readTime:Na(s.readTime)}}(r)})}saveNamedQuery(e,n){return S1(e).put(function(i){return{name:i.name,readTime:Ra(cn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function I1(t){return _n(t,"bundles")}function S1(t){return _n(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new km(e,r)}getOverlay(e,n){return ic(e).get(E1(this.userId,n)).next(r=>r?Wg(this.serializer,r):null)}getOverlays(e,n){const r=Ei();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Yw(n,o);i.push(this.ht(e,a))}),F.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Hn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ic(e).j("collectionPathOverlayIndex",a))}),F.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Ei(),s=Hn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ic(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Wg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Ei();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ic(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Wg(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return ic(e).put(function(i,s,o){const[a,l,u]=E1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:bd(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function ic(t){return _n(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{Pt(e){return _n(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ot(e.integerValue));else if("doubleValue"in e){const r=Ot(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),xd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=as(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ls(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?mC(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Tm(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):fe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ot(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),le.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ea.vt=new ea;function Y3(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function b1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Y3(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class X3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=b1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=b1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class J3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Z3{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class sc{constructor(){this.jt=new X3,this.Ht=new J3(this.jt),this.Jt=new Z3(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ta(this.indexId,this.documentKey,this.arrayValue,r)}}function Es(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=k1(t.arrayValue,e.arrayValue),n!==0?n:(n=k1(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function k1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.Xt=new vt((n,r)=>Dt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ye(e.collectionGroup===this.collectionId),this.nn)return!1;const n=R0(e);if(n!==void 0&&!this.sn(n))return!1;const r=Go(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new vt(Dt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new pa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new pa(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new pa(r.field,r.dir==="asc"?0:1)));return new tu(tu.UNKNOWN_ID,this.collectionId,n,nu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){var e,n;if(ye(t instanceof et||t instanceof gt),t instanceof et){if(t instanceof IC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>et.create(t.field,"==",s)))||[];return gt.create(i,"or")}return t}const r=t.filters.map(i=>lR(i));return gt.create(r,t.op)}function eU(t){if(t.getFilters().length===0)return[];const e=q0(lR(t));return ye(uR(e)),$0(e)||W0(e)?[e]:e.getFilters()}function $0(t){return t instanceof et}function W0(t){return t instanceof gt&&$w(t)}function uR(t){return $0(t)||W0(t)||function(n){if(n instanceof gt&&j0(n)){for(const r of n.getFilters())if(!$0(r)&&!W0(r))return!1;return!0}return!1}(t)}function q0(t){if(ye(t instanceof et||t instanceof gt),t instanceof et)return t;if(t.filters.length===1)return q0(t.filters[0]);const e=t.filters.map(r=>q0(r));let n=gt.create(e,t.op);return n=kp(n),uR(n)?n:(ye(n instanceof gt),ye(iu(n)),ye(n.filters.length>1),n.filters.reduce((r,i)=>ex(r,i)))}function ex(t,e){let n;return ye(t instanceof et||t instanceof gt),ye(e instanceof et||e instanceof gt),n=t instanceof et?e instanceof et?function(i,s){return gt.create([i,s],"and")}(t,e):P1(t,e):e instanceof et?P1(e,t):function(i,s){if(ye(i.filters.length>0&&s.filters.length>0),iu(i)&&iu(s))return _C(i,s.getFilters());const o=j0(i)?i:s,a=j0(i)?s:i,l=o.filters.map(u=>ex(u,a));return gt.create(l,"or")}(t,e),kp(n)}function P1(t,e){if(iu(e))return _C(e,t.getFilters());{const n=e.filters.map(r=>ex(t,r));return gt.create(n,"or")}}function kp(t){if(ye(t instanceof et||t instanceof gt),t instanceof et)return t;const e=t.getFilters();if(e.length===1)return kp(e[0]);if(wC(t))return t;const n=e.map(i=>kp(i)),r=[];return n.forEach(i=>{i instanceof et?r.push(i):i instanceof gt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:gt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(){this.un=new tx}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Cr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class tx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vt(Je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Uint8Array(0);class nU{constructor(e,n){this.databaseId=n,this.cn=new tx,this.ln=new fs(r=>Aa(r),(r,i)=>Hd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Hn(i)};return C1(e).put(s)}return F.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[tC(n),""],!1,!0);return C1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(_i(o.parent))}return r})}addFieldIndex(e,n){const r=oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=nl(e);return s.next(a=>{o.put(T1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=oc(e),i=nl(e),s=tl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=oc(e),r=tl(e),i=nl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return F.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new A1(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=tl(e);let i=!0;const s=new Map;return F.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Be();const a=[];return F.forEach(s,(l,u)=>{Q("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(l)} to execute ${Aa(n)}`);const c=function(E,V){const L=R0(V);if(L===void 0)return null;for(const j of Tp(E,L.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(u,l),h=function(E,V){const L=new Map;for(const j of Go(V))for(const S of Tp(E,j.fieldPath))switch(S.op){case"==":case"in":L.set(j.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return L.set(j.fieldPath.canonicalString(),S.value),Array.from(L.values())}return null}(u,l),p=function(E,V){const L=[];let j=!0;for(const S of Go(V)){const T=S.kind===0?l1(E,S.fieldPath,E.startAt):u1(E,S.fieldPath,E.startAt);L.push(T.value),j&&(j=T.inclusive)}return new fo(L,j)}(u,l),m=function(E,V){const L=[];let j=!0;for(const S of Go(V)){const T=S.kind===0?u1(E,S.fieldPath,E.endAt):l1(E,S.fieldPath,E.endAt);L.push(T.value),j&&(j=T.inclusive)}return new fo(L,j)}(u,l),y=this.In(l,u,p),v=this.In(l,u,m),I=this.Tn(l,u,h),_=this.En(l.indexId,c,y,p.inclusive,v,m.inclusive,I);return F.forEach(_,x=>r.G(x,n.limit).next(E=>{E.forEach(V=>{const L=le.fromSegments(V.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return F.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=eU(gt.create(e.filters,"and")).map(r=>M0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/u]):Wh,m=this.An(e,p,r[h%u],i),y=this.Rn(e,p,s[h%u],o),v=a.map(I=>this.An(e,p,I,!0));c.push(...this.createRange(m,y,v))}return c}An(e,n,r,i){const s=new ta(e,le.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new ta(e,le.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new A1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return F.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new vt(Dt.comparator),c=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?c=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new sc;for(const i of Go(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ea.vt.It(s,o)}return r.zt()}dn(e){const n=new sc;return ea.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new sc;return ea.vt.It(ka(this.databaseId,n),r.Yt(function(s){const o=Go(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new sc);let s=0;for(const o of Go(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Td(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);ea.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new sc;l.seed(a.zt()),ea.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof et&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=oc(e),i=nl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return F.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,h){const p=h?new nu(h.sequenceNumber,new Cr(Na(h.readTime),new le(_i(h.documentKey)),h.largestBatchId)):nu.empty(),m=c.fields.map(([y,v])=>new pa(Dt.fromServerFormat(y),v));return new tu(c.indexId,c.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=oc(e),s=nl(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>F.forEach(a,l=>s.put(T1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return F.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?F.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),F.forEach(a,l=>this.wn(e,i,l).next(u=>{const c=this.Sn(s,l);return u.isEqual(c)?F.resolve():this.bn(e,s,l,u,c)}))))})}Dn(e,n,r,i){return tl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return tl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=tl(e);let s=new vt(Es);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new ta(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new vt(Es);const i=this.Vn(n,e);if(i==null)return r;const s=R0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Td(o))for(const a of o.arrayValue.values||[])r=r.add(new ta(n.indexId,e.key,this.dn(a),i))}else r=r.add(new ta(n.indexId,e.key,Wh,i));return r}bn(e,n,r,i,s){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,h,p){const m=l.getIterator(),y=u.getIterator();let v=el(m),I=el(y);for(;v||I;){let _=!1,x=!1;if(v&&I){const E=c(v,I);E<0?x=!0:E>0&&(_=!0)}else v!=null?x=!0:_=!0;_?(h(I),I=el(y)):x?(p(v),v=el(m)):(v=el(m),I=el(y))}}(i,s,Es,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),F.waitFor(o)}yn(e){let n=1;return nl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Es(o,a)).filter((o,a,l)=>!a||Es(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Es(o,e),l=Es(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Wh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Wh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Es(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(R1)}getMinOffset(e,n){return F.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||fe())).next(R1)}}function C1(t){return _n(t,"collectionParents")}function tl(t){return _n(t,"indexEntries")}function oc(t){return _n(t,"indexConfiguration")}function nl(t){return _n(t,"indexState")}function R1(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Uw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Cr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(c,h,p)=>(a++,p.delete()));s.push(l.next(()=>{ye(a===1)}));const u=[];for(const c of n.mutations){const h=lC(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return F.waitFor(s).next(()=>u)}function Ap(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(41943040,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class Am{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ye(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Am(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ul(e),o=Ts(e);return o.add({}).next(a=>{ye(typeof a=="number");const l=new Kw(a,n,r,i),u=function(m,y,v){const I=v.baseMutations.map(x=>bd(m.ct,x)),_=v.mutations.map(x=>bd(m.ct,x));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:I,mutations:_}}(this.serializer,this.userId,l),c=[];let h=new vt((p,m)=>Ve(p.canonicalString(),m.canonicalString()));for(const p of i){const m=lC(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),c.push(o.put(u)),c.push(s.put(m,$F))}return h.forEach(p=>{c.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),F.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ts(e).get(n).next(r=>r?(ye(r.userId===this.userId),Zo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?F.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ts(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ye(a.batchId>=r),s=Zo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ts(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).U("userMutationsIndex",n).next(r=>r.map(i=>Zo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=bf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ul(e).J({range:i},(o,a,l)=>{const[u,c,h]=o,p=_i(c);if(u===this.userId&&n.path.isEqual(p))return Ts(e).get(h).next(m=>{if(!m)throw fe();ye(m.userId===this.userId),s.push(Zo(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Ve);const i=[];return n.forEach(s=>{const o=bf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ul(e).J({range:a},(u,c,h)=>{const[p,m,y]=u,v=_i(m);p===this.userId&&s.path.isEqual(v)?r=r.add(y):h.done()});i.push(l)}),F.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=bf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new vt(Ve);return ul(e).J({range:o},(l,u,c)=>{const[h,p,m]=l,y=_i(p);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):c.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ts(e).get(s).next(o=>{if(o===null)throw fe();ye(o.userId===this.userId),r.push(Zo(this.serializer,o))}))}),F.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return cR(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),F.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return F.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ul(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=_i(s[1]);i.push(l)}else a.done()}).next(()=>{ye(i.length===0)})})}containsKey(e,n){return dR(e,this.userId,n)}Nn(e){return hR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dR(t,e,n){const r=bf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ul(t).J({range:s,H:!0},(a,l,u)=>{const[c,h,p]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Ts(t){return _n(t,"mutations")}function ul(t){return _n(t,"documentMutations")}function hR(t){return _n(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Da(0)}static kn(){return new Da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Da(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Te.fromTimestamp(new jt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return rl(e).J((o,a)=>{const l=Ec(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>F.waitFor(s)).next(()=>i)}forEachTarget(e,n){return rl(e).J((r,i)=>{const s=Ec(i);n(s)})}qn(e){return D1(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}Qn(e,n){return D1(e).put("targetGlobalKey",n)}Kn(e,n){return rl(e).put(aR(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Aa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return rl(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Ec(a);Hd(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ms(e);return n.forEach(o=>{const a=Hn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),F.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ms(e);return F.forEach(n,s=>{const o=Hn(s.path);return F.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ms(e);let s=Be();return i.J({range:r,H:!0},(o,a,l)=>{const u=_i(o[1]),c=new le(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=Hn(n.path),i=IDBKeyRange.bound([r],[tC(r)],!1,!0);let s=0;return Ms(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return rl(e).get(n).next(r=>r?Ec(r):null)}}function rl(t){return _n(t,"targets")}function D1(t){return _n(t,"targetGlobal")}function Ms(t){return _n(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class iU{constructor(e){this.Un=e,this.buffer=new vt(V1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await So(n)}await this.Hn(3e5)})}}class sU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(cr.oe);const r=new iU(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(N1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ol()<=Xe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function pR(t,e){return new sU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n){this.db=e,this.garbageCollector=pR(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return qh(e,r)}removeReference(e,n,r){return qh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qh(e,n)}nr(e,n){return function(i,s){let o=!1;return hR(i).Y(a=>dR(i,a,s).next(l=>(l&&(o=!0),F.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Te.min()),Ms(e).delete(function(h){return[0,Hn(h.path)]}(o))))});i.push(l)}}).next(()=>F.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qh(e,n)}tr(e,n){const r=Ms(e);let i,s=cr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==cr.oe&&n(new le(_i(i)),s),s=u,i=l):s=cr.oe}).next(()=>{s!==cr.oe&&n(new le(_i(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qh(t,e){return Ms(t).put(function(r,i){return{targetId:0,path:Hn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.changes=new fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fo(e).put(r)}removeEntry(e,n,r){return Fo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Nt.newInvalidDocument(n);return Fo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ac(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Nt.newInvalidDocument(n)};return Fo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ac(n))},(i,s)=>{r={document:this.ir(n,s),size:Ap(s)}}).next(()=>r)}getEntries(e,n){let r=hr();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=hr(),i=new At(le.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Ap(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return F.resolve();let i=new vt(M1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ac(i.first()),ac(i.last())),o=i.getIterator();let a=o.getNext();return Fo(e).J({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&M1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.$(ac(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),bp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fo(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=hr();for(const h of u){const p=this.ir(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Qd(n,p)||i.has(p.key))&&(c=c.insert(p.key,p))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=hr();const o=O1(n,r),a=O1(n,Cr.max());return Fo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.ir(le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new lU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return j1(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}rr(e,n){return j1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=H3(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return Nt.newInvalidDocument(e)}}function gR(t){return new aU(t)}class lU extends mR{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new fs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new vt((s,o)=>Ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=_1(this.cr.serializer,o);i=i.add(s.path.popLast());const u=Ap(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=_1(this.cr.serializer,o.convertToNoDocument(Te.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),F.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function j1(t){return _n(t,"remoteDocumentGlobal")}function Fo(t){return _n(t,"remoteDocumentsV14")}function ac(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O1(t,e){const n=e.documentKey.path.toArray();return[t,bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function M1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ve(n[s],r[s]),i)return i;return i=Ve(n.length,r.length),i||(i=Ve(n[n.length-2],r[r.length-2]),i||Ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mc(r.mutation,i,dr.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr();const o=Oc(),a=function(){return Oc()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ps)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Mc(c.mutation,u,c.mutation.getFieldMask(),jt.now())):o.set(u.key,dr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new uU(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Oc();let i=new At((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||dr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||Be()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=DC();c.forEach(p=>{if(!s.has(p)){const m=UC(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ww(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Ei());let a=-1,l=s;return o.next(u=>F.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?F.resolve():this.remoteDocumentCache.getEntry(e,c).next(p=>{l=l.insert(c,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Be())).next(c=>({batchId:a,changes:NC(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xc();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const u=function(h,p){return new hs(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Nt.newInvalidDocument(c)))});let a=xc();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Mc(c.mutation,u,dr.empty(),jt.now()),Qd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Zw(i.bundledQuery),readTime:cn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.overlays=new At(le.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ei();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Ei(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new At((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Ei(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ei(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Yw(n,r));let s=this.Ir.get(n);s===void 0&&(s=Be(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.Tr=new vt(Tn.Er),this.dr=new vt(Tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Je([])),r=new Tn(n,e),i=new Tn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Je([])),r=new Tn(n,e),i=new Tn(n,e+1);let s=Be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Tn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ve(e.wr,n.wr)}static Ar(e,n){return Ve(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(Tn.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Kw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Tn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tn(n,0),i=new Tn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Ve);return n.forEach(i=>{const s=new Tn(i,0),o=new Tn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new Tn(new le(s),0);let a=new vt(Ve);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Tn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tn(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.Mr=e,this.docs=function(){return new At(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Uw(rC(c),r)<=0||(i.has(c.key)||Qd(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mU(this)}getSize(e){return F.resolve(this.size)}}class mU extends mR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.persistence=e,this.Nr=new fs(n=>Aa(n),Hd),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nx,this.targetCount=0,this.kr=Da.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Da(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cr(0),this.Kr=!1,this.Kr=!0,this.$r=new hU,this.referenceDelegate=e(this),this.Ur=new gU(this),this.indexManager=new tU,this.remoteDocumentCache=function(i){return new pU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new oR(n),this.Gr=new cU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new yU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yU extends sC{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Jr=new nx,this.Yr=null}static Zr(e){return new Pm(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class Pp{constructor(e,n){this.persistence=e,this.ti=new fs(r=>Hn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pR(this,n)}static Zr(e,n){return new Pp(e,n)}zr(){}jr(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return F.forEach(this.ti,(r,i)=>this.nr(e,r,i).next(s=>s?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),F.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Af(e.data.value)),n}nr(e,n,r){return F.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ti.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new xm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XT,{unique:!0}),l.createObjectStore("documentMutations")}(e),L1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=F.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),L1(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XT,{unique:!0});const h=u.store("mutations"),p=c.map(m=>h.put(m));return F.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:t3});u.createIndex("collectionPathOverlayIndex",n3,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",r3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:WF});u.createIndex("documentKeyIndex",qF),u.createIndex("collectionGroupIndex",GF)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:XF}).createIndex("sequenceNumberIndex",JF,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:ZF}).createIndex("documentKeyIndex",e3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Ap(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>F.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>F.forEach(a,l=>{ye(l.userId===s.userId);const u=Zo(this.serializer,l);return cR(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Je(o),u=function(h){return[0,Hn(h)]}(l);s.push(n.get(u).next(c=>c?F.resolve():(h=>n.put({targetId:0,path:Hn(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>F.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:YF});const r=n.store("collectionParents"),i=new tx,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Hn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Je(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const c=_i(a);return s(c.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Ec(i),o=aR(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new le(Je.fromString(h.document.name).popFirst(5)):h.noDocument?le.fromSegments(h.noDocument.path):h.unknownDocument?le.fromSegments(h.unknownDocument.path):fe()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>F.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=gR(this.serializer),s=new rx(Pm.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:Be();Zo(this.serializer,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),F.forEach(a,(l,u)=>{const c=new Sn(u),h=km.lt(this.serializer,c),p=s.getIndexManager(c),m=Am.lt(c,this.serializer,p,s.referenceDelegate);return new yR(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new N0(n,cr.oe),l).next()})})}}function L1(t){t.createObjectStore("targetDocuments",{keyPath:KF}).createIndex("documentTargetsIndex",QF,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HF,{unique:!0}),t.createObjectStore("targetGlobal")}const qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ix{constructor(e,n,r,i,s,o,a,l,u,c,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=c,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!ix.D())throw new K($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oU(this,i),this.Ai=n+"main",this.serializer=new oR(l),this.Ri=new bi(this.Ai,this.hi,new vU(this.serializer)),this.$r=new Q3,this.Ur=new rU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gR(this.serializer),this.Gr=new K3,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,c===!1&&an("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,qg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new cr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(bo(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return lc(e).get("owner").next(n=>F.resolve(this.vi(n)))}Ci(e){return Gh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=_n(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return F.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?F.resolve(!0):lc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,qg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new N0(e,cr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Gh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Am.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return km.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?o3:l===16?s3:l===15?zw:l===14?dC:l===13?cC:l===12?i3:l===11?uC:void fe()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new N0(a,this.Qr?this.Qr.next():cr.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw an(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K($.FAILED_PRECONDITION,iC);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return lc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K($.FAILED_PRECONDITION,qg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(e).put("owner",n)}static D(){return bi.D()}bi(e){const n=lc(e);return n.get("owner").next(r=>this.vi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):F.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(an(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;tP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return an("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){an("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lc(t){return _n(t,"owner")}function Gh(t){return _n(t,"clientMetadata")}function sx(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Be(),i=Be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ox(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tP()?8:oC(xn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ol()<=Xe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ol()<=Xe.DEBUG&&Q("QueryEngine","Query:",al(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ol()<=Xe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):F.resolve())}Yi(e,n){if(c1(n))return F.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ip(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Ip(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return c1(n)||i.isEqual(Te.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(ol()<=Xe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),al(n)),this.rs(e,o,n,nC(i,-1)).next(a=>a))})}ts(e,n){let r=new vt(CC(e));return n.forEach((i,s)=>{Qd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ol()<=Xe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",al(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new At(Ve),this._s=new fs(s=>Aa(s),Hd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wR(t,e,n,r){return new xU(t,e,n,r)}async function xR(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Be();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function _U(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,p=h.keys();let m=F.resolve();return p.forEach(y=>{m=m.next(()=>c.getEntry(l,y)).next(v=>{const I=u.docVersions.get(y);ye(I!==null),v.version.compareTo(I)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _R(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EU(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ht.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(h,m),function(v,I,_){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,c)&&a.push(n.Ur.updateTargetData(s,m))});let l=hr(),u=Be();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(ER(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Te.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function ER(t,e,n){let r=Be(),i=Be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function TU(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lu(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Qi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function uu(t,e,n){const r=oe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bo(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Cp(t,e,n){const r=oe(t);let i=Te.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=oe(l),p=h._s.get(c);return p!==void 0?F.resolve(h.os.get(p)):h.Ur.getTargetData(u,c)}(r,o,Kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Te.min(),n?s:Be())).next(a=>(SR(r,PC(e),a),{documents:a,Ts:s})))}function TR(t,e){const n=oe(t),r=oe(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function IR(t,e){const n=oe(t),r=n.us.get(e)||Te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,nC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(SR(n,e,i),i))}function SR(t,e,n){let r=t.us.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function IU(t,e,n,r){const i=oe(t);let s=Be(),o=hr();for(const u of n){const c=e.Es(u.metadata.name);u.document&&(s=s.add(c));const h=e.ds(u);h.setReadTime(e.As(u.metadata.readTime)),o=o.insert(c,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await lu(i,function(c){return Kn(Cu(Je.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>ER(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Ps,c.Is)).next(()=>c.Ps)))}async function SU(t,e,n=Be()){const r=await lu(t,Kn(Zw(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=cn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Ht.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function F1(t,e){return`firestore_clients_${t}_${e}`}function U1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gg(t,e){return`firestore_targets_${t}_${e}`}class Rp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new K(i.error.code,i.error.message))),o?new Rp(e,n,i.state,s):(an("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new K(r.error.code,r.error.message))),s?new Lc(e,r.state,i):(an("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=qw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=aC(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Np(e,s):(an("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ax{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ax(n.clientId,n.onlineState):(an("SharedClientState",`Failed to parse online state: ${e}`),null)}}class G0{constructor(){this.activeTargetIds=qw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hg{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new At(Ve),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=F1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new G0),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(F1(this.persistenceKey,r));if(i){const s=Np.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Gg(this.persistenceKey,e));if(i){const s=Lc.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gg(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Q("SharedClientState","READ",e,n),n}setItem(e,n){Q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=cr.oe;if(s!=null)try{const a=JSON.parse(s);ye(typeof a=="number"),o=a}catch(a){an("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==cr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Rp(this.currentUser,e,n,r),s=U1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=U1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Gg(this.persistenceKey,e),s=new Lc(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Np.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Rp.Rs(new Sn(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Lc.Rs(i,n)}Ls(e){return ax.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=qw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bR{constructor(){this.so=new G0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new G0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function Kg(){return Hh===null?Hh=function(){return 268435456+Math.round(2147483648*Math.random())}():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class PU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Kg(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Pr("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=kU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Kg();return new Promise((o,a)=>{const l=new HP;l.setWithCredentials(!0),l.listenOnce(KP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sf.NO_ERROR:const c=l.getResponseJson();Q($n,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Sf.TIMEOUT:Q($n,`RPC '${e}' ${s} timed out`),a(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const h=l.getStatus();if(Q($n,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_)>=0?_:$.UNKNOWN}(m.status);a(new K(y,m.message))}else a(new K($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K($.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{Q($n,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Q($n,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Kg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=XP(),a=YP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Q($n,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let p=!1,m=!1;const y=new AU({Io:I=>{m?Q($n,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(Q($n,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),Q($n,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},To:()=>h.close()}),v=(I,_,x)=>{I.listen(_,E=>{try{x(E)}catch(V){setTimeout(()=>{throw V},0)}})};return v(h,wc.EventType.OPEN,()=>{m||(Q($n,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(h,wc.EventType.CLOSE,()=>{m||(m=!0,Q($n,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(h,wc.EventType.ERROR,I=>{m||(m=!0,Pr($n,`RPC '${e}' stream ${i} transport errored:`,I),y.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),v(h,wc.EventType.MESSAGE,I=>{var _;if(!m){const x=I.data[0];ye(!!x);const E=x,V=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(V){Q($n,`RPC '${e}' stream ${i} received error:`,V);const L=V.status;let j=function(k){const C=hn[k];if(C!==void 0)return WC(C)}(L),S=V.message;j===void 0&&(j=$.INTERNAL,S="Unknown error status: "+L+" with message "+V.message),m=!0,y.So(new K(j,S)),h.close()}else Q($n,`RPC '${e}' stream ${i} received:`,x),y.bo(x)}}),v(a,QP.STAT_EVENT,I=>{I.stat===C0.PROXY?Q($n,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===C0.NOPROXY&&Q($n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return typeof window<"u"?window:null}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){return new M3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(an(n.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CU extends AR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U3(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?cn(o.readTime):Te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=B0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ep(l)?{documents:eR(s,l)}:{query:bm(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KC(s,o.resumeToken);const u=F0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=au(s,o.snapshotVersion.toTimestamp());const u=F0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=z3(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=B0(this.serializer),n.removeTarget=e,this.a_(n)}}class RU extends AR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=B3(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=B0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bd(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,U0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,U0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(an(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ao(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.L_.add(4),await Du(u),u.q_.set("Unknown"),u.L_.delete(4),await eh(u)}(this))})}),this.q_=new DU(r,i)}}async function eh(t){if(Ao(t))for(const e of t.B_)await e(!0)}async function Du(t){for(const e of t.B_)await e(!1)}function Cm(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dx(n)?cx(n):ju(n).r_()&&ux(n,e))}function cu(t,e){const n=oe(t),r=ju(n);n.N_.delete(e),r.r_()&&PR(n,e),n.N_.size===0&&(r.r_()?r.o_():Ao(n)&&n.q_.set("Unknown"))}function ux(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ju(t).A_(e)}function PR(t,e){t.Q_.xe(e),ju(t).R_(e)}function cx(t){t.Q_=new D3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ju(t).start(),t.q_.v_()}function dx(t){return Ao(t)&&!ju(t).n_()&&t.N_.size>0}function Ao(t){return oe(t).L_.size===0}function CR(t){t.Q_=void 0}async function jU(t){t.q_.set("Online")}async function OU(t){t.N_.forEach((e,n)=>{ux(t,e)})}async function MU(t,e){CR(t),dx(t)?(t.q_.M_(e),cx(t)):t.q_.set("Unknown")}async function LU(t,e,n){if(t.q_.set("Online"),e instanceof HC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dp(t,r)}else if(e instanceof Rf?t.Q_.Ke(e):e instanceof GC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const r=await _R(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Ht.EMPTY_BYTE_STRING,c.snapshotVersion)),PR(s,l);const h=new Qi(c.target,l,u,c.sequenceNumber);ux(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Dp(t,r)}}async function Dp(t,e,n){if(!bo(e))throw e;t.L_.add(1),await Du(t),t.q_.set("Offline"),n||(n=()=>_R(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await eh(t)})}function RR(t,e){return e().catch(n=>Dp(t,n,e))}async function Vu(t){const e=oe(t),n=po(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FU(e);)try{const i=await TU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,UU(e,i)}catch(i){await Dp(e,i)}NR(e)&&DR(e)}function FU(t){return Ao(t)&&t.O_.length<10}function UU(t,e){t.O_.push(e);const n=po(t);n.r_()&&n.V_&&n.m_(e.mutations)}function NR(t){return Ao(t)&&!po(t).n_()&&t.O_.length>0}function DR(t){po(t).start()}async function BU(t){po(t).p_()}async function zU(t){const e=po(t);for(const n of t.O_)e.m_(n.mutations)}async function $U(t,e,n){const r=t.O_.shift(),i=Qw.from(r,e,n);await RR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Vu(t)}async function WU(t,e){e&&po(t).V_&&await async function(r,i){if(function(o){return $C(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();po(r).s_(),await RR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Vu(r)}}(t,e),NR(t)&&DR(t)}async function z1(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Ao(n);n.L_.add(3),await Du(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await eh(n)}async function H0(t,e){const n=oe(t);e?(n.L_.delete(2),await eh(n)):e||(n.L_.add(2),await Du(n),n.q_.set("Unknown"))}function ju(t){return t.K_||(t.K_=function(n,r,i){const s=oe(n);return s.w_(),new CU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jU.bind(null,t),Ro:OU.bind(null,t),mo:MU.bind(null,t),d_:LU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dx(t)?cx(t):t.q_.set("Unknown")):(await t.K_.stop(),CR(t))})),t.K_}function po(t){return t.U_||(t.U_=function(n,r,i){const s=oe(n);return s.w_(),new RU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BU.bind(null,t),mo:WU.bind(null,t),f_:zU.bind(null,t),g_:$U.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new hx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ou(t,e){if(an("AsyncQueue",`${e}: ${t}`),bo(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=xc(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.W_=new At(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class du{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new du(e,n,Ll.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GU{constructor(){this.queries=W1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=W1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function W1(){return new fs(t=>AC(t),Kd)}async function fx(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new qU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ou(o,`Initialization of query '${al(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&mx(n)}async function px(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HU(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&mx(n)}function KU(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function mx(t){t.Y_.forEach(e=>{e.next()})}var K0,q1;(q1=K0||(K0={})).ea="default",q1.Cache="cache";class gx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new du(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==K0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.serializer=e}Es(e){return ki(this.serializer,e)}ds(e){return e.metadata.exists?ZC(this.serializer,e.document,!1):Nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return cn(e)}}class YU{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Je.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new G1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Be()).add(s);n.set(o,a)}}return n}async complete(){const e=await IU(this.localStore,new G1(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await SU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function VR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.key=e}}class OR{constructor(e){this.key=e}}class MR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=CC(e),this.Ra=new Ll(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const p=i.get(c),m=Qd(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),I=!0):this.ga(p,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),I=!0):p&&!m&&(r.track({type:1,doc:p}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,h)=>function(m,y){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return v(m)-v(y)}(c.type,h.type)||this.Aa(c.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new du(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new OR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jR(r))}),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return du.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JU{constructor(e){this.key=e,this.va=!1}}class ZU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fs(a=>AC(a),Kd),this.Ma=new Map,this.xa=new Set,this.Oa=new At(le.comparator),this.Na=new Map,this.La=new nx,this.Ba={},this.ka=new Map,this.qa=Da.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eB(t,e,n=!0){const r=Rm(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await LR(r,e,n,!0),i}async function tB(t,e){const n=Rm(t);await LR(n,e,!0,!1)}async function LR(t,e,n,r){const i=await lu(t.localStore,Kn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await yx(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cm(t.remoteStore,i),a}async function yx(t,e,n,r,i){t.Ka=(h,p,m)=>async function(v,I,_,x){let E=I.view.ma(_);E.ns&&(E=await Cp(v.localStore,I.query,!1).then(({documents:S})=>I.view.ma(S,E)));const V=x&&x.targetChanges.get(I.targetId),L=x&&x.targetMismatches.get(I.targetId)!=null,j=I.view.applyChanges(E,v.isPrimaryClient,V,L);return Q0(v,I.targetId,j.wa),j.snapshot}(t,h,p,m);const s=await Cp(t.localStore,e,!0),o=new MR(e,s.Ts),a=o.ma(s.documents),l=Jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Q0(t,n,u.wa);const c=new XU(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function nB(t,e,n){const r=oe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Kd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cu(r.remoteStore,i.targetId),hu(r,i.targetId)}).catch(So)):(hu(r,i.targetId),await uu(r.localStore,i.targetId,!0))}async function rB(t,e){const n=oe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cu(n.remoteStore,r.targetId))}async function iB(t,e,n){const r=_x(t);try{const i=await function(o,a){const l=oe(o),u=jt.now(),c=a.reduce((m,y)=>m.add(y.key),Be());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=hr(),v=Be();return l.cs.getEntries(m,c).next(I=>{y=I,y.forEach((_,x)=>{x.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(I=>{h=I;const _=[];for(const x of a){const E=C3(x,h.get(x.key).overlayedDocument);E!=null&&_.push(new ps(x.key,E,yC(E.value.mapValue),Lt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(I=>{p=I;const _=I.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,_)})}).then(()=>({batchId:p.batchId,changes:NC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new At(Ve)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await ms(r,i.changes),await Vu(r.remoteStore)}catch(i){const s=Ou(i,"Failed to persist write");n.reject(s)}}async function FR(t,e){const n=oe(t);try{const r=await EU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ye(o.va):i.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await ms(n,r,e)}catch(r){await So(r)}}function H1(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const p of h.j_)p.Z_(a)&&(u=!0)}),u&&mx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sB(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new At(le.comparator);o=o.insert(s,Nt.newNoDocument(s,Te.min()));const a=Be().add(s),l=new Xd(Te.min(),new Map,new At(Ve),o,a);await FR(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),xx(r)}else await uu(r.localStore,e,!1).then(()=>hu(r,e,n)).catch(So)}async function oB(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await _U(n.localStore,e);wx(n,r,null),vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ms(n,i)}catch(i){await So(i)}}async function aB(t,e,n){const r=oe(t);try{const i=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ye(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);wx(r,e,n),vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ms(r,i)}catch(i){await So(i)}}async function lB(t,e){const n=oe(t);Ao(n.remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=oe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Ou(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function vx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wx(t,e,n){const r=oe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function hu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||UR(t,r)})}function UR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cu(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xx(t))}function Q0(t,e,n){for(const r of n)r instanceof jR?(t.La.addReference(r.key,e),uB(t,r)):r instanceof OR?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||UR(t,r.key)):fe()}function uB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),xx(t))}function xx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new JU(n)),t.Oa=t.Oa.insert(n,r),Cm(t.remoteStore,new Qi(Kn(Cu(n.path)),r,"TargetPurposeLimboResolution",cr.oe))}}async function ms(t,e,n){const r=oe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=ox.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=oe(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(u,p=>F.forEach(p.$i,m=>c.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>F.forEach(p.Ui,m=>c.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!bo(h))throw h;Q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const m=c.os.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);c.os=c.os.insert(p,v)}}}(r.localStore,s))}async function cB(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await xR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ms(n,r.hs)}}function dB(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function hB(t,e){const n=oe(t),r=await Cp(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Q0(n,e.targetId,i.wa),i}async function fB(t,e){const n=oe(t);return IR(n.localStore,e).then(r=>ms(n,r))}async function pB(t,e,n,r){const i=oe(t),s=await function(a,l){const u=oe(a),c=oe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.Mn(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):F.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Vu(i.remoteStore):n==="acknowledged"||n==="rejected"?(wx(i,e,r||null),vx(i,e),function(a,l){oe(oe(a).mutationQueue).On(l)}(i.localStore,e)):fe(),await ms(i,s)):Q("SyncEngine","Cannot apply mutation batch with id: "+e)}async function mB(t,e){const n=oe(t);if(Rm(n),_x(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await K1(n,r.toArray());n.Qa=!0,await H0(n.remoteStore,!0);for(const s of i)Cm(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(hu(n,o),uu(n.localStore,o,!0))),cu(n.remoteStore,o)}),await i,await K1(n,r),function(o){const a=oe(o);a.Na.forEach((l,u)=>{cu(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new At(le.comparator)}(n),n.Qa=!1,await H0(n.remoteStore,!1)}}async function K1(t,e,n){const r=oe(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await lu(r.localStore,Kn(l[0]));for(const u of l){const c=r.Fa.get(u),h=await hB(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await TR(r.localStore,o);a=await lu(r.localStore,u),await yx(r,BR(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function BR(t){return SC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gB(t){return function(n){return oe(oe(n).persistence).Qi()}(oe(t).localStore)}async function yB(t,e,n,r){const i=oe(t);if(i.Qa)return void Q("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await IR(i.localStore,PC(s[0])),a=Xd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ht.EMPTY_BYTE_STRING);await ms(i,o,a);break}case"rejected":await uu(i.localStore,e,!0),hu(i,e,r);break;default:fe()}}async function vB(t,e,n){const r=Rm(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Q("SyncEngine","Adding an already active target "+i);continue}const s=await TR(r.localStore,i),o=await lu(r.localStore,s);await yx(r,BR(s),o.targetId,!1,o.resumeToken),Cm(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await uu(r.localStore,i,!1).then(()=>{cu(r.remoteStore,i),hu(r,i)}).catch(So)}}function Rm(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sB.bind(null,e),e.Ca.d_=HU.bind(null,e.eventManager),e.Ca.$a=KU.bind(null,e.eventManager),e}function _x(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aB.bind(null,e),e}function wB(t,e,n){const r=oe(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,y){const v=oe(m),I=cn(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",_=>v.Gr.getBundleMetadata(_,y.id)).then(_=>!!_&&_.createTime.compareTo(I)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(VR(l));const u=new YU(l,s.localStore,o.serializer);let c=await o.Ua();for(;c;){const p=await u.la(c);p&&a._updateProgress(p),c=await o.Ua()}const h=await u.complete();return await ms(s,h.Ia,void 0),await function(m,y){const v=oe(m);return v.persistence.runTransaction("Save bundle","readwrite",I=>v.Gr.saveBundleMetadata(I,y))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Pr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class mo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wR(this.persistence,new vR,e.initialUser,this.serializer)}Ga(e){return new rx(Pm.Zr,this.serializer)}Wa(e){return new bR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mo.provider={build:()=>new mo};class xB extends mo{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){ye(this.persistence.referenceDelegate instanceof Pp);const r=this.persistence.referenceDelegate.garbageCollector;return new fR(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new rx(r=>Pp.Zr(r,n),this.serializer)}}class Ex extends mo{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await _x(this.Ja.syncEngine),await Vu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return wR(this.persistence,new vR,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new fR(r,e.asyncQueue,n)}Ha(e,n){const r=new BF(n,this.persistence);return new UF(e.asyncQueue,r)}Ga(e){const n=sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new ix(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kR(),Nf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bR}}class zR extends Ex{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Hg&&(this.sharedClientState.syncEngine={no:pB.bind(null,n),ro:yB.bind(null,n),io:vB.bind(null,n),Qi:gB.bind(null,n),eo:fB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await mB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=kR();if(!Hg.D(n))throw new K($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class go{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>H1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cB.bind(null,this.syncEngine),await H0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GU}()}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),r=function(s){return new PU(s)}(e.databaseInfo);return function(s,o,a,l){return new NU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new VU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>H1(this.syncEngine,n,0),function(){return B1.D()?new B1:new bU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new ZU(i,s,o,a,l,u);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Du(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}go.provider={build:()=>new go};function Q1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):an("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new kn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new QU(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=oe(i),a={documents:s.map(h=>Sd(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Je.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const p=F3(o.serializer,h);u.set(p.key.toString(),p)});const c=[];return s.forEach(h=>{const p=u.get(h.toString());ye(!!p),c.push(p)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=le.fromPath(r);this.mutations.push(new Hw(i,this.precondition(i)))}),await async function(r,i){const s=oe(r),o={writes:i.map(a=>bd(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Je.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw fe();n=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Te.min())?Lt.exists(!1):Lt.updateTime(n):Lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Te.min()))throw new K($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(n)}return Lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new lx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new EB(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Gd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!$C(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Sn.UNAUTHENTICATED,this.clientId=Fw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ou(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qg(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Y1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Tx(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>z1(e.remoteStore,i)),t._onlineComponents=e}async function Tx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Pr("Error using user provided cache. Falling back to memory cache: "+n),await Qg(t,new mo)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Qg(t,new mo);return t._offlineComponents}async function Dm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Y1(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Y1(t,new go))),t._onlineComponents}function $R(t){return Tx(t).then(e=>e.persistence)}function Mu(t){return Tx(t).then(e=>e.localStore)}function WR(t){return Dm(t).then(e=>e.remoteStore)}function Ix(t){return Dm(t).then(e=>e.syncEngine)}function qR(t){return Dm(t).then(e=>e.datastore)}async function fu(t){const e=await Dm(t),n=e.eventManager;return n.onListen=eB.bind(null,e.syncEngine),n.onUnlisten=nB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rB.bind(null,e.syncEngine),n}function SB(t){return t.asyncQueue.enqueue(async()=>{const e=await $R(t),n=await WR(t);return e.setNetworkEnabled(!0),function(i){const s=oe(i);return s.L_.delete(0),eh(s)}(n)})}function bB(t){return t.asyncQueue.enqueue(async()=>{const e=await $R(t),n=await WR(t);return e.setNetworkEnabled(!1),async function(i){const s=oe(i);s.L_.add(0),await Du(s),s.q_.set("Offline")}(n)})}function kB(t,e){const n=new kn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const h=oe(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ou(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Mu(t),e,n)),n.promise}function GR(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Nm({next:p=>{c.Za(),o.enqueueAndForget(()=>px(s,h));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new gx(Cu(a.path),c,{includeMetadataChanges:!0,_a:!0});return fx(s,h)}(await fu(t),t.asyncQueue,e,n,r)),r.promise}function AB(t,e){const n=new kn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Cp(i,s,!0),l=new MR(s,a.Ts),u=l.ma(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=Ou(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Mu(t),e,n)),n.promise}function HR(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Nm({next:p=>{c.Za(),o.enqueueAndForget(()=>px(s,h)),p.fromCache&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new gx(a,c,{includeMetadataChanges:!0,_a:!0});return fx(s,h)}(await fu(t),t.asyncQueue,e,n,r)),r.promise}function PB(t,e,n){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await qR(t);r.resolve(async function(o,a,l){var u;const c=oe(o),{request:h,ut:p,parent:m}=tR(c.serializer,bC(a),l);c.connection.Fo||delete h.parent;const y=(await c.Lo("RunAggregationQuery",c.serializer.databaseId,m,h,1)).filter(I=>!!I.result);ye(y.length===1);const v=(u=y[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(v).reduce((I,_)=>(I[p[_]]=v[_],I),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function CB(t,e){const n=new Nm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){oe(i).Y_.add(s),s.next()}(await fu(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){oe(i).Y_.delete(s)}(await fu(t),n))}}function RB(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?qC().encode(o):o,function(c,h){return new _B(c,h)}(function(c,h){if(c instanceof Uint8Array)return Q1(c,h);if(c instanceof ArrayBuffer)return Q1(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Zd(e));t.asyncQueue.enqueueAndForget(async()=>{wB(await Ix(t),i,r)})}function NB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=oe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Mu(t),e))}function DB(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=oe(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(h,p,m,y,v){h=[...h],p=[...p],h.sort(m),p.sort(m);const I=h.length,_=p.length;let x=0,E=0;for(;x<_&&E<I;){const V=m(h[E],p[x]);V<0?v(h[E++]):V>0?y(p[x++]):(x++,E++)}for(;x<_;)y(p[x++]);for(;E<I;)v(h[E++])}(u,i,OF,c=>{a.push(o.addFieldIndex(l,c))},c=>{a.push(o.deleteFieldIndex(l,c))})).next(()=>F.waitFor(a)))}(await Mu(t),e))}function VB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){oe(r).ss.zi=i}(await Mu(t),e))}function jB(t){return t.asyncQueue.enqueue(async()=>function(n){const r=oe(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await Mu(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QR(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function J1(t){if(!le.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z1(t){if(le.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function He(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vm(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YR(t,e){if(e<=0)throw new K($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZP;switch(r.type){case"firstParty":return new RF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=X1.get(n);r&&(Q("ComponentProvider","Removing Datastore"),X1.delete(n),r.terminate())}(this),Promise.resolve()}}function XR(t,e,n,r={}){var i;const s=(t=He(t,th))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Sn.MOCK_USER;else{a=oL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Sn(u)}t._authCredentials=new AF(new JP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new An(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class ii extends An{constructor(e,n,r){super(e,n,Cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new le(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function ne(t,e,...n){if(t=kt(t),Sx("collection","path",e),t instanceof th){const r=Je.fromString(e,...n);return Z1(r),new ii(t,null,r)}{if(!(t instanceof Xt||t instanceof ii))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return Z1(r),new ii(t.firestore,null,r)}}function OB(t,e){if(t=He(t,th),Sx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new An(t,null,function(r){return new hs(Je.emptyPath(),r)}(e))}function Y(t,e,...n){if(t=kt(t),arguments.length===1&&(e=Fw.newId()),Sx("doc","path",e),t instanceof th){const r=Je.fromString(e,...n);return J1(r),new Xt(t,null,new le(r))}{if(!(t instanceof Xt||t instanceof ii))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return J1(r),new Xt(t.firestore,t instanceof ii?t.converter:null,new le(r))}}function MB(t,e){return t=kt(t),e=kt(e),(t instanceof Xt||t instanceof ii)&&(e instanceof Xt||e instanceof ii)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bx(t,e){return t=kt(t),e=kt(e),t instanceof An&&e instanceof An&&t.firestore===e.firestore&&Kd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new lx(this,"async_queue_retry"),this.Vu=()=>{const r=Nf();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw an("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=hx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Y0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class JR{constructor(){this._progressObserver={},this._taskCompletionResolver=new kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=-1;class wt extends th{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new tI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tI(e),this._firestoreClient=void 0,await e}}}function FB(t,e,n){n||(n="(default)");const r=zd(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ao(s,e))return i;throw new K($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function ZR(t,e){const n=typeof t=="object"?t:oP(),r=typeof t=="string"?t:e||"(default)",i=zd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=iL("firestore");s&&XR(i,...s)}return i}function Ft(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eN(t),t._firestoreClient}function eN(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new u3(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,KR(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new IB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function UB(t,e){Pr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return tN(t,go.provider,{build:r=>new Ex(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function BB(t){Pr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();tN(t,go.provider,{build:n=>new zR(n,e.cacheSizeBytes)})}function tN(t,e,n){if((t=He(t,wt))._firestoreClient||t._terminated)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},eN(t)}function zB(t){if(t._initialized&&!t._terminated)throw new K($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!bi.D())return Promise.resolve();const i=r+"main";await bi.delete(i)}(sx(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function $B(t){return function(n){const r=new kn;return n.asyncQueue.enqueueAndForget(async()=>lB(await Ix(n),r)),r.promise}(Ft(t=He(t,wt)))}function WB(t){return SB(Ft(t=He(t,wt)))}function qB(t){return bB(Ft(t=He(t,wt)))}function GB(t){return y4(t.app,"firestore",t._databaseId.database),t._delete()}function HB(t,e){const n=Ft(t=He(t,wt)),r=new JR;return RB(n,t._databaseId,e,r),r}function KB(t,e){return NB(Ft(t=He(t,wt)),e).then(n=>n?new An(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class nN{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(Ht.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yo(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function QB(){return new Po("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=/^__.*__$/;class XB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}class rN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Om{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Om(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(iN(this.Cu)&&YB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zd(e)}Qu(e,n,r,i=!1){return new Om({Cu:e,methodName:n,qu:r,path:Dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function za(t){const e=t._freezeSettings(),n=Zd(t._databaseId);return new JB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mm(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Dx("Data must be an object, but it was:",o,r);const a=aN(r,o);let l,u;if(s.merge)l=new dr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const p=kd(e,h,n);if(!o.contains(p))throw new K($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);uN(c,p)||c.push(p)}l=new dr(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new XB(new Dn(a),l,u)}class rh extends Co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}function sN(t,e,n){return new Om({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kx extends Co{_toFieldTransform(e){return new Yd(e.path,new su)}isEqual(e){return e instanceof kx}}class Ax extends Co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=sN(this,e,!0),r=this.Ku.map(s=>$a(s,n)),i=new Pa(r);return new Yd(e.path,i)}isEqual(e){return e instanceof Ax&&ao(this.Ku,e.Ku)}}class Px extends Co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=sN(this,e,!0),r=this.Ku.map(s=>$a(s,n)),i=new Ca(r);return new Yd(e.path,i)}isEqual(e){return e instanceof Px&&ao(this.Ku,e.Ku)}}class Cx extends Co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ou(e.serializer,jC(e.serializer,this.$u));return new Yd(e.path,n)}isEqual(e){return e instanceof Cx&&this.$u===e.$u}}function Rx(t,e,n,r){const i=t.Qu(1,e,n);Dx("Data must be an object, but it was:",i,r);const s=[],o=Dn.empty();ko(r,(l,u)=>{const c=Lm(e,l,n);u=kt(u);const h=i.Nu(c);if(u instanceof rh)s.push(c);else{const p=$a(u,h);p!=null&&(s.push(c),o.set(c,p))}});const a=new dr(s);return new rN(o,a,i.fieldTransforms)}function Nx(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[kd(e,r,n)],l=[i];if(s.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(kd(e,s[p])),l.push(s[p+1]);const u=[],c=Dn.empty();for(let p=a.length-1;p>=0;--p)if(!uN(u,a[p])){const m=a[p];let y=l[p];y=kt(y);const v=o.Nu(m);if(y instanceof rh)u.push(m);else{const I=$a(y,v);I!=null&&(u.push(m),c.set(m,I))}}const h=new dr(u);return new rN(c,h,o.fieldTransforms)}function oN(t,e,n,r=!1){return $a(n,t.Qu(r?4:3,e))}function $a(t,e){if(lN(t=kt(t)))return Dx("Unsupported field value:",e,t),aN(t,e);if(t instanceof Co)return function(r,i){if(!iN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=$a(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:au(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,s)}}if(r instanceof jm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:KC(i.serializer,r._byteString)};if(r instanceof Xt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nh)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Gw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vm(r)}`)}(t,e)}function aN(t,e){const n={};return fC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,i)=>{const s=$a(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof jm||t instanceof yo||t instanceof Xt||t instanceof Co||t instanceof nh)}function Dx(t,e,n){if(!lN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kd(t,e,n){if((e=kt(e))instanceof Po)return e._internalPath;if(typeof e=="string")return Lm(t,e);throw Vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZB=new RegExp("[~\\*/\\[\\]]");function Lm(t,e,n){if(e.search(ZB)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Po(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K($.INVALID_ARGUMENT,a+t+l)}function uN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ez(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ez extends Ad{data(){return super.data()}}function Fm(t,e){return typeof e=="string"?Lm(t,e):e instanceof Po?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vx{}class Lu extends Vx{}function we(t,e,...n){let r=[];e instanceof Vx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Wa).length,a=s.filter(l=>l instanceof Fu).length;if(o>1||o>0&&a>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Fu extends Lu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fu(e,n,r)}_apply(e){const n=this._parse(e);return fN(e._query,n),new An(e.firestore,e.converter,L0(e._query,n))}_parse(e){const n=za(e.firestore);return function(s,o,a,l,u,c,h){let p;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){rI(h,c);const m=[];for(const y of h)m.push(nI(l,s,y));p={arrayValue:{values:m}}}else p=nI(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||rI(h,c),p=oN(a,o,h,c==="in"||c==="not-in");return et.create(u,c,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function se(t,e,n){const r=e,i=Fm("where",t);return Fu._create(i,r,n)}class Wa extends Vx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wa(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)fN(o,l),o=L0(o,l)}(e._query,n),new An(e.firestore,e.converter,L0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tz(...t){return t.forEach(e=>pN("or",e)),Wa._create("or",t)}function nz(...t){return t.forEach(e=>pN("and",e)),Wa._create("and",t)}class Um extends Lu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Um(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Id(s,o)}(e._query,this._field,this._direction);return new An(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new hs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Jt(t,e="asc"){const n=e,r=Fm("orderBy",t);return Um._create(r,n)}class ih extends Lu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ih(e,n,r)}_apply(e){return new An(e.firestore,e.converter,Ip(e._query,this._limit,this._limitType))}}function Wt(t){return YR("limit",t),ih._create("limit",t,"F")}function rz(t){return YR("limitToLast",t),ih._create("limitToLast",t,"L")}class sh extends Lu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new sh(e,n,r)}_apply(e){const n=hN(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,function(i,s){return new hs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function iz(...t){return sh._create("startAt",t,!0)}function dN(...t){return sh._create("startAfter",t,!1)}class oh extends Lu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new oh(e,n,r)}_apply(e){const n=hN(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,function(i,s){return new hs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function sz(...t){return oh._create("endBefore",t,!1)}function oz(...t){return oh._create("endAt",t,!0)}function hN(t,e,n,r){if(n[0]=kt(n[0]),n[0]instanceof Ad)return function(s,o,a,l,u){if(!l)throw new K($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of Ml(s))if(h.field.isKeyField())c.push(ka(o,l.key));else{const p=l.data.field(h.field);if(_m(p))throw new K($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=h.field.canonicalString();throw new K($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}c.push(p)}return new fo(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=za(t.firestore);return function(o,a,l,u,c,h){const p=o.explicitOrderBy;if(c.length>p.length)throw new K($.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<c.length;y++){const v=c[y];if(p[y].field.isKeyField()){if(typeof v!="string")throw new K($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!Ww(o)&&v.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const I=o.path.child(Je.fromString(v));if(!le.isDocumentKey(I))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const _=new le(I);m.push(ka(a,_))}else{const I=oN(l,u,v);m.push(I)}}return new fo(m,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function nI(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!le.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ka(t,new le(r))}if(n instanceof Xt)return ka(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vm(n)}.`)}function rI(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function pN(t,e){if(!(e instanceof Fu||e instanceof Wa))throw new K($.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class jx{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ot(o.doubleValue));return new nh(s)}convertGeoPoint(e){return new jm(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Em(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const n=as(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);ye(sR(r));const i=new uo(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||an(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class az extends jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t){return new pu("sum",kd("sum",t))}function uz(t){return new pu("avg",kd("average",t))}function mN(){return new pu("count")}function cz(t,e){var n,r;return t instanceof pu&&e instanceof pu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function dz(t,e){return bx(t.query,e.query)&&ao(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Va extends Ad{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fc extends Va{data(e={}){return super.data(e)}}class ja{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $s(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new $s(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:hz(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}function fz(t,e){return t instanceof Va&&e instanceof Va?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ja&&e instanceof ja&&t._firestore===e._firestore&&bx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){t=He(t,Xt);const e=He(t.firestore,wt);return GR(Ft(e),t._key).then(n=>Ox(e,t,n))}class Ro extends jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function pz(t){t=He(t,Xt);const e=He(t.firestore,wt),n=Ft(e),r=new Ro(e);return kB(n,t._key).then(i=>new Va(e,r,t._key,i,new $s(i!==null&&i.hasLocalMutations,!0),t.converter))}function mz(t){t=He(t,Xt);const e=He(t.firestore,wt);return GR(Ft(e),t._key,{source:"server"}).then(n=>Ox(e,t,n))}function _e(t){t=He(t,An);const e=He(t.firestore,wt),n=Ft(e),r=new Ro(e);return cN(t._query),HR(n,t._query).then(i=>new ja(e,r,t,i))}function gz(t){t=He(t,An);const e=He(t.firestore,wt),n=Ft(e),r=new Ro(e);return AB(n,t._query).then(i=>new ja(e,r,t,i))}function yz(t){t=He(t,An);const e=He(t.firestore,wt),n=Ft(e),r=new Ro(e);return HR(n,t._query,{source:"server"}).then(i=>new ja(e,r,t,i))}function mu(t,e,n){t=He(t,Xt);const r=He(t.firestore,wt),i=Bm(t.converter,e,n);return Uu(r,[Mm(za(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function Me(t,e,n,...r){t=He(t,Xt);const i=He(t.firestore,wt),s=za(i);let o;return o=typeof(e=kt(e))=="string"||e instanceof Po?Nx(s,"updateDoc",t._key,e,n,r):Rx(s,"updateDoc",t._key,e),Uu(i,[o.toMutation(t._key,Lt.exists(!0))])}function wn(t){return Uu(He(t.firestore,wt),[new Nu(t._key,Lt.none())])}function Zt(t,e){const n=He(t.firestore,wt),r=Y(t),i=Bm(t.converter,e);return Uu(n,[Mm(za(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function vz(t,...e){var n,r,i;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Y0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Y0(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof Xt)u=He(t.firestore,wt),c=Cu(t._key.path),l={next:h=>{e[o]&&e[o](Ox(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=He(t,An);u=He(h.firestore,wt),c=h._query;const p=new Ro(u);l={next:m=>{e[o]&&e[o](new ja(u,p,h,m))},error:e[o+1],complete:e[o+2]},cN(t._query)}return function(p,m,y,v){const I=new Nm(v),_=new gx(m,I,y);return p.asyncQueue.enqueueAndForget(async()=>fx(await fu(p),_)),()=>{I.Za(),p.asyncQueue.enqueueAndForget(async()=>px(await fu(p),_))}}(Ft(u),c,a,l)}function wz(t,e){return CB(Ft(t=He(t,wt)),Y0(e)?e:{next:e})}function Uu(t,e){return function(r,i){const s=new kn;return r.asyncQueue.enqueueAndForget(async()=>iB(await Ix(r),i,s)),s.promise}(Ft(t),e)}function Ox(t,e,n){const r=n.docs.get(e._key),i=new Ro(t);return new Va(t,i,e._key,r,new $s(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(t){return gN(t,{count:mN()})}function gN(t,e){const n=He(t.firestore,wt),r=Ft(n),i=hC(e,(s,o)=>new zC(o,s.aggregateType,s._internalFieldPath));return PB(r,t._query,i).then(s=>function(a,l,u){const c=new Ro(a);return new nN(l,c,u)}(n,t,s))}class _z{constructor(e){this.kind="memory",this._onlineComponentProvider=go.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=mo.provider}toJSON(){return{kind:this.kind}}}class Ez{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=yN(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Tz{constructor(){this.kind="memoryEager",this._offlineComponentProvider=mo.provider}toJSON(){return{kind:this.kind}}}class Iz{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new xB(e)}}toJSON(){return{kind:this.kind}}}function Sz(){return new Tz}function bz(t){return new Iz(t==null?void 0:t.cacheSizeBytes)}function kz(t){return new _z(t)}function Az(t){return new Ez(t)}class Pz{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=go.provider,this._offlineComponentProvider={build:n=>new Ex(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Cz{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=go.provider,this._offlineComponentProvider={build:n=>new zR(n,e==null?void 0:e.cacheSizeBytes)}}}function yN(t){return new Pz(t==null?void 0:t.forceOwnership)}function Rz(){return new Cz}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=za(e)}set(e,n,r){this._verifyNotCommitted();const i=Ls(e,this._firestore),s=Bm(i.converter,n,r),o=Mm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ls(e,this._firestore);let o;return o=typeof(n=kt(n))=="string"||n instanceof Po?Nx(this._dataReader,"WriteBatch.update",s._key,n,r,i):Rx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ls(e,this._firestore);return this._mutations=this._mutations.concat(new Nu(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ls(t,e){if((t=kt(t)).firestore!==e)throw new K($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=za(n)}get(n){const r=Ls(n,this._firestore),i=new az(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return fe();const o=s[0];if(o.isFoundDocument())return new Ad(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ad(this._firestore,i,r._key,null,r.converter);throw fe()})}set(n,r,i){const s=Ls(n,this._firestore),o=Bm(s.converter,r,i),a=Mm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ls(n,this._firestore);let a;return a=typeof(r=kt(r))=="string"||r instanceof Po?Nx(this._dataReader,"Transaction.update",o._key,r,i,s):Rx(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ls(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ls(e,this._firestore),r=new Ro(this._firestore);return super.get(e).then(i=>new Va(this._firestore,r,n._key,i._document,new $s(!1,!1),n.converter))}}function Dz(t,e,n){t=He(t,wt);const r=Object.assign(Object.assign({},Nz),n);return function(s){if(s.maxAttempts<1)throw new K($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new kn;return s.asyncQueue.enqueueAndForget(async()=>{const u=await qR(s);new TB(s.asyncQueue,u,a,o,l).au()}),l.promise}(Ft(t),i=>e(new wN(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(){return new rh("deleteField")}function de(){return new kx("serverTimestamp")}function Fl(...t){return new Ax("arrayUnion",t)}function Tl(...t){return new Px("arrayRemove",t)}function vi(t){return new Cx("increment",t)}function jz(t){return new nh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){return Ft(t=He(t,wt)),new vN(t,e=>Uu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t,e){const n=Ft(t=He(t,wt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Pr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(c){throw new K($.INVALID_ARGUMENT,"Failed to parse JSON: "+(c==null?void 0:c.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=iI(l,"collectionGroup"),c=[];if(Array.isArray(l.fields))for(const h of l.fields){const p=Lm("setIndexConfiguration",iI(h,"fieldPath"));h.arrayConfig==="CONTAINS"?c.push(new pa(p,2)):h.order==="ASCENDING"?c.push(new pa(p,0)):h.order==="DESCENDING"&&c.push(new pa(p,1))}a.push(new tu(tu.UNKNOWN_ID,u,c,nu.empty()))}return a}(e);return DB(n,r)}function iI(t,e){if(typeof t[e]!="string")throw new K($.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Mz(t){var e;t=He(t,wt);const n=sI.get(t);if(n)return n;if(((e=Ft(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new xN(t);return sI.set(t,r),r}function Lz(t){_N(t,!0)}function Fz(t){_N(t,!1)}function Uz(t){jB(Ft(t._firestore)).then(e=>Q("deleting all persistent cache indexes succeeded")).catch(e=>Pr("deleting all persistent cache indexes failed",e))}function _N(t,e){VB(Ft(t._firestore),e).then(n=>Q(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Pr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const sI=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t){var e;const n=(e=Ft(He(t.firestore,wt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:bm(n,Kn(t._query))._t}function zz(t,e){var n;const r=hC(e,(s,o)=>new zC(o,s.aggregateType,s._internalFieldPath)),i=(n=Ft(He(t.firestore,wt))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return i===void 0?null:tR(i,bC(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Mx.instance.onExistenceFilterMismatch(e)}}class Mx{constructor(){this.Uu=new Map}static get instance(){return Kh||(Kh=new Mx,function(n){if(Sp)throw new Error("a TestingHooksSpi instance is already set");Sp=n}(Kh)),Kh}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let Kh=null;(function(e,n=!0){(function(i){Pu=i})(bu),Jl(new Sa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wt(new PF(r.getProvider("auth-internal")),new NF(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),to(KT,"4.7.3",e),to(KT,"4.7.3","esm2017")})();const oI=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:jx,AggregateField:pu,AggregateQuerySnapshot:nN,Bytes:yo,CACHE_SIZE_UNLIMITED:LB,CollectionReference:ii,DocumentReference:Xt,DocumentSnapshot:Va,FieldPath:Po,FieldValue:Co,Firestore:wt,FirestoreError:K,GeoPoint:jm,LoadBundleTask:JR,PersistentCacheIndexManager:xN,Query:An,QueryCompositeFilterConstraint:Wa,QueryConstraint:Lu,QueryDocumentSnapshot:Fc,QueryEndAtConstraint:oh,QueryFieldFilterConstraint:Fu,QueryLimitConstraint:ih,QueryOrderByConstraint:Um,QuerySnapshot:ja,QueryStartAtConstraint:sh,SnapshotMetadata:$s,Timestamp:jt,Transaction:wN,VectorValue:nh,WriteBatch:vN,_AutoId:Fw,_ByteString:Ht,_DatabaseId:uo,_DocumentKey:le,_EmptyAppCheckTokenProvider:DF,_EmptyAuthCredentialsProvider:ZP,_FieldPath:Dt,_TestingHooks:$z,_cast:He,_debugAssert:kF,_internalAggregationQueryToProtoRunAggregationQueryRequest:zz,_internalQueryToProtoQueryTarget:Bz,_isBase64Available:a3,_logWarn:Pr,_validateIsNotUsedTogether:QR,addDoc:Zt,aggregateFieldEqual:cz,aggregateQuerySnapshotEqual:dz,and:nz,arrayRemove:Tl,arrayUnion:Fl,average:uz,clearIndexedDbPersistence:zB,collection:ne,collectionGroup:OB,connectFirestoreEmulator:XR,count:mN,deleteAllPersistentCacheIndexes:Uz,deleteDoc:wn,deleteField:Vz,disableNetwork:qB,disablePersistentCacheIndexAutoCreation:Fz,doc:Y,documentId:QB,enableIndexedDbPersistence:UB,enableMultiTabIndexedDbPersistence:BB,enableNetwork:WB,enablePersistentCacheIndexAutoCreation:Lz,endAt:oz,endBefore:sz,ensureFirestoreConfigured:Ft,executeWrite:Uu,getAggregateFromServer:gN,getCountFromServer:xz,getDoc:Ze,getDocFromCache:pz,getDocFromServer:mz,getDocs:_e,getDocsFromCache:gz,getDocsFromServer:yz,getFirestore:ZR,getPersistentCacheIndexManager:Mz,increment:vi,initializeFirestore:FB,limit:Wt,limitToLast:rz,loadBundle:HB,memoryEagerGarbageCollector:Sz,memoryLocalCache:kz,memoryLruGarbageCollector:bz,namedQuery:KB,onSnapshot:vz,onSnapshotsInSync:wz,or:tz,orderBy:Jt,persistentLocalCache:Az,persistentMultipleTabManager:Rz,persistentSingleTabManager:yN,query:we,queryEqual:bx,refEqual:MB,runTransaction:Dz,serverTimestamp:de,setDoc:mu,setIndexConfiguration:Oz,setLogLevel:bF,snapshotEqual:fz,startAfter:dN,startAt:iz,sum:lz,terminate:GB,updateDoc:Me,vector:jz,waitForPendingWrites:$B,where:se,writeBatch:ma},Symbol.toStringTag,{value:"Module"}));var Wz="firebase",qz="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to(Wz,qz,"app");const Gz={apiKey:"AIzaSyDV6I7Z6uGqgT8EPwTR3dr2w2xo6aoWqI4",authDomain:"benchonly-7d92a.firebaseapp.com",projectId:"benchonly-7d92a",storageBucket:"benchonly-7d92a.firebasestorage.app",messagingSenderId:"461193748919",appId:"1:461193748919:web:4268cfef7783562e374832"},Lx=sP(Gz),cl=kP(Lx,{persistence:[UP,DP]}),jp=new $i;jp.setCustomParameters({prompt:"select_account"});const M=ZR(Lx),aI=Object.freeze(Object.defineProperty({__proto__:null,auth:cl,db:M,default:Lx,googleProvider:jp},Symbol.toStringTag,{value:"Module"}));let gu=!1;var sf,Ib;try{gu=!!((Ib=(sf=window==null?void 0:window.Capacitor)==null?void 0:sf.isNativePlatform)!=null&&Ib.call(sf))}catch{gu=!1}const X0=gu;var of,Sb;gu&&((Sb=(of=window==null?void 0:window.Capacitor)==null?void 0:of.getPlatform)==null||Sb.call(of));var af,bb;gu&&((bb=(af=window==null?void 0:window.Capacitor)==null?void 0:af.getPlatform)==null||bb.call(af));const Hz="https://benchpressonly.com",EN=gu?`${Hz}/.netlify/functions`:"/.netlify/functions";function lI(t){return`${EN}/${t}`}const TN=b.createContext({}),ai=()=>b.useContext(TN),Kz={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null},Qz={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null,role:"member",groups:["sample-group"],settings:{notifications:!0,units:"lbs",theme:"dark"}},IN=()=>[{id:"sample-1",userId:"guest-user",name:"Heavy Bench Day",date:new Date(Date.now()-1*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"275",prescribedReps:"5",actualWeight:"275",actualReps:"5",rpe:"7"},{prescribedWeight:"285",prescribedReps:"5",actualWeight:"285",actualReps:"5",rpe:"8"},{prescribedWeight:"295",prescribedReps:"3",actualWeight:"295",actualReps:"4",rpe:"9"}]},{id:2,name:"Close Grip Bench",sets:[{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"7"},{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"8"}]}]},{id:"sample-2",userId:"guest-user",name:"Volume Day",date:new Date(Date.now()-3*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"6"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"7",rpe:"8"}]}]},{id:"sample-3",userId:"guest-user",name:"Accessory Work",date:new Date(Date.now()-5*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Incline Dumbbell Press",sets:[{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"10",rpe:"7"},{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"9",rpe:"8"}]},{id:2,name:"Tricep Pushdown",sets:[{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"6"},{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"7"}]}]},{id:"sample-scheduled",userId:"guest-user",name:"Tomorrow's Workout",date:new Date(Date.now()+1*24*60*60*1e3),status:"scheduled",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"280",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"290",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"300",prescribedReps:"3",actualWeight:"",actualReps:"",rpe:""}]}]}],Yz=IN(),Xz=[{id:"goal-1",userId:"guest-user",lift:"Bench Press",startWeight:275,currentWeight:295,targetWeight:315,targetDate:new Date(Date.now()+60*24*60*60*1e3).toISOString().split("T")[0],status:"active"},{id:"goal-2",userId:"guest-user",lift:"Close Grip Bench",startWeight:185,currentWeight:205,targetWeight:225,targetDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],status:"active"}],Jz=[{id:"sample-group",name:"Bench Bros",description:"A group for serious bench pressers",admins:["guest-user"],members:["guest-user","member-1","member-2"],createdAt:new Date,inviteCode:"BENCHBROS"}];function SN({children:t}){const[e,n]=b.useState(null),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(!1),[u,c]=b.useState(null),[h,p]=b.useState(null),[m,y]=b.useState(!1),v=b.useRef(a);b.useEffect(()=>{v.current=a},[a]),b.useEffect(()=>{const P=setTimeout(()=>{o(!1)},1e4),N=f5(cl,async R=>{clearTimeout(P);try{if(R){n(R),l(!1);const H=Y(M,"users",R.uid),ge=await Ze(H);if(ge.exists()){const be=ge.data();i(be),be.credits==null&&(await Me(Y(M,"users",R.uid),{credits:50}),be.credits=50,i({...be,credits:50}))}else{const be={uid:R.uid,email:R.email,displayName:R.displayName,photoURL:R.photoURL,createdAt:de(),lastActive:de(),role:"member",groups:[],credits:0,onboardingComplete:!1,settings:{notifications:!0,units:"lbs",theme:"dark"}};await mu(H,be),i(be)}}else v.current||(n(null),i(null))}catch(H){console.error("[Auth] Profile load error:",H.message),R&&n(R)}finally{o(!1)}});return()=>{N(),clearTimeout(P)}},[]),b.useEffect(()=>{X0&&U5(cl).catch(P=>{(P==null?void 0:P.code)!=="auth/redirect-cancelled-by-user"&&console.error("[Auth] Redirect result error:",P.message)})},[]);const I=async()=>{try{if(X0)return await L5(cl,jp),{success:!0};const P=await N5(cl,jp);return l(!1),{success:!0,user:P.user}}catch(P){return console.error("Google sign in error:",P),(P==null?void 0:P.code)==="auth/popup-closed-by-user"||(P==null?void 0:P.code)==="auth/cancelled-popup-request"?{success:!1,error:"cancelled"}:{success:!1,error:P.message}}},_=()=>(n(Kz),i(Qz),l(!0),o(!1),{success:!0}),x=async()=>{try{return a?(n(null),i(null),l(!1),{success:!0}):(await p5(cl),{success:!0})}catch(P){return console.error("Sign out error:",P),{success:!1,error:P.message}}},E=(e==null?void 0:e.email)==="charltonuw@gmail.com"&&!a,V=E&&!u&&!m,L=async P=>{if(E)try{const N=Y(M,"users",P),R=await Ze(N);if(!R.exists())return;const H={...R.data(),uid:P};c({uid:P,email:H.email,displayName:H.displayName,photoURL:H.photoURL}),p(H)}catch(N){console.error("Impersonation error:",N)}},j=()=>{c(null),p(null)},C={user:u?{...e,uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL}:e,userProfile:u?h:r,realUser:e,realUserProfile:r,loading:s,isGuest:a,isAppAdmin:V,isRealAdmin:E,impersonating:u,actingAsNormalUser:m,setActingAsNormalUser:y,startImpersonating:L,stopImpersonating:j,signInWithGoogle:I,signInAsGuest:_,signOut:x,updateProfile:async P=>{if(!e)return{success:!1,error:"Not authenticated"};if(a)return i(N=>({...N,...P})),{success:!0};try{const N=u?u.uid:e.uid,R=Y(M,"users",N);return await mu(R,{...P,lastActive:de()},{merge:!0}),u?p(H=>({...H,...P})):i(H=>({...H,...P})),{success:!0}}catch(N){return console.error("Update profile error:",N),{success:!1,error:N.message}}},isAuthenticated:!!e};return f.jsx(TN.Provider,{value:C,children:t})}const BX=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:SN,SAMPLE_GOALS:Xz,SAMPLE_GROUPS:Jz,SAMPLE_WORKOUTS:Yz,getSampleWorkouts:IN,useAuth:ai},Symbol.toStringTag,{value:"Module"})),Zz="modulepreload",e6=function(t){return"/"+t},uI={},tt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=e6(l),l in uI)return;uI[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Zz,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},bN=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),zm=b.createContext({}),$m=b.createContext(null),Wm=typeof document<"u",Fx=Wm?b.useLayoutEffect:b.useEffect,kN=b.createContext({strict:!1}),Ux=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t6="framerAppearId",AN="data-"+Ux(t6);function n6(t,e,n,r){const{visualElement:i}=b.useContext(zm),s=b.useContext(kN),o=b.useContext($m),a=b.useContext(bN).reducedMotion,l=b.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;b.useInsertionEffect(()=>{u&&u.update(n,o)});const c=b.useRef(!!(n[AN]&&!window.HandoffComplete));return Fx(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),b.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Il(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function r6(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Il(n)&&(n.current=r))},[e])}function Pd(t){return typeof t=="string"||Array.isArray(t)}function qm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Bx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zx=["initial",...Bx];function Gm(t){return qm(t.animate)||zx.some(e=>Pd(t[e]))}function PN(t){return!!(Gm(t)||t.variants)}function i6(t,e){if(Gm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pd(n)?n:void 0,animate:Pd(r)?r:void 0}}return t.inherit!==!1?e:{}}function s6(t){const{initial:e,animate:n}=i6(t,b.useContext(zm));return b.useMemo(()=>({initial:e,animate:n}),[cI(e),cI(n)])}function cI(t){return Array.isArray(t)?t.join(" "):t}const dI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cd={};for(const t in dI)Cd[t]={isEnabled:e=>dI[t].some(n=>!!e[n])};function o6(t){for(const e in t)Cd[e]={...Cd[e],...t[e]}}const $x=b.createContext({}),CN=b.createContext({}),a6=Symbol.for("motionComponentSymbol");function l6({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&o6(t);function s(a,l){let u;const c={...b.useContext(bN),...a,layoutId:u6(a)},{isStatic:h}=c,p=s6(a),m=r(a,h);if(!h&&Wm){p.visualElement=n6(i,m,c,e);const y=b.useContext(CN),v=b.useContext(kN).strict;p.visualElement&&(u=p.visualElement.loadFeatures(c,v,t,y))}return b.createElement(zm.Provider,{value:p},u&&p.visualElement?b.createElement(u,{visualElement:p.visualElement,...c}):null,n(i,a,r6(m,p.visualElement,l),m,h,p.visualElement))}const o=b.forwardRef(s);return o[a6]=i,o}function u6({layoutId:t}){const e=b.useContext($x).id;return e&&t!==void 0?e+"-"+t:t}function c6(t){function e(r,i={}){return l6(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const d6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Wx(t){return typeof t!="string"||t.includes("-")?!1:!!(d6.indexOf(t)>-1||/[A-Z]/.test(t))}const Op={};function h6(t){Object.assign(Op,t)}const ah=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qa=new Set(ah);function RN(t,{layout:e,layoutId:n}){return qa.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Op[t]||t==="opacity")}const vr=t=>!!(t&&t.getVelocity),f6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},p6=ah.length;function m6(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<p6;o++){const a=ah[o];if(t[a]!==void 0){const l=f6[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const NN=t=>e=>typeof e=="string"&&e.startsWith(t),DN=NN("--"),J0=NN("var(--"),g6=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,y6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vo=(t,e,n)=>Math.min(Math.max(n,t),e),Ga={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uc={...Ga,transform:t=>vo(0,1,t)},Qh={...Ga,default:1},Bc=t=>Math.round(t*1e5)/1e5,Hm=/(-)?([\d]*\.?[\d])+/g,VN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,v6=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function lh(t){return typeof t=="string"}const uh=t=>({test:e=>lh(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bs=uh("deg"),Ai=uh("%"),Re=uh("px"),w6=uh("vh"),x6=uh("vw"),hI={...Ai,parse:t=>Ai.parse(t)/100,transform:t=>Ai.transform(t*100)},fI={...Ga,transform:Math.round},jN={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,size:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,rotate:bs,rotateX:bs,rotateY:bs,rotateZ:bs,scale:Qh,scaleX:Qh,scaleY:Qh,scaleZ:Qh,skew:bs,skewX:bs,skewY:bs,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Uc,originX:hI,originY:hI,originZ:Re,zIndex:fI,fillOpacity:Uc,strokeOpacity:Uc,numOctaves:fI};function qx(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const h in e){const p=e[h];if(DN(h)){s[h]=p;continue}const m=jN[h],y=y6(p,m);if(qa.has(h)){if(l=!0,o[h]=y,!c)continue;p!==(m.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=y):i[h]=y}if(e.transform||(l||r?i.transform=m6(t.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${p} ${m}`}}const Gx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ON(t,e,n){for(const r in e)!vr(e[r])&&!RN(r,n)&&(t[r]=e[r])}function _6({transformTemplate:t},e,n){return b.useMemo(()=>{const r=Gx();return qx(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function E6(t,e,n){const r=t.style||{},i={};return ON(i,r,t),Object.assign(i,_6(t,e,n)),t.transformValues?t.transformValues(i):i}function T6(t,e,n){const r={},i=E6(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const I6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||I6.has(t)}let MN=t=>!Mp(t);function S6(t){t&&(MN=e=>e.startsWith("on")?!Mp(e):t(e))}try{S6(require("@emotion/is-prop-valid").default)}catch{}function b6(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(MN(i)||n===!0&&Mp(i)||!e&&!Mp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function pI(t,e,n){return typeof t=="string"?t:Re.transform(e+n*t)}function k6(t,e,n){const r=pI(e,t.x,t.width),i=pI(n,t.y,t.height);return`${r} ${i}`}const A6={offset:"stroke-dashoffset",array:"stroke-dasharray"},P6={offset:"strokeDashoffset",array:"strokeDasharray"};function C6(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?A6:P6;t[s.offset]=Re.transform(-r);const o=Re.transform(e),a=Re.transform(n);t[s.array]=`${o} ${a}`}function Hx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,p){if(qx(t,u,c,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:v}=t;m.transform&&(v&&(y.transform=m.transform),delete m.transform),v&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=k6(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&C6(m,o,a,l,!1)}const LN=()=>({...Gx(),attrs:{}}),Kx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function R6(t,e,n,r){const i=b.useMemo(()=>{const s=LN();return Hx(s,e,{enableHardwareAcceleration:!1},Kx(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};ON(s,t.style,t),i.style={...s,...i.style}}return i}function N6(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Wx(n)?R6:T6)(r,s,o,n),c={...b6(r,typeof n=="string",t),...l,ref:i},{children:h}=r,p=b.useMemo(()=>vr(h)?h.get():h,[h]);return b.createElement(n,{...c,children:p})}}function FN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const UN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BN(t,e,n,r){FN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(UN.has(i)?i:Ux(i),e.attrs[i])}function Qx(t,e){const{style:n}=t,r={};for(const i in n)(vr(n[i])||e.style&&vr(e.style[i])||RN(i,t))&&(r[i]=n[i]);return r}function zN(t,e){const n=Qx(t,e);for(const r in t)if(vr(t[r])||vr(e[r])){const i=ah.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Yx(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function $N(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Lp=t=>Array.isArray(t),D6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),V6=t=>Lp(t)?t[t.length-1]||0:t;function Df(t){const e=vr(t)?t.get():t;return D6(e)?e.toValue():e}function j6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:O6(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const WN=t=>(e,n)=>{const r=b.useContext(zm),i=b.useContext($m),s=()=>j6(t,e,r,i);return n?s():$N(s)};function O6(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Df(s[p]);let{initial:o,animate:a}=t;const l=Gm(t),u=PN(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;return h&&typeof h!="boolean"&&!qm(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=Yx(t,m);if(!y)return;const{transitionEnd:v,transition:I,..._}=y;for(const x in _){let E=_[x];if(Array.isArray(E)){const V=c?E.length-1:0;E=E[V]}E!==null&&(i[x]=E)}for(const x in v)i[x]=v[x]}),i}const ln=t=>t;class mI{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function M6(t){let e=new mI,n=new mI,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const h=c&&i,p=h?e:n;return u&&o.add(l),p.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const c=e.order[u];c(l),o.has(c)&&(a.schedule(c),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Yh=["prepare","read","update","preRender","render","postRender"],L6=40;function F6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Yh.reduce((h,p)=>(h[p]=M6(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,L6),1),i.timestamp=h,i.isProcessing=!0,Yh.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Yh.reduce((h,p)=>{const m=s[p];return h[p]=(y,v=!1,I=!1)=>(n||l(),m.schedule(y,v,I)),h},{}),cancel:h=>Yh.forEach(p=>s[p].cancel(h)),state:i,steps:s}}const{schedule:bt,cancel:us,state:Wn,steps:Yg}=F6(typeof requestAnimationFrame<"u"?requestAnimationFrame:ln,!0),U6={useVisualState:WN({scrapeMotionValuesFromProps:zN,createRenderState:LN,onMount:(t,e,{renderState:n,latestValues:r})=>{bt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),bt.render(()=>{Hx(n,r,{enableHardwareAcceleration:!1},Kx(e.tagName),t.transformTemplate),BN(e,n)})}})},B6={useVisualState:WN({scrapeMotionValuesFromProps:Qx,createRenderState:Gx})};function z6(t,{forwardMotionProps:e=!1},n,r){return{...Wx(t)?U6:B6,preloadedFeatures:n,useRender:N6(e),createVisualElement:r,Component:t}}function Yi(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const qN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Km(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const $6=t=>e=>qN(e)&&t(e,Km(e));function Zi(t,e,n,r){return Yi(t,e,$6(n),r)}const W6=(t,e)=>n=>e(t(n)),ro=(...t)=>t.reduce(W6);function GN(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const gI=GN("dragHorizontal"),yI=GN("dragVertical");function HN(t){let e=!1;if(t==="y")e=yI();else if(t==="x")e=gI();else{const n=gI(),r=yI();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function KN(){const t=HN(!0);return t?(t(),!1):!0}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}function vI(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||KN())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&bt.update(()=>a[r](s,o))};return Zi(t.current,n,i,{passive:!t.getProps()[r]})}class q6 extends No{mount(){this.unmount=ro(vI(this.node,!0),vI(this.node,!1))}unmount(){}}class G6 extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ro(Yi(this.node.current,"focus",()=>this.onFocus()),Yi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const QN=(t,e)=>e?t===e?!0:QN(t,e.parentElement):!1;function Xg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Km(n))}class H6 extends No{constructor(){super(...arguments),this.removeStartListeners=ln,this.removeEndListeners=ln,this.removeAccessibleListeners=ln,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Zi(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:h}=this.node.getProps();bt.update(()=>{!h&&!QN(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Zi(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ro(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Xg("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&bt.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Yi(this.node.current,"keyup",o),Xg("down",(a,l)=>{this.startPress(a,l)})},n=Yi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Xg("cancel",(s,o)=>this.cancelPress(s,o))},i=Yi(this.node.current,"blur",r);this.removeAccessibleListeners=ro(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&bt.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!KN()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&bt.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Zi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ro(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Z0=new WeakMap,Jg=new WeakMap,K6=t=>{const e=Z0.get(t.target);e&&e(t)},Q6=t=>{t.forEach(K6)};function Y6({root:t,...e}){const n=t||document;Jg.has(n)||Jg.set(n,{});const r=Jg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Q6,{root:t,...e})),r[i]}function X6(t,e,n){const r=Y6(e);return Z0.set(t,n),r.observe(t),()=>{Z0.delete(t),r.unobserve(t)}}const J6={some:0,all:1};class Z6 extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:J6[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),p=u?c:h;p&&p(l)};return X6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(e9(e,n))&&this.startObserver()}unmount(){}}function e9({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const t9={inView:{Feature:Z6},tap:{Feature:H6},focus:{Feature:G6},hover:{Feature:q6}};function YN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function n9(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function r9(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Qm(t,e,n){const r=t.getProps();return Yx(r,e,n!==void 0?n:r.custom,n9(t),r9(t))}let Xx=ln;const ga=t=>t*1e3,es=t=>t/1e3,i9={current:!1},XN=t=>Array.isArray(t)&&typeof t[0]=="number";function JN(t){return!!(!t||typeof t=="string"&&ZN[t]||XN(t)||Array.isArray(t)&&t.every(JN))}const Tc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ZN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tc([0,.65,.55,1]),circOut:Tc([.55,0,1,.45]),backIn:Tc([.31,.01,.66,-.59]),backOut:Tc([.33,1.53,.69,.99])};function e2(t){if(t)return XN(t)?Tc(t):Array.isArray(t)?t.map(e2):ZN[t]}function s9(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=e2(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function o9(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const t2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,a9=1e-7,l9=12;function u9(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=t2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>a9&&++a<l9);return o}function ch(t,e,n,r){if(t===e&&n===r)return ln;const i=s=>u9(s,0,1,t,n);return s=>s===0||s===1?s:t2(i(s),e,r)}const c9=ch(.42,0,1,1),d9=ch(0,0,.58,1),n2=ch(.42,0,.58,1),h9=t=>Array.isArray(t)&&typeof t[0]!="number",r2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,i2=t=>e=>1-t(1-e),Jx=t=>1-Math.sin(Math.acos(t)),s2=i2(Jx),f9=r2(Jx),o2=ch(.33,1.53,.69,.99),Zx=i2(o2),p9=r2(Zx),m9=t=>(t*=2)<1?.5*Zx(t):.5*(2-Math.pow(2,-10*(t-1))),g9={linear:ln,easeIn:c9,easeInOut:n2,easeOut:d9,circIn:Jx,circInOut:f9,circOut:s2,backIn:Zx,backInOut:p9,backOut:o2,anticipate:m9},wI=t=>{if(Array.isArray(t)){Xx(t.length===4);const[e,n,r,i]=t;return ch(e,n,r,i)}else if(typeof t=="string")return g9[t];return t},e_=(t,e)=>n=>!!(lh(n)&&v6.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),a2=(t,e,n)=>r=>{if(!lh(r))return r;const[i,s,o,a]=r.match(Hm);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},y9=t=>vo(0,255,t),Zg={...Ga,transform:t=>Math.round(y9(t))},ua={test:e_("rgb","red"),parse:a2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Zg.transform(t)+", "+Zg.transform(e)+", "+Zg.transform(n)+", "+Bc(Uc.transform(r))+")"};function v9(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ev={test:e_("#"),parse:v9,transform:ua.transform},Sl={test:e_("hsl","hue"),parse:a2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ai.transform(Bc(e))+", "+Ai.transform(Bc(n))+", "+Bc(Uc.transform(r))+")"},Jn={test:t=>ua.test(t)||ev.test(t)||Sl.test(t),parse:t=>ua.test(t)?ua.parse(t):Sl.test(t)?Sl.parse(t):ev.parse(t),transform:t=>lh(t)?t:t.hasOwnProperty("red")?ua.transform(t):Sl.transform(t)},$t=(t,e,n)=>-n*t+n*e+t;function ey(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=ey(l,a,t+1/3),s=ey(l,a,t),o=ey(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const ty=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},x9=[ev,ua,Sl],_9=t=>x9.find(e=>e.test(t));function xI(t){const e=_9(t);let n=e.parse(t);return e===Sl&&(n=w9(n)),n}const l2=(t,e)=>{const n=xI(t),r=xI(e),i={...n};return s=>(i.red=ty(n.red,r.red,s),i.green=ty(n.green,r.green,s),i.blue=ty(n.blue,r.blue,s),i.alpha=$t(n.alpha,r.alpha,s),ua.transform(i))};function E9(t){var e,n;return isNaN(t)&&lh(t)&&(((e=t.match(Hm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(VN))===null||n===void 0?void 0:n.length)||0)>0}const u2={regex:g6,countKey:"Vars",token:"${v}",parse:ln},c2={regex:VN,countKey:"Colors",token:"${c}",parse:Jn.parse},d2={regex:Hm,countKey:"Numbers",token:"${n}",parse:Ga.parse};function ny(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Fp(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ny(n,u2),ny(n,c2),ny(n,d2),n}function h2(t){return Fp(t).values}function f2(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Fp(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(u2.token,o[l]):l<r+n?a=a.replace(c2.token,Jn.transform(o[l])):a=a.replace(d2.token,Bc(o[l]));return a}}const T9=t=>typeof t=="number"?0:t;function I9(t){const e=h2(t);return f2(t)(e.map(T9))}const wo={test:E9,parse:h2,createTransformer:f2,getAnimatableNone:I9},p2=(t,e)=>n=>`${n>0?e:t}`;function m2(t,e){return typeof t=="number"?n=>$t(t,e,n):Jn.test(t)?l2(t,e):t.startsWith("var(")?p2(t,e):y2(t,e)}const g2=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>m2(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},S9=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=m2(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},y2=(t,e)=>{const n=wo.createTransformer(e),r=Fp(t),i=Fp(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ro(g2(r.values,i.values),n):p2(t,e)},Rd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},_I=(t,e)=>n=>$t(t,e,n);function b9(t){return typeof t=="number"?_I:typeof t=="string"?Jn.test(t)?l2:y2:Array.isArray(t)?g2:typeof t=="object"?S9:_I}function k9(t,e,n){const r=[],i=n||b9(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ln:e;a=ro(l,a)}r.push(a)}return r}function v2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Xx(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=k9(e,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const h=Rd(t[c],t[c+1],u);return o[c](h)};return n?u=>l(vo(t[0],t[s-1],u)):l}function A9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Rd(0,e,r);t.push($t(n,1,i))}}function P9(t){const e=[0];return A9(e,t.length-1),e}function C9(t,e){return t.map(n=>n*e)}function R9(t,e){return t.map(()=>e||n2).splice(0,t.length-1)}function Up({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=h9(r)?r.map(wI):wI(r),s={done:!1,value:e[0]},o=C9(n&&n.length===e.length?n:P9(e),t),a=v2(o,e,{ease:Array.isArray(i)?i:R9(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function w2(t,e){return e?t*(1e3/e):0}const N9=5;function x2(t,e,n){const r=Math.max(e-N9,0);return w2(n-t(r),e-r)}const ry=.001,D9=.01,V9=10,j9=.05,O9=1;function M9({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=vo(j9,O9,o),t=vo(D9,V9,es(t)),o<1?(i=u=>{const c=u*o,h=c*t,p=c-n,m=tv(u,o),y=Math.exp(-h);return ry-p/m*y},s=u=>{const h=u*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-h),v=tv(Math.pow(u,2),o);return(-i(u)+ry>0?-1:1)*((p-m)*y)/v}):(i=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-ry+c*h},s=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=F9(i,s,a);if(t=ga(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const L9=12;function F9(t,e,n){let r=n;for(let i=1;i<L9;i++)r=r-t(r)/e(r);return r}function tv(t,e){return t*Math.sqrt(1-e*e)}const U9=["duration","bounce"],B9=["stiffness","damping","mass"];function EI(t,e){return e.some(n=>t[n]!==void 0)}function z9(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!EI(t,B9)&&EI(t,U9)){const n=M9(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function _2({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:h,isResolvedFromDuration:p}=z9({...r,velocity:-es(r.velocity||0)}),m=h||0,y=l/(2*Math.sqrt(a*u)),v=s-i,I=es(Math.sqrt(a/u)),_=Math.abs(v)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let x;if(y<1){const E=tv(I,y);x=V=>{const L=Math.exp(-y*I*V);return s-L*((m+y*I*v)/E*Math.sin(E*V)+v*Math.cos(E*V))}}else if(y===1)x=E=>s-Math.exp(-I*E)*(v+(m+I*v)*E);else{const E=I*Math.sqrt(y*y-1);x=V=>{const L=Math.exp(-y*I*V),j=Math.min(E*V,300);return s-L*((m+y*I*v)*Math.sinh(j)+E*v*Math.cosh(j))/E}}return{calculatedDuration:p&&c||null,next:E=>{const V=x(E);if(p)o.done=E>=c;else{let L=m;E!==0&&(y<1?L=x2(x,E,V):L=0);const j=Math.abs(L)<=n,S=Math.abs(s-V)<=e;o.done=j&&S}return o.value=o.done?s:V,o}}}function TI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],p={done:!1,value:h},m=T=>a!==void 0&&T<a||l!==void 0&&T>l,y=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let v=n*e;const I=h+v,_=o===void 0?I:o(I);_!==I&&(v=_-h);const x=T=>-v*Math.exp(-T/r),E=T=>_+x(T),V=T=>{const k=x(T),C=E(T);p.done=Math.abs(k)<=u,p.value=p.done?_:C};let L,j;const S=T=>{m(p.value)&&(L=T,j=_2({keyframes:[p.value,y(p.value)],velocity:x2(E,T,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:T=>{let k=!1;return!j&&L===void 0&&(k=!0,V(T),S(T)),L!==void 0&&T>L?j.next(T-L):(!k&&V(T),p)}}}const $9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>bt.update(e,!0),stop:()=>us(e),now:()=>Wn.isProcessing?Wn.timestamp:performance.now()}},II=2e4;function SI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<II;)e+=n,r=t.next(e);return e>=II?1/0:e}const W9={decay:TI,inertia:TI,tween:Up,keyframes:Up,spring:_2};function Bp({autoplay:t=!0,delay:e=0,driver:n=$9,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:h,...p}){let m=1,y=!1,v,I;const _=()=>{I=new Promise(ue=>{v=ue})};_();let x;const E=W9[i]||Up;let V;E!==Up&&typeof r[0]!="number"&&(V=v2([0,100],r,{clamp:!1}),r=[0,100]);const L=E({...p,keyframes:r});let j;a==="mirror"&&(j=E({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let S="idle",T=null,k=null,C=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=SI(L));const{calculatedDuration:P}=L;let N=1/0,R=1/0;P!==null&&(N=P+o,R=N*(s+1)-o);let H=0;const ge=ue=>{if(k===null)return;m>0&&(k=Math.min(k,ue)),m<0&&(k=Math.min(ue-R/m,k)),T!==null?H=T:H=Math.round(ue-k)*m;const ke=H-e*(m>=0?1:-1),O=m>=0?ke<0:ke>R;H=Math.max(ke,0),S==="finished"&&T===null&&(H=R);let ft=H,_t=L;if(s){const en=Math.min(H,R)/N;let dn=Math.floor(en),tn=en%1;!tn&&en>=1&&(tn=1),tn===1&&dn--,dn=Math.min(dn,s+1),!!(dn%2)&&(a==="reverse"?(tn=1-tn,o&&(tn-=o/N)):a==="mirror"&&(_t=j)),ft=vo(0,1,tn)*N}const $e=O?{done:!1,value:r[0]}:_t.next(ft);V&&($e.value=V($e.value));let{done:rt}=$e;!O&&P!==null&&(rt=m>=0?H>=R:H<=0);const On=T===null&&(S==="finished"||S==="running"&&rt);return h&&h($e.value),On&&X(),$e},be=()=>{x&&x.stop(),x=void 0},Ae=()=>{S="idle",be(),v(),_(),k=C=null},X=()=>{S="finished",c&&c(),be(),v()},ce=()=>{if(y)return;x||(x=n(ge));const ue=x.now();l&&l(),T!==null?k=ue-T:(!k||S==="finished")&&(k=ue),S==="finished"&&_(),C=k,T=null,S="running",x.start()};t&&ce();const D={then(ue,ke){return I.then(ue,ke)},get time(){return es(H)},set time(ue){ue=ga(ue),H=ue,T!==null||!x||m===0?T=ue:k=x.now()-ue/m},get duration(){const ue=L.calculatedDuration===null?SI(L):L.calculatedDuration;return es(ue)},get speed(){return m},set speed(ue){ue===m||!x||(m=ue,D.time=es(H))},get state(){return S},play:ce,pause:()=>{S="paused",T=H},stop:()=>{y=!0,S!=="idle"&&(S="idle",u&&u(),Ae())},cancel:()=>{C!==null&&ge(C),Ae()},complete:()=>{S="finished"},sample:ue=>(k=0,ge(ue))};return D}function q9(t){let e;return()=>(e===void 0&&(e=t()),e)}const G9=q9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),H9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Xh=10,K9=2e4,Q9=(t,e)=>e.type==="spring"||t==="backgroundColor"||!JN(e.ease);function Y9(t,e,{onUpdate:n,onComplete:r,...i}){if(!(G9()&&H9.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const c=()=>{l=new Promise(E=>{a=E})};c();let{keyframes:h,duration:p=300,ease:m,times:y}=i;if(Q9(e,i)){const E=Bp({...i,repeat:0,delay:0});let V={done:!1,value:h[0]};const L=[];let j=0;for(;!V.done&&j<K9;)V=E.sample(j),L.push(V.value),j+=Xh;y=void 0,h=L,p=j-Xh,m="linear"}const v=s9(t.owner.current,e,h,{...i,duration:p,ease:m,times:y}),I=()=>{u=!1,v.cancel()},_=()=>{u=!0,bt.update(I),a(),c()};return v.onfinish=()=>{u||(t.set(o9(h,i)),r&&r(),_())},{then(E,V){return l.then(E,V)},attachTimeline(E){return v.timeline=E,v.onfinish=null,ln},get time(){return es(v.currentTime||0)},set time(E){v.currentTime=ga(E)},get speed(){return v.playbackRate},set speed(E){v.playbackRate=E},get duration(){return es(p)},play:()=>{o||(v.play(),us(I))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:E}=v;if(E){const V=Bp({...i,autoplay:!1});t.setWithVelocity(V.sample(E-Xh).value,V.sample(E).value,Xh)}_()},complete:()=>{u||v.finish()},cancel:_}}function X9({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ln,pause:ln,stop:ln,then:s=>(s(),Promise.resolve()),cancel:ln,complete:ln});return e?Bp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const J9={type:"spring",stiffness:500,damping:25,restSpeed:10},Z9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),e$={type:"keyframes",duration:.8},t$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},n$=(t,{keyframes:e})=>e.length>2?e$:qa.has(t)?t.startsWith("scale")?Z9(e[1]):J9:t$,nv=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(wo.test(e)||e==="0")&&!e.startsWith("url(")),r$=new Set(["brightness","contrast","saturate","opacity"]);function i$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Hm)||[];if(!r)return t;const i=n.replace(r,"");let s=r$.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const s$=/([a-z-]*)\(.*?\)/g,rv={...wo,getAnimatableNone:t=>{const e=t.match(s$);return e?e.map(i$).join(" "):t}},o$={...jN,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:rv,WebkitFilter:rv},t_=t=>o$[t];function E2(t,e){let n=t_(t);return n!==rv&&(n=wo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const T2=t=>/^0[^.\s]+$/.test(t);function a$(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||T2(t)}function l$(t,e,n,r){const i=nv(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),a$(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];s[c]=E2(e,a)}return s}function u$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function n_(t,e){return t[e]||t.default||t}const c$={skipAnimations:!1},r_=(t,e,n,r={})=>i=>{const s=n_(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-ga(o);const l=l$(e,t,n,s),u=l[0],c=l[l.length-1],h=nv(t,u),p=nv(t,c);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(u$(s)||(m={...m,...n$(t,m)}),m.duration&&(m.duration=ga(m.duration)),m.repeatDelay&&(m.repeatDelay=ga(m.repeatDelay)),!h||!p||i9.current||s.type===!1||c$.skipAnimations)return X9(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=Y9(e,t,m);if(y)return y}return Bp(m)};function zp(t){return!!(vr(t)&&t.add)}const I2=t=>/^\-?\d*\.?\d+$/.test(t);function i_(t,e){t.indexOf(e)===-1&&t.push(e)}function s_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class o_{constructor(){this.subscriptions=[]}add(e){return i_(this.subscriptions,e),()=>s_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const d$=t=>!isNaN(parseFloat(t));class h${constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Wn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,bt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>bt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=d$(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new o_);const r=this.events[e].add(n);return e==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?w2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yu(t,e){return new h$(t,e)}const S2=t=>e=>e.test(t),f$={test:t=>t==="auto",parse:t=>t},b2=[Ga,Re,Ai,bs,x6,w6,f$],uc=t=>b2.find(S2(t)),p$=[...b2,Jn,wo],m$=t=>p$.find(S2(t));function g$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yu(n))}function y$(t,e){const n=Qm(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=V6(s[o]);g$(t,o,a)}}function v$(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),c!=null&&(typeof c=="string"&&(I2(c)||T2(c))?c=parseFloat(c):!m$(c)&&wo.test(u)&&(c=E2(l,u)),t.addValue(l,yu(c,{owner:t})),n[l]===void 0&&(n[l]=c),c!==null&&t.setBaseTarget(l,c))}}function w$(t,e){return e?(e[t]||e.default||e).from:void 0}function x$(t,e,n){const r={};for(const i in t){const s=w$(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function _$({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function E$(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function k2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const p=t.getValue(h),m=a[h];if(!p||m===void 0||c&&_$(c,h))continue;const y={delay:n,elapsed:0,...n_(s||{},h)};if(window.HandoffAppearAnimations){const _=t.getProps()[AN];if(_){const x=window.HandoffAppearAnimations(_,h,p,bt);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let v=!y.isHandoff&&!E$(p,m);if(y.type==="spring"&&(p.getVelocity()||y.velocity)&&(v=!1),p.animation&&(v=!1),v)continue;p.start(r_(h,p,m,t.shouldReduceMotion&&qa.has(h)?{type:!1}:y));const I=p.animation;zp(l)&&(l.add(h),I.then(()=>l.remove(h))),u.push(I)}return o&&Promise.all(u).then(()=>{o&&y$(t,o)}),u}function iv(t,e,n={}){const r=Qm(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(k2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:h}=i;return T$(t,e,u+l,c,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function T$(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(I$).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(iv(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function I$(t,e){return t.sortNodePosition(e)}function S$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>iv(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=iv(t,e,n);else{const i=typeof e=="function"?Qm(t,e,n.custom):e;r=Promise.all(k2(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const b$=[...Bx].reverse(),k$=Bx.length;function A$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S$(t,n,r)))}function P$(t){let e=A$(t);const n=R$();let r=!0;const i=(l,u)=>{const c=Qm(t,u);if(c){const{transition:h,transitionEnd:p,...m}=c;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,u){const c=t.getProps(),h=t.getVariantContext(!0)||{},p=[],m=new Set;let y={},v=1/0;for(let _=0;_<k$;_++){const x=b$[_],E=n[x],V=c[x]!==void 0?c[x]:h[x],L=Pd(V),j=x===u?E.isActive:null;j===!1&&(v=_);let S=V===h[x]&&V!==c[x]&&L;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),E.protectedKeys={...y},!E.isActive&&j===null||!V&&!E.prevProp||qm(V)||typeof V=="boolean")continue;let k=C$(E.prevProp,V)||x===u&&E.isActive&&!S&&L||_>v&&L,C=!1;const P=Array.isArray(V)?V:[V];let N=P.reduce(i,{});j===!1&&(N={});const{prevResolvedValues:R={}}=E,H={...R,...N},ge=be=>{k=!0,m.has(be)&&(C=!0,m.delete(be)),E.needsAnimating[be]=!0};for(const be in H){const Ae=N[be],X=R[be];if(y.hasOwnProperty(be))continue;let ce=!1;Lp(Ae)&&Lp(X)?ce=!YN(Ae,X):ce=Ae!==X,ce?Ae!==void 0?ge(be):m.add(be):Ae!==void 0&&m.has(be)?ge(be):E.protectedKeys[be]=!0}E.prevProp=V,E.prevResolvedValues=N,E.isActive&&(y={...y,...N}),r&&t.blockInitialAnimation&&(k=!1),k&&(!S||C)&&p.push(...P.map(be=>({animation:be,options:{type:x,...l}})))}if(m.size){const _={};m.forEach(x=>{const E=t.getBaseTarget(x);E!==void 0&&(_[x]=E)}),p.push({animation:_})}let I=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,u,c){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),n[l].isActive=u;const p=o(c,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function C$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YN(e,t):!1}function Uo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function R$(){return{animate:Uo(!0),whileInView:Uo(),whileHover:Uo(),whileTap:Uo(),whileDrag:Uo(),whileFocus:Uo(),exit:Uo()}}class N$ extends No{constructor(e){super(e),e.animationState||(e.animationState=P$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),qm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let D$=0;class V$ extends No{constructor(){super(...arguments),this.id=D$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const j$={animation:{Feature:N$},exit:{Feature:V$}},bI=(t,e)=>Math.abs(t-e);function O$(t,e){const n=bI(t.x,e.x),r=bI(t.y,e.y);return Math.sqrt(n**2+r**2)}class A2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=sy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=O$(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=h,{timestamp:v}=Wn;this.history.push({...y,timestamp:v});const{onStart:I,onMove:_}=this.handlers;p||(I&&I(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=iy(p,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=sy(h.type==="pointercancel"?this.lastMoveEventInfo:iy(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,I),y&&y(h,I)},!qN(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Km(e),a=iy(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Wn;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,sy(a,this.history)),this.removeListeners=ro(Zi(this.contextWindow,"pointermove",this.handlePointerMove),Zi(this.contextWindow,"pointerup",this.handlePointerUp),Zi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function iy(t,e){return e?{point:e(t.point)}:t}function kI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sy({point:t},e){return{point:t,delta:kI(t,P2(e)),offset:kI(t,M$(e)),velocity:L$(e,.1)}}function M$(t){return t[0]}function P2(t){return t[t.length-1]}function L$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=P2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ga(e)));)n--;if(!r)return{x:0,y:0};const s=es(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Rr(t){return t.max-t.min}function sv(t,e=0,n=.01){return Math.abs(t-e)<=n}function AI(t,e,n,r=.5){t.origin=r,t.originPoint=$t(e.min,e.max,t.origin),t.scale=Rr(n)/Rr(e),(sv(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=$t(n.min,n.max,t.origin)-t.originPoint,(sv(t.translate)||isNaN(t.translate))&&(t.translate=0)}function zc(t,e,n,r){AI(t.x,e.x,n.x,r?r.originX:void 0),AI(t.y,e.y,n.y,r?r.originY:void 0)}function PI(t,e,n){t.min=n.min+e.min,t.max=t.min+Rr(e)}function F$(t,e,n){PI(t.x,e.x,n.x),PI(t.y,e.y,n.y)}function CI(t,e,n){t.min=e.min-n.min,t.max=t.min+Rr(e)}function $c(t,e,n){CI(t.x,e.x,n.x),CI(t.y,e.y,n.y)}function U$(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$t(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$t(n,t,r.max):Math.min(t,n)),t}function RI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function B$(t,{top:e,left:n,bottom:r,right:i}){return{x:RI(t.x,n,i),y:RI(t.y,e,r)}}function NI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function z$(t,e){return{x:NI(t.x,e.x),y:NI(t.y,e.y)}}function $$(t,e){let n=.5;const r=Rr(t),i=Rr(e);return i>r?n=Rd(e.min,e.max-r,t.min):r>i&&(n=Rd(t.min,t.max-i,e.min)),vo(0,1,n)}function W$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ov=.35;function q$(t=ov){return t===!1?t=0:t===!0&&(t=ov),{x:DI(t,"left","right"),y:DI(t,"top","bottom")}}function DI(t,e,n){return{min:VI(t,e),max:VI(t,n)}}function VI(t,e){return typeof t=="number"?t:t[e]||0}const jI=()=>({translate:0,scale:1,origin:0,originPoint:0}),bl=()=>({x:jI(),y:jI()}),OI=()=>({min:0,max:0}),fn=()=>({x:OI(),y:OI()});function Fr(t){return[t("x"),t("y")]}function C2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function G$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function H$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function oy(t){return t===void 0||t===1}function av({scale:t,scaleX:e,scaleY:n}){return!oy(t)||!oy(e)||!oy(n)}function Ho(t){return av(t)||R2(t)||t.z||t.rotate||t.rotateX||t.rotateY}function R2(t){return MI(t.x)||MI(t.y)}function MI(t){return t&&t!=="0%"}function $p(t,e,n){const r=t-n,i=e*r;return n+i}function LI(t,e,n,r,i){return i!==void 0&&(t=$p(t,i,r)),$p(t,n,r)+e}function lv(t,e=0,n=1,r,i){t.min=LI(t.min,e,n,r,i),t.max=LI(t.max,e,n,r,i)}function N2(t,{x:e,y:n}){lv(t.x,e.translate,e.scale,e.originPoint),lv(t.y,n.translate,n.scale,n.originPoint)}function K$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&kl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,N2(t,o)),r&&Ho(s.latestValues)&&kl(t,s.latestValues))}e.x=FI(e.x),e.y=FI(e.y)}function FI(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ps(t,e){t.min=t.min+e,t.max=t.max+e}function UI(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=$t(t.min,t.max,s);lv(t,e[n],e[r],o,e.scale)}const Q$=["x","scaleX","originX"],Y$=["y","scaleY","originY"];function kl(t,e){UI(t.x,e,Q$),UI(t.y,e,Y$)}function D2(t,e){return C2(H$(t.getBoundingClientRect(),e))}function X$(t,e,n){const r=D2(t,n),{scroll:i}=e;return i&&(Ps(r.x,i.offset.x),Ps(r.y,i.offset.y)),r}const V2=({current:t})=>t?t.ownerDocument.defaultView:null,J$=new WeakMap;class Z${constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Km(c,"page").point)},s=(c,h)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=HN(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fr(I=>{let _=this.getAxisMotionValue(I).get()||0;if(Ai.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const E=x.layout.layoutBox[I];E&&(_=Rr(E)*(parseFloat(_)/100))}}this.originPoint[I]=_}),y&&bt.update(()=>y(c,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:I}=h;if(m&&this.currentDirection===null){this.currentDirection=eW(I),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,I),this.updateAxis("y",h.point,I),this.visualElement.render(),v&&v(c,h)},a=(c,h)=>this.stop(c,h),l=()=>Fr(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new A2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:V2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&bt.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Jh(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=U$(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Il(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=B$(i.layoutBox,n):this.constraints=!1,this.elastic=q$(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Fr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=W$(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Il(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=X$(r,i.root,this.visualElement.getTransformPagePoint());let o=z$(i.layout.layoutBox,s);if(n){const a=n(G$(o));this.hasMutatedConstraints=!!a,a&&(o=C2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Fr(c=>{if(!Jh(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(r_(e,r,0,n))}stopAnimation(){Fr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Fr(n=>{const{drag:r}=this.getProps();if(!Jh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-$t(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Il(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Fr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=$$({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fr(o=>{if(!Jh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set($t(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;J$.set(this.visualElement,this);const e=this.visualElement.current,n=Zi(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Il(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Yi(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Fr(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=ov,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Jh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tW extends No{constructor(e){super(e),this.removeGroupControls=ln,this.removeListeners=ln,this.controls=new Z$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const BI=t=>(e,n)=>{t&&bt.update(()=>t(e,n))};class nW extends No{constructor(){super(...arguments),this.removePointerDownListener=ln}onPointerDown(e){this.session=new A2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:BI(e),onStart:BI(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&bt.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Zi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function rW(){const t=b.useContext($m);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=b.useId();return b.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Vf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Re.test(t))t=parseFloat(t);else return t;const n=zI(t,e.target.x),r=zI(t,e.target.y);return`${n}% ${r}%`}},iW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wo.parse(t);if(i.length>5)return r;const s=wo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=$t(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class sW extends jd.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;h6(oW),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Vf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function j2(t){const[e,n]=rW(),r=b.useContext($x);return jd.createElement(sW,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(CN),isPresent:e,safeToRemove:n})}const oW={borderRadius:{...cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cc,borderTopRightRadius:cc,borderBottomLeftRadius:cc,borderBottomRightRadius:cc,boxShadow:iW},O2=["TopLeft","TopRight","BottomLeft","BottomRight"],aW=O2.length,$I=t=>typeof t=="string"?parseFloat(t):t,WI=t=>typeof t=="number"||Re.test(t);function lW(t,e,n,r,i,s){i?(t.opacity=$t(0,n.opacity!==void 0?n.opacity:1,uW(r)),t.opacityExit=$t(e.opacity!==void 0?e.opacity:1,0,cW(r))):s&&(t.opacity=$t(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<aW;o++){const a=`border${O2[o]}Radius`;let l=qI(e,a),u=qI(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||WI(l)===WI(u)?(t[a]=Math.max($t($I(l),$I(u),r),0),(Ai.test(u)||Ai.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=$t(e.rotate||0,n.rotate||0,r))}function qI(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uW=M2(0,.5,s2),cW=M2(.5,.95,ln);function M2(t,e,n){return r=>r<t?0:r>e?1:n(Rd(t,e,r))}function GI(t,e){t.min=e.min,t.max=e.max}function Lr(t,e){GI(t.x,e.x),GI(t.y,e.y)}function HI(t,e,n,r,i){return t-=e,t=$p(t,1/n,r),i!==void 0&&(t=$p(t,1/i,r)),t}function dW(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ai.test(e)&&(e=parseFloat(e),e=$t(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$t(s.min,s.max,r);t===s&&(a-=e),t.min=HI(t.min,e,n,a,i),t.max=HI(t.max,e,n,a,i)}function KI(t,e,[n,r,i],s,o){dW(t,e[n],e[r],e[i],e.scale,s,o)}const hW=["x","scaleX","originX"],fW=["y","scaleY","originY"];function QI(t,e,n,r){KI(t.x,e,hW,n?n.x:void 0,r?r.x:void 0),KI(t.y,e,fW,n?n.y:void 0,r?r.y:void 0)}function YI(t){return t.translate===0&&t.scale===1}function L2(t){return YI(t.x)&&YI(t.y)}function pW(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function F2(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function XI(t){return Rr(t.x)/Rr(t.y)}class mW{constructor(){this.members=[]}add(e){i_(this.members,e),e.scheduleRender()}remove(e){if(s_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JI(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const gW=(t,e)=>t.depth-e.depth;class yW{constructor(){this.children=[],this.isDirty=!1}add(e){i_(this.children,e),this.isDirty=!0}remove(e){s_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gW),this.isDirty=!1,this.children.forEach(e)}}function vW(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(us(r),t(s-e))};return bt.read(r,!0),()=>us(r)}function wW(t){window.MotionDebug&&window.MotionDebug.record(t)}function xW(t){return t instanceof SVGElement&&t.tagName!=="svg"}function _W(t,e,n){const r=vr(t)?t:yu(t);return r.start(r_("",r,e,n)),r.animation}const ZI=["","X","Y","Z"],EW={visibility:"hidden"},eS=1e3;let TW=0;const Ko={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function U2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=TW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ko.totalNodes=Ko.resolvedTargetDeltas=Ko.recalculatedProjection=0,this.nodes.forEach(bW),this.nodes.forEach(RW),this.nodes.forEach(NW),this.nodes.forEach(kW),wW(Ko)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new o_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xW(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=vW(p,250),Vf.hasAnimatedSinceResize&&(Vf.hasAnimatedSinceResize=!1,this.nodes.forEach(nS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||MW,{onLayoutAnimationStart:I,onLayoutAnimationComplete:_}=c.getProps(),x=!this.targetLayout||!F2(this.targetLayout,y)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,E);const V={...n_(v,"layout"),onPlay:I,onComplete:_};(c.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else p||nS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tS);return}this.isUpdating||this.nodes.forEach(PW),this.isUpdating=!1,this.nodes.forEach(CW),this.nodes.forEach(IW),this.nodes.forEach(SW),this.clearAllSnapshots();const a=performance.now();Wn.delta=vo(0,1e3/60,a-Wn.timestamp),Wn.timestamp=a,Wn.isProcessing=!0,Yg.update.process(Wn),Yg.preRender.process(Wn),Yg.render.process(Wn),Wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(AW),this.sharedNodes.forEach(VW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!L2(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Ho(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),LW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return fn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ps(a.x,l.offset.x),Ps(a.y,l.offset.y)),a}removeElementScroll(o){const a=fn();Lr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:h}=u;if(u!==this.root&&c&&h.layoutScroll){if(c.isRoot){Lr(a,o);const{scroll:p}=this.root;p&&(Ps(a.x,-p.offset.x),Ps(a.y,-p.offset.y))}Ps(a.x,c.offset.x),Ps(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=fn();Lr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&kl(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ho(c.latestValues)&&kl(l,c.latestValues)}return Ho(this.latestValues)&&kl(l,this.latestValues),l}removeTransform(o){const a=fn();Lr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ho(u.latestValues))continue;av(u.latestValues)&&u.updateSnapshot();const c=fn(),h=u.measurePageBox();Lr(c,h),QI(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ho(this.latestValues)&&QI(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Wn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),$c(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),N2(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),$c(this.relativeTargetOrigin,this.target,m.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ko.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||av(this.parent.latestValues)||R2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Wn.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Lr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;K$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=bl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=bl(),this.projectionDeltaWithTransform=bl());const v=this.projectionTransform;zc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=JI(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Ko.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=bl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=fn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=m!==y,I=this.getStack(),_=!I||I.members.length<=1,x=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(OW));this.animationProgress=0;let E;this.mixTargetDelta=V=>{const L=V/1e3;rS(h.x,o.x,L),rS(h.y,o.y,L),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($c(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jW(this.relativeTarget,this.relativeTargetOrigin,p,L),E&&pW(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=fn()),Lr(E,this.relativeTarget)),v&&(this.animationValues=c,lW(c,u,this.latestValues,L,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{Vf.hasAnimatedSinceResize=!0,this.currentAnimation=_W(0,eS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&B2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||fn();const h=Rr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Rr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Lr(a,l),kl(a,c),zc(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mW),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<ZI.length;c++){const h="rotate"+ZI[c];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return EW;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Df(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Df(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ho(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=JI(this.projectionDeltaWithTransform,this.treeScale,p),c&&(u.transform=c(p,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in Op){if(p[v]===void 0)continue;const{correct:I,applyTo:_}=Op[v],x=u.transform==="none"?p[v]:I(p[v],h);if(_){const E=_.length;for(let V=0;V<E;V++)u[_[V]]=x}else u[v]=x}return this.options.layoutId&&(u.pointerEvents=h===this?Df(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(tS),this.root.sharedNodes.clear()}}}function IW(t){t.updateLayout()}function SW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Fr(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Rr(p);p.min=r[h].min,p.max=p.min+m}):B2(s,n.layoutBox,r)&&Fr(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Rr(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=bl();zc(a,r,n.layoutBox);const l=bl();o?zc(l,t.applyTransform(i,!0),n.measuredBox):zc(l,r,n.layoutBox);const u=!L2(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const y=fn();$c(y,n.layoutBox,p.layoutBox);const v=fn();$c(v,r,m.layoutBox),F2(y,v)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function bW(t){Ko.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AW(t){t.clearSnapshot()}function tS(t){t.clearMeasurements()}function PW(t){t.isLayoutDirty=!1}function CW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function RW(t){t.resolveTargetDelta()}function NW(t){t.calcProjection()}function DW(t){t.resetRotation()}function VW(t){t.removeLeadSnapshot()}function rS(t,e,n){t.translate=$t(e.translate,0,n),t.scale=$t(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function iS(t,e,n,r){t.min=$t(e.min,n.min,r),t.max=$t(e.max,n.max,r)}function jW(t,e,n,r){iS(t.x,e.x,n.x,r),iS(t.y,e.y,n.y,r)}function OW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const MW={duration:.45,ease:[.4,0,.1,1]},sS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),oS=sS("applewebkit/")&&!sS("chrome/")?Math.round:ln;function aS(t){t.min=oS(t.min),t.max=oS(t.max)}function LW(t){aS(t.x),aS(t.y)}function B2(t,e,n){return t==="position"||t==="preserve-aspect"&&!sv(XI(e),XI(n),.2)}const FW=U2({attachResizeListener:(t,e)=>Yi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ay={current:void 0},z2=U2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ay.current){const t=new FW({});t.mount(window),t.setOptions({layoutScroll:!0}),ay.current=t}return ay.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UW={pan:{Feature:nW},drag:{Feature:tW,ProjectionNode:z2,MeasureLayout:j2}},BW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function zW(t){const e=BW.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function uv(t,e,n=1){const[r,i]=zW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return I2(o)?parseFloat(o):o}else return J0(i)?uv(i,e,n+1):i}function $W(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!J0(s))return;const o=uv(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!J0(s))continue;const o=uv(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const WW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),$2=t=>WW.has(t),qW=t=>Object.keys(t).some($2),lS=t=>t===Ga||t===Re,uS=(t,e)=>parseFloat(t.split(", ")[e]),cS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return uS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?uS(s[1],t):0}},GW=new Set(["x","y","z"]),HW=ah.filter(t=>!GW.has(t));function KW(t){const e=[];return HW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const vu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:cS(4,13),y:cS(5,14)};vu.translateX=vu.x;vu.translateY=vu.y;const QW=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=vu[u](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),t[u]=vu[u](l,s)}),t},YW=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter($2);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let c=n[l],h=uc(c);const p=e[l];let m;if(Lp(p)){const y=p.length,v=p[0]===null?1:0;c=p[v],h=uc(c);for(let I=v;I<y&&p[I]!==null;I++)m?Xx(uc(p[I])===m):m=uc(p[I])}else m=uc(p);if(h!==m)if(lS(h)&&lS(m)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===Re&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(c===0||p===0)?c===0?u.set(m.transform(c)):e[l]=h.transform(p):(o||(s=KW(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=QW(e,t,a);return s.length&&s.forEach(([c,h])=>{t.getValue(c).set(h)}),t.render(),Wm&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function XW(t,e,n,r){return qW(e)?YW(t,e,n,r):{target:e,transitionEnd:r}}const JW=(t,e,n,r)=>{const i=$W(t,e,r);return e=i.target,r=i.transitionEnd,XW(t,e,n,r)},cv={current:null},W2={current:!1};function ZW(){if(W2.current=!0,!!Wm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cv.current=t.matches;t.addListener(e),e()}else cv.current=!1}function eq(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(vr(s))t.addValue(i,s),zp(r)&&r.add(i);else if(vr(o))t.addValue(i,yu(s,{owner:t})),zp(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,yu(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const dS=new WeakMap,q2=Object.keys(Cd),tq=q2.length,hS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],nq=zx.length;class rq{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>bt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Gm(n),this.isVariantNode=PN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const p=c[h];a[h]!==void 0&&vr(p)&&(p.set(a[h],!1),zp(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,dS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),W2.current||ZW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dS.delete(this.current),this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=qa.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&bt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<tq;l++){const u=q2[l],{isEnabled:c,Feature:h,ProjectionNode:p,MeasureLayout:m}=Cd[u];p&&(o=p),c(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:h,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||h&&Il(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hS.length;r++){const i=hS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=eq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<nq;r++){const i=zx[r],s=this.props[i];(Pd(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yu(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Yx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new o_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class G2 extends rq{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=x$(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){v$(this,r,o);const a=JW(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function iq(t){return window.getComputedStyle(t)}class sq extends G2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(qa.has(n)){const r=t_(n);return r&&r.default||0}else{const r=iq(e),i=(DN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return D2(e,n)}build(e,n,r,i){qx(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Qx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){FN(e,n,r,i)}}class oq extends G2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(qa.has(n)){const r=t_(n);return r&&r.default||0}return n=UN.has(n)?n:Ux(n),e.getAttribute(n)}measureInstanceViewportBox(){return fn()}scrapeMotionValuesFromProps(e,n){return zN(e,n)}build(e,n,r,i){Hx(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){BN(e,n,r,i)}mount(e){this.isSVGTag=Kx(e.tagName),super.mount(e)}}const aq=(t,e)=>Wx(t)?new oq(e,{enableHardwareAcceleration:!1}):new sq(e,{enableHardwareAcceleration:!0}),lq={layout:{ProjectionNode:z2,MeasureLayout:j2}},uq={...j$,...t9,...UW,...lq},Ue=c6((t,e)=>z6(t,e,uq,aq));function H2(){const t=b.useRef(!1);return Fx(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function cq(){const t=H2(),[e,n]=b.useState(0),r=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>bt.postRender(r),[r]),e]}class dq extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hq({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.createElement(dq,{isPresent:e,childRef:r,sizeRef:i},b.cloneElement(t,{ref:r}))}const ly=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=$N(fq),l=b.useId(),u=b.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const h of a.values())if(!h)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),s?void 0:[n]);return b.useMemo(()=>{a.forEach((c,h)=>a.set(h,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.createElement(hq,{isPresent:n},t)),b.createElement($m.Provider,{value:u},t)};function fq(){return new Map}function pq(t){return b.useEffect(()=>()=>t(),[])}const Qo=t=>t.key||"";function mq(t,e){t.forEach(n=>{const r=Qo(n);e.set(r,n)})}function gq(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const io=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=b.useContext($x).forceRender||cq()[0],l=H2(),u=gq(t);let c=u;const h=b.useRef(new Map).current,p=b.useRef(c),m=b.useRef(new Map).current,y=b.useRef(!0);if(Fx(()=>{y.current=!1,mq(u,m),p.current=c}),pq(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return b.createElement(b.Fragment,null,c.map(x=>b.createElement(ly,{key:Qo(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));c=[...c];const v=p.current.map(Qo),I=u.map(Qo),_=v.length;for(let x=0;x<_;x++){const E=v[x];I.indexOf(E)===-1&&!h.has(E)&&h.set(E,void 0)}return o==="wait"&&h.size&&(c=[]),h.forEach((x,E)=>{if(I.indexOf(E)!==-1)return;const V=m.get(E);if(!V)return;const L=v.indexOf(E);let j=x;if(!j){const S=()=>{h.delete(E);const T=Array.from(m.keys()).filter(k=>!I.includes(k));if(T.forEach(k=>m.delete(k)),p.current=u.filter(k=>{const C=Qo(k);return C===E||T.includes(C)}),!h.size){if(l.current===!1)return;a(),r&&r()}};j=b.createElement(ly,{key:Qo(V),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},V),h.set(E,j)}c.splice(L,0,j)}),c=c.map(x=>{const E=x.key;return h.has(E)?x:b.createElement(ly,{key:Qo(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),b.createElement(b.Fragment,null,h.size?c:c.map(x=>b.cloneElement(x)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ce=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>b.createElement("svg",{ref:c,...yq,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${vq(t)}`,a].join(" "),...u},[...e.map(([h,p])=>b.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=Ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=Ce("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Ce("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ce("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=Ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=Ce("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Ce("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=Ce("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=Ce("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=Ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=Ce("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Ce("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=Ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=Ce("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=Ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=Ce("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=Ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=Ce("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Uq={},yS=t=>{let e;const n=new Set,r=(c,h)=>{const p=typeof c=="function"?c(e):c;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Uq?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},Bq=t=>t?yS(t):yS;var eD={exports:{}},tD={},nD={exports:{}},rD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu=b;function zq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $q=typeof Object.is=="function"?Object.is:zq,Wq=xu.useState,qq=xu.useEffect,Gq=xu.useLayoutEffect,Hq=xu.useDebugValue;function Kq(t,e){var n=e(),r=Wq({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Gq(function(){i.value=n,i.getSnapshot=e,cy(i)&&s({inst:i})},[t,n,e]),qq(function(){return cy(i)&&s({inst:i}),t(function(){cy(i)&&s({inst:i})})},[t]),Hq(n),n}function cy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$q(t,n)}catch{return!0}}function Qq(t,e){return e()}var Yq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qq:Kq;rD.useSyncExternalStore=xu.useSyncExternalStore!==void 0?xu.useSyncExternalStore:Yq;nD.exports=rD;var Xq=nD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=b,Jq=Xq;function Zq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var e8=typeof Object.is=="function"?Object.is:Zq,t8=Jq.useSyncExternalStore,n8=Ym.useRef,r8=Ym.useEffect,i8=Ym.useMemo,s8=Ym.useDebugValue;tD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=n8(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=i8(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&o.hasValue){var y=o.value;if(i(y,m))return h=y}return h=m}if(y=h,e8(c,m))return y;var v=r(m);return i!==void 0&&i(y,v)?(c=m,y):(c=m,h=v)}var u=!1,c,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=t8(t,s[0],s[1]);return r8(function(){o.hasValue=!0,o.value=a},[a]),s8(a),a};eD.exports=tD;var o8=eD.exports;const a8=Jp(o8),iD={},{useDebugValue:l8}=jd,{useSyncExternalStoreWithSelector:u8}=a8;let vS=!1;const c8=t=>t;function d8(t,e=c8,n){(iD?"production":void 0)!=="production"&&n&&!vS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vS=!0);const r=u8(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return l8(r),r}const wS=t=>{(iD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Bq(t):t,n=(r,i)=>d8(e,r,i);return Object.assign(n,e),n},Ha=t=>t?wS(t):wS,h8={};function f8(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Nd=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Nd(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Nd(r)(n)}}}},p8=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:I=>I,version:0,merge:(I,_)=>({..._,...I}),...e},o=!1;const a=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...I)},r,i);const c=Nd(s.serialize),h=()=>{const I=s.partialize({...r()});let _;const x=c({state:I,version:s.version}).then(E=>u.setItem(s.name,E)).catch(E=>{_=E});if(_)throw _;return x},p=i.setState;i.setState=(I,_)=>{p(I,_),h()};const m=t((...I)=>{n(...I),h()},r,i);let y;const v=()=>{var I;if(!u)return;o=!1,a.forEach(x=>x(r()));const _=((I=s.onRehydrateStorage)==null?void 0:I.call(s,r()))||void 0;return Nd(u.getItem.bind(u))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var E;return y=s.merge(x,(E=r())!=null?E:m),n(y,!0),h()}).then(()=>{_==null||_(y,void 0),o=!0,l.forEach(x=>x(y))}).catch(x=>{_==null||_(void 0,x)})};return i.persist={setOptions:I=>{s={...s,...I},I.getStorage&&(u=I.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:I=>(a.add(I),()=>{a.delete(I)}),onFinishHydration:I=>(l.add(I),()=>{l.delete(I)})},v(),y||m},m8=(t,e)=>(n,r,i)=>{let s={storage:f8(()=>localStorage),partialize:v=>v,version:0,merge:(v,I)=>({...I,...v}),...e},o=!1;const a=new Set,l=new Set;let u=s.storage;if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const c=()=>{const v=s.partialize({...r()});return u.setItem(s.name,{state:v,version:s.version})},h=i.setState;i.setState=(v,I)=>{h(v,I),c()};const p=t((...v)=>{n(...v),c()},r,i);i.getInitialState=()=>p;let m;const y=()=>{var v,I;if(!u)return;o=!1,a.forEach(x=>{var E;return x((E=r())!=null?E:p)});const _=((I=s.onRehydrateStorage)==null?void 0:I.call(s,(v=r())!=null?v:p))||void 0;return Nd(u.getItem.bind(u))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var E;const[V,L]=x;if(m=s.merge(L,(E=r())!=null?E:p),n(m,!0),V)return c()}).then(()=>{_==null||_(m,void 0),m=r(),o=!0,l.forEach(x=>x(m))}).catch(x=>{_==null||_(void 0,x)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||y(),m||p},g8=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((h8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),p8(t,e)):m8(t,e),y8=g8;Ha(y8(t=>({user:null,loading:!0,setUser:e=>t({user:e,loading:!1}),setLoading:e=>t({loading:e}),logout:()=>t({user:null})}),{name:"auth-storage",partialize:t=>({user:t.user})}));Ha((t,e)=>({workouts:[],currentWorkout:null,loading:!1,setWorkouts:n=>t({workouts:n}),setCurrentWorkout:n=>t({currentWorkout:n}),setLoading:n=>t({loading:n}),addWorkout:n=>t(r=>({workouts:[...r.workouts,n]})),updateWorkout:(n,r)=>t(i=>({workouts:i.workouts.map(s=>s.id===n?{...s,...r}:s)})),deleteWorkout:n=>t(r=>({workouts:r.workouts.filter(i=>i.id!==n)}))}));Ha(t=>({groups:[],currentGroup:null,members:[],loading:!1,setGroups:e=>t({groups:e}),setCurrentGroup:e=>t({currentGroup:e}),setMembers:e=>t({members:e}),setLoading:e=>t({loading:e}),addGroup:e=>t(n=>({groups:[...n.groups,e]})),updateGroup:(e,n)=>t(r=>({groups:r.groups.map(i=>i.id===e?{...i,...n}:i)}))}));Ha(t=>({goals:[],loading:!1,setGoals:e=>t({goals:e}),setLoading:e=>t({loading:e}),addGoal:e=>t(n=>({goals:[...n.goals,e]})),updateGoal:(e,n)=>t(r=>({goals:r.goals.map(i=>i.id===e?{...i,...n}:i)})),deleteGoal:e=>t(n=>({goals:n.goals.filter(r=>r.id!==e)}))}));Ha(t=>({selectedDate:new Date,viewMode:"month",scheduledWorkouts:[],vacations:[],missedDays:[],setSelectedDate:e=>t({selectedDate:e}),setViewMode:e=>t({viewMode:e}),setScheduledWorkouts:e=>t({scheduledWorkouts:e}),setVacations:e=>t({vacations:e}),setMissedDays:e=>t({missedDays:e}),addVacation:e=>t(n=>({vacations:[...n.vacations,e]})),addMissedDay:e=>t(n=>({missedDays:[...n.missedDays,e]}))}));const sD=Ha(t=>({sidebarOpen:!0,chatOpen:!1,activeModal:null,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),toggleChat:()=>t(e=>({chatOpen:!e.chatOpen})),setChatOpen:e=>t({chatOpen:e}),setActiveModal:e=>t({activeModal:e}),closeModal:()=>t({activeModal:null})}));Ha(t=>({usage:[],totalTokens:0,loading:!1,filters:{userId:null,startDate:null,endDate:null},setUsage:e=>t({usage:e}),setTotalTokens:e=>t({totalTokens:e}),setLoading:e=>t({loading:e}),setFilters:e=>t(n=>({filters:{...n.filters,...e}})),resetFilters:()=>t({filters:{userId:null,startDate:null,endDate:null}})}));function v8(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const w8=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,x8=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_8={};function xS(t,e){return(_8.jsx?x8:w8).test(t)}const E8=/[ \t\n\f\r]/g;function T8(t){return typeof t=="object"?t.type==="text"?_S(t.value):!1:_S(t)}function _S(t){return t.replace(E8,"")===""}class dh{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}dh.prototype.normal={};dh.prototype.property={};dh.prototype.space=void 0;function oD(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new dh(n,r,e)}function hv(t){return t.toLowerCase()}class wr{constructor(e,n){this.attribute=n,this.property=e}}wr.prototype.attribute="";wr.prototype.booleanish=!1;wr.prototype.boolean=!1;wr.prototype.commaOrSpaceSeparated=!1;wr.prototype.commaSeparated=!1;wr.prototype.defined=!1;wr.prototype.mustUseProperty=!1;wr.prototype.number=!1;wr.prototype.overloadedBoolean=!1;wr.prototype.property="";wr.prototype.spaceSeparated=!1;wr.prototype.space=void 0;let I8=0;const ze=Ka(),pn=Ka(),fv=Ka(),ee=Ka(),Tt=Ka(),zl=Ka(),Er=Ka();function Ka(){return 2**++I8}const pv=Object.freeze(Object.defineProperty({__proto__:null,boolean:ze,booleanish:pn,commaOrSpaceSeparated:Er,commaSeparated:zl,number:ee,overloadedBoolean:fv,spaceSeparated:Tt},Symbol.toStringTag,{value:"Module"})),dy=Object.keys(pv);class l_ extends wr{constructor(e,n,r,i){let s=-1;if(super(e,n),ES(this,"space",i),typeof r=="number")for(;++s<dy.length;){const o=dy[s];ES(this,dy[s],(r&pv[o])===pv[o])}}}l_.prototype.defined=!0;function ES(t,e,n){n&&(t[e]=n)}function Bu(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new l_(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[hv(r)]=r,n[hv(s.attribute)]=r}return new dh(e,n,t.space)}const aD=Bu({properties:{ariaActiveDescendant:null,ariaAtomic:pn,ariaAutoComplete:null,ariaBusy:pn,ariaChecked:pn,ariaColCount:ee,ariaColIndex:ee,ariaColSpan:ee,ariaControls:Tt,ariaCurrent:null,ariaDescribedBy:Tt,ariaDetails:null,ariaDisabled:pn,ariaDropEffect:Tt,ariaErrorMessage:null,ariaExpanded:pn,ariaFlowTo:Tt,ariaGrabbed:pn,ariaHasPopup:null,ariaHidden:pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Tt,ariaLevel:ee,ariaLive:null,ariaModal:pn,ariaMultiLine:pn,ariaMultiSelectable:pn,ariaOrientation:null,ariaOwns:Tt,ariaPlaceholder:null,ariaPosInSet:ee,ariaPressed:pn,ariaReadOnly:pn,ariaRelevant:null,ariaRequired:pn,ariaRoleDescription:Tt,ariaRowCount:ee,ariaRowIndex:ee,ariaRowSpan:ee,ariaSelected:pn,ariaSetSize:ee,ariaSort:null,ariaValueMax:ee,ariaValueMin:ee,ariaValueNow:ee,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function lD(t,e){return e in t?t[e]:e}function uD(t,e){return lD(t,e.toLowerCase())}const S8=Bu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:zl,acceptCharset:Tt,accessKey:Tt,action:null,allow:null,allowFullScreen:ze,allowPaymentRequest:ze,allowUserMedia:ze,alt:null,as:null,async:ze,autoCapitalize:null,autoComplete:Tt,autoFocus:ze,autoPlay:ze,blocking:Tt,capture:null,charSet:null,checked:ze,cite:null,className:Tt,cols:ee,colSpan:null,content:null,contentEditable:pn,controls:ze,controlsList:Tt,coords:ee|zl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ze,defer:ze,dir:null,dirName:null,disabled:ze,download:fv,draggable:pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ze,formTarget:null,headers:Tt,height:ee,hidden:fv,high:ee,href:null,hrefLang:null,htmlFor:Tt,httpEquiv:Tt,id:null,imageSizes:null,imageSrcSet:null,inert:ze,inputMode:null,integrity:null,is:null,isMap:ze,itemId:null,itemProp:Tt,itemRef:Tt,itemScope:ze,itemType:Tt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ze,low:ee,manifest:null,max:null,maxLength:ee,media:null,method:null,min:null,minLength:ee,multiple:ze,muted:ze,name:null,nonce:null,noModule:ze,noValidate:ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ze,optimum:ee,pattern:null,ping:Tt,placeholder:null,playsInline:ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ze,referrerPolicy:null,rel:Tt,required:ze,reversed:ze,rows:ee,rowSpan:ee,sandbox:Tt,scope:null,scoped:ze,seamless:ze,selected:ze,shadowRootClonable:ze,shadowRootDelegatesFocus:ze,shadowRootMode:null,shape:null,size:ee,sizes:null,slot:null,span:ee,spellCheck:pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ee,step:null,style:null,tabIndex:ee,target:null,title:null,translate:null,type:null,typeMustMatch:ze,useMap:null,value:pn,width:ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Tt,axis:null,background:null,bgColor:null,border:ee,borderColor:null,bottomMargin:ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ze,declare:ze,event:null,face:null,frame:null,frameBorder:null,hSpace:ee,leftMargin:ee,link:null,longDesc:null,lowSrc:null,marginHeight:ee,marginWidth:ee,noResize:ze,noHref:ze,noShade:ze,noWrap:ze,object:null,profile:null,prompt:null,rev:null,rightMargin:ee,rules:null,scheme:null,scrolling:pn,standby:null,summary:null,text:null,topMargin:ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ze,disableRemotePlayback:ze,prefix:null,property:null,results:ee,security:null,unselectable:null},space:"html",transform:uD}),b8=Bu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Er,accentHeight:ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ee,amplitude:ee,arabicForm:null,ascent:ee,attributeName:null,attributeType:null,azimuth:ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ee,by:null,calcMode:null,capHeight:ee,className:Tt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ee,diffuseConstant:ee,direction:null,display:null,dur:null,divisor:ee,dominantBaseline:null,download:ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:ee,enableBackground:null,end:null,event:null,exponent:ee,externalResourcesRequired:null,fill:null,fillOpacity:ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:zl,g2:zl,glyphName:zl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ee,horizOriginX:ee,horizOriginY:ee,id:null,ideographic:ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ee,k:ee,k1:ee,k2:ee,k3:ee,k4:ee,kernelMatrix:Er,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ee,overlineThickness:ee,paintOrder:null,panose1:null,path:null,pathLength:ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Tt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ee,pointsAtY:ee,pointsAtZ:ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Er,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Er,rev:Er,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Er,requiredFeatures:Er,requiredFonts:Er,requiredFormats:Er,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ee,specularExponent:ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ee,strikethroughThickness:ee,string:null,stroke:null,strokeDashArray:Er,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ee,strokeOpacity:ee,strokeWidth:null,style:null,surfaceScale:ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Er,tabIndex:ee,tableValues:null,target:null,targetX:ee,targetY:ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Er,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ee,underlineThickness:ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ee,values:null,vAlphabetic:ee,vMathematical:ee,vectorEffect:null,vHanging:ee,vIdeographic:ee,version:null,vertAdvY:ee,vertOriginX:ee,vertOriginY:ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:lD}),cD=Bu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),dD=Bu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:uD}),hD=Bu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),k8={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},A8=/[A-Z]/g,TS=/-[a-z]/g,P8=/^data[-\w.:]+$/i;function C8(t,e){const n=hv(e);let r=e,i=wr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&P8.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(TS,N8);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!TS.test(s)){let o=s.replace(A8,R8);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=l_}return new i(r,e)}function R8(t){return"-"+t.toLowerCase()}function N8(t){return t.charAt(1).toUpperCase()}const D8=oD([aD,S8,cD,dD,hD],"html"),u_=oD([aD,b8,cD,dD,hD],"svg");function V8(t){return t.join(" ").trim()}var c_={},IS=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,j8=/\n/g,O8=/^\s*/,M8=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,L8=/^:\s*/,F8=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,U8=/^[;\s]*/,B8=/^\s+|\s+$/g,z8=`
`,SS="/",bS="*",na="",$8="comment",W8="declaration";function q8(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(y){var v=y.match(j8);v&&(n+=v.length);var I=y.lastIndexOf(z8);r=~I?y.length-I:r+y.length}function s(){var y={line:n,column:r};return function(v){return v.position=new o(y),u(),v}}function o(y){this.start=y,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(y){var v=new Error(e.source+":"+n+":"+r+": "+y);if(v.reason=y,v.filename=e.source,v.line=n,v.column=r,v.source=t,!e.silent)throw v}function l(y){var v=y.exec(t);if(v){var I=v[0];return i(I),t=t.slice(I.length),v}}function u(){l(O8)}function c(y){var v;for(y=y||[];v=h();)v!==!1&&y.push(v);return y}function h(){var y=s();if(!(SS!=t.charAt(0)||bS!=t.charAt(1))){for(var v=2;na!=t.charAt(v)&&(bS!=t.charAt(v)||SS!=t.charAt(v+1));)++v;if(v+=2,na===t.charAt(v-1))return a("End of comment missing");var I=t.slice(2,v-2);return r+=2,i(I),t=t.slice(v),r+=2,y({type:$8,comment:I})}}function p(){var y=s(),v=l(M8);if(v){if(h(),!l(L8))return a("property missing ':'");var I=l(F8),_=y({type:W8,property:kS(v[0].replace(IS,na)),value:I?kS(I[0].replace(IS,na)):na});return l(U8),_}}function m(){var y=[];c(y);for(var v;v=p();)v!==!1&&(y.push(v),c(y));return y}return u(),m()}function kS(t){return t?t.replace(B8,na):na}var G8=q8,H8=zf&&zf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(c_,"__esModule",{value:!0});c_.default=Q8;const K8=H8(G8);function Q8(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,K8.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.camelCase=void 0;var Y8=/^--[a-zA-Z0-9_-]+$/,X8=/-([a-z])/g,J8=/^[^-]+$/,Z8=/^-(webkit|moz|ms|o|khtml)-/,e7=/^-(ms)-/,t7=function(t){return!t||J8.test(t)||Y8.test(t)},n7=function(t,e){return e.toUpperCase()},AS=function(t,e){return"".concat(e,"-")},r7=function(t,e){return e===void 0&&(e={}),t7(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(e7,AS):t=t.replace(Z8,AS),t.replace(X8,n7))};Xm.camelCase=r7;var i7=zf&&zf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s7=i7(c_),o7=Xm;function mv(t,e){var n={};return!t||typeof t!="string"||(0,s7.default)(t,function(r,i){r&&i&&(n[(0,o7.camelCase)(r,e)]=i)}),n}mv.default=mv;var a7=mv;const l7=Jp(a7),fD=pD("end"),d_=pD("start");function pD(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function u7(t){const e=d_(t),n=fD(t);if(e&&n)return{start:e,end:n}}function Hc(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?PS(t.position):"start"in t||"end"in t?PS(t):"line"in t||"column"in t?gv(t):""}function gv(t){return CS(t&&t.line)+":"+CS(t&&t.column)}function PS(t){return gv(t&&t.start)+"-"+gv(t&&t.end)}function CS(t){return t&&typeof t=="number"?t:1}class Yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Hc(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Yn.prototype.file="";Yn.prototype.name="";Yn.prototype.reason="";Yn.prototype.message="";Yn.prototype.stack="";Yn.prototype.column=void 0;Yn.prototype.line=void 0;Yn.prototype.ancestors=void 0;Yn.prototype.cause=void 0;Yn.prototype.fatal=void 0;Yn.prototype.place=void 0;Yn.prototype.ruleId=void 0;Yn.prototype.source=void 0;const h_={}.hasOwnProperty,c7=new Map,d7=/[A-Z]/g,h7=new Set(["table","tbody","thead","tfoot","tr"]),f7=new Set(["td","th"]),mD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function p7(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=E7(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=_7(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?u_:D8,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=gD(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function gD(t,e,n){if(e.type==="element")return m7(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return g7(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return v7(t,e,n);if(e.type==="mdxjsEsm")return y7(t,e);if(e.type==="root")return w7(t,e,n);if(e.type==="text")return x7(t,e)}function m7(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=u_,t.schema=i),t.ancestors.push(e);const s=vD(t,e.tagName,!1),o=T7(t,e);let a=p_(t,e);return h7.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!T8(l):!0})),yD(t,o,s,e),f_(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function g7(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Dd(t,e.position)}function y7(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Dd(t,e.position)}function v7(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=u_,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:vD(t,e.name,!0),o=I7(t,e),a=p_(t,e);return yD(t,o,s,e),f_(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function w7(t,e,n){const r={};return f_(r,p_(t,e)),t.create(e,t.Fragment,r,n)}function x7(t,e){return e.value}function yD(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function f_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function _7(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function E7(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=d_(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function T7(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&h_.call(e.properties,i)){const s=S7(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&f7.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function I7(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Dd(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Dd(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function p_(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:c7;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=gD(t,s,o);a!==void 0&&n.push(a)}return n}function S7(t,e,n){const r=C8(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?v8(n):V8(n)),r.property==="style"){let i=typeof n=="object"?n:b7(t,String(n));return t.stylePropertyNameCase==="css"&&(i=k7(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?k8[r.property]||r.property:r.attribute,n]}}function b7(t,e){try{return l7(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=mD+"#cannot-parse-style-attribute",i}}function vD(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=xS(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=xS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return h_.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Dd(t)}function Dd(t,e){const n=new Yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=mD+"#cannot-handle-mdx-estrees-without-createevaluater",n}function k7(t){const e={};let n;for(n in t)h_.call(t,n)&&(e[A7(n)]=t[n]);return e}function A7(t){let e=t.replace(d7,P7);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function P7(t){return"-"+t.toLowerCase()}const hy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},C7={};function R7(t,e){const n=C7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return wD(t,r,i)}function wD(t,e,n){if(N7(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return RS(t.children,e,n)}return Array.isArray(t)?RS(t,e,n):""}function RS(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=wD(t[i],e,n);return r.join("")}function N7(t){return!!(t&&typeof t=="object")}const NS=document.createElement("i");function m_(t){const e="&"+t+";";NS.innerHTML=e;const n=NS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ri(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function zr(t,e){return t.length>0?(Ri(t,t.length,0,e),t):e}const DS={}.hasOwnProperty;function D7(t){const e={};let n=-1;for(;++n<t.length;)V7(e,t[n]);return e}function V7(t,e){let n;for(n in e){const i=(DS.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){DS.call(i,o)||(i[o]=[]);const a=s[o];j7(i[o],Array.isArray(a)?a:a?[a]:[])}}}function j7(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ri(t,0,0,r)}function xD(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function $l(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const wi=Do(/[A-Za-z]/),br=Do(/[\dA-Za-z]/),O7=Do(/[#-'*+\--9=?A-Z^-~]/);function yv(t){return t!==null&&(t<32||t===127)}const vv=Do(/\d/),M7=Do(/[\dA-Fa-f]/),L7=Do(/[!-/:-@[-`{-~]/);function je(t){return t!==null&&t<-2}function yr(t){return t!==null&&(t<0||t===32)}function at(t){return t===-2||t===-1||t===32}const F7=Do(new RegExp("\\p{P}|\\p{S}","u")),U7=Do(/\s/);function Do(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function zu(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&br(t.charCodeAt(n+1))&&br(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function St(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return at(l)?(t.enter(n),a(l)):e(l)}function a(l){return at(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const B7={tokenize:z7};function z7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),St(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return je(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const $7={tokenize:W7},VS={tokenize:q7};function W7(t){const e=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const V=n[r];return e.containerState=V[1],t.attempt(V[0].continuation,l,u)(E)}return u(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const V=e.events.length;let L=V,j;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){j=e.events[L][1].end;break}_(r);let S=V;for(;S<e.events.length;)e.events[S][1].end={...j},S++;return Ri(e.events,L+1,0,e.events.slice(V)),e.events.length=S,u(E)}return a(E)}function u(E){if(r===n.length){if(!i)return p(E);if(i.currentConstruct&&i.currentConstruct.concrete)return y(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(VS,c,h)(E)}function c(E){return i&&x(),_(r),p(E)}function h(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,y(E)}function p(E){return e.containerState={},t.attempt(VS,m,y)(E)}function m(E){return r++,n.push([e.currentConstruct,e.containerState]),p(E)}function y(E){if(E===null){i&&x(),_(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(E)}function v(E){if(E===null){I(t.exit("chunkFlow"),!0),_(0),t.consume(E);return}return je(E)?(t.consume(E),I(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),v)}function I(E,V){const L=e.sliceStream(E);if(V&&L.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(L),e.parser.lazy[E.start.line]){let j=i.events.length;for(;j--;)if(i.events[j][1].start.offset<o&&(!i.events[j][1].end||i.events[j][1].end.offset>o))return;const S=e.events.length;let T=S,k,C;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(k){C=e.events[T][1].end;break}k=!0}for(_(r),j=S;j<e.events.length;)e.events[j][1].end={...C},j++;Ri(e.events,T+1,0,e.events.slice(S)),e.events.length=j}}function _(E){let V=n.length;for(;V-- >E;){const L=n[V];e.containerState=L[1],L[0].exit.call(e,t)}n.length=E}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function q7(t,e,n){return St(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function jS(t){if(t===null||yr(t)||U7(t))return 1;if(F7(t))return 2}function g_(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const wv={name:"attention",resolveAll:G7,tokenize:H7};function G7(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},p={...t[n][1].start};OS(h,-l),OS(p,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=zr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=zr(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=zr(u,g_(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=zr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=zr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Ri(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function H7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=jS(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=jS(l),h=!c||c===2&&i||n.includes(l),p=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!p)),u._close=!!(s===42?p:p&&(c||!h)),e(l)}}function OS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const K7={name:"autolink",tokenize:Q7};function Q7(t,e,n){let r=0;return i;function i(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return wi(m)?(t.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||br(m)?(r=1,a(m)):u(m)}function a(m){return m===58?(t.consume(m),r=0,l):(m===43||m===45||m===46||br(m))&&r++<32?(t.consume(m),a):(r=0,u(m))}function l(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||yv(m)?n(m):(t.consume(m),l)}function u(m){return m===64?(t.consume(m),c):O7(m)?(t.consume(m),u):n(m)}function c(m){return br(m)?h(m):n(m)}function h(m){return m===46?(t.consume(m),r=0,c):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||br(m))&&r++<63){const y=m===45?p:h;return t.consume(m),y}return n(m)}}const Jm={partial:!0,tokenize:Y7};function Y7(t,e,n){return r;function r(s){return at(s)?St(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||je(s)?e(s):n(s)}}const _D={continuation:{tokenize:J7},exit:Z7,name:"blockQuote",tokenize:X7};function X7(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return at(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function J7(t,e,n){const r=this;return i;function i(o){return at(o)?St(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(_D,e,n)(o)}}function Z7(t){t.exit("blockQuote")}const ED={name:"characterEscape",tokenize:eG};function eG(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return L7(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const TD={name:"characterReference",tokenize:tG};function tG(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=br,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=M7,c):(t.enter("characterReferenceValue"),s=7,o=vv,c(h))}function c(h){if(h===59&&i){const p=t.exit("characterReferenceValue");return o===br&&!m_(r.sliceSerialize(p))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),c):n(h)}}const MS={partial:!0,tokenize:rG},LS={concrete:!0,name:"codeFenced",tokenize:nG};function nG(t,e,n){const r=this,i={partial:!0,tokenize:L};let s=0,o=0,a;return l;function l(j){return u(j)}function u(j){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(j)}function c(j){return j===a?(o++,t.consume(j),c):o<3?n(j):(t.exit("codeFencedFenceSequence"),at(j)?St(t,h,"whitespace")(j):h(j))}function h(j){return j===null||je(j)?(t.exit("codeFencedFence"),r.interrupt?e(j):t.check(MS,v,V)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(j))}function p(j){return j===null||je(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(j)):at(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),St(t,m,"whitespace")(j)):j===96&&j===a?n(j):(t.consume(j),p)}function m(j){return j===null||je(j)?h(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(j))}function y(j){return j===null||je(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(j)):j===96&&j===a?n(j):(t.consume(j),y)}function v(j){return t.attempt(i,V,I)(j)}function I(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),_}function _(j){return s>0&&at(j)?St(t,x,"linePrefix",s+1)(j):x(j)}function x(j){return j===null||je(j)?t.check(MS,v,V)(j):(t.enter("codeFlowValue"),E(j))}function E(j){return j===null||je(j)?(t.exit("codeFlowValue"),x(j)):(t.consume(j),E)}function V(j){return t.exit("codeFenced"),e(j)}function L(j,S,T){let k=0;return C;function C(ge){return j.enter("lineEnding"),j.consume(ge),j.exit("lineEnding"),P}function P(ge){return j.enter("codeFencedFence"),at(ge)?St(j,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ge):N(ge)}function N(ge){return ge===a?(j.enter("codeFencedFenceSequence"),R(ge)):T(ge)}function R(ge){return ge===a?(k++,j.consume(ge),R):k>=o?(j.exit("codeFencedFenceSequence"),at(ge)?St(j,H,"whitespace")(ge):H(ge)):T(ge)}function H(ge){return ge===null||je(ge)?(j.exit("codeFencedFence"),S(ge)):T(ge)}}}function rG(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const fy={name:"codeIndented",tokenize:sG},iG={partial:!0,tokenize:oG};function sG(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),St(t,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):je(u)?t.attempt(iG,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||je(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function oG(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):St(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):je(o)?i(o):n(o)}}const aG={name:"codeText",previous:uG,resolve:lG,tokenize:cG};function lG(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function uG(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cG(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,c(h)):je(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||je(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class dG{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&dc(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),dc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),dc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);dc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);dc(this.left,n.reverse())}}}function dc(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function ID(t){const e={};let n=-1,r,i,s,o,a,l,u;const c=new dG(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,hG(c,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Ri(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function hG(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,p=-1,m=n,y=0,v=0;const I=[v];for(;m;){for(;t.get(++i)[1]!==m;);s.push(i),m._tokenizer||(c=r.sliceStream(m),m.next||c.push(null),h&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(v=p+1,I.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):I.pop(),p=I.length;p--;){const _=a.slice(I[p],I[p+1]),x=s.pop();l.push([x,x+_.length-1]),t.splice(x,2,_)}for(l.reverse(),p=-1;++p<l.length;)u[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return u}const fG={resolve:mG,tokenize:gG},pG={partial:!0,tokenize:yG};function mG(t){return ID(t),t}function gG(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):je(a)?t.check(pG,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function yG(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),St(t,s,"linePrefix")}function s(o){if(o===null||je(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function SD(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(_){return _===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(_),t.exit(s),p):_===null||_===32||_===41||yv(_)?n(_):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(_))}function p(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===62?(t.exit("chunkString"),t.exit(a),p(_)):_===null||_===60||je(_)?n(_):(t.consume(_),_===92?y:m)}function y(_){return _===60||_===62||_===92?(t.consume(_),m):m(_)}function v(_){return!c&&(_===null||_===41||yr(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(_)):c<u&&_===40?(t.consume(_),c++,v):_===41?(t.consume(_),c--,v):_===null||_===32||_===40||yv(_)?n(_):(t.consume(_),_===92?I:v)}function I(_){return _===40||_===41||_===92?(t.consume(_),v):v(_)}}function bD(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(m){return t.enter(r),t.enter(i),t.consume(m),t.exit(i),t.enter(s),c}function c(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):je(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||je(m)||a++>999?(t.exit("chunkString"),c(m)):(t.consume(m),l||(l=!at(m)),m===92?p:h)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,h):h(m)}}function kD(t,e,n,r,i,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),o=p===40?41:p,l):n(p)}function l(p){return p===o?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(s),u(p))}function u(p){return p===o?(t.exit(s),l(o)):p===null?n(p):je(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),St(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(p))}function c(p){return p===o||p===null||je(p)?(t.exit("chunkString"),u(p)):(t.consume(p),p===92?h:c)}function h(p){return p===o||p===92?(t.consume(p),c):c(p)}}function Kc(t,e){let n;return r;function r(i){return je(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):at(i)?St(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const vG={name:"definition",tokenize:xG},wG={partial:!0,tokenize:_G};function xG(t,e,n){const r=this;let i;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return bD.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=$l(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),l):n(m)}function l(m){return yr(m)?Kc(t,u)(m):u(m)}function u(m){return SD(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function c(m){return t.attempt(wG,h,h)(m)}function h(m){return at(m)?St(t,p,"whitespace")(m):p(m)}function p(m){return m===null||je(m)?(t.exit("definition"),r.parser.defined.push(i),e(m)):n(m)}}function _G(t,e,n){return r;function r(a){return yr(a)?Kc(t,i)(a):n(a)}function i(a){return kD(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return at(a)?St(t,o,"whitespace")(a):o(a)}function o(a){return a===null||je(a)?e(a):n(a)}}const EG={name:"hardBreakEscape",tokenize:TG};function TG(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return je(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const IG={name:"headingAtx",resolve:SG,tokenize:bG};function SG(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ri(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function bG(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||yr(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||je(c)?(t.exit("atxHeading"),e(c)):at(c)?St(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||yr(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const kG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],FS=["pre","script","style","textarea"],AG={concrete:!0,name:"htmlFlow",resolveTo:RG,tokenize:NG},PG={partial:!0,tokenize:VG},CG={partial:!0,tokenize:DG};function RG(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function NG(t,e,n){const r=this;let i,s,o,a,l;return u;function u(O){return c(O)}function c(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),h}function h(O){return O===33?(t.consume(O),p):O===47?(t.consume(O),s=!0,v):O===63?(t.consume(O),i=3,r.interrupt?e:D):wi(O)?(t.consume(O),o=String.fromCharCode(O),I):n(O)}function p(O){return O===45?(t.consume(O),i=2,m):O===91?(t.consume(O),i=5,a=0,y):wi(O)?(t.consume(O),i=4,r.interrupt?e:D):n(O)}function m(O){return O===45?(t.consume(O),r.interrupt?e:D):n(O)}function y(O){const ft="CDATA[";return O===ft.charCodeAt(a++)?(t.consume(O),a===ft.length?r.interrupt?e:N:y):n(O)}function v(O){return wi(O)?(t.consume(O),o=String.fromCharCode(O),I):n(O)}function I(O){if(O===null||O===47||O===62||yr(O)){const ft=O===47,_t=o.toLowerCase();return!ft&&!s&&FS.includes(_t)?(i=1,r.interrupt?e(O):N(O)):kG.includes(o.toLowerCase())?(i=6,ft?(t.consume(O),_):r.interrupt?e(O):N(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):s?x(O):E(O))}return O===45||br(O)?(t.consume(O),o+=String.fromCharCode(O),I):n(O)}function _(O){return O===62?(t.consume(O),r.interrupt?e:N):n(O)}function x(O){return at(O)?(t.consume(O),x):C(O)}function E(O){return O===47?(t.consume(O),C):O===58||O===95||wi(O)?(t.consume(O),V):at(O)?(t.consume(O),E):C(O)}function V(O){return O===45||O===46||O===58||O===95||br(O)?(t.consume(O),V):L(O)}function L(O){return O===61?(t.consume(O),j):at(O)?(t.consume(O),L):E(O)}function j(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),l=O,S):at(O)?(t.consume(O),j):T(O)}function S(O){return O===l?(t.consume(O),l=null,k):O===null||je(O)?n(O):(t.consume(O),S)}function T(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||yr(O)?L(O):(t.consume(O),T)}function k(O){return O===47||O===62||at(O)?E(O):n(O)}function C(O){return O===62?(t.consume(O),P):n(O)}function P(O){return O===null||je(O)?N(O):at(O)?(t.consume(O),P):n(O)}function N(O){return O===45&&i===2?(t.consume(O),be):O===60&&i===1?(t.consume(O),Ae):O===62&&i===4?(t.consume(O),ue):O===63&&i===3?(t.consume(O),D):O===93&&i===5?(t.consume(O),ce):je(O)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(PG,ke,R)(O)):O===null||je(O)?(t.exit("htmlFlowData"),R(O)):(t.consume(O),N)}function R(O){return t.check(CG,H,ke)(O)}function H(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),ge}function ge(O){return O===null||je(O)?R(O):(t.enter("htmlFlowData"),N(O))}function be(O){return O===45?(t.consume(O),D):N(O)}function Ae(O){return O===47?(t.consume(O),o="",X):N(O)}function X(O){if(O===62){const ft=o.toLowerCase();return FS.includes(ft)?(t.consume(O),ue):N(O)}return wi(O)&&o.length<8?(t.consume(O),o+=String.fromCharCode(O),X):N(O)}function ce(O){return O===93?(t.consume(O),D):N(O)}function D(O){return O===62?(t.consume(O),ue):O===45&&i===2?(t.consume(O),D):N(O)}function ue(O){return O===null||je(O)?(t.exit("htmlFlowData"),ke(O)):(t.consume(O),ue)}function ke(O){return t.exit("htmlFlow"),e(O)}}function DG(t,e,n){const r=this;return i;function i(o){return je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function VG(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Jm,e,n)}}const jG={name:"htmlText",tokenize:OG};function OG(t,e,n){const r=this;let i,s,o;return a;function a(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),l}function l(D){return D===33?(t.consume(D),u):D===47?(t.consume(D),L):D===63?(t.consume(D),E):wi(D)?(t.consume(D),T):n(D)}function u(D){return D===45?(t.consume(D),c):D===91?(t.consume(D),s=0,y):wi(D)?(t.consume(D),x):n(D)}function c(D){return D===45?(t.consume(D),m):n(D)}function h(D){return D===null?n(D):D===45?(t.consume(D),p):je(D)?(o=h,Ae(D)):(t.consume(D),h)}function p(D){return D===45?(t.consume(D),m):h(D)}function m(D){return D===62?be(D):D===45?p(D):h(D)}function y(D){const ue="CDATA[";return D===ue.charCodeAt(s++)?(t.consume(D),s===ue.length?v:y):n(D)}function v(D){return D===null?n(D):D===93?(t.consume(D),I):je(D)?(o=v,Ae(D)):(t.consume(D),v)}function I(D){return D===93?(t.consume(D),_):v(D)}function _(D){return D===62?be(D):D===93?(t.consume(D),_):v(D)}function x(D){return D===null||D===62?be(D):je(D)?(o=x,Ae(D)):(t.consume(D),x)}function E(D){return D===null?n(D):D===63?(t.consume(D),V):je(D)?(o=E,Ae(D)):(t.consume(D),E)}function V(D){return D===62?be(D):E(D)}function L(D){return wi(D)?(t.consume(D),j):n(D)}function j(D){return D===45||br(D)?(t.consume(D),j):S(D)}function S(D){return je(D)?(o=S,Ae(D)):at(D)?(t.consume(D),S):be(D)}function T(D){return D===45||br(D)?(t.consume(D),T):D===47||D===62||yr(D)?k(D):n(D)}function k(D){return D===47?(t.consume(D),be):D===58||D===95||wi(D)?(t.consume(D),C):je(D)?(o=k,Ae(D)):at(D)?(t.consume(D),k):be(D)}function C(D){return D===45||D===46||D===58||D===95||br(D)?(t.consume(D),C):P(D)}function P(D){return D===61?(t.consume(D),N):je(D)?(o=P,Ae(D)):at(D)?(t.consume(D),P):k(D)}function N(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),i=D,R):je(D)?(o=N,Ae(D)):at(D)?(t.consume(D),N):(t.consume(D),H)}function R(D){return D===i?(t.consume(D),i=void 0,ge):D===null?n(D):je(D)?(o=R,Ae(D)):(t.consume(D),R)}function H(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||yr(D)?k(D):(t.consume(D),H)}function ge(D){return D===47||D===62||yr(D)?k(D):n(D)}function be(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function Ae(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),X}function X(D){return at(D)?St(t,ce,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):ce(D)}function ce(D){return t.enter("htmlTextData"),o(D)}}const y_={name:"labelEnd",resolveAll:UG,resolveTo:BG,tokenize:zG},MG={tokenize:$G},LG={tokenize:WG},FG={tokenize:qG};function UG(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Ri(t,0,t.length,n),t}function BG(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=zr(a,t.slice(s+1,s+r+3)),a=zr(a,[["enter",c,e]]),a=zr(a,g_(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=zr(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=zr(a,t.slice(o+1)),a=zr(a,[["exit",l,e]]),Ri(t,s,t.length,a),t}function zG(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(p){return s?s._inactive?h(p):(o=r.parser.defined.includes($l(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(MG,c,o?c:h)(p):p===91?t.attempt(LG,c,o?u:h)(p):o?c(p):h(p)}function u(p){return t.attempt(FG,c,h)(p)}function c(p){return e(p)}function h(p){return s._balanced=!0,n(p)}}function $G(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return yr(h)?Kc(t,s)(h):s(h)}function s(h){return h===41?c(h):SD(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return yr(h)?Kc(t,l)(h):c(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?kD(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return yr(h)?Kc(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function WG(t,e,n){const r=this;return i;function i(a){return bD.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes($l(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function qG(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const GG={name:"labelStartImage",resolveAll:y_.resolveAll,tokenize:HG};function HG(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const KG={name:"labelStartLink",resolveAll:y_.resolveAll,tokenize:QG};function QG(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const py={name:"lineEnding",tokenize:YG};function YG(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),St(t,e,"linePrefix")}}const Of={name:"thematicBreak",tokenize:XG};function XG(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||je(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),at(u)?St(t,a,"whitespace")(u):a(u))}}const ar={continuation:{tokenize:tH},exit:rH,name:"list",tokenize:eH},JG={partial:!0,tokenize:iH},ZG={partial:!0,tokenize:nH};function eH(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:vv(m)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(Of,n,u)(m):u(m);if(!r.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(m)}return n(m)}function l(m){return vv(m)&&++o<10?(t.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),u(m)):n(m)}function u(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,t.check(Jm,r.interrupt?n:c,t.attempt(JG,p,h))}function c(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function h(m){return at(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function tH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Jm,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,St(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!at(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(ZG,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,St(t,t.attempt(ar,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function nH(t,e,n){const r=this;return St(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function rH(t){t.exit(this.containerState.type)}function iH(t,e,n){const r=this;return St(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!at(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const US={name:"setextUnderline",resolveTo:sH,tokenize:oH};function sH(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function oH(t,e,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),at(u)?St(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||je(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const aH={tokenize:lH};function lH(t){const e=this,n=t.attempt(Jm,r,t.attempt(this.parser.constructs.flowInitial,i,St(t,t.attempt(this.parser.constructs.flow,i,t.attempt(fG,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const uH={resolveAll:PD()},cH=AD("string"),dH=AD("text");function AD(t){return{resolveAll:PD(t==="text"?hH:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let p=-1;if(h)for(;++p<h.length;){const m=h[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function PD(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function hH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const fH={42:ar,43:ar,45:ar,48:ar,49:ar,50:ar,51:ar,52:ar,53:ar,54:ar,55:ar,56:ar,57:ar,62:_D},pH={91:vG},mH={[-2]:fy,[-1]:fy,32:fy},gH={35:IG,42:Of,45:[US,Of],60:AG,61:US,95:Of,96:LS,126:LS},yH={38:TD,92:ED},vH={[-5]:py,[-4]:py,[-3]:py,33:GG,38:TD,42:wv,60:[K7,jG],91:KG,92:[EG,ED],93:y_,95:wv,96:aG},wH={null:[wv,uH]},xH={null:[42,95]},_H={null:[]},EH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xH,contentInitial:pH,disable:_H,document:fH,flow:gH,flowInitial:mH,insideSpan:wH,string:yH,text:vH},Symbol.toStringTag,{value:"Module"}));function TH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:S(L),check:S(j),consume:x,enter:E,exit:V,interrupt:S(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(P){return o=zr(o,P),I(),o[o.length-1]!==null?[]:(T(e,0),u.events=g_(s,u.events,u),u.events)}function p(P,N){return SH(m(P),N)}function m(P){return IH(o,P)}function y(){const{_bufferIndex:P,_index:N,line:R,column:H,offset:ge}=r;return{_bufferIndex:P,_index:N,line:R,column:H,offset:ge}}function v(P){i[P.line]=P.column,C()}function I(){let P;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<N.length;)_(N.charCodeAt(r._bufferIndex));else _(N)}}function _(P){c=c(P)}function x(P){je(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,C()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function E(P,N){const R=N||{};return R.type=P,R.start=y(),u.events.push(["enter",R,u]),a.push(R),R}function V(P){const N=a.pop();return N.end=y(),u.events.push(["exit",N,u]),N}function L(P,N){T(P,N.from)}function j(P,N){N.restore()}function S(P,N){return R;function R(H,ge,be){let Ae,X,ce,D;return Array.isArray(H)?ke(H):"tokenize"in H?ke([H]):ue(H);function ue($e){return rt;function rt(On){const en=On!==null&&$e[On],dn=On!==null&&$e.null,tn=[...Array.isArray(en)?en:en?[en]:[],...Array.isArray(dn)?dn:dn?[dn]:[]];return ke(tn)(On)}}function ke($e){return Ae=$e,X=0,$e.length===0?be:O($e[X])}function O($e){return rt;function rt(On){return D=k(),ce=$e,$e.partial||(u.currentConstruct=$e),$e.name&&u.parser.constructs.disable.null.includes($e.name)?_t():$e.tokenize.call(N?Object.assign(Object.create(u),N):u,l,ft,_t)(On)}}function ft($e){return P(ce,D),ge}function _t($e){return D.restore(),++X<Ae.length?O(Ae[X]):be}}}function T(P,N){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&Ri(u.events,N,u.events.length-N,P.resolve(u.events.slice(N),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function k(){const P=y(),N=u.previous,R=u.currentConstruct,H=u.events.length,ge=Array.from(a);return{from:H,restore:be};function be(){r=P,u.previous=N,u.currentConstruct=R,u.events.length=H,a=ge,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function IH(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function SH(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function bH(t){const r={constructs:D7([EH,...(t||{}).extensions||[]]),content:i(B7),defined:[],document:i($7),flow:i(aH),lazy:{},string:i(cH),text:i(dH)};return r;function i(s){return o;function o(a){return TH(r,s,a)}}}function kH(t){for(;!ID(t););return t}const BS=/[\0\t\n\r]/g;function AH(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(BS.lastIndex=h,u=BS.exec(s),p=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(p),!u){e=s.slice(h);break}if(m===10&&h===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<p&&(l.push(s.slice(h,p)),t+=p-h),m){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=p+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const PH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function CH(t){return t.replace(PH,RH)}function RH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return xD(n.slice(s?2:1),s?16:10)}return m_(n)||t}const CD={}.hasOwnProperty;function NH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),DH(n)(kH(bH(n).document().write(AH()(t,e,!0))))}function DH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Hr),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(rr),blockQuote:s(dn),characterEscape:k,characterReference:k,codeFenced:s(tn),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(tn,o),codeText:s(Vr,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(Vi),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(jr),hardBreakEscape:s(li),hardBreakTrailing:s(li),htmlFlow:s(ji,o),htmlFlowData:k,htmlText:s(ji,o),htmlTextData:k,image:s(Vo),label:o,link:s(Hr),listItem:s(Kr),listItemValue:p,listOrdered:s(ui,h),listUnordered:s(ui),paragraph:s(gs),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(rr),strong:s(G),thematicBreak:s(Se)},exit:{atxHeading:l(),atxHeadingSequence:L,autolink:l(),autolinkEmail:en,autolinkProtocol:On,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:_t,characterReferenceMarkerNumeric:_t,characterReferenceValue:$e,characterReference:rt,codeFenced:l(I),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:C,codeIndented:l(_),codeText:l(ge),codeTextData:C,data:C,definition:l(),definitionDestinationString:V,definitionLabelString:x,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(R),htmlFlowData:C,htmlText:l(H),htmlTextData:C,image:l(Ae),label:ce,labelText:X,lineEnding:P,link:l(be),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ft,resourceDestinationString:D,resourceTitleString:ue,resource:ke,setextHeading:l(T),setextHeadingLineSequence:S,setextHeadingText:j,strong:l(),thematicBreak:l()}};RD(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(B){let W={type:"root",children:[]};const J={stack:[W],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},he=[];let pe=-1;for(;++pe<B.length;)if(B[pe][1].type==="listOrdered"||B[pe][1].type==="listUnordered")if(B[pe][0]==="enter")he.push(pe);else{const De=he.pop();pe=i(B,De,pe)}for(pe=-1;++pe<B.length;){const De=e[B[pe][0]];CD.call(De,B[pe][1].type)&&De[B[pe][1].type].call(Object.assign({sliceSerialize:B[pe][2].sliceSerialize},J),B[pe][1])}if(J.tokenStack.length>0){const De=J.tokenStack[J.tokenStack.length-1];(De[1]||zS).call(J,void 0,De[0])}for(W.position={start:Is(B.length>0?B[0][1].start:{line:1,column:1,offset:0}),end:Is(B.length>0?B[B.length-2][1].end:{line:1,column:1,offset:0})},pe=-1;++pe<e.transforms.length;)W=e.transforms[pe](W)||W;return W}function i(B,W,J){let he=W-1,pe=-1,De=!1,Le,qe,ir,sr;for(;++he<=J;){const Et=B[he];switch(Et[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Et[0]==="enter"?pe++:pe--,sr=void 0;break}case"lineEndingBlank":{Et[0]==="enter"&&(Le&&!sr&&!pe&&!ir&&(ir=he),sr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:sr=void 0}if(!pe&&Et[0]==="enter"&&Et[1].type==="listItemPrefix"||pe===-1&&Et[0]==="exit"&&(Et[1].type==="listUnordered"||Et[1].type==="listOrdered")){if(Le){let En=he;for(qe=void 0;En--;){const Mn=B[En];if(Mn[1].type==="lineEnding"||Mn[1].type==="lineEndingBlank"){if(Mn[0]==="exit")continue;qe&&(B[qe][1].type="lineEndingBlank",De=!0),Mn[1].type="lineEnding",qe=En}else if(!(Mn[1].type==="linePrefix"||Mn[1].type==="blockQuotePrefix"||Mn[1].type==="blockQuotePrefixWhitespace"||Mn[1].type==="blockQuoteMarker"||Mn[1].type==="listItemIndent"))break}ir&&(!qe||ir<qe)&&(Le._spread=!0),Le.end=Object.assign({},qe?B[qe][1].start:Et[1].end),B.splice(qe||he,0,["exit",Le,Et[2]]),he++,J++}if(Et[1].type==="listItemPrefix"){const En={type:"listItem",_spread:!1,start:Object.assign({},Et[1].start),end:void 0};Le=En,B.splice(he,0,["enter",En,Et[2]]),he++,J++,ir=void 0,sr=!0}}}return B[W][1]._spread=De,J}function s(B,W){return J;function J(he){a.call(this,B(he),he),W&&W.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(B,W,J){this.stack[this.stack.length-1].children.push(B),this.stack.push(B),this.tokenStack.push([W,J||void 0]),B.position={start:Is(W.start),end:void 0}}function l(B){return W;function W(J){B&&B.call(this,J),u.call(this,J)}}function u(B,W){const J=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==B.type&&(W?W.call(this,B,he[0]):(he[1]||zS).call(this,B,he[0]));else throw new Error("Cannot close `"+B.type+"` ("+Hc({start:B.start,end:B.end})+"): its not open");J.position.end=Is(B.end)}function c(){return R7(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function p(B){if(this.data.expectingFirstListItemValue){const W=this.stack[this.stack.length-2];W.start=Number.parseInt(this.sliceSerialize(B),10),this.data.expectingFirstListItemValue=void 0}}function m(){const B=this.resume(),W=this.stack[this.stack.length-1];W.lang=B}function y(){const B=this.resume(),W=this.stack[this.stack.length-1];W.meta=B}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function I(){const B=this.resume(),W=this.stack[this.stack.length-1];W.value=B.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const B=this.resume(),W=this.stack[this.stack.length-1];W.value=B.replace(/(\r?\n|\r)$/g,"")}function x(B){const W=this.resume(),J=this.stack[this.stack.length-1];J.label=W,J.identifier=$l(this.sliceSerialize(B)).toLowerCase()}function E(){const B=this.resume(),W=this.stack[this.stack.length-1];W.title=B}function V(){const B=this.resume(),W=this.stack[this.stack.length-1];W.url=B}function L(B){const W=this.stack[this.stack.length-1];if(!W.depth){const J=this.sliceSerialize(B).length;W.depth=J}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function S(B){const W=this.stack[this.stack.length-1];W.depth=this.sliceSerialize(B).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function k(B){const J=this.stack[this.stack.length-1].children;let he=J[J.length-1];(!he||he.type!=="text")&&(he=Ie(),he.position={start:Is(B.start),end:void 0},J.push(he)),this.stack.push(he)}function C(B){const W=this.stack.pop();W.value+=this.sliceSerialize(B),W.position.end=Is(B.end)}function P(B){const W=this.stack[this.stack.length-1];if(this.data.atHardBreak){const J=W.children[W.children.length-1];J.position.end=Is(B.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(W.type)&&(k.call(this,B),C.call(this,B))}function N(){this.data.atHardBreak=!0}function R(){const B=this.resume(),W=this.stack[this.stack.length-1];W.value=B}function H(){const B=this.resume(),W=this.stack[this.stack.length-1];W.value=B}function ge(){const B=this.resume(),W=this.stack[this.stack.length-1];W.value=B}function be(){const B=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";B.type+="Reference",B.referenceType=W,delete B.url,delete B.title}else delete B.identifier,delete B.label;this.data.referenceType=void 0}function Ae(){const B=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";B.type+="Reference",B.referenceType=W,delete B.url,delete B.title}else delete B.identifier,delete B.label;this.data.referenceType=void 0}function X(B){const W=this.sliceSerialize(B),J=this.stack[this.stack.length-2];J.label=CH(W),J.identifier=$l(W).toLowerCase()}function ce(){const B=this.stack[this.stack.length-1],W=this.resume(),J=this.stack[this.stack.length-1];if(this.data.inReference=!0,J.type==="link"){const he=B.children;J.children=he}else J.alt=W}function D(){const B=this.resume(),W=this.stack[this.stack.length-1];W.url=B}function ue(){const B=this.resume(),W=this.stack[this.stack.length-1];W.title=B}function ke(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ft(B){const W=this.resume(),J=this.stack[this.stack.length-1];J.label=W,J.identifier=$l(this.sliceSerialize(B)).toLowerCase(),this.data.referenceType="full"}function _t(B){this.data.characterReferenceType=B.type}function $e(B){const W=this.sliceSerialize(B),J=this.data.characterReferenceType;let he;J?(he=xD(W,J==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=m_(W);const pe=this.stack[this.stack.length-1];pe.value+=he}function rt(B){const W=this.stack.pop();W.position.end=Is(B.end)}function On(B){C.call(this,B);const W=this.stack[this.stack.length-1];W.url=this.sliceSerialize(B)}function en(B){C.call(this,B);const W=this.stack[this.stack.length-1];W.url="mailto:"+this.sliceSerialize(B)}function dn(){return{type:"blockquote",children:[]}}function tn(){return{type:"code",lang:null,meta:null,value:""}}function Vr(){return{type:"inlineCode",value:""}}function Vi(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function jr(){return{type:"emphasis",children:[]}}function rr(){return{type:"heading",depth:0,children:[]}}function li(){return{type:"break"}}function ji(){return{type:"html",value:""}}function Vo(){return{type:"image",title:null,url:"",alt:null}}function Hr(){return{type:"link",title:null,url:"",children:[]}}function ui(B){return{type:"list",ordered:B.type==="listOrdered",start:null,spread:B._spread,children:[]}}function Kr(B){return{type:"listItem",spread:B._spread,checked:null,children:[]}}function gs(){return{type:"paragraph",children:[]}}function G(){return{type:"strong",children:[]}}function Ie(){return{type:"text",value:""}}function Se(){return{type:"thematicBreak"}}}function Is(t){return{line:t.line,column:t.column,offset:t.offset}}function RD(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?RD(t,r):VH(t,r)}}function VH(t,e){let n;for(n in e)if(CD.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function zS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Hc({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Hc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Hc({start:e.start,end:e.end})+") is still open")}function jH(t){const e=this;e.parser=n;function n(r){return NH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function OH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function MH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function LH(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function FH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function UH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function BH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=zu(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function zH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function $H(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ND(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function WH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ND(t,e);const i={src:zu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function qH(t,e){const n={src:zu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function GH(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function HH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ND(t,e);const i={href:zu(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function KH(t,e){const n={href:zu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function QH(t,e,n){const r=t.all(e),i=n?YH(n):DD(e),s={},o=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function YH(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=DD(n[r])}return e}function DD(t){const e=t.spread;return e??t.children.length>1}function XH(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function JH(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZH(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function eK(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tK(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=d_(e.children[1]),l=fD(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function nK(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const h=e.children[l],p={},m=o?o[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:s,properties:p,children:[]};h&&(y.children=t.all(h),t.patch(h,y),y=t.applyData(h,y)),u.push(y)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function rK(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const $S=9,WS=32;function iK(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(qS(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(qS(e.slice(i),i>0,!1)),s.join("")}function qS(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===$S||s===WS;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===$S||s===WS;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function sK(t,e){const n={type:"text",value:iK(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function oK(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const aK={blockquote:OH,break:MH,code:LH,delete:FH,emphasis:UH,footnoteReference:BH,heading:zH,html:$H,imageReference:WH,image:qH,inlineCode:GH,linkReference:HH,link:KH,listItem:QH,list:XH,paragraph:JH,root:ZH,strong:eK,table:tK,tableCell:rK,tableRow:nK,text:sK,thematicBreak:oK,toml:Zh,yaml:Zh,definition:Zh,footnoteDefinition:Zh};function Zh(){}const VD=-1,Zm=0,Qc=1,qp=2,v_=3,w_=4,x_=5,__=6,jD=7,OD=8,GS=typeof self=="object"?self:globalThis,lK=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Zm:case VD:return n(o,i);case Qc:{const a=n([],i);for(const l of o)a.push(r(l));return a}case qp:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case v_:return n(new Date(o),i);case w_:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case x_:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case __:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case jD:{const{name:a,message:l}=o;return n(new GS[a](l),i)}case OD:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new GS[s](o),i)};return r},HS=t=>lK(new Map,t)(0),il="",{toString:uK}={},{keys:cK}=Object,hc=t=>{const e=typeof t;if(e!=="object"||!t)return[Zm,e];const n=uK.call(t).slice(8,-1);switch(n){case"Array":return[Qc,il];case"Object":return[qp,il];case"Date":return[v_,il];case"RegExp":return[w_,il];case"Map":return[x_,il];case"Set":return[__,il];case"DataView":return[Qc,n]}return n.includes("Array")?[Qc,n]:n.includes("Error")?[jD,n]:[qp,n]},ef=([t,e])=>t===Zm&&(e==="function"||e==="symbol"),dK=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=hc(o);switch(a){case Zm:{let c=o;switch(l){case"bigint":a=OD,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([VD],o)}return i([a,c],o)}case Qc:{if(l){let p=o;return l==="DataView"?p=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(o)),i([l,[...p]],o)}const c=[],h=i([a,c],o);for(const p of o)c.push(s(p));return h}case qp:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],h=i([a,c],o);for(const p of cK(o))(t||!ef(hc(o[p])))&&c.push([s(p),s(o[p])]);return h}case v_:return i([a,o.toISOString()],o);case w_:{const{source:c,flags:h}=o;return i([a,{source:c,flags:h}],o)}case x_:{const c=[],h=i([a,c],o);for(const[p,m]of o)(t||!(ef(hc(p))||ef(hc(m))))&&c.push([s(p),s(m)]);return h}case __:{const c=[],h=i([a,c],o);for(const p of o)(t||!ef(hc(p)))&&c.push(s(p));return h}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},KS=(t,{json:e,lossy:n}={})=>{const r=[];return dK(!(e||n),!!e,new Map,r)(t),r},Gp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?HS(KS(t,e)):structuredClone(t):(t,e)=>HS(KS(t,e));function hK(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function fK(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function pK(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||hK,r=t.options.footnoteBackLabel||fK,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),h=String(u.identifier).toUpperCase(),p=zu(h.toLowerCase());let m=0;const y=[],v=t.footnoteCounts.get(h);for(;v!==void 0&&++m<=v;){y.length>0&&y.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,m);typeof x=="string"&&(x={type:"text",value:x}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const I=c[c.length-1];if(I&&I.type==="element"&&I.tagName==="p"){const x=I.children[I.children.length-1];x&&x.type==="text"?x.value+=" ":I.children.push({type:"text",value:" "}),I.children.push(...y)}else c.push(...y);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(c,!0)};t.patch(u,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Gp(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const MD=function(t){if(t==null)return vK;if(typeof t=="function")return eg(t);if(typeof t=="object")return Array.isArray(t)?mK(t):gK(t);if(typeof t=="string")return yK(t);throw new Error("Expected function, string, or object as test")};function mK(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=MD(t[n]);return eg(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function gK(t){const e=t;return eg(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function yK(t){return eg(e);function e(n){return n&&n.type===t}}function eg(t){return e;function e(n,r,i){return!!(wK(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function vK(){return!0}function wK(t){return t!==null&&typeof t=="object"&&"type"in t}const LD=[],xK=!0,QS=!1,_K="skip";function EK(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=MD(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=LD,y,v,I;if((!e||s(l,u,c[c.length-1]||void 0))&&(m=TK(n(l,c)),m[0]===QS))return m;if("children"in l&&l.children){const _=l;if(_.children&&m[0]!==_K)for(v=(r?_.children.length:-1)+o,I=c.concat(_);v>-1&&v<_.children.length;){const x=_.children[v];if(y=a(x,v,I)(),y[0]===QS)return y;v=typeof y[1]=="number"?y[1]:v+o}}return m}}}function TK(t){return Array.isArray(t)?t:typeof t=="number"?[xK,t]:t==null?LD:[t]}function FD(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),EK(t,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}const xv={}.hasOwnProperty,IK={};function SK(t,e){const n=e||IK,r=new Map,i=new Map,s=new Map,o={...aK,...n.handlers},a={all:u,applyData:kK,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:bK,wrap:PK};return FD(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,p=String(c.identifier).toUpperCase();h.has(p)||h.set(p,c)}}),a;function l(c,h){const p=c.type,m=a.handlers[p];if(xv.call(a.handlers,p)&&m)return m(a,c,h);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in c){const{children:v,...I}=c,_=Gp(I);return _.children=a.all(c),_}return Gp(c)}return(a.options.unknownHandler||AK)(a,c,h)}function u(c){const h=[];if("children"in c){const p=c.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],c);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=YS(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=YS(v.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function bK(t,e){t.position&&(e.position=u7(t))}function kK(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Gp(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function AK(t,e){const n=e.data||{},r="value"in e&&!(xv.call(n,"hProperties")||xv.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function PK(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function YS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function XS(t,e){const n=SK(t,e),r=n.one(t,void 0),i=pK(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function CK(t,e){return t&&"run"in t?async function(n,r){const i=XS(n,{file:r,...e});await t.run(i,r)}:function(n,r){return XS(n,{file:r,...t||e})}}function JS(t){if(t)throw t}var Mf=Object.prototype.hasOwnProperty,UD=Object.prototype.toString,ZS=Object.defineProperty,eb=Object.getOwnPropertyDescriptor,tb=function(e){return typeof Array.isArray=="function"?Array.isArray(e):UD.call(e)==="[object Array]"},nb=function(e){if(!e||UD.call(e)!=="[object Object]")return!1;var n=Mf.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Mf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Mf.call(e,i)},rb=function(e,n){ZS&&n.name==="__proto__"?ZS(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},ib=function(e,n){if(n==="__proto__")if(Mf.call(e,n)){if(eb)return eb(e,n).value}else return;return e[n]},RK=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=ib(a,n),i=ib(e,n),a!==i&&(c&&i&&(nb(i)||(s=tb(i)))?(s?(s=!1,o=r&&tb(r)?r:[]):o=r&&nb(r)?r:{},rb(a,{name:n,newValue:t(c,o,i)})):typeof i<"u"&&rb(a,{name:n,newValue:i}));return a};const my=Jp(RK);function _v(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function NK(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?DK(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function DK(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const gi={basename:VK,dirname:jK,extname:OK,join:MK,sep:"/"};function VK(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');hh(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function jK(t){if(hh(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function OK(t){hh(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function MK(...t){let e=-1,n;for(;++e<t.length;)hh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":LK(n)}function LK(t){hh(t);const e=t.codePointAt(0)===47;let n=FK(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function FK(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function hh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const UK={cwd:BK};function BK(){return"/"}function Ev(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function zK(t){if(typeof t=="string")t=new URL(t);else if(!Ev(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return $K(t)}function $K(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const gy=["history","path","basename","stem","extname","dirname"];class BD{constructor(e){let n;e?Ev(e)?n={path:e}:typeof e=="string"||WK(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":UK.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<gy.length;){const s=gy[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)gy.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?gi.basename(this.path):void 0}set basename(e){vy(e,"basename"),yy(e,"basename"),this.path=gi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?gi.dirname(this.path):void 0}set dirname(e){sb(this.basename,"dirname"),this.path=gi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?gi.extname(this.path):void 0}set extname(e){if(yy(e,"extname"),sb(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ev(e)&&(e=zK(e)),vy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?gi.basename(this.path,this.extname):void 0}set stem(e){vy(e,"stem"),yy(e,"stem"),this.path=gi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Yn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function yy(t,e){if(t&&t.includes(gi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+gi.sep+"`")}function vy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function sb(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function WK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const qK=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},GK={}.hasOwnProperty;class E_ extends qK{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=NK()}copy(){const e=new E_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(my(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(_y("data",this.frozen),this.namespace[e]=n,this):GK.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_y("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=tf(e),r=this.parser||this.Parser;return wy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),wy("process",this.parser||this.Parser),xy("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=tf(e),l=r.parse(a);r.run(l,a,function(c,h,p){if(c||!h||!p)return u(c);const m=h,y=r.stringify(m,p);QK(y)?p.value=y:p.result=y,u(c,p)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),wy("processSync",this.parser||this.Parser),xy("processSync",this.compiler||this.Compiler),this.process(e,i),ab("processSync","process",n),r;function i(s,o){n=!0,JS(s),r=o}}run(e,n,r){ob(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=tf(n);i.run(e,l,u);function u(c,h,p){const m=h||e;c?a(c):o?o(m):r(void 0,m,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),ab("runSync","run",r),i;function s(o,a){JS(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=tf(n),i=this.compiler||this.Compiler;return xy("stringify",i),ob(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(_y("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=my(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,p=-1;for(;++h<r.length;)if(r[h][0]===u){p=h;break}if(p===-1)r.push([u,...c]);else if(c.length>0){let[m,...y]=c;const v=r[p][1];_v(v)&&_v(m)&&(m=my(!0,v,m)),r[p]=[u,m,...y]}}}}const HK=new E_().freeze();function wy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function xy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function _y(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ob(t){if(!_v(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ab(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function tf(t){return KK(t)?t:new BD(t)}function KK(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function QK(t){return typeof t=="string"||YK(t)}function YK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const XK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",lb=[],ub={allowDangerousHtml:!0},JK=/^(https?|ircs?|mailto|xmpp)$/i,ZK=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function eQ(t){const e=tQ(t),n=nQ(t);return rQ(e.runSync(e.parse(n),n),t)}function tQ(t){const e=t.rehypePlugins||lb,n=t.remarkPlugins||lb,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...ub}:ub;return HK().use(jH).use(n).use(CK,r).use(e)}function nQ(t){const e=t.children||"",n=new BD;return typeof e=="string"&&(n.value=e),n}function rQ(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||iQ;for(const c of ZK)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+XK+c.id,void 0);return FD(t,u),p7(t,{Fragment:f.Fragment,components:i,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function u(c,h,p){if(c.type==="raw"&&p&&typeof h=="number")return o?p.children.splice(h,1):p.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let m;for(m in hy)if(Object.hasOwn(hy,m)&&Object.hasOwn(c.properties,m)){const y=c.properties[m],v=hy[m];(v===null||v.includes(c.tagName))&&(c.properties[m]=l(String(y||""),m,c))}}if(c.type==="element"){let m=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!m&&r&&typeof h=="number"&&(m=!r(c,h,p)),m&&p&&typeof h=="number")return a&&c.children?p.children.splice(h,1,...c.children):p.children.splice(h,1),h}}}function iQ(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||JK.test(t.slice(0,e))?t:""}let nf=null;const wa={setAdminContext(t){nf=t},clearAdminContext(){nf=null},async logAction(t,e,n={}){if(t)try{const r=Object.fromEntries(Object.entries(n).filter(([s,o])=>o!==void 0)),i={userId:t,action:e,metadata:r,timestamp:de(),userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`};nf&&(i.adminUid=nf),await Zt(ne(M,"analytics"),i)}catch(r){console.error("Analytics error:",r)}},async logPageView(t,e,n={}){return this.logAction(t,"page_view",{page:e,...n})},async getActivitySummary(t=7){const e=new Date;e.setDate(e.getDate()-t);const n=we(ne(M,"analytics"),se("timestamp",">=",jt.fromDate(e)),Jt("timestamp","desc")),i=(await _e(n)).docs.map(h=>({id:h.id,...h.data()})),s=new Set(i.map(h=>h.userId)),o={},a={},l={},u={};i.forEach(h=>{var m,y,v,I,_,x,E;o[h.action]=(o[h.action]||0)+1,h.action==="page_view"&&((m=h.metadata)!=null&&m.page)&&(a[h.metadata.page]=(a[h.metadata.page]||0)+1);const p=(v=(y=h.timestamp)==null?void 0:y.toDate)==null?void 0:v.call(y);if(p){const V=p.toISOString().split("T")[0];l[V]||(l[V]=new Set),l[V].add(h.userId)}u[h.userId]||(u[h.userId]={actions:0,lastSeen:null}),u[h.userId].actions++,(!u[h.userId].lastSeen||((_=(I=h.timestamp)==null?void 0:I.toDate)==null?void 0:_.call(I))>u[h.userId].lastSeen)&&(u[h.userId].lastSeen=(E=(x=h.timestamp)==null?void 0:x.toDate)==null?void 0:E.call(x))});const c=Object.entries(l).map(([h,p])=>({date:h,count:p.size})).sort((h,p)=>h.date.localeCompare(p.date));return{totalEvents:i.length,uniqueUsers:s.size,actionCounts:o,pageCounts:a,dailyActiveCounts:c,userActivity:u,recentEvents:i.slice(0,50),allEvents:i}},async getUserActivity(t,e=50){const n=we(ne(M,"analytics"),se("userId","==",t),Jt("timestamp","desc"),Wt(e));return(await _e(n)).docs.map(i=>({id:i.id,...i.data()}))},async getRecentActivity(t=100){const e=we(ne(M,"analytics"),Jt("timestamp","desc"),Wt(t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))}},rf={WORKOUT_CREATED:"workout_created",WORKOUT_COMPLETED:"workout_completed",CARDIO_LOGGED:"cardio_logged"},ca={async createFeedItem(t,e,n,r=null){try{let i=r;if(!i)try{const o=await Ze(Y(M,"users",t)),a=o.exists()?o.data():{};a.defaultVisibility?i=a.defaultVisibility:a.isPrivate?i="private":i="public"}catch{i="public"}return{id:(await Zt(ne(M,"feed"),{userId:t,type:e,data:n,visibility:i,groupId:(n==null?void 0:n.groupId)||null,reactions:{},reactionCount:0,commentCount:0,createdAt:de()})).id}}catch(i){throw console.error("Error creating feed item:",i),i}},async upsertWorkoutFeedItem(t,e,n,r=null){if(n.workoutId)try{const i=we(ne(M,"feed"),se("userId","==",t),se("data.workoutId","==",n.workoutId),Wt(1)),s=await _e(i);if(!s.empty)return await Me(Y(M,"feed",s.docs[0].id),{data:n}),{id:s.docs[0].id}}catch(i){console.error("Feed upsert lookup error:",i)}return this.createFeedItem(t,e,n,r)},async getFeed(t=20,e=null,n=null){try{let r;n?r=we(ne(M,"feed"),se("userId","==",n),Jt("createdAt","desc"),Wt(t)):r=we(ne(M,"feed"),Jt("createdAt","desc"),Wt(t)),e&&(r=we(r,dN(e)));const i=await _e(r);return{items:i.docs.map(o=>({id:o.id,...o.data(),_doc:o})),lastDoc:i.docs[i.docs.length-1]||null,hasMore:i.docs.length===t}}catch(r){return console.error("Error getting feed:",r),{items:[],lastDoc:null,hasMore:!1}}},async getFeedItem(t){const e=await Ze(Y(M,"feed",t));return e.exists()?{id:e.id,...e.data()}:null},async toggleReaction(t,e,n){const r=Y(M,"feed",t),i=await Ze(r);if(!i.exists())return;const a=((i.data().reactions||{})[n]||[]).includes(e);return a?await Me(r,{[`reactions.${n}`]:Tl(e),reactionCount:vi(-1)}):await Me(r,{[`reactions.${n}`]:Fl(e),reactionCount:vi(1)}),!a},async getComments(t){const e=we(ne(M,"feed",t,"comments"),Jt("createdAt","asc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async addComment(t,e,n,r=""){const i=await Zt(ne(M,"feed",t,"comments"),{userId:e,text:n,createdAt:de()});await Me(Y(M,"feed",t),{commentCount:vi(1)});try{const s=await Ze(Y(M,"feed",t));if(s.exists()){const o=s.data().userId;o&&o!==e&&await Zt(ne(M,"notifications"),{userId:o,type:"comment",fromUserId:e,fromUserName:r,feedId:t,feedType:s.data().type,commentText:n.slice(0,100),read:!1,createdAt:de()})}}catch(s){console.error("Notification error:",s)}return{id:i.id}},async deleteComment(t,e,n){const r=Y(M,"feed",t,"comments",e),i=await Ze(r);i.exists()&&i.data().userId===n&&(await wn(r),await Me(Y(M,"feed",t),{commentCount:vi(-1)}))},async deleteFeedItem(t,e,n=!1){const r=Y(M,"feed",t),i=await Ze(r);i.exists()&&(n||i.data().userId===e)&&await wn(r)}},ra={WORKOUT:"workout",CARDIO:"cardio",GROUP_WORKOUT:"group_workout",GOAL_COMPLETED:"goal_completed",GOAL_CREATED:"goal_created",STREAK:"streak",PR:"personal_record"},sQ=["","","","","",""],Yc={async getUnread(t){try{const e=we(ne(M,"notifications"),se("userId","==",t),se("read","==",!1),Jt("createdAt","desc"),Wt(20));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{return[]}},async markAsRead(t){try{await Me(Y(M,"notifications",t),{read:!0})}catch(e){console.error("Error marking notification read:",e)}},async markAllAsRead(t){try{const e=we(ne(M,"notifications"),se("userId","==",t),se("read","==",!1)),n=await _e(e),r=[];n.docs.forEach(i=>{r.push(Me(Y(M,"notifications",i.id),{read:!0}))}),await Promise.all(r)}catch(e){console.error("Error marking all read:",e)}}},$X=Object.freeze(Object.defineProperty({__proto__:null,FEED_TYPES:ra,REACTIONS:sQ,feedService:ca,notificationService:Yc},Symbol.toStringTag,{value:"Module"}));function WX(t){if(!t)return"";const e=String(t).trim();if(/^\d+$/.test(e))return e;const n=e.match(/^(\d+)\s*[-\s]\s*(\d+)$/);if(n){const[,r,i]=n;return r===i?r:`${r}-${i}`}return e}function oQ(t,e){return e&&e>0?Math.round(e):!t||t<=0?null:Math.round(t*2.5)}function aQ(t,e){const n=oQ(t,e);return n?e&&e>0?`${n} min`:`~${n} min`:null}function qX(t){if(!t)return[];const e=[],n=new Set;return t.forEach((r,i)=>{if(!n.has(i)){if(r.supersetGroup!=null){const s=t.findIndex((o,a)=>a!==i&&!n.has(a)&&o.supersetGroup===r.supersetGroup);if(s!==-1){n.add(i),n.add(s),e.push({type:"superset",exerciseA:t[i],exerciseB:t[s],indexA:i,indexB:s,supersetGroup:r.supersetGroup});return}}n.add(i),e.push({type:"single",exercise:r,index:i})}}),e}function lQ(t){if(!t||!t.length)return{exerciseSummary:[],totalSets:0};let e=0;return{exerciseSummary:t.map(r=>{const i=r.sets||[];e+=i.length;const s=r.type==="time"||i.some(u=>u.prescribedTime||u.actualTime),o=r.type==="bodyweight";if(s){let u=0;return i.forEach(c=>{const h=parseInt(c.actualTime||c.prescribedTime)||0;h>u&&(u=h)}),{name:r.name||"Exercise",sets:i.length,topWeight:null,topReps:null,topTime:u||null,exerciseType:"time"}}let a=0,l=0;return i.forEach(u=>{const c=parseFloat(u.actualWeight||u.prescribedWeight)||0;c>a&&(a=c,l=parseInt(u.actualReps||u.prescribedReps)||0)}),a||i.forEach(u=>{const c=parseInt(u.actualReps||u.prescribedReps)||0;c>l&&(l=c)}),{name:r.name||"Exercise",sets:i.length,topWeight:a||null,topReps:l||null,exerciseType:o?"bodyweight":"weight"}}),totalSets:e}}function Lf(t){try{return lQ(t)}catch{return{exerciseSummary:[],totalSets:0}}}const zD={async get(t){const e=await Ze(Y(M,"users",t));return e.exists()?{uid:e.id,...e.data()}:null},async getByUsername(t){if(!t)return null;const e=we(ne(M,"users"),se("username","==",t.toLowerCase()),Wt(1)),n=await _e(e);if(n.empty)return null;const r=n.docs[0];return{uid:r.id,...r.data()}},async isUsernameAvailable(t,e=null){if(!t)return!1;const n=t.toLowerCase();if(["admin","settings","feed","profile","workouts","calendar","groups","goals","health","tools","usage","login","api"].includes(n))return!1;const i=we(ne(M,"users"),se("username","==",n),Wt(1)),s=await _e(i);return!!(s.empty||e&&s.docs[0].id===e)},async setUsername(t,e){const n=e.toLowerCase();if(!/^[a-z0-9_]{3,20}$/.test(n))throw new Error("Username must be 3-20 characters, letters, numbers, and underscores only");if(!await this.isUsernameAvailable(n,t))throw new Error("Username is already taken or reserved");return await Me(Y(M,"users",t),{username:n,updatedAt:de()}),n},async getAll(){return(await _e(ne(M,"users"))).docs.map(e=>({uid:e.id,...e.data()}))},async search(t){const e=await this.getAll(),n=t.toLowerCase();return e.filter(r=>{var i,s,o;return((i=r.displayName)==null?void 0:i.toLowerCase().includes(n))||((s=r.email)==null?void 0:s.toLowerCase().includes(n))||((o=r.username)==null?void 0:o.toLowerCase().includes(n))})},async getDashboardConfig(t){const e=await Ze(Y(M,"users",t));return e.exists()&&e.data().dashboardConfig||null},async saveDashboardConfig(t,e){await Me(Y(M,"users",t),{dashboardConfig:e,updatedAt:de()})}},La={async create(t,e){var l,u,c;const n=e.date instanceof Date?e.date:(l=e.date)!=null&&l.toDate?e.date.toDate():new Date(e.date),r=new Date;r.setHours(0,0,0,0),n.setHours(0,0,0,0);const i=n>r;let s=!1;i?s=!1:e.workoutType==="cardio"?s=!0:s=this.checkIfComplete(e.exercises);const o=await Zt(ne(M,"workouts"),{...e,userId:t,workoutType:e.workoutType||"strength",status:s?"completed":"scheduled",completedAt:s?de():null,createdAt:de(),updatedAt:de()});s&&e.workoutType!=="cardio"&&await this.checkAndUpdateGoals(t,e);const a=e.workoutType==="cardio"?rf.CARDIO_LOGGED:rf.WORKOUT_CREATED;if(wa.logAction(t,a,{workoutType:e.workoutType,exerciseCount:((u=e.exercises)==null?void 0:u.length)||0,status:s?"completed":"scheduled"}),s)try{const h=e.workoutType==="cardio"?ra.CARDIO:ra.WORKOUT,{exerciseSummary:p,totalSets:m}=Lf(e.exercises);await ca.createFeedItem(t,h,{workoutId:o.id,name:e.name,exerciseCount:((c=e.exercises)==null?void 0:c.length)||0,duration:e.duration,activityType:e.activityType,exerciseSummary:p,totalSets:m,...e.eventId?{eventId:e.eventId}:{},...e.workoutCategory&&e.workoutCategory!=="strength"?{workoutCategory:e.workoutCategory}:{}})}catch(h){console.error("Feed error:",h)}return{id:o.id,...e,status:s?"completed":"scheduled"}},checkIfComplete(t){return!t||t.length===0?!1:t.some(e=>{var n;return(n=e.sets)==null?void 0:n.some(r=>r.actualWeight||r.actualReps)})},async completeWorkout(t,e,n){var a;const r=Y(M,"workouts",t),s=(await Ze(r)).data(),o=(s==null?void 0:s.name)||"Workout";if(await Me(r,{exercises:e,status:"completed",completedAt:de(),updatedAt:de()}),s!=null&&s.trainerRequestId)try{await Tv.complete(s.trainerRequestId,t,"")}catch(l){console.error("Trainer request auto-complete error:",l)}await this.checkAndUpdateGoals(n,{exercises:e}),wa.logAction(n,rf.WORKOUT_COMPLETED,{exerciseCount:(e==null?void 0:e.length)||0});try{const{exerciseSummary:l,totalSets:u}=Lf(e);await ca.upsertWorkoutFeedItem(n,ra.WORKOUT,{workoutId:t,name:o,exerciseCount:(e==null?void 0:e.length)||0,exerciseSummary:l,totalSets:u,...s!=null&&s.eventId?{eventId:s.eventId}:{},...s!=null&&s.workoutCategory&&s.workoutCategory!=="strength"?{workoutCategory:s.workoutCategory}:{}})}catch(l){console.error("Feed error:",l)}if(n&&(s!=null&&s.eventId))try{const{getEventForWorkout:l}=await tt(async()=>{const{getEventForWorkout:c}=await Promise.resolve().then(()=>xb);return{getEventForWorkout:c}},void 0),u=l(s);if(u){u.creditReward&&await Hp.add(n,u.creditReward);const c=Y(M,"users",n),p=((a=(await Ze(c)).data())==null?void 0:a.badges)||[];p.some(m=>m.id===u.id)||await Me(c,{badges:[...p,{id:u.id,name:u.badgeName,icon:u.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(l){console.error("Event reward error:",l)}return{id:t,status:"completed"}},async complete(t,e){var o,a,l;const n=Y(M,"workouts",t),i=(await Ze(n)).data(),s=i==null?void 0:i.userId;await Me(n,{...e,status:"completed",completedAt:de(),updatedAt:de()}),s&&e.exercises&&await this.checkAndUpdateGoals(s,{exercises:e.exercises}),s&&wa.logAction(s,rf.WORKOUT_COMPLETED,{exerciseCount:((o=e.exercises)==null?void 0:o.length)||0});try{if(s){const{exerciseSummary:u,totalSets:c}=Lf(e.exercises);await ca.upsertWorkoutFeedItem(s,ra.WORKOUT,{workoutId:t,name:(i==null?void 0:i.name)||"Workout",exerciseCount:((a=e.exercises)==null?void 0:a.length)||0,exerciseSummary:u,totalSets:c,...i!=null&&i.eventId?{eventId:i.eventId}:{},...i!=null&&i.workoutCategory&&i.workoutCategory!=="strength"?{workoutCategory:i.workoutCategory}:{}})}}catch(u){console.error("Feed error:",u)}if(s&&(i!=null&&i.eventId))try{const{getEventForWorkout:u}=await tt(async()=>{const{getEventForWorkout:h}=await Promise.resolve().then(()=>xb);return{getEventForWorkout:h}},void 0),c=u(i);if(c){c.creditReward&&await Hp.add(s,c.creditReward);const h=Y(M,"users",s),m=((l=(await Ze(h)).data())==null?void 0:l.badges)||[];m.some(y=>y.id===c.id)||await Me(h,{badges:[...m,{id:c.id,name:c.badgeName,icon:c.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(u){console.error("Event reward error:",u)}if(i!=null&&i.trainerRequestId)try{await Tv.complete(i.trainerRequestId,t,"")}catch(u){console.error("Trainer request auto-complete error:",u)}return{id:t,status:"completed"}},async getCardioByUser(t,e=30){const n=we(ne(M,"workouts"),se("userId","==",t),se("workoutType","==","cardio"),Wt(e));return(await _e(n)).docs.map(s=>({id:s.id,...s.data()})).sort((s,o)=>{var u,c;const a=(u=s.date)!=null&&u.toDate?s.date.toDate():new Date(s.date);return((c=o.date)!=null&&c.toDate?o.date.toDate():new Date(o.date))-a})},async getByDate(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=we(ne(M,"workouts"),se("userId","==",t));return(await _e(r)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>{var a;return((a=s.date)!=null&&a.toDate?s.date.toDate().toISOString().split("T")[0]:s.date)===n})},async createForUser(t,e,n,r){return{id:(await Zt(ne(M,"workouts"),{...e,userId:t,createdBy:n,groupId:r,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:de(),updatedAt:de()})).id,...e,userId:t,status:"scheduled"}},async createForGroup(t,e,n,r){const i=ma(M),s=[];for(const o of r){const a=Y(ne(M,"workouts"));i.set(a,{...e,userId:o,createdBy:n,groupId:t,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:de(),updatedAt:de()}),s.push({id:a.id,memberId:o})}return await i.commit(),s},async checkAndUpdateGoals(t,e){try{const n=we(ne(M,"goals"),se("userId","==",t),se("status","==","active")),r=await _e(n);if(r.empty)return;const i=s=>s?s.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():"";for(const s of e.exercises||[]){const o=i(s.name);if(o)for(const a of r.docs){const l=a.data(),u=i(l.lift),c=l.metricType||"weight";if(!(o===u||o.includes(u)||u.includes(o)||u.split(" ").some(m=>m.length>3&&o.includes(m))))continue;let p=0;for(const m of s.sets||[]){let y=0;c==="weight"?y=parseFloat(m.actualWeight)||parseFloat(m.prescribedWeight)||0:c==="reps"?y=parseInt(m.actualReps)||parseInt(m.prescribedReps)||0:c==="time"&&(y=parseFloat(m.actualTime)||parseFloat(m.prescribedTime)||0),y>p&&(p=y)}if(p>0){const m=parseFloat(l.targetValue)||parseFloat(l.targetWeight)||0,y=parseFloat(l.startValue)||parseFloat(l.startWeight)||0,v=parseFloat(l.currentValue)||parseFloat(l.currentWeight)||y;if(p>v){let I=0;m>y&&(I=Math.min(100,Math.round((p-y)/(m-y)*100)));const _={currentValue:p,currentWeight:c==="weight"?p:l.currentWeight,progress:Math.max(l.progress||0,I),updatedAt:de()};if(p>=m&&m>0){_.status="completed",_.completedAt=de();try{await ca.createFeedItem(t,ra.GOAL_COMPLETED,{goalId:a.id,lift:l.lift,targetValue:m,metricType:c,unit:c==="weight"?"lbs":c==="reps"?"reps":"sec"})}catch(x){console.error("Feed error:",x)}}await Me(Y(M,"goals",a.id),_),console.log(`Goal updated: ${l.lift} - new value: ${p}`)}}}}}catch(n){console.error("Error checking goals:",n)}},async get(t){const e=await Ze(Y(M,"workouts",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getByUser(t,e=50){const n=we(ne(M,"workouts"),se("userId","==",t),Jt("date","desc"),Wt(e));return(await _e(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByGroup(t,e=50){const n=we(ne(M,"workouts"),se("groupId","==",t),Jt("date","desc"),Wt(e));return(await _e(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByDateRange(t,e,n){const r=we(ne(M,"workouts"),se("userId","==",t),se("date",">=",e),se("date","<=",n),Jt("date","asc"));return(await _e(r)).docs.map(s=>({id:s.id,...s.data()}))},async update(t,e){const n=Y(M,"workouts",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){await wn(Y(M,"workouts",t));try{const e=we(ne(M,"feed"),se("data.workoutId","==",t)),r=(await _e(e)).docs.map(i=>wn(Y(M,"feed",i.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async logExercise(t,e){const n=Y(M,"workouts",t);await Me(n,{exercises:Fl(e),updatedAt:de()})}},$D={generateInviteCode(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},async create(t,e){const n=this.generateInviteCode(),r=await Zt(ne(M,"groups"),{...e,creatorId:t,inviteCode:n,members:[t],admins:[t],createdAt:de(),updatedAt:de()}),i=Y(M,"users",t);return await Me(i,{groups:Fl(r.id)}),{id:r.id,inviteCode:n,...e}},async get(t){const e=await Ze(Y(M,"groups",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getMemberDetails(t){const e=[];for(const n of t){const r=await Ze(Y(M,"users",n));r.exists()?e.push({uid:n,...r.data()}):e.push({uid:n,displayName:"Unknown User"})}return e},async getByUser(t){const e=we(ne(M,"groups"),se("members","array-contains",t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async findByInviteCode(t){const e=we(ne(M,"groups"),se("inviteCode","==",t.toUpperCase())),n=await _e(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},async joinByCode(t,e){var r;const n=await this.findByInviteCode(t);if(!n)throw new Error("Invalid invite code");if((r=n.members)!=null&&r.includes(e))throw new Error("Already a member of this group");return await this.addMember(n.id,e),n},async update(t,e){const n=Y(M,"groups",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async addMember(t,e){const n=ma(M),r=Y(M,"groups",t);n.update(r,{members:Fl(e),updatedAt:de()});const i=Y(M,"users",e);n.update(i,{groups:Fl(t)}),await n.commit()},async removeMember(t,e){const n=ma(M),r=Y(M,"groups",t);n.update(r,{members:Tl(e),admins:Tl(e),updatedAt:de()});const i=Y(M,"users",e);n.update(i,{groups:Tl(t)}),await n.commit()},async getMembers(t){const e=await this.get(t);return e?(await Promise.all(e.members.map(async r=>{const i=await Ze(Y(M,"users",r));return i.exists()?{id:r,...i.data()}:null}))).filter(Boolean):[]},async delete(t){const e=await this.get(t);if(!e)return;const n=ma(M);for(const r of e.members){const i=Y(M,"users",r);n.update(i,{groups:Tl(t)})}n.delete(Y(M,"groups",t)),await n.commit()}},T_={async create(t,e){return{id:(await Zt(ne(M,"goals"),{...e,userId:t,status:"active",progress:0,createdAt:de(),updatedAt:de()})).id,...e}},async get(t){const e=await Ze(Y(M,"goals",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=we(ne(M,"goals"),se("userId","==",t),Jt("targetDate","asc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=Y(M,"goals",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await wn(Y(M,"goals",t)),t}},I_={async create(t,e){return{id:(await Zt(ne(M,"schedules"),{...e,userId:t,createdAt:de(),updatedAt:de()})).id,...e}},async getByUser(t){const e=we(ne(M,"schedules"),se("userId","==",t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByGroup(t){const e=we(ne(M,"schedules"),se("groupId","==",t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=Y(M,"schedules",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await wn(Y(M,"schedules",t)),t}},uQ={async log(t,e,n,r=null){const i=e.toISOString().split("T")[0],s=Y(M,"attendance",`${t}_${i}`);await Me(s,{userId:t,date:i,status:n,workoutId:r,updatedAt:de()}).catch(async()=>{await Zt(ne(M,"attendance"),{userId:t,date:i,status:n,workoutId:r,createdAt:de()})})},async getByUser(t,e,n){const r=we(ne(M,"attendance"),se("userId","==",t),se("date",">=",e.toISOString().split("T")[0]),se("date","<=",n.toISOString().split("T")[0]));return(await _e(r)).docs.map(s=>({id:s.id,...s.data()}))},async getByDateRange(t,e,n){return this.getByUser(t,e,n)},async getByGroup(t,e,n){const r=await $D.get(t);return r?(await Promise.all(r.members.map(s=>this.getByUser(s,e,n)))).flat():[]}},Yo={async log(t){return{id:(await Zt(ne(M,"tokenUsage"),{...t,createdAt:de()})).id,...t}},async getRecent(t=100){const e=we(ne(M,"tokenUsage"),Jt("createdAt","desc"),Wt(t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUser(t,e=50){const n=we(ne(M,"tokenUsage"),se("userId","==",t),Jt("createdAt","desc"),Wt(e));return(await _e(n)).docs.map(i=>({id:i.id,...i.data()}))},async getRecentCounts(t){const e=await this.getByUser(t,100),n=Date.now(),r=n-60*60*1e3,i=n-24*60*60*1e3;let s=0,o=0;return e.forEach(a=>{var u,c,h,p;const l=((p=(h=(c=(u=a.createdAt)==null?void 0:u.toDate)==null?void 0:c.call(u))==null?void 0:h.getTime)==null?void 0:p.call(h))||new Date(a.createdAt).getTime()||0;l>r&&s++,l>i&&o++}),{hourCount:s,dayCount:o,total:e.length}},async getSummary(){const t=await this.getRecent(500),e={totalTokens:t.reduce((l,u)=>l+(u.totalTokens||0),0),totalRequests:t.length,byFeature:{}};t.forEach(l=>{l.feature&&(e.byFeature[l.feature]||(e.byFeature[l.feature]={tokens:0,requests:0}),e.byFeature[l.feature].tokens+=l.totalTokens||0,e.byFeature[l.feature].requests+=1)});const n=[...new Set(t.map(l=>l.userId))].filter(Boolean),r=[];for(const l of n)try{const u=await Ze(Y(M,"users",l));if(u.exists()){const c=u.data();r.push({id:l,displayName:c.displayName||c.email||l,email:c.email})}else r.push({id:l,displayName:l})}catch{r.push({id:l,displayName:l})}const i=Object.fromEntries(r.map(l=>[l.id,l.displayName])),s=t.map(l=>({...l,userName:i[l.userId]||l.userId})),o=[];let a=null;return s.forEach(l=>{var c,h;const u=(c=l.createdAt)!=null&&c.toDate?l.createdAt.toDate():new Date(l.createdAt);if(a&&a.feature===l.feature&&a.userId===l.userId){const p=(h=a.createdAt)!=null&&h.toDate?a.createdAt.toDate():new Date(a.createdAt);if(Math.abs(p-u)/1e3/60<=5){a.totalTokens+=l.totalTokens||0,a.promptTokens+=l.promptTokens||0,a.completionTokens+=l.completionTokens||0,a.requestCount=(a.requestCount||1)+1;return}}a&&o.push(a),a={...l,requestCount:1}}),a&&o.push(a),{records:o,summary:e,users:r}}},Ff={async create(t,e){return{id:(await Zt(ne(M,"programs"),{...e,userId:t,status:"active",createdAt:de(),updatedAt:de()})).id,...e}},async get(t){const e=await Ze(Y(M,"programs",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=we(ne(M,"programs"),se("userId","==",t),Jt("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getActive(t){const e=we(ne(M,"programs"),se("userId","==",t),se("status","==","active"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=Y(M,"programs",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await wn(Y(M,"programs",t)),t},getProgramDay(t,e){var u,c;if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return null;const n=(u=t.startDate)!=null&&u.toDate?t.startDate.toDate():new Date(t.startDate),r=new Date(e),i=Math.floor((r-n)/(1e3*60*60*24));if(i<0)return null;const s=Math.floor(i/7);if(s>=t.weeks.length)return null;const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][r.getDay()];if(!t.trainingDays.includes(o))return null;const a=t.weeks[s],l=(c=a==null?void 0:a.days)==null?void 0:c.find(h=>h.dayOfWeek===o);return l?{...l,weekNumber:a.weekNumber,phase:a.phase,programId:t.id,programName:t.name}:null},getProgramDaysInRange(t,e,n){if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return[];const r=[],i=new Date(e),s=new Date(n);for(;i<=s;){const o=this.getProgramDay(t,i);o&&r.push({...o,date:new Date(i),dateStr:i.toISOString().split("T")[0]}),i.setDate(i.getDate()+1)}return r}},S_={"ask-assistant":1,"generate-workout":5,"generate-group-workout":5,"generate-program":10,"form-check":15,"trainer-custom-workout":100,"trainer-review":50},cQ=100,Hp={async getBalance(t){const e=Y(M,"users",t),n=await Ze(e);return n.exists()?n.data().credits??0:0},async deduct(t,e,n=1){const r=(S_[e]||1)*n,i=await this.getBalance(t);if(i<r)return{success:!1,balance:i,cost:r,error:"insufficient_credits"};const s=Y(M,"users",t);return await Me(s,{credits:vi(-r)}),{success:!0,balance:i-r,cost:r}},async deductAmount(t,e){const n=await this.getBalance(t);if(n<e)return{success:!1,balance:n,cost:e,error:"insufficient_credits"};const r=Y(M,"users",t);return await Me(r,{credits:vi(-e)}),{success:!0,balance:n-e,cost:e}},async add(t,e){const n=Y(M,"users",t);return await Me(n,{credits:vi(e)}),{success:!0}},async gift(t,e,n){if(n<=0)return{success:!1,error:"Amount must be positive"};const r=await this.getBalance(t);if(r<n)return{success:!1,balance:r,amount:n,error:"insufficient_credits"};const i=Y(M,"users",t),s=Y(M,"users",e);return await Me(i,{credits:vi(-n)}),await Me(s,{credits:vi(n)}),{success:!0,balance:r-n}},async ensureCredits(t){const e=Y(M,"users",t),n=await Ze(e);return n.exists()&&n.data().credits===void 0?(await Me(e,{credits:50}),50):n.exists()?n.data().credits??0:0}},WD={async create(t,e){return{id:(await Zt(ne(M,"health"),{...e,userId:t,createdAt:de(),updatedAt:de()})).id,...e,userId:t}},async update(t,e){const n=Y(M,"health",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async getByUser(t,e=30){const n=we(ne(M,"health"),se("userId","==",t),Wt(e));return(await _e(n)).docs.map(s=>({id:s.id,...s.data()})).sort((s,o)=>(o.date||"").localeCompare(s.date||""))},async getByDateRange(t,e,n){const r=we(ne(M,"health"),se("userId","==",t));return(await _e(r)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.date>=e&&o.date<=n).sort((o,a)=>(a.date||"").localeCompare(o.date||""))},async delete(t){await wn(Y(M,"health",t))}},Xc={async create(t,e,n,r,i=[]){return{id:(await Zt(ne(M,"groupWorkouts"),{...r,groupId:t,groupAdmins:e,groupMembers:i.length>0?i:e,assignedTo:n,status:"scheduled",createdAt:de(),updatedAt:de()})).id,...r,groupId:t,assignedTo:n,status:"scheduled"}},async getByGroup(t,e){const n=we(ne(M,"groupWorkouts"),se("groupId","==",t),Jt("date","desc"));return(await _e(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByUser(t){const e=we(ne(M,"groupWorkouts"),se("assignedTo","==",t),Jt("date","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUserAndDateRange(t,e,n){const r=we(ne(M,"groupWorkouts"),se("assignedTo","==",t),se("date",">=",e),se("date","<=",n));return(await _e(r)).docs.map(s=>({id:s.id,...s.data()}))},async get(t){const e=await Ze(Y(M,"groupWorkouts",t));return e.exists()?{id:e.id,...e.data()}:null},async update(t,e){const n=Y(M,"groupWorkouts",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async complete(t,e,n=null,r=null){var a,l;const i=Y(M,"groupWorkouts",t),s={...e,status:"completed",completedAt:de(),updatedAt:de()};n&&r&&n!==r?(s.completedBy=n,s.reviewStatus="pending"):s.reviewStatus="self",await Me(i,s);const o=r||n;if(o&&e.exercises)try{await La.checkAndUpdateGoals(o,{exercises:e.exercises})}catch(u){console.error("Goal check error:",u)}if(o)try{const c=(await Ze(i)).data();let h="";c!=null&&c.groupId&&(h=((a=(await Ze(Y(M,"groups",c.groupId))).data())==null?void 0:a.name)||"");const{exerciseSummary:p,totalSets:m}=Lf(e==null?void 0:e.exercises);await ca.createFeedItem(o,ra.GROUP_WORKOUT,{workoutId:t,name:(c==null?void 0:c.name)||(e==null?void 0:e.name)||"Group Workout",groupName:h,groupId:c==null?void 0:c.groupId,exerciseCount:((l=e==null?void 0:e.exercises)==null?void 0:l.length)||0,exerciseSummary:p,totalSets:m})}catch(u){console.error("Feed error:",u)}return{id:t,status:"completed",...s}},async approveReview(t){const e=Y(M,"groupWorkouts",t);return await Me(e,{reviewStatus:"approved",reviewedAt:de(),updatedAt:de()}),{id:t,reviewStatus:"approved"}},async getPendingReviews(t){const e=we(ne(M,"groupWorkouts"),se("assignedTo","==",t),se("reviewStatus","==","pending"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async delete(t){await wn(Y(M,"groupWorkouts",t));try{const e=we(ne(M,"feed"),se("data.workoutId","==",t)),r=(await _e(e)).docs.map(i=>wn(Y(M,"feed",i.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async createBatch(t,e,n,r,i=[]){const s=ma(M),o=[],a=i.length>0?i:e;for(const{assignedTo:l,name:u,exercises:c}of r){const h=Y(ne(M,"groupWorkouts")),p={groupId:t,groupAdmins:e,groupMembers:a,assignedTo:l,userId:l,name:u,date:n,exercises:c,status:"scheduled",createdAt:de(),updatedAt:de()};s.set(h,p),o.push({id:h.id,...p})}return await s.commit(),o}},qD={async create(t,e){return{id:(await Zt(ne(M,"recurringActivities"),{...e,userId:t,active:!0,createdAt:de(),updatedAt:de()})).id,...e,userId:t,active:!0}},async getByUser(t){const e=we(ne(M,"recurringActivities"),se("userId","==",t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=Y(M,"recurringActivities",t);return await Me(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await wn(Y(M,"recurringActivities",t)),t},async logSkip(t,e,n){const r=typeof e=="string"?e:e.toISOString().split("T")[0],i=Y(M,"activitySkips",`${t}_${r}`);return await mu(i,{activityId:t,userId:n,date:r,createdAt:de()}),{activityId:t,date:r,skipped:!0}},async getSkips(t,e,n){const r=we(ne(M,"activitySkips"),se("userId","==",t));return(await _e(r)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.date>=e&&s.date<=n)},async removeSkip(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=Y(M,"activitySkips",`${t}_${n}`);return await wn(r),{activityId:t,date:n,skipped:!1}}},dQ="charltonuw@gmail.com",GD={async apply(t,e){return{id:(await Zt(ne(M,"trainerApplications"),{userId:t,...e,status:"pending",createdAt:de()})).id}},async getApplication(t){const e=we(ne(M,"trainerApplications"),se("userId","==",t)),n=await _e(e);if(n.empty)return null;const r=n.docs.map(i=>({id:i.id,...i.data()}));return r.sort((i,s)=>{var o,a,l,u;return(((a=(o=s.createdAt)==null?void 0:o.toDate)==null?void 0:a.call(o))||0)-(((u=(l=i.createdAt)==null?void 0:l.toDate)==null?void 0:u.call(l))||0)}),r[0]},async getPendingApplications(){const t=we(ne(M,"trainerApplications"),se("status","==","pending"));return(await _e(t)).docs.map(n=>({id:n.id,...n.data()}))},async reviewApplication(t,e){const n=Y(M,"trainerApplications",t),r=await Ze(n);if(!r.exists())throw new Error("Application not found");const i=r.data();if(await Me(n,{status:e,reviewedAt:de()}),e==="approved"){const s=Y(M,"users",i.userId);await Me(s,{isTrainer:!0})}return{success:!0}},isTrainer(t,e){return e===dQ?!0:(t==null?void 0:t.isTrainer)===!0}},Tv={async create(t,e){return{id:(await Zt(ne(M,"trainerRequests"),{userId:t,...e,status:"pending",createdAt:de(),updatedAt:de()})).id}},async getByUser(t){const e=we(ne(M,"trainerRequests"),se("userId","==",t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getPending(){const t=we(ne(M,"trainerRequests"),se("status","in",["pending","in_progress"]));return(await _e(t)).docs.map(n=>({id:n.id,...n.data()}))},async getAll(){const t=we(ne(M,"trainerRequests"));return(await _e(t)).docs.map(n=>({id:n.id,...n.data()}))},async deny(t,e){const n=Y(M,"trainerRequests",t);await Me(n,{status:"denied",denyReason:e||"",updatedAt:de()})},async delete(t){await wn(Y(M,"trainerRequests",t))},async claim(t,e){const n=Y(M,"trainerRequests",t);await Me(n,{status:"in_progress",trainerId:e,claimedAt:de(),updatedAt:de()})},async linkWorkout(t,e){const n=Y(M,"trainerRequests",t);await Me(n,{workoutId:e,updatedAt:de()})},async complete(t,e,n){const r=Y(M,"trainerRequests",t);await Me(r,{status:"completed",workoutId:e,trainerNotes:n||"",completedAt:de(),updatedAt:de()})},async cancel(t){const e=Y(M,"trainerRequests",t);await Me(e,{status:"cancelled",updatedAt:de()})},async get(t){const e=Y(M,"trainerRequests",t),n=await Ze(e);return n.exists()?{id:n.id,...n.data()}:null},async getUserSummary(t){const[e,n,r]=await Promise.all([Ze(Y(M,"users",t)),_e(we(ne(M,"workouts"),se("userId","==",t),Wt(30))),_e(we(ne(M,"goals"),se("userId","==",t)))]),i=e.exists()?e.data():{},s=r.docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.status==="completed").sort((c,h)=>{var y,v,I,_;const p=((v=(y=c.date)==null?void 0:y.toDate)==null?void 0:v.call(y))||new Date(c.date||0);return(((_=(I=h.date)==null?void 0:I.toDate)==null?void 0:_.call(I))||new Date(h.date||0))-p}),o=n.docs.map(c=>({id:c.id,...c.data()})),a={},l={},u=new Date;return s.slice(0,20).forEach(c=>{var m;const h=(m=c.date)!=null&&m.toDate?c.date.toDate():c.date?new Date(c.date):null,p=h&&!isNaN(h.getTime())?Math.floor((u-h)/(1e3*60*60*24)):null;(c.exercises||[]).forEach(y=>{y.name&&(y.sets||[]).forEach(v=>{const I=parseFloat(v.actualWeight)||parseFloat(v.prescribedWeight)||0,_=parseInt(v.actualReps)||parseInt(v.prescribedReps)||0,x=parseInt(v.painLevel)||0;if(I>0&&_>0&&_<=12){const E=Math.round(I*(1+_/30));(!a[y.name]||E>a[y.name].e1rm)&&(a[y.name]={weight:I,reps:_,e1rm:E})}x>0&&(l[y.name]||(l[y.name]={maxPain:0,count:0,lastDaysAgo:null,recentCount:0}),l[y.name].count++,l[y.name].maxPain=Math.max(l[y.name].maxPain,x),p!==null&&((l[y.name].lastDaysAgo===null||p<l[y.name].lastDaysAgo)&&(l[y.name].lastDaysAgo=p),p<=30&&l[y.name].recentCount++))})})}),{profile:{displayName:i.displayName,weight:i.weight,height:i.height,age:i.age,activityLevel:i.activityLevel},recentWorkouts:s.slice(0,5).map(c=>{var h,p,m,y,v;return{name:c.name,date:((v=(y=(m=(p=(h=c.date)==null?void 0:h.toDate)==null?void 0:p.call(h))==null?void 0:m.toISOString)==null?void 0:y.call(m))==null?void 0:v.split("T")[0])||c.date,exercises:(c.exercises||[]).map(I=>({name:I.name,type:I.type||"weight",sets:(I.sets||[]).map(_=>({prescribedWeight:_.prescribedWeight,prescribedReps:_.prescribedReps,actualWeight:_.actualWeight,actualReps:_.actualReps,rpe:_.rpe,painLevel:_.painLevel}))}))}}),maxLifts:a,painHistory:l,goals:o.filter(c=>c.status==="active").map(c=>({lift:c.lift,metricType:c.metricType,currentWeight:c.currentWeight||c.currentValue,targetWeight:c.targetWeight||c.targetValue}))}}},HD={async share(t,e,n,r,i="",s=""){return{id:(await Zt(ne(M,"sharedWorkouts"),{fromUserId:t,toUserId:n,fromUserName:e,toUserName:s,workout:{name:r.name,exercises:(r.exercises||[]).map(a=>({name:a.name,type:a.type||"weight",sets:(a.sets||[]).map(l=>({prescribedWeight:l.prescribedWeight||l.actualWeight||null,prescribedReps:l.prescribedReps||l.actualReps||null,prescribedTime:l.prescribedTime||l.actualTime||null}))})),workoutType:r.workoutType||"strength"},message:i,status:"pending",createdAt:de()})).id}},async getSharedWithMe(t){const e=we(ne(M,"sharedWorkouts"),se("toUserId","==",t),Jt("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getPendingSharedCount(t){const e=we(ne(M,"sharedWorkouts"),se("toUserId","==",t),se("status","==","pending"));return(await _e(e)).size},async getSharedByMe(t){const e=we(ne(M,"sharedWorkouts"),se("fromUserId","==",t),Jt("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async revoke(t){await wn(Y(M,"sharedWorkouts",t))},async saveAsWorkout(t,e,n=null){const r=await Ze(Y(M,"sharedWorkouts",t));if(!r.exists())throw new Error("Shared workout not found");const i=r.data(),s=await La.create(e,{name:i.workout.name,exercises:n||i.workout.exercises,date:new Date,workoutType:i.workout.workoutType||"strength"});return await Me(Y(M,"sharedWorkouts",t),{status:"saved"}),s},async dismiss(t){await Me(Y(M,"sharedWorkouts",t),{status:"dismissed"})}},GX=Object.freeze(Object.defineProperty({__proto__:null,CREDIT_COSTS:S_,PREMIUM_CREDIT_COST:cQ,attendanceService:uQ,creditService:Hp,goalService:T_,groupService:$D,groupWorkoutService:Xc,healthService:WD,programService:Ff,recurringActivityService:qD,scheduleService:I_,sharedWorkoutService:HD,tokenUsageService:Yo,trainerRequestService:Tv,trainerService:GD,userService:zD,workoutService:La},Symbol.toStringTag,{value:"Module"}));async function ia(){const e=IF().currentUser;if(!e)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${await e.getIdToken()}`}}class hQ{constructor(){this.baseUrl=EN}async generateWorkout(e){try{const n=await ia(),r=await fetch(`${this.baseUrl}/generate-workout`,{method:"POST",headers:n,body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to generate workout");const i=await r.json();return i.usage&&Yo.log(i.usage).catch(console.error),i}catch(n){throw console.error("Generate workout error:",n),n}}async askAssistant(e,n={},r=null){try{const i=await ia(),s={message:e,context:n};r&&(s.mode=r);const o=await fetch(`${this.baseUrl}/ask-assistant`,{method:"POST",headers:i,body:JSON.stringify(s)});if(!o.ok)throw new Error("Failed to get response");const a=await o.json();return a.usage&&Yo.log(a.usage).catch(console.error),a}catch(i){throw console.error("Ask assistant error:",i),i}}async autofillWorkout(e,n){try{const r=await ia(),i=await fetch(`${this.baseUrl}/autofill-workout`,{method:"POST",headers:r,body:JSON.stringify({workoutId:e,partialData:n})});if(!i.ok)throw new Error("Failed to autofill workout");const s=await i.json();return s.usage&&Yo.log(s.usage).catch(console.error),s}catch(r){throw console.error("Autofill workout error:",r),r}}async analyzeProgress(e,n,r){try{const i=await ia(),s=await fetch(`${this.baseUrl}/analyze-progress`,{method:"POST",headers:i,body:JSON.stringify({liftType:n,timeRange:r})});if(!s.ok)throw new Error("Failed to analyze progress");const o=await s.json();return o.usage&&Yo.log(o.usage).catch(console.error),o}catch(i){throw console.error("Analyze progress error:",i),i}}async askAssistantStream(e,n={},r,i,s){try{const o=await ia(),a=await fetch(`${this.baseUrl}/ask-assistant-stream`,{method:"POST",headers:o,body:JSON.stringify({message:e,context:n})});if(!a.ok){const h=await a.json().catch(()=>({}));throw new Error(h.error||`Stream failed (${a.status})`)}const l=a.body.getReader(),u=new TextDecoder;let c="";for(;;){const{done:h,value:p}=await l.read();if(h)break;c+=u.decode(p,{stream:!0});const m=c.split(`

`);c=m.pop();for(const y of m)if(y.startsWith("data: "))try{const v=JSON.parse(y.slice(6));v.error?s(v.error):v.done?(v.usage&&Yo.log(v.usage).catch(console.error),i(v)):v.delta&&r(v.delta)}catch{}}}catch(o){console.error("Stream error:",o),s(o.message||"Stream failed")}}async getTokenUsage(){return Yo.getSummary()}}const Uf=new hQ,HX=()=>Uf.getTokenUsage();function fQ(){const[t,e]=b.useState(0);return b.useEffect(()=>{if(X0){let n,r;return tt(async()=>{const{Keyboard:i}=await import("./index-B6-l_63q.js");return{Keyboard:i}},[]).then(({Keyboard:i})=>{n=i.addListener("keyboardWillShow",s=>{e(s.keyboardHeight)}),r=i.addListener("keyboardWillHide",()=>{e(0)})}).catch(()=>{}),()=>{n==null||n.then(i=>i.remove()),r==null||r.then(i=>i.remove())}}else{const n=window.visualViewport;if(!n)return;const r=()=>{const i=window.innerHeight-n.height;e(i>100?i:0)};return n.addEventListener("resize",r),()=>n.removeEventListener("resize",r)}},[]),t}const pQ={async getStatus(t){const e=Y(M,"users",t,"integrations","oura"),n=await Ze(e);if(!n.exists())return{connected:!1};const r=n.data();return{connected:r.status==="connected",status:r.status,connectedAt:r.connectedAt,lastSynced:r.lastSynced,data:r.data||null}},async connect(){const t=await ia(),e=await fetch(lI("oura-auth"),{method:"POST",headers:t});if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.error||"Failed to initiate Oura connection")}const{authUrl:n}=await e.json();return n},async sync(){const t=await ia(),e=await fetch(lI("oura-sync"),{method:"POST",headers:t});if(!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||"Failed to sync Oura data")}return e.json()},async disconnect(t){const e=Y(M,"users",t,"integrations","oura");await wn(e)},async getLatestScores(t){const e=await this.getStatus(t);if(!e.connected||!e.data)return null;const{sleep:n,readiness:r,activity:i}=e.data,s=n!=null&&n.length?n[n.length-1]:null,o=r!=null&&r.length?r[r.length-1]:null,a=i!=null&&i.length?i[i.length-1]:null,l=n!=null&&n.length?Math.round(n.reduce((c,h)=>c+(h.score||0),0)/n.length):null,u=r!=null&&r.length?Math.round(r.reduce((c,h)=>c+(h.score||0),0)/r.length):null;return{latest:{sleep:s,readiness:o,activity:a},averages:{sleepScore:l,readinessScore:u}}}};function mQ(){const t=Io(),{chatOpen:e,setChatOpen:n}=sD(),{user:r,userProfile:i,updateProfile:s,isAppAdmin:o}=ai(),[a,l]=b.useState([]),[u,c]=b.useState(""),[h,p]=b.useState(!1),[m,y]=b.useState(null),[v,I]=b.useState(null),[_,x]=b.useState(!1),[E,V]=b.useState(!1),[L,j]=b.useState([]),[S,T]=b.useState(!1),k=b.useRef(null),[C,P]=b.useState(null),[N,R]=b.useState(()=>{const G=Date.now(),Ie=60*60*1e3,Se=24*60*60*1e3;try{const B=localStorage.getItem("ai_rate_limit"),W=localStorage.getItem("ai_daily_limit");let J=B?JSON.parse(B):{count:0,resetTime:G+Ie},he=W?JSON.parse(W):{count:0,resetTime:G+Se};return G>J.resetTime&&(J={count:0,resetTime:G+Ie}),G>he.resetTime&&(he={count:0,resetTime:G+Se}),{...J,dailyCount:he.count,dailyResetTime:he.resetTime}}catch{return{count:0,resetTime:null}}}),H=fQ(),[ge,be]=b.useState(!0),[Ae,X]=b.useState(!1),ce=b.useRef(null),D=b.useRef(null),ue=b.useRef(null),ke=60*60*1e3,O=24*60*60*1e3,ft=(C==null?void 0:C.rateLimitHourly)||8,_t=(C==null?void 0:C.rateLimitDaily)||25,$e=(C==null?void 0:C.overageCreditMultiplier)||3,rt=()=>{var G;(G=ce.current)==null||G.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{ge?rt():a.length>0&&X(!0)},[a]),b.useEffect(()=>{const G=D.current;if(!G)return;const Ie=()=>{const{scrollTop:Se,scrollHeight:B,clientHeight:W}=G,J=B-Se-W<50;be(J),J&&X(!1)};return G.addEventListener("scroll",Ie,{passive:!0}),()=>G.removeEventListener("scroll",Ie)},[e]),b.useEffect(()=>{H>0&&setTimeout(rt,100)},[H]),b.useEffect(()=>{var G;e&&((G=ue.current)==null||G.focus(),en(),!v&&!_&&tn(),C||On())},[e]),b.useEffect(()=>{if(!h&&a.length>1&&r){const G=a[a.length-1];(G==null?void 0:G.role)==="assistant"&&!(G!=null&&G.streaming)&&dn(a)}},[h]);const On=async()=>{try{const G=await Ze(Y(M,"settings","ai"));G.exists()&&P(G.data())}catch{}},en=async()=>{if(!(!r||a.length>0))try{const G=await Ze(Y(M,"chatHistory",r.uid));if(G.exists()){const Ie=(G.data().messages||[]).filter(Se=>Se.role&&Se.content);Ie.length>0&&(l(Ie),T(!0))}}catch{}},dn=async G=>{if(r)try{const Ie=G.filter(Se=>Se.role&&Se.content&&!Se.streaming).slice(-20).map(Se=>({role:Se.role,content:Se.content}));await mu(Y(M,"chatHistory",r.uid),{messages:Ie,updatedAt:new Date})}catch{}};b.useEffect(()=>{v&&!S&&e&&Vr()},[v,S,e]),b.useEffect(()=>{const G=(i==null?void 0:i.chatPersonality)||"coach";k.current&&k.current!==G&&S&&(T(!1),l([]),j([]),r&&mu(Y(M,"chatHistory",r.uid),{messages:[],updatedAt:new Date}).catch(()=>{})),k.current=G},[i==null?void 0:i.chatPersonality]);const tn=async()=>{if(r){x(!0);try{const[G,Ie,Se,B]=await Promise.all([T_.getByUser(r.uid).catch(()=>[]),WD.getByUser(r.uid,14).catch(()=>[]),I_.getByUser(r.uid).catch(()=>[]),qD.getByUser(r.uid).catch(()=>[])]);let W=[];try{(await _e(we(ne(M,"workouts"),se("userId","==",r.uid),Wt(50)))).docs.forEach(xe=>{var ve,pt;const Ne=xe.data();if(Ne.status!=="completed")return;const Ge=((pt=(ve=Ne.date)==null?void 0:ve.toDate)==null?void 0:pt.call(ve))||new Date(Ne.date);W.push({...Ne,date:Ge.toISOString().split("T")[0]})})}catch(te){console.error(te)}try{(await _e(we(ne(M,"groupWorkouts"),se("assignedTo","==",r.uid),Wt(30)))).docs.forEach(xe=>{var ve,pt;const Ne=xe.data();if(Ne.status!=="completed")return;const Ge=((pt=(ve=Ne.date)==null?void 0:ve.toDate)==null?void 0:pt.call(ve))||new Date(Ne.date);W.push({...Ne,date:Ge.toISOString().split("T")[0],isGroup:!0})})}catch(te){console.error(te)}W.sort((te,xe)=>new Date(xe.date||0)-new Date(te.date||0));const J=W.filter(te=>te.workoutType==="cardio").slice(0,10),he=W.filter(te=>te.workoutType!=="cardio"),pe={},De={},Le={},qe={},ir=new Date;he.slice(0,25).forEach(te=>{var Ge;const xe=(Ge=te.date)!=null&&Ge.toDate?te.date.toDate():te.date?new Date(te.date):null,Ne=xe&&!isNaN(xe.getTime())?Math.floor((ir-xe)/(1e3*60*60*24)):null;(te.exercises||[]).forEach(ve=>{if(!ve.name)return;let pt=0;(ve.sets||[]).forEach(nn=>{const z=parseFloat(nn.actualWeight)||parseFloat(nn.prescribedWeight)||0,Ee=parseInt(nn.actualReps)||parseInt(nn.prescribedReps)||0,re=parseInt(nn.rpe)||0,We=parseInt(nn.painLevel)||0;if(!(!nn.actualWeight&&!nn.actualReps&&nn.prescribedWeight)){if(z>0&&Ee>0&&Ee<=12){const it=Math.round(z*(1+Ee/30));pt=Math.max(pt,it),(!pe[ve.name]||it>pe[ve.name].e1rm)&&(pe[ve.name]={weight:z,reps:Ee,e1rm:it})}We>0&&(De[ve.name]||(De[ve.name]={count:0,maxPain:0,lastDaysAgo:null,recentCount:0}),De[ve.name].count++,De[ve.name].maxPain=Math.max(De[ve.name].maxPain,We),Ne!==null&&((De[ve.name].lastDaysAgo===null||Ne<De[ve.name].lastDaysAgo)&&(De[ve.name].lastDaysAgo=Ne),Ne<=30&&De[ve.name].recentCount++)),re>0&&(Le[ve.name]||(Le[ve.name]={total:0,count:0}),Le[ve.name].total+=re,Le[ve.name].count++)}}),pt>0&&Ne!==null&&(qe[ve.name]||(qe[ve.name]=[]),qe[ve.name].push({daysSince:Ne,e1rm:pt}))})});const sr={};Object.entries(Le).forEach(([te,xe])=>{sr[te]=Math.round(xe.total/xe.count*10)/10}),Object.values(De).forEach(te=>{const xe=te.lastDaysAgo;xe==null?te.urgency="historical":xe<=7?te.urgency="high":xe<=30?te.urgency="moderate":xe<=90?te.urgency="low":te.urgency="historical"}),Object.keys(pe).forEach(te=>{const xe=qe[te]||[];if(xe.length<2)return;const Ne=xe.filter(z=>z.daysSince<=21),Ge=xe.filter(z=>z.daysSince>=42&&z.daysSince<=84);if(Ne.length===0||Ge.length===0)return;const ve=Math.max(...Ne.map(z=>z.e1rm)),pt=Math.max(...Ge.map(z=>z.e1rm)),nn=ve-pt;pe[te].trend={direction:nn>5?"progressing":nn<-5?"declining":"stalled",recentE1rm:ve,priorE1rm:pt,deltaLbs:nn}});const Et={};if(Ie.length>0){const te=Ie.filter(ve=>ve.sleep).slice(0,7);te.length&&(Et.avgSleep=Math.round(te.reduce((ve,pt)=>ve+pt.sleep,0)/te.length*10)/10);const xe=Ie.filter(ve=>ve.protein).slice(0,7);xe.length&&(Et.avgProtein=Math.round(xe.reduce((ve,pt)=>ve+pt.protein,0)/xe.length));const Ne=Ie.filter(ve=>ve.calories).slice(0,7);Ne.length&&(Et.avgCalories=Math.round(Ne.reduce((ve,pt)=>ve+pt.calories,0)/Ne.length));const Ge=Ie.filter(ve=>ve.weight).slice(0,3);Ge.length&&(Et.recentWeight=Ge[0].weight)}const En={};i&&(i.weight&&(En.weight=i.weight),i.height&&(En.height=i.height),i.age&&(En.age=i.age),i.activityLevel&&(En.activityLevel=i.activityLevel),i.displayName&&(En.displayName=i.displayName)),Et.recentWeight&&(En.weight=Et.recentWeight);const Mn=he.slice(0,3).map(te=>({name:te.name,date:te.date,isGroup:te.isGroup||!1,groupName:te.groupName,userNotes:te.userNotes||"",exercises:(te.exercises||[]).map(xe=>({name:xe.name,type:xe.type||"weight",userNotes:xe.userNotes||"",sets:(xe.sets||[]).map(Ne=>({prescribedWeight:Ne.prescribedWeight||"",prescribedReps:Ne.prescribedReps||"",actualWeight:Ne.actualWeight||"",actualReps:Ne.actualReps||"",prescribedTime:Ne.prescribedTime||"",actualTime:Ne.actualTime||"",rpe:Ne.rpe||"",painLevel:parseInt(Ne.painLevel)||0}))}))})),ci=he.slice(3,8).map(te=>{var xe,Ne;return{name:te.name,date:te.date,exerciseCount:((xe=te.exercises)==null?void 0:xe.length)||0,exercises:(Ne=te.exercises)==null?void 0:Ne.slice(0,4).map(Ge=>{var ve;return{name:Ge.name,sets:((ve=Ge.sets)==null?void 0:ve.length)||0}})}}),[jo,Ut,Oi]=await Promise.allSettled([_e(we(ne(M,"formCheckJobs"),se("userId","==",r.uid),se("status","==","complete"),Jt("createdAt","desc"),Wt(5))).catch(()=>_e(we(ne(M,"formCheckJobs"),se("userId","==",r.uid),se("status","==","complete"),Wt(5)))).then(te=>{const xe=[];return te.forEach(Ne=>{var ve,pt,nn,z,Ee;const Ge=Ne.data();Ge.analysis&&xe.push({exercise:Ge.analysis.exercise||"Unknown",score:Ge.analysis.overallScore||0,summary:Ge.analysis.overallSummary||"",focusCue:((ve=Ge.analysis.focusDrill)==null?void 0:ve.cue)||"",injuryRisks:(Ge.analysis.injuryRisks||[]).filter(re=>re.severity!=="low").map(re=>({area:re.area,severity:re.severity})),date:((Ee=(z=(nn=(pt=Ge.createdAt)==null?void 0:pt.toDate)==null?void 0:nn.call(pt))==null?void 0:z.toISOString)==null?void 0:Ee.call(z).split("T")[0])||""})}),xe.sort((Ne,Ge)=>(Ge.date||"").localeCompare(Ne.date||"")),xe}),pQ.getLatestScores(r.uid),Ze(Y(M,"users",r.uid)).then(te=>te.exists()?te.data():{})]),Oo=jo.status==="fulfilled"?jo.value:[],Or=Ut.status==="fulfilled"?Ut.value:null,di=Oi.status==="fulfilled"?Oi.value:{},ys=di.adminNotes||"",hi=di.aiContextOverrides;hi&&(hi.maxLifts&&Object.entries(hi.maxLifts).forEach(([te,xe])=>{pe[te]={...pe[te]||{},...xe}}),hi.excludeExercises&&hi.excludeExercises.forEach(te=>{const xe=te.toLowerCase();Object.keys(pe).forEach(Ne=>{const Ge=Ne.toLowerCase();(xe===Ge||Ge.includes(xe)||xe.includes(Ge))&&delete pe[Ne]})}));const Mi={profile:En,recentWorkoutsFull:Mn,recentWorkouts:ci,cardioWorkouts:J.slice(0,5).map(te=>({name:te.name,date:te.date,duration:te.duration,cardioType:te.cardioType,distance:te.distance})),goals:G.filter(te=>te.status==="active").map(te=>({lift:te.lift,metricType:te.metricType,currentWeight:te.currentWeight||te.currentValue,targetWeight:te.targetWeight||te.targetValue,targetDate:te.targetDate})),maxLifts:pe,painHistory:De,rpeAverages:sr,health:Et,schedules:Se.filter(te=>te.active!==!1).map(te=>({name:te.name,days:te.days,duration:te.duration})),recurringActivities:B.filter(te=>te.active).map(te=>({name:te.name,type:te.type,days:te.days})),ouraData:Or,formChecks:Oo,adminNotes:ys};I(Mi)}catch(G){console.error("Error loading user context:",G),I({recentWorkouts:[],goals:[]})}finally{x(!1)}}},Vr=async()=>{var Ie;if(!v||!r)return;const G=(i==null?void 0:i.credits)??0;if(!o&&G<S_["ask-assistant"]){l([{role:"assistant",content:"Hey! I'm your training coach. You're low on credits right now, but feel free to ask when you get more."}]),j(["What should I do today?","How's my progress?","Generate a workout","Review my last session"]),T(!0);return}V(!0);try{rr();const Se=await Uf.askAssistant(null,{...v,personality:(i==null?void 0:i.chatPersonality)||"coach"},"greeting");l([{role:"assistant",content:Se.greeting||"Hey! Ready to train? I've got your full history  ask me anything."}]),(Ie=Se.quickActions)!=null&&Ie.length?j(Se.quickActions):j(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}catch(Se){console.error("Greeting fetch error:",Se),l([{role:"assistant",content:"Hey! I'm your training coach  I've got your full workout history loaded. Ask me anything about your lifts, pain, goals, or say 'generate a workout'."}]),j(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}finally{V(!1),T(!0)}},Vi=()=>{const G=Date.now();try{const Ie=i==null?void 0:i.rateLimitResetAt;if(Ie){const he=new Date(Ie).getTime(),pe=localStorage.getItem("ai_rate_limit_checked");if(!pe||he>parseInt(pe))return localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit"),localStorage.setItem("ai_rate_limit_checked",String(G)),R({count:0,resetTime:G+ke,dailyCount:0,dailyResetTime:G+O}),null}const Se=localStorage.getItem("ai_rate_limit");let B=Se?JSON.parse(Se):{count:0,resetTime:G+ke};G>B.resetTime&&(B={count:0,resetTime:G+ke});const W=localStorage.getItem("ai_daily_limit");let J=W?JSON.parse(W):{count:0,resetTime:G+O};return G>J.resetTime&&(J={count:0,resetTime:G+O}),R({...B,dailyCount:J.count,dailyResetTime:J.resetTime}),J.count>=_t||B.count>=ft?"overage":null}catch{return null}},jr=()=>{const G=Date.now();try{const Ie=localStorage.getItem("ai_rate_limit");let Se=Ie?JSON.parse(Ie):{count:0,resetTime:G+ke};G>Se.resetTime&&(Se={count:0,resetTime:G+ke});const B=localStorage.getItem("ai_daily_limit");let W=B?JSON.parse(B):{count:0,resetTime:G+O};return G>W.resetTime&&(W={count:0,resetTime:G+O}),W.count>=_t||Se.count>=ft?$e:1}catch{return 1}},rr=()=>{const G=Date.now();try{const Ie=localStorage.getItem("ai_rate_limit");let Se=Ie?JSON.parse(Ie):{count:0,resetTime:G+ke};G>Se.resetTime?Se={count:1,resetTime:G+ke}:Se.count+=1,localStorage.setItem("ai_rate_limit",JSON.stringify(Se));const B=localStorage.getItem("ai_daily_limit");let W=B?JSON.parse(B):{count:0,resetTime:G+O};G>W.resetTime?W={count:1,resetTime:G+O}:W.count+=1,localStorage.setItem("ai_daily_limit",JSON.stringify(W)),R({...Se,dailyCount:W.count,dailyResetTime:W.resetTime})}catch{localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit")}},li=async G=>{if(!G.trim()||h)return;const Ie=o,Se=(i==null?void 0:i.credits)??0,B=jr(),W=B>1;if(!Ie&&Se<B){const he=W?`You've hit the rate limit and overage messages cost ${$e} credits each. You only have ${Se}. Resets soon.`:"You're out of AI credits. More credits coming soon  check Settings for your usage.";l(pe=>[...pe,{role:"user",content:G},{role:"assistant",content:he}]);return}Vi(),l(he=>[...he,{role:"user",content:G}]),p(!0),rr(),r!=null&&r.uid&&!Ie&&s({credits:Se-B});const J={userId:r==null?void 0:r.uid,personality:(i==null?void 0:i.chatPersonality)||"coach",...v||{}};try{l(pe=>[...pe,{role:"assistant",content:"",streaming:!0}]);let he=!1;if(await Uf.askAssistantStream(G,J,pe=>{l(De=>{const Le=[...De],qe=Le[Le.length-1];return Le[Le.length-1]={...qe,content:qe.content+pe},Le})},pe=>{l(De=>{const Le=[...De],qe=Le[Le.length-1],ir=qe.content.replace(/```workout[\s\S]*?```/g,"").trim();return Le[Le.length-1]={...qe,content:ir,workout:pe.workout,streaming:!1},Le}),p(!1)},pe=>{console.warn("Stream failed, falling back:",pe),he=!0}),he){l(De=>De.filter(Le=>!(Le.role==="assistant"&&Le.streaming)));const pe=await Uf.askAssistant(G,J);l(De=>[...De,{role:"assistant",content:pe.message,workout:pe.workout}]),p(!1)}}catch{r!=null&&r.uid&&!Ie&&s({credits:Se}),l(pe=>{var Le;const De=pe.filter(qe=>!(qe.role==="assistant"&&qe.streaming&&!qe.content));return[...De,...(Le=De[De.length-1])!=null&&Le.streaming?[]:[{role:"assistant",content:"Sorry, I couldn't process that. Please try again."}]]}),p(!1)}},ji=G=>{c(G.target.value);const Ie=G.target;Ie.style.height="auto",Ie.style.height=Math.min(Ie.scrollHeight,120)+"px"},Vo=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),Hr(G))},Hr=async G=>{if(G.preventDefault(),!u.trim()||h)return;const Ie=u.trim();c(""),ue.current&&(ue.current.style.height="auto"),await li(Ie)},ui=async G=>{await li(G)},Kr=async(G,Ie)=>{if(!(!r||!G)){y(Ie);try{const Se={name:G.name||"AI Generated Workout",date:new Date,exercises:G.exercises.map((W,J)=>({id:Date.now()+J,name:W.name,sets:W.sets.map((he,pe)=>{var De,Le;return{id:Date.now()+J*100+pe,prescribedWeight:((De=he.prescribedWeight)==null?void 0:De.toString())||"",prescribedReps:((Le=he.prescribedReps)==null?void 0:Le.toString())||"",actualWeight:"",actualReps:"",rpe:"",painLevel:0}}),notes:W.notes||""})),notes:"Generated by AI Coach",status:"scheduled"},B=await La.create(r.uid,Se);l(W=>W.map((J,he)=>he===Ie?{...J,workoutSaved:!0,savedWorkoutId:B.id}:J))}catch(Se){console.error("Error saving workout:",Se),alert("Failed to save workout")}finally{y(null)}}},gs=E||!S&&_;return f.jsx(io,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),f.jsxs(Ue.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:`fixed inset-4 lg:inset-auto lg:bottom-6 lg:right-6 lg:w-96 lg:h-[600px]\r
              bg-iron-900 border border-iron-700/50 rounded-2xl z-50\r
              flex flex-col overflow-hidden shadow-2xl`,style:H>0?{bottom:`${H+4}px`}:void 0,children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-iron-800",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-9 h-9 rounded-full bg-flame-500/20 flex items-center justify-center",children:f.jsx(Oa,{className:"w-4 h-4 text-flame-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-iron-100",children:"AI Coach"}),f.jsx("p",{className:"text-xs text-iron-500",children:_?"Loading your data...":v?"Your data is loaded":"Ready to help"})]})]}),f.jsx("button",{onClick:()=>n(!1),className:`p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800\r
                  rounded-full transition-colors`,children:f.jsx(wu,{className:"w-5 h-5"})})]}),f.jsxs("div",{ref:D,className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide relative",children:[gs&&a.length===0&&f.jsxs("div",{className:"flex gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-800 border border-iron-700 flex items-center justify-center flex-shrink-0",children:f.jsx(uy,{className:"w-4 h-4 text-flame-400"})}),f.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-400",children:[f.jsx(si,{className:"w-3.5 h-3.5 animate-spin text-flame-400"}),f.jsx("span",{children:_?"Loading your training data...":"Getting your personalized greeting..."})]})})]}),a.map((G,Ie)=>{var Se,B,W;return f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${G.role==="user"?"flex-row-reverse":""}`,children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                      ${G.role==="user"?"bg-flame-500":"bg-iron-800 border border-iron-700"}`,children:G.role==="user"?f.jsx(Z2,{className:"w-4 h-4 text-white"}):f.jsx(uy,{className:"w-4 h-4 text-flame-400"})}),f.jsxs("div",{className:"max-w-[85%] space-y-2",children:[f.jsx("div",{className:`px-4 py-2.5 rounded-2xl text-sm
                        ${G.role==="user"?"bg-flame-500 text-white rounded-tr-md":"bg-iron-800 text-iron-100 rounded-tl-md"}`,children:G.role==="assistant"?f.jsxs("div",{className:"chat-markdown",children:[f.jsx(eQ,{components:{p:({children:J})=>f.jsx("p",{className:"mb-2 last:mb-0",children:J}),strong:({children:J})=>f.jsx("strong",{className:"text-iron-50 font-semibold",children:J}),em:({children:J})=>f.jsx("em",{className:"text-flame-300",children:J}),ul:({children:J})=>f.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:J}),ol:({children:J})=>f.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:J}),li:({children:J})=>f.jsx("li",{className:"text-iron-200",children:J}),code:({inline:J,children:he})=>J?f.jsx("code",{className:"bg-iron-700 px-1 py-0.5 rounded text-flame-300 text-xs",children:he}):f.jsx("pre",{className:"bg-iron-900 p-2 rounded-lg my-2 overflow-x-auto text-xs",children:f.jsx("code",{children:he})}),h3:({children:J})=>f.jsx("h3",{className:"font-semibold text-iron-50 mt-2 mb-1",children:J})},children:G.content}),G.streaming&&f.jsx("span",{className:"inline-block w-1.5 h-4 bg-flame-400 animate-pulse ml-0.5 rounded-sm"})]}):G.content}),G.workout&&f.jsxs("div",{className:"bg-iron-800/50 border border-iron-700 rounded-xl p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gr,{className:"w-4 h-4 text-flame-400"}),f.jsx("span",{className:"font-medium text-iron-100 text-sm",children:G.workout.name})]}),f.jsxs("span",{className:"text-xs text-iron-500",children:[(Se=G.workout.exercises)==null?void 0:Se.length," exercises"]})]}),f.jsxs("div",{className:"text-xs text-iron-400 space-y-1",children:[(B=G.workout.exercises)==null?void 0:B.slice(0,3).map((J,he)=>{var pe;return f.jsxs("div",{children:[J.name,": ",(pe=J.sets)==null?void 0:pe.length," sets"]},he)}),((W=G.workout.exercises)==null?void 0:W.length)>3&&f.jsxs("div",{className:"text-iron-500",children:["+",G.workout.exercises.length-3," more..."]})]}),G.workoutSaved?f.jsx("button",{onClick:()=>{n(!1),t(`/workouts/${G.savedWorkoutId}`)},className:"w-full py-2 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:"Saved - View Workout"}):f.jsx("button",{onClick:()=>Kr(G.workout,Ie),disabled:m===Ie,className:"w-full py-2 bg-flame-500/20 hover:bg-flame-500/30 text-flame-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:m===Ie?f.jsxs(f.Fragment,{children:[f.jsx(si,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(a_,{className:"w-4 h-4"}),"Add to My Workouts"]})})]})]})]},Ie)}),h&&!a.some(G=>G.streaming&&G.content)&&f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3",children:[f.jsx("div",{className:`w-8 h-8 rounded-full bg-iron-800 border border-iron-700\r
                    flex items-center justify-center`,children:f.jsx(uy,{className:"w-4 h-4 text-flame-400"})}),f.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"300ms"}})]})})]}),f.jsx("div",{ref:ce})]}),f.jsx(io,{children:!ge&&f.jsxs(Ue.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:()=>{rt(),X(!1),be(!0)},className:`absolute bottom-36 left-1/2 -translate-x-1/2 z-10\r
                    w-8 h-8 rounded-full bg-iron-700 border border-iron-600\r
                    flex items-center justify-center\r
                    hover:bg-iron-600 transition-colors shadow-lg`,children:[f.jsx(Ul,{className:"w-4 h-4 text-iron-300"}),Ae&&f.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-flame-500 rounded-full"})]})}),L.length>0&&a.length<=2&&!h&&!gs&&f.jsx("div",{className:"px-4 pb-2",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((G,Ie)=>f.jsx("button",{onClick:()=>ui(G),disabled:h,className:`px-3 py-1.5 text-xs bg-iron-800 text-iron-300\r
                        border border-iron-700 rounded-full\r
                        hover:border-flame-500/50 hover:text-iron-100\r
                        transition-colors disabled:opacity-50`,children:G},Ie))})}),f.jsxs("div",{className:"border-t border-iron-800",children:[jr()>1&&f.jsx("div",{className:"mx-4 mt-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:f.jsxs("p",{className:"text-[11px] text-yellow-400",children:["Rate limit reached  messages now cost ",$e," credits each until reset"]})}),f.jsxs("div",{className:"px-4 pt-2 flex justify-between text-[10px] text-iron-600",children:[f.jsxs("span",{children:[(i==null?void 0:i.credits)??0," credits left"]}),f.jsxs("span",{children:[jr()," credit",jr()>1?"s":""," / msg"]})]}),f.jsx("form",{onSubmit:Hr,className:"px-4 pb-4 pt-1.5",children:f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx("textarea",{ref:ue,value:u,onChange:ji,onKeyDown:Vo,placeholder:"Ask about your workouts...","aria-label":"Chat message",rows:1,className:`flex-1 bg-iron-800 text-iron-100 px-4 py-2.5
                    ${u.includes(`
`)?"rounded-2xl":"rounded-full"}
                    border border-iron-700 focus:border-flame-500/50 focus:outline-none
                    placeholder:text-iron-500 text-sm resize-none overflow-hidden`,style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!u.trim()||h,className:`w-10 h-10 rounded-full bg-flame-500 text-white\r
                    flex items-center justify-center\r
                    hover:bg-flame-400 disabled:opacity-50 disabled:cursor-not-allowed\r
                    transition-colors`,children:h?f.jsx(si,{className:"w-4 h-4 animate-spin"}):f.jsx(J2,{className:"w-4 h-4"})})]})})]})]})]})})}const cb=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,gQ=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;function yQ(){const[t,e]=b.useState(null),[n,r]=b.useState(!1),[i,s]=b.useState(!1),[o,a]=b.useState(!1);b.useEffect(()=>{if(gQ())return;const c=localStorage.getItem("installPromptDismissed");if(c&&Date.now()-parseInt(c)<7*24*60*60*1e3)return;const h=p=>{p.preventDefault(),e(p),setTimeout(()=>r(!0),3e3)};if(window.addEventListener("beforeinstallprompt",h),cb()){const p=parseInt(localStorage.getItem("appVisits")||"0")+1;localStorage.setItem("appVisits",String(p)),p>=3&&setTimeout(()=>r(!0),3e3)}return()=>window.removeEventListener("beforeinstallprompt",h)},[]);const l=async()=>{t?(t.prompt(),(await t.userChoice).outcome==="accepted"&&r(!1),e(null)):cb()&&s(!0)},u=()=>{r(!1),a(!0),localStorage.setItem("installPromptDismissed",String(Date.now()))};return!n||o?null:i?f.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end justify-center p-4",children:f.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-2xl p-5 max-w-sm w-full mb-4 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Add to Home Screen"}),f.jsx("button",{onClick:u,className:"text-iron-500 hover:text-iron-300",children:f.jsx(wu,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(jq,{className:"w-4 h-4 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:"1. Tap the Share button"}),f.jsx("p",{className:"text-xs text-iron-500",children:"In Safari's bottom toolbar"})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(a_,{className:"w-4 h-4 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'2. Tap "Add to Home Screen"'}),f.jsx("p",{className:"text-xs text-iron-500",children:"Scroll down in the share sheet"})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(fS,{className:"w-4 h-4 text-green-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'3. Tap "Add"'}),f.jsx("p",{className:"text-xs text-iron-500",children:"The app will appear on your home screen"})]})]})]}),f.jsx("button",{onClick:u,className:"w-full mt-4 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Got it"})]})}):f.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 lg:left-auto lg:right-6 lg:bottom-6 lg:max-w-sm",children:f.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-xl p-3 shadow-xl flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:f.jsx(fS,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100",children:"Install Bench Only"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Add to home screen for the full experience"})]}),f.jsx("button",{onClick:l,className:"px-3 py-1.5 bg-flame-500 text-white text-sm font-medium rounded-lg hover:bg-flame-400 transition-colors flex-shrink-0",children:"Install"}),f.jsx("button",{onClick:u,className:"text-iron-600 hover:text-iron-400 flex-shrink-0",children:f.jsx(wu,{className:"w-4 h-4"})})]})})}class vQ extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){var e;return this.state.hasError?f.jsx("div",{className:"min-h-[50vh] flex items-center justify-center p-6",children:f.jsxs("div",{className:"text-center max-w-md",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:f.jsx(wq,{className:"w-8 h-8 text-red-400"})}),f.jsx("h2",{className:"text-lg font-display text-iron-100 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-sm text-iron-500 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),f.jsxs("div",{className:"flex gap-3 justify-center",children:[f.jsxs("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"btn-secondary flex items-center gap-2 text-sm",children:[f.jsx(Nq,{className:"w-4 h-4"}),"Try Again"]}),f.jsxs("button",{onClick:()=>{window.location.href="/today"},className:"btn-primary flex items-center gap-2 text-sm",children:[f.jsx(X2,{className:"w-4 h-4"}),"Go Home"]})]})]})}):this.props.children}}const wQ=[{path:"/today",icon:X2,label:"Today",badgeKey:"workouts"},{path:"/workouts",icon:gr,label:"Workouts"},{path:"/programs",icon:Pq,label:"Programs",beta:!0},{path:"/groups",icon:va,label:"Groups"},{path:"/feed",icon:K2,label:"Feed"},{path:"/goals",icon:ya,label:"Goals"},{path:"/docs",icon:qc,label:"Docs"},{path:"/profile",icon:Z2,label:"Profile"}];function xQ(){const t=Ba(),e=Io(),{user:n,userProfile:r,signOut:i,signInWithGoogle:s,isGuest:o,isRealAdmin:a,isAppAdmin:l,realUser:u,impersonating:c,stopImpersonating:h}=ai(),{sidebarOpen:p,setSidebarOpen:m,chatOpen:y,toggleChat:v}=sD(),[I,_]=b.useState(!1),[x,E]=b.useState(!1),[V,L]=b.useState(0),[j,S]=b.useState(0),[T,k]=b.useState(0);b.useEffect(()=>{n&&!o&&Xc.getPendingReviews(n.uid).then(H=>L(H.length)).catch(H=>console.error("[Layout]",H.message))},[n,o,t.pathname]),b.useEffect(()=>{n&&!o&&Yc.getUnread(n.uid).then(H=>k(H.length)).catch(H=>console.error("[Layout]",H.message))},[n,o,t.pathname]),b.useEffect(()=>{n&&!o&&HD.getPendingSharedCount(n.uid).then(H=>S(H)).catch(()=>{})},[n,o,t.pathname]),b.useEffect(()=>{a&&(u!=null&&u.uid)?wa.setAdminContext(u.uid):wa.clearAdminContext()},[a,u==null?void 0:u.uid]),b.useEffect(()=>{n&&!o&&wa.logPageView(n.uid,t.pathname)},[t.pathname,n,o]);const C=l,P=GD.isTrainer(r,n==null?void 0:n.email),N=(()=>{let H=[...wQ];return P&&H.push({path:"/trainer",icon:Sq,label:"Trainer",isTrainer:!0}),C&&H.push({path:"/admin",icon:Vq,label:"Admin",isAdmin:!0}),H})(),R=async()=>{await i(),e("/")};return f.jsxs("div",{className:"min-h-screen bg-iron-950 flex overflow-x-clip",children:[o&&f.jsx("div",{className:`fixed left-0 right-0 z-30 bg-gradient-to-r from-flame-600 to-flame-500 text-white py-2.5 px-4\r
          top-14 lg:top-0`,children:f.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm min-w-0",children:[f.jsx(Wp,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("span",{className:"hidden sm:inline",children:"Demo Mode  your data won't be saved"}),f.jsx("span",{className:"sm:hidden truncate",children:"Demo Mode"})]}),f.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[f.jsx("button",{onClick:R,className:"px-3 py-1 text-xs font-semibold bg-white/20 hover:bg-white/30 rounded-md transition-colors",children:"Exit Demo"}),f.jsx("button",{onClick:s,className:"px-3 py-1 text-xs font-semibold bg-white text-flame-600 hover:bg-white/90 rounded-md transition-colors",children:"Sign Up Free"})]})]})}),f.jsxs("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30
          ${p?"w-64":"w-20"} 
          ${o?"top-10":"top-0"}
          bg-iron-900/80 backdrop-blur-sm border-r border-iron-800
          transition-all duration-300`,children:[f.jsx("div",{className:"h-16 flex items-center px-4 border-b border-iron-800",children:f.jsxs(dt,{to:"/today",className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-plate bg-flame-500 flex items-center justify-center",children:f.jsx(gr,{className:"w-5 h-5 text-white"})}),p&&f.jsx(Ue.span,{initial:{opacity:0},animate:{opacity:1},className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]})}),f.jsx("nav",{className:"flex-1 py-4 px-2 space-y-1 overflow-y-auto",children:N.map(H=>{const ge=t.pathname===H.path||H.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return f.jsxs(dt,{to:H.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-plate
                  transition-all duration-200 group relative
                  ${ge?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[ge&&f.jsx(Ue.div,{layoutId:"activeNav",className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-flame-500 rounded-r"}),f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx(H.icon,{className:"w-5 h-5"}),H.badgeKey==="workouts"&&V>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V>9?"9+":V}),H.path==="/workouts"&&j>0&&t.pathname!=="/workouts"&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-purple-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:j>9?"9+":j}),H.path==="/feed"&&T>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T>9?"9+":T})]}),p&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"font-medium",children:H.label}),H.beta&&f.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]})]},H.path)})}),f.jsxs("div",{className:"p-4 border-t border-iron-800",children:[!o&&p&&(r==null?void 0:r.credits)!==void 0&&f.jsxs(dt,{to:"/settings",className:"flex items-center gap-2 px-3 py-2 mb-3 rounded-lg bg-iron-800/50 hover:bg-iron-800 transition-colors",children:[f.jsx(Ma,{className:"w-4 h-4 text-flame-400"}),f.jsxs("span",{className:"text-sm text-iron-300",children:[f.jsx("span",{className:"font-medium text-iron-200",children:r.credits})," credits"]})]}),f.jsxs("div",{className:`flex items-center gap-3 ${p?"":"justify-center"}`,children:[f.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-9 h-9 rounded-full border-2 border-iron-700"}),p&&f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:n==null?void 0:n.displayName}),f.jsx("p",{className:"text-xs text-iron-500 truncate",children:(r==null?void 0:r.role)||"Member"})]})]}),p&&f.jsxs("button",{onClick:R,className:`mt-3 w-full flex items-center justify-center gap-2 px-3 py-2\r
                text-iron-400 hover:text-red-400 bg-iron-800/50 hover:bg-red-500/10\r
                rounded-plate transition-colors text-sm`,children:[f.jsx(mS,{className:"w-4 h-4"}),"Sign Out"]})]}),f.jsx("button",{onClick:()=>m(!p),className:`absolute -right-3 top-20 w-6 h-6 bg-iron-800 border border-iron-700\r
            rounded-full flex items-center justify-center text-iron-400\r
            hover:text-iron-100 hover:border-iron-600 transition-colors`,children:f.jsx(Cs,{className:`w-4 h-4 transition-transform ${p?"rotate-180":""}`})})]}),f.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 bg-iron-900 border-b border-iron-800 z-40",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:f.jsxs("div",{className:"h-14 flex items-center justify-between px-4",children:[f.jsxs(dt,{to:"/today",className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:f.jsx(gr,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[!o&&(r==null?void 0:r.credits)!==void 0&&f.jsxs(dt,{to:"/settings",className:"flex items-center gap-1 px-2 py-1 rounded-full bg-iron-800/80 mr-1",children:[f.jsx(Ma,{className:"w-3 h-3 text-flame-400"}),f.jsx("span",{className:"text-xs font-medium text-iron-300",children:r.credits})]}),T>0&&f.jsxs(dt,{to:"/feed",className:"w-10 h-10 flex items-center justify-center text-iron-300 relative",children:[f.jsx(Tq,{className:"w-5 h-5"}),f.jsx("span",{className:"absolute top-1.5 right-1.5 w-4 h-4 bg-flame-500 rounded-full text-[10px] text-white flex items-center justify-center font-medium",children:T>9?"9+":T})]}),f.jsx("button",{onClick:()=>_(!0),className:"w-12 h-12 flex items-center justify-center text-iron-300 active:bg-iron-800 rounded-xl transition-colors",children:f.jsx(Rq,{className:"w-7 h-7"})})]})]})}),f.jsxs("div",{className:"lg:hidden fixed bottom-6 right-4 z-30 flex flex-col items-end gap-3",style:{marginBottom:"env(safe-area-inset-bottom, 0px)"},children:[f.jsxs(io,{children:[x&&t.pathname!=="/form-check"&&f.jsxs(Ue.button,{initial:{opacity:0,scale:.3,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.3,y:20},transition:{duration:.2},onClick:()=>{e("/form-check"),E(!1)},"aria-label":"Form Check (Beta)",className:`w-11 h-11 bg-iron-800 border border-iron-700\r
                rounded-full shadow-lg flex items-center justify-center transition-colors relative`,children:[f.jsx(Gc,{className:"w-5 h-5 text-purple-400"}),f.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]},"fab-formcheck"),x&&f.jsx(Ue.button,{initial:{opacity:0,scale:.3,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.3,y:20},transition:{duration:.2,delay:.05},onClick:()=>{v(),E(!1)},"aria-label":"Open AI Chat",className:`w-11 h-11 bg-flame-500\r
                rounded-full shadow-lg flex items-center justify-center transition-colors`,children:f.jsx(Bl,{className:"w-5 h-5 text-white"})},"fab-chat")]}),f.jsx("button",{onClick:()=>E(!x),"aria-label":x?"Close menu":"Open actions menu","aria-expanded":x,className:`w-14 h-14 rounded-full shadow-lg shadow-flame-500/30
            flex items-center justify-center transition-all duration-200
            ${x?"bg-iron-700 rotate-0":"bg-flame-500 hover:bg-flame-600 active:bg-flame-700"}`,children:x?f.jsx(wu,{className:"w-6 h-6 text-white"}):f.jsx(Bl,{className:"w-6 h-6 text-white"})})]}),f.jsx(io,{children:I&&f.jsxs(f.Fragment,{children:[f.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),f.jsxs(Ue.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:`lg:hidden fixed right-0 top-0 bottom-0 w-72 bg-iron-900 z-50\r
                border-l border-iron-800 flex flex-col`,children:[f.jsxs("div",{className:"h-14 flex items-center justify-between px-4 border-b border-iron-800",children:[f.jsx("span",{className:"font-display text-lg text-iron-50",children:"Menu"}),f.jsx("button",{onClick:()=>_(!1),className:"p-2 text-iron-400 hover:text-iron-100",children:f.jsx(wu,{className:"w-5 h-5"})})]}),f.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:N.map(H=>{const ge=t.pathname===H.path||H.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return f.jsxs(dt,{to:H.path,onClick:()=>_(!1),className:`flex items-center gap-4 px-4 py-4 rounded-plate
                        transition-colors
                        ${ge?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[f.jsxs("div",{className:"relative",children:[f.jsx(H.icon,{className:"w-6 h-6"}),H.badgeKey==="workouts"&&V>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V>9?"9+":V}),H.path==="/workouts"&&j>0&&t.pathname!=="/workouts"&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-purple-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:j>9?"9+":j}),H.path==="/feed"&&T>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T>9?"9+":T})]}),f.jsx("span",{className:"font-medium text-lg",children:H.label}),H.beta&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]},H.path)})}),f.jsxs("div",{className:"p-4 border-t border-iron-800",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-10 h-10 rounded-full border-2 border-iron-700"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-iron-100",children:n==null?void 0:n.displayName}),f.jsx("p",{className:"text-sm text-iron-500",children:n==null?void 0:n.email})]})]}),f.jsxs("button",{onClick:R,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5\r
                    text-red-400 bg-red-500/10 hover:bg-red-500/20\r
                    rounded-plate transition-colors`,children:[f.jsx(mS,{className:"w-4 h-4"}),"Sign Out"]})]})]})]})}),f.jsx("main",{className:`flex-1 min-w-0 transition-all duration-300
        ${p?"lg:ml-64":"lg:ml-20"}
        ${o?"pt-[calc(env(safe-area-inset-top,0px)+3.5rem+2.5rem)] lg:pt-16":"pt-[calc(env(safe-area-inset-top,0px)+3.5rem)] lg:pt-0"}`,children:f.jsxs("div",{className:"min-h-screen p-4 lg:p-6 overflow-x-clip",children:[c&&f.jsxs("div",{className:"mb-4 -mt-1 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-center gap-3 flex-wrap",children:[f.jsx(Wp,{className:"w-4 h-4 text-amber-400 flex-shrink-0"}),f.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["Viewing as ",c.displayName||c.email]}),f.jsx("button",{onClick:()=>{h(),e("/admin")},className:"ml-auto px-3 py-1 text-xs font-medium bg-amber-500/20 hover:bg-amber-500/30 text-amber-300 rounded-lg transition-colors",children:"Exit"})]}),f.jsx(vQ,{children:f.jsx(MM,{})},t.pathname)]})}),f.jsxs("div",{className:`hidden lg:flex fixed bottom-6 right-6 z-30 flex-col gap-3 transition-all duration-200
        ${y?"scale-0 opacity-0":"scale-100 opacity-100"}`,children:[t.pathname!=="/form-check"&&f.jsxs("button",{onClick:()=>e("/form-check"),className:`w-11 h-11 rounded-full bg-iron-800 border border-iron-700 text-purple-400\r
              flex items-center justify-center shadow-lg relative\r
              hover:bg-iron-700 transition-all duration-200`,title:"Form Check (Beta)",children:[f.jsx(Gc,{className:"w-5 h-5"}),f.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]}),f.jsx("button",{onClick:v,className:`w-14 h-14 rounded-full bg-flame-500 text-white\r
            flex items-center justify-center shadow-glow-lg\r
            hover:bg-flame-400 transition-all duration-200`,children:f.jsx(Bl,{className:"w-6 h-6"})})]}),f.jsx(yQ,{}),f.jsx(mQ,{})]})}const db=[{text:"Reviewing your recent training sessions...",icon:"brain",delay:0},{text:"Analyzing strength progression trends...",icon:"calc",delay:800},{text:"Checking for pain history and injury risks...",icon:"alert",delay:1600},{text:"Calculating working weights from your e1RM data...",icon:"calc",delay:2400},{text:"Selecting exercises based on your focus area...",icon:"dumbbell",delay:3200},{text:"Building optimal set and rep schemes...",icon:"dumbbell",delay:4e3},{text:"Writing personalized coaching notes...",icon:"msg",delay:4800},{text:"Workout ready!",icon:"check",delay:5600}];function _Q(){const[t,e]=b.useState([]),[n,r]=b.useState(!1),[i,s]=b.useState(!1),o=b.useRef(null),a=b.useRef([]),l=()=>{e([]),r(!0),s(!0),a.current.forEach(clearTimeout),a.current=[],db.forEach((c,h)=>{const p=setTimeout(()=>{e(m=>[...m,c]),h===db.length-1&&r(!1)},c.delay);a.current.push(p)})};b.useEffect(()=>()=>a.current.forEach(clearTimeout),[]),b.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t]);const u={brain:f.jsx(dv,{className:"w-3 h-3 text-flame-400"}),alert:f.jsx("span",{className:"w-3 h-3 text-amber-400 text-[10px] leading-none flex items-center justify-center",children:""}),calc:f.jsx(Oa,{className:"w-3 h-3 text-purple-400"}),dumbbell:f.jsx(gr,{className:"w-3 h-3 text-cyan-400"}),msg:f.jsx(Bl,{className:"w-3 h-3 text-blue-400"}),check:f.jsx(Xi,{className:"w-3 h-3 text-green-400"})};return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-iron-800 bg-iron-900",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500/20 flex items-center justify-center",children:f.jsx(dv,{className:"w-3.5 h-3.5 text-flame-400"})}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Workout Generator"}),n&&f.jsx(si,{className:"w-4 h-4 text-flame-400 animate-spin ml-auto"}),!n&&i&&f.jsx(Xi,{className:"w-4 h-4 text-green-400 ml-auto"})]}),f.jsx("div",{ref:o,className:"p-4 min-h-[180px] max-h-[220px] overflow-y-auto",children:i?f.jsxs("div",{className:"space-y-2",children:[t.map((c,h)=>f.jsxs(Ue.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.25},className:"flex items-start gap-2.5",children:[f.jsx("div",{className:"mt-0.5 w-5 h-5 rounded bg-iron-800 flex items-center justify-center flex-shrink-0",children:u[c.icon]}),f.jsx("p",{className:`text-sm leading-relaxed ${c.icon==="check"?"text-green-400 font-medium":"text-iron-300"}`,children:c.text})]},h)),n&&f.jsxs("div",{className:"flex items-center gap-1.5 pt-1 ml-7",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse"}),f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),!n&&i&&f.jsx("button",{onClick:l,className:"text-xs text-iron-500 hover:text-iron-300 mt-2 ml-7",children:"Run again"})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-[160px] gap-3",children:[f.jsx("p",{className:"text-sm text-iron-500",children:"See how the AI builds your workout"}),f.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-flame-500 hover:bg-flame-600 text-white text-sm rounded-lg transition-colors",children:[f.jsx(jf,{className:"w-3.5 h-3.5"}),"Run Demo"]})]})})]})}function EQ(){return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800",children:[f.jsx("p",{className:"text-[10px] text-iron-500",children:"Tuesday, February 11"}),f.jsx("p",{className:"text-sm font-display text-iron-100",children:"Good morning, Alex"})]}),f.jsxs("div",{className:"p-3 space-y-2.5",children:[f.jsx("div",{className:"bg-iron-800/60 rounded-xl p-3 border border-flame-500/20",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500/10 flex items-center justify-center",children:f.jsx(gr,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:"Push Day  Chest & Triceps"}),f.jsx("p",{className:"text-[11px] text-iron-500",children:"6 exercises  AI Generated"})]})]})}),f.jsx("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:f.jsx("div",{className:"flex gap-1.5 justify-between",children:["M","T","W","T","F","S","S"].map((t,e)=>f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx("span",{className:`text-[9px] ${e===1?"text-flame-400":"text-iron-600"}`,children:t}),f.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-[10px] ${e===0?"bg-green-500/20 text-green-400":e===1?"bg-flame-500/20 text-flame-400 ring-1 ring-flame-500/30":e===4?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/20":"bg-iron-800/50 text-iron-600"}`,children:10+e})]},e))})}),f.jsxs("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs("span",{className:"text-[10px] text-iron-400 flex items-center gap-1",children:[f.jsx(ya,{className:"w-3 h-3 text-flame-400"})," Bench Press 225 lbs"]}),f.jsx("span",{className:"text-[10px] text-flame-400",children:"87%"})]}),f.jsx("div",{className:"h-1.5 bg-iron-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-flame-500 to-flame-400 rounded-full",style:{width:"87%"}})})]})]})]})}function TQ(){return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:f.jsx(va,{className:"w-3.5 h-3.5 text-cyan-400"})}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Morning Crew"}),f.jsx("span",{className:"text-[10px] text-iron-500 ml-auto",children:"3 athletes"})]}),f.jsxs("div",{className:"p-3 space-y-2",children:[[{name:"You",status:"Completed",color:"green"},{name:"Jordan",status:"In Progress",color:"amber"},{name:"Sam",status:"Assigned",color:"iron"}].map((t,e)=>f.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2.5 bg-iron-800/40 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-iron-700 flex items-center justify-center text-[10px] text-iron-400",children:t.name[0]}),f.jsx("span",{className:"text-xs text-iron-300",children:t.name})]}),f.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${t.color==="green"?"bg-green-500/20 text-green-400":t.color==="amber"?"bg-amber-500/20 text-amber-400":"bg-iron-700 text-iron-500"}`,children:t.status})]},e)),f.jsx("div",{className:"pt-1 text-[10px] text-iron-500 text-center",children:"AI generates personalized weights for each athlete"})]})]})}function IQ(){const t=[{phase:"Setup",score:9,color:"green"},{phase:"Descent",score:8,color:"green"},{phase:"Bottom",score:6,color:"yellow"},{phase:"Ascent",score:7,color:"yellow"},{phase:"Lockout",score:9,color:"green"}];return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/15 flex items-center justify-center",children:f.jsx("span",{className:"text-lg font-display font-bold text-green-400",children:"8"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Barbell Back Squat"}),f.jsx("p",{className:"text-[10px] text-iron-500",children:"Good depth, minor knee cave on ascent"})]}),f.jsx("span",{className:"text-[10px] text-iron-500",children:"5 frames"})]}),f.jsxs("div",{className:"px-4 pt-3 pb-2",children:[f.jsx("div",{className:"flex gap-1 mb-2",children:t.map((e,n)=>f.jsx("div",{className:`flex-1 h-1.5 rounded-full ${e.color==="green"?"bg-green-500":"bg-yellow-500"} ${n===2?"ring-1 ring-white/30":"opacity-50"}`},n))}),f.jsxs("div",{className:"text-[10px] text-iron-500 flex justify-between",children:[f.jsx("span",{children:"Setup"}),f.jsx("span",{children:"Lockout"})]})]}),f.jsx("div",{className:"px-4 pb-3",children:f.jsxs("div",{className:"bg-iron-800/50 rounded-lg p-2.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("span",{className:"text-[10px] font-semibold text-yellow-400",children:"Frame 3  Bottom"}),f.jsx("span",{className:"text-[10px] font-bold text-yellow-400",children:"6/10"})]}),f.jsx("p",{className:"text-[11px] text-iron-400 leading-relaxed",children:"Slight knee cave at the bottom position. Depth is good  hip crease below knee line."}),f.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[f.jsx("span",{className:"text-flame-400 text-[10px]",children:""}),f.jsx("span",{className:"text-[10px] text-iron-500",children:"Push knees out over toes on the way down"})]})]})})]})}function SQ(){const t=Io(),{user:e,signInWithGoogle:n,signInAsGuest:r,loading:i}=ai(),[s,o]=b.useState(null),[a,l]=b.useState(!1);b.useEffect(()=>{e&&t("/today")},[e,t]);const u=async()=>{o(null),l(!0);try{const h=await n();h.success?t("/today"):h.error!=="cancelled"&&o(h.error)}catch{o("Something went wrong. Please try again.")}finally{l(!1)}},c=()=>{r(),t("/today")};return f.jsxs("div",{className:"min-h-screen bg-iron-950 overflow-x-hidden",children:[f.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute -top-32 right-0 w-[500px] h-[500px] bg-flame-500/[0.07] rounded-full blur-[120px]"}),f.jsx("div",{className:"absolute bottom-0 -left-32 w-[400px] h-[400px] bg-cyan-500/[0.04] rounded-full blur-[100px]"})]}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("header",{className:"py-5 px-5 sm:px-8",children:f.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2.5",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center shadow-lg shadow-flame-500/20",children:f.jsx(gr,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wider",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(dt,{to:"/docs",className:"flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[f.jsx(qc,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"hidden sm:inline",children:"Docs"})]}),f.jsxs("button",{onClick:c,className:"hidden sm:flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[f.jsx(jf,{className:"w-3.5 h-3.5"}),"Try Demo"]}),f.jsx("button",{onClick:u,disabled:i||a,className:`flex items-center gap-2 px-4 py-2 bg-white text-iron-900\r
                  rounded-lg font-medium text-sm hover:bg-iron-100 transition-all disabled:opacity-50`,children:i||a?f.jsx(si,{className:"w-4 h-4 animate-spin"}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign In"]})})]})]})}),f.jsx("section",{className:"px-5 sm:px-8 pt-8 sm:pt-16 pb-12",children:f.jsx("div",{className:"max-w-5xl mx-auto",children:f.jsxs(Ue.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-xl",children:[f.jsx("h1",{className:"font-display text-display-lg sm:text-display-xl text-iron-50 mb-4",children:"TRAIN SMARTER"}),f.jsx("p",{className:"text-lg sm:text-xl text-iron-400 leading-relaxed mb-8",children:"AI-powered strength training. Generate personalized workouts, check your form, train with friends, and track everything  all free."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[f.jsxs("button",{onClick:u,disabled:i||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white\r
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?f.jsx(si,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&f.jsx(Wc,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),f.jsxs("button",{onClick:c,className:`flex items-center justify-center gap-2 px-6 py-3.5 \r
                    bg-iron-800/80 text-iron-200 border border-iron-700\r
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[f.jsx(jf,{className:"w-4 h-4"}),"Try Demo"]})]}),f.jsxs(dt,{to:"/docs",className:"inline-flex items-center gap-1.5 text-sm text-iron-500 hover:text-iron-300 transition-colors mt-4",children:[f.jsx(qc,{className:"w-3.5 h-3.5"}),"Read the docs  how it works, calculations, AI system"]}),s&&f.jsxs("p",{className:"text-sm text-red-400 mt-3",children:["Sign-in failed: ",s]})]})})}),f.jsx("section",{className:"px-5 sm:px-8 pb-16",children:f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsx(Ue.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Oa,{className:"w-5 h-5 text-flame-400"}),f.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI THAT KNOWS YOUR BODY"})]}),f.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"The AI reviews your lift history, e1RM data, RPE trends, and pain flags to generate workouts tailored to you. It avoids exercises that cause you pain and progressively overloads based on real data."}),f.jsx("div",{className:"space-y-2",children:["Analyzes your training history and maxes","Generates workouts with exercise-specific form cues","AI form check  frame-by-frame video analysis","Skips exercises flagged for pain","Bodyweight, hotel/travel, and 1RM test modes"].map((h,p)=>f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[f.jsx(Xi,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),h]},p))})]}),f.jsx(_Q,{})]})}),f.jsx(Ue.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Ma,{className:"w-5 h-5 text-flame-400"}),f.jsx("h3",{className:"font-display text-xl text-iron-100",children:"YOUR DAY AT A GLANCE"})]}),f.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"See today's workout, weekly progress, goal tracking, and community activity  all on one screen."}),f.jsx(EQ,{})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(va,{className:"w-5 h-5 text-cyan-400"}),f.jsx("h3",{className:"font-display text-xl text-iron-100",children:"TRAIN TOGETHER"})]}),f.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"Create groups, assign AI-generated workouts to your team, and track everyone's progress. Great for coaches and gym crews."}),f.jsx(TQ,{})]})]})}),f.jsx(Ue.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Gc,{className:"w-5 h-5 text-purple-400"}),f.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI FORM CHECK"}),f.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 border border-amber-500/30",children:"BETA"})]}),f.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"Upload a video of your lift and get instant frame-by-frame form analysis from AI. It detects the exercise, scores each phase of the movement, and gives you specific coaching cues."}),f.jsx("div",{className:"space-y-2",children:["Smart motion detection focuses on the actual lift","Per-frame scores with phase detection","Specific coaching cues and corrections","Video never leaves your device  only frames are sent"].map((h,p)=>f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[f.jsx(Xi,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),h]},p))})]}),f.jsx(IQ,{})]})}),f.jsx(Ue.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-16",children:f.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{icon:Oa,label:"AI Workouts"},{icon:Gc,label:"AI Form Check (Beta)"},{icon:va,label:"Group Training"},{icon:ya,label:"Goal Tracking"},{icon:Aq,label:"Exercise Info"},{icon:Lq,label:"1RM Test Mode"},{icon:K2,label:"Cardio Tracking"},{icon:Q2,label:"Calendar"},{icon:gr,label:"1RM Calculator"},{icon:dv,label:"AI Coach Chat"}].map(({icon:h,label:p},m)=>f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800/60 border border-iron-700/40 rounded-full text-xs text-iron-300",children:[f.jsx(h,{className:"w-3 h-3 text-iron-500"}),p]},m))})}),f.jsxs(Ue.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center pb-12",children:[f.jsx("h2",{className:"font-display text-3xl sm:text-4xl text-iron-100 mb-3",children:"START TRAINING TODAY"}),f.jsx("p",{className:"text-iron-400 mb-6",children:"Free to use. Earn credits by training and completing goals."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[f.jsxs("button",{onClick:u,disabled:i||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white\r
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?f.jsx(si,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&f.jsx(Wc,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),f.jsxs("button",{onClick:c,className:`flex items-center justify-center gap-2 px-6 py-3.5 \r
                    bg-iron-800/80 text-iron-200 border border-iron-700\r
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[f.jsx(jf,{className:"w-4 h-4"}),"Explore Demo"]})]})]})]})}),f.jsx("footer",{className:"py-6 px-5 sm:px-8 border-t border-iron-800/50",children:f.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500 flex items-center justify-center",children:f.jsx(gr,{className:"w-3.5 h-3.5 text-white"})}),f.jsx("span",{className:"font-display text-sm text-iron-500",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(dt,{to:"/docs",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx(qc,{className:"w-3 h-3"})," Docs"]}),f.jsxs("a",{href:"/ai-form-check",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx(Gc,{className:"w-3 h-3"})," AI Form Check"]}),f.jsxs("a",{href:"https://x.com/BenchPressOnly",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Follow"]}),f.jsx("a",{href:"https://azoni.ai",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Built by Azoni"}),f.jsxs("p",{className:"text-xs text-iron-600",children:[" ",new Date().getFullYear()]})]})]})})]})]})}const Bo={NONE:"none",PENDING_SENT:"pending_sent",PENDING_RECEIVED:"pending_received",FRIENDS:"friends"},Iv={async sendRequest(t,e){if(t===e)throw new Error("Cannot friend yourself");const n=await this.getFriendshipStatus(t,e);if(n.status===Bo.FRIENDS)throw new Error("Already friends");if(n.status===Bo.PENDING_SENT)throw new Error("Request already sent");if(n.status===Bo.PENDING_RECEIVED)return this.acceptRequest(n.requestId);const r=await Zt(ne(M,"friendRequests"),{from:t,to:e,status:"pending",createdAt:de()});try{await Zt(ne(M,"notifications"),{userId:e,type:"friend_request",fromUserId:t,read:!1,createdAt:de()})}catch(i){console.error("Notification error:",i)}return{id:r.id}},async acceptRequest(t){const e=Y(M,"friendRequests",t),n=await Ze(e);if(!n.exists())throw new Error("Request not found");const{from:r,to:i}=n.data(),s=[r,i].sort(),o=ma(M),a=Y(ne(M,"friendships"));o.set(a,{users:s,user1:s[0],user2:s[1],createdAt:de()}),o.delete(e),await o.commit();try{await Zt(ne(M,"notifications"),{userId:r,type:"friend_accepted",fromUserId:i,read:!1,createdAt:de()})}catch(l){console.error("Notification error:",l)}return{id:a.id}},async declineRequest(t){await wn(Y(M,"friendRequests",t))},async cancelRequest(t){await wn(Y(M,"friendRequests",t))},async removeFriend(t,e){const n=await this._findFriendship(t,e);n&&await wn(Y(M,"friendships",n.id))},async getFriends(t){const e=we(ne(M,"friendships"),se("user1","==",t)),n=we(ne(M,"friendships"),se("user2","==",t)),[r,i]=await Promise.all([_e(e),_e(n)]),s=new Set;return r.docs.forEach(o=>{const l=o.data().users.find(u=>u!==t);l&&s.add(l)}),i.docs.forEach(o=>{const l=o.data().users.find(u=>u!==t);l&&s.add(l)}),[...s]},async getFriendSet(t){const e=await this.getFriends(t);return new Set(e)},async getReceivedRequests(t){const e=we(ne(M,"friendRequests"),se("to","==",t),se("status","==","pending"),Jt("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getSentRequests(t){const e=we(ne(M,"friendRequests"),se("from","==",t),se("status","==","pending"),Jt("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data()}))},async getFriendshipStatus(t,e){const n=await this._findFriendship(t,e);if(n)return{status:Bo.FRIENDS,friendshipId:n.id};const r=we(ne(M,"friendRequests"),se("from","==",t),se("to","==",e),se("status","==","pending")),i=await _e(r);if(!i.empty)return{status:Bo.PENDING_SENT,requestId:i.docs[0].id};const s=we(ne(M,"friendRequests"),se("from","==",e),se("to","==",t),se("status","==","pending")),o=await _e(s);return o.empty?{status:Bo.NONE}:{status:Bo.PENDING_RECEIVED,requestId:o.docs[0].id}},async getFriendCount(t){return(await this.getFriends(t)).length},async _findFriendship(t,e){const n=[t,e].sort(),r=we(ne(M,"friendships"),se("user1","==",n[0]),se("user2","==",n[1])),i=await _e(r);return i.empty?null:{id:i.docs[0].id,...i.docs[0].data()}}};function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}function Ni(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function lt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ht(t){lt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Kp(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function bQ(t,e){lt(2,arguments);var n=ht(t),r=Ni(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function kQ(t,e){lt(2,arguments);var n=ht(t).getTime(),r=Ni(e);return new Date(n+r)}var AQ={};function Qa(){return AQ}function Ey(t,e){var n,r,i,s,o,a,l,u;lt(1,arguments);var c=Qa(),h=Ni((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ht(t),m=p.getDay(),y=(m<h?7:0)+m-h;return p.setDate(p.getDate()-y),p.setHours(0,0,0,0),p}function Sv(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Qp(t){lt(1,arguments);var e=ht(t);return e.setHours(0,0,0,0),e}function Bf(t,e){lt(2,arguments);var n=ht(t),r=ht(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function PQ(t,e){lt(2,arguments);var n=Qp(t),r=Qp(e);return n.getTime()===r.getTime()}function CQ(t){return lt(1,arguments),t instanceof Date||Kp(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function RQ(t){if(lt(1,arguments),!CQ(t)&&typeof t!="number")return!1;var e=ht(t);return!isNaN(Number(e))}function NQ(t,e){lt(2,arguments);var n=ht(t),r=ht(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function DQ(t,e){return lt(2,arguments),ht(t).getTime()-ht(e).getTime()}var VQ={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},jQ="trunc";function OQ(t){return VQ[jQ]}function MQ(t){lt(1,arguments);var e=ht(t);return e.setHours(23,59,59,999),e}function LQ(t){lt(1,arguments);var e=ht(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function FQ(t){lt(1,arguments);var e=ht(t);return MQ(e).getTime()===LQ(e).getTime()}function UQ(t,e){lt(2,arguments);var n=ht(t),r=ht(e),i=Bf(n,r),s=Math.abs(NQ(n,r)),o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);var a=Bf(n,r)===-i;FQ(ht(t))&&s===1&&Bf(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function BQ(t,e,n){lt(2,arguments);var r=DQ(t,e)/1e3;return OQ()(r)}function hb(t,e){var n,r,i,s,o,a,l,u;lt(1,arguments);var c=Qa(),h=Ni((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ht(t),m=p.getDay(),y=(m<h?-7:0)+6-(m-h);return p.setDate(p.getDate()+y),p.setHours(23,59,59,999),p}function zQ(t,e){lt(2,arguments);var n=Ni(e);return kQ(t,-n)}var $Q=864e5;function WQ(t){lt(1,arguments);var e=ht(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/$Q)+1}function Yp(t){lt(1,arguments);var e=1,n=ht(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function KD(t){lt(1,arguments);var e=ht(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Yp(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Yp(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function qQ(t){lt(1,arguments);var e=KD(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Yp(n);return r}var GQ=6048e5;function HQ(t){lt(1,arguments);var e=ht(t),n=Yp(e).getTime()-qQ(e).getTime();return Math.round(n/GQ)+1}function Xp(t,e){var n,r,i,s,o,a,l,u;lt(1,arguments);var c=Qa(),h=Ni((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ht(t),m=p.getUTCDay(),y=(m<h?7:0)+m-h;return p.setUTCDate(p.getUTCDate()-y),p.setUTCHours(0,0,0,0),p}function QD(t,e){var n,r,i,s,o,a,l,u;lt(1,arguments);var c=ht(t),h=c.getUTCFullYear(),p=Qa(),m=Ni((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:p.firstWeekContainsDate)!==null&&r!==void 0?r:(l=p.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(h+1,0,m),y.setUTCHours(0,0,0,0);var v=Xp(y,e),I=new Date(0);I.setUTCFullYear(h,0,m),I.setUTCHours(0,0,0,0);var _=Xp(I,e);return c.getTime()>=v.getTime()?h+1:c.getTime()>=_.getTime()?h:h-1}function KQ(t,e){var n,r,i,s,o,a,l,u;lt(1,arguments);var c=Qa(),h=Ni((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=QD(t,e),m=new Date(0);m.setUTCFullYear(p,0,h),m.setUTCHours(0,0,0,0);var y=Xp(m,e);return y}var QQ=6048e5;function YQ(t,e){lt(1,arguments);var n=ht(t),r=Xp(n,e).getTime()-KQ(n,e).getTime();return Math.round(r/QQ)+1}function mt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Ss={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return mt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):mt(r+1,2)},d:function(e,n){return mt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return mt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return mt(e.getUTCHours(),n.length)},m:function(e,n){return mt(e.getUTCMinutes(),n.length)},s:function(e,n){return mt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return mt(s,n.length)}},sl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XQ={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Ss.y(e,n)},Y:function(e,n,r,i){var s=QD(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return mt(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):mt(o,n.length)},R:function(e,n){var r=KD(e);return mt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return mt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return mt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return mt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return Ss.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return mt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=YQ(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):mt(s,n.length)},I:function(e,n,r){var i=HQ(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):mt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ss.d(e,n)},D:function(e,n,r){var i=WQ(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):mt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return mt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return mt(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return mt(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=sl.noon:i===0?s=sl.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=sl.evening:i>=12?s=sl.afternoon:i>=4?s=sl.morning:s=sl.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ss.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ss.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):mt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):mt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ss.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ss.s(e,n)},S:function(e,n){return Ss.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return pb(o);case"XXXX":case"XX":return Xo(o);case"XXXXX":case"XXX":default:return Xo(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return pb(o);case"xxxx":case"xx":return Xo(o);case"xxxxx":case"xxx":default:return Xo(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+fb(o,":");case"OOOO":default:return"GMT"+Xo(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+fb(o,":");case"zzzz":default:return"GMT"+Xo(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return mt(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return mt(o,n.length)}};function fb(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e;return n+String(i)+o+mt(s,2)}function pb(t,e){if(t%60===0){var n=t>0?"-":"+";return n+mt(Math.abs(t)/60,2)}return Xo(t,e)}function Xo(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=mt(Math.floor(i/60),2),o=mt(i%60,2);return r+s+n+o}var mb=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},YD=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},JQ=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return mb(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",mb(i,n)).replace("{{time}}",YD(s,n))},ZQ={p:YD,P:JQ},eY=["D","DD"],tY=["YY","YYYY"];function nY(t){return eY.indexOf(t)!==-1}function rY(t){return tY.indexOf(t)!==-1}function gb(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var iY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sY=function(e,n,r){var i,s=iY[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Ty(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var oY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},aY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uY={date:Ty({formats:oY,defaultWidth:"full"}),time:Ty({formats:aY,defaultWidth:"full"}),dateTime:Ty({formats:lY,defaultWidth:"full"})},cY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dY=function(e,n,r,i){return cY[e]};function fc(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var hY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vY=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},wY={ordinalNumber:vY,era:fc({values:hY,defaultWidth:"wide"}),quarter:fc({values:fY,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:fc({values:pY,defaultWidth:"wide"}),day:fc({values:mY,defaultWidth:"wide"}),dayPeriod:fc({values:gY,defaultWidth:"wide",formattingValues:yY,defaultFormattingWidth:"wide"})};function pc(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?_Y(a,function(h){return h.test(o)}):xY(a,function(h){return h.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var c=e.slice(o.length);return{value:u,rest:c}}}function xY(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function _Y(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function EY(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var TY=/^(\d+)(th|st|nd|rd)?/i,IY=/\d+/i,SY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bY={any:[/^b/i,/^(a|c)/i]},kY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AY={any:[/1/i,/2/i,/3/i,/4/i]},PY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},NY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},DY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jY={ordinalNumber:EY({matchPattern:TY,parsePattern:IY,valueCallback:function(e){return parseInt(e,10)}}),era:pc({matchPatterns:SY,defaultMatchWidth:"wide",parsePatterns:bY,defaultParseWidth:"any"}),quarter:pc({matchPatterns:kY,defaultMatchWidth:"wide",parsePatterns:AY,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:pc({matchPatterns:PY,defaultMatchWidth:"wide",parsePatterns:CY,defaultParseWidth:"any"}),day:pc({matchPatterns:RY,defaultMatchWidth:"wide",parsePatterns:NY,defaultParseWidth:"any"}),dayPeriod:pc({matchPatterns:DY,defaultMatchWidth:"any",parsePatterns:VY,defaultParseWidth:"any"})},XD={code:"en-US",formatDistance:sY,formatLong:uY,formatRelative:dY,localize:wY,match:jY,options:{weekStartsOn:0,firstWeekContainsDate:1}},OY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LY=/^'([^]*?)'?$/,FY=/''/g,UY=/[a-zA-Z]/;function Tr(t,e,n){var r,i,s,o,a,l,u,c,h,p,m,y,v,I;lt(2,arguments);var _=String(e),x=Qa(),E=(r=(i=void 0)!==null&&i!==void 0?i:x.locale)!==null&&r!==void 0?r:XD,V=Ni((s=(o=(a=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&o!==void 0?o:(u=x.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(V>=1&&V<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=Ni((h=(p=(m=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&m!==void 0?m:x.weekStartsOn)!==null&&p!==void 0?p:(v=x.locale)===null||v===void 0||(I=v.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&h!==void 0?h:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var j=ht(t);if(!RQ(j))throw new RangeError("Invalid time value");var S=Sv(j),T=zQ(j,S),k={firstWeekContainsDate:V,weekStartsOn:L,locale:E,_originalDate:j},C=_.match(MY).map(function(P){var N=P[0];if(N==="p"||N==="P"){var R=ZQ[N];return R(P,E.formatLong)}return P}).join("").match(OY).map(function(P){if(P==="''")return"'";var N=P[0];if(N==="'")return BY(P);var R=XQ[N];if(R)return rY(P)&&gb(P,e,String(t)),nY(P)&&gb(P,e,String(t)),R(T,P,E.localize,k);if(N.match(UY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return P}).join("");return C}function BY(t){var e=t.match(LY);return e?e[1].replace(FY,"'"):t}function JD(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function zY(t){return JD({},t)}var yb=1440,$Y=2520,Iy=43200,WY=86400;function qY(t,e,n){var r,i;lt(2,arguments);var s=Qa(),o=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:s.locale)!==null&&r!==void 0?r:XD;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Bf(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var l=JD(zY(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:a}),u,c;a>0?(u=ht(e),c=ht(t)):(u=ht(t),c=ht(e));var h=BQ(c,u),p=(Sv(c)-Sv(u))/1e3,m=Math.round((h-p)/60),y;if(m<2)return n!=null&&n.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,l):h<10?o.formatDistance("lessThanXSeconds",10,l):h<20?o.formatDistance("lessThanXSeconds",20,l):h<40?o.formatDistance("halfAMinute",0,l):h<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):m===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",m,l);if(m<45)return o.formatDistance("xMinutes",m,l);if(m<90)return o.formatDistance("aboutXHours",1,l);if(m<yb){var v=Math.round(m/60);return o.formatDistance("aboutXHours",v,l)}else{if(m<$Y)return o.formatDistance("xDays",1,l);if(m<Iy){var I=Math.round(m/yb);return o.formatDistance("xDays",I,l)}else if(m<WY)return y=Math.round(m/Iy),o.formatDistance("aboutXMonths",y,l)}if(y=UQ(c,u),y<12){var _=Math.round(m/Iy);return o.formatDistance("xMonths",_,l)}else{var x=y%12,E=Math.floor(y/12);return x<3?o.formatDistance("aboutXYears",E,l):x<9?o.formatDistance("overXYears",E,l):o.formatDistance("almostXYears",E+1,l)}}function GY(t,e){return lt(1,arguments),qY(t,Date.now(),e)}function vb(t){return lt(1,arguments),PQ(t,Date.now())}function HY(){return Tr(new Date,"yyyy-MM-dd")}function KY(t){if(!t)return new Date;if(t instanceof Date)return t;if(t!=null&&t.toDate)return t.toDate();if(typeof t=="string"&&t.includes("T")){const r=new Date(t);if(!isNaN(r.getTime()))return new Date(r.getFullYear(),r.getMonth(),r.getDate(),12,0,0)}const e=String(t).split("-").map(Number);if(e.length>=3&&!isNaN(e[0])&&!isNaN(e[1])&&!isNaN(e[2]))return new Date(e[0],e[1]-1,e[2],12,0,0);const n=new Date(t);return isNaN(n.getTime())?new Date:n}function zo(t){if(!t)return HY();if(t!=null&&t.toDate&&(t=t.toDate()),typeof t=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;t=new Date(t)}if(t!=null&&t.seconds&&(t=new Date(t.seconds*1e3)),t.getUTCHours()===0&&t.getUTCMinutes()===0){const e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),r=String(t.getUTCDate()).padStart(2,"0");return`${e}-${n}-${r}`}return Tr(t,"yyyy-MM-dd")}function KX(t){if(!t)return new Date;let e;if(t!=null&&t.toDate)e=t.toDate();else{if(typeof t=="string")return KY(t);if(t instanceof Date)e=t;else if(t!=null&&t.seconds)e=new Date(t.seconds*1e3);else return new Date}const n=e.getUTCHours(),r=e.getUTCMinutes();if(n===0&&r===0){const l=e.getUTCFullYear(),u=e.getUTCMonth(),c=e.getUTCDate(),h=new Date(l,u,c,12,0,0);return isNaN(h.getTime())?new Date:h}const i=e.getFullYear(),s=e.getMonth(),o=e.getDate(),a=new Date(i,s,o,12,0,0);return isNaN(a.getTime())?new Date:a}const Ui=[{id:"docs",label:"Read the docs",description:"Learn how BENCH ONLY works",icon:qc,credits:25,link:"/docs",linkLabel:"Open Docs",color:"blue"},{id:"goal",label:"Set your first goal",description:"Pick a lift and set a target",icon:ya,credits:100,link:"/goals",linkLabel:"Go to Goals",color:"flame"},{id:"workout",label:"Complete a workout",description:"Log a workout with actual sets",icon:gr,credits:100,link:"/workouts/new",linkLabel:"New Workout",color:"green"},{id:"aiWorkout",label:"Generate an AI workout",description:"Let AI build a session for you",icon:Oa,credits:50,link:"/workouts/generate",linkLabel:"Generate",color:"purple"},{id:"friend",label:"Add a friend",description:"Connect with a training partner",icon:Fq,credits:50,link:"/friends",linkLabel:"Find Friends",color:"cyan"}],QY=Ui.reduce((t,e)=>t+e.credits,0),wb={blue:"bg-blue-500/15 text-blue-400 border-blue-500/20",flame:"bg-flame-500/15 text-flame-400 border-flame-500/20",green:"bg-green-500/15 text-green-400 border-green-500/20",purple:"bg-purple-500/15 text-purple-400 border-purple-500/20",cyan:"bg-cyan-500/15 text-cyan-400 border-cyan-500/20"};function YY({embedded:t=!1}){const{user:e,userProfile:n,updateProfile:r,isGuest:i}=ai(),[s,o]=b.useState(null),[a,l]=b.useState({}),[u,c]=b.useState(null),[h,p]=b.useState(!1),[m,y]=b.useState(!1),[v,I]=b.useState(!1);b.useEffect(()=>{if(!e||i)return;const S=(n==null?void 0:n.onboardingChecklist)||{};o(S),_(S)},[e,n]);const _=async S=>{if(!e)return;const T={};try{T.docs=S.docs===!0?"claimed":"ready";const k=await _e(we(ne(M,"goals"),se("userId","==",e.uid),Wt(1)));T.goal=S.goal===!0?"claimed":k.size>0?"completed":"pending";const C=await _e(we(ne(M,"workouts"),se("userId","==",e.uid),se("status","==","completed"),Wt(1)));T.workout=S.workout===!0?"claimed":C.size>0?"completed":"pending";const P=await _e(we(ne(M,"workouts"),se("userId","==",e.uid),se("generatedByAI","==",!0),Wt(1)));T.aiWorkout=S.aiWorkout===!0?"claimed":P.size>0?"completed":"pending";const N=await Iv.getFriends(e.uid),R=await Iv.getSentRequests(e.uid);T.friend=S.friend===!0?"claimed":N.length>0||R.length>0?"completed":"pending"}catch(k){console.error("Checklist check error:",k),Ui.forEach(C=>{T[C.id]||(T[C.id]=S[C.id]===!0?"claimed":"pending")})}l(T),y(!0)},x=async(S,T)=>{if(!u){c(S);try{await Hp.add(e.uid,T);const k={...(n==null?void 0:n.onboardingChecklist)||{},[S]:!0};await r({onboardingChecklist:k,credits:((n==null?void 0:n.credits)??0)+T}),l(C=>({...C,[S]:"claimed"})),o(k)}catch(k){console.error("Claim error:",k)}finally{c(null)}}},E=async()=>{try{await r({onboardingChecklist:{...(n==null?void 0:n.onboardingChecklist)||{},dismissed:!0}}),o(S=>({...S,dismissed:!0})),I(!0),setTimeout(()=>I(!1),4e3)}catch(S){console.error("Dismiss error:",S)}};if(i||!n||!m||Ui.every(S=>a[S.id]==="claimed"))return null;if(!t&&(s!=null&&s.dismissed))return v?f.jsxs(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-6 p-3 bg-iron-800/80 border border-iron-700 rounded-xl flex items-center gap-3",children:[f.jsx(pS,{className:"w-4 h-4 text-flame-400 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-iron-300 flex-1",children:["You can find the getting started checklist in ",f.jsx(dt,{to:"/settings",className:"text-flame-400 hover:underline",children:"Settings"}),"."]}),f.jsx("button",{onClick:()=>I(!1),className:"text-iron-500 hover:text-iron-300",children:f.jsx(wu,{className:"w-4 h-4"})})]}):null;const L=Ui.filter(S=>a[S.id]==="claimed").length,j=Ui.filter(S=>a[S.id]==="claimed").reduce((S,T)=>S+T.credits,0);return f.jsx(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:f.jsxs("div",{className:"card-steel rounded-xl overflow-hidden border border-flame-500/20",children:[f.jsxs("button",{onClick:()=>p(!h),className:"w-full flex items-center gap-3 p-4 hover:bg-iron-800/30 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(pS,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsxs("h3",{className:"text-sm font-semibold text-iron-100",children:["Get Started  Earn ",QY," Credits"]}),f.jsxs("p",{className:"text-xs text-iron-500",children:[L,"/",Ui.length," complete  ",j," credits earned"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"relative w-8 h-8",children:[f.jsxs("svg",{className:"w-8 h-8 -rotate-90",viewBox:"0 0 32 32",children:[f.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-iron-800"}),f.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${L/Ui.length*81.7} 81.7`,className:"text-flame-500 transition-all duration-500"})]}),f.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] font-bold text-iron-300",children:[L,"/",Ui.length]})]}),h?f.jsx(Ul,{className:"w-4 h-4 text-iron-500"}):f.jsx(Y2,{className:"w-4 h-4 text-iron-500"})]})]}),f.jsx(io,{children:!h&&f.jsx(Ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:f.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[Ui.map(S=>{var H,ge;const T=a[S.id],k=S.icon,C=T==="claimed",R=T==="completed"||T==="ready";return f.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${C?"bg-iron-800/30 opacity-60":"bg-iron-800/50"}`,children:[f.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${C?"bg-green-500/20":`${((H=wb[S.color])==null?void 0:H.split(" ")[0])||"bg-iron-700"}`}`,children:C?f.jsx(Xi,{className:"w-4 h-4 text-green-400"}):f.jsx(k,{className:`w-4 h-4 ${((ge=wb[S.color])==null?void 0:ge.split(" ")[1])||"text-iron-400"}`})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:`text-sm font-medium ${C?"text-iron-500 line-through":"text-iron-200"}`,children:S.label}),f.jsx("p",{className:"text-[11px] text-iron-600",children:S.description})]}),C?f.jsxs("span",{className:"text-[10px] text-green-400/70 flex items-center gap-1 flex-shrink-0",children:[f.jsx(Ma,{className:"w-3 h-3"}),"+",S.credits]}):R?f.jsx("button",{onClick:()=>x(S.id,S.credits),disabled:!!u,className:"px-2.5 py-1.5 text-xs rounded-lg bg-flame-500/20 text-flame-400 border border-flame-500/30 hover:bg-flame-500/30 transition-colors flex items-center gap-1 flex-shrink-0",children:u===S.id?f.jsx(si,{className:"w-3 h-3 animate-spin"}):f.jsxs(f.Fragment,{children:[f.jsx(Ma,{className:"w-3 h-3"}),"Claim ",S.credits]})}):f.jsx(dt,{to:S.link,className:"px-2.5 py-1.5 text-xs rounded-lg bg-iron-700/50 text-iron-400 hover:bg-iron-700 transition-colors flex-shrink-0",children:S.linkLabel})]},S.id)}),!t&&f.jsx("button",{onClick:E,className:"w-full text-center text-xs text-iron-600 hover:text-iron-400 py-2 transition-colors",children:"Dismiss checklist"})]})})})]})})}function XY({event:t,onClose:e,userContext:n}){const r=Io(),{user:i}=ai(),[s,o]=b.useState(!1),[a,l]=b.useState("intro"),[u,c]=b.useState(null),h=b.useMemo(()=>t?t.buildWorkout(n):null,[t,n]);if(!t)return null;const p=async()=>{if(!(!i||s)){o(!0);try{const v=h,I=new Date;I.setHours(12,0,0,0);const{circuitExercises:_,...x}=v,E=await La.create(i.uid,{...x,date:I});e(),E!=null&&E.id&&r(`/workouts/${E.id}`)}catch(v){console.error("Error creating event workout:",v),alert("Something went wrong. Try again!")}finally{o(!1)}}},m=t.theme||{},y=(h==null?void 0:h.circuitExercises)||[];return f.jsx(io,{children:f.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs(Ue.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:v=>v.stopPropagation(),className:"w-full max-w-sm bg-iron-900 rounded-2xl border border-iron-800 overflow-hidden shadow-2xl max-h-[85vh] flex flex-col",children:[f.jsx("div",{className:`h-1.5 flex-shrink-0 ${m.buttonBg||"bg-flame-500"}`}),f.jsx(io,{mode:"wait",children:a==="intro"?f.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-6 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:t.emoji}),f.jsx("h2",{className:"text-xl font-display text-iron-50 mb-2",children:t.name}),f.jsx("p",{className:"text-sm text-iron-400 leading-relaxed mb-4",children:t.description}),t.dateLabel&&f.jsxs("p",{className:"text-xs text-iron-500 mb-6",children:["Available ",t.dateLabel]}),f.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[f.jsx(Ma,{className:"w-4 h-4 text-flame-400"}),f.jsxs("span",{className:"text-sm font-medium text-iron-200",children:[t.creditReward," credits"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[f.jsx(_q,{className:"w-4 h-4 text-pink-400"}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Profile badge"})]})]}),f.jsxs("button",{onClick:()=>l("preview"),className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${m.buttonBg||"bg-flame-500"} ${m.buttonHover||"hover:bg-flame-600"}`,children:["See the Workout",f.jsx(Cs,{className:"w-5 h-5"})]}),f.jsx("button",{onClick:e,className:"mt-3 text-sm text-iron-500 hover:text-iron-300 transition-colors",children:"Maybe later"})]},"intro"):f.jsxs(Ue.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex flex-col min-h-0",children:[f.jsxs("div",{className:"p-4 pb-3 flex-shrink-0",children:[f.jsxs("button",{onClick:()=>l("intro"),className:"flex items-center gap-1 text-xs text-iron-500 hover:text-iron-300 transition-colors mb-3",children:[f.jsx(xq,{className:"w-3.5 h-3.5"}),"Back"]}),f.jsxs("h2",{className:"text-lg font-display text-iron-50 flex items-center gap-2",children:[f.jsx("span",{children:t.emoji}),"Workout Preview"]}),f.jsxs("div",{className:"mt-3 p-3 bg-pink-500/10 border border-pink-500/20 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(gS,{className:"w-4 h-4 text-pink-400"}),f.jsx("span",{className:"text-xs font-semibold text-pink-300",children:"Circuit Format"})]}),f.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:"Do all 6 exercises in order = 1 round. Rest 3060s, then repeat. 3 rounds total. ~10 min."})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-2 space-y-2",children:[y.map((v,I)=>{const _=u===I,E=v.type==="time"?`${v.time}s hold`:`${v.reps} reps`;return f.jsxs("div",{className:"bg-iron-800/50 border border-iron-700/50 rounded-xl overflow-hidden",children:[f.jsxs("button",{onClick:()=>c(_?null:I),className:"w-full flex items-center gap-3 p-3 text-left hover:bg-iron-800/80 transition-colors",children:[f.jsx("span",{className:"w-6 h-6 rounded-full bg-pink-500/15 text-pink-400 text-xs font-bold flex items-center justify-center flex-shrink-0",children:I+1}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:v.name}),f.jsx("p",{className:"text-xs text-iron-500",children:E})]}),v.notes&&(_?f.jsx(Y2,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}):f.jsx(Ul,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}))]}),f.jsx(io,{children:_&&v.notes&&f.jsx(Ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"overflow-hidden",children:f.jsx("p",{className:"px-3 pb-3 text-xs text-iron-400 leading-relaxed border-t border-iron-700/30 pt-2 mx-3",children:v.notes})})})]},I)}),f.jsxs("div",{className:"flex items-center gap-2 py-2 px-1",children:[f.jsx("div",{className:"flex-1 border-t border-iron-700/40"}),f.jsxs("span",{className:"text-[11px] text-iron-500 flex items-center gap-1.5",children:[f.jsx(gS,{className:"w-3 h-3"}),"Repeat 3"]}),f.jsx("div",{className:"flex-1 border-t border-iron-700/40"})]})]}),f.jsx("div",{className:"p-4 pt-3 flex-shrink-0 border-t border-iron-800/50",children:f.jsx("button",{onClick:p,disabled:s,className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${m.buttonBg||"bg-flame-500"} ${m.buttonHover||"hover:bg-flame-600"} disabled:opacity-50`,children:s?f.jsxs(f.Fragment,{children:[f.jsx(si,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):f.jsxs(f.Fragment,{children:[f.jsx(gr,{className:"w-5 h-5"}),"Let's Go"]})})})]},"preview")})]})})})}const tg=[{id:"valentines-2026",name:"Valentine's Day Challenge",description:"A quick bodyweight workout you can do anywhere  no equipment needed. Scaled to your fitness level.",emoji:"",startDate:"2026-02-14",endDate:"2026-02-17",badgeIcon:"",badgeName:"Valentine's Day 2026  Completed the Valentine's Challenge",creditReward:200,dateLabel:"Feb 1416",theme:{bg:"bg-pink-500/10",border:"border-pink-500/25",accent:"text-pink-400",buttonBg:"bg-pink-500",buttonHover:"hover:bg-pink-600"},buildWorkout(t){var a,l;const e=(t==null?void 0:t.maxLifts)||{},n=Object.keys(e).length>0;let r="beginner";if(n){const u=((a=e["Bench Press"])==null?void 0:a.weight)||((l=e["Dumbbell Bench Press"])==null?void 0:l.weight)||0,c=Math.max(...Object.values(e).map(h=>h.weight||0),0);c>225||u>185?r="advanced":(c>135||u>95)&&(r="intermediate")}const i={beginner:{pushups:8,squats:12,lunges:8,burpees:4,plank:30,mountainClimbers:12},intermediate:{pushups:15,squats:20,lunges:12,burpees:8,plank:45,mountainClimbers:20},advanced:{pushups:25,squats:30,lunges:16,burpees:12,plank:60,mountainClimbers:30}}[r],s=[{name:"Push-ups",type:"bodyweight",notes:"Hands shoulder-width apart, body in a straight line from head to heels. Lower until chest nearly touches the floor, then push back up. Keep core tight throughout. Too hard? Do knee push-ups or incline push-ups with hands on a chair/counter.",reps:i.pushups},{name:"Bodyweight Squats",type:"bodyweight",notes:"Feet shoulder-width apart, toes slightly out. Sit back and down like sitting into a chair  hips below parallel if possible. Drive through your heels to stand. Too hard? Squat to a chair (sit down lightly, then stand back up) or do half squats.",reps:i.squats},{name:"Alternating Lunges",type:"bodyweight",notes:"Step forward with one leg, lower until both knees are at ~90. Front knee stays over the ankle, not past your toes. Push back to standing and alternate legs. Too hard? Do reverse lunges (step backward instead) or hold onto a wall for balance.",reps:`${i.lunges} total`},{name:"Burpees",type:"bodyweight",notes:"From standing: squat down, place hands on the floor, jump feet back into a plank, do a push-up, jump feet forward, then jump up with hands overhead. That's one rep. Too hard? Skip the push-up and/or the jump  just step feet back and forward instead.",reps:i.burpees},{name:"Mountain Climbers",type:"bodyweight",notes:"Start in a high plank position. Drive one knee toward your chest, then quickly switch legs  like running in place horizontally. Keep hips level and core braced. Too hard? Slow it down  step feet in one at a time instead of jumping.",reps:`${i.mountainClimbers} total`},{name:"Plank",type:"time",notes:`Hold for ${i.plank} seconds. Forearms on the ground, elbows under shoulders, body in a straight line. Squeeze your glutes and brace your abs  don't let your hips sag or pike up. Too hard? Drop to your knees or do the plank from your hands instead of forearms.`,time:i.plank}],o=[];for(let u=1;u<=3;u++)s.forEach((c,h)=>{const p=`set-r${u}-${h}`,m=c.type==="time";o.push({id:`ex-r${u}-${h}`,name:`Round ${u}  ${c.name}`,type:c.type,notes:u===1?c.notes:"",sets:[{id:p,...m?{prescribedTime:String(c.time),actualTime:""}:{prescribedReps:String(c.reps),actualWeight:"",actualReps:""},rpe:"",painLevel:0,completed:!1}]})}),u<3&&o.push({id:`ex-rest-${u}`,name:"Rest 3060s",type:"rest",notes:"Catch your breath. Shake it out. Get ready for the next round.",sets:[{id:`set-rest-${u}`,prescribedTime:"60",actualTime:"",rpe:"",painLevel:0,completed:!1}]});return{name:"Valentine's Day Challenge ",notes:`Happy Valentine's Day! This is a circuit workout  do all 6 exercises in order to complete 1 round, then rest and repeat. 3 rounds total, no equipment needed. Scaled for your level (${r}).`,eventId:"valentines-2026",workoutType:"strength",circuitExercises:s,exercises:o}}}];function ZD(){const t=new Date;return tg.find(e=>{const n=new Date(e.startDate+"T00:00:00"),r=new Date(e.endDate+"T00:00:00");return t>=n&&t<r})||null}function JY(t){return t!=null&&t.eventId&&tg.find(e=>e.id===t.eventId)||null}function ZY(t){var e;return(e=t==null?void 0:t.data)!=null&&e.eventId&&tg.find(n=>n.id===t.data.eventId)||null}const xb=Object.freeze(Object.defineProperty({__proto__:null,SPECIAL_EVENTS:tg,getActiveEvent:ZD,getEventForFeedItem:ZY,getEventForWorkout:JY},Symbol.toStringTag,{value:"Module"})),Sy="Bench Only";function eX(t){b.useEffect(()=>(document.title=t?`${t} | ${Sy}`:Sy,()=>{document.title=Sy}),[t])}function _b(){var Ne,Ge,ve,pt,nn;eX("Today");const{user:t,userProfile:e,isGuest:n,isRealAdmin:r,impersonating:i,realUser:s}=ai(),o=Io(),[a,l]=b.useState([]),[u,c]=b.useState([]),[h,p]=b.useState([]),[m,y]=b.useState([]),[v,I]=b.useState([]),[_,x]=b.useState({completed:0,total:0}),[E,V]=b.useState(new Set),[L,j]=b.useState(new Set),[S,T]=b.useState({}),[k,C]=b.useState([]),[P,N]=b.useState({}),[R,H]=b.useState(new Set),[ge,be]=b.useState([]),[Ae,X]=b.useState(null),[ce,D]=b.useState(null),[ue,ke]=b.useState(null),[O,ft]=b.useState(!0),[_t,$e]=b.useState(!0),[rt,On]=b.useState(null),[en,dn]=b.useState(null),[tn,Vr]=b.useState(!1),[Vi,jr]=b.useState(null),[rr,li]=b.useState(!1),[ji,Vo]=b.useState(""),[Hr,ui]=b.useState(""),[Kr,gs]=b.useState(!1),[G,Ie]=b.useState(""),[Se,B]=b.useState("general"),[W,J]=b.useState(!1),[he,pe]=b.useState(!1),[De,Le]=b.useState(!1),[qe,ir]=b.useState(null),[sr,Et]=b.useState(!1),En=[{date:"Feb 2026",title:"Workout Sharing",description:"Share workouts with friends. Preview the full exercise breakdown before saving, and optionally have AI adjust the weights to match your training level.",tag:"Social"},{date:"Feb 2026",title:"Exercise How-To Info",description:"AI-generated exercises now include form cues, key instructions, and substitution suggestions. Tap the exercise name to view, plus search YouTube without leaving the app.",tag:"AI"},{date:"Feb 2026",title:"Feed Visibility Controls",description:"Choose who sees your activity  public, friends only, group only, or private. Group workouts show with cyan styling in the feed.",tag:"Social"},{date:"Feb 2025",title:"Form Check Overhaul",description:"Movement quality scores, injury risk detection with severity levels, and a focus drill with a coaching cue for your next session.",tag:"AI"},{date:"Feb 2025",title:"Smarter Video Analysis",description:"Frame extraction now skips your setup and rest to focus on the actual lift. Drag-and-drop upload with video preview.",tag:"UX"},{date:"Feb 2025",title:"RPE Guides",description:"RPE explainers on the workout generator and tooltips on generated sets so you always know what the numbers mean.",tag:"UX"},{date:"Feb 2025",title:"Human Trainer Workouts",description:"Request a custom workout built by a real trainer, or send an existing workout for expert review.",tag:"New"},{date:"Feb 2025",title:"AI Coach Personalities",description:"Choose your coaching style in Settings  Coach, Drill Sergeant, Gym Bro, Sports Scientist, or Comedy Coach.",tag:"AI"},{date:"Feb 2025",title:"Smarter AI Chat",description:"Personalized greetings, full set-by-set workout data for pain diagnosis, and dynamic quick actions.",tag:"AI"},{date:"Feb 2025",title:"Oura Ring Integration",description:"Connect your Oura Ring to feed sleep, readiness, and recovery scores into AI workout generation.",tag:"Integration"},{date:"Feb 2025",title:"Gift Credits to Friends",description:"Send credits to friends from Settings. Search your friends list and pick an amount.",tag:"Social"},{date:"Feb 2025",title:"Premium Model for Everyone",description:"GPT-4o is now available to all users at 100 credits per use.",tag:"AI"},{date:"Feb 2025",title:"Smarter Exercise Input",description:"New autocomplete when creating workouts. Type to search, and new exercises are saved for next time.",tag:"UX"},{date:"Jan 2025",title:"Programs & Scheduling",description:"Generate multi-week training programs. Calendar scheduling with daily workout targets.",tag:"Core"},{date:"Jan 2025",title:"Friends System",description:"Add friends, see their activity in your feed, and control who sees your workouts.",tag:"Social"}],ci=(()=>{const z=parseFloat(ji),Ee=parseInt(Hr);return!z||!Ee||Ee<1||Ee>30?null:Ee===1?z:z*(1+Ee/30)})(),jo=b.useMemo(()=>ci?[{reps:1,pct:100},{reps:2,pct:97},{reps:3,pct:94},{reps:5,pct:89},{reps:8,pct:81},{reps:10,pct:75},{reps:12,pct:69}].map(z=>({...z,weight:Math.round(ci*z.pct/100)})):null,[ci]),Ut=new Date,Oi=Ut.getHours(),Oo=Oi<12?"Good morning":Oi<17?"Good afternoon":"Good evening",Or=((Ne=e==null?void 0:e.displayName)==null?void 0:Ne.split(" ")[0])||((Ge=t==null?void 0:t.displayName)==null?void 0:Ge.split(" ")[0])||"",di=zo(Ut),ys=Tr(Ut,"EEEE").toLowerCase();b.useEffect(()=>{t&&hi()},[t]);const hi=async()=>{try{if(n){$e(!1);return}const z=Ey(Ut,{weekStartsOn:1}),Ee=hb(Ut,{weekStartsOn:1}),[re,We,it,Pt,Kt]=await Promise.all([La.getByUser(t.uid,50).catch(()=>[]),Xc.getByUser(t.uid).catch(()=>[]),I_.getByUser(t.uid).catch(()=>[]),Xc.getPendingReviews(t.uid).catch(()=>[]),T_.getByUser(t.uid).catch(()=>[])]),Qe=re.filter(ie=>{var Fe;const Pe=(Fe=ie.date)!=null&&Fe.toDate?ie.date.toDate():new Date(ie.date);return zo(Pe)===di});l(Qe);const rn=We.filter(ie=>{var Pe;try{const Fe=(Pe=ie.date)!=null&&Pe.toDate?ie.date.toDate():new Date(ie.date);return zo(Fe)===di}catch{return!1}});c(rn);const Pn=it.filter(ie=>{var Pe;if(ie.type==="recurring"){const Fe=(ie.skippedDates||[]).includes(di);return((Pe=ie.days)==null?void 0:Pe.includes(ys))&&!Fe}return ie.date===di});p(Pn),y(Pt),be(Object.values(Kt.filter(ie=>ie.status==="active").sort((ie,Pe)=>(ie.targetDate||"").localeCompare(Pe.targetDate||"")).reduce((ie,Pe)=>(ie[Pe.lift]||(ie[Pe.lift]=Pe),ie),{}))),Promise.all([ca.getFeed(5),zD.getAll(),Yc.getUnread(t.uid),Iv.getFriendSet(t.uid)]).then(([ie,Pe,Fe,ut])=>{C((ie==null?void 0:ie.items)||[]);const xr={};(Pe||[]).forEach(fi=>{xr[fi.uid]=fi}),N(xr),I(Fe||[]),H(ut||new Set)}).catch(ie=>console.error("[TodayPage] Feed/notifications load failed:",ie));const sn=new Set,gn=new Set,Bt={},Qr=re.filter(ie=>{var Fe;const Pe=(Fe=ie.date)!=null&&Fe.toDate?ie.date.toDate():new Date(ie.date);if(Pe>=z&&Pe<=Ee){const ut=zo(Pe);return ie.status==="completed"?sn.add(ut):ie.status==="scheduled"?gn.add(ut):sn.add(ut),Bt[ut]||(Bt[ut]={type:"personal",id:ie.id}),!0}return!1}),Mr=We.filter(ie=>{var Pe;try{const Fe=(Pe=ie.date)!=null&&Pe.toDate?ie.date.toDate():new Date(ie.date);if(Fe>=z&&Fe<=Ee){const ut=zo(Fe);return ie.status==="completed"?sn.add(ut):gn.add(ut),Bt[ut]||(Bt[ut]={type:"group",id:ie.id}),!0}}catch{}return!1});it.filter(ie=>ie.type==="recurring").forEach(ie=>{var Pe;for(let Fe=0;Fe<7;Fe++){const ut=new Date(z);ut.setDate(ut.getDate()+Fe);const xr=zo(ut),fi=Tr(ut,"EEEE").toLowerCase();ut<Qp(Ut)&&!vb(ut)&&((Pe=ie.days)!=null&&Pe.includes(fi))&&!(ie.skippedDates||[]).includes(xr)&&sn.add(xr)}}),V(sn),j(gn),T(Bt);const or=it.filter(ie=>ie.type==="recurring").reduce((ie,Pe)=>{var Fe;return ie+(((Fe=Pe.days)==null?void 0:Fe.length)||0)},0);x({completed:sn.size,total:Math.max(or,sn.size)});const Ln=new Date(Ut);Ln.setHours(23,59,59,999);const Xn=[];re.forEach(ie=>{var Fe;if(ie.status!=="scheduled")return;const Pe=(Fe=ie.date)!=null&&Fe.toDate?ie.date.toDate():new Date(ie.date);Pe>Ln&&Xn.push({...ie,_date:Pe,_type:"personal"})}),We.forEach(ie=>{var Fe;if(ie.status==="completed")return;const Pe=(Fe=ie.date)!=null&&Fe.toDate?ie.date.toDate():new Date(ie.date);Pe>Ln&&Xn.push({...ie,_date:Pe,_type:"group"})}),Xn.sort((ie,Pe)=>ie._date-Pe._date),ke(Xn[0]||null);try{const ie=await Ff.getActive(t.uid);ft(ie.length>0);let Pe=!1;for(const Fe of ie){const ut=Ff.getProgramDay(Fe,Ut);if(ut){X(ut),Pe=!0;break}}if(!Pe)for(let Fe=1;Fe<=14;Fe++){const ut=bQ(Ut,Fe);for(const xr of ie){const fi=Ff.getProgramDay(xr,ut);if(fi){D({...fi,date:ut}),Fe=15;break}}}}catch(ie){console.error("Error loading program day:",ie)}}catch(z){console.error("Error loading today data:",z)}finally{$e(!1)}},Mi=async z=>{try{await Xc.approveReview(z),y(Ee=>Ee.filter(re=>re.id!==z))}catch(Ee){console.error("Error approving:",Ee)}};b.useEffect(()=>{if(!t||n)return;const z=ZD();if(!z)return;On(z),(async()=>{try{const{collection:re,query:We,where:it,getDocs:Pt,limit:Kt}=await tt(async()=>{const{collection:Bt,query:Qr,where:Mr,getDocs:or,limit:Ln}=await Promise.resolve().then(()=>oI);return{collection:Bt,query:Qr,where:Mr,getDocs:or,limit:Ln}},void 0),{db:Qe}=await tt(async()=>{const{db:Bt}=await Promise.resolve().then(()=>aI);return{db:Bt}},void 0),rn=We(re(Qe,"workouts"),it("userId","==",t.uid),it("eventId","==",z.id),Kt(1)),Pn=await Pt(rn);if(Pn.size>0){const Bt=Pn.docs[0];dn({id:Bt.id,...Bt.data()})}else sessionStorage.getItem(`event_dismissed_${z.id}`)||Vr(!0);const sn=await La.getByUser(t.uid,20).catch(()=>[]),gn={};sn.filter(Bt=>Bt.status==="completed").forEach(Bt=>{var Qr;(Qr=Bt.exercises)==null||Qr.forEach(Mr=>{var or;(or=Mr.sets)==null||or.forEach(Ln=>{const Xn=parseFloat(Ln.actualWeight||Ln.prescribedWeight),ie=parseInt(Ln.actualReps||Ln.prescribedReps);if(Xn>0&&ie>0&&ie<=30){const Pe=ie===1?Xn:Xn*(1+ie/30);(!gn[Mr.name]||Pe>gn[Mr.name].weight)&&(gn[Mr.name]={weight:Math.round(Pe)})}})})}),jr({maxLifts:gn})}catch(re){console.error("Event check error:",re)}})()},[t]),b.useEffect(()=>{if(!De||!r||qe)return;(async()=>{Et(!0);try{const re=(await wa.getActivitySummary(7)).allEvents.filter(Qe=>!Qe.adminUid),We=new Set(re.map(Qe=>Qe.userId)),it={};re.forEach(Qe=>{it[Qe.action]=(it[Qe.action]||0)+1});const Pt={};re.forEach(Qe=>{var Pn,sn;const rn=(sn=(Pn=Qe.timestamp)==null?void 0:Pn.toDate)==null?void 0:sn.call(Pn);if(rn){const gn=rn.toISOString().split("T")[0];Pt[gn]||(Pt[gn]=new Set),Pt[gn].add(Qe.userId)}});const Kt=Object.entries(Pt).map(([Qe,rn])=>({date:Qe,count:rn.size})).sort((Qe,rn)=>Qe.date.localeCompare(rn.date));ir({totalEvents:re.length,uniqueUsers:We.size,actionCounts:it,dailyActiveCounts:Kt,recentEvents:re.slice(0,10),workoutsCreated:it.workout_created||0})}catch(Ee){console.error("Admin activity load error:",Ee)}finally{Et(!1)}})()},[De,r]);const te=a.length>0||u.length>0||h.length>0||Ae;a.length>0&&a.every(z=>z.status==="completed"||z.status!=="scheduled");const xe=async()=>{if(!(!G.trim()||!t)){J(!0);try{const{collection:z,addDoc:Ee,serverTimestamp:re}=await tt(async()=>{const{collection:it,addDoc:Pt,serverTimestamp:Kt}=await Promise.resolve().then(()=>oI);return{collection:it,addDoc:Pt,serverTimestamp:Kt}},void 0),{db:We}=await tt(async()=>{const{db:it}=await Promise.resolve().then(()=>aI);return{db:it}},void 0);await Ee(z(We,"feedback"),{userId:t.uid,userName:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Unknown",category:Se,message:G.trim(),status:"new",createdAt:re()}),Ie(""),pe(!0),setTimeout(()=>pe(!1),3e3)}catch(z){console.error("Failed to submit feedback:",z),alert("Failed to send feedback. Please try again.")}finally{J(!1)}}};return _t?f.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:f.jsxs("div",{className:"animate-pulse space-y-6",children:[f.jsx("div",{className:"h-8 bg-iron-800 rounded-lg w-2/3"}),f.jsx("div",{className:"h-48 bg-iron-800 rounded-2xl"}),f.jsx("div",{className:"h-24 bg-iron-800 rounded-xl"})]})}):f.jsxs("div",{className:"max-w-2xl mx-auto pb-24 overflow-x-hidden",children:[f.jsxs(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[f.jsx("p",{className:"text-iron-500 text-sm",children:Tr(Ut,"EEEE, MMMM d")}),f.jsxs("h1",{className:"text-3xl font-display text-iron-50",children:[Oo,Or?`, ${Or}`:""]})]}),f.jsx(YY,{}),rt&&(()=>{const z=rt.theme||{},Ee=(en==null?void 0:en.status)==="completed";return f.jsx(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:f.jsx("div",{className:`card-steel p-4 rounded-xl border ${z.border||"border-flame-500/20"} ${z.bg||"bg-flame-500/5"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-3xl",children:rt.emoji}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"text-sm font-semibold text-iron-100",children:rt.name}),f.jsxs("p",{className:"text-xs text-iron-500",children:[Ee?"Completed! Badge earned + 200 credits":en?"In progress  tap to continue":`${rt.creditReward} credits + profile badge`,rt.dateLabel&&!Ee&&f.jsxs(f.Fragment,{children:["  ",rt.dateLabel]})]})]}),Ee?f.jsx("span",{className:"text-2xl",children:""}):en?f.jsx(dt,{to:`/workouts/${en.id}`,className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${z.buttonBg||"bg-flame-500"} ${z.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Continue"}):f.jsx("button",{onClick:()=>Vr(!0),className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${z.buttonBg||"bg-flame-500"} ${z.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Start"})]})})})})(),f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[f.jsx(Ma,{className:"w-3.5 h-3.5 text-flame-400"}),"Today's Workout"]}),u.map(z=>{var Ee;return f.jsx(dt,{to:`/workouts/group/${z.id}`,className:"card-steel p-5 mb-3 border-cyan-500/20 hover:border-cyan-500/40 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/10 flex items-center justify-center flex-shrink-0",children:z.status==="completed"?f.jsx(Xi,{className:"w-7 h-7 text-green-400"}):f.jsx(va,{className:"w-7 h-7 text-cyan-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name}),f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-cyan-500/20 text-cyan-400 rounded-full flex-shrink-0",children:"Group"})]}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[((Ee=z.exercises)==null?void 0:Ee.length)||0," exercises",z.status==="completed"&&"  Completed"]})]}),f.jsx(Cs,{className:"w-5 h-5 text-iron-600"})]})},z.id)}),a.map(z=>{var Kt;const Ee=z.status==="completed"||z.status!=="scheduled",re=!!z.programId,We=Ee?"border-green-500/20 hover:border-green-500/40":re?"border-purple-500/20 hover:border-purple-500/40":"border-flame-500/20 hover:border-flame-500/40",it=Ee?"bg-green-500/10":re?"bg-purple-500/10":"bg-flame-500/10",Pt=Ee?"text-green-400":re?"text-purple-400":"text-flame-400";return f.jsx(dt,{to:`/workouts/${z.id}`,className:`card-steel p-5 mb-3 transition-colors block ${We}`,children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${it}`,children:Ee?f.jsx(Xi,{className:"w-7 h-7 text-green-400"}):f.jsx(gr,{className:`w-7 h-7 ${Pt}`})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[z.workoutType==="cardio"?`${z.duration} min`:`${((Kt=z.exercises)==null?void 0:Kt.length)||0} exercises`,Ee&&"  Completed",re&&!Ee&&"  Program"]})]}),f.jsx(Cs,{className:"w-5 h-5 text-iron-600"})]})},z.id)}),h.length>0&&u.length===0&&a.length===0&&f.jsx("div",{className:"space-y-3",children:h.map(z=>f.jsx("div",{className:"card-steel p-5 border-emerald-500/20",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(Dq,{className:"w-7 h-7 text-emerald-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name||"Scheduled Activity"}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:["Recurring",z.duration&&`  ${z.duration} min`]})]})]})},z.id))}),Ae&&!a.some(z=>z.programId===Ae.programId)&&f.jsx(dt,{to:`/programs/${Ae.programId}`,className:"card-steel p-5 border-amber-500/20 hover:border-amber-500/40 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(ya,{className:"w-7 h-7 text-amber-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:Ae.label}),f.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-amber-500/20 text-amber-400 flex-shrink-0",children:Ae.type})]}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[Ae.programName,"  Wk ",Ae.weekNumber,"  ",Ae.phase]}),f.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:[Ae.primaryLift,": ",Ae.primaryScheme," @ ",Ae.intensity]})]}),f.jsx("div",{className:"flex items-center gap-1 text-flame-400 flex-shrink-0",children:f.jsx(Oa,{className:"w-4 h-4"})})]})}),!Ae&&ce&&f.jsx(dt,{to:`/programs/${ce.programId}`,className:"card-steel p-4 border-iron-700/50 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(Q2,{className:"w-5 h-5 text-amber-400/70"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",Tr(ce.date,"EEEE")]}),f.jsxs("p",{className:"text-sm font-medium text-iron-200 truncate",children:[ce.label,f.jsxs("span",{className:"ml-1.5 text-xs text-iron-500 font-normal",children:[ce.primaryLift,": ",ce.primaryScheme," @ ",ce.intensity]})]}),f.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[ce.programName,"  Wk ",ce.weekNumber,"  ",ce.phase]})]}),f.jsx(Wc,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!te&&ue&&f.jsx(dt,{to:ue._type==="group"?`/workouts/group/${ue.id}`:`/workouts/${ue.id}`,className:"card-steel p-4 mb-3 border-iron-700/50 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${ue._type==="group"?"bg-cyan-500/10":"bg-flame-500/10"}`,children:ue._type==="group"?f.jsx(va,{className:"w-5 h-5 text-cyan-400"}):f.jsx(gr,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",Tr(ue._date,"EEEE")]}),f.jsx("p",{className:"text-sm font-medium text-iron-200 truncate",children:ue.name||"Scheduled Workout"}),f.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[ue._type==="group"?"Group workout":`${((ve=ue.exercises)==null?void 0:ve.length)||0} exercises`,ue.workoutType==="cardio"&&ue.duration?`  ${ue.duration} min`:""]})]}),f.jsx(Wc,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!te&&f.jsxs("div",{className:"card-steel p-8 text-center border-dashed border-iron-700",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-iron-800 flex items-center justify-center mx-auto mb-4",children:f.jsx(gr,{className:"w-8 h-8 text-iron-600"})}),f.jsx("h3",{className:"text-lg font-display text-iron-200 mb-1",children:"Nothing scheduled today"}),f.jsx("p",{className:"text-sm text-iron-500 mb-6",children:"Generate a workout with AI or log one manually."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-center",children:[f.jsxs(dt,{to:"/workouts/generate",className:"btn-primary flex items-center gap-2",children:[f.jsx(Oa,{className:"w-4 h-4"}),"Generate with AI"]}),f.jsxs(dt,{to:"/workouts/new",className:"btn-secondary flex items-center gap-2",children:[f.jsx(a_,{className:"w-4 h-4"}),"Create Workout"]})]})]})]}),m.length>0&&f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[f.jsxs("h3",{className:"text-xs text-amber-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[f.jsx(Wp,{className:"w-3.5 h-3.5"}),"Needs Your Review"]}),f.jsx("div",{className:"space-y-2",children:m.slice(0,3).map(z=>f.jsxs("div",{className:"card-steel p-3 border-amber-500/20 bg-amber-500/5 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Wp,{className:"w-5 h-5 text-amber-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:z.name||"Group Workout"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Coach logged for you"})]}),f.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[f.jsx("button",{onClick:()=>Mi(z.id),"aria-label":"Approve review",className:"p-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors",children:f.jsx(Mq,{className:"w-4 h-4"})}),f.jsx(dt,{to:`/workouts/group/${z.id}`,"aria-label":"View review details",className:"p-2 bg-iron-800 hover:bg-iron-700 text-iron-300 rounded-lg transition-colors",children:f.jsx(Cs,{className:"w-4 h-4"})})]})]},z.id))})]}),v.length>0&&f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-cyan-400 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Bl,{className:"w-3.5 h-3.5"}),"New Activity (",v.length,")"]}),f.jsx("button",{onClick:async()=>{await Yc.markAllAsRead(t.uid),I([])},className:"text-xs text-iron-500 hover:text-iron-300",children:"Dismiss all"})]}),f.jsx("div",{className:"space-y-2",children:v.slice(0,3).map(z=>f.jsxs(dt,{to:"/feed",onClick:()=>Yc.markAsRead(z.id),className:"card-steel p-3 border-cyan-500/20 bg-cyan-500/5 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Bl,{className:"w-5 h-5 text-cyan-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-sm font-medium text-iron-100 truncate",children:[z.fromUserName||"Someone"," commented on your ",z.feedType==="workout"?"workout":z.feedType==="group_workout"?"group workout":"activity"]}),f.jsxs("p",{className:"text-xs text-iron-500 truncate",children:['"',z.commentText,'"']})]}),f.jsx(Cs,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},z.id))})]}),f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(bq,{className:"w-3.5 h-3.5 text-flame-400"}),"This Week"]}),f.jsx(dt,{to:"/calendar",className:"text-xs text-flame-400 hover:text-flame-300",children:"Calendar "})]}),f.jsxs("div",{className:"card-steel p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("span",{className:"text-sm text-iron-400",children:[_.completed," workout",_.completed!==1?"s":""," completed"]}),f.jsxs("span",{className:"text-sm font-medium text-flame-400",children:[Tr(Ey(Ut,{weekStartsOn:1}),"MMM d"),"  ",Tr(hb(Ut,{weekStartsOn:1}),"MMM d")]})]}),f.jsx("div",{className:"flex gap-2",children:["M","T","W","T","F","S","S"].map((z,Ee)=>{const re=new Date(Ey(Ut,{weekStartsOn:1}));re.setDate(re.getDate()+Ee);const We=zo(re),it=vb(re),Pt=re<Qp(Ut)&&!it,Kt=E.has(We),Qe=L.has(We),rn=S[We],Pn=!Kt&&!Qe,sn=()=>{rn?rn.type==="group"?o(`/workouts/group/${rn.id}`):o(`/workouts/${rn.id}`):Pn&&!Pt&&o(`/workouts/generate?date=${We}`)};return f.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1.5",children:[f.jsx("span",{className:`text-xs font-medium ${it?"text-flame-400":"text-iron-600"}`,children:z}),f.jsxs("button",{onClick:sn,"aria-label":`${Tr(re,"EEEE d")}${Kt?", completed":Qe?", scheduled":""}`,className:`w-8 h-8 rounded-lg flex flex-col items-center justify-center text-xs font-medium transition-colors relative ${it?Kt?"bg-green-500/20 text-green-400 ring-2 ring-flame-500/30":"bg-flame-500/20 text-flame-400 ring-2 ring-flame-500/30":Kt?"bg-green-500/20 text-green-400":Qe?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/30":Pt?"bg-iron-800/50 text-iron-600":"bg-iron-800/30 text-iron-600"} ${rn||Pn?"cursor-pointer hover:ring-2 hover:ring-flame-500/30":"cursor-default"}`,children:[Tr(re,"d"),Kt&&f.jsx(Xi,{className:"w-2.5 h-2.5 absolute -bottom-0.5"})]})]},Ee)})})]})]}),ge.length>0?f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(ya,{className:"w-3.5 h-3.5 text-flame-400"}),"Goals"]}),f.jsx(dt,{to:"/goals",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),f.jsx("div",{className:"space-y-2",children:ge.slice(0,3).map(z=>{const Ee=parseFloat(z.currentValue)||parseFloat(z.currentWeight)||0,re=parseFloat(z.targetValue)||parseFloat(z.targetWeight)||0,We=parseFloat(z.startValue)||parseFloat(z.startWeight)||0,it=re>We?Math.min(100,Math.round((Ee-We)/(re-We)*100)):0,Pt=z.metricType==="weight"?"lbs":z.metricType==="reps"?"reps":"sec";return f.jsx(dt,{to:"/goals",className:"card-steel p-3 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-sm font-medium text-iron-200 truncate",children:z.lift}),f.jsxs("span",{className:"text-xs text-iron-500",children:[Ee,"/",re," ",Pt]})]}),f.jsx("div",{className:"w-full h-1.5 bg-iron-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-flame-500 rounded-full transition-all",style:{width:`${Math.max(2,it)}%`}})})]})},z.id)})})]}):!_t&&f.jsx(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:f.jsxs(dt,{to:"/goals",className:"card-steel p-4 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(ya,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Set a goal"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Track your progress toward a target"})]}),f.jsx(Cs,{className:"w-4 h-4 text-iron-600"})]})}),f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:k.length>0?"mt-6":"",children:[f.jsxs("button",{onClick:()=>gs(!Kr),"aria-expanded":Kr,"aria-label":"What's New  latest features and updates",className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Cq,{className:"w-5 h-5 text-purple-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"What's New"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Latest features and updates"})]}),f.jsx(Ul,{className:`w-4 h-4 text-iron-500 transition-transform ${Kr?"rotate-180":""}`})]}),Kr&&f.jsx(Ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 border-purple-500/10 max-h-80 overflow-y-auto",children:f.jsx("div",{className:"space-y-3",children:En.map((z,Ee)=>f.jsxs("div",{className:`${Ee>0?"pt-3 border-t border-iron-800/50":""}`,children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-iron-800 text-iron-400",children:z.tag}),f.jsx("span",{className:"text-xs text-iron-600",children:z.date})]}),f.jsx("p",{className:"text-sm font-medium text-iron-200",children:z.title}),f.jsx("p",{className:"text-xs text-iron-500 mt-0.5",children:z.description})]},Ee))})})]}),f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-2",children:[f.jsxs("button",{onClick:()=>li(!rr),"aria-expanded":rr,"aria-label":"1RM Calculator  estimate your one-rep max",className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Iq,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"1RM Calculator"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Estimate your one-rep max"})]}),f.jsx(Ul,{className:`w-4 h-4 text-iron-500 transition-transform ${rr?"rotate-180":""}`})]}),rr&&f.jsxs(Ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 space-y-4 border-flame-500/10",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Weight (lbs)"}),f.jsx("input",{type:"number",inputMode:"decimal",value:ji,onChange:z=>Vo(z.target.value),placeholder:"225",className:"input-field w-full text-base py-2.5"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Reps"}),f.jsx("input",{type:"number",inputMode:"numeric",value:Hr,onChange:z=>ui(z.target.value),placeholder:"5",min:"1",max:"30",className:"input-field w-full text-base py-2.5"})]})]}),ci&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"p-4 bg-gradient-to-br from-flame-500/20 to-flame-600/10 rounded-xl text-center",children:[f.jsx("p",{className:"text-xs text-iron-400 mb-0.5",children:"Estimated 1RM"}),f.jsxs("p",{className:"text-3xl font-display text-flame-400",children:[Math.round(ci)," ",f.jsx("span",{className:"text-base text-iron-400",children:"lbs"})]})]}),f.jsxs("div",{className:"bg-iron-800/50 rounded-lg overflow-hidden",children:[f.jsxs("div",{className:"grid grid-cols-3 text-xs font-medium text-iron-500 uppercase tracking-wider",children:[f.jsx("div",{className:"px-2 py-2 text-center",children:"Reps"}),f.jsx("div",{className:"px-2 py-2 text-center",children:"%1RM"}),f.jsx("div",{className:"px-2 py-2 text-center",children:"Weight"})]}),jo.map(({reps:z,pct:Ee,weight:re})=>f.jsxs("div",{className:`grid grid-cols-3 text-sm ${z===1?"bg-flame-500/10":""}`,children:[f.jsx("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-400"}`,children:z}),f.jsxs("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-500"}`,children:[Ee,"%"]}),f.jsxs("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-200"}`,children:[re," lbs"]})]},z))]})]})]})]}),(()=>{const z=new Set((e==null?void 0:e.groups)||[]),Ee=k.filter(re=>{if(re.userId===(t==null?void 0:t.uid))return!0;const We=re.visibility||"public";return We==="private"?!1:We==="friends"?R.has(re.userId):We==="group"?re.groupId&&z.has(re.groupId):!0});return Ee.length>0?f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(va,{className:"w-3.5 h-3.5"}),"Recent Activity"]}),f.jsx(dt,{to:"/feed",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),f.jsx("div",{className:"card-steel divide-y divide-iron-800",children:Ee.slice(0,4).map(re=>{var sn,gn,Bt,Qr,Mr,or,Ln,Xn,ie,Pe;const We=P[re.userId],it=(We==null?void 0:We.displayName)||"Someone",Pt=re.type==="group_workout"||re.groupId||((sn=re.data)==null?void 0:sn.groupId),Qe=re.userId===(t==null?void 0:t.uid)&&((gn=re.data)==null?void 0:gn.workoutId)?Pt?`/workouts/group/${re.data.workoutId}`:`/workouts/${re.data.workoutId}`:null,rn=Qe?dt:"div",Pn=Qe?{to:Qe}:{};return f.jsxs(rn,{...Pn,className:`flex items-center gap-3 p-3${Qe?" hover:bg-iron-800/50 transition-colors":""}`,children:[f.jsx(dt,{to:`/profile/${re.userId}`,className:"w-8 h-8 rounded-full bg-iron-800 flex items-center justify-center text-iron-400 text-xs flex-shrink-0 overflow-hidden",children:We!=null&&We.photoURL?f.jsx("img",{src:We.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover"}):f.jsx("span",{children:it[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-sm text-iron-300 truncate",children:[f.jsx("span",{className:"text-iron-200 font-medium",children:it})," ",Pt?`completed their workout in ${((Bt=re.data)==null?void 0:Bt.groupName)||"a group"}`:re.type==="workout"?`completed ${((Qr=re.data)==null?void 0:Qr.name)||"a workout"}`:re.type==="goal_completed"?`achieved ${(Mr=re.data)==null?void 0:Mr.lift}`:re.type==="cardio"?`logged ${(or=re.data)==null?void 0:or.duration}min ${((Ln=re.data)==null?void 0:Ln.name)||"cardio"}`:re.type==="personal_record"?`hit a new PR on ${(Xn=re.data)==null?void 0:Xn.exercise}`:"was active",((ie=re.data)==null?void 0:ie.eventId)&&f.jsx(kq,{className:"w-3.5 h-3.5 text-pink-400 fill-pink-400 inline ml-1 -mt-0.5"})]}),f.jsxs("p",{className:"text-xs text-iron-600",children:[((Pe=re.createdAt)==null?void 0:Pe.toDate)&&Tr(re.createdAt.toDate(),"EEE, h:mm a"),(re.type==="workout"||Pt)&&(()=>{var ut,xr;const Fe=aQ((ut=re.data)==null?void 0:ut.totalSets,(xr=re.data)==null?void 0:xr.duration);return Fe?`  ${Fe}`:""})()]})]}),Qe&&f.jsx(Cs,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},re.id)})})]}):null})(),r&&f.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.38},className:"mt-6",children:[f.jsxs("button",{onClick:()=>Le(!De),"aria-expanded":De,className:"card-steel p-4 w-full flex items-center gap-3 hover:bg-iron-800/50 transition-colors",children:[f.jsx(Oq,{className:"w-5 h-5 text-flame-400"}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Admin Dashboard"}),f.jsx("p",{className:"text-xs text-iron-500",children:"User activity & stats (7 days)"})]}),f.jsx(Ul,{className:`w-4 h-4 text-iron-500 transition-transform ${De?"rotate-180":""}`})]}),De&&f.jsx(Ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 space-y-4",children:sr?f.jsxs("div",{className:"flex items-center justify-center py-8",children:[f.jsx(si,{className:"w-5 h-5 text-flame-400 animate-spin"}),f.jsx("span",{className:"ml-2 text-sm text-iron-500",children:"Loading activity..."})]}):qe?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-3 text-center",children:[f.jsx("p",{className:"text-xl font-display text-flame-400",children:qe.uniqueUsers}),f.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wide",children:"Users"})]}),f.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-3 text-center",children:[f.jsx("p",{className:"text-xl font-display text-iron-100",children:qe.totalEvents}),f.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wide",children:"Events"})]}),f.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-3 text-center",children:[f.jsx("p",{className:"text-xl font-display text-green-400",children:qe.workoutsCreated}),f.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wide",children:"Workouts"})]})]}),((pt=qe.dailyActiveCounts)==null?void 0:pt.length)>0&&f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-iron-500 mb-2",children:"Daily Active Users"}),f.jsx("div",{className:"flex items-end gap-1.5 h-16",children:qe.dailyActiveCounts.map(z=>{const Ee=Math.max(...qe.dailyActiveCounts.map(re=>re.count),1);return f.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[f.jsx("span",{className:"text-[9px] text-iron-500",children:z.count}),f.jsx("div",{className:"w-full bg-flame-500/80 rounded-t",style:{height:`${Math.max(4,z.count/Ee*40)}px`}}),f.jsx("span",{className:"text-[9px] text-iron-600",children:Tr(new Date(z.date+"T12:00:00"),"EEE")})]},z.date)})})]}),((nn=qe.recentEvents)==null?void 0:nn.length)>0&&f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-iron-500 mb-2",children:"Recent Events"}),f.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:qe.recentEvents.map(z=>{var Ee,re;return f.jsx("div",{className:"flex items-center gap-2 py-1.5 border-b border-iron-800/50 last:border-0",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs text-iron-300 truncate",children:[f.jsx("span",{className:"text-flame-400",children:z.action.replace(/_/g," ")}),((Ee=z.metadata)==null?void 0:Ee.page)&&f.jsxs("span",{className:"text-iron-600",children:[" ",z.metadata.page]})]}),f.jsx("p",{className:"text-[10px] text-iron-600",children:((re=z.timestamp)==null?void 0:re.toDate)&&GY(z.timestamp.toDate(),{addSuffix:!0})})]})},z.id)})})]}),f.jsxs(dt,{to:"/admin",className:"flex items-center justify-center gap-2 w-full py-2 text-xs text-flame-400 hover:text-flame-300 transition-colors border border-iron-800 rounded-lg hover:border-iron-700",children:[f.jsx(Eq,{className:"w-3.5 h-3.5"}),"Full Admin Dashboard",f.jsx(Wc,{className:"w-3 h-3"})]})]}):f.jsx("p",{className:"text-sm text-iron-500 text-center py-4",children:"No activity data"})})]}),!n&&f.jsxs(Ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-6 card-steel p-4",children:[f.jsx("h3",{className:"text-sm font-semibold text-iron-300 mb-3",children:"Feedback & Bugs"}),f.jsx("div",{className:"flex gap-2 mb-2",children:["bug","feature","general"].map(z=>f.jsx("button",{onClick:()=>B(z),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors capitalize ${Se===z?z==="bug"?"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":z==="feature"?"border-blue-500/50 bg-blue-500/10 text-blue-400 font-semibold":"border-flame-500/50 bg-flame-500/10 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:z},z))}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("textarea",{value:G,onChange:z=>Ie(z.target.value),placeholder:Se==="bug"?"Describe the bug...":Se==="feature"?"What would you like to see?":"Any thoughts or feedback...",rows:2,className:"flex-1 input-field text-sm resize-none"}),f.jsx("button",{onClick:xe,disabled:!G.trim()||W,"aria-label":W?"Sending feedback":he?"Feedback sent":"Send feedback",className:"self-end px-3 py-2 rounded-lg bg-flame-500 hover:bg-flame-600 disabled:bg-iron-700 disabled:text-iron-500 text-white transition-colors flex-shrink-0",children:W?f.jsx(si,{className:"w-4 h-4 animate-spin"}):he?f.jsx(Xi,{className:"w-4 h-4"}):f.jsx(J2,{className:"w-4 h-4"})})]}),he&&f.jsx("p",{className:"text-xs text-green-400 mt-1.5",children:"Thanks for your feedback!"})]}),tn&&rt&&f.jsx(XY,{event:rt,userContext:Vi,onClose:()=>{Vr(!1),sessionStorage.setItem(`event_dismissed_${rt.id}`,"1")}})]})}const tX=b.lazy(()=>tt(()=>import("./NotFoundPage-CV7gg2b1.js"),[])),nX=b.lazy(()=>tt(()=>import("./DashboardPage-Bf58tHbe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),rX=b.lazy(()=>tt(()=>import("./WorkoutsPage-Dv-3Fm5i.js"),__vite__mapDeps([10,3,7,11,12,13,14,8,15,16,17]))),Eb=b.lazy(()=>tt(()=>import("./NewWorkoutPage-Bs543VY8.js"),__vite__mapDeps([18,2,13,19,20,1,21,11,22,16]))),iX=b.lazy(()=>tt(()=>import("./WorkoutDetailPage-Bo48k0II.js"),__vite__mapDeps([23,2,24,25,26,8,14,15,16,27,13,12,28,11]))),sX=b.lazy(()=>tt(()=>import("./GroupWorkoutPage-KvbEpmCU.js"),__vite__mapDeps([29,24,25,26,16,15,28,27,12,11,22]))),oX=b.lazy(()=>tt(()=>import("./CalendarPage-BNTpqpCK.js"),__vite__mapDeps([30,6,1,17,31,7]))),aX=b.lazy(()=>tt(()=>import("./GroupsPage-Y5M4xHKu.js"),__vite__mapDeps([32,11,33]))),lX=b.lazy(()=>tt(()=>import("./GroupDetailPage-DmCsQ3iS.js"),__vite__mapDeps([34,35,12,7,14,16,36,8,33,27,11]))),uX=b.lazy(()=>tt(()=>import("./GroupBatchViewPage-BCMuOrjm.js"),__vite__mapDeps([37,26,24,25,12]))),cX=b.lazy(()=>tt(()=>import("./GoalsPage-B8VG01gC.js"),__vite__mapDeps([38,17,8,16,39]))),dX=b.lazy(()=>tt(()=>import("./ToolsPage-C8I9yL80.js"),__vite__mapDeps([40,22,3]))),hX=b.lazy(()=>tt(()=>import("./HealthPage-BbLK0xK-.js"),__vite__mapDeps([41,2,3,5,4,42]))),fX=b.lazy(()=>tt(()=>import("./UsagePage-D-TPUOcp.js"),__vite__mapDeps([43,12,11,42,3]))),pX=b.lazy(()=>tt(()=>import("./SettingsPage-D_VwC7eD.js"),__vite__mapDeps([44,2,45,35,46,47,48,11,25,16]))),mX=b.lazy(()=>tt(()=>import("./AdminPage-DdxFfPzI.js"),__vite__mapDeps([49,27,19,28,5,35,36,15,11,8,16,13,25]))),gX=b.lazy(()=>tt(()=>import("./FeedPage-CNQ3Mzef.js"),__vite__mapDeps([50,11,47,13,36,16,21,35]))),yX=b.lazy(()=>tt(()=>import("./FriendsPage-OTa0dUKO.js"),__vite__mapDeps([51,13,11,52]))),Tb=b.lazy(()=>tt(()=>import("./ProfilePage-D4Y3O0zw.js"),__vite__mapDeps([53,20,48,52,13,11,21,1,6,7]))),vX=b.lazy(()=>tt(()=>import("./GenerateWorkoutPage-Cko18MoG.js"),__vite__mapDeps([54,24,25,35,28,27,16,12]))),wX=b.lazy(()=>tt(()=>import("./ProgramsPage-BK2drkdK.js"),__vite__mapDeps([55,56,57,16]))),xX=b.lazy(()=>tt(()=>import("./ProgramDetailPage-7v4aZ7oV.js"),__vite__mapDeps([58,56,39,13,31,17]))),_X=b.lazy(()=>tt(()=>import("./DocsPage-BRLM2EBC.js"),__vite__mapDeps([59,1,25]))),EX=b.lazy(()=>tt(()=>import("./PrivacyPage-Cs8I40Jd.js"),[])),TX=b.lazy(()=>tt(()=>import("./CoachesPage-DyR43IUl.js"),__vite__mapDeps([60,61]))),IX=b.lazy(()=>tt(()=>import("./OnboardingPage-Vqr5_wyw.js"),__vite__mapDeps([62,1,46]))),SX=b.lazy(()=>tt(()=>import("./TrainerPage-B9vR1Zoc.js"),__vite__mapDeps([63,61,13,8,27,64,16]))),bX=b.lazy(()=>tt(()=>import("./FormCheckPage-BrxBflj0.js"),__vite__mapDeps([65,57,22,45,13,61,64,9,1])));function ct(){return f.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:f.jsx("div",{className:"w-10 h-10 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})})}function kX({children:t}){const{user:e,userProfile:n,loading:r,isGuest:i}=ai();return r?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"}),f.jsx("p",{className:"text-iron-400 font-medium",children:"Loading..."})]})}):e?!i&&n&&n.onboardingComplete===!1?f.jsx(Xl,{to:"/onboarding",replace:!0}):t:f.jsx(Xl,{to:"/login",replace:!0})}function AX({children:t}){const{user:e,userProfile:n,loading:r,isGuest:i}=ai(),s=new URLSearchParams(window.location.search).has("preview");return r?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e?!s&&(i||(n==null?void 0:n.onboardingComplete)!==!1)?f.jsx(Xl,{to:"/today",replace:!0}):t:f.jsx(Xl,{to:"/login",replace:!0})}function PX({children:t}){const{user:e,loading:n}=ai(),r=new URLSearchParams(window.location.search).has("preview");return n?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e&&!r?f.jsx(Xl,{to:"/",replace:!0}):t}function CX(){const{user:t,loading:e,signInAsGuest:n}=ai();return b.useEffect(()=>{!e&&!t&&n()},[e,t,n]),e?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):t?f.jsx(Xl,{to:"/today",replace:!0}):null}function RX(){return f.jsxs(FM,{children:[f.jsx(Ye,{path:"/login",element:f.jsx(PX,{children:f.jsx(SQ,{})})}),f.jsx(Ye,{path:"/guest",element:f.jsx(CX,{})}),f.jsx(Ye,{path:"/docs",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(_X,{})})}),f.jsx(Ye,{path:"/privacy",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(EX,{})})}),f.jsx(Ye,{path:"/coaches",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(TX,{})})}),f.jsx(Ye,{path:"/onboarding",element:f.jsx(AX,{children:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(IX,{})})})}),f.jsxs(Ye,{path:"/",element:f.jsx(kX,{children:f.jsx(xQ,{})}),children:[f.jsx(Ye,{index:!0,element:f.jsx(_b,{})}),f.jsx(Ye,{path:"today",element:f.jsx(_b,{})}),f.jsx(Ye,{path:"dashboard",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(nX,{})})}),f.jsx(Ye,{path:"workouts",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(rX,{})})}),f.jsx(Ye,{path:"workouts/group/:id",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(sX,{})})}),f.jsx(Ye,{path:"workouts/generate",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(vX,{})})}),f.jsx(Ye,{path:"workouts/new",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(Eb,{})})}),f.jsx(Ye,{path:"workouts/:id/edit",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(Eb,{})})}),f.jsx(Ye,{path:"workouts/:id",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(iX,{})})}),f.jsx(Ye,{path:"calendar",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(oX,{})})}),f.jsx(Ye,{path:"programs",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(wX,{})})}),f.jsx(Ye,{path:"programs/:id",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(xX,{})})}),f.jsx(Ye,{path:"groups",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(aX,{})})}),f.jsx(Ye,{path:"groups/:id",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(lX,{})})}),f.jsx(Ye,{path:"groups/:groupId/batch/:batchKey",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(uX,{})})}),f.jsx(Ye,{path:"goals",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(cX,{})})}),f.jsx(Ye,{path:"tools",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(dX,{})})}),f.jsx(Ye,{path:"form-check",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(bX,{})})}),f.jsx(Ye,{path:"health",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(hX,{})})}),f.jsx(Ye,{path:"feed",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(gX,{})})}),f.jsx(Ye,{path:"friends",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(yX,{})})}),f.jsx(Ye,{path:"profile/:userId",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(Tb,{})})}),f.jsx(Ye,{path:"profile",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(Tb,{})})}),f.jsx(Ye,{path:"usage",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(fX,{})})}),f.jsx(Ye,{path:"settings",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(pX,{})})}),f.jsx(Ye,{path:"trainer",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(SX,{})})}),f.jsx(Ye,{path:"admin",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(mX,{})})})]}),f.jsx(Ye,{path:"*",element:f.jsx(b.Suspense,{fallback:f.jsx(ct,{}),children:f.jsx(tX,{})})})]})}var lf,kb;const NX=!!((kb=(lf=window.Capacitor)==null?void 0:lf.isNativePlatform)!=null&&kb.call(lf));if("serviceWorker"in navigator&&!NX){const t=()=>{navigator.serviceWorker.getRegistration().then(e=>{e&&e.update().catch(()=>{})})};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&t()}),setInterval(t,5*60*1e3),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}by.createRoot(document.getElementById("root")).render(f.jsx(jd.StrictMode,{children:f.jsx(HM,{children:f.jsx(SN,{children:f.jsx(RX,{})})})}));export{M as $,xq as A,dv as B,Xi as C,Fq as D,Wp as E,Cs as F,Ce as G,Aq as H,gr as I,wq as J,ya as K,dt as L,bq as M,Lq as N,_q as O,a_ as P,T_ as Q,Nq as R,Oa as S,Mq as T,va as U,_e as V,we as W,wu as X,ne as Y,Ma as Z,tt as _,VX as a,jd as a$,se as a0,Jt as a1,Wt as a2,La as a3,Gc as a4,Wc as a5,Iq as a6,Eq as a7,lt as a8,bQ as a9,Qp as aA,GD as aB,Tv as aC,Sq as aD,Hp as aE,mS as aF,WX as aG,uQ as aH,PQ as aI,HX as aJ,Sv as aK,qc as aL,Pq as aM,Rq as aN,I_ as aO,Dq as aP,fS as aQ,Uf as aR,mu as aS,Oq as aT,gS as aU,EN as aV,Me as aW,de as aX,wn as aY,Ze as aZ,Yo as a_,Ni as aa,Yc as ab,ca as ac,Z2 as ad,GY as ae,aQ as af,Bl as ag,kq as ah,zD as ai,Bo as aj,vb as ak,Vq as al,ra as am,Ey as an,hb as ao,LQ as ap,zo as aq,ht as ar,jX as as,HY as at,pQ as au,S_ as av,cQ as aw,Y as ax,vz as ay,Ff as az,Io as b,wa as b0,KY as b1,YY as b2,Tq as b3,pS as b4,uy as b5,p5 as b6,cl as b7,WO as b8,WD as b9,DX as ba,Jp as bb,o8 as bc,DV as bd,oI as be,aI as bf,BX as bg,$X as bh,GX as bi,Ba as c,ai as d,sD as e,$D as f,Xc as g,Iv as h,si as i,f as j,Q2 as k,Y2 as l,Ue as m,Ul as n,io as o,qX as p,jf as q,b as r,J2 as s,K2 as t,eX as u,HD as v,ia as w,lI as x,KX as y,Tr as z};
