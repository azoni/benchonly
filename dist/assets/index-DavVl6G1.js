const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-BsuYLYkA.js","assets/chevron-left-BWaiEwwj.js","assets/calorieService-6-LCVeV1.js","assets/index-TowzVWci.js","assets/LineChart-BkyX5t8Q.js","assets/index-BNCci3qS.js","assets/index-JW2v18HP.js","assets/index-UiQdz_qZ.js","assets/pen-Blbe3mK0.js","assets/WorkoutsPage-BiUBBzxl.js","assets/search-CdPeamcd.js","assets/alert-circle-BQWEVami.js","assets/clock-CHsUorid.js","assets/more-vertical-D7X6ClrU.js","assets/trash-2-DxpHMsj-.js","assets/index-Baaxu7Eq.js","assets/NewWorkoutPage-B3FVx7Tx.js","assets/save-Bp_flRDz.js","assets/info-BHDbpY31.js","assets/WorkoutDetailPage-BCmE05XB.js","assets/message-square-CYRBMG9k.js","assets/pencil-DiRjhIfJ.js","assets/GroupWorkoutPage-DTjl4Y1v.js","assets/CalendarPage-aZkrWXvC.js","assets/skip-forward-DobHKWK0.js","assets/GroupsPage-B7t8EZis.js","assets/crown-DK_9BC_n.js","assets/GroupDetailPage-CD_CkGZK.js","assets/file-text-BjXoVHHE.js","assets/GoalsPage-fqaKx9pp.js","assets/index--caIxXy6.js","assets/ToolsPage-fguF50eK.js","assets/bar-chart-3-BJzb1Cto.js","assets/HealthPage-RjaVwDAr.js","assets/index-ZLxZewUB.js","assets/UsagePage-CGgwJXOU.js","assets/SettingsPage-BgjhlT4p.js","assets/ouraService-F5SoOO3Q.js","assets/shield-CLuHS2Aj.js","assets/scale-BdjQjl3j.js","assets/globe-Dt9Dj0E8.js","assets/lock-B3N8La-m.js","assets/external-link-CayelsnU.js","assets/AdminPage-CIZpHS3L.js","assets/index-C4LiAiv3.js","assets/FeedPage-BjIJq1uW.js","assets/trophy-uGPeuKAR.js","assets/FriendsPage-qNOFWGh2.js","assets/user-minus-C9uceC_P.js","assets/ProfilePage-C-kPFp_5.js","assets/GenerateWorkoutPage-DhIxG1hO.js","assets/ProgramsPage-DMOG9cJ2.js","assets/index-B73cHPXR.js","assets/pause-CU6cDde2.js","assets/ProgramDetailPage-Donm_BEo.js","assets/DocsPage-B2DOFugP.js","assets/OnboardingPage-BeBGNvHN.js","assets/TrainerPage-BRkOYAYF.js","assets/x-circle-G2W_UKOG.js","assets/FormCheckPage-ByMptVyx.js"])))=>i.map(i=>d[i]);
function yA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e9(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var gT={exports:{}},hh={},yT={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),vA=Symbol.for("react.portal"),wA=Symbol.for("react.fragment"),_A=Symbol.for("react.strict_mode"),xA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),EA=Symbol.for("react.context"),SA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),kA=Symbol.for("react.memo"),bA=Symbol.for("react.lazy"),dv=Symbol.iterator;function AA(t){return t===null||typeof t!="object"?null:(t=dv&&t[dv]||t["@@iterator"],typeof t=="function"?t:null)}var vT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wT=Object.assign,_T={};function Na(t,e,n){this.props=t,this.context=e,this.refs=_T,this.updater=n||vT}Na.prototype.isReactComponent={};Na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xT(){}xT.prototype=Na.prototype;function lg(t,e,n){this.props=t,this.context=e,this.refs=_T,this.updater=n||vT}var ug=lg.prototype=new xT;ug.constructor=lg;wT(ug,Na.prototype);ug.isPureReactComponent=!0;var hv=Array.isArray,TT=Object.prototype.hasOwnProperty,cg={current:null},ET={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)TT.call(e,r)&&!ET.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Tu,type:t,key:i,ref:o,props:s,_owner:cg.current}}function CA(t,e){return{$$typeof:Tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tu}function PA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fv=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PA(""+t.key):e.toString(36)}function Mc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tu:case vA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tf(o,0):r,hv(s)?(n="",t!=null&&(n=t.replace(fv,"$&/")+"/"),Mc(s,e,n,"",function(c){return c})):s!=null&&(dg(s)&&(s=CA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tf(i,a);o+=Mc(i,e,n,l,s)}else if(l=AA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tf(i,a++),o+=Mc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ic(t,e,n){if(t==null)return t;var r=[],s=0;return Mc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function RA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},Lc={transition:null},NA={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:Lc,ReactCurrentOwner:cg};function IT(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:ic,forEach:function(t,e,n){ic(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ic(t,function(){e++}),e},toArray:function(t){return ic(t,function(e){return e})||[]},only:function(t){if(!dg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Na;Ie.Fragment=wA;Ie.Profiler=xA;Ie.PureComponent=lg;Ie.StrictMode=_A;Ie.Suspense=IA;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NA;Ie.act=IT;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=cg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)TT.call(e,l)&&!ET.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tu,type:t.type,key:s,ref:i,props:r,_owner:o}};Ie.createContext=function(t){return t={$$typeof:EA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TA,_context:t},t.Consumer=t};Ie.createElement=ST;Ie.createFactory=function(t){var e=ST.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:SA,render:t}};Ie.isValidElement=dg;Ie.lazy=function(t){return{$$typeof:bA,_payload:{_status:-1,_result:t},_init:RA}};Ie.memo=function(t,e){return{$$typeof:kA,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Lc.transition;Lc.transition={};try{t()}finally{Lc.transition=e}};Ie.unstable_act=IT;Ie.useCallback=function(t,e){return En.current.useCallback(t,e)};Ie.useContext=function(t){return En.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return En.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return En.current.useEffect(t,e)};Ie.useId=function(){return En.current.useId()};Ie.useImperativeHandle=function(t,e,n){return En.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return En.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return En.current.useReducer(t,e,n)};Ie.useRef=function(t){return En.current.useRef(t)};Ie.useState=function(t){return En.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return En.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return En.current.useTransition()};Ie.version="18.3.1";yT.exports=Ie;var b=yT.exports;const Eu=mT(b),DA=yA({__proto__:null,default:Eu},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA=b,OA=Symbol.for("react.element"),VA=Symbol.for("react.fragment"),MA=Object.prototype.hasOwnProperty,LA=jA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FA={key:!0,ref:!0,__self:!0,__source:!0};function kT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MA.call(e,r)&&!FA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OA,type:t,key:i,ref:o,props:s,_owner:LA.current}}hh.Fragment=VA;hh.jsx=kT;hh.jsxs=kT;gT.exports=hh;var d=gT.exports,Ip={},bT={exports:{}},qn={},AT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Z){var ue=q.length;q.push(Z);e:for(;0<ue;){var ne=ue-1>>>1,Se=q[ne];if(0<s(Se,Z))q[ne]=Z,q[ue]=Se,ue=ne;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],ue=q.pop();if(ue!==Z){q[0]=ue;e:for(var ne=0,Se=q.length,Ke=Se>>>1;ne<Ke;){var nn=2*(ne+1)-1,Ht=q[nn],ut=nn+1,et=q[ut];if(0>s(Ht,ue))ut<Se&&0>s(et,Ht)?(q[ne]=et,q[ut]=ue,ne=ut):(q[ne]=Ht,q[nn]=ue,ne=nn);else if(ut<Se&&0>s(et,ue))q[ne]=et,q[ut]=ue,ne=ut;else break e}}return Z}function s(q,Z){var ue=q.sortIndex-Z.sortIndex;return ue!==0?ue:q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,_=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=q)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function N(q){if(E=!1,x(q),!_)if(n(l)!==null)_=!0,Ne(V);else{var Z=n(c);Z!==null&&xe(N,Z.startTime-q)}}function V(q,Z){_=!1,E&&(E=!1,S(v),v=-1),y=!0;var ue=m;try{for(x(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||q&&!R());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var Se=ne(f.expirationTime<=Z);Z=t.unstable_now(),typeof Se=="function"?f.callback=Se:f===n(l)&&r(l),x(Z)}else r(l);f=n(l)}if(f!==null)var Ke=!0;else{var nn=n(c);nn!==null&&xe(N,nn.startTime-Z),Ke=!1}return Ke}finally{f=null,m=ue,y=!1}}var L=!1,k=null,v=-1,T=5,C=-1;function R(){return!(t.unstable_now()-C<T)}function D(){if(k!==null){var q=t.unstable_now();C=q;var Z=!0;try{Z=k(!0,q)}finally{Z?P():(L=!1,k=null)}}else L=!1}var P;if(typeof w=="function")P=function(){w(D)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,lt=ke.port2;ke.port1.onmessage=D,P=function(){lt.postMessage(null)}}else P=function(){A(D,0)};function Ne(q){k=q,L||(L=!0,P())}function xe(q,Z){v=A(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,Ne(V))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var ue=m;m=Z;try{return q()}finally{m=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ue=m;m=q;try{return Z()}finally{m=ue}},t.unstable_scheduleCallback=function(q,Z,ue){var ne=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ne+ue:ne):ue=ne,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ue+Se,q={id:h++,callback:Z,priorityLevel:q,startTime:ue,expirationTime:Se,sortIndex:-1},ue>ne?(q.sortIndex=ue,e(c,q),n(l)===null&&q===n(c)&&(E?(S(v),v=-1):E=!0,xe(N,ue-ne))):(q.sortIndex=Se,e(l,q),_||y||(_=!0,Ne(V))),q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(q){var Z=m;return function(){var ue=m;m=Z;try{return q.apply(this,arguments)}finally{m=ue}}}})(CT);AT.exports=CT;var UA=AT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA=b,$n=UA;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PT=new Set,Wl={};function io(t,e){aa(t,e),aa(t+"Capture",e)}function aa(t,e){for(Wl[t]=e,t=0;t<e.length;t++)PT.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,$A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pv={},mv={};function WA(t){return kp.call(mv,t)?!0:kp.call(pv,t)?!1:$A.test(t)?mv[t]=!0:(pv[t]=!0,!1)}function zA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qA(t,e,n,r){if(e===null||typeof e>"u"||zA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tn[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var hg=/[\-:]([a-z])/g;function fg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hg,fg);tn[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hg,fg);tn[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hg,fg);tn[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function pg(t,e,n,r){var s=tn.hasOwnProperty(e)?tn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qA(e,n,s,r)&&(n=null),r||s===null?WA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ps=BA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),RT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),gg=Symbol.for("react.forward_ref"),Ap=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),yg=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),DT=Symbol.for("react.offscreen"),gv=Symbol.iterator;function tl(t){return t===null||typeof t!="object"?null:(t=gv&&t[gv]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,Ef;function pl(t){if(Ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ef=e&&e[1]||""}return`
`+Ef+t}var Sf=!1;function If(t,e){if(!t||Sf)return"";Sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pl(t):""}function HA(t){switch(t.tag){case 5:return pl(t.type);case 16:return pl("Lazy");case 13:return pl("Suspense");case 19:return pl("SuspenseList");case 0:case 2:case 15:return t=If(t.type,!1),t;case 11:return t=If(t.type.render,!1),t;case 1:return t=If(t.type,!0),t;default:return""}}function Pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Co:return"Fragment";case Ao:return"Portal";case bp:return"Profiler";case mg:return"StrictMode";case Ap:return"Suspense";case Cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NT:return(t.displayName||"Context")+".Consumer";case RT:return(t._context.displayName||"Context")+".Provider";case gg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yg:return e=t.displayName||null,e!==null?e:Pp(t.type)||"Memo";case Cs:e=t._payload,t=t._init;try{return Pp(t(e))}catch{}}return null}function GA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pp(e);case 8:return e===mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KA(t){var e=jT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ac(t){t._valueTracker||(t._valueTracker=KA(t))}function OT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rp(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function VT(t,e){e=e.checked,e!=null&&pg(t,"checked",e,!1)}function Np(t,e){VT(t,e);var n=ni(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dp(t,e.type,ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dp(t,e,n){(e!=="number"||ud(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ml=Array.isArray;function Go(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ni(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ml(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ni(n)}}function MT(t,e){var n=ni(e.value),r=ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Op(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lc,FT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lc=lc||document.createElement("div"),lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QA=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){QA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tl[e]=Tl[t]})});function UT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+e).trim():e+"px"}function BT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=UT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var YA=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(YA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Mp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=null;function vg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fp=null,Ko=null,Qo=null;function xv(t){if(t=ku(t)){if(typeof Fp!="function")throw Error($(280));var e=t.stateNode;e&&(e=yh(e),Fp(t.stateNode,t.type,e))}}function $T(t){Ko?Qo?Qo.push(t):Qo=[t]:Ko=t}function WT(){if(Ko){var t=Ko,e=Qo;if(Qo=Ko=null,xv(t),e)for(t=0;t<e.length;t++)xv(e[t])}}function zT(t,e){return t(e)}function qT(){}var kf=!1;function HT(t,e,n){if(kf)return t(e,n);kf=!0;try{return zT(t,e,n)}finally{kf=!1,(Ko!==null||Qo!==null)&&(qT(),WT())}}function ql(t,e){var n=t.stateNode;if(n===null)return null;var r=yh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Up=!1;if(is)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Up=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Up=!1}function XA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var El=!1,cd=null,dd=!1,Bp=null,JA={onError:function(t){El=!0,cd=t}};function ZA(t,e,n,r,s,i,o,a,l){El=!1,cd=null,XA.apply(JA,arguments)}function eC(t,e,n,r,s,i,o,a,l){if(ZA.apply(this,arguments),El){if(El){var c=cd;El=!1,cd=null}else throw Error($(198));dd||(dd=!0,Bp=c)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tv(t){if(oo(t)!==t)throw Error($(188))}function tC(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tv(s),t;if(i===r)return Tv(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function KT(t){return t=tC(t),t!==null?QT(t):null}function QT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QT(t);if(e!==null)return e;t=t.sibling}return null}var YT=$n.unstable_scheduleCallback,Ev=$n.unstable_cancelCallback,nC=$n.unstable_shouldYield,rC=$n.unstable_requestPaint,wt=$n.unstable_now,sC=$n.unstable_getCurrentPriorityLevel,wg=$n.unstable_ImmediatePriority,XT=$n.unstable_UserBlockingPriority,hd=$n.unstable_NormalPriority,iC=$n.unstable_LowPriority,JT=$n.unstable_IdlePriority,fh=null,Ar=null;function oC(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(fh,t,void 0,(t.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:uC,aC=Math.log,lC=Math.LN2;function uC(t){return t>>>=0,t===0?32:31-(aC(t)/lC|0)|0}var uc=64,cc=4194304;function gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gl(a):(i&=o,i!==0&&(r=gl(i)))}else o=n&~s,o!==0?r=gl(o):i!==0&&(r=gl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pr(e),s=1<<n,r|=t[n],e&=~s;return r}function cC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=cC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function $p(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZT(){var t=uc;return uc<<=1,!(uc&4194240)&&(uc=64),t}function bf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pr(e),t[e]=n}function hC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ze=0;function eE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tE,xg,nE,rE,sE,Wp=!1,dc=[],$s=null,Ws=null,zs=null,Hl=new Map,Gl=new Map,Ds=[],fC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sv(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(e.pointerId)}}function rl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ku(e),e!==null&&xg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pC(t,e,n,r,s){switch(e){case"focusin":return $s=rl($s,t,e,n,r,s),!0;case"dragenter":return Ws=rl(Ws,t,e,n,r,s),!0;case"mouseover":return zs=rl(zs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hl.set(i,rl(Hl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gl.set(i,rl(Gl.get(i)||null,t,e,n,r,s)),!0}return!1}function iE(t){var e=Ri(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=GT(n),e!==null){t.blockedOn=e,sE(t.priority,function(){nE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lp=r,n.target.dispatchEvent(r),Lp=null}else return e=ku(n),e!==null&&xg(e),t.blockedOn=n,!1;e.shift()}return!0}function Iv(t,e,n){Fc(t)&&n.delete(e)}function mC(){Wp=!1,$s!==null&&Fc($s)&&($s=null),Ws!==null&&Fc(Ws)&&(Ws=null),zs!==null&&Fc(zs)&&(zs=null),Hl.forEach(Iv),Gl.forEach(Iv)}function sl(t,e){t.blockedOn===e&&(t.blockedOn=null,Wp||(Wp=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,mC)))}function Kl(t){function e(s){return sl(s,t)}if(0<dc.length){sl(dc[0],t);for(var n=1;n<dc.length;n++){var r=dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for($s!==null&&sl($s,t),Ws!==null&&sl(Ws,t),zs!==null&&sl(zs,t),Hl.forEach(e),Gl.forEach(e),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)iE(n),n.blockedOn===null&&Ds.shift()}var Yo=ps.ReactCurrentBatchConfig,pd=!0;function gC(t,e,n,r){var s=ze,i=Yo.transition;Yo.transition=null;try{ze=1,Tg(t,e,n,r)}finally{ze=s,Yo.transition=i}}function yC(t,e,n,r){var s=ze,i=Yo.transition;Yo.transition=null;try{ze=4,Tg(t,e,n,r)}finally{ze=s,Yo.transition=i}}function Tg(t,e,n,r){if(pd){var s=zp(t,e,n,r);if(s===null)Mf(t,e,r,md,n),Sv(t,r);else if(pC(s,t,e,n,r))r.stopPropagation();else if(Sv(t,r),e&4&&-1<fC.indexOf(t)){for(;s!==null;){var i=ku(s);if(i!==null&&tE(i),i=zp(t,e,n,r),i===null&&Mf(t,e,r,md,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mf(t,e,r,null,n)}}var md=null;function zp(t,e,n,r){if(md=null,t=vg(r),t=Ri(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return md=t,null}function oE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sC()){case wg:return 1;case XT:return 4;case hd:case iC:return 16;case JT:return 536870912;default:return 16}default:return 16}}var Ls=null,Eg=null,Uc=null;function aE(){if(Uc)return Uc;var t,e=Eg,n=e.length,r,s="value"in Ls?Ls.value:Ls.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Uc=s.slice(t,1<r?1-r:void 0)}function Bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hc(){return!0}function kv(){return!1}function Hn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hc:kv,this.isPropagationStopped=kv,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),e}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sg=Hn(Da),Iu=ft({},Da,{view:0,detail:0}),vC=Hn(Iu),Af,Cf,il,ph=ft({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Af=t.screenX-il.screenX,Cf=t.screenY-il.screenY):Cf=Af=0,il=t),Af)},movementY:function(t){return"movementY"in t?t.movementY:Cf}}),bv=Hn(ph),wC=ft({},ph,{dataTransfer:0}),_C=Hn(wC),xC=ft({},Iu,{relatedTarget:0}),Pf=Hn(xC),TC=ft({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),EC=Hn(TC),SC=ft({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IC=Hn(SC),kC=ft({},Da,{data:0}),Av=Hn(kC),bC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CC[t])?!!e[t]:!1}function Ig(){return PC}var RC=ft({},Iu,{key:function(t){if(t.key){var e=bC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(t){return t.type==="keypress"?Bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NC=Hn(RC),DC=ft({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cv=Hn(DC),jC=ft({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),OC=Hn(jC),VC=ft({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),MC=Hn(VC),LC=ft({},ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FC=Hn(LC),UC=[9,13,27,32],kg=is&&"CompositionEvent"in window,Sl=null;is&&"documentMode"in document&&(Sl=document.documentMode);var BC=is&&"TextEvent"in window&&!Sl,lE=is&&(!kg||Sl&&8<Sl&&11>=Sl),Pv=" ",Rv=!1;function uE(t,e){switch(t){case"keyup":return UC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function $C(t,e){switch(t){case"compositionend":return cE(e);case"keypress":return e.which!==32?null:(Rv=!0,Pv);case"textInput":return t=e.data,t===Pv&&Rv?null:t;default:return null}}function WC(t,e){if(Po)return t==="compositionend"||!kg&&uE(t,e)?(t=aE(),Uc=Eg=Ls=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lE&&e.locale!=="ko"?null:e.data;default:return null}}var zC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zC[t.type]:e==="textarea"}function dE(t,e,n,r){$T(r),e=gd(e,"onChange"),0<e.length&&(n=new Sg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Il=null,Ql=null;function qC(t){TE(t,0)}function mh(t){var e=Do(t);if(OT(e))return t}function HC(t,e){if(t==="change")return e}var hE=!1;if(is){var Rf;if(is){var Nf="oninput"in document;if(!Nf){var Dv=document.createElement("div");Dv.setAttribute("oninput","return;"),Nf=typeof Dv.oninput=="function"}Rf=Nf}else Rf=!1;hE=Rf&&(!document.documentMode||9<document.documentMode)}function jv(){Il&&(Il.detachEvent("onpropertychange",fE),Ql=Il=null)}function fE(t){if(t.propertyName==="value"&&mh(Ql)){var e=[];dE(e,Ql,t,vg(t)),HT(qC,e)}}function GC(t,e,n){t==="focusin"?(jv(),Il=e,Ql=n,Il.attachEvent("onpropertychange",fE)):t==="focusout"&&jv()}function KC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mh(Ql)}function QC(t,e){if(t==="click")return mh(e)}function YC(t,e){if(t==="input"||t==="change")return mh(e)}function XC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yr=typeof Object.is=="function"?Object.is:XC;function Yl(t,e){if(yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kp.call(e,s)||!yr(t[s],e[s]))return!1}return!0}function Ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vv(t,e){var n=Ov(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ov(n)}}function pE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mE(){for(var t=window,e=ud();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ud(t.document)}return e}function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JC(t){var e=mE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pE(n.ownerDocument.documentElement,n)){if(r!==null&&bg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vv(n,i);var o=Vv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZC=is&&"documentMode"in document&&11>=document.documentMode,Ro=null,qp=null,kl=null,Hp=!1;function Mv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hp||Ro==null||Ro!==ud(r)||(r=Ro,"selectionStart"in r&&bg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Yl(kl,r)||(kl=r,r=gd(qp,"onSelect"),0<r.length&&(e=new Sg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ro)))}function fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var No={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},Df={},gE={};is&&(gE=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function gh(t){if(Df[t])return Df[t];if(!No[t])return t;var e=No[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gE)return Df[t]=e[n];return t}var yE=gh("animationend"),vE=gh("animationiteration"),wE=gh("animationstart"),_E=gh("transitionend"),xE=new Map,Lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,e){xE.set(t,e),io(e,[t])}for(var jf=0;jf<Lv.length;jf++){var Of=Lv[jf],eP=Of.toLowerCase(),tP=Of[0].toUpperCase()+Of.slice(1);ui(eP,"on"+tP)}ui(yE,"onAnimationEnd");ui(vE,"onAnimationIteration");ui(wE,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(_E,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nP=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function Fv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eC(r,e,void 0,t),t.currentTarget=null}function TE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Fv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Fv(s,a,c),i=l}}}if(dd)throw t=Bp,dd=!1,Bp=null,t}function it(t,e){var n=e[Xp];n===void 0&&(n=e[Xp]=new Set);var r=t+"__bubble";n.has(r)||(EE(e,t,2,!1),n.add(r))}function Vf(t,e,n){var r=0;e&&(r|=4),EE(n,t,r,e)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Xl(t){if(!t[pc]){t[pc]=!0,PT.forEach(function(n){n!=="selectionchange"&&(nP.has(n)||Vf(n,!1,t),Vf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pc]||(e[pc]=!0,Vf("selectionchange",!1,e))}}function EE(t,e,n,r){switch(oE(e)){case 1:var s=gC;break;case 4:s=yC;break;default:s=Tg}n=s.bind(null,e,n,t),s=void 0,!Up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ri(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}HT(function(){var c=i,h=vg(n),f=[];e:{var m=xE.get(t);if(m!==void 0){var y=Sg,_=t;switch(t){case"keypress":if(Bc(n)===0)break e;case"keydown":case"keyup":y=NC;break;case"focusin":_="focus",y=Pf;break;case"focusout":_="blur",y=Pf;break;case"beforeblur":case"afterblur":y=Pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=bv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=_C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=OC;break;case yE:case vE:case wE:y=EC;break;case _E:y=MC;break;case"scroll":y=vC;break;case"wheel":y=FC;break;case"copy":case"cut":case"paste":y=IC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Cv}var E=(e&4)!==0,A=!E&&t==="scroll",S=E?m!==null?m+"Capture":null:m;E=[];for(var w=c,x;w!==null;){x=w;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,S!==null&&(N=ql(w,S),N!=null&&E.push(Jl(w,N,x)))),A)break;w=w.return}0<E.length&&(m=new y(m,_,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Lp&&(_=n.relatedTarget||n.fromElement)&&(Ri(_)||_[os]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=c,_=_?Ri(_):null,_!==null&&(A=oo(_),_!==A||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(E=bv,N="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=Cv,N="onPointerLeave",S="onPointerEnter",w="pointer"),A=y==null?m:Do(y),x=_==null?m:Do(_),m=new E(N,w+"leave",y,n,h),m.target=A,m.relatedTarget=x,N=null,Ri(h)===c&&(E=new E(S,w+"enter",_,n,h),E.target=x,E.relatedTarget=A,N=E),A=N,y&&_)t:{for(E=y,S=_,w=0,x=E;x;x=_o(x))w++;for(x=0,N=S;N;N=_o(N))x++;for(;0<w-x;)E=_o(E),w--;for(;0<x-w;)S=_o(S),x--;for(;w--;){if(E===S||S!==null&&E===S.alternate)break t;E=_o(E),S=_o(S)}E=null}else E=null;y!==null&&Uv(f,m,y,E,!1),_!==null&&A!==null&&Uv(f,A,_,E,!0)}}e:{if(m=c?Do(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var V=HC;else if(Nv(m))if(hE)V=YC;else{V=KC;var L=GC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=QC);if(V&&(V=V(t,c))){dE(f,V,n,h);break e}L&&L(t,m,c),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&Dp(m,"number",m.value)}switch(L=c?Do(c):window,t){case"focusin":(Nv(L)||L.contentEditable==="true")&&(Ro=L,qp=c,kl=null);break;case"focusout":kl=qp=Ro=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Mv(f,n,h);break;case"selectionchange":if(ZC)break;case"keydown":case"keyup":Mv(f,n,h)}var k;if(kg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Po?uE(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(lE&&n.locale!=="ko"&&(Po||v!=="onCompositionStart"?v==="onCompositionEnd"&&Po&&(k=aE()):(Ls=h,Eg="value"in Ls?Ls.value:Ls.textContent,Po=!0)),L=gd(c,v),0<L.length&&(v=new Av(v,t,null,n,h),f.push({event:v,listeners:L}),k?v.data=k:(k=cE(n),k!==null&&(v.data=k)))),(k=BC?$C(t,n):WC(t,n))&&(c=gd(c,"onBeforeInput"),0<c.length&&(h=new Av("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=k))}TE(f,e)})}function Jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ql(t,n),i!=null&&r.unshift(Jl(t,i,s)),i=ql(t,e),i!=null&&r.push(Jl(t,i,s))),t=t.return}return r}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ql(n,i),l!=null&&o.unshift(Jl(n,l,a))):s||(l=ql(n,i),l!=null&&o.push(Jl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rP=/\r\n?/g,sP=/\u0000|\uFFFD/g;function Bv(t){return(typeof t=="string"?t:""+t).replace(rP,`
`).replace(sP,"")}function mc(t,e,n){if(e=Bv(e),Bv(t)!==e&&n)throw Error($(425))}function yd(){}var Gp=null,Kp=null;function Qp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yp=typeof setTimeout=="function"?setTimeout:void 0,iP=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,oP=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(t){return $v.resolve(null).then(t).catch(aP)}:Yp;function aP(t){setTimeout(function(){throw t})}function Lf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Kl(e)}function qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Ir="__reactFiber$"+ja,Zl="__reactProps$"+ja,os="__reactContainer$"+ja,Xp="__reactEvents$"+ja,lP="__reactListeners$"+ja,uP="__reactHandles$"+ja;function Ri(t){var e=t[Ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[os]||n[Ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wv(t);t!==null;){if(n=t[Ir])return n;t=Wv(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[Ir]||t[os],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function yh(t){return t[Zl]||null}var Jp=[],jo=-1;function ci(t){return{current:t}}function ot(t){0>jo||(t.current=Jp[jo],Jp[jo]=null,jo--)}function nt(t,e){jo++,Jp[jo]=t.current,t.current=e}var ri={},gn=ci(ri),Cn=ci(!1),zi=ri;function la(t,e){var n=t.type.contextTypes;if(!n)return ri;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function vd(){ot(Cn),ot(gn)}function zv(t,e,n){if(gn.current!==ri)throw Error($(168));nt(gn,e),nt(Cn,n)}function SE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,GA(t)||"Unknown",s));return ft({},n,r)}function wd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ri,zi=gn.current,nt(gn,t),nt(Cn,Cn.current),!0}function qv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=SE(t,e,zi),r.__reactInternalMemoizedMergedChildContext=t,ot(Cn),ot(gn),nt(gn,t)):ot(Cn),nt(Cn,n)}var qr=null,vh=!1,Ff=!1;function IE(t){qr===null?qr=[t]:qr.push(t)}function cP(t){vh=!0,IE(t)}function di(){if(!Ff&&qr!==null){Ff=!0;var t=0,e=ze;try{var n=qr;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,vh=!1}catch(s){throw qr!==null&&(qr=qr.slice(t+1)),YT(wg,di),s}finally{ze=e,Ff=!1}}return null}var Oo=[],Vo=0,_d=null,xd=0,Xn=[],Jn=0,qi=null,Gr=1,Kr="";function Si(t,e){Oo[Vo++]=xd,Oo[Vo++]=_d,_d=t,xd=e}function kE(t,e,n){Xn[Jn++]=Gr,Xn[Jn++]=Kr,Xn[Jn++]=qi,qi=t;var r=Gr;t=Kr;var s=32-pr(r)-1;r&=~(1<<s),n+=1;var i=32-pr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gr=1<<32-pr(e)+s|n<<s|r,Kr=i+t}else Gr=1<<i|n<<s|r,Kr=t}function Ag(t){t.return!==null&&(Si(t,1),kE(t,1,0))}function Cg(t){for(;t===_d;)_d=Oo[--Vo],Oo[Vo]=null,xd=Oo[--Vo],Oo[Vo]=null;for(;t===qi;)qi=Xn[--Jn],Xn[Jn]=null,Kr=Xn[--Jn],Xn[Jn]=null,Gr=Xn[--Jn],Xn[Jn]=null}var Bn=null,Fn=null,at=!1,fr=null;function bE(t,e){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:Gr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function Zp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function em(t){if(at){var e=Fn;if(e){var n=e;if(!Hv(t,e)){if(Zp(t))throw Error($(418));e=qs(n.nextSibling);var r=Bn;e&&Hv(t,e)?bE(r,n):(t.flags=t.flags&-4097|2,at=!1,Bn=t)}}else{if(Zp(t))throw Error($(418));t.flags=t.flags&-4097|2,at=!1,Bn=t}}}function Gv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function gc(t){if(t!==Bn)return!1;if(!at)return Gv(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qp(t.type,t.memoizedProps)),e&&(e=Fn)){if(Zp(t))throw AE(),Error($(418));for(;e;)bE(t,e),e=qs(e.nextSibling)}if(Gv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?qs(t.stateNode.nextSibling):null;return!0}function AE(){for(var t=Fn;t;)t=qs(t.nextSibling)}function ua(){Fn=Bn=null,at=!1}function Pg(t){fr===null?fr=[t]:fr.push(t)}var dP=ps.ReactCurrentBatchConfig;function ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function yc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kv(t){var e=t._init;return e(t._payload)}function CE(t){function e(S,w){if(t){var x=S.deletions;x===null?(S.deletions=[w],S.flags|=16):x.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=Qs(S,w),S.index=0,S.sibling=null,S}function i(S,w,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<w?(S.flags|=2,w):x):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,w,x,N){return w===null||w.tag!==6?(w=Hf(x,S.mode,N),w.return=S,w):(w=s(w,x),w.return=S,w)}function l(S,w,x,N){var V=x.type;return V===Co?h(S,w,x.props.children,N,x.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cs&&Kv(V)===w.type)?(N=s(w,x.props),N.ref=ol(S,w,x),N.return=S,N):(N=Kc(x.type,x.key,x.props,null,S.mode,N),N.ref=ol(S,w,x),N.return=S,N)}function c(S,w,x,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Gf(x,S.mode,N),w.return=S,w):(w=s(w,x.children||[]),w.return=S,w)}function h(S,w,x,N,V){return w===null||w.tag!==7?(w=Li(x,S.mode,N,V),w.return=S,w):(w=s(w,x),w.return=S,w)}function f(S,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hf(""+w,S.mode,x),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oc:return x=Kc(w.type,w.key,w.props,null,S.mode,x),x.ref=ol(S,null,w),x.return=S,x;case Ao:return w=Gf(w,S.mode,x),w.return=S,w;case Cs:var N=w._init;return f(S,N(w._payload),x)}if(ml(w)||tl(w))return w=Li(w,S.mode,x,null),w.return=S,w;yc(S,w)}return null}function m(S,w,x,N){var V=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:a(S,w,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:return x.key===V?l(S,w,x,N):null;case Ao:return x.key===V?c(S,w,x,N):null;case Cs:return V=x._init,m(S,w,V(x._payload),N)}if(ml(x)||tl(x))return V!==null?null:h(S,w,x,N,null);yc(S,x)}return null}function y(S,w,x,N,V){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(x)||null,a(w,S,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case oc:return S=S.get(N.key===null?x:N.key)||null,l(w,S,N,V);case Ao:return S=S.get(N.key===null?x:N.key)||null,c(w,S,N,V);case Cs:var L=N._init;return y(S,w,x,L(N._payload),V)}if(ml(N)||tl(N))return S=S.get(x)||null,h(w,S,N,V,null);yc(w,N)}return null}function _(S,w,x,N){for(var V=null,L=null,k=w,v=w=0,T=null;k!==null&&v<x.length;v++){k.index>v?(T=k,k=null):T=k.sibling;var C=m(S,k,x[v],N);if(C===null){k===null&&(k=T);break}t&&k&&C.alternate===null&&e(S,k),w=i(C,w,v),L===null?V=C:L.sibling=C,L=C,k=T}if(v===x.length)return n(S,k),at&&Si(S,v),V;if(k===null){for(;v<x.length;v++)k=f(S,x[v],N),k!==null&&(w=i(k,w,v),L===null?V=k:L.sibling=k,L=k);return at&&Si(S,v),V}for(k=r(S,k);v<x.length;v++)T=y(k,S,v,x[v],N),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?v:T.key),w=i(T,w,v),L===null?V=T:L.sibling=T,L=T);return t&&k.forEach(function(R){return e(S,R)}),at&&Si(S,v),V}function E(S,w,x,N){var V=tl(x);if(typeof V!="function")throw Error($(150));if(x=V.call(x),x==null)throw Error($(151));for(var L=V=null,k=w,v=w=0,T=null,C=x.next();k!==null&&!C.done;v++,C=x.next()){k.index>v?(T=k,k=null):T=k.sibling;var R=m(S,k,C.value,N);if(R===null){k===null&&(k=T);break}t&&k&&R.alternate===null&&e(S,k),w=i(R,w,v),L===null?V=R:L.sibling=R,L=R,k=T}if(C.done)return n(S,k),at&&Si(S,v),V;if(k===null){for(;!C.done;v++,C=x.next())C=f(S,C.value,N),C!==null&&(w=i(C,w,v),L===null?V=C:L.sibling=C,L=C);return at&&Si(S,v),V}for(k=r(S,k);!C.done;v++,C=x.next())C=y(k,S,v,C.value,N),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?v:C.key),w=i(C,w,v),L===null?V=C:L.sibling=C,L=C);return t&&k.forEach(function(D){return e(S,D)}),at&&Si(S,v),V}function A(S,w,x,N){if(typeof x=="object"&&x!==null&&x.type===Co&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:e:{for(var V=x.key,L=w;L!==null;){if(L.key===V){if(V=x.type,V===Co){if(L.tag===7){n(S,L.sibling),w=s(L,x.props.children),w.return=S,S=w;break e}}else if(L.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cs&&Kv(V)===L.type){n(S,L.sibling),w=s(L,x.props),w.ref=ol(S,L,x),w.return=S,S=w;break e}n(S,L);break}else e(S,L);L=L.sibling}x.type===Co?(w=Li(x.props.children,S.mode,N,x.key),w.return=S,S=w):(N=Kc(x.type,x.key,x.props,null,S.mode,N),N.ref=ol(S,w,x),N.return=S,S=N)}return o(S);case Ao:e:{for(L=x.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(S,w.sibling),w=s(w,x.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Gf(x,S.mode,N),w.return=S,S=w}return o(S);case Cs:return L=x._init,A(S,w,L(x._payload),N)}if(ml(x))return _(S,w,x,N);if(tl(x))return E(S,w,x,N);yc(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,x),w.return=S,S=w):(n(S,w),w=Hf(x,S.mode,N),w.return=S,S=w),o(S)):n(S,w)}return A}var ca=CE(!0),PE=CE(!1),Td=ci(null),Ed=null,Mo=null,Rg=null;function Ng(){Rg=Mo=Ed=null}function Dg(t){var e=Td.current;ot(Td),t._currentValue=e}function tm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xo(t,e){Ed=t,Rg=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function tr(t){var e=t._currentValue;if(Rg!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(Ed===null)throw Error($(308));Mo=t,Ed.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var Ni=null;function jg(t){Ni===null?Ni=[t]:Ni.push(t)}function RE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jg(e)):(n.next=s.next,s.next=n),e.interleaved=n,as(t,r)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ps=!1;function Og(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,as(t,n)}return s=r.interleaved,s===null?(e.next=e,jg(r)):(e.next=s.next,s.next=e),r.interleaved=e,as(t,n)}function $c(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_g(t,n)}}function Qv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sd(t,e,n,r){var s=t.updateQueue;Ps=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(m=e,y=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){f=_.call(y,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,m=typeof _=="function"?_.call(y,f,m):_,m==null)break e;f=ft({},f,m);break e;case 2:Ps=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Gi|=o,t.lanes=o,t.memoizedState=f}}function Yv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var bu={},Cr=ci(bu),eu=ci(bu),tu=ci(bu);function Di(t){if(t===bu)throw Error($(174));return t}function Vg(t,e){switch(nt(tu,e),nt(eu,t),nt(Cr,bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Op(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Op(e,t)}ot(Cr),nt(Cr,e)}function da(){ot(Cr),ot(eu),ot(tu)}function DE(t){Di(tu.current);var e=Di(Cr.current),n=Op(e,t.type);e!==n&&(nt(eu,t),nt(Cr,n))}function Mg(t){eu.current===t&&(ot(Cr),ot(eu))}var ct=ci(0);function Id(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uf=[];function Lg(){for(var t=0;t<Uf.length;t++)Uf[t]._workInProgressVersionPrimary=null;Uf.length=0}var Wc=ps.ReactCurrentDispatcher,Bf=ps.ReactCurrentBatchConfig,Hi=0,ht=null,Ot=null,$t=null,kd=!1,bl=!1,nu=0,hP=0;function ln(){throw Error($(321))}function Fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yr(t[n],e[n]))return!1;return!0}function Ug(t,e,n,r,s,i){if(Hi=i,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wc.current=t===null||t.memoizedState===null?gP:yP,t=n(r,s),bl){i=0;do{if(bl=!1,nu=0,25<=i)throw Error($(301));i+=1,$t=Ot=null,e.updateQueue=null,Wc.current=vP,t=n(r,s)}while(bl)}if(Wc.current=bd,e=Ot!==null&&Ot.next!==null,Hi=0,$t=Ot=ht=null,kd=!1,e)throw Error($(300));return t}function Bg(){var t=nu!==0;return nu=0,t}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?ht.memoizedState=$t=t:$t=$t.next=t,$t}function nr(){if(Ot===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=$t===null?ht.memoizedState:$t.next;if(e!==null)$t=e,Ot=t;else{if(t===null)throw Error($(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},$t===null?ht.memoizedState=$t=t:$t=$t.next=t}return $t}function ru(t,e){return typeof e=="function"?e(t):e}function $f(t){var e=nr(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Hi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ht.lanes|=h,Gi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,yr(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ht.lanes|=i,Gi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wf(t){var e=nr(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yr(i,e.memoizedState)||(An=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jE(){}function OE(t,e){var n=ht,r=nr(),s=e(),i=!yr(r.memoizedState,s);if(i&&(r.memoizedState=s,An=!0),r=r.queue,$g(LE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,su(9,ME.bind(null,n,r,s,e),void 0,null),zt===null)throw Error($(349));Hi&30||VE(n,e,s)}return s}function VE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ME(t,e,n,r){e.value=n,e.getSnapshot=r,FE(e)&&UE(t)}function LE(t,e,n){return n(function(){FE(e)&&UE(t)})}function FE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yr(t,n)}catch{return!0}}function UE(t){var e=as(t,1);e!==null&&mr(e,t,1,-1)}function Xv(t){var e=Sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:t},e.queue=t,t=t.dispatch=mP.bind(null,ht,t),[e.memoizedState,t]}function su(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BE(){return nr().memoizedState}function zc(t,e,n,r){var s=Sr();ht.flags|=t,s.memoizedState=su(1|e,n,void 0,r===void 0?null:r)}function wh(t,e,n,r){var s=nr();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,r!==null&&Fg(r,o.deps)){s.memoizedState=su(e,n,i,r);return}}ht.flags|=t,s.memoizedState=su(1|e,n,i,r)}function Jv(t,e){return zc(8390656,8,t,e)}function $g(t,e){return wh(2048,8,t,e)}function $E(t,e){return wh(4,2,t,e)}function WE(t,e){return wh(4,4,t,e)}function zE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qE(t,e,n){return n=n!=null?n.concat([t]):null,wh(4,4,zE.bind(null,e,t),n)}function Wg(){}function HE(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GE(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KE(t,e,n){return Hi&21?(yr(n,e)||(n=ZT(),ht.lanes|=n,Gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function fP(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=Bf.transition;Bf.transition={};try{t(!1),e()}finally{ze=n,Bf.transition=r}}function QE(){return nr().memoizedState}function pP(t,e,n){var r=Ks(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YE(t))XE(e,n);else if(n=RE(t,e,n,r),n!==null){var s=xn();mr(n,t,r,s),JE(n,e,r)}}function mP(t,e,n){var r=Ks(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YE(t))XE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,yr(a,o)){var l=e.interleaved;l===null?(s.next=s,jg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=RE(t,e,s,r),n!==null&&(s=xn(),mr(n,t,r,s),JE(n,e,r))}}function YE(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function XE(t,e){bl=kd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_g(t,n)}}var bd={readContext:tr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},gP={readContext:tr,useCallback:function(t,e){return Sr().memoizedState=[t,e===void 0?null:e],t},useContext:tr,useEffect:Jv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zc(4194308,4,zE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return zc(4,2,t,e)},useMemo:function(t,e){var n=Sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pP.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=Sr();return t={current:t},e.memoizedState=t},useState:Xv,useDebugValue:Wg,useDeferredValue:function(t){return Sr().memoizedState=t},useTransition:function(){var t=Xv(!1),e=t[0];return t=fP.bind(null,t[1]),Sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,s=Sr();if(at){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),zt===null)throw Error($(349));Hi&30||VE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jv(LE.bind(null,r,i,t),[t]),r.flags|=2048,su(9,ME.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sr(),e=zt.identifierPrefix;if(at){var n=Kr,r=Gr;n=(r&~(1<<32-pr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yP={readContext:tr,useCallback:HE,useContext:tr,useEffect:$g,useImperativeHandle:qE,useInsertionEffect:$E,useLayoutEffect:WE,useMemo:GE,useReducer:$f,useRef:BE,useState:function(){return $f(ru)},useDebugValue:Wg,useDeferredValue:function(t){var e=nr();return KE(e,Ot.memoizedState,t)},useTransition:function(){var t=$f(ru)[0],e=nr().memoizedState;return[t,e]},useMutableSource:jE,useSyncExternalStore:OE,useId:QE,unstable_isNewReconciler:!1},vP={readContext:tr,useCallback:HE,useContext:tr,useEffect:$g,useImperativeHandle:qE,useInsertionEffect:$E,useLayoutEffect:WE,useMemo:GE,useReducer:Wf,useRef:BE,useState:function(){return Wf(ru)},useDebugValue:Wg,useDeferredValue:function(t){var e=nr();return Ot===null?e.memoizedState=t:KE(e,Ot.memoizedState,t)},useTransition:function(){var t=Wf(ru)[0],e=nr().memoizedState;return[t,e]},useMutableSource:jE,useSyncExternalStore:OE,useId:QE,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _h={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xn(),s=Ks(t),i=Zr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hs(t,i,s),e!==null&&(mr(e,t,s,r),$c(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xn(),s=Ks(t),i=Zr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hs(t,i,s),e!==null&&(mr(e,t,s,r),$c(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),r=Ks(t),s=Zr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hs(t,s,r),e!==null&&(mr(e,t,r,n),$c(e,t,r))}};function Zv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yl(n,r)||!Yl(s,i):!0}function ZE(t,e,n){var r=!1,s=ri,i=e.contextType;return typeof i=="object"&&i!==null?i=tr(i):(s=Pn(e)?zi:gn.current,r=e.contextTypes,i=(r=r!=null)?la(t,s):ri),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_h.enqueueReplaceState(e,e.state,null)}function rm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Og(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tr(i):(i=Pn(e)?zi:gn.current,s.context=la(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_h.enqueueReplaceState(s,s.state,null),Sd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e){try{var n="",r=e;do n+=HA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wP=typeof WeakMap=="function"?WeakMap:Map;function e1(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cd||(Cd=!0,pm=r),sm(t,e)},n}function t1(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sm(t,e),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DP.bind(null,t,e,n),e.then(t,t))}function nw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Hs(n,e,1))),n.lanes|=1),t)}var _P=ps.ReactCurrentOwner,An=!1;function _n(t,e,n,r){e.child=t===null?PE(e,null,n,r):ca(e,t.child,n,r)}function sw(t,e,n,r,s){n=n.render;var i=e.ref;return Xo(e,s),r=Ug(t,e,n,r,i,s),n=Bg(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(at&&n&&Ag(e),e.flags|=1,_n(t,e,r,s),e.child)}function iw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,n1(t,e,i,r,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yl,n(o,r)&&t.ref===e.ref)return ls(t,e,s)}return e.flags|=1,t=Qs(i,r),t.ref=e.ref,t.return=e,e.child=t}function n1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Yl(i,r)&&t.ref===e.ref)if(An=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,ls(t,e,s)}return im(t,e,n,r,s)}function r1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Fo,Ln),Ln|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Fo,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,nt(Fo,Ln),Ln|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,nt(Fo,Ln),Ln|=r;return _n(t,e,s,n),e.child}function s1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function im(t,e,n,r,s){var i=Pn(n)?zi:gn.current;return i=la(e,i),Xo(e,s),n=Ug(t,e,n,r,i,s),r=Bg(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(at&&r&&Ag(e),e.flags|=1,_n(t,e,n,s),e.child)}function ow(t,e,n,r,s){if(Pn(n)){var i=!0;wd(e)}else i=!1;if(Xo(e,s),e.stateNode===null)qc(t,e),ZE(e,n,r),rm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tr(c):(c=Pn(n)?zi:gn.current,c=la(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ew(e,o,r,c),Ps=!1;var m=e.memoizedState;o.state=m,Sd(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Cn.current||Ps?(typeof h=="function"&&(nm(e,n,h,r),l=e.memoizedState),(a=Ps||Zv(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,NE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dr(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tr(l):(l=Pn(n)?zi:gn.current,l=la(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&ew(e,o,r,l),Ps=!1,m=e.memoizedState,o.state=m,Sd(e,r,o,s);var _=e.memoizedState;a!==f||m!==_||Cn.current||Ps?(typeof y=="function"&&(nm(e,n,y,r),_=e.memoizedState),(c=Ps||Zv(e,n,c,r,m,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return om(t,e,n,r,i,s)}function om(t,e,n,r,s,i){s1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qv(e,n,!1),ls(t,e,i);r=e.stateNode,_P.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ca(e,t.child,null,i),e.child=ca(e,null,a,i)):_n(t,e,a,i),e.memoizedState=r.state,s&&qv(e,n,!0),e.child}function i1(t){var e=t.stateNode;e.pendingContext?zv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zv(t,e.context,!1),Vg(t,e.containerInfo)}function aw(t,e,n,r,s){return ua(),Pg(s),e.flags|=256,_n(t,e,n,r),e.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function o1(t,e,n){var r=e.pendingProps,s=ct.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nt(ct,s&1),t===null)return em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Eh(o,r,0,null),t=Li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lm(n),e.memoizedState=am,t):zg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Qs(a,i):(i=Li(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=am,r}return i=t.child,t=i.sibling,r=Qs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zg(t,e){return e=Eh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vc(t,e,n,r){return r!==null&&Pg(r),ca(e,t.child,null,n),t=zg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zf(Error($(422))),vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Eh({mode:"visible",children:r.children},s,0,null),i=Li(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ca(e,t.child,null,o),e.child.memoizedState=lm(o),e.memoizedState=am,i);if(!(e.mode&1))return vc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=zf(i,r,void 0),vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,An||a){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,as(t,s),mr(r,t,s,-1))}return Yg(),r=zf(Error($(421))),vc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=qs(s.nextSibling),Bn=e,at=!0,fr=null,t!==null&&(Xn[Jn++]=Gr,Xn[Jn++]=Kr,Xn[Jn++]=qi,Gr=t.id,Kr=t.overflow,qi=e),e=zg(e,r.children),e.flags|=4096,e)}function lw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tm(t.return,e,n)}function qf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function a1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_n(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lw(t,n,e);else if(t.tag===19)lw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(ct,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Id(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Id(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qf(e,!0,n,null,i);break;case"together":qf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Qs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TP(t,e,n){switch(e.tag){case 3:i1(e),ua();break;case 5:DE(e);break;case 1:Pn(e.type)&&wd(e);break;case 4:Vg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(Td,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?o1(t,e,n):(nt(ct,ct.current&1),t=ls(t,e,n),t!==null?t.sibling:null);nt(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,r1(t,e,n)}return ls(t,e,n)}var l1,um,u1,c1;l1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};um=function(){};u1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Di(Cr.current);var i=null;switch(n){case"input":s=Rp(t,s),r=Rp(t,r),i=[];break;case"select":s=ft({},s,{value:void 0}),r=ft({},r,{value:void 0}),i=[];break;case"textarea":s=jp(t,s),r=jp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yd)}Vp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&it("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};c1=function(t,e,n,r){n!==r&&(e.flags|=4)};function al(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EP(t,e,n){var r=e.pendingProps;switch(Cg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Pn(e.type)&&vd(),un(e),null;case 3:return r=e.stateNode,da(),ot(Cn),ot(gn),Lg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(ym(fr),fr=null))),um(t,e),un(e),null;case 5:Mg(e);var s=Di(tu.current);if(n=e.type,t!==null&&e.stateNode!=null)u1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return un(e),null}if(t=Di(Cr.current),gc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ir]=e,r[Zl]=i,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<yl.length;s++)it(yl[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":yv(r,i),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},it("invalid",r);break;case"textarea":wv(r,i),it("invalid",r)}Vp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&mc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&mc(r.textContent,a,t),s=["children",""+a]):Wl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":ac(r),vv(r,i,!0);break;case"textarea":ac(r),_v(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ir]=e,t[Zl]=r,l1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mp(n,r),n){case"dialog":it("cancel",t),it("close",t),s=r;break;case"iframe":case"object":case"embed":it("load",t),s=r;break;case"video":case"audio":for(s=0;s<yl.length;s++)it(yl[s],t);s=r;break;case"source":it("error",t),s=r;break;case"img":case"image":case"link":it("error",t),it("load",t),s=r;break;case"details":it("toggle",t),s=r;break;case"input":yv(t,r),s=Rp(t,r),it("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ft({},r,{value:void 0}),it("invalid",t);break;case"textarea":wv(t,r),s=jp(t,r),it("invalid",t);break;default:s=r}Vp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?BT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&FT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zl(t,l):typeof l=="number"&&zl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&it("scroll",t):l!=null&&pg(t,i,l,o))}switch(n){case"input":ac(t),vv(t,r,!1);break;case"textarea":ac(t),_v(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ni(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Go(t,!!r.multiple,i,!1):r.defaultValue!=null&&Go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)c1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Di(tu.current),Di(Cr.current),gc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ir]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:mc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ir]=e,e.stateNode=r}return un(e),null;case 13:if(ot(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Fn!==null&&e.mode&1&&!(e.flags&128))AE(),ua(),e.flags|=98560,i=!1;else if(i=gc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Ir]=e}else ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),i=!1}else fr!==null&&(ym(fr),fr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Vt===0&&(Vt=3):Yg())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return da(),um(t,e),t===null&&Xl(e.stateNode.containerInfo),un(e),null;case 10:return Dg(e.type._context),un(e),null;case 17:return Pn(e.type)&&vd(),un(e),null;case 19:if(ot(ct),i=e.memoizedState,i===null)return un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)al(i,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Id(t),o!==null){for(e.flags|=128,al(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(ct,ct.current&1|2),e.child}t=t.sibling}i.tail!==null&&wt()>fa&&(e.flags|=128,r=!0,al(i,!1),e.lanes=4194304)}else{if(!r)if(t=Id(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),al(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!at)return un(e),null}else 2*wt()-i.renderingStartTime>fa&&n!==1073741824&&(e.flags|=128,r=!0,al(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wt(),e.sibling=null,n=ct.current,nt(ct,r?n&1|2:n&1),e):(un(e),null);case 22:case 23:return Qg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function SP(t,e){switch(Cg(e),e.tag){case 1:return Pn(e.type)&&vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return da(),ot(Cn),ot(gn),Lg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mg(e),null;case 13:if(ot(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ct),null;case 4:return da(),null;case 10:return Dg(e.type._context),null;case 22:case 23:return Qg(),null;case 24:return null;default:return null}}var wc=!1,fn=!1,IP=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function cm(t,e,n){try{n()}catch(r){yt(t,e,r)}}var uw=!1;function kP(t,e){if(Gp=pd,t=mE(),bg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kp={focusedElem:t,selectionRange:n},pd=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,A=_.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:dr(e.type,E),A);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){yt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=uw,uw=!1,_}function Al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cm(e,n,i)}s=s.next}while(s!==r)}}function xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d1(t){var e=t.alternate;e!==null&&(t.alternate=null,d1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ir],delete e[Zl],delete e[Xp],delete e[lP],delete e[uP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h1(t){return t.tag===5||t.tag===3||t.tag===4}function cw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yd));else if(r!==4&&(t=t.child,t!==null))for(hm(t,e,n),t=t.sibling;t!==null;)hm(t,e,n),t=t.sibling}function fm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fm(t,e,n),t=t.sibling;t!==null;)fm(t,e,n),t=t.sibling}var Yt=null,hr=!1;function Is(t,e,n){for(n=n.child;n!==null;)f1(t,e,n),n=n.sibling}function f1(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(fh,n)}catch{}switch(n.tag){case 5:fn||Lo(n,e);case 6:var r=Yt,s=hr;Yt=null,Is(t,e,n),Yt=r,hr=s,Yt!==null&&(hr?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(hr?(t=Yt,n=n.stateNode,t.nodeType===8?Lf(t.parentNode,n):t.nodeType===1&&Lf(t,n),Kl(t)):Lf(Yt,n.stateNode));break;case 4:r=Yt,s=hr,Yt=n.stateNode.containerInfo,hr=!0,Is(t,e,n),Yt=r,hr=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cm(n,e,o),s=s.next}while(s!==r)}Is(t,e,n);break;case 1:if(!fn&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,Is(t,e,n),fn=r):Is(t,e,n);break;default:Is(t,e,n)}}function dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IP),e.forEach(function(r){var s=OP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,hr=!1;break e;case 3:Yt=a.stateNode.containerInfo,hr=!0;break e;case 4:Yt=a.stateNode.containerInfo,hr=!0;break e}a=a.return}if(Yt===null)throw Error($(160));f1(i,o,s),Yt=null,hr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){yt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p1(e,t),e=e.sibling}function p1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Er(t),r&4){try{Al(3,t,t.return),xh(3,t)}catch(E){yt(t,t.return,E)}try{Al(5,t,t.return)}catch(E){yt(t,t.return,E)}}break;case 1:ur(e,t),Er(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(ur(e,t),Er(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var s=t.stateNode;try{zl(s,"")}catch(E){yt(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&VT(s,i),Mp(a,o);var c=Mp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?BT(s,f):h==="dangerouslySetInnerHTML"?FT(s,f):h==="children"?zl(s,f):pg(s,h,f,c)}switch(a){case"input":Np(s,i);break;case"textarea":MT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Go(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Go(s,!!i.multiple,i.defaultValue,!0):Go(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zl]=i}catch(E){yt(t,t.return,E)}}break;case 6:if(ur(e,t),Er(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){yt(t,t.return,E)}}break;case 3:if(ur(e,t),Er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(e.containerInfo)}catch(E){yt(t,t.return,E)}break;case 4:ur(e,t),Er(t);break;case 13:ur(e,t),Er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gg=wt())),r&4&&dw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(fn=(c=fn)||h,ur(e,t),fn=c):ur(e,t),Er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(m=ee,y=m.child,m.tag){case 0:case 11:case 14:case 15:Al(4,m,m.return);break;case 1:Lo(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){yt(r,n,E)}}break;case 5:Lo(m,m.return);break;case 22:if(m.memoizedState!==null){fw(f);continue}}y!==null?(y.return=m,ee=y):fw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UT("display",o))}catch(E){yt(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){yt(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ur(e,t),Er(t),r&4&&dw(t);break;case 21:break;default:ur(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h1(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zl(s,""),r.flags&=-33);var i=cw(t);fm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cw(t);hm(t,a,o);break;default:throw Error($(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bP(t,e,n){ee=t,m1(t)}function m1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||fn;a=wc;var c=fn;if(wc=o,(fn=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?pw(s):l!==null?(l.return=o,ee=l):pw(s);for(;i!==null;)ee=i,m1(i),i=i.sibling;ee=s,wc=a,fn=c}hw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):hw(t)}}function hw(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||xh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Kl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}fn||e.flags&512&&dm(e)}catch(m){yt(e,e.return,m)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function fw(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function pw(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xh(4,e)}catch(l){yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){yt(e,s,l)}}var i=e.return;try{dm(e)}catch(l){yt(e,i,l)}break;case 5:var o=e.return;try{dm(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var AP=Math.ceil,Ad=ps.ReactCurrentDispatcher,qg=ps.ReactCurrentOwner,er=ps.ReactCurrentBatchConfig,je=0,zt=null,Ct=null,Jt=0,Ln=0,Fo=ci(0),Vt=0,iu=null,Gi=0,Th=0,Hg=0,Cl=null,kn=null,Gg=0,fa=1/0,zr=null,Cd=!1,pm=null,Gs=null,_c=!1,Fs=null,Pd=0,Pl=0,mm=null,Hc=-1,Gc=0;function xn(){return je&6?wt():Hc!==-1?Hc:Hc=wt()}function Ks(t){return t.mode&1?je&2&&Jt!==0?Jt&-Jt:dP.transition!==null?(Gc===0&&(Gc=ZT()),Gc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:oE(t.type)),t):1}function mr(t,e,n,r){if(50<Pl)throw Pl=0,mm=null,Error($(185));Su(t,n,r),(!(je&2)||t!==zt)&&(t===zt&&(!(je&2)&&(Th|=n),Vt===4&&js(t,Jt)),Rn(t,r),n===1&&je===0&&!(e.mode&1)&&(fa=wt()+500,vh&&di()))}function Rn(t,e){var n=t.callbackNode;dC(t,e);var r=fd(t,t===zt?Jt:0);if(r===0)n!==null&&Ev(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ev(n),e===1)t.tag===0?cP(mw.bind(null,t)):IE(mw.bind(null,t)),oP(function(){!(je&6)&&di()}),n=null;else{switch(eE(r)){case 1:n=wg;break;case 4:n=XT;break;case 16:n=hd;break;case 536870912:n=JT;break;default:n=hd}n=E1(n,g1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g1(t,e){if(Hc=-1,Gc=0,je&6)throw Error($(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var r=fd(t,t===zt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rd(t,r);else{e=r;var s=je;je|=2;var i=v1();(zt!==t||Jt!==e)&&(zr=null,fa=wt()+500,Mi(t,e));do try{RP();break}catch(a){y1(t,a)}while(!0);Ng(),Ad.current=i,je=s,Ct!==null?e=0:(zt=null,Jt=0,e=Vt)}if(e!==0){if(e===2&&(s=$p(t),s!==0&&(r=s,e=gm(t,s))),e===1)throw n=iu,Mi(t,0),js(t,r),Rn(t,wt()),n;if(e===6)js(t,r);else{if(s=t.current.alternate,!(r&30)&&!CP(s)&&(e=Rd(t,r),e===2&&(i=$p(t),i!==0&&(r=i,e=gm(t,i))),e===1))throw n=iu,Mi(t,0),js(t,r),Rn(t,wt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ii(t,kn,zr);break;case 3:if(js(t,r),(r&130023424)===r&&(e=Gg+500-wt(),10<e)){if(fd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yp(Ii.bind(null,t,kn,zr),e);break}Ii(t,kn,zr);break;case 4:if(js(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AP(r/1960))-r,10<r){t.timeoutHandle=Yp(Ii.bind(null,t,kn,zr),r);break}Ii(t,kn,zr);break;case 5:Ii(t,kn,zr);break;default:throw Error($(329))}}}return Rn(t,wt()),t.callbackNode===n?g1.bind(null,t):null}function gm(t,e){var n=Cl;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=Rd(t,e),t!==2&&(e=kn,kn=n,e!==null&&ym(e)),t}function ym(t){kn===null?kn=t:kn.push.apply(kn,t)}function CP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function js(t,e){for(e&=~Hg,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pr(e),r=1<<n;t[n]=-1,e&=~r}}function mw(t){if(je&6)throw Error($(327));Jo();var e=fd(t,0);if(!(e&1))return Rn(t,wt()),null;var n=Rd(t,e);if(t.tag!==0&&n===2){var r=$p(t);r!==0&&(e=r,n=gm(t,r))}if(n===1)throw n=iu,Mi(t,0),js(t,e),Rn(t,wt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ii(t,kn,zr),Rn(t,wt()),null}function Kg(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(fa=wt()+500,vh&&di())}}function Ki(t){Fs!==null&&Fs.tag===0&&!(je&6)&&Jo();var e=je;je|=1;var n=er.transition,r=ze;try{if(er.transition=null,ze=1,t)return t()}finally{ze=r,er.transition=n,je=e,!(je&6)&&di()}}function Qg(){Ln=Fo.current,ot(Fo)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iP(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(Cg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vd();break;case 3:da(),ot(Cn),ot(gn),Lg();break;case 5:Mg(r);break;case 4:da();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:Dg(r.type._context);break;case 22:case 23:Qg()}n=n.return}if(zt=t,Ct=t=Qs(t.current,null),Jt=Ln=e,Vt=0,iu=null,Hg=Th=Gi=0,kn=Cl=null,Ni!==null){for(e=0;e<Ni.length;e++)if(n=Ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ni=null}return t}function y1(t,e){do{var n=Ct;try{if(Ng(),Wc.current=bd,kd){for(var r=ht.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}kd=!1}if(Hi=0,$t=Ot=ht=null,bl=!1,nu=0,qg.current=null,n===null||n.return===null){Vt=1,iu=e,Ct=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=nw(o);if(y!==null){y.flags&=-257,rw(y,o,a,i,e),y.mode&1&&tw(i,c,e),e=y,l=c;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){tw(i,c,e),Yg();break e}l=Error($(426))}}else if(at&&a.mode&1){var A=nw(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),rw(A,o,a,i,e),Pg(ha(l,a));break e}}i=l=ha(l,a),Vt!==4&&(Vt=2),Cl===null?Cl=[i]:Cl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=e1(i,l,e);Qv(i,S);break e;case 1:a=l;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Gs===null||!Gs.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=t1(i,a,e);Qv(i,N);break e}}i=i.return}while(i!==null)}_1(n)}catch(V){e=V,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function v1(){var t=Ad.current;return Ad.current=bd,t===null?bd:t}function Yg(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),zt===null||!(Gi&268435455)&&!(Th&268435455)||js(zt,Jt)}function Rd(t,e){var n=je;je|=2;var r=v1();(zt!==t||Jt!==e)&&(zr=null,Mi(t,e));do try{PP();break}catch(s){y1(t,s)}while(!0);if(Ng(),je=n,Ad.current=r,Ct!==null)throw Error($(261));return zt=null,Jt=0,Vt}function PP(){for(;Ct!==null;)w1(Ct)}function RP(){for(;Ct!==null&&!nC();)w1(Ct)}function w1(t){var e=T1(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?_1(t):Ct=e,qg.current=null}function _1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SP(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Ct=null;return}}else if(n=EP(n,e,Ln),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Vt===0&&(Vt=5)}function Ii(t,e,n){var r=ze,s=er.transition;try{er.transition=null,ze=1,NP(t,e,n,r)}finally{er.transition=s,ze=r}return null}function NP(t,e,n,r){do Jo();while(Fs!==null);if(je&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hC(t,i),t===zt&&(Ct=zt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_c||(_c=!0,E1(hd,function(){return Jo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=er.transition,er.transition=null;var o=ze;ze=1;var a=je;je|=4,qg.current=null,kP(t,n),p1(n,t),JC(Kp),pd=!!Gp,Kp=Gp=null,t.current=n,bP(n),rC(),je=a,ze=o,er.transition=i}else t.current=n;if(_c&&(_c=!1,Fs=t,Pd=s),i=t.pendingLanes,i===0&&(Gs=null),oC(n.stateNode),Rn(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cd)throw Cd=!1,t=pm,pm=null,t;return Pd&1&&t.tag!==0&&Jo(),i=t.pendingLanes,i&1?t===mm?Pl++:(Pl=0,mm=t):Pl=0,di(),null}function Jo(){if(Fs!==null){var t=eE(Pd),e=er.transition,n=ze;try{if(er.transition=null,ze=16>t?16:t,Fs===null)var r=!1;else{if(t=Fs,Fs=null,Pd=0,je&6)throw Error($(331));var s=je;for(je|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:Al(8,h,i)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var m=h.sibling,y=h.return;if(d1(h),h===c){ee=null;break}if(m!==null){m.return=y,ee=m;break}ee=y}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Al(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,ee=S;break e}ee=i.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ee=x;else e:for(o=w;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xh(9,a)}}catch(V){yt(a,a.return,V)}if(a===o){ee=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,ee=N;break e}ee=a.return}}if(je=s,di(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(fh,t)}catch{}r=!0}return r}finally{ze=n,er.transition=e}}return!1}function gw(t,e,n){e=ha(n,e),e=e1(t,e,1),t=Hs(t,e,1),e=xn(),t!==null&&(Su(t,1,e),Rn(t,e))}function yt(t,e,n){if(t.tag===3)gw(t,t,n);else for(;e!==null;){if(e.tag===3){gw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){t=ha(n,t),t=t1(e,t,1),e=Hs(e,t,1),t=xn(),e!==null&&(Su(e,1,t),Rn(e,t));break}}e=e.return}}function DP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Jt&n)===n&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>wt()-Gg?Mi(t,0):Hg|=n),Rn(t,e)}function x1(t,e){e===0&&(t.mode&1?(e=cc,cc<<=1,!(cc&130023424)&&(cc=4194304)):e=1);var n=xn();t=as(t,e),t!==null&&(Su(t,e,n),Rn(t,n))}function jP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x1(t,n)}function OP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),x1(t,n)}var T1;T1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cn.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,TP(t,e,n);An=!!(t.flags&131072)}else An=!1,at&&e.flags&1048576&&kE(e,xd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qc(t,e),t=e.pendingProps;var s=la(e,gn.current);Xo(e,n),s=Ug(null,e,r,t,s,n);var i=Bg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,wd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Og(e),s.updater=_h,e.stateNode=s,s._reactInternals=e,rm(e,r,t,n),e=om(null,e,r,!0,i,n)):(e.tag=0,at&&i&&Ag(e),_n(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=MP(r),t=dr(r,t),s){case 0:e=im(null,e,r,t,n);break e;case 1:e=ow(null,e,r,t,n);break e;case 11:e=sw(null,e,r,t,n);break e;case 14:e=iw(null,e,r,dr(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),im(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),ow(t,e,r,s,n);case 3:e:{if(i1(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,NE(t,e),Sd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ha(Error($(423)),e),e=aw(t,e,r,n,s);break e}else if(r!==s){s=ha(Error($(424)),e),e=aw(t,e,r,n,s);break e}else for(Fn=qs(e.stateNode.containerInfo.firstChild),Bn=e,at=!0,fr=null,n=PE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ua(),r===s){e=ls(t,e,n);break e}_n(t,e,r,n)}e=e.child}return e;case 5:return DE(e),t===null&&em(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qp(r,s)?o=null:i!==null&&Qp(r,i)&&(e.flags|=32),s1(t,e),_n(t,e,o,n),e.child;case 6:return t===null&&em(e),null;case 13:return o1(t,e,n);case 4:return Vg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ca(e,null,r,n):_n(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),sw(t,e,r,s,n);case 7:return _n(t,e,e.pendingProps,n),e.child;case 8:return _n(t,e,e.pendingProps.children,n),e.child;case 12:return _n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,nt(Td,r._currentValue),r._currentValue=o,i!==null)if(yr(i.value,o)){if(i.children===s.children&&!Cn.current){e=ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_n(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xo(e,n),s=tr(s),r=r(s),e.flags|=1,_n(t,e,r,n),e.child;case 14:return r=e.type,s=dr(r,e.pendingProps),s=dr(r.type,s),iw(t,e,r,s,n);case 15:return n1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),qc(t,e),e.tag=1,Pn(r)?(t=!0,wd(e)):t=!1,Xo(e,n),ZE(e,r,s),rm(e,r,s,n),om(null,e,r,!0,t,n);case 19:return a1(t,e,n);case 22:return r1(t,e,n)}throw Error($(156,e.tag))};function E1(t,e){return YT(t,e)}function VP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,r){return new VP(t,e,n,r)}function Xg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MP(t){if(typeof t=="function")return Xg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gg)return 11;if(t===yg)return 14}return 2}function Qs(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Xg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Co:return Li(n.children,s,i,e);case mg:o=8,s|=8;break;case bp:return t=Zn(12,n,e,s|2),t.elementType=bp,t.lanes=i,t;case Ap:return t=Zn(13,n,e,s),t.elementType=Ap,t.lanes=i,t;case Cp:return t=Zn(19,n,e,s),t.elementType=Cp,t.lanes=i,t;case DT:return Eh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RT:o=10;break e;case NT:o=9;break e;case gg:o=11;break e;case yg:o=14;break e;case Cs:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Zn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Li(t,e,n,r){return t=Zn(7,t,r,e),t.lanes=n,t}function Eh(t,e,n,r){return t=Zn(22,t,r,e),t.elementType=DT,t.lanes=n,t.stateNode={isHidden:!1},t}function Hf(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function Gf(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bf(0),this.expirationTimes=bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jg(t,e,n,r,s,i,o,a,l){return t=new LP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Og(i),t}function FP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S1(t){if(!t)return ri;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Pn(n))return SE(t,n,e)}return e}function I1(t,e,n,r,s,i,o,a,l){return t=Jg(n,r,!0,t,s,i,o,a,l),t.context=S1(null),n=t.current,r=xn(),s=Ks(n),i=Zr(r,s),i.callback=e??null,Hs(n,i,s),t.current.lanes=s,Su(t,s,r),Rn(t,r),t}function Sh(t,e,n,r){var s=e.current,i=xn(),o=Ks(s);return n=S1(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hs(s,e,o),t!==null&&(mr(t,s,o,i),$c(t,s,o)),o}function Nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zg(t,e){yw(t,e),(t=t.alternate)&&yw(t,e)}function UP(){return null}var k1=typeof reportError=="function"?reportError:function(t){console.error(t)};function ey(t){this._internalRoot=t}Ih.prototype.render=ey.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Sh(t,e,null,null)};Ih.prototype.unmount=ey.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){Sh(null,t,null,null)}),e[os]=null}};function Ih(t){this._internalRoot=t}Ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=rE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&iE(t)}};function ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vw(){}function BP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Nd(o);i.call(c)}}var o=I1(e,r,t,0,null,!1,!1,"",vw);return t._reactRootContainer=o,t[os]=o.current,Xl(t.nodeType===8?t.parentNode:t),Ki(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Nd(l);a.call(c)}}var l=Jg(t,0,!1,null,null,!1,!1,"",vw);return t._reactRootContainer=l,t[os]=l.current,Xl(t.nodeType===8?t.parentNode:t),Ki(function(){Sh(e,l,n,r)}),l}function bh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Nd(o);a.call(l)}}Sh(e,o,t,s)}else o=BP(n,e,t,s,r);return Nd(o)}tE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gl(e.pendingLanes);n!==0&&(_g(e,n|1),Rn(e,wt()),!(je&6)&&(fa=wt()+500,di()))}break;case 13:Ki(function(){var r=as(t,1);if(r!==null){var s=xn();mr(r,t,1,s)}}),Zg(t,1)}};xg=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=xn();mr(e,t,134217728,n)}Zg(t,134217728)}};nE=function(t){if(t.tag===13){var e=Ks(t),n=as(t,e);if(n!==null){var r=xn();mr(n,t,e,r)}Zg(t,e)}};rE=function(){return ze};sE=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Fp=function(t,e,n){switch(e){case"input":if(Np(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yh(r);if(!s)throw Error($(90));OT(r),Np(r,s)}}}break;case"textarea":MT(t,n);break;case"select":e=n.value,e!=null&&Go(t,!!n.multiple,e,!1)}};zT=Kg;qT=Ki;var $P={usingClientEntryPoint:!1,Events:[ku,Do,yh,$T,WT,Kg]},ll={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WP={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KT(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||UP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{fh=xc.inject(WP),Ar=xc}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$P;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ty(e))throw Error($(200));return FP(t,e,null,n)};qn.createRoot=function(t,e){if(!ty(t))throw Error($(299));var n=!1,r="",s=k1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jg(t,1,!1,null,null,n,!1,r,s),t[os]=e.current,Xl(t.nodeType===8?t.parentNode:t),new ey(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=KT(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Ki(t)};qn.hydrate=function(t,e,n){if(!kh(e))throw Error($(200));return bh(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!ty(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=k1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I1(e,null,t,1,n??null,s,!1,i,o),t[os]=e.current,Xl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ih(e)};qn.render=function(t,e,n){if(!kh(e))throw Error($(200));return bh(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!kh(t))throw Error($(40));return t._reactRootContainer?(Ki(function(){bh(null,null,t,!1,function(){t._reactRootContainer=null,t[os]=null})}),!0):!1};qn.unstable_batchedUpdates=Kg;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return bh(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function b1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b1)}catch(t){console.error(t)}}b1(),bT.exports=qn;var zP=bT.exports,ww=zP;Ip.createRoot=ww.createRoot,Ip.hydrateRoot=ww.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ou.apply(this,arguments)}var Us;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Us||(Us={}));const _w="popstate";function qP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return vm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Dd(s)}return GP(e,n,null,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ny(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HP(){return Math.random().toString(36).substr(2,8)}function xw(t,e){return{usr:t.state,key:t.key,idx:e}}function vm(t,e,n,r){return n===void 0&&(n=null),ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oa(e):e,{state:n,key:e&&e.key||r||HP()})}function Dd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Us.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ou({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Us.Pop;let A=h(),S=A==null?null:A-c;c=A,l&&l({action:a,location:E.location,delta:S})}function m(A,S){a=Us.Push;let w=vm(E.location,A,S);c=h()+1;let x=xw(w,c),N=E.createHref(w);try{o.pushState(x,"",N)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(N)}i&&l&&l({action:a,location:E.location,delta:1})}function y(A,S){a=Us.Replace;let w=vm(E.location,A,S);c=h();let x=xw(w,c),N=E.createHref(w);o.replaceState(x,"",N),i&&l&&l({action:a,location:E.location,delta:0})}function _(A){let S=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof A=="string"?A:Dd(A);return w=w.replace(/ $/,"%20"),xt(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let E={get action(){return a},get location(){return t(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_w,f),l=A,()=>{s.removeEventListener(_w,f),l=null}},createHref(A){return e(s,A)},createURL:_,encodeLocation(A){let S=_(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:y,go(A){return o.go(A)}};return E}var Tw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tw||(Tw={}));function KP(t,e,n){return n===void 0&&(n="/"),QP(t,e,n)}function QP(t,e,n,r){let s=typeof e=="string"?Oa(e):e,i=ry(s.pathname||"/",n);if(i==null)return null;let o=A1(t);YP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=lR(i);a=iR(o[l],c)}return a}function A1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(xt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ys([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),A1(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:rR(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of C1(i.path))s(i,o,l)}),e}function C1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=C1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XP=/^:[\w-]+$/,JP=3,ZP=2,eR=1,tR=10,nR=-2,Ew=t=>t==="*";function rR(t,e){let n=t.split("/"),r=n.length;return n.some(Ew)&&(r+=nR),e&&(r+=ZP),n.filter(s=>!Ew(s)).reduce((s,i)=>s+(XP.test(i)?JP:i===""?eR:tR),r)}function sR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=oR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ys([i,f.pathname]),pathnameBase:fR(Ys([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ys([i,f.pathnameBase]))}return o}function oR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let E=a[f]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const _=a[f];return y&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function aR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ny(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ny(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ry(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const uR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cR=t=>uR.test(t);function dR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oa(t):t,i;if(n)if(cR(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ny(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Sw(n.substring(1),"/"):i=Sw(n,e)}else i=e;return{pathname:i,search:pR(r),hash:mR(s)}}function Sw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sy(t,e){let n=hR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function iy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Oa(t):(s=ou({},t),xt(!s.pathname||!s.pathname.includes("?"),Kf("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Kf("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Kf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=dR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ys=t=>t.join("/").replace(/\/\/+/g,"/"),fR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const P1=["post","put","patch","delete"];new Set(P1);const yR=["get",...P1];new Set(yR);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},au.apply(this,arguments)}const oy=b.createContext(null),vR=b.createContext(null),hi=b.createContext(null),Ah=b.createContext(null),Mr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),R1=b.createContext(null);function wR(t,e){let{relative:n}=e===void 0?{}:e;Va()||xt(!1);let{basename:r,navigator:s}=b.useContext(hi),{hash:i,pathname:o,search:a}=D1(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ys([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Va(){return b.useContext(Ah)!=null}function ao(){return Va()||xt(!1),b.useContext(Ah).location}function N1(t){b.useContext(hi).static||b.useLayoutEffect(t)}function fi(){let{isDataRoute:t}=b.useContext(Mr);return t?jR():_R()}function _R(){Va()||xt(!1);let t=b.useContext(oy),{basename:e,future:n,navigator:r}=b.useContext(hi),{matches:s}=b.useContext(Mr),{pathname:i}=ao(),o=JSON.stringify(sy(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return N1(()=>{a.current=!0}),b.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=iy(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ys([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}const xR=b.createContext(null);function TR(t){let e=b.useContext(Mr).outlet;return e&&b.createElement(xR.Provider,{value:t},e)}function t9(){let{matches:t}=b.useContext(Mr),e=t[t.length-1];return e?e.params:{}}function D1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(hi),{matches:s}=b.useContext(Mr),{pathname:i}=ao(),o=JSON.stringify(sy(s,r.v7_relativeSplatPath));return b.useMemo(()=>iy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ER(t,e){return SR(t,e)}function SR(t,e,n,r){Va()||xt(!1);let{navigator:s}=b.useContext(hi),{matches:i}=b.useContext(Mr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ao(),h;if(e){var f;let A=typeof e=="string"?Oa(e):e;l==="/"||(f=A.pathname)!=null&&f.startsWith(l)||xt(!1),h=A}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let A=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=KP(t,{pathname:y}),E=CR(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Ys([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Ys([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&E?b.createElement(Ah.Provider,{value:{location:au({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Us.Pop}},E):E}function IR(){let t=DR(),e=gR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const kR=b.createElement(IR,null);class bR extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Mr.Provider,{value:this.props.routeContext},b.createElement(R1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AR(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(oy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Mr.Provider,{value:e},r)}function CR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||xt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,_=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,_=!1,E=null,A=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,E=f.route.errorElement||kR,l&&(c<0&&m===0?(OR("route-fallback"),_=!0,A=null):c===m&&(_=!0,A=f.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),w=()=>{let x;return y?x=E:_?x=A:f.route.Component?x=b.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,b.createElement(AR,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(bR,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var j1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(j1||{}),O1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(O1||{});function PR(t){let e=b.useContext(oy);return e||xt(!1),e}function RR(t){let e=b.useContext(vR);return e||xt(!1),e}function NR(t){let e=b.useContext(Mr);return e||xt(!1),e}function V1(t){let e=NR(),n=e.matches[e.matches.length-1];return n.route.id||xt(!1),n.route.id}function DR(){var t;let e=b.useContext(R1),n=RR(),r=V1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jR(){let{router:t}=PR(j1.UseNavigateStable),e=V1(O1.UseNavigateStable),n=b.useRef(!1);return N1(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,au({fromRouteId:e},i)))},[t,e])}const Iw={};function OR(t,e,n){Iw[t]||(Iw[t]=!0)}function VR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pa(t){let{to:e,replace:n,state:r,relative:s}=t;Va()||xt(!1);let{future:i,static:o}=b.useContext(hi),{matches:a}=b.useContext(Mr),{pathname:l}=ao(),c=fi(),h=iy(e,sy(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return b.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function MR(t){return TR(t.context)}function De(t){xt(!1)}function LR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Us.Pop,navigator:i,static:o=!1,future:a}=t;Va()&&xt(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:au({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Oa(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:_="default"}=r,E=b.useMemo(()=>{let A=ry(h,l);return A==null?null:{location:{pathname:A,search:f,hash:m,state:y,key:_},navigationType:s}},[l,h,f,m,y,_,s]);return E==null?null:b.createElement(hi.Provider,{value:c},b.createElement(Ah.Provider,{children:n,value:E}))}function FR(t){let{children:e,location:n}=t;return ER(wm(e),n)}new Promise(()=>{});function wm(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,wm(r.props.children,i));return}r.type!==De&&xt(!1),!r.props.index||!r.props.children||xt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _m(){return _m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_m.apply(this,arguments)}function UR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $R(t,e){return t.button===0&&(!e||e==="_self")&&!BR(t)}function xm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function WR(t,e){let n=xm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const zR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qR="6";try{window.__reactRouterVersion=qR}catch{}const HR="startTransition",kw=DA[HR];function GR(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=qP({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=b.useCallback(f=>{c&&kw?kw(()=>l(f)):l(f)},[l,c]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>VR(r),[r]),b.createElement(LR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const KR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$e=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,m=UR(e,zR),{basename:y}=b.useContext(hi),_,E=!1;if(typeof c=="string"&&QR.test(c)&&(_=c,KR))try{let x=new URL(window.location.href),N=c.startsWith("//")?new URL(x.protocol+c):new URL(c),V=ry(N.pathname,y);N.origin===x.origin&&V!=null?c=V+N.search+N.hash:E=!0}catch{}let A=wR(c,{relative:s}),S=YR(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function w(x){r&&r(x),x.defaultPrevented||S(x)}return b.createElement("a",_m({},m,{href:_||A,onClick:E||i?r:w,ref:n,target:l}))});var bw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bw||(bw={}));var Aw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Aw||(Aw={}));function YR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=fi(),c=ao(),h=D1(t,{relative:o});return b.useCallback(f=>{if($R(f,n)){f.preventDefault();let m=r!==void 0?r:Dd(c)===Dd(h);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function n9(t){let e=b.useRef(xm(t)),n=b.useRef(!1),r=ao(),s=b.useMemo(()=>WR(r.search,n.current?null:e.current),[r.search]),i=fi(),o=b.useCallback((a,l)=>{const c=xm(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var Cw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},L1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new JR;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(t){const e=M1(t);return L1.encodeByteArray(e,!0)},jd=function(t){return ZR(t).replace(/\./g,"")},F1=function(t){try{return L1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=()=>eN().__FIREBASE_DEFAULTS__,nN=()=>{if(typeof process>"u"||typeof Cw>"u")return;const t=Cw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F1(t[1]);return e&&JSON.parse(e)},Ch=()=>{try{return tN()||nN()||rN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U1=t=>{var e,n;return(n=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sN=t=>{const e=U1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B1=()=>{var t;return(t=Ch())===null||t===void 0?void 0:t.config},$1=t=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jd(JSON.stringify(n)),jd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function lN(){var t;const e=(t=Ch())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hN(){const t=yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fN(){return!lN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pN(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gN,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ms(s,a,r)}}function yN(t,e){return t.replace(vN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vN=/\{\$([^}]+)}/g;function wN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pw(i)&&Pw(o)){if(!ma(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _N(t,e){const n=new xN(t,e);return n.subscribe.bind(n)}class xN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qf),s.error===void 0&&(s.error=Qf),s.complete===void 0&&(s.complete=Qf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SN(t){return t===ki?void 0:t}function IN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const bN={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},AN=Ce.INFO,CN={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},PN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ay{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=PN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const RN=(t,e)=>e.some(n=>t instanceof n);let Rw,Nw;function NN(){return Rw||(Rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DN(){return Nw||(Nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W1=new WeakMap,Tm=new WeakMap,z1=new WeakMap,Yf=new WeakMap,ly=new WeakMap;function jN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&W1.set(n,t)}).catch(()=>{}),ly.set(e,t),e}function ON(t){if(Tm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tm.set(t,e)}let Em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VN(t){Em=t(Em)}function MN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xf(this),e,...n);return z1.set(r,e.sort?e.sort():[e]),Xs(r)}:DN().includes(t)?function(...e){return t.apply(Xf(this),e),Xs(W1.get(this))}:function(...e){return Xs(t.apply(Xf(this),e))}}function LN(t){return typeof t=="function"?MN(t):(t instanceof IDBTransaction&&ON(t),RN(t,NN())?new Proxy(t,Em):t)}function Xs(t){if(t instanceof IDBRequest)return jN(t);if(Yf.has(t))return Yf.get(t);const e=LN(t);return e!==t&&(Yf.set(t,e),ly.set(e,t)),e}const Xf=t=>ly.get(t);function FN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Xs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xs(o.result),l.oldVersion,l.newVersion,Xs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UN=["get","getKey","getAll","getAllKeys","count"],BN=["put","add","delete","clear"],Jf=new Map;function Dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jf.get(e))return Jf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=BN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||UN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Jf.set(e,i),i}VN(t=>({...t,get:(e,n,r)=>Dw(e,n)||t.get(e,n,r),has:(e,n)=>!!Dw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",jw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new ay("@firebase/app"),zN="@firebase/app-compat",qN="@firebase/analytics-compat",HN="@firebase/analytics",GN="@firebase/app-check-compat",KN="@firebase/app-check",QN="@firebase/auth",YN="@firebase/auth-compat",XN="@firebase/database",JN="@firebase/data-connect",ZN="@firebase/database-compat",e2="@firebase/functions",t2="@firebase/functions-compat",n2="@firebase/installations",r2="@firebase/installations-compat",s2="@firebase/messaging",i2="@firebase/messaging-compat",o2="@firebase/performance",a2="@firebase/performance-compat",l2="@firebase/remote-config",u2="@firebase/remote-config-compat",c2="@firebase/storage",d2="@firebase/storage-compat",h2="@firebase/firestore",f2="@firebase/vertexai-preview",p2="@firebase/firestore-compat",m2="firebase",g2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",y2={[Sm]:"fire-core",[zN]:"fire-core-compat",[HN]:"fire-analytics",[qN]:"fire-analytics-compat",[KN]:"fire-app-check",[GN]:"fire-app-check-compat",[QN]:"fire-auth",[YN]:"fire-auth-compat",[XN]:"fire-rtdb",[JN]:"fire-data-connect",[ZN]:"fire-rtdb-compat",[e2]:"fire-fn",[t2]:"fire-fn-compat",[n2]:"fire-iid",[r2]:"fire-iid-compat",[s2]:"fire-fcm",[i2]:"fire-fcm-compat",[o2]:"fire-perf",[a2]:"fire-perf-compat",[l2]:"fire-rc",[u2]:"fire-rc-compat",[c2]:"fire-gcs",[d2]:"fire-gcs-compat",[h2]:"fire-fst",[p2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[m2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,v2=new Map,km=new Map;function Ow(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ga(t){const e=t.name;if(km.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,t);for(const n of Od.values())Ow(n,t);for(const n of v2.values())Ow(n,t);return!0}function uy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function br(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Au("app","Firebase",w2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=g2;function q1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Im,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Js.create("bad-app-name",{appName:String(s)});if(n||(n=B1()),!n)throw Js.create("no-options");const i=Od.get(s);if(i){if(ma(n,i.options)&&ma(r,i.config))return i;throw Js.create("duplicate-app",{appName:s})}const o=new kN(s);for(const l of km.values())o.addComponent(l);const a=new _2(n,r,o);return Od.set(s,a),a}function H1(t=Im){const e=Od.get(t);if(!e&&t===Im&&B1())return q1();if(!e)throw Js.create("no-app",{appName:t});return e}function Zs(t,e,n){var r;let s=(r=y2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(a.join(" "));return}ga(new Qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="firebase-heartbeat-database",T2=1,lu="firebase-heartbeat-store";let Zf=null;function G1(){return Zf||(Zf=FN(x2,T2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Js.create("idb-open",{originalErrorMessage:t.message})})),Zf}async function E2(t){try{const n=(await G1()).transaction(lu),r=await n.objectStore(lu).get(K1(t));return await n.done,r}catch(e){if(e instanceof ms)us.warn(e.message);else{const n=Js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(n.message)}}}async function Vw(t,e){try{const r=(await G1()).transaction(lu,"readwrite");await r.objectStore(lu).put(e,K1(t)),await r.done}catch(n){if(n instanceof ms)us.warn(n.message);else{const r=Js.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});us.warn(r.message)}}}function K1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1024,I2=30*24*60*60*1e3;class k2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Mw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=I2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){us.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mw(),{heartbeatsToSend:r,unsentEntries:s}=b2(this._heartbeatsCache.heartbeats),i=jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return us.warn(n),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function b2(t,e=S2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Lw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Lw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class A2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pN()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lw(t){return jd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){ga(new Qi("platform-logger",e=>new $N(e),"PRIVATE")),ga(new Qi("heartbeat",e=>new k2(e),"PRIVATE")),Zs(Sm,jw,t),Zs(Sm,jw,"esm2017"),Zs("fire-js","")}C2("");function cy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P2=Q1,Y1=new Au("auth","Firebase",Q1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new ay("@firebase/auth");function R2(t,...e){Vd.logLevel<=Ce.WARN&&Vd.warn(`Auth (${Ma}): ${t}`,...e)}function Qc(t,...e){Vd.logLevel<=Ce.ERROR&&Vd.error(`Auth (${Ma}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,...e){throw hy(t,...e)}function gr(t,...e){return hy(t,...e)}function dy(t,e,n){const r=Object.assign(Object.assign({},P2()),{[e]:n});return new Au("auth","Firebase",r).create(e,{appName:t.name})}function ei(t){return dy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X1(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jr(t,"argument-error"),dy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Y1.create(t,...e)}function fe(t,e,...n){if(!t)throw hy(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function cs(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function N2(){return Fw()==="http:"||Fw()==="https:"}function Fw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N2()||cN()||"connection"in navigator)?navigator.onLine:!0}function j2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,cs(n>e,"Short delay should be less than long delay!"),this.isMobile=aN()||dN()}get(){return D2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Pu(3e4,6e4);function py(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function La(t,e,n,r,s={}){return Z1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Cu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return uN()||(c.referrerPolicy="no-referrer"),J1.fetch()(eS(t,t.config.apiHost,n,a),c)})}async function Z1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O2),e);try{const s=new L2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Tc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Tc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dy(t,h,c);jr(t,h)}}catch(s){if(s instanceof ms)throw s;jr(t,"network-request-failed",{message:String(s)})}}async function M2(t,e,n,r,s={}){const i=await La(t,e,n,r,s);return"mfaPendingCredential"in i&&jr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function eS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?fy(t.config,s):`${t.config.apiScheme}://${s}`}class L2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),V2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e){return La(t,"POST","/v1/accounts:delete",e)}async function tS(t,e){return La(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U2(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=my(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Rl(ep(s.auth_time)),issuedAtTime:Rl(ep(s.iat)),expirationTime:Rl(ep(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ep(t){return Number(t)*1e3}function my(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=F1(n);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Uw(t){const e=my(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ms&&B2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function B2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t){var e;const n=t.auth,r=await t.getIdToken(),s=await uu(t,tS(n,{idToken:r}));fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nS(i.providerUserInfo):[],a=z2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Am(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function W2(t){const e=Nt(t);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nS(t){return t.map(e=>{var{providerId:n}=e,r=cy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t,e){const n=await Z1(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=eS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",J1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function H2(t,e){return La(t,"POST","/v2/accounts:revokeToken",py(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=Uw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await q2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=cy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Am(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await uu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return U2(this,e)}reload(){return W2(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(ei(this.auth));const e=await this.getIdToken();return await uu(this,F2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:N,isAnonymous:V,providerData:L,stsTokenManager:k}=n;fe(x&&k,e,"internal-error");const v=Zo.fromJSON(this.name,k);fe(typeof x=="string",e,"internal-error"),ks(f,e.name),ks(m,e.name),fe(typeof N=="boolean",e,"internal-error"),fe(typeof V=="boolean",e,"internal-error"),ks(y,e.name),ks(_,e.name),ks(E,e.name),ks(A,e.name),ks(S,e.name),ks(w,e.name);const T=new Yr({uid:x,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:V,photoURL:_,phoneNumber:y,tenantId:E,stsTokenManager:v,createdAt:S,lastLoginAt:w});return L&&Array.isArray(L)&&(T.providerData=L.map(C=>Object.assign({},C))),A&&(T._redirectEventId=A),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zo;s.updateFromServerResponse(n);const i=new Yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Md(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Zo;a.updateFromIdToken(r);const l=new Yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Am(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new Map;function Xr(t){cs(t instanceof Function,"Expected a class definition");let e=Bw.get(t);return e?(cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rS.type="NONE";const $w=rS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ea(Xr($w),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Xr($w);const o=Yc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Yr._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ea(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ea(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uS(e))return"Blackberry";if(cS(e))return"Webos";if(iS(e))return"Safari";if((e.includes("chrome/")||oS(e))&&!e.includes("edge/"))return"Chrome";if(lS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sS(t=yn()){return/firefox\//i.test(t)}function iS(t=yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oS(t=yn()){return/crios\//i.test(t)}function aS(t=yn()){return/iemobile/i.test(t)}function lS(t=yn()){return/android/i.test(t)}function uS(t=yn()){return/blackberry/i.test(t)}function cS(t=yn()){return/webos/i.test(t)}function gy(t=yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G2(t=yn()){var e;return gy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function K2(){return hN()&&document.documentMode===10}function dS(t=yn()){return gy(t)||lS(t)||cS(t)||uS(t)||/windows phone/i.test(t)||aS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e=[]){let n;switch(t){case"Browser":n=Ww(yn());break;case"Worker":n=`${Ww(yn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ma}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e={}){return La(t,"GET","/v2/passwordPolicy",py(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=6;class J2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:X2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zw(this),this.idTokenSubscription=new zw(this),this.beforeStateQueue=new Q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tS(this,{idToken:e}),r=await Yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(br(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(ei(this));const n=e?Nt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y2(this),n=new J2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await H2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&R2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fa(t){return Nt(t)}class zw{constructor(e){this.auth=e,this.observer=null,this.addObserver=_N(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eD(t){yy=t}function tD(t){return yy.loadJS(t)}function nD(){return yy.gapiScript}function rD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e){const n=uy(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ma(i,e??{}))return s;jr(s,"already-initialized")}return n.initialize({options:e})}function iD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oD(t,e,n){const r=Fa(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=fS(e),{host:o,port:a}=aD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),lD()}function fS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aD(t){const e=fS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qw(o)}}}function qw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e){return M2(t,"POST","/v1/accounts:signInWithIdp",py(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="http://localhost";class Yi extends pS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=cy(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Yi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ta(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ta(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ta(e,n)}buildRequest(){const e={requestUri:uD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Ph{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ru{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Ru{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Ru{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Yr._fromIdTokenResponse(e,r,s),o=Hw(r);return new ya({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hw(r);return new ya({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends ms{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ld(e,n,r,s)}}function mS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(t,i,e,r):i})}async function cD(t,e,n=!1){const r=await uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ya._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e,n=!1){const{auth:r}=t;if(br(r.app))return Promise.reject(ei(r));const s="reauthenticate";try{const i=await uu(t,mS(r,s,e,t),n);fe(i.idToken,r,"internal-error");const o=my(i.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),ya._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e,n=!1){if(br(t.app))return Promise.reject(ei(t));const r="signIn",s=await mS(t,r,e),i=await ya._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function fD(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function pD(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function mD(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function gD(t){return Nt(t).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,vD=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);K2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const wD=yS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vS.type="SESSION";const wS=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await _D(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=vy("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function TD(t){Pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function ED(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ID(){return _S()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebaseLocalStorageDb",kD=1,Ud="firebaseLocalStorage",TS="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function bD(){const t=indexedDB.deleteDatabase(xS);return new Nu(t).toPromise()}function Cm(){const t=indexedDB.open(xS,kD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ud,{keyPath:TS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await bD(),e(await Cm()))})})}async function Gw(t,e,n){const r=Nh(t,!0).put({[TS]:e,value:n});return new Nu(r).toPromise()}async function AD(t,e){const n=Nh(t,!1).get(e),r=await new Nu(n).toPromise();return r===void 0?null:r.value}function Kw(t,e){const n=Nh(t,!0).delete(e);return new Nu(n).toPromise()}const CD=800,PD=3;class ES{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _S()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(ID()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ED(),!this.activeServiceWorker)return;this.sender=new xD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await Gw(e,Fd,"1"),await Kw(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nh(s,!1).getAll();return new Nu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ES.type="LOCAL";const RD=ES;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t,e){return e?Xr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends pS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ND(t){return hD(t.auth,new _y(t),t.bypassAuthState)}function DD(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),dD(n,new _y(t),t.bypassAuthState)}async function jD(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),cD(n,new _y(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ND;case"linkViaPopup":case"linkViaRedirect":return jD;case"reauthViaPopup":case"reauthViaRedirect":return DD;default:jr(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Pu(2e3,1e4);async function VD(t,e,n){if(br(t.app))return Promise.reject(gr(t,"operation-not-supported-in-this-environment"));const r=Fa(t);X1(t,e,Ph);const s=wy(r,n);return new ji(r,"signInViaPopup",e,s).executeNotNull()}class ji extends SS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OD.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="pendingRedirect",Xc=new Map;class LD extends SS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const r=await FD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FD(t,e){const n=kS(e),r=IS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function UD(t,e){return IS(t)._set(kS(e),"true")}function BD(t,e){Xc.set(t._key(),e)}function IS(t){return Xr(t._redirectPersistence)}function kS(t){return Yc(MD,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e,n){return WD(t,e,n)}async function WD(t,e,n){if(br(t.app))return Promise.reject(ei(t));const r=Fa(t);X1(t,e,Ph),await r._initializationPromise;const s=wy(r,n);return await UD(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function zD(t,e){return await Fa(t)._initializationPromise,bS(t,e,!1)}async function bS(t,e,n=!1){if(br(t.app))return Promise.reject(ei(t));const r=Fa(t),s=wy(r,e),o=await new LD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=10*60*1e3;class HD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e={}){return La(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YD=/^https?/;async function XD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KD(t);for(const n of e)try{if(JD(n))return}catch{}jr(t,"unauthorized-domain")}function JD(t){const e=bm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YD.test(n))return!1;if(QD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Pu(3e4,6e4);function Yw(){const t=Pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ej(t){return new Promise((e,n)=>{var r,s,i;function o(){Yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yw(),n(gr(t,"network-request-failed"))},timeout:ZD.get()})}if(!((s=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Pr().gapi)===null||i===void 0)&&i.load)o();else{const a=rD("iframefcb");return Pr()[a]=()=>{gapi.load?o():n(gr(t,"network-request-failed"))},tD(`${nD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function tj(t){return Jc=Jc||ej(t),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new Pu(5e3,15e3),rj="__/auth/iframe",sj="emulator/auth/iframe",ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aj(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fy(e,sj):`https://${t.config.authDomain}/${rj}`,r={apiKey:e.apiKey,appName:t.name,v:Ma},s=oj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Cu(r).slice(1)}`}async function lj(t){const e=await tj(t),n=Pr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:aj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ij,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=gr(t,"network-request-failed"),a=Pr().setTimeout(()=>{i(o)},nj.get());function l(){Pr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cj=500,dj=600,hj="_blank",fj="http://localhost";class Xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pj(t,e,n,r=cj,s=dj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},uj),{width:r.toString(),height:s.toString(),top:i,left:o}),c=yn().toLowerCase();n&&(a=oS(c)?hj:n),sS(c)&&(e=e||fj,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,_])=>`${m}${y}=${_},`,"");if(G2(c)&&a!=="_self")return mj(e||"",a),new Xw(null);const f=window.open(e||"",a,h);fe(f,t,"popup-blocked");try{f.focus()}catch{}return new Xw(f)}function mj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="__/auth/handler",yj="emulator/auth/handler",vj=encodeURIComponent("fac");async function Jw(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ma,eventId:s};if(e instanceof Ph){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ru){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${vj}=${encodeURIComponent(l)}`:"";return`${wj(t)}?${Cu(a).slice(1)}${c}`}function wj({config:t}){return t.emulator?fy(t,yj):`https://${t.authDomain}/${gj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="webStorageSupport";class _j{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wS,this._completeRedirectFn=bS,this._overrideRedirectResult=BD}async _openPopup(e,n,r,s){var i;cs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Jw(e,n,r,bm(),s);return pj(e,o,vy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Jw(e,n,r,bm(),s);return TD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(cs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lj(e),r=new HD(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tp,{type:tp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tp];o!==void 0&&n(!!o),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dS()||iS()||gy()}}const xj=_j;var Zw="@firebase/auth",e_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sj(t){ga(new Qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(t)},c=new Z2(r,s,i,l);return iD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ga(new Qi("auth-internal",e=>{const n=Fa(e.getProvider("auth").getImmediate());return(r=>new Tj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(Zw,e_,Ej(t)),Zs(Zw,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=5*60,kj=$1("authIdTokenMaxAge")||Ij;let t_=null;const bj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kj)return;const s=n==null?void 0:n.token;t_!==s&&(t_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CS(t=H1()){const e=uy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sD(t,{popupRedirectResolver:xj,persistence:[RD,wD,wS]}),r=$1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bj(i.toString());pD(n,o,()=>o(n.currentUser)),fD(n,a=>o(a))}}const s=U1("auth");return s&&oD(n,`http://${s}`),n}function Aj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Aj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sj("Browser");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,PS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,v){function T(){}T.prototype=v.prototype,k.D=v.prototype,k.prototype=new T,k.prototype.constructor=k,k.C=function(C,R,D){for(var P=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)P[ke-2]=arguments[ke];return v.prototype[R].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,v,T){T||(T=0);var C=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)C[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;16>R;++R)C[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=k.g[0],T=k.g[1],R=k.g[2];var D=k.g[3],P=v+(D^T&(R^D))+C[0]+3614090360&4294967295;v=T+(P<<7&4294967295|P>>>25),P=D+(R^v&(T^R))+C[1]+3905402710&4294967295,D=v+(P<<12&4294967295|P>>>20),P=R+(T^D&(v^T))+C[2]+606105819&4294967295,R=D+(P<<17&4294967295|P>>>15),P=T+(v^R&(D^v))+C[3]+3250441966&4294967295,T=R+(P<<22&4294967295|P>>>10),P=v+(D^T&(R^D))+C[4]+4118548399&4294967295,v=T+(P<<7&4294967295|P>>>25),P=D+(R^v&(T^R))+C[5]+1200080426&4294967295,D=v+(P<<12&4294967295|P>>>20),P=R+(T^D&(v^T))+C[6]+2821735955&4294967295,R=D+(P<<17&4294967295|P>>>15),P=T+(v^R&(D^v))+C[7]+4249261313&4294967295,T=R+(P<<22&4294967295|P>>>10),P=v+(D^T&(R^D))+C[8]+1770035416&4294967295,v=T+(P<<7&4294967295|P>>>25),P=D+(R^v&(T^R))+C[9]+2336552879&4294967295,D=v+(P<<12&4294967295|P>>>20),P=R+(T^D&(v^T))+C[10]+4294925233&4294967295,R=D+(P<<17&4294967295|P>>>15),P=T+(v^R&(D^v))+C[11]+2304563134&4294967295,T=R+(P<<22&4294967295|P>>>10),P=v+(D^T&(R^D))+C[12]+1804603682&4294967295,v=T+(P<<7&4294967295|P>>>25),P=D+(R^v&(T^R))+C[13]+4254626195&4294967295,D=v+(P<<12&4294967295|P>>>20),P=R+(T^D&(v^T))+C[14]+2792965006&4294967295,R=D+(P<<17&4294967295|P>>>15),P=T+(v^R&(D^v))+C[15]+1236535329&4294967295,T=R+(P<<22&4294967295|P>>>10),P=v+(R^D&(T^R))+C[1]+4129170786&4294967295,v=T+(P<<5&4294967295|P>>>27),P=D+(T^R&(v^T))+C[6]+3225465664&4294967295,D=v+(P<<9&4294967295|P>>>23),P=R+(v^T&(D^v))+C[11]+643717713&4294967295,R=D+(P<<14&4294967295|P>>>18),P=T+(D^v&(R^D))+C[0]+3921069994&4294967295,T=R+(P<<20&4294967295|P>>>12),P=v+(R^D&(T^R))+C[5]+3593408605&4294967295,v=T+(P<<5&4294967295|P>>>27),P=D+(T^R&(v^T))+C[10]+38016083&4294967295,D=v+(P<<9&4294967295|P>>>23),P=R+(v^T&(D^v))+C[15]+3634488961&4294967295,R=D+(P<<14&4294967295|P>>>18),P=T+(D^v&(R^D))+C[4]+3889429448&4294967295,T=R+(P<<20&4294967295|P>>>12),P=v+(R^D&(T^R))+C[9]+568446438&4294967295,v=T+(P<<5&4294967295|P>>>27),P=D+(T^R&(v^T))+C[14]+3275163606&4294967295,D=v+(P<<9&4294967295|P>>>23),P=R+(v^T&(D^v))+C[3]+4107603335&4294967295,R=D+(P<<14&4294967295|P>>>18),P=T+(D^v&(R^D))+C[8]+1163531501&4294967295,T=R+(P<<20&4294967295|P>>>12),P=v+(R^D&(T^R))+C[13]+2850285829&4294967295,v=T+(P<<5&4294967295|P>>>27),P=D+(T^R&(v^T))+C[2]+4243563512&4294967295,D=v+(P<<9&4294967295|P>>>23),P=R+(v^T&(D^v))+C[7]+1735328473&4294967295,R=D+(P<<14&4294967295|P>>>18),P=T+(D^v&(R^D))+C[12]+2368359562&4294967295,T=R+(P<<20&4294967295|P>>>12),P=v+(T^R^D)+C[5]+4294588738&4294967295,v=T+(P<<4&4294967295|P>>>28),P=D+(v^T^R)+C[8]+2272392833&4294967295,D=v+(P<<11&4294967295|P>>>21),P=R+(D^v^T)+C[11]+1839030562&4294967295,R=D+(P<<16&4294967295|P>>>16),P=T+(R^D^v)+C[14]+4259657740&4294967295,T=R+(P<<23&4294967295|P>>>9),P=v+(T^R^D)+C[1]+2763975236&4294967295,v=T+(P<<4&4294967295|P>>>28),P=D+(v^T^R)+C[4]+1272893353&4294967295,D=v+(P<<11&4294967295|P>>>21),P=R+(D^v^T)+C[7]+4139469664&4294967295,R=D+(P<<16&4294967295|P>>>16),P=T+(R^D^v)+C[10]+3200236656&4294967295,T=R+(P<<23&4294967295|P>>>9),P=v+(T^R^D)+C[13]+681279174&4294967295,v=T+(P<<4&4294967295|P>>>28),P=D+(v^T^R)+C[0]+3936430074&4294967295,D=v+(P<<11&4294967295|P>>>21),P=R+(D^v^T)+C[3]+3572445317&4294967295,R=D+(P<<16&4294967295|P>>>16),P=T+(R^D^v)+C[6]+76029189&4294967295,T=R+(P<<23&4294967295|P>>>9),P=v+(T^R^D)+C[9]+3654602809&4294967295,v=T+(P<<4&4294967295|P>>>28),P=D+(v^T^R)+C[12]+3873151461&4294967295,D=v+(P<<11&4294967295|P>>>21),P=R+(D^v^T)+C[15]+530742520&4294967295,R=D+(P<<16&4294967295|P>>>16),P=T+(R^D^v)+C[2]+3299628645&4294967295,T=R+(P<<23&4294967295|P>>>9),P=v+(R^(T|~D))+C[0]+4096336452&4294967295,v=T+(P<<6&4294967295|P>>>26),P=D+(T^(v|~R))+C[7]+1126891415&4294967295,D=v+(P<<10&4294967295|P>>>22),P=R+(v^(D|~T))+C[14]+2878612391&4294967295,R=D+(P<<15&4294967295|P>>>17),P=T+(D^(R|~v))+C[5]+4237533241&4294967295,T=R+(P<<21&4294967295|P>>>11),P=v+(R^(T|~D))+C[12]+1700485571&4294967295,v=T+(P<<6&4294967295|P>>>26),P=D+(T^(v|~R))+C[3]+2399980690&4294967295,D=v+(P<<10&4294967295|P>>>22),P=R+(v^(D|~T))+C[10]+4293915773&4294967295,R=D+(P<<15&4294967295|P>>>17),P=T+(D^(R|~v))+C[1]+2240044497&4294967295,T=R+(P<<21&4294967295|P>>>11),P=v+(R^(T|~D))+C[8]+1873313359&4294967295,v=T+(P<<6&4294967295|P>>>26),P=D+(T^(v|~R))+C[15]+4264355552&4294967295,D=v+(P<<10&4294967295|P>>>22),P=R+(v^(D|~T))+C[6]+2734768916&4294967295,R=D+(P<<15&4294967295|P>>>17),P=T+(D^(R|~v))+C[13]+1309151649&4294967295,T=R+(P<<21&4294967295|P>>>11),P=v+(R^(T|~D))+C[4]+4149444226&4294967295,v=T+(P<<6&4294967295|P>>>26),P=D+(T^(v|~R))+C[11]+3174756917&4294967295,D=v+(P<<10&4294967295|P>>>22),P=R+(v^(D|~T))+C[2]+718787259&4294967295,R=D+(P<<15&4294967295|P>>>17),P=T+(D^(R|~v))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+v&4294967295,k.g[1]=k.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.u=function(k,v){v===void 0&&(v=k.length);for(var T=v-this.blockSize,C=this.B,R=this.h,D=0;D<v;){if(R==0)for(;D<=T;)s(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<v;)if(C[R++]=k.charCodeAt(D++),R==this.blockSize){s(this,C),R=0;break}}else for(;D<v;)if(C[R++]=k[D++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var v=1;v<k.length-8;++v)k[v]=0;var T=8*this.o;for(v=k.length-8;v<k.length;++v)k[v]=T&255,T/=256;for(this.u(k),k=Array(16),v=T=0;4>v;++v)for(var C=0;32>C;C+=8)k[T++]=this.g[v]>>>C&255;return k};function i(k,v){var T=a;return Object.prototype.hasOwnProperty.call(T,k)?T[k]:T[k]=v(k)}function o(k,v){this.h=v;for(var T=[],C=!0,R=k.length-1;0<=R;R--){var D=k[R]|0;C&&D==v||(T[R]=D,C=!1)}this.g=T}var a={};function l(k){return-128<=k&&128>k?i(k,function(v){return new o([v|0],0>v?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return A(c(-k));for(var v=[],T=1,C=0;k>=T;C++)v[C]=k/T|0,T*=4294967296;return new o(v,0)}function h(k,v){if(k.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k.charAt(0)=="-")return A(h(k.substring(1),v));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),C=f,R=0;R<k.length;R+=8){var D=Math.min(8,k.length-R),P=parseInt(k.substring(R,R+D),v);8>D?(D=c(Math.pow(v,D)),C=C.j(D).add(c(P))):(C=C.j(T),C=C.add(c(P)))}return C}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var k=0,v=1,T=0;T<this.g.length;T++){var C=this.i(T);k+=(0<=C?C:4294967296+C)*v,v*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(E(this))return"-"+A(this).toString(k);for(var v=c(Math.pow(k,6)),T=this,C="";;){var R=N(T,v).g;T=S(T,R.j(v));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(k);if(T=R,_(T))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var v=0;v<k.g.length;v++)if(k.g[v]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=S(this,k),E(k)?-1:_(k)?0:1};function A(k){for(var v=k.g.length,T=[],C=0;C<v;C++)T[C]=~k.g[C];return new o(T,~k.h).add(m)}t.abs=function(){return E(this)?A(this):this},t.add=function(k){for(var v=Math.max(this.g.length,k.g.length),T=[],C=0,R=0;R<=v;R++){var D=C+(this.i(R)&65535)+(k.i(R)&65535),P=(D>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);C=P>>>16,D&=65535,P&=65535,T[R]=P<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(k,v){return k.add(A(v))}t.j=function(k){if(_(this)||_(k))return f;if(E(this))return E(k)?A(this).j(A(k)):A(A(this).j(k));if(E(k))return A(this.j(A(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var v=this.g.length+k.g.length,T=[],C=0;C<2*v;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<k.g.length;R++){var D=this.i(C)>>>16,P=this.i(C)&65535,ke=k.i(R)>>>16,lt=k.i(R)&65535;T[2*C+2*R]+=P*lt,w(T,2*C+2*R),T[2*C+2*R+1]+=D*lt,w(T,2*C+2*R+1),T[2*C+2*R+1]+=P*ke,w(T,2*C+2*R+1),T[2*C+2*R+2]+=D*ke,w(T,2*C+2*R+2)}for(C=0;C<v;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=v;C<2*v;C++)T[C]=0;return new o(T,0)};function w(k,v){for(;(k[v]&65535)!=k[v];)k[v+1]+=k[v]>>>16,k[v]&=65535,v++}function x(k,v){this.g=k,this.h=v}function N(k,v){if(_(v))throw Error("division by zero");if(_(k))return new x(f,f);if(E(k))return v=N(A(k),v),new x(A(v.g),A(v.h));if(E(v))return v=N(k,A(v)),new x(A(v.g),v.h);if(30<k.g.length){if(E(k)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var T=m,C=v;0>=C.l(k);)T=V(T),C=V(C);var R=L(T,1),D=L(C,1);for(C=L(C,2),T=L(T,2);!_(C);){var P=D.add(C);0>=P.l(k)&&(R=R.add(T),D=P),C=L(C,1),T=L(T,1)}return v=S(k,R.j(v)),new x(R,v)}for(R=f;0<=k.l(v);){for(T=Math.max(1,Math.floor(k.m()/v.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=c(T),P=D.j(v);E(P)||0<P.l(k);)T-=C,D=c(T),P=D.j(v);_(D)&&(D=m),R=R.add(D),k=S(k,P)}return new x(R,k)}t.A=function(k){return N(this,k).h},t.and=function(k){for(var v=Math.max(this.g.length,k.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)&k.i(C);return new o(T,this.h&k.h)},t.or=function(k){for(var v=Math.max(this.g.length,k.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)|k.i(C);return new o(T,this.h|k.h)},t.xor=function(k){for(var v=Math.max(this.g.length,k.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)^k.i(C);return new o(T,this.h^k.h)};function V(k){for(var v=k.g.length+1,T=[],C=0;C<v;C++)T[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(T,k.h)}function L(k,v){var T=v>>5;v%=32;for(var C=k.g.length-T,R=[],D=0;D<C;D++)R[D]=0<v?k.i(D+T)>>>v|k.i(D+T+1)<<32-v:k.i(D+T);return new o(R,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Fi=o}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RS,vl,NS,Zc,Pm,DS,jS,OS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ec=="object"&&Ec];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var O=u[I];if(!(O in g))break e;g=g[O]}u=u[u.length-1],I=g[u],p=p(I),p!=I&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,I=!1,O={next:function(){if(!I&&g<u.length){var M=g++;return{value:p(M,u[M]),done:!1}}return I=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,I),u.apply(p,O)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function _(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(I,O,M){for(var H=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)H[Je-2]=arguments[Je];return p.prototype[O].apply(I,H)}}function E(u){const p=u.length;if(0<p){const g=Array(p);for(let I=0;I<p;I++)g[I]=u[I];return g}return[]}function A(u,p){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(l(I)){const O=u.length||0,M=I.length||0;u.length=O+M;for(let H=0;H<M;H++)u[O+H]=I[H]}else u.push(I)}}class S{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function L(u,p,g){for(const I in u)p.call(g,u[I],I,u)}function k(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function v(u){const p={};for(const g in u)p[g]=u[g];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let g,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(g in I)u[g]=I[g];for(let M=0;M<T.length;M++)g=T[M],Object.prototype.hasOwnProperty.call(I,g)&&(u[g]=I[g])}}function R(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function P(){var u=Z;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ke{constructor(){this.h=this.g=null}add(p,g){const I=lt.get();I.set(p,g),this.h?this.h.next=I:this.g=I,this.h=I}}var lt=new S(()=>new Ne,u=>u.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,q=!1,Z=new ke,ue=()=>{const u=a.Promise.resolve(void 0);xe=()=>{u.then(ne)}};var ne=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(g){D(g)}var p=lt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Ht(u,p){if(Ke.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(V){e:{try{N(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ut[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ht.aa.h.call(this)}}_(Ht,Ke);var ut={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),ys=0;function In(u,p,g,I,O){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!I,this.ha=O,this.key=++ys,this.da=this.fa=!1}function On(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function rn(u){this.src=u,this.g={},this.h=0}rn.prototype.add=function(u,p,g,I,O){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var H=z(u,p,I,O);return-1<H?(p=u[H],g||(p.fa=!1)):(p=new In(p,this.src,M,!!I,O),p.fa=g,u.push(p)),p};function rr(u,p){var g=p.type;if(g in u.g){var I=u.g[g],O=Array.prototype.indexOf.call(I,p,void 0),M;(M=0<=O)&&Array.prototype.splice.call(I,O,1),M&&(On(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function z(u,p,g,I){for(var O=0;O<u.length;++O){var M=u[O];if(!M.da&&M.listener==p&&M.capture==!!g&&M.ha==I)return O}return-1}var we="closure_lm_"+(1e6*Math.random()|0),ye={};function Fe(u,p,g,I,O){if(Array.isArray(p)){for(var M=0;M<p.length;M++)Fe(u,p[M],g,I,O);return null}return g=Kn(g),u&&u[et]?u.K(p,g,c(I)?!!I.capture:!1,O):Te(u,p,g,!1,I,O)}function Te(u,p,g,I,O,M){if(!p)throw Error("Invalid event type");var H=c(O)?!!O.capture:!!O,Je=Fr(u);if(Je||(u[we]=Je=new rn(u)),g=Je.add(p,g,I,H,M),g.proxy)return g;if(I=Oe(),g.proxy=I,I.src=u,I.listener=g,u.addEventListener)nn||(O=H),O===void 0&&(O=!1),u.addEventListener(p.toString(),I,O);else if(u.attachEvent)u.attachEvent(Dt(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Oe(){function u(g){return p.call(u.src,u.listener,g)}const p=Gn;return u}function Ue(u,p,g,I,O){if(Array.isArray(p))for(var M=0;M<p.length;M++)Ue(u,p[M],g,I,O);else I=c(I)?!!I.capture:!!I,g=Kn(g),u&&u[et]?(u=u.i,p=String(p).toString(),p in u.g&&(M=u.g[p],g=z(M,g,I,O),-1<g&&(On(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete u.g[p],u.h--)))):u&&(u=Fr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=z(p,g,I,O)),(g=-1<u?p[u]:null)&&Lt(g))}function Lt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[et])rr(p.i,u);else{var g=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(g,I,u.capture):p.detachEvent?p.detachEvent(Dt(g),I):p.addListener&&p.removeListener&&p.removeListener(I),(g=Fr(p))?(rr(g,u),g.h==0&&(g.src=null,p[we]=null)):On(u)}}}function Dt(u){return u in ye?ye[u]:ye[u]="on"+u}function Gn(u,p){if(u.da)u=!0;else{p=new Ht(p,this);var g=u.listener,I=u.ha||u.src;u.fa&&Lt(u),u=g.call(I,p)}return u}function Fr(u){return u=u[we],u instanceof rn?u:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kn(u){return typeof u=="function"?u:(u[vs]||(u[vs]=function(p){return u.handleEvent(p)}),u[vs])}function Qe(){Se.call(this),this.i=new rn(this),this.M=this,this.F=null}_(Qe,Se),Qe.prototype[et]=!0,Qe.prototype.removeEventListener=function(u,p,g,I){Ue(this,u,p,g,I)};function Ft(u,p){var g,I=u.F;if(I)for(g=[];I;I=I.F)g.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Ke(p,u);else if(p instanceof Ke)p.target=p.target||u;else{var O=p;p=new Ke(I,u),C(p,O)}if(O=!0,g)for(var M=g.length-1;0<=M;M--){var H=p.g=g[M];O=sr(H,I,!0,p)&&O}if(H=p.g=u,O=sr(H,I,!0,p)&&O,O=sr(H,I,!1,p)&&O,g)for(M=0;M<g.length;M++)H=p.g=g[M],O=sr(H,I,!1,p)&&O}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],I=0;I<g.length;I++)On(g[I]);delete u.g[p],u.h--}}this.F=null},Qe.prototype.K=function(u,p,g,I){return this.i.add(String(u),p,!1,g,I)},Qe.prototype.L=function(u,p,g,I){return this.i.add(String(u),p,!0,g,I)};function sr(u,p,g,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,M=0;M<p.length;++M){var H=p[M];if(H&&!H.da&&H.capture==g){var Je=H.listener,Qt=H.ha||H.src;H.fa&&rr(u.i,H),O=Je.call(Qt,I)!==!1&&O}}return O&&!I.defaultPrevented}function go(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function G(u){u.g=go(()=>{u.g=null,u.i&&(u.i=!1,G(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ge extends Se{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(u){Se.call(this),this.h=u,this.g={}}_(Ee,Se);var Ut=[];function ae(u){L(u.g,function(p,g){this.g.hasOwnProperty(g)&&Lt(p)},u),u.g={}}Ee.prototype.N=function(){Ee.aa.N.call(this),ae(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=a.JSON.stringify,yi=a.JSON.parse,ws=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ur(){}Ur.prototype.h=null;function _s(u){return u.h||(u.h=u.i())}function xs(){}var Ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function U(){Ke.call(this,"d")}_(U,Ke);function le(){Ke.call(this,"c")}_(le,Ke);var te={},Be=null;function It(){return Be=Be||new Qe}te.La="serverreachability";function ir(u){Ke.call(this,te.La,u)}_(ir,Ke);function jt(u){const p=It();Ft(p,new ir(p))}te.STAT_EVENT="statevent";function or(u,p){Ke.call(this,te.STAT_EVENT,u),this.stat=p}_(or,Ke);function Xe(u){const p=It();Ft(p,new or(p,u))}te.Ma="timingevent";function Vn(u,p){Ke.call(this,te.Ma,u),this.size=p}_(Vn,Ke);function kt(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Gt(){this.g=!0}Gt.prototype.xa=function(){this.g=!1};function mt(u,p,g,I,O,M){u.info(function(){if(u.g)if(M)for(var H="",Je=M.split("&"),Qt=0;Qt<Je.length;Qt++){var Ve=Je[Qt].split("=");if(1<Ve.length){var on=Ve[0];Ve=Ve[1];var an=on.split("_");H=2<=an.length&&an[1]=="type"?H+(on+"="+Ve+"&"):H+(on+"=redacted&")}}else H=null;else H=M;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+p+`
`+g+`
`+H})}function _r(u,p,g,I,O,M,H){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+p+`
`+g+`
`+M+" "+H})}function Kt(u,p,g,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+vn(u,g)+(I?" "+I:"")})}function ar(u,p){u.info(function(){return"TIMEOUT: "+p})}Gt.prototype.info=function(){};function vn(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var I=g[u];if(!(2>I.length)){var O=I[1];if(Array.isArray(O)&&!(1>O.length)){var M=O[0];if(M!="noop"&&M!="stop"&&M!="close")for(var H=1;H<O.length;H++)O[H]=""}}}}return Ye(g)}catch{return p}}var sn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Q={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},de;function ve(){}_(ve,Ur),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},de=new ve;function Pe(u,p,g,I){this.j=u,this.i=p,this.l=g,this.R=I||1,this.U=new Ee(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Tr={},Hu={};function hf(u,p,g){u.L=1,u.v=Yu(Br(p)),u.m=g,u.P=!0,C0(u,null)}function C0(u,p){u.F=Date.now(),Gu(u),u.A=Br(u.v);var g=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),W0(g.i,"t",I),u.C=0,g=u.j.J,u.h=new xr,u.g=av(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Ge(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,I=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ut[0]=O.toString()),O=Ut);for(var M=0;M<O.length;M++){var H=Fe(g,O[M],I||p.handleEvent,!1,p.h||p);if(!H)break;p.g[H.key]=H}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),jt(),mt(u.i,u.u,u.A,u.l,u.R,u.m)}Pe.prototype.ca=function(u){u=u.target;const p=this.M;p&&$r(u)==3?p.j():this.Y(u)},Pe.prototype.Y=function(u){try{if(u==this.g)e:{const an=$r(this.g);var p=this.g.Ba();const wo=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Y0(this.g)))){this.J||an!=4||p==7||(p==8||0>=wo?jt(3):jt(2)),ff(this);var g=this.g.Z();this.X=g;t:if(P0(this)){var I=Y0(this.g);u="";var O=I.length,M=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Ga(this);var H="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(M&&p==O-1)});I.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=g==200,_r(this.i,this.u,this.A,this.l,this.R,an,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Qt=this.g;if((Je=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Je)){var Ve=Je;break t}}Ve=null}if(g=Ve)Kt(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pf(this,g);else{this.o=!1,this.s=3,Xe(12),vi(this),Ga(this);break e}}if(this.P){g=!0;let lr;for(;!this.J&&this.C<H.length;)if(lr=Jb(this,H),lr==Hu){an==4&&(this.s=4,Xe(14),g=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==Tr){this.s=4,Xe(15),Kt(this.i,this.l,H,"[Invalid Chunk]"),g=!1;break}else Kt(this.i,this.l,lr,null),pf(this,lr);if(P0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||H.length!=0||this.h.h||(this.s=1,Xe(16),g=!1),this.o=this.o&&g,!g)Kt(this.i,this.l,H,"[Invalid Chunked Response]"),vi(this),Ga(this);else if(0<H.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),_f(on),on.M=!0,Xe(11))}}else Kt(this.i,this.l,H,null),pf(this,H);an==4&&vi(this),this.o&&!this.J&&(an==4?rv(this.j,this):(this.o=!1,Gu(this)))}else mA(this.g),g==400&&0<H.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),vi(this),Ga(this)}}}catch{}finally{}};function P0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jb(u,p){var g=u.C,I=p.indexOf(`
`,g);return I==-1?Hu:(g=Number(p.substring(g,I)),isNaN(g)?Tr:(I+=1,I+g>p.length?Hu:(p=p.slice(I,I+g),u.C=I+g,p)))}Pe.prototype.cancel=function(){this.J=!0,vi(this)};function Gu(u){u.S=Date.now()+u.I,R0(u,u.I)}function R0(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kt(m(u.ba,u),p)}function ff(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Pe.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ar(this.i,this.A),this.L!=2&&(jt(),Xe(17)),vi(this),this.s=2,Ga(this)):R0(this,this.S-u)};function Ga(u){u.j.G==0||u.J||rv(u.j,u)}function vi(u){ff(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ae(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function pf(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||mf(g.h,u))){if(!u.K&&mf(g.h,u)&&g.G==3){try{var I=g.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)nc(g),ec(g);else break e;wf(g),Xe(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=kt(m(g.Za,g),6e3));if(1>=j0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else _i(g,11)}else if((u.K||g.g==u)&&nc(g),!w(p))for(O=g.Da.g.parse(p),p=0;p<O.length;p++){let Ve=O[p];if(g.T=Ve[0],Ve=Ve[1],g.G==2)if(Ve[0]=="c"){g.K=Ve[1],g.ia=Ve[2];const on=Ve[3];on!=null&&(g.la=on,g.j.info("VER="+g.la));const an=Ve[4];an!=null&&(g.Aa=an,g.j.info("SVER="+g.Aa));const wo=Ve[5];wo!=null&&typeof wo=="number"&&0<wo&&(I=1.5*wo,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const lr=u.g;if(lr){const sc=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sc){var M=I.h;M.g||sc.indexOf("spdy")==-1&&sc.indexOf("quic")==-1&&sc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(gf(M,M.h),M.h=null))}if(I.D){const xf=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;xf&&(I.ya=xf,st(I.I,I.D,xf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var H=u;if(I.qa=ov(I,I.J?I.ia:null,I.W),H.K){O0(I.h,H);var Je=H,Qt=I.L;Qt&&(Je.I=Qt),Je.B&&(ff(Je),Gu(Je)),I.g=H}else tv(I);0<g.i.length&&tc(g)}else Ve[0]!="stop"&&Ve[0]!="close"||_i(g,7);else g.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?_i(g,7):vf(g):Ve[0]!="noop"&&g.l&&g.l.ta(Ve),g.v=0)}}jt(4)}catch{}}var Zb=class{constructor(u,p){this.g=u,this.map=p}};function N0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function D0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function j0(u){return u.h?1:u.g?u.g.size:0}function mf(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function gf(u,p){u.g?u.g.add(p):u.h=p}function O0(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}N0.prototype.cancel=function(){if(this.i=V0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function V0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return E(u.i)}function eA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,I=0;I<g;I++)p.push(u[I]);return p}p=[],g=0;for(I in u)p[g++]=u[I];return p}function tA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const I in u)p[g++]=I;return p}}}function M0(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=tA(u),I=eA(u),O=I.length,M=0;M<O;M++)p.call(void 0,I[M],g&&g[M],u)}var L0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nA(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var I=u[g].indexOf("="),O=null;if(0<=I){var M=u[g].substring(0,I);O=u[g].substring(I+1)}else M=u[g];p(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function wi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wi){this.h=u.h,Ku(this,u.j),this.o=u.o,this.g=u.g,Qu(this,u.s),this.l=u.l;var p=u.i,g=new Ya;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),F0(this,g),this.m=u.m}else u&&(p=String(u).match(L0))?(this.h=!1,Ku(this,p[1]||"",!0),this.o=Ka(p[2]||""),this.g=Ka(p[3]||"",!0),Qu(this,p[4]),this.l=Ka(p[5]||"",!0),F0(this,p[6]||"",!0),this.m=Ka(p[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}wi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Qa(p,U0,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Qa(p,U0,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Qa(g,g.charAt(0)=="/"?iA:sA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Qa(g,aA)),u.join("")};function Br(u){return new wi(u)}function Ku(u,p,g){u.j=g?Ka(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Qu(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function F0(u,p,g){p instanceof Ya?(u.i=p,lA(u.i,u.h)):(g||(p=Qa(p,oA)),u.i=new Ya(p,u.h))}function st(u,p,g){u.i.set(p,g)}function Yu(u){return st(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ka(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,rA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var U0=/[#\/\?@]/g,sA=/[#\?:]/g,iA=/[#\?]/g,oA=/[#\?@]/g,aA=/#/g;function Ya(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Es(u){u.g||(u.g=new Map,u.h=0,u.i&&nA(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ya.prototype,t.add=function(u,p){Es(this),this.i=null,u=yo(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function B0(u,p){Es(u),p=yo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function $0(u,p){return Es(u),p=yo(u,p),u.g.has(p)}t.forEach=function(u,p){Es(this),this.g.forEach(function(g,I){g.forEach(function(O){u.call(p,O,I,this)},this)},this)},t.na=function(){Es(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let I=0;I<p.length;I++){const O=u[I];for(let M=0;M<O.length;M++)g.push(p[I])}return g},t.V=function(u){Es(this);let p=[];if(typeof u=="string")$0(this,u)&&(p=p.concat(this.g.get(yo(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Es(this),this.i=null,u=yo(this,u),$0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function W0(u,p,g){B0(u,p),0<g.length&&(u.i=null,u.g.set(yo(u,p),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var I=p[g];const M=encodeURIComponent(String(I)),H=this.V(I);for(I=0;I<H.length;I++){var O=M;H[I]!==""&&(O+="="+encodeURIComponent(String(H[I]))),u.push(O)}}return this.i=u.join("&")};function yo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function lA(u,p){p&&!u.j&&(Es(u),u.i=null,u.g.forEach(function(g,I){var O=I.toLowerCase();I!=O&&(B0(this,I),W0(this,O,g))},u)),u.j=p}function uA(u,p){const g=new Gt;if(a.Image){const I=new Image;I.onload=y(Ss,g,"TestLoadImage: loaded",!0,p,I),I.onerror=y(Ss,g,"TestLoadImage: error",!1,p,I),I.onabort=y(Ss,g,"TestLoadImage: abort",!1,p,I),I.ontimeout=y(Ss,g,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function cA(u,p){const g=new Gt,I=new AbortController,O=setTimeout(()=>{I.abort(),Ss(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(M=>{clearTimeout(O),M.ok?Ss(g,"TestPingServer: ok",!0,p):Ss(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Ss(g,"TestPingServer: error",!1,p)})}function Ss(u,p,g,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(g)}catch{}}function dA(){this.g=new ws}function hA(u,p,g){const I=g||"";try{M0(u,function(O,M){let H=O;c(O)&&(H=Ye(O)),p.push(I+M+"="+encodeURIComponent(H))})}catch(O){throw p.push(I+"type="+encodeURIComponent("_badmap")),O}}function Xu(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Xu,Ur),Xu.prototype.g=function(){return new Ju(this.l,this.j)},Xu.prototype.i=function(u){return function(){return u}}({});function Ju(u,p){Qe.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ju,Qe),t=Ju.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ja(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;z0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function z0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Xa(this):Ja(this),this.readyState==3&&z0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Xa(this))},t.Qa=function(u){this.g&&(this.response=u,Xa(this))},t.ga=function(){this.g&&Xa(this)};function Xa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ja(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function q0(u){let p="";return L(u,function(g,I){p+=I,p+=":",p+=g,p+=`\r
`}),p}function yf(u,p,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=q0(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):st(u,p,g))}function gt(u){Qe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(gt,Qe);var fA=/^https?$/i,pA=["POST","PUT"];t=gt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():de.g(),this.v=this.o?_s(this.o):_s(de),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(M){H0(this,M);return}if(u=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)g.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const M of I.keys())g.set(M,I.get(M));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pA,p,void 0))||I||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of g)this.g.setRequestHeader(M,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Q0(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){H0(this,M)}};function H0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,G0(u),Zu(u)}function G0(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),Zu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zu(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?K0(this):this.bb())},t.bb=function(){K0(this)};function K0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||$r(u)!=4||u.Z()!=2)){if(u.u&&$r(u)==4)go(u.Ea,0,u);else if(Ft(u,"readystatechange"),$r(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var I;if(I=H===0){var O=String(u.D).match(L0)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),I=!fA.test(O?O.toLowerCase():"")}g=I}if(g)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var M=2<$r(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",G0(u)}}finally{Zu(u)}}}}function Zu(u,p){if(u.g){Q0(u);const g=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ft(u,"ready");try{g.onreadystatechange=I}catch{}}}function Q0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function $r(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),yi(p)}};function Y0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mA(u){const p={};u=(u.g&&2<=$r(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(w(u[I]))continue;var g=R(u[I]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=p[O]||[];p[O]=M,M.push(g)}k(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Za(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function X0(u){this.Aa=0,this.i=[],this.j=new Gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Za("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Za("baseRetryDelayMs",5e3,u),this.cb=Za("retryDelaySeedMs",1e4,u),this.Wa=Za("forwardChannelMaxRetries",2,u),this.wa=Za("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new N0(u&&u.concurrentRequestLimit),this.Da=new dA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=X0.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,I){Xe(0),this.W=u,this.H=p||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=ov(this,null,this.W),tc(this)};function vf(u){if(J0(u),u.G==3){var p=u.U++,g=Br(u.I);if(st(g,"SID",u.K),st(g,"RID",p),st(g,"TYPE","terminate"),el(u,g),p=new Pe(u,u.j,p),p.L=2,p.v=Yu(Br(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=av(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Gu(p)}iv(u)}function ec(u){u.g&&(_f(u),u.g.cancel(),u.g=null)}function J0(u){ec(u),u.u&&(a.clearTimeout(u.u),u.u=null),nc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function tc(u){if(!D0(u.h)&&!u.s){u.s=!0;var p=u.Ga;xe||ue(),q||(xe(),q=!0),Z.add(p,u),u.B=0}}function gA(u,p){return j0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kt(m(u.Ga,u,p),sv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Pe(this,this.j,u);let M=this.o;if(this.S&&(M?(M=v(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(O.H=M,M=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=ev(this,O,p),g=Br(this.I),st(g,"RID",u),st(g,"CVER",22),this.D&&st(g,"X-HTTP-Session-Id",this.D),el(this,g),M&&(this.O?p="headers="+encodeURIComponent(String(q0(M)))+"&"+p:this.m&&yf(g,this.m,M)),gf(this.h,O),this.Ua&&st(g,"TYPE","init"),this.P?(st(g,"$req",p),st(g,"SID","null"),O.T=!0,hf(O,g,null)):hf(O,g,p),this.G=2}}else this.G==3&&(u?Z0(this,u):this.i.length==0||D0(this.h)||Z0(this))};function Z0(u,p){var g;p?g=p.l:g=u.U++;const I=Br(u.I);st(I,"SID",u.K),st(I,"RID",g),st(I,"AID",u.T),el(u,I),u.m&&u.o&&yf(I,u.m,u.o),g=new Pe(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ev(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),gf(u.h,g),hf(g,I,p)}function el(u,p){u.H&&L(u.H,function(g,I){st(p,I,g)}),u.l&&M0({},function(g,I){st(p,I,g)})}function ev(u,p,g){g=Math.min(u.i.length,g);var I=u.l?m(u.l.Na,u.l,u):null;e:{var O=u.i;let M=-1;for(;;){const H=["count="+g];M==-1?0<g?(M=O[0].g,H.push("ofs="+M)):M=0:H.push("ofs="+M);let Je=!0;for(let Qt=0;Qt<g;Qt++){let Ve=O[Qt].g;const on=O[Qt].map;if(Ve-=M,0>Ve)M=Math.max(0,O[Qt].g-100),Je=!1;else try{hA(on,H,"req"+Ve+"_")}catch{I&&I(on)}}if(Je){I=H.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,I}function tv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;xe||ue(),q||(xe(),q=!0),Z.add(p,u),u.v=0}}function wf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kt(m(u.Fa,u),sv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,nv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kt(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),ec(this),nv(this))};function _f(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function nv(u){u.g=new Pe(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Br(u.qa);st(p,"RID","rpc"),st(p,"SID",u.K),st(p,"AID",u.T),st(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&st(p,"TO",u.ja),st(p,"TYPE","xmlhttp"),el(u,p),u.m&&u.o&&yf(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Yu(Br(p)),g.m=null,g.P=!0,C0(g,u)}t.Za=function(){this.C!=null&&(this.C=null,ec(this),wf(this),Xe(19))};function nc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function rv(u,p){var g=null;if(u.g==p){nc(u),_f(u),u.g=null;var I=2}else if(mf(u.h,p))g=p.D,O0(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var O=u.B;I=It(),Ft(I,new Vn(I,g)),tc(u)}else tv(u);else if(O=p.s,O==3||O==0&&0<p.X||!(I==1&&gA(u,p)||I==2&&wf(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),O){case 1:_i(u,5);break;case 4:_i(u,10);break;case 3:_i(u,6);break;default:_i(u,2)}}}function sv(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function _i(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),I=u.Xa;const O=!I;I=new wi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ku(I,"https"),Yu(I),O?uA(I.toString(),g):cA(I.toString(),g)}else Xe(2);u.G=0,u.l&&u.l.sa(p),iv(u),J0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function iv(u){if(u.G=0,u.ka=[],u.l){const p=V0(u.h);(p.length!=0||u.i.length!=0)&&(A(u.ka,p),A(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function ov(u,p,g){var I=g instanceof wi?Br(g):new wi(g);if(I.g!="")p&&(I.g=p+"."+I.g),Qu(I,I.s);else{var O=a.location;I=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var M=new wi(null);I&&Ku(M,I),p&&(M.g=p),O&&Qu(M,O),g&&(M.l=g),I=M}return g=u.D,p=u.ya,g&&p&&st(I,g,p),st(I,"VER",u.la),el(u,I),I}function av(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new gt(new Xu({eb:g})):new gt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lv(){}t=lv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rc(){}rc.prototype.g=function(u,p){return new Mn(u,p)};function Mn(u,p){Qe.call(this),this.g=new X0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new vo(this)}_(Mn,Qe),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){vf(this.g)},Mn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Ye(u),u=g);p.i.push(new Zb(p.Ya++,u)),p.G==3&&tc(p)},Mn.prototype.N=function(){this.g.l=null,delete this.j,vf(this.g),delete this.g,Mn.aa.N.call(this)};function uv(u){U.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(uv,U);function cv(){le.call(this),this.status=1}_(cv,le);function vo(u){this.g=u}_(vo,lv),vo.prototype.ua=function(){Ft(this.g,"a")},vo.prototype.ta=function(u){Ft(this.g,new uv(u))},vo.prototype.sa=function(u){Ft(this.g,new cv)},vo.prototype.ra=function(){Ft(this.g,"b")},rc.prototype.createWebChannel=rc.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,OS=function(){return new rc},jS=function(){return It()},DS=te,Pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sn.NO_ERROR=0,sn.TIMEOUT=8,sn.HTTP_ERROR=6,Zc=sn,Q.COMPLETE="complete",NS=Q,xs.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,vl=xs,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,RS=gt}).apply(typeof Ec<"u"?Ec:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new ay("@firebase/firestore");function ul(){return Xi.logLevel}function re(t,...e){if(Xi.logLevel<=Ce.DEBUG){const n=e.map(xy);Xi.debug(`Firestore (${Ua}): ${t}`,...n)}}function ds(t,...e){if(Xi.logLevel<=Ce.ERROR){const n=e.map(xy);Xi.error(`Firestore (${Ua}): ${t}`,...n)}}function Ji(t,...e){if(Xi.logLevel<=Ce.WARN){const n=e.map(xy);Xi.warn(`Firestore (${Ua}): ${t}`,...n)}}function xy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw ds(e),new Error(e)}function qe(t,e){t||pe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class Cj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Pj{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new es,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new es)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string"),new VS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new hn(e)}}class Rj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){qe(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new Dj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Oj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function va(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new Tt(0,0))}static max(){return new me(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class tt extends cu{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const Vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends cu{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return Vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(tt.fromString(e))}static fromName(e){return new ie(tt.fromString(e).popFirst(5))}static empty(){return new ie(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new tt(e.slice()))}}function Mj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new si(s,ie.empty(),e)}function Lj(t){return new si(t.readTime,t.key,-1)}class si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new si(me.min(),ie.empty(),-1)}static max(){return new si(me.max(),ie.empty(),-1)}}function Fj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Uj)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function $j(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ju(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ey.oe=-1;function Dh(t){return t==null}function Bd(t){return t===0&&1/t==-1/0}function Wj(t){return typeof t=="number"&&Number.isInteger(t)&&!Bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i_(this.data.getIterator())}getIteratorFrom(e){return new i_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class i_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Un([])}unionWith(e){let n=new Zt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FS("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(t){if(qe(!!t),typeof t=="string"){let e=0;const n=zj.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sy(t){const e=t.mapValue.fields.__previous_value__;return jh(e)?Sy(e):e}function du(t){const e=ii(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={mapValue:{}};function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jh(t)?4:Gj(t)?9007199254740991:Hj(t)?10:11:pe()}function Or(t,e){if(t===e)return!0;const n=eo(t);if(n!==eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return du(t).isEqual(du(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ii(s.timestampValue),a=ii(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zi(s.bytesValue).isEqual(Zi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return vt(s.geoPointValue.latitude)===vt(i.geoPointValue.latitude)&&vt(s.geoPointValue.longitude)===vt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return vt(s.integerValue)===vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=vt(s.doubleValue),a=vt(i.doubleValue);return o===a?Bd(o)===Bd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return va(t.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(s_(o)!==s_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Or(o[l],a[l])))return!1;return!0}(t,e);default:return pe()}}function hu(t,e){return(t.values||[]).find(n=>Or(n,e))!==void 0}function _a(t,e){if(t===e)return 0;const n=eo(t),r=eo(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=vt(i.integerValue||i.doubleValue),l=vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return o_(t.timestampValue,e.timestampValue);case 4:return o_(du(t),du(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Zi(i),l=Zi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Me(a[c],l[c]);if(h!==0)return h}return Me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Me(vt(i.latitude),vt(o.latitude));return a!==0?a:Me(vt(i.longitude),vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Me(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:a_(y,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ic.mapValue&&o===Ic.mapValue)return 0;if(i===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Me(l[f],h[f]);if(m!==0)return m;const y=_a(a[l[f]],c[h[f]]);if(y!==0)return y}return Me(l.length,h.length)}(t.mapValue,e.mapValue);default:throw pe()}}function o_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=ii(t),r=ii(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function a_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=_a(n[s],r[s]);if(i)return i}return Me(n.length,r.length)}function xa(t){return Rm(t)}function Rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ii(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Rm(n.fields[o])}`;return s+"}"}(t.mapValue):pe()}function $d(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nm(t){return!!t&&"integerValue"in t}function Iy(t){return!!t&&"arrayValue"in t}function l_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ed(t){return!!t&&"mapValue"in t}function Hj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Nl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Gj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=Wt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Nl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ed(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(Nl(this.value))}}function US(t){const e=[];return lo(t.fields,(n,r)=>{const s=new Wt([n]);if(ed(r)){const i=US(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pn(e,0,me.min(),me.min(),me.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new pn(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new pn(e,2,n,me.min(),me.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,me.min(),me.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.position=e,this.inclusive=n}}function c_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=_a(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function d_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Or(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{}class Pt extends BS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Yj(e,n,r):n==="array-contains"?new Zj(e,r):n==="in"?new eO(e,r):n==="not-in"?new tO(e,r):n==="array-contains-any"?new nO(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Xj(e,r):new Jj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_a(n,this.value)):n!==null&&eo(this.value)===eo(n)&&this.matchesComparison(_a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends BS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vr(e,n)}matches(e){return $S(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $S(t){return t.op==="and"}function WS(t){return Qj(t)&&$S(t)}function Qj(t){for(const e of t.filters)if(e instanceof vr)return!1;return!0}function Dm(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(WS(t))return t.filters.map(e=>Dm(e)).join(",");{const e=t.filters.map(n=>Dm(n)).join(",");return`${t.op}(${e})`}}function zS(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Or(r.value,s.value)}(t,e):t instanceof vr?function(r,s){return s instanceof vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zS(o,s.filters[a]),!0):!1}(t,e):void pe()}function qS(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof vr?function(n){return n.op.toString()+" {"+n.getFilters().map(qS).join(" ,")+"}"}(t):"Filter"}class Yj extends Pt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Xj extends Pt{constructor(e,n){super(e,"in",n),this.keys=HS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Jj extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=HS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class Zj extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iy(n)&&hu(n.arrayValue,this.value)}}class eO extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class tO extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!hu(this.value.arrayValue,n)}}class nO extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function h_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rO(t,e,n,r,s,i,o)}function ky(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ue=n}return e.ue}function by(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Kj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d_(t.startAt,e.startAt)&&d_(t.endAt,e.endAt)}function jm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sO(t,e,n,r,s,i,o,a){return new uo(t,e,n,r,s,i,o,a)}function Ay(t){return new uo(t)}function f_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cy(t){return t.collectionGroup!==null}function na(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zt(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new fu(i,r))}),n.has(Wt.keyField().canonicalString())||e.ce.push(new fu(Wt.keyField(),r))}return e.ce}function Rr(t){const e=ge(t);return e.le||(e.le=iO(e,na(t))),e.le}function iO(t,e){if(t.limitType==="F")return h_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new fu(s.field,i)});const n=t.endAt?new Ta(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ta(t.startAt.position,t.startAt.inclusive):null;return h_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Om(t,e){const n=t.filters.concat([e]);return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wd(t,e,n){return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Oh(t,e){return by(Rr(t),Rr(e))&&t.limitType===e.limitType}function GS(t){return`${ky(Rr(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qS(s)).join(", ")}]`),Dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xa(s)).join(",")),`Target(${r})`}(Rr(t))}; limitType=${t.limitType})`}function Vh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of na(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=c_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,na(r),s)||r.endAt&&!function(o,a,l){const c=c_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,na(r),s))}(t,e)}function oO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KS(t){return(e,n)=>{let r=!1;for(const s of na(t)){const i=aO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aO(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?_a(l,c):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new pt(ie.comparator);function hs(){return lO}const QS=new pt(ie.comparator);function wl(...t){let e=QS;for(const n of t)e=e.insert(n.key,n);return e}function YS(t){let e=QS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return Dl()}function XS(){return Dl()}function Dl(){return new Ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const uO=new pt(ie.comparator),cO=new Zt(ie.comparator);function Ae(...t){let e=cO;for(const n of t)e=e.add(n);return e}const dO=new Zt(Me);function hO(){return dO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function JS(t){return{integerValue:""+t}}function ZS(t,e){return Wj(e)?JS(e):Py(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function fO(t,e,n){return t instanceof pu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jh(i)&&(i=Sy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ea?tI(t,e):t instanceof Sa?nI(t,e):function(s,i){const o=eI(s,i),a=p_(o)+p_(s.Pe);return Nm(o)&&Nm(s.Pe)?JS(a):Py(s.serializer,a)}(t,e)}function pO(t,e,n){return t instanceof Ea?tI(t,e):t instanceof Sa?nI(t,e):n}function eI(t,e){return t instanceof mu?function(r){return Nm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pu extends Mh{}class Ea extends Mh{constructor(e){super(),this.elements=e}}function tI(t,e){const n=rI(e);for(const r of t.elements)n.some(s=>Or(s,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends Mh{constructor(e){super(),this.elements=e}}function nI(t,e){let n=rI(e);for(const r of t.elements)n=n.filter(s=>!Or(s,r));return{arrayValue:{values:n}}}class mu extends Mh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function p_(t){return vt(t.integerValue||t.doubleValue)}function rI(t){return Iy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.field=e,this.transform=n}}function mO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ea&&s instanceof Ea||r instanceof Sa&&s instanceof Sa?va(r.elements,s.elements,Or):r instanceof mu&&s instanceof mu?Or(r.Pe,s.Pe):r instanceof pu&&s instanceof pu}(t.transform,e.transform)}class gO{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fh{}function sI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uh(t.key,Tn.none()):new Ou(t.key,t.data,Tn.none());{const n=t.data,r=bn.empty();let s=new Zt(Wt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new pi(t.key,r,new Un(s.toArray()),Tn.none())}}function yO(t,e,n){t instanceof Ou?function(s,i,o){const a=s.value.clone(),l=g_(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof pi?function(s,i,o){if(!td(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=g_(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(iI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jl(t,e,n,r){return t instanceof Ou?function(i,o,a,l){if(!td(i.precondition,o))return a;const c=i.value.clone(),h=y_(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof pi?function(i,o,a,l){if(!td(i.precondition,o))return a;const c=y_(i.fieldTransforms,l,o),h=o.data;return h.setAll(iI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return td(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function vO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=eI(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function m_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&va(r,s,(i,o)=>mO(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ou extends Fh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class pi extends Fh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function g_(t,e,n){const r=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,pO(o,a,n[s]))}return r}function y_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,fO(i,o,e))}return r}class Uh extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wO extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&yO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=sI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(n,r)=>m_(n,r))&&va(this.baseMutations,e.baseMutations,(n,r)=>m_(n,r))}}class Ry{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length);let s=function(){return uO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ry(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Re;function EO(t){switch(t){default:return pe();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function oI(t){if(t===void 0)return ds("GRPC error has no .code"),F.UNKNOWN;switch(t){case bt.OK:return F.OK;case bt.CANCELLED:return F.CANCELLED;case bt.UNKNOWN:return F.UNKNOWN;case bt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case bt.INTERNAL:return F.INTERNAL;case bt.UNAVAILABLE:return F.UNAVAILABLE;case bt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case bt.NOT_FOUND:return F.NOT_FOUND;case bt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case bt.ABORTED:return F.ABORTED;case bt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case bt.DATA_LOSS:return F.DATA_LOSS;default:return pe()}}(Re=bt||(bt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new Fi([4294967295,4294967295],0);function v_(t){const e=SO().encode(t),n=new PS;return n.update(e),new Uint8Array(n.digest())}function w_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fi([n,r],0),new Fi([s,i],0)]}class Ny{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _l(`Invalid padding: ${n}`);if(r<0)throw new _l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _l(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Fi.fromNumber(r)));return s.compare(IO)===1&&(s=new Fi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=v_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ny(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=v_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bh(me.min(),s,new pt(Me),hs(),Ae())}}class Vu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class aI{constructor(e,n){this.targetId=e,this.me=n}}class lI{constructor(e,n,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class __{constructor(){this.fe=0,this.ge=T_(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pe()}}),new Vu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=T_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kO{constructor(e){this.Le=e,this.Be=new Map,this.ke=hs(),this.qe=x_(),this.Qe=new pt(Me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jm(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,pn.newNoDocument(o,me.min()))}else qe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Zi(r).toUint8Array()}catch(l){if(l instanceof FS)return Ji("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ny(o,s,i)}catch(l){return Ji(l instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&jm(a.target)){const l=new ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,pn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ae();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Bh(e,n,this.Qe,this.ke,r);return this.ke=hs(),this.qe=x_(),this.Qe=new pt(Me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new __,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zt(Me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new __),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function x_(){return new pt(ie.comparator)}function T_(){return new pt(ie.comparator)}const bO={asc:"ASCENDING",desc:"DESCENDING"},AO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CO={and:"AND",or:"OR"};class PO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(t,e){return t.useProto3Json||Dh(e)?e:{value:e}}function zd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RO(t,e){return zd(t,e.toTimestamp())}function Nr(t){return qe(!!t),me.fromTimestamp(function(n){const r=ii(n);return new Tt(r.seconds,r.nanos)}(t))}function Dy(t,e){return Mm(t,e).canonicalString()}function Mm(t,e){const n=function(s){return new tt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cI(t){const e=tt.fromString(t);return qe(mI(e)),e}function Lm(t,e){return Dy(t.databaseId,e.path)}function np(t,e){const n=cI(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(hI(n))}function dI(t,e){return Dy(t.databaseId,e)}function NO(t){const e=cI(t);return e.length===4?tt.emptyPath():hI(e)}function Fm(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hI(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function E_(t,e,n){return{name:Lm(t,e),fields:n.value.mapValue.fields}}function DO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(qe(h===void 0||typeof h=="string"),qt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:oI(c.code);return new Y(h,c.message||"")}(o);n=new lI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=np(t,r.document.name),i=Nr(r.document.updateTime),o=r.document.createTime?Nr(r.document.createTime):me.min(),a=new bn({mapValue:{fields:r.document.fields}}),l=pn.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new nd(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=np(t,r.document),i=r.readTime?Nr(r.readTime):me.min(),o=pn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=np(t,r.document),i=r.removedTargetIds||[];n=new nd([],i,s,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new TO(s,i),a=r.targetId;n=new aI(a,o)}}return n}function jO(t,e){let n;if(e instanceof Ou)n={update:E_(t,e.key,e.value)};else if(e instanceof Uh)n={delete:Lm(t,e.key)};else if(e instanceof pi)n={update:E_(t,e.key,e.data),updateMask:WO(e.fieldMask)};else{if(!(e instanceof wO))return pe();n={verify:Lm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof pu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:RO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe()}(t,e.precondition)),n}function OO(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Nr(s.updateTime):Nr(i);return o.isEqual(me.min())&&(o=Nr(i)),new gO(o,s.transformResults||[])}(n,e))):[]}function VO(t,e){return{documents:[dI(t,e.path)]}}function MO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dI(t,s);const i=function(c){if(c.length!==0)return pI(vr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Eo(m.field),direction:UO(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function LO(t){let e=NO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=fI(f);return m instanceof vr&&WS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(_){return new fu(So(_.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Dh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Ta(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Ta(y,m)}(n.endAt)),sO(e,s,o,i,a,"F",l,c)}function FO(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=So(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=So(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=So(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(So(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vr.create(n.compositeFilter.filters.map(r=>fI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function UO(t){return bO[t]}function BO(t){return AO[t]}function $O(t){return CO[t]}function Eo(t){return{fieldPath:t.canonicalString()}}function So(t){return Wt.fromServerFormat(t.fieldPath)}function pI(t){return t instanceof Pt?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NAN"}};if(l_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NAN"}};if(l_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(n.field),op:BO(n.op),value:n.value}}}(t):t instanceof vr?function(n){const r=n.getFilters().map(s=>pI(s));return r.length===1?r[0]:{compositeFilter:{op:$O(n.op),filters:r}}}(t):pe()}function WO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=me.min(),o=me.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.ct=e}}function qO(t){const e=LO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.un=new GO}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(si.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class GO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Zt(tt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Zt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ia(0)}static kn(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jl(r.mutation,s,Un.empty(),Tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=hs();const o=Dl(),a=function(){return Dl()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof pi)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),jl(h.mutation,c,h.mutation.getFieldMask(),Tt.now())):o.set(c.key,Un.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new QO(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Dl();let s=new pt((o,a)=>o-a),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Un.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(s.get(a.batchId)||Ae()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=XS();h.forEach(m=>{if(!i.has(m)){const y=sI(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Oi());let a=-1,l=i;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ae())).next(h=>({batchId:a,changes:YS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=wl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wl();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const c=function(f,m){return new uo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,pn.newInvalidDocument(h)))});let a=wl();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&jl(h.mutation,c,Un.empty(),Tt.now()),Vh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:qO(s.bundledQuery),readTime:Nr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.overlays=new pt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Oi(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new pt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Oi(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Oi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return B.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xO(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.Tr=new Zt(Bt.Er),this.dr=new Zt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new tt([])),r=new Bt(n,e),s=new Bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new tt([])),r=new Bt(n,e),s=new Bt(n,e+1);let i=Ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Me(e.wr,n.wr)}static Ar(e,n){return Me(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zt(Bt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _O(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Me);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new ie(i),0);let a=new Zt(Me);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Bt(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.Mr=e,this.docs=function(){return new pt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=hs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pn.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hs();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Fj(Lj(h),r)<=0||(s.has(h.key)||Vh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){pe()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nV(this)}getSize(e){return B.resolve(this.size)}}class nV extends KO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.persistence=e,this.Nr=new Ba(n=>ky(n),by),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jy,this.targetCount=0,this.kr=Ia.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ey(0),this.Kr=!1,this.Kr=!0,this.$r=new ZO,this.referenceDelegate=e(this),this.Ur=new rV(this),this.indexManager=new HO,this.remoteDocumentCache=function(s){return new tV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zO(n),this.Gr=new XO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new eV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new iV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class iV extends Bj{constructor(e){super(),this.currentSequenceNumber=e}}class Oy{constructor(e){this.persistence=e,this.Jr=new jy,this.Yr=null}static Zr(e){return new Oy(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fN()?8:$j(yn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ul()<=Ce.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(ul()<=Ce.DEBUG&&re("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ul()<=Ce.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(n))):B.resolve())}Yi(e,n){if(f_(n))return B.resolve(null);let r=Rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wd(n,null,"F"),r=Rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Wd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return f_(n)||s.isEqual(me.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(ul()<=Ce.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),To(n)),this.rs(e,o,n,Mj(s,-1)).next(a=>a))})}ts(e,n){let r=new Zt(KS(e));return n.forEach((s,i)=>{Vh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ul()<=Ce.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",To(n)),this.Ji.getDocumentsMatchingQuery(e,n,si.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new pt(Me),this._s=new Ba(i=>ky(i),by),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function uV(t,e,n,r){return new lV(t,e,n,r)}async function gI(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ae();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function cV(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let y=B.resolve();return m.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(E=>{const A=c.docVersions.get(_);qe(A!==null),E.version.compareTo(A)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function yI(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function dV(t,e){const n=ge(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(qt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(E,A,S){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=hs(),c=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(hV(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(me.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function hV(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=hs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function fV(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pV(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Um(t,e,n){const r=ge(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ju(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function S_(t,e,n){const r=ge(t);let s=me.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ge(l),m=f._s.get(h);return m!==void 0?B.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,Rr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:me.min(),n?i:Ae())).next(a=>(mV(r,oO(e),a),{documents:a,Ts:i})))}function mV(t,e,n){let r=t.us.get(e)||me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class I_{constructor(){this.activeTargetIds=hO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gV{constructor(){this.so=new I_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new I_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc=null;function rp(){return kc===null?kc=function(){return 268435456+Math.round(2147483648*Math.random())}():kc++,"0x"+kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class _V extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=rp(),l=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(re("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ji("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=vV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=rp();return new Promise((o,a)=>{const l=new RS;l.setWithCredentials(!0),l.listenOnce(NS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zc.NO_ERROR:const h=l.getResponseJson();re(cn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Zc.TIMEOUT:re(cn,`RPC '${e}' ${i} timed out`),a(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const f=l.getStatus();if(re(cn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const _=function(A){const S=A.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(S)>=0?S:F.UNKNOWN}(y.status);a(new Y(_,y.message))}else a(new Y(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(F.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(cn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);re(cn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=rp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OS(),a=jS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");re(cn,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,y=!1;const _=new wV({Io:A=>{y?re(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(m||(re(cn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),re(cn,`RPC '${e}' stream ${s} sending:`,A),f.send(A))},To:()=>f.close()}),E=(A,S,w)=>{A.listen(S,x=>{try{w(x)}catch(N){setTimeout(()=>{throw N},0)}})};return E(f,vl.EventType.OPEN,()=>{y||(re(cn,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),E(f,vl.EventType.CLOSE,()=>{y||(y=!0,re(cn,`RPC '${e}' stream ${s} transport closed`),_.So())}),E(f,vl.EventType.ERROR,A=>{y||(y=!0,Ji(cn,`RPC '${e}' stream ${s} transport errored:`,A),_.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),E(f,vl.EventType.MESSAGE,A=>{var S;if(!y){const w=A.data[0];qe(!!w);const x=w,N=x.error||((S=x[0])===null||S===void 0?void 0:S.error);if(N){re(cn,`RPC '${e}' stream ${s} received error:`,N);const V=N.status;let L=function(T){const C=bt[T];if(C!==void 0)return oI(C)}(V),k=N.message;L===void 0&&(L=F.INTERNAL,k="Unknown error status: "+V+" with message "+N.message),y=!0,_.So(new Y(L,k)),f.close()}else re(cn,`RPC '${e}' stream ${s} received:`,w),_.bo(w)}}),E(a,DS.STAT_EVENT,A=>{A.stat===Pm.PROXY?re(cn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Pm.NOPROXY&&re(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return new PO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ds(n.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xV extends wI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=DO(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Nr(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=jm(l)?{documents:VO(i,l)}:{query:MO(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uI(i,o.resumeToken);const c=Vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=zd(i,o.snapshotVersion.toTimestamp());const c=Vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=FO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fm(this.serializer),n.removeTarget=e,this.a_(n)}}class TV extends wI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=OO(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jO(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Mm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ds(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{co(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ge(l);c.L_.add(4),await Mu(c),c.q_.set("Unknown"),c.L_.delete(4),await Wh(c)}(this))})}),this.q_=new SV(r,s)}}async function Wh(t){if(co(t))for(const e of t.B_)await e(!0)}async function Mu(t){for(const e of t.B_)await e(!1)}function _I(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Uy(n)?Fy(n):$a(n).r_()&&Ly(n,e))}function My(t,e){const n=ge(t),r=$a(n);n.N_.delete(e),r.r_()&&xI(n,e),n.N_.size===0&&(r.r_()?r.o_():co(n)&&n.q_.set("Unknown"))}function Ly(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$a(t).A_(e)}function xI(t,e){t.Q_.xe(e),$a(t).R_(e)}function Fy(t){t.Q_=new kO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$a(t).start(),t.q_.v_()}function Uy(t){return co(t)&&!$a(t).n_()&&t.N_.size>0}function co(t){return ge(t).L_.size===0}function TI(t){t.Q_=void 0}async function kV(t){t.q_.set("Online")}async function bV(t){t.N_.forEach((e,n)=>{Ly(t,e)})}async function AV(t,e){TI(t),Uy(t)?(t.q_.M_(e),Fy(t)):t.q_.set("Unknown")}async function CV(t,e,n){if(t.q_.set("Online"),e instanceof lI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qd(t,r)}else if(e instanceof nd?t.Q_.Ke(e):e instanceof aI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await yI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(qt.EMPTY_BYTE_STRING,h.snapshotVersion)),xI(i,l);const f=new Bs(h.target,l,c,h.sequenceNumber);Ly(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await qd(t,r)}}async function qd(t,e,n){if(!ju(e))throw e;t.L_.add(1),await Mu(t),t.q_.set("Offline"),n||(n=()=>yI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wh(t)})}function EI(t,e){return e().catch(n=>qd(t,n,e))}async function zh(t){const e=ge(t),n=oi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PV(e);)try{const s=await fV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,RV(e,s)}catch(s){await qd(e,s)}SI(e)&&II(e)}function PV(t){return co(t)&&t.O_.length<10}function RV(t,e){t.O_.push(e);const n=oi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function SI(t){return co(t)&&!oi(t).n_()&&t.O_.length>0}function II(t){oi(t).start()}async function NV(t){oi(t).p_()}async function DV(t){const e=oi(t);for(const n of t.O_)e.m_(n.mutations)}async function jV(t,e,n){const r=t.O_.shift(),s=Ry.from(r,e,n);await EI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zh(t)}async function OV(t,e){e&&oi(t).V_&&await async function(r,s){if(function(o){return EO(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();oi(r).s_(),await EI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zh(r)}}(t,e),SI(t)&&II(t)}async function b_(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=co(n);n.L_.add(3),await Mu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wh(n)}async function VV(t,e){const n=ge(t);e?(n.L_.delete(2),await Wh(n)):e||(n.L_.add(2),await Mu(n),n.q_.set("Unknown"))}function $a(t){return t.K_||(t.K_=function(n,r,s){const i=ge(n);return i.w_(),new xV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:kV.bind(null,t),Ro:bV.bind(null,t),mo:AV.bind(null,t),d_:CV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Uy(t)?Fy(t):t.q_.set("Unknown")):(await t.K_.stop(),TI(t))})),t.K_}function oi(t){return t.U_||(t.U_=function(n,r,s){const i=ge(n);return i.w_(),new TV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NV.bind(null,t),mo:OV.bind(null,t),f_:DV.bind(null,t),g_:jV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zh(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new By(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $y(t,e){if(ds("AsyncQueue",`${e}: ${t}`),ju(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new ra(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.W_=new pt(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ka{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ka(e,n,ra.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class LV{constructor(){this.queries=C_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ge(n),i=s.queries;s.queries=C_(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function C_(){return new Ba(t=>GS(t),Oh)}async function kI(t,e){const n=ge(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new MV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=$y(o,`Initialization of query '${To(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Wy(n)}async function bI(t,e){const n=ge(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FV(t,e){const n=ge(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Wy(n)}function UV(t,e,n){const r=ge(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Wy(t){t.Y_.forEach(e=>{e.next()})}var Bm,P_;(P_=Bm||(Bm={})).ea="default",P_.Cache="cache";class AI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.key=e}}class PI{constructor(e){this.key=e}}class BV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=KS(e),this.Ra=new ra(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new A_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Vh(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;m&&y?m.data.isEqual(y.data)?_!==E&&(r.track({type:3,doc:y}),A=!0):this.ga(m,y)||(r.track({type:2,doc:y}),A=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(l||c)&&(a=!0)),A&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,_){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return E(y)-E(_)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ka(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new A_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new CI(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $V{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WV{constructor(e){this.key=e,this.va=!1}}class zV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ba(a=>GS(a),Oh),this.Ma=new Map,this.xa=new Set,this.Oa=new pt(ie.comparator),this.Na=new Map,this.La=new jy,this.Ba={},this.ka=new Map,this.qa=Ia.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qV(t,e,n=!0){const r=VI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await RI(r,e,n,!0),s}async function HV(t,e){const n=VI(t);await RI(n,e,!0,!1)}async function RI(t,e,n,r){const s=await pV(t.localStore,Rr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await GV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&_I(t.remoteStore,s),a}async function GV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(E,A,S,w){let x=A.view.ma(S);x.ns&&(x=await S_(E.localStore,A.query,!1).then(({documents:k})=>A.view.ma(k,x)));const N=w&&w.targetChanges.get(A.targetId),V=w&&w.targetMismatches.get(A.targetId)!=null,L=A.view.applyChanges(x,E.isPrimaryClient,N,V);return N_(E,A.targetId,L.wa),L.snapshot}(t,f,m,y);const i=await S_(t.localStore,e,!0),o=new BV(e,i.Ts),a=o.ma(i.documents),l=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);N_(t,n,c.wa);const h=new $V(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function KV(t,e,n){const r=ge(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Oh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Um(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&My(r.remoteStore,s.targetId),$m(r,s.targetId)}).catch(Du)):($m(r,s.targetId),await Um(r.localStore,s.targetId,!0))}async function QV(t,e){const n=ge(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),My(n.remoteStore,r.targetId))}async function YV(t,e,n){const r=rM(t);try{const s=await function(o,a){const l=ge(o),c=Tt.now(),h=a.reduce((y,_)=>y.add(_.key),Ae());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=hs(),E=Ae();return l.cs.getEntries(y,h).next(A=>{_=A,_.forEach((S,w)=>{w.isValidDocument()||(E=E.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(A=>{f=A;const S=[];for(const w of a){const x=vO(w,f.get(w.key).overlayedDocument);x!=null&&S.push(new pi(w.key,x,US(x.value.mapValue),Tn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,S,a)}).next(A=>{m=A;const S=A.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(y,A.batchId,S)})}).then(()=>({batchId:m.batchId,changes:YS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new pt(Me)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Lu(r,s.changes),await zh(r.remoteStore)}catch(s){const i=$y(s,"Failed to persist write");n.reject(i)}}async function NI(t,e){const n=ge(t);try{const r=await dV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?qe(o.va):s.removedDocuments.size>0&&(qe(o.va),o.va=!1))}),await Lu(n,r,e)}catch(r){await Du(r)}}function R_(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ge(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&Wy(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XV(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new pt(ie.comparator);o=o.insert(i,pn.newNoDocument(i,me.min()));const a=Ae().add(i),l=new Bh(me.min(),new Map,new pt(Me),o,a);await NI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),zy(r)}else await Um(r.localStore,e,!1).then(()=>$m(r,e,n)).catch(Du)}async function JV(t,e){const n=ge(t),r=e.batch.batchId;try{const s=await cV(n.localStore,e);jI(n,r,null),DI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(n,s)}catch(s){await Du(s)}}async function ZV(t,e,n){const r=ge(t);try{const s=await function(o,a){const l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(qe(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);jI(r,e,n),DI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lu(r,s)}catch(s){await Du(s)}}function DI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jI(t,e,n){const r=ge(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||OI(t,r)})}function OI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(My(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zy(t))}function N_(t,e,n){for(const r of n)r instanceof CI?(t.La.addReference(r.key,e),eM(t,r)):r instanceof PI?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||OI(t,r.key)):pe()}function eM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),zy(t))}function zy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(tt.fromString(e)),r=t.qa.next();t.Na.set(r,new WV(n)),t.Oa=t.Oa.insert(n,r),_I(t.remoteStore,new Bs(Rr(Ay(n.path)),r,"TargetPurposeLimboResolution",Ey.oe))}}async function Lu(t,e,n){const r=ge(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Vy.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ge(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>B.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!ju(f))throw f;re("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),_=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(m,E)}}}(r.localStore,i))}async function tM(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await gI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(n,r.hs)}}function nM(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let s=Ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function VI(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XV.bind(null,e),e.Ca.d_=FV.bind(null,e.eventManager),e.Ca.$a=UV.bind(null,e.eventManager),e}function rM(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZV.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return uV(this.persistence,new aV,e.initialUser,this.serializer)}Ga(e){return new sV(Oy.Zr,this.serializer)}Wa(e){return new gV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class Wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>R_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tM.bind(null,this.syncEngine),await VV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LV}()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),r=function(i){return new _V(i)}(e.databaseInfo);return function(i,o,a,l){return new EV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new IV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>R_(this.syncEngine,n,0),function(){return k_.D()?new k_:new yV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const f=new zV(s,i,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ge(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Mu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=hn.UNAUTHENTICATED,this.clientId=Ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$y(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ip(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iM(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>b_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>b_(e.remoteStore,s)),t._onlineComponents=e}async function iM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ji("Error using user provided cache. Falling back to memory cache: "+n),await ip(t,new Hd)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await ip(t,new Hd);return t._offlineComponents}async function LI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await D_(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await D_(t,new Wm))),t._onlineComponents}function oM(t){return LI(t).then(e=>e.syncEngine)}async function FI(t){const e=await LI(t),n=e.eventManager;return n.onListen=qV.bind(null,e.syncEngine),n.onUnlisten=KV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QV.bind(null,e.syncEngine),n}function aM(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new MI({next:m=>{h.Za(),o.enqueueAndForget(()=>bI(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new AI(Ay(a.path),h,{includeMetadataChanges:!0,_a:!0});return kI(i,f)}(await FI(t),t.asyncQueue,e,n,r)),r.promise}function lM(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new MI({next:m=>{h.Za(),o.enqueueAndForget(()=>bI(i,f)),m.fromCache&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new AI(a,h,{includeMetadataChanges:!0,_a:!0});return kI(i,f)}(await FI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $I(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function O_(t){if(!ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function V_(t){if(ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qh(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uM(t,e){if(e<=0)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MS;switch(r.type){case"firstParty":return new Nj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j_.get(n);r&&(re("ComponentProvider","Removing Datastore"),j_.delete(n),r.terminate())}(this),Promise.resolve()}}function WI(t,e,n,r={}){var s;const i=(t=Wn(t,Hh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=hn.MOCK_USER;else{a=oN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(c)}t._authCredentials=new Cj(new VS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class ts extends Lr{constructor(e,n,r){super(e,n,Ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ie(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function K(t,e,...n){if(t=Nt(t),BI("collection","path",e),t instanceof Hh){const r=tt.fromString(e,...n);return V_(r),new ts(t,null,r)}{if(!(t instanceof mn||t instanceof ts))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return V_(r),new ts(t.firestore,null,r)}}function W(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=Ty.newId()),BI("doc","path",e),t instanceof Hh){const r=tt.fromString(e,...n);return O_(r),new mn(t,null,new ie(r))}{if(!(t instanceof mn||t instanceof ts))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return O_(r),new mn(t.firestore,t instanceof ts?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vI(this,"async_queue_retry"),this.Vu=()=>{const r=sp();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new es;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ju(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ds("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=By.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class gs extends Hh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new L_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}}function zI(t,e){const n=typeof t=="object"?t:H1(),r=typeof t=="string"?t:"(default)",s=uy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sN("firestore");i&&WI(s,...i)}return s}function Fu(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cM(t),t._firestoreClient}function cM(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new qj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sM(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(qt.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new to(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=/^__.*__$/;class hM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ou(e,this.data,n,this.fieldTransforms)}}class qI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Qh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HI(this.Cu)&&dM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$h(e)}Qu(e,n,r,s=!1){return new Qh({Cu:e,methodName:n,qu:r,path:Wt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function za(t){const e=t._freezeSettings(),n=$h(t._databaseId);return new fM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qy(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Yy("Data must be an object, but it was:",o,r);const a=XI(r,o);let l,c;if(i.merge)l=new Un(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=zm(e,f,n);if(!o.contains(m))throw new Y(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZI(h,m)||h.push(m)}l=new Un(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new hM(new bn(a),l,c)}class Yh extends mi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}function GI(t,e,n){return new Qh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hy extends mi{_toFieldTransform(e){return new Lh(e.path,new pu)}isEqual(e){return e instanceof Hy}}class Gy extends mi{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=GI(this,e,!0),r=this.Ku.map(i=>ho(i,n)),s=new Ea(r);return new Lh(e.path,s)}isEqual(e){return e instanceof Gy&&ma(this.Ku,e.Ku)}}class Ky extends mi{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=GI(this,e,!0),r=this.Ku.map(i=>ho(i,n)),s=new Sa(r);return new Lh(e.path,s)}isEqual(e){return e instanceof Ky&&ma(this.Ku,e.Ku)}}class Qy extends mi{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new mu(e.serializer,ZS(e.serializer,this.$u));return new Lh(e.path,n)}isEqual(e){return e instanceof Qy&&this.$u===e.$u}}function KI(t,e,n,r){const s=t.Qu(1,e,n);Yy("Data must be an object, but it was:",s,r);const i=[],o=bn.empty();lo(r,(l,c)=>{const h=Xy(e,l,n);c=Nt(c);const f=s.Nu(h);if(c instanceof Yh)i.push(h);else{const m=ho(c,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new Un(i);return new qI(o,a,s.fieldTransforms)}function QI(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[zm(e,r,n)],l=[s];if(i.length%2!=0)throw new Y(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(zm(e,i[m])),l.push(i[m+1]);const c=[],h=bn.empty();for(let m=a.length-1;m>=0;--m)if(!ZI(c,a[m])){const y=a[m];let _=l[m];_=Nt(_);const E=o.Nu(y);if(_ instanceof Yh)c.push(y);else{const A=ho(_,E);A!=null&&(c.push(y),h.set(y,A))}}const f=new Un(c);return new qI(h,f,o.fieldTransforms)}function YI(t,e,n,r=!1){return ho(n,t.Qu(r?4:3,e))}function ho(t,e){if(JI(t=Nt(t)))return Yy("Unsupported field value:",e,t),XI(t,e);if(t instanceof mi)return function(r,s){if(!HI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ho(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Tt.fromDate(r);return{timestampValue:zd(s.serializer,i)}}if(r instanceof Tt){const i=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zd(s.serializer,i)}}if(r instanceof Gh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof to)return{bytesValue:uI(s.serializer,r._byteString)};if(r instanceof mn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kh)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Py(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${qh(r)}`)}(t,e)}function XI(t,e){const n={};return LS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,s)=>{const i=ho(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function JI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Gh||t instanceof to||t instanceof mn||t instanceof mi||t instanceof Kh)}function Yy(t,e,n){if(!JI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=qh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zm(t,e,n){if((e=Nt(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return Xy(t,e);throw Gd("Field path arguments must be of type string or ",t,!1,void 0,n)}const pM=new RegExp("[~\\*/\\[\\]]");function Xy(t,e,n){if(e.search(pM)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wa(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(F.INVALID_ARGUMENT,a+t+l)}function ZI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mM extends Jy{data(){return super.data()}}function Xh(t,e){return typeof e=="string"?Xy(t,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zy{}class Uu extends Zy{}function se(t,e,...n){let r=[];e instanceof Zy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Jh).length,a=i.filter(l=>l instanceof Bu).length;if(o>1||o>0&&a>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Bu extends Uu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bu(e,n,r)}_apply(e){const n=this._parse(e);return tk(e._query,n),new Lr(e.firestore,e.converter,Om(e._query,n))}_parse(e){const n=za(e.firestore);return function(i,o,a,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){U_(f,h);const y=[];for(const _ of f)y.push(F_(l,i,_));m={arrayValue:{values:y}}}else m=F_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||U_(f,h),m=YI(a,o,f,h==="in"||h==="not-in");return Pt.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function J(t,e,n){const r=e,s=Xh("where",t);return Bu._create(s,r,n)}class Jh extends Zy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)tk(o,l),o=Om(o,l)}(e._query,n),new Lr(e.firestore,e.converter,Om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zh extends Uu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zh(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(i,o)}(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new uo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Mt(t,e="asc"){const n=e,r=Xh("orderBy",t);return Zh._create(r,n)}class ef extends Uu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ef(e,n,r)}_apply(e){return new Lr(e.firestore,e.converter,Wd(e._query,this._limit,this._limitType))}}function Rt(t){return uM("limit",t),ef._create("limit",t,"F")}class tf extends Uu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new tf(e,n,r)}_apply(e){const n=yM(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,function(s,i){return new uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function ek(...t){return tf._create("startAfter",t,!1)}function yM(t,e,n,r){if(n[0]=Nt(n[0]),n[0]instanceof Jy)return function(i,o,a,l,c){if(!l)throw new Y(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of na(i))if(f.field.isKeyField())h.push($d(o,l.key));else{const m=l.data.field(f.field);if(jh(m))throw new Y(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=f.field.canonicalString();throw new Y(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ta(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=za(t.firestore);return function(o,a,l,c,h,f){const m=o.explicitOrderBy;if(h.length>m.length)throw new Y(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let _=0;_<h.length;_++){const E=h[_];if(m[_].field.isKeyField()){if(typeof E!="string")throw new Y(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!Cy(o)&&E.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const A=o.path.child(tt.fromString(E));if(!ie.isDocumentKey(A))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const S=new ie(A);y.push($d(a,S))}else{const A=YI(l,c,E);y.push(A)}}return new Ta(y,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function F_(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cy(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tt.fromString(n));if(!ie.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $d(t,new ie(r))}if(n instanceof mn)return $d(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(n)}.`)}function U_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tk(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nk{convertValue(e,n="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>vt(o.doubleValue));return new Kh(i)}convertGeoPoint(e){return new Gh(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const n=ii(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);qe(mI(r));const s=new wa(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||ds(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class t0 extends Jy{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ol extends t0{data(e={}){return super.data(e)}}class rk{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ol(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ol(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ol(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vM(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){t=Wn(t,mn);const e=Wn(t.firestore,gs);return aM(Fu(e),t._key).then(n=>wM(e,t,n))}class sk extends nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function oe(t){t=Wn(t,Lr);const e=Wn(t.firestore,gs),n=Fu(e),r=new sk(e);return gM(t._query),lM(n,t._query).then(s=>new rk(e,r,t,s))}function Kd(t,e,n){t=Wn(t,mn);const r=Wn(t.firestore,gs),s=e0(t.converter,e,n);return qa(r,[qy(za(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tn.none())])}function _e(t,e,n,...r){t=Wn(t,mn);const s=Wn(t.firestore,gs),i=za(s);let o;return o=typeof(e=Nt(e))=="string"||e instanceof Wa?QI(i,"updateDoc",t._key,e,n,r):KI(i,"updateDoc",t._key,e),qa(s,[o.toMutation(t._key,Tn.exists(!0))])}function en(t){return qa(Wn(t.firestore,gs),[new Uh(t._key,Tn.none())])}function Et(t,e){const n=Wn(t.firestore,gs),r=W(t),s=e0(t.converter,e);return qa(n,[qy(za(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function qa(t,e){return function(r,s){const i=new es;return r.asyncQueue.enqueueAndForget(async()=>YV(await oM(r),s,i)),i.promise}(Fu(t),e)}function wM(t,e,n){const r=n.docs.get(e._key),s=new sk(t);return new t0(t,s,e._key,r,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=za(e)}set(e,n,r){this._verifyNotCommitted();const s=op(e,this._firestore),i=e0(s.converter,n,r),o=qy(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Tn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=op(e,this._firestore);let o;return o=typeof(n=Nt(n))=="string"||n instanceof Wa?QI(this._dataReader,"WriteBatch.update",i._key,n,r,s):KI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=op(e,this._firestore);return this._mutations=this._mutations.concat(new Uh(n._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function op(t,e){if((t=Nt(t)).firestore!==e)throw new Y(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function X(){return new Hy("serverTimestamp")}function sa(...t){return new Gy("arrayUnion",t)}function Bo(...t){return new Ky("arrayRemove",t)}function kr(t){return new Qy("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){return Fu(t=Wn(t,gs)),new ik(t,e=>qa(t,e))}(function(e,n=!0){(function(s){Ua=s})(Ma),ga(new Qi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new gs(new Pj(r.getProvider("auth-internal")),new jj(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zs(r_,"4.7.3",e),Zs(r_,"4.7.3","esm2017")})();const _M=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:nk,Bytes:to,CollectionReference:ts,DocumentReference:mn,DocumentSnapshot:t0,FieldPath:Wa,FieldValue:mi,Firestore:gs,FirestoreError:Y,GeoPoint:Gh,Query:Lr,QueryCompositeFilterConstraint:Jh,QueryConstraint:Uu,QueryDocumentSnapshot:Ol,QueryFieldFilterConstraint:Bu,QueryLimitConstraint:ef,QueryOrderByConstraint:Zh,QuerySnapshot:rk,QueryStartAtConstraint:tf,SnapshotMetadata:Uo,Timestamp:Tt,VectorValue:Kh,WriteBatch:ik,_AutoId:Ty,_ByteString:qt,_DatabaseId:wa,_DocumentKey:ie,_EmptyAuthCredentialsProvider:MS,_FieldPath:Wt,_cast:Wn,_logWarn:Ji,_validateIsNotUsedTogether:$I,addDoc:Et,arrayRemove:Bo,arrayUnion:sa,collection:K,connectFirestoreEmulator:WI,deleteDoc:en,doc:W,ensureFirestoreConfigured:Fu,executeWrite:qa,getDoc:Le,getDocs:oe,getFirestore:zI,increment:kr,limit:Rt,orderBy:Mt,query:se,serverTimestamp:X,setDoc:Kd,startAfter:ek,updateDoc:_e,where:J,writeBatch:Ui},Symbol.toStringTag,{value:"Module"}));var xM="firebase",TM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(xM,TM,"app");const EM={apiKey:"AIzaSyDV6I7Z6uGqgT8EPwTR3dr2w2xo6aoWqI4",authDomain:"benchonly-7d92a.firebaseapp.com",projectId:"benchonly-7d92a",storageBucket:"benchonly-7d92a.firebasestorage.app",messagingSenderId:"461193748919",appId:"1:461193748919:web:4268cfef7783562e374832"},ok=q1(EM),Io=CS(ok),Qd=new Hr;Qd.setCustomParameters({prompt:"select_account"});const j=zI(ok),SM=Object.freeze(Object.defineProperty({__proto__:null,auth:Io,db:j,googleProvider:Qd},Symbol.toStringTag,{value:"Module"}));let ba=!1;var jc,hT;try{ba=!!((hT=(jc=window==null?void 0:window.Capacitor)==null?void 0:jc.isNativePlatform)!=null&&hT.call(jc))}catch{ba=!1}const B_=ba;var Oc,fT;ba&&((fT=(Oc=window==null?void 0:window.Capacitor)==null?void 0:Oc.getPlatform)==null||fT.call(Oc));var Vc,pT;ba&&((pT=(Vc=window==null?void 0:window.Capacitor)==null?void 0:Vc.getPlatform)==null||pT.call(Vc));const IM="https://benchpressonly.com",ak=ba?`${IM}/.netlify/functions`:"/.netlify/functions";function a9(t){return`${ak}/${t}`}const lk=b.createContext({}),wr=()=>b.useContext(lk),kM={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null},bM={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null,role:"member",groups:["sample-group"],settings:{notifications:!0,units:"lbs",theme:"dark"}},AM=()=>[{id:"sample-1",userId:"guest-user",name:"Heavy Bench Day",date:new Date(Date.now()-1*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"275",prescribedReps:"5",actualWeight:"275",actualReps:"5",rpe:"7"},{prescribedWeight:"285",prescribedReps:"5",actualWeight:"285",actualReps:"5",rpe:"8"},{prescribedWeight:"295",prescribedReps:"3",actualWeight:"295",actualReps:"4",rpe:"9"}]},{id:2,name:"Close Grip Bench",sets:[{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"7"},{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"8"}]}]},{id:"sample-2",userId:"guest-user",name:"Volume Day",date:new Date(Date.now()-3*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"6"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"7",rpe:"8"}]}]},{id:"sample-3",userId:"guest-user",name:"Accessory Work",date:new Date(Date.now()-5*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Incline Dumbbell Press",sets:[{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"10",rpe:"7"},{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"9",rpe:"8"}]},{id:2,name:"Tricep Pushdown",sets:[{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"6"},{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"7"}]}]},{id:"sample-scheduled",userId:"guest-user",name:"Tomorrow's Workout",date:new Date(Date.now()+1*24*60*60*1e3),status:"scheduled",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"280",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"290",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"300",prescribedReps:"3",actualWeight:"",actualReps:"",rpe:""}]}]}],CM=[{id:"goal-1",userId:"guest-user",lift:"Bench Press",startWeight:275,currentWeight:295,targetWeight:315,targetDate:new Date(Date.now()+60*24*60*60*1e3).toISOString().split("T")[0],status:"active"},{id:"goal-2",userId:"guest-user",lift:"Close Grip Bench",startWeight:185,currentWeight:205,targetWeight:225,targetDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],status:"active"}];function uk({children:t}){const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0),[a,l]=b.useState(!1),[c,h]=b.useState(null),[f,m]=b.useState(null);b.useEffect(()=>{const v=mD(Io,async T=>{if(T){n(T),l(!1);const C=W(j,"users",T.uid),R=await Le(C);if(R.exists()){const D=R.data();s(D),D.credits==null&&(await _e(W(j,"users",T.uid),{credits:50}),D.credits=50,s({...D,credits:50}))}else{const D={uid:T.uid,email:T.email,displayName:T.displayName,photoURL:T.photoURL,createdAt:X(),lastActive:X(),role:"member",groups:[],credits:0,onboardingComplete:!1,settings:{notifications:!0,units:"lbs",theme:"dark"}};await Kd(C,D),s(D)}}else a||(n(null),s(null));o(!1)});return()=>v()},[a]),b.useEffect(()=>{B_&&zD(Io).catch(v=>{(v==null?void 0:v.code)!=="auth/redirect-cancelled-by-user"&&console.error("[Auth] Redirect result error:",v.message)})},[]);const y=async()=>{try{if(B_)return await $D(Io,Qd),{success:!0};const v=await VD(Io,Qd);return l(!1),{success:!0,user:v.user}}catch(v){return console.error("Google sign in error:",v),(v==null?void 0:v.code)==="auth/popup-closed-by-user"||(v==null?void 0:v.code)==="auth/cancelled-popup-request"?{success:!1,error:"cancelled"}:{success:!1,error:v.message}}},_=()=>(n(kM),s(bM),l(!0),o(!1),{success:!0}),E=async()=>{try{return a?(n(null),s(null),l(!1),{success:!0}):(await gD(Io),{success:!0})}catch(v){return console.error("Sign out error:",v),{success:!1,error:v.message}}},A=(e==null?void 0:e.email)==="charltonuw@gmail.com"&&!a,S=A&&!c,w=async v=>{if(A)try{const T=W(j,"users",v),C=await Le(T);if(!C.exists())return;const R={...C.data(),uid:v};h({uid:v,email:R.email,displayName:R.displayName,photoURL:R.photoURL}),m(R)}catch(T){console.error("Impersonation error:",T)}},x=()=>{h(null),m(null)},k={user:c?{...e,uid:c.uid,email:c.email,displayName:c.displayName,photoURL:c.photoURL}:e,userProfile:c?f:r,realUser:e,realUserProfile:r,loading:i,isGuest:a,isAppAdmin:S,isRealAdmin:A,impersonating:c,startImpersonating:w,stopImpersonating:x,signInWithGoogle:y,signInAsGuest:_,signOut:E,updateProfile:async v=>{if(!e)return{success:!1,error:"Not authenticated"};if(a)return s(T=>({...T,...v})),{success:!0};try{const T=c?c.uid:e.uid,C=W(j,"users",T);return await Kd(C,{...v,lastActive:X()},{merge:!0}),c?m(R=>({...R,...v})):s(R=>({...R,...v})),{success:!0}}catch(T){return console.error("Update profile error:",T),{success:!1,error:T.message}}},isAuthenticated:!!e};return d.jsx(lk.Provider,{value:k,children:t})}const l9=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:uk,SAMPLE_GOALS:CM,getSampleWorkouts:AM,useAuth:wr},Symbol.toStringTag,{value:"Module"})),PM="modulepreload",RM=function(t){return"/"+t},$_={},He=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=RM(l),l in $_)return;$_[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":PM,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ck=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),nf=b.createContext({}),rf=b.createContext(null),sf=typeof document<"u",n0=sf?b.useLayoutEffect:b.useEffect,dk=b.createContext({strict:!1}),r0=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),NM="framerAppearId",hk="data-"+r0(NM);function DM(t,e,n,r){const{visualElement:s}=b.useContext(nf),i=b.useContext(dk),o=b.useContext(rf),a=b.useContext(ck).reducedMotion,l=b.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;b.useInsertionEffect(()=>{c&&c.update(n,o)});const h=b.useRef(!!(n[hk]&&!window.HandoffComplete));return n0(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),b.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function $o(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function jM(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):$o(n)&&(n.current=r))},[e])}function gu(t){return typeof t=="string"||Array.isArray(t)}function of(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const s0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i0=["initial",...s0];function af(t){return of(t.animate)||i0.some(e=>gu(t[e]))}function fk(t){return!!(af(t)||t.variants)}function OM(t,e){if(af(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gu(n)?n:void 0,animate:gu(r)?r:void 0}}return t.inherit!==!1?e:{}}function VM(t){const{initial:e,animate:n}=OM(t,b.useContext(nf));return b.useMemo(()=>({initial:e,animate:n}),[W_(e),W_(n)])}function W_(t){return Array.isArray(t)?t.join(" "):t}const z_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yu={};for(const t in z_)yu[t]={isEnabled:e=>z_[t].some(n=>!!e[n])};function MM(t){for(const e in t)yu[e]={...yu[e],...t[e]}}const o0=b.createContext({}),pk=b.createContext({}),LM=Symbol.for("motionComponentSymbol");function FM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&MM(t);function i(a,l){let c;const h={...b.useContext(ck),...a,layoutId:UM(a)},{isStatic:f}=h,m=VM(a),y=r(a,f);if(!f&&sf){m.visualElement=DM(s,y,h,e);const _=b.useContext(pk),E=b.useContext(dk).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,E,t,_))}return b.createElement(nf.Provider,{value:m},c&&m.visualElement?b.createElement(c,{visualElement:m.visualElement,...h}):null,n(s,a,jM(y,m.visualElement,l),y,f,m.visualElement))}const o=b.forwardRef(i);return o[LM]=s,o}function UM({layoutId:t}){const e=b.useContext(o0).id;return e&&t!==void 0?e+"-"+t:t}function BM(t){function e(r,s={}){return FM(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const $M=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function a0(t){return typeof t!="string"||t.includes("-")?!1:!!($M.indexOf(t)>-1||/[A-Z]/.test(t))}const Yd={};function WM(t){Object.assign(Yd,t)}const $u=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fo=new Set($u);function mk(t,{layout:e,layoutId:n}){return fo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yd[t]||t==="opacity")}const Dn=t=>!!(t&&t.getVelocity),zM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qM=$u.length;function HM(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<qM;o++){const a=$u[o];if(t[a]!==void 0){const l=zM[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const gk=t=>e=>typeof e=="string"&&e.startsWith(t),yk=gk("--"),qm=gk("var(--"),GM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,KM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ai=(t,e,n)=>Math.min(Math.max(n,t),e),po={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vl={...po,transform:t=>ai(0,1,t)},bc={...po,default:1},Ml=t=>Math.round(t*1e5)/1e5,lf=/(-)?([\d]*\.?[\d])+/g,vk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,QM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Wu(t){return typeof t=="string"}const zu=t=>({test:e=>Wu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),As=zu("deg"),Dr=zu("%"),ce=zu("px"),YM=zu("vh"),XM=zu("vw"),q_={...Dr,parse:t=>Dr.parse(t)/100,transform:t=>Dr.transform(t*100)},H_={...po,transform:Math.round},wk={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,size:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,rotate:As,rotateX:As,rotateY:As,rotateZ:As,scale:bc,scaleX:bc,scaleY:bc,scaleZ:bc,skew:As,skewX:As,skewY:As,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Vl,originX:q_,originY:q_,originZ:ce,zIndex:H_,fillOpacity:Vl,strokeOpacity:Vl,numOctaves:H_};function l0(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const f in e){const m=e[f];if(yk(f)){i[f]=m;continue}const y=wk[f],_=KM(m,y);if(fo.has(f)){if(l=!0,o[f]=_,!h)continue;m!==(y.default||0)&&(h=!1)}else f.startsWith("origin")?(c=!0,a[f]=_):s[f]=_}if(e.transform||(l||r?s.transform=HM(t.transform,n,h,r):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:y=0}=a;s.transformOrigin=`${f} ${m} ${y}`}}const u0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _k(t,e,n){for(const r in e)!Dn(e[r])&&!mk(r,n)&&(t[r]=e[r])}function JM({transformTemplate:t},e,n){return b.useMemo(()=>{const r=u0();return l0(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function ZM(t,e,n){const r=t.style||{},s={};return _k(s,r,t),Object.assign(s,JM(t,e,n)),t.transformValues?t.transformValues(s):s}function e4(t,e,n){const r={},s=ZM(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const t4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||t4.has(t)}let xk=t=>!Xd(t);function n4(t){t&&(xk=e=>e.startsWith("on")?!Xd(e):t(e))}try{n4(require("@emotion/is-prop-valid").default)}catch{}function r4(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(xk(s)||n===!0&&Xd(s)||!e&&!Xd(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function G_(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function s4(t,e,n){const r=G_(e,t.x,t.width),s=G_(n,t.y,t.height);return`${r} ${s}`}const i4={offset:"stroke-dashoffset",array:"stroke-dasharray"},o4={offset:"strokeDashoffset",array:"strokeDasharray"};function a4(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?i4:o4;t[i.offset]=ce.transform(-r);const o=ce.transform(e),a=ce.transform(n);t[i.array]=`${o} ${a}`}function c0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f,m){if(l0(t,c,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_,dimensions:E}=t;y.transform&&(E&&(_.transform=y.transform),delete y.transform),E&&(s!==void 0||i!==void 0||_.transform)&&(_.transformOrigin=s4(E,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&a4(y,o,a,l,!1)}const Tk=()=>({...u0(),attrs:{}}),d0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function l4(t,e,n,r){const s=b.useMemo(()=>{const i=Tk();return c0(i,e,{enableHardwareAcceleration:!1},d0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};_k(i,t.style,t),s.style={...i,...s.style}}return s}function u4(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(a0(n)?l4:e4)(r,i,o,n),h={...r4(r,typeof n=="string",t),...l,ref:s},{children:f}=r,m=b.useMemo(()=>Dn(f)?f.get():f,[f]);return b.createElement(n,{...h,children:m})}}function Ek(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Sk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ik(t,e,n,r){Ek(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Sk.has(s)?s:r0(s),e.attrs[s])}function h0(t,e){const{style:n}=t,r={};for(const s in n)(Dn(n[s])||e.style&&Dn(e.style[s])||mk(s,t))&&(r[s]=n[s]);return r}function kk(t,e){const n=h0(t,e);for(const r in t)if(Dn(t[r])||Dn(e[r])){const s=$u.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function f0(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function bk(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Jd=t=>Array.isArray(t),c4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),d4=t=>Jd(t)?t[t.length-1]||0:t;function rd(t){const e=Dn(t)?t.get():t;return c4(e)?e.toValue():e}function h4({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:f4(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Ak=t=>(e,n)=>{const r=b.useContext(nf),s=b.useContext(rf),i=()=>h4(t,e,r,s);return n?i():bk(i)};function f4(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=rd(i[m]);let{initial:o,animate:a}=t;const l=af(t),c=fk(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!of(f)&&(Array.isArray(f)?f:[f]).forEach(y=>{const _=f0(t,y);if(!_)return;const{transitionEnd:E,transition:A,...S}=_;for(const w in S){let x=S[w];if(Array.isArray(x)){const N=h?x.length-1:0;x=x[N]}x!==null&&(s[w]=x)}for(const w in E)s[w]=E[w]}),s}const _t=t=>t;class K_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function p4(t){let e=new K_,n=new K_,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const f=h&&s,m=f?e:n;return c&&o.add(l),m.add(l)&&f&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Ac=["prepare","read","update","preRender","render","postRender"],m4=40;function g4(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Ac.reduce((f,m)=>(f[m]=p4(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,m4),1),s.timestamp=f,s.isProcessing=!0,Ac.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Ac.reduce((f,m)=>{const y=i[m];return f[m]=(_,E=!1,A=!1)=>(n||l(),y.schedule(_,E,A)),f},{}),cancel:f=>Ac.forEach(m=>i[m].cancel(f)),state:s,steps:i}}const{schedule:rt,cancel:fs,state:dn,steps:ap}=g4(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),y4={useVisualState:Ak({scrapeMotionValuesFromProps:kk,createRenderState:Tk,onMount:(t,e,{renderState:n,latestValues:r})=>{rt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),rt.render(()=>{c0(n,r,{enableHardwareAcceleration:!1},d0(e.tagName),t.transformTemplate),Ik(e,n)})}})},v4={useVisualState:Ak({scrapeMotionValuesFromProps:h0,createRenderState:u0})};function w4(t,{forwardMotionProps:e=!1},n,r){return{...a0(t)?y4:v4,preloadedFeatures:n,useRender:u4(e),createVisualElement:r,Component:t}}function Jr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Ck=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function uf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const _4=t=>e=>Ck(e)&&t(e,uf(e));function ns(t,e,n,r){return Jr(t,e,_4(n),r)}const x4=(t,e)=>n=>e(t(n)),ti=(...t)=>t.reduce(x4);function Pk(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Q_=Pk("dragHorizontal"),Y_=Pk("dragVertical");function Rk(t){let e=!1;if(t==="y")e=Y_();else if(t==="x")e=Q_();else{const n=Q_(),r=Y_();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Nk(){const t=Rk(!0);return t?(t(),!1):!0}class gi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function X_(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Nk())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&rt.update(()=>a[r](i,o))};return ns(t.current,n,s,{passive:!t.getProps()[r]})}class T4 extends gi{mount(){this.unmount=ti(X_(this.node,!0),X_(this.node,!1))}unmount(){}}class E4 extends gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ti(Jr(this.node.current,"focus",()=>this.onFocus()),Jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Dk=(t,e)=>e?t===e?!0:Dk(t,e.parentElement):!1;function lp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,uf(n))}class S4 extends gi{constructor(){super(...arguments),this.removeStartListeners=_t,this.removeEndListeners=_t,this.removeAccessibleListeners=_t,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=ns(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:f}=this.node.getProps();rt.update(()=>{!f&&!Dk(this.node.current,a.target)?h&&h(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=ns(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ti(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||lp("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&rt.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=Jr(this.node.current,"keyup",o),lp("down",(a,l)=>{this.startPress(a,l)})},n=Jr(this.node.current,"keydown",e),r=()=>{this.isPressing&&lp("cancel",(i,o)=>this.cancelPress(i,o))},s=Jr(this.node.current,"blur",r);this.removeAccessibleListeners=ti(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&rt.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Nk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&rt.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ns(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Jr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ti(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hm=new WeakMap,up=new WeakMap,I4=t=>{const e=Hm.get(t.target);e&&e(t)},k4=t=>{t.forEach(I4)};function b4({root:t,...e}){const n=t||document;up.has(n)||up.set(n,{});const r=up.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(k4,{root:t,...e})),r[s]}function A4(t,e,n){const r=b4(e);return Hm.set(t,n),r.observe(t),()=>{Hm.delete(t),r.unobserve(t)}}const C4={some:0,all:1};class P4 extends gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:C4[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=c?h:f;m&&m(l)};return A4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(R4(e,n))&&this.startObserver()}unmount(){}}function R4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const N4={inView:{Feature:P4},tap:{Feature:S4},focus:{Feature:E4},hover:{Feature:T4}};function jk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function D4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function j4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function cf(t,e,n){const r=t.getProps();return f0(r,e,n!==void 0?n:r.custom,D4(t),j4(t))}let p0=_t;const Bi=t=>t*1e3,rs=t=>t/1e3,O4={current:!1},Ok=t=>Array.isArray(t)&&typeof t[0]=="number";function Vk(t){return!!(!t||typeof t=="string"&&Mk[t]||Ok(t)||Array.isArray(t)&&t.every(Vk))}const xl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Mk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xl([0,.65,.55,1]),circOut:xl([.55,0,1,.45]),backIn:xl([.31,.01,.66,-.59]),backOut:xl([.33,1.53,.69,.99])};function Lk(t){if(t)return Ok(t)?xl(t):Array.isArray(t)?t.map(Lk):Mk[t]}function V4(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=Lk(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function M4(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Fk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,L4=1e-7,F4=12;function U4(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Fk(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>L4&&++a<F4);return o}function qu(t,e,n,r){if(t===e&&n===r)return _t;const s=i=>U4(i,0,1,t,n);return i=>i===0||i===1?i:Fk(s(i),e,r)}const B4=qu(.42,0,1,1),$4=qu(0,0,.58,1),Uk=qu(.42,0,.58,1),W4=t=>Array.isArray(t)&&typeof t[0]!="number",Bk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$k=t=>e=>1-t(1-e),m0=t=>1-Math.sin(Math.acos(t)),Wk=$k(m0),z4=Bk(m0),zk=qu(.33,1.53,.69,.99),g0=$k(zk),q4=Bk(g0),H4=t=>(t*=2)<1?.5*g0(t):.5*(2-Math.pow(2,-10*(t-1))),G4={linear:_t,easeIn:B4,easeInOut:Uk,easeOut:$4,circIn:m0,circInOut:z4,circOut:Wk,backIn:g0,backInOut:q4,backOut:zk,anticipate:H4},J_=t=>{if(Array.isArray(t)){p0(t.length===4);const[e,n,r,s]=t;return qu(e,n,r,s)}else if(typeof t=="string")return G4[t];return t},y0=(t,e)=>n=>!!(Wu(n)&&QM.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qk=(t,e,n)=>r=>{if(!Wu(r))return r;const[s,i,o,a]=r.match(lf);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},K4=t=>ai(0,255,t),cp={...po,transform:t=>Math.round(K4(t))},Vi={test:y0("rgb","red"),parse:qk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cp.transform(t)+", "+cp.transform(e)+", "+cp.transform(n)+", "+Ml(Vl.transform(r))+")"};function Q4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Gm={test:y0("#"),parse:Q4,transform:Vi.transform},Wo={test:y0("hsl","hue"),parse:qk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Dr.transform(Ml(e))+", "+Dr.transform(Ml(n))+", "+Ml(Vl.transform(r))+")"},wn={test:t=>Vi.test(t)||Gm.test(t)||Wo.test(t),parse:t=>Vi.test(t)?Vi.parse(t):Wo.test(t)?Wo.parse(t):Gm.parse(t),transform:t=>Wu(t)?t:t.hasOwnProperty("red")?Vi.transform(t):Wo.transform(t)},dt=(t,e,n)=>-n*t+n*e+t;function dp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=dp(l,a,t+1/3),i=dp(l,a,t),o=dp(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const hp=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},X4=[Gm,Vi,Wo],J4=t=>X4.find(e=>e.test(t));function Z_(t){const e=J4(t);let n=e.parse(t);return e===Wo&&(n=Y4(n)),n}const Hk=(t,e)=>{const n=Z_(t),r=Z_(e),s={...n};return i=>(s.red=hp(n.red,r.red,i),s.green=hp(n.green,r.green,i),s.blue=hp(n.blue,r.blue,i),s.alpha=dt(n.alpha,r.alpha,i),Vi.transform(s))};function Z4(t){var e,n;return isNaN(t)&&Wu(t)&&(((e=t.match(lf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(vk))===null||n===void 0?void 0:n.length)||0)>0}const Gk={regex:GM,countKey:"Vars",token:"${v}",parse:_t},Kk={regex:vk,countKey:"Colors",token:"${c}",parse:wn.parse},Qk={regex:lf,countKey:"Numbers",token:"${n}",parse:po.parse};function fp(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Zd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&fp(n,Gk),fp(n,Kk),fp(n,Qk),n}function Yk(t){return Zd(t).values}function Xk(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Zd(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(Gk.token,o[l]):l<r+n?a=a.replace(Kk.token,wn.transform(o[l])):a=a.replace(Qk.token,Ml(o[l]));return a}}const eL=t=>typeof t=="number"?0:t;function tL(t){const e=Yk(t);return Xk(t)(e.map(eL))}const li={test:Z4,parse:Yk,createTransformer:Xk,getAnimatableNone:tL},Jk=(t,e)=>n=>`${n>0?e:t}`;function Zk(t,e){return typeof t=="number"?n=>dt(t,e,n):wn.test(t)?Hk(t,e):t.startsWith("var(")?Jk(t,e):tb(t,e)}const eb=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>Zk(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},nL=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Zk(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},tb=(t,e)=>{const n=li.createTransformer(e),r=Zd(t),s=Zd(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ti(eb(r.values,s.values),n):Jk(t,e)},vu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ex=(t,e)=>n=>dt(t,e,n);function rL(t){return typeof t=="number"?ex:typeof t=="string"?wn.test(t)?Hk:tb:Array.isArray(t)?eb:typeof t=="object"?nL:ex}function sL(t,e,n){const r=[],s=n||rL(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||_t:e;a=ti(l,a)}r.push(a)}return r}function nb(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(p0(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=sL(e,r,s),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=vu(t[h],t[h+1],c);return o[h](f)};return n?c=>l(ai(t[0],t[i-1],c)):l}function iL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=vu(0,e,r);t.push(dt(n,1,s))}}function oL(t){const e=[0];return iL(e,t.length-1),e}function aL(t,e){return t.map(n=>n*e)}function lL(t,e){return t.map(()=>e||Uk).splice(0,t.length-1)}function eh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=W4(r)?r.map(J_):J_(r),i={done:!1,value:e[0]},o=aL(n&&n.length===e.length?n:oL(e),t),a=nb(o,e,{ease:Array.isArray(s)?s:lL(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function rb(t,e){return e?t*(1e3/e):0}const uL=5;function sb(t,e,n){const r=Math.max(e-uL,0);return rb(n-t(r),e-r)}const pp=.001,cL=.01,dL=10,hL=.05,fL=1;function pL({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=ai(hL,fL,o),t=ai(cL,dL,rs(t)),o<1?(s=c=>{const h=c*o,f=h*t,m=h-n,y=Km(c,o),_=Math.exp(-f);return pp-m/y*_},i=c=>{const f=c*o*t,m=f*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-f),E=Km(Math.pow(c,2),o);return(-s(c)+pp>0?-1:1)*((m-y)*_)/E}):(s=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-pp+h*f},i=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=gL(s,i,a);if(t=Bi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const mL=12;function gL(t,e,n){let r=n;for(let s=1;s<mL;s++)r=r-t(r)/e(r);return r}function Km(t,e){return t*Math.sqrt(1-e*e)}const yL=["duration","bounce"],vL=["stiffness","damping","mass"];function tx(t,e){return e.some(n=>t[n]!==void 0)}function wL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!tx(t,vL)&&tx(t,yL)){const n=pL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function ib({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:h,velocity:f,isResolvedFromDuration:m}=wL({...r,velocity:-rs(r.velocity||0)}),y=f||0,_=l/(2*Math.sqrt(a*c)),E=i-s,A=rs(Math.sqrt(a/c)),S=Math.abs(E)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let w;if(_<1){const x=Km(A,_);w=N=>{const V=Math.exp(-_*A*N);return i-V*((y+_*A*E)/x*Math.sin(x*N)+E*Math.cos(x*N))}}else if(_===1)w=x=>i-Math.exp(-A*x)*(E+(y+A*E)*x);else{const x=A*Math.sqrt(_*_-1);w=N=>{const V=Math.exp(-_*A*N),L=Math.min(x*N,300);return i-V*((y+_*A*E)*Math.sinh(L)+x*E*Math.cosh(L))/x}}return{calculatedDuration:m&&h||null,next:x=>{const N=w(x);if(m)o.done=x>=h;else{let V=y;x!==0&&(_<1?V=sb(w,x,N):V=0);const L=Math.abs(V)<=n,k=Math.abs(i-N)<=e;o.done=L&&k}return o.value=o.done?i:N,o}}}function nx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=v=>a!==void 0&&v<a||l!==void 0&&v>l,_=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let E=n*e;const A=f+E,S=o===void 0?A:o(A);S!==A&&(E=S-f);const w=v=>-E*Math.exp(-v/r),x=v=>S+w(v),N=v=>{const T=w(v),C=x(v);m.done=Math.abs(T)<=c,m.value=m.done?S:C};let V,L;const k=v=>{y(m.value)&&(V=v,L=ib({keyframes:[m.value,_(m.value)],velocity:sb(x,v,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return k(0),{calculatedDuration:null,next:v=>{let T=!1;return!L&&V===void 0&&(T=!0,N(v),k(v)),V!==void 0&&v>V?L.next(v-V):(!T&&N(v),m)}}}const _L=t=>{const e=({timestamp:n})=>t(n);return{start:()=>rt.update(e,!0),stop:()=>fs(e),now:()=>dn.isProcessing?dn.timestamp:performance.now()}},rx=2e4;function sx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<rx;)e+=n,r=t.next(e);return e>=rx?1/0:e}const xL={decay:nx,inertia:nx,tween:eh,keyframes:eh,spring:ib};function th({autoplay:t=!0,delay:e=0,driver:n=_L,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:f,...m}){let y=1,_=!1,E,A;const S=()=>{A=new Promise(ne=>{E=ne})};S();let w;const x=xL[s]||eh;let N;x!==eh&&typeof r[0]!="number"&&(N=nb([0,100],r,{clamp:!1}),r=[0,100]);const V=x({...m,keyframes:r});let L;a==="mirror"&&(L=x({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let k="idle",v=null,T=null,C=null;V.calculatedDuration===null&&i&&(V.calculatedDuration=sx(V));const{calculatedDuration:R}=V;let D=1/0,P=1/0;R!==null&&(D=R+o,P=D*(i+1)-o);let ke=0;const lt=ne=>{if(T===null)return;y>0&&(T=Math.min(T,ne)),y<0&&(T=Math.min(ne-P/y,T)),v!==null?ke=v:ke=Math.round(ne-T)*y;const Se=ke-e*(y>=0?1:-1),Ke=y>=0?Se<0:Se>P;ke=Math.max(Se,0),k==="finished"&&v===null&&(ke=P);let nn=ke,Ht=V;if(i){const In=Math.min(ke,P)/D;let On=Math.floor(In),rn=In%1;!rn&&In>=1&&(rn=1),rn===1&&On--,On=Math.min(On,i+1),!!(On%2)&&(a==="reverse"?(rn=1-rn,o&&(rn-=o/D)):a==="mirror"&&(Ht=L)),nn=ai(0,1,rn)*D}const ut=Ke?{done:!1,value:r[0]}:Ht.next(nn);N&&(ut.value=N(ut.value));let{done:et}=ut;!Ke&&R!==null&&(et=y>=0?ke>=P:ke<=0);const ys=v===null&&(k==="finished"||k==="running"&&et);return f&&f(ut.value),ys&&q(),ut},Ne=()=>{w&&w.stop(),w=void 0},xe=()=>{k="idle",Ne(),E(),S(),T=C=null},q=()=>{k="finished",h&&h(),Ne(),E()},Z=()=>{if(_)return;w||(w=n(lt));const ne=w.now();l&&l(),v!==null?T=ne-v:(!T||k==="finished")&&(T=ne),k==="finished"&&S(),C=T,v=null,k="running",w.start()};t&&Z();const ue={then(ne,Se){return A.then(ne,Se)},get time(){return rs(ke)},set time(ne){ne=Bi(ne),ke=ne,v!==null||!w||y===0?v=ne:T=w.now()-ne/y},get duration(){const ne=V.calculatedDuration===null?sx(V):V.calculatedDuration;return rs(ne)},get speed(){return y},set speed(ne){ne===y||!w||(y=ne,ue.time=rs(ke))},get state(){return k},play:Z,pause:()=>{k="paused",v=ke},stop:()=>{_=!0,k!=="idle"&&(k="idle",c&&c(),xe())},cancel:()=>{C!==null&&lt(C),xe()},complete:()=>{k="finished"},sample:ne=>(T=0,lt(ne))};return ue}function TL(t){let e;return()=>(e===void 0&&(e=t()),e)}const EL=TL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),SL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Cc=10,IL=2e4,kL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Vk(e.ease);function bL(t,e,{onUpdate:n,onComplete:r,...s}){if(!(EL()&&SL.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const h=()=>{l=new Promise(x=>{a=x})};h();let{keyframes:f,duration:m=300,ease:y,times:_}=s;if(kL(e,s)){const x=th({...s,repeat:0,delay:0});let N={done:!1,value:f[0]};const V=[];let L=0;for(;!N.done&&L<IL;)N=x.sample(L),V.push(N.value),L+=Cc;_=void 0,f=V,m=L-Cc,y="linear"}const E=V4(t.owner.current,e,f,{...s,duration:m,ease:y,times:_}),A=()=>{c=!1,E.cancel()},S=()=>{c=!0,rt.update(A),a(),h()};return E.onfinish=()=>{c||(t.set(M4(f,s)),r&&r(),S())},{then(x,N){return l.then(x,N)},attachTimeline(x){return E.timeline=x,E.onfinish=null,_t},get time(){return rs(E.currentTime||0)},set time(x){E.currentTime=Bi(x)},get speed(){return E.playbackRate},set speed(x){E.playbackRate=x},get duration(){return rs(m)},play:()=>{o||(E.play(),fs(A))},pause:()=>E.pause(),stop:()=>{if(o=!0,E.playState==="idle")return;const{currentTime:x}=E;if(x){const N=th({...s,autoplay:!1});t.setWithVelocity(N.sample(x-Cc).value,N.sample(x).value,Cc)}S()},complete:()=>{c||E.finish()},cancel:S}}function AL({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_t,pause:_t,stop:_t,then:i=>(i(),Promise.resolve()),cancel:_t,complete:_t});return e?th({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const CL={type:"spring",stiffness:500,damping:25,restSpeed:10},PL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),RL={type:"keyframes",duration:.8},NL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DL=(t,{keyframes:e})=>e.length>2?RL:fo.has(t)?t.startsWith("scale")?PL(e[1]):CL:NL,Qm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(li.test(e)||e==="0")&&!e.startsWith("url(")),jL=new Set(["brightness","contrast","saturate","opacity"]);function OL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(lf)||[];if(!r)return t;const s=n.replace(r,"");let i=jL.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const VL=/([a-z-]*)\(.*?\)/g,Ym={...li,getAnimatableNone:t=>{const e=t.match(VL);return e?e.map(OL).join(" "):t}},ML={...wk,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:Ym,WebkitFilter:Ym},v0=t=>ML[t];function ob(t,e){let n=v0(t);return n!==Ym&&(n=li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ab=t=>/^0[^.\s]+$/.test(t);function LL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||ab(t)}function FL(t,e,n,r){const s=Qm(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),LL(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];i[h]=ob(e,a)}return i}function UL({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function w0(t,e){return t[e]||t.default||t}const BL={skipAnimations:!1},_0=(t,e,n,r={})=>s=>{const i=w0(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Bi(o);const l=FL(e,t,n,i),c=l[0],h=l[l.length-1],f=Qm(t,c),m=Qm(t,h);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:_=>{e.set(_),i.onUpdate&&i.onUpdate(_)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(UL(i)||(y={...y,...DL(t,y)}),y.duration&&(y.duration=Bi(y.duration)),y.repeatDelay&&(y.repeatDelay=Bi(y.repeatDelay)),!f||!m||O4.current||i.type===!1||BL.skipAnimations)return AL(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=bL(e,t,y);if(_)return _}return th(y)};function nh(t){return!!(Dn(t)&&t.add)}const lb=t=>/^\-?\d*\.?\d+$/.test(t);function x0(t,e){t.indexOf(e)===-1&&t.push(e)}function T0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class E0{constructor(){this.subscriptions=[]}add(e){return x0(this.subscriptions,e),()=>T0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $L=t=>!isNaN(parseFloat(t));class WL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=dn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,rt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>rt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=$L(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new E0);const r=this.events[e].add(n);return e==="change"?()=>{r(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?rb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Aa(t,e){return new WL(t,e)}const ub=t=>e=>e.test(t),zL={test:t=>t==="auto",parse:t=>t},cb=[po,ce,Dr,As,XM,YM,zL],cl=t=>cb.find(ub(t)),qL=[...cb,wn,li],HL=t=>qL.find(ub(t));function GL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Aa(n))}function KL(t,e){const n=cf(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=d4(i[o]);GL(t,o,a)}}function QL(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),h!=null&&(typeof h=="string"&&(lb(h)||ab(h))?h=parseFloat(h):!HL(h)&&li.test(c)&&(h=ob(l,c)),t.addValue(l,Aa(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function YL(t,e){return e?(e[t]||e.default||e).from:void 0}function XL(t,e,n){const r={};for(const s in t){const i=YL(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function JL({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZL(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function db(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const m=t.getValue(f),y=a[f];if(!m||y===void 0||h&&JL(h,f))continue;const _={delay:n,elapsed:0,...w0(i||{},f)};if(window.HandoffAppearAnimations){const S=t.getProps()[hk];if(S){const w=window.HandoffAppearAnimations(S,f,m,rt);w!==null&&(_.elapsed=w,_.isHandoff=!0)}}let E=!_.isHandoff&&!ZL(m,y);if(_.type==="spring"&&(m.getVelocity()||_.velocity)&&(E=!1),m.animation&&(E=!1),E)continue;m.start(_0(f,m,y,t.shouldReduceMotion&&fo.has(f)?{type:!1}:_));const A=m.animation;nh(l)&&(l.add(f),A.then(()=>l.remove(f))),c.push(A)}return o&&Promise.all(c).then(()=>{o&&KL(t,o)}),c}function Xm(t,e,n={}){const r=cf(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(db(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return e5(t,e,c+l,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function e5(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(t5).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Xm(c,e,{...i,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function t5(t,e){return t.sortNodePosition(e)}function n5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Xm(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Xm(t,e,n);else{const s=typeof e=="function"?cf(t,e,n.custom):e;r=Promise.all(db(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const r5=[...s0].reverse(),s5=s0.length;function i5(t){return e=>Promise.all(e.map(({animation:n,options:r})=>n5(t,n,r)))}function o5(t){let e=i5(t);const n=l5();let r=!0;const s=(l,c)=>{const h=cf(t,c);if(h){const{transition:f,transitionEnd:m,...y}=h;l={...l,...y,...m}}return l};function i(l){e=l(t)}function o(l,c){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],y=new Set;let _={},E=1/0;for(let S=0;S<s5;S++){const w=r5[S],x=n[w],N=h[w]!==void 0?h[w]:f[w],V=gu(N),L=w===c?x.isActive:null;L===!1&&(E=S);let k=N===f[w]&&N!==h[w]&&V;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),x.protectedKeys={..._},!x.isActive&&L===null||!N&&!x.prevProp||of(N)||typeof N=="boolean")continue;let T=a5(x.prevProp,N)||w===c&&x.isActive&&!k&&V||S>E&&V,C=!1;const R=Array.isArray(N)?N:[N];let D=R.reduce(s,{});L===!1&&(D={});const{prevResolvedValues:P={}}=x,ke={...P,...D},lt=Ne=>{T=!0,y.has(Ne)&&(C=!0,y.delete(Ne)),x.needsAnimating[Ne]=!0};for(const Ne in ke){const xe=D[Ne],q=P[Ne];if(_.hasOwnProperty(Ne))continue;let Z=!1;Jd(xe)&&Jd(q)?Z=!jk(xe,q):Z=xe!==q,Z?xe!==void 0?lt(Ne):y.add(Ne):xe!==void 0&&y.has(Ne)?lt(Ne):x.protectedKeys[Ne]=!0}x.prevProp=N,x.prevResolvedValues=D,x.isActive&&(_={..._,...D}),r&&t.blockInitialAnimation&&(T=!1),T&&(!k||C)&&m.push(...R.map(Ne=>({animation:Ne,options:{type:w,...l}})))}if(y.size){const S={};y.forEach(w=>{const x=t.getBaseTarget(w);x!==void 0&&(S[w]=x)}),m.push({animation:S})}let A=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(m):Promise.resolve()}function a(l,c,h){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(l,c)}),n[l].isActive=c;const m=o(h,l);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function a5(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jk(e,t):!1}function xi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function l5(){return{animate:xi(!0),whileInView:xi(),whileHover:xi(),whileTap:xi(),whileDrag:xi(),whileFocus:xi(),exit:xi()}}class u5 extends gi{constructor(e){super(e),e.animationState||(e.animationState=o5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),of(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let c5=0;class d5 extends gi{constructor(){super(...arguments),this.id=c5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const h5={animation:{Feature:u5},exit:{Feature:d5}},ix=(t,e)=>Math.abs(t-e);function f5(t,e){const n=ix(t.x,e.x),r=ix(t.y,e.y);return Math.sqrt(n**2+r**2)}class hb{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=gp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=f5(f.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:_}=f,{timestamp:E}=dn;this.history.push({..._,timestamp:E});const{onStart:A,onMove:S}=this.handlers;m||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=mp(m,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=gp(f.type==="pointercancel"?this.lastMoveEventInfo:mp(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,A),_&&_(f,A)},!Ck(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=uf(e),a=mp(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=dn;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,gp(a,this.history)),this.removeListeners=ti(ns(this.contextWindow,"pointermove",this.handlePointerMove),ns(this.contextWindow,"pointerup",this.handlePointerUp),ns(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function mp(t,e){return e?{point:e(t.point)}:t}function ox(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gp({point:t},e){return{point:t,delta:ox(t,fb(e)),offset:ox(t,p5(e)),velocity:m5(e,.1)}}function p5(t){return t[0]}function fb(t){return t[t.length-1]}function m5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=fb(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Bi(e)));)n--;if(!r)return{x:0,y:0};const i=rs(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function zn(t){return t.max-t.min}function Jm(t,e=0,n=.01){return Math.abs(t-e)<=n}function ax(t,e,n,r=.5){t.origin=r,t.originPoint=dt(e.min,e.max,t.origin),t.scale=zn(n)/zn(e),(Jm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=dt(n.min,n.max,t.origin)-t.originPoint,(Jm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ll(t,e,n,r){ax(t.x,e.x,n.x,r?r.originX:void 0),ax(t.y,e.y,n.y,r?r.originY:void 0)}function lx(t,e,n){t.min=n.min+e.min,t.max=t.min+zn(e)}function g5(t,e,n){lx(t.x,e.x,n.x),lx(t.y,e.y,n.y)}function ux(t,e,n){t.min=e.min-n.min,t.max=t.min+zn(e)}function Fl(t,e,n){ux(t.x,e.x,n.x),ux(t.y,e.y,n.y)}function y5(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?dt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?dt(n,t,r.max):Math.min(t,n)),t}function cx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function v5(t,{top:e,left:n,bottom:r,right:s}){return{x:cx(t.x,n,s),y:cx(t.y,e,r)}}function dx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function w5(t,e){return{x:dx(t.x,e.x),y:dx(t.y,e.y)}}function _5(t,e){let n=.5;const r=zn(t),s=zn(e);return s>r?n=vu(e.min,e.max-r,t.min):r>s&&(n=vu(t.min,t.max-s,e.min)),ai(0,1,n)}function x5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Zm=.35;function T5(t=Zm){return t===!1?t=0:t===!0&&(t=Zm),{x:hx(t,"left","right"),y:hx(t,"top","bottom")}}function hx(t,e,n){return{min:fx(t,e),max:fx(t,n)}}function fx(t,e){return typeof t=="number"?t:t[e]||0}const px=()=>({translate:0,scale:1,origin:0,originPoint:0}),zo=()=>({x:px(),y:px()}),mx=()=>({min:0,max:0}),At=()=>({x:mx(),y:mx()});function Yn(t){return[t("x"),t("y")]}function pb({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function E5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function S5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yp(t){return t===void 0||t===1}function eg({scale:t,scaleX:e,scaleY:n}){return!yp(t)||!yp(e)||!yp(n)}function bi(t){return eg(t)||mb(t)||t.z||t.rotate||t.rotateX||t.rotateY}function mb(t){return gx(t.x)||gx(t.y)}function gx(t){return t&&t!=="0%"}function rh(t,e,n){const r=t-n,s=e*r;return n+s}function yx(t,e,n,r,s){return s!==void 0&&(t=rh(t,s,r)),rh(t,n,r)+e}function tg(t,e=0,n=1,r,s){t.min=yx(t.min,e,n,r,s),t.max=yx(t.max,e,n,r,s)}function gb(t,{x:e,y:n}){tg(t.x,e.translate,e.scale,e.originPoint),tg(t.y,n.translate,n.scale,n.originPoint)}function I5(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&qo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,gb(t,o)),r&&bi(i.latestValues)&&qo(t,i.latestValues))}e.x=vx(e.x),e.y=vx(e.y)}function vx(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Rs(t,e){t.min=t.min+e,t.max=t.max+e}function wx(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=dt(t.min,t.max,i);tg(t,e[n],e[r],o,e.scale)}const k5=["x","scaleX","originX"],b5=["y","scaleY","originY"];function qo(t,e){wx(t.x,e,k5),wx(t.y,e,b5)}function yb(t,e){return pb(S5(t.getBoundingClientRect(),e))}function A5(t,e,n){const r=yb(t,n),{scroll:s}=e;return s&&(Rs(r.x,s.offset.x),Rs(r.y,s.offset.y)),r}const vb=({current:t})=>t?t.ownerDocument.defaultView:null,C5=new WeakMap;class P5{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uf(h,"page").point)},i=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:_}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Rk(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(A=>{let S=this.getAxisMotionValue(A).get()||0;if(Dr.test(S)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[A];x&&(S=zn(x)*(parseFloat(S)/100))}}this.originPoint[A]=S}),_&&rt.update(()=>_(h,f),!1,!0);const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:_,onDrag:E}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:A}=f;if(y&&this.currentDirection===null){this.currentDirection=R5(A),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),E&&E(h,f)},a=(h,f)=>this.stop(h,f),l=()=>Yn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new hb(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:vb(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&rt.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Pc(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=y5(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&$o(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=v5(s.layoutBox,n):this.constraints=!1,this.elastic=T5(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Yn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=x5(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$o(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=A5(r,s.root,this.visualElement.getTransformPagePoint());let o=w5(s.layout.layoutBox,i);if(n){const a=n(E5(o));this.hasMutatedConstraints=!!a,a&&(o=pb(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Yn(h=>{if(!Pc(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(_0(e,r,0,n))}stopAnimation(){Yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Yn(n=>{const{drag:r}=this.getProps();if(!Pc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-dt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$o(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Yn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=_5({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yn(o=>{if(!Pc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(dt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;C5.set(this.visualElement,this);const e=this.visualElement.current,n=ns(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$o(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Jr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Zm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Pc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function R5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class N5 extends gi{constructor(e){super(e),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new P5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const _x=t=>(e,n)=>{t&&rt.update(()=>t(e,n))};class D5 extends gi{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(e){this.session=new hb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:_x(e),onStart:_x(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&rt.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=ns(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function j5(){const t=b.useContext(rf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=b.useId();return b.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=xx(t,e.target.x),r=xx(t,e.target.y);return`${n}% ${r}%`}},O5={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=li.parse(t);if(s.length>5)return r;const i=li.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=dt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class V5 extends Eu.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;WM(M5),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||rt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wb(t){const[e,n]=j5(),r=b.useContext(o0);return Eu.createElement(V5,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(pk),isPresent:e,safeToRemove:n})}const M5={borderRadius:{...dl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dl,borderTopRightRadius:dl,borderBottomLeftRadius:dl,borderBottomRightRadius:dl,boxShadow:O5},_b=["TopLeft","TopRight","BottomLeft","BottomRight"],L5=_b.length,Tx=t=>typeof t=="string"?parseFloat(t):t,Ex=t=>typeof t=="number"||ce.test(t);function F5(t,e,n,r,s,i){s?(t.opacity=dt(0,n.opacity!==void 0?n.opacity:1,U5(r)),t.opacityExit=dt(e.opacity!==void 0?e.opacity:1,0,B5(r))):i&&(t.opacity=dt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<L5;o++){const a=`border${_b[o]}Radius`;let l=Sx(e,a),c=Sx(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Ex(l)===Ex(c)?(t[a]=Math.max(dt(Tx(l),Tx(c),r),0),(Dr.test(c)||Dr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=dt(e.rotate||0,n.rotate||0,r))}function Sx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const U5=xb(0,.5,Wk),B5=xb(.5,.95,_t);function xb(t,e,n){return r=>r<t?0:r>e?1:n(vu(t,e,r))}function Ix(t,e){t.min=e.min,t.max=e.max}function Qn(t,e){Ix(t.x,e.x),Ix(t.y,e.y)}function kx(t,e,n,r,s){return t-=e,t=rh(t,1/n,r),s!==void 0&&(t=rh(t,1/s,r)),t}function $5(t,e=0,n=1,r=.5,s,i=t,o=t){if(Dr.test(e)&&(e=parseFloat(e),e=dt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dt(i.min,i.max,r);t===i&&(a-=e),t.min=kx(t.min,e,n,a,s),t.max=kx(t.max,e,n,a,s)}function bx(t,e,[n,r,s],i,o){$5(t,e[n],e[r],e[s],e.scale,i,o)}const W5=["x","scaleX","originX"],z5=["y","scaleY","originY"];function Ax(t,e,n,r){bx(t.x,e,W5,n?n.x:void 0,r?r.x:void 0),bx(t.y,e,z5,n?n.y:void 0,r?r.y:void 0)}function Cx(t){return t.translate===0&&t.scale===1}function Tb(t){return Cx(t.x)&&Cx(t.y)}function q5(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Eb(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Px(t){return zn(t.x)/zn(t.y)}class H5{constructor(){this.members=[]}add(e){x0(this.members,e),e.scheduleRender()}remove(e){if(T0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rx(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const G5=(t,e)=>t.depth-e.depth;class K5{constructor(){this.children=[],this.isDirty=!1}add(e){x0(this.children,e),this.isDirty=!0}remove(e){T0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(G5),this.isDirty=!1,this.children.forEach(e)}}function Q5(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(fs(r),t(i-e))};return rt.read(r,!0),()=>fs(r)}function Y5(t){window.MotionDebug&&window.MotionDebug.record(t)}function X5(t){return t instanceof SVGElement&&t.tagName!=="svg"}function J5(t,e,n){const r=Dn(t)?t:Aa(t);return r.start(_0("",r,e,n)),r.animation}const Nx=["","X","Y","Z"],Z5={visibility:"hidden"},Dx=1e3;let e3=0;const Ai={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Sb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=e3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ai.totalNodes=Ai.resolvedTargetDeltas=Ai.recalculatedProjection=0,this.nodes.forEach(r3),this.nodes.forEach(l3),this.nodes.forEach(u3),this.nodes.forEach(s3),Y5(Ai)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new K5)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new E0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=X5(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Q5(m,250),sd.hasAnimatedSinceResize&&(sd.hasAnimatedSinceResize=!1,this.nodes.forEach(Ox))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||p3,{onLayoutAnimationStart:A,onLayoutAnimationComplete:S}=h.getProps(),w=!this.targetLayout||!Eb(this.targetLayout,_)||y,x=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const N={...w0(E,"layout"),onPlay:A,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else m||Ox(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jx);return}this.isUpdating||this.nodes.forEach(o3),this.isUpdating=!1,this.nodes.forEach(a3),this.nodes.forEach(t3),this.nodes.forEach(n3),this.clearAllSnapshots();const a=performance.now();dn.delta=ai(0,1e3/60,a-dn.timestamp),dn.timestamp=a,dn.isProcessing=!0,ap.update.process(dn),ap.preRender.process(dn),ap.render.process(dn),dn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(i3),this.sharedNodes.forEach(d3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Tb(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||bi(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),m3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return At();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Rs(a.x,l.offset.x),Rs(a.y,l.offset.y)),a}removeElementScroll(o){const a=At();Qn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:f}=c;if(c!==this.root&&h&&f.layoutScroll){if(h.isRoot){Qn(a,o);const{scroll:m}=this.root;m&&(Rs(a.x,-m.offset.x),Rs(a.y,-m.offset.y))}Rs(a.x,h.offset.x),Rs(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=At();Qn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&qo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),bi(h.latestValues)&&qo(l,h.latestValues)}return bi(this.latestValues)&&qo(l,this.latestValues),l}removeTransform(o){const a=At();Qn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!bi(c.latestValues))continue;eg(c.latestValues)&&c.updateSnapshot();const h=At(),f=c.measurePageBox();Qn(h,f),Ax(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return bi(this.latestValues)&&Ax(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=dn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Fl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),g5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qn(this.target,this.layout.layoutBox),gb(this.target,this.targetDelta)):Qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Fl(this.relativeTargetOrigin,this.target,y.target),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ai.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||eg(this.parent.latestValues)||mb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===dn.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Qn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;I5(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=zo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=zo(),this.projectionDeltaWithTransform=zo());const E=this.projectionTransform;Ll(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=Rx(this.projectionDelta,this.treeScale),(this.projectionTransform!==E||this.treeScale.x!==m||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Ai.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=At(),y=l?l.source:void 0,_=this.layout?this.layout.source:void 0,E=y!==_,A=this.getStack(),S=!A||A.members.length<=1,w=!!(E&&!S&&this.options.crossfade===!0&&!this.path.some(f3));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const V=N/1e3;Vx(f.x,o.x,V),Vx(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h3(this.relativeTarget,this.relativeTargetOrigin,m,V),x&&q5(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=At()),Qn(x,this.relativeTarget)),E&&(this.animationValues=h,F5(h,c,this.latestValues,V,w,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{sd.hasAnimatedSinceResize=!0,this.currentAnimation=J5(0,Dx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Dx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Ib(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||At();const f=zn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=zn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Qn(a,l),qo(a,h),Ll(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new H5),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<Nx.length;h++){const f="rotate"+Nx[h];l[f]&&(c[f]=l[f],o.setStaticValue(f,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Z5;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=rd(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=rd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!bi(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=Rx(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:_}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const E in Yd){if(m[E]===void 0)continue;const{correct:A,applyTo:S}=Yd[E],w=c.transform==="none"?m[E]:A(m[E],f);if(S){const x=S.length;for(let N=0;N<x;N++)c[S[N]]=w}else c[E]=w}return this.options.layoutId&&(c.pointerEvents=f===this?rd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(jx),this.root.sharedNodes.clear()}}}function t3(t){t.updateLayout()}function n3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Yn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=zn(m);m.min=r[f].min,m.max=m.min+y}):Ib(i,n.layoutBox,r)&&Yn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=zn(r[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const a=zo();Ll(a,r,n.layoutBox);const l=zo();o?Ll(l,t.applyTransform(s,!0),n.measuredBox):Ll(l,r,n.layoutBox);const c=!Tb(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const _=At();Fl(_,n.layoutBox,m.layoutBox);const E=At();Fl(E,r,y.layoutBox),Eb(_,E)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function r3(t){Ai.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function s3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function i3(t){t.clearSnapshot()}function jx(t){t.clearMeasurements()}function o3(t){t.isLayoutDirty=!1}function a3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ox(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l3(t){t.resolveTargetDelta()}function u3(t){t.calcProjection()}function c3(t){t.resetRotation()}function d3(t){t.removeLeadSnapshot()}function Vx(t,e,n){t.translate=dt(e.translate,0,n),t.scale=dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Mx(t,e,n,r){t.min=dt(e.min,n.min,r),t.max=dt(e.max,n.max,r)}function h3(t,e,n,r){Mx(t.x,e.x,n.x,r),Mx(t.y,e.y,n.y,r)}function f3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p3={duration:.45,ease:[.4,0,.1,1]},Lx=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Fx=Lx("applewebkit/")&&!Lx("chrome/")?Math.round:_t;function Ux(t){t.min=Fx(t.min),t.max=Fx(t.max)}function m3(t){Ux(t.x),Ux(t.y)}function Ib(t,e,n){return t==="position"||t==="preserve-aspect"&&!Jm(Px(e),Px(n),.2)}const g3=Sb({attachResizeListener:(t,e)=>Jr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vp={current:void 0},kb=Sb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vp.current){const t=new g3({});t.mount(window),t.setOptions({layoutScroll:!0}),vp.current=t}return vp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),y3={pan:{Feature:D5},drag:{Feature:N5,ProjectionNode:kb,MeasureLayout:wb}},v3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function w3(t){const e=v3.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function ng(t,e,n=1){const[r,s]=w3(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return lb(o)?parseFloat(o):o}else return qm(s)?ng(s,e,n+1):s}function _3(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!qm(i))return;const o=ng(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!qm(i))continue;const o=ng(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const x3=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),bb=t=>x3.has(t),T3=t=>Object.keys(t).some(bb),Bx=t=>t===po||t===ce,$x=(t,e)=>parseFloat(t.split(", ")[e]),Wx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return $x(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?$x(i[1],t):0}},E3=new Set(["x","y","z"]),S3=$u.filter(t=>!E3.has(t));function I3(t){const e=[];return S3.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ca={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Wx(4,13),y:Wx(5,14)};Ca.translateX=Ca.x;Ca.translateY=Ca.y;const k3=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Ca[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=Ca[c](l,i)}),t},b3=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(bb);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],f=cl(h);const m=e[l];let y;if(Jd(m)){const _=m.length,E=m[0]===null?1:0;h=m[E],f=cl(h);for(let A=E;A<_&&m[A]!==null;A++)y?p0(cl(m[A])===y):y=cl(m[A])}else y=cl(m);if(f!==y)if(Bx(f)&&Bx(y)){const _=c.get();typeof _=="string"&&c.set(parseFloat(_)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&y===ce&&(e[l]=m.map(parseFloat))}else f!=null&&f.transform&&(y!=null&&y.transform)&&(h===0||m===0)?h===0?c.set(y.transform(h)):e[l]=f.transform(m):(o||(i=I3(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=k3(e,t,a);return i.length&&i.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),sf&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function A3(t,e,n,r){return T3(e)?b3(t,e,n,r):{target:e,transitionEnd:r}}const C3=(t,e,n,r)=>{const s=_3(t,e,r);return e=s.target,r=s.transitionEnd,A3(t,e,n,r)},rg={current:null},Ab={current:!1};function P3(){if(Ab.current=!0,!!sf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rg.current=t.matches;t.addListener(e),e()}else rg.current=!1}function R3(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Dn(i))t.addValue(s,i),nh(r)&&r.add(s);else if(Dn(o))t.addValue(s,Aa(i,{owner:t})),nh(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Aa(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const zx=new WeakMap,Cb=Object.keys(yu),N3=Cb.length,qx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],D3=i0.length;class j3{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>rt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=af(n),this.isVariantNode=fk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&Dn(m)&&(m.set(a[f],!1),nh(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,zx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Ab.current||P3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zx.delete(this.current),this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=fo.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&rt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<N3;l++){const c=Cb[l],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:y}=yu[c];m&&(o=m),h(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||f&&$o(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<qx.length;r++){const s=qx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=R3(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<D3;r++){const s=i0[r],i=this.props[s];(gu(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Aa(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=f0(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Dn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new E0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Pb extends j3{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=XL(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){QL(this,r,o);const a=C3(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function O3(t){return window.getComputedStyle(t)}class V3 extends Pb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(fo.has(n)){const r=v0(n);return r&&r.default||0}else{const r=O3(e),s=(yk(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yb(e,n)}build(e,n,r,s){l0(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return h0(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){Ek(e,n,r,s)}}class M3 extends Pb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(fo.has(n)){const r=v0(n);return r&&r.default||0}return n=Sk.has(n)?n:r0(n),e.getAttribute(n)}measureInstanceViewportBox(){return At()}scrapeMotionValuesFromProps(e,n){return kk(e,n)}build(e,n,r,s){c0(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){Ik(e,n,r,s)}mount(e){this.isSVGTag=d0(e.tagName),super.mount(e)}}const L3=(t,e)=>a0(t)?new M3(e,{enableHardwareAcceleration:!1}):new V3(e,{enableHardwareAcceleration:!0}),F3={layout:{ProjectionNode:kb,MeasureLayout:wb}},U3={...h5,...N4,...y3,...F3},be=BM((t,e)=>w4(t,e,U3,L3));function Rb(){const t=b.useRef(!1);return n0(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function B3(){const t=Rb(),[e,n]=b.useState(0),r=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>rt.postRender(r),[r]),e]}class $3 extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W3({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),b.createElement($3,{isPresent:e,childRef:r,sizeRef:s},b.cloneElement(t,{ref:r}))}const wp=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=bk(z3),l=b.useId(),c=b.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return b.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.createElement(W3,{isPresent:n},t)),b.createElement(rf.Provider,{value:c},t)};function z3(){return new Map}function q3(t){return b.useEffect(()=>()=>t(),[])}const Ci=t=>t.key||"";function H3(t,e){t.forEach(n=>{const r=Ci(n);e.set(r,n)})}function G3(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const ia=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=b.useContext(o0).forceRender||B3()[0],l=Rb(),c=G3(t);let h=c;const f=b.useRef(new Map).current,m=b.useRef(h),y=b.useRef(new Map).current,_=b.useRef(!0);if(n0(()=>{_.current=!1,H3(c,y),m.current=h}),q3(()=>{_.current=!0,y.clear(),f.clear()}),_.current)return b.createElement(b.Fragment,null,h.map(w=>b.createElement(wp,{key:Ci(w),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},w)));h=[...h];const E=m.current.map(Ci),A=c.map(Ci),S=E.length;for(let w=0;w<S;w++){const x=E[w];A.indexOf(x)===-1&&!f.has(x)&&f.set(x,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((w,x)=>{if(A.indexOf(x)!==-1)return;const N=y.get(x);if(!N)return;const V=E.indexOf(x);let L=w;if(!L){const k=()=>{f.delete(x);const v=Array.from(y.keys()).filter(T=>!A.includes(T));if(v.forEach(T=>y.delete(T)),m.current=c.filter(T=>{const C=Ci(T);return C===x||v.includes(C)}),!f.size){if(l.current===!1)return;a(),r&&r()}};L=b.createElement(wp,{key:Ci(N),isPresent:!1,onExitComplete:k,custom:e,presenceAffectsLayout:i,mode:o},N),f.set(x,L)}h.splice(V,0,L)}),h=h.map(w=>{const x=w.key;return f.has(x)?w:b.createElement(wp,{key:Ci(w),isPresent:!0,presenceAffectsLayout:i,mode:o},w)}),b.createElement(b.Fragment,null,f.size?h:h.map(w=>b.cloneElement(w)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>b.createElement("svg",{ref:h,...K3,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Q3(t)}`,a].join(" "),...c},[...e.map(([f,m])=>b.createElement(f,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=he("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=he("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=he("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=he("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=he("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=he("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=he("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=he("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=he("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=he("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=he("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=he("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=he("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),mF={},Yx=t=>{let e;const n=new Set,r=(h,f)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const y=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(_=>_(e,y))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(mF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},gF=t=>t?Yx(t):Yx;var Mb={exports:{}},Lb={},Fb={exports:{}},Ub={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=b;function yF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vF=typeof Object.is=="function"?Object.is:yF,wF=Pa.useState,_F=Pa.useEffect,xF=Pa.useLayoutEffect,TF=Pa.useDebugValue;function EF(t,e){var n=e(),r=wF({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return xF(function(){s.value=n,s.getSnapshot=e,xp(s)&&i({inst:s})},[t,n,e]),_F(function(){return xp(s)&&i({inst:s}),t(function(){xp(s)&&i({inst:s})})},[t]),TF(n),n}function xp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vF(t,n)}catch{return!0}}function SF(t,e){return e()}var IF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SF:EF;Ub.useSyncExternalStore=Pa.useSyncExternalStore!==void 0?Pa.useSyncExternalStore:IF;Fb.exports=Ub;var kF=Fb.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=b,bF=kF;function AF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var CF=typeof Object.is=="function"?Object.is:AF,PF=bF.useSyncExternalStore,RF=df.useRef,NF=df.useEffect,DF=df.useMemo,jF=df.useDebugValue;Lb.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=RF(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=DF(function(){function l(y){if(!c){if(c=!0,h=y,y=r(y),s!==void 0&&o.hasValue){var _=o.value;if(s(_,y))return f=_}return f=y}if(_=f,CF(h,y))return _;var E=r(y);return s!==void 0&&s(_,E)?(h=y,_):(h=y,f=E)}var c=!1,h,f,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=PF(t,i[0],i[1]);return NF(function(){o.hasValue=!0,o.value=a},[a]),jF(a),a};Mb.exports=Lb;var OF=Mb.exports;const VF=mT(OF),Bb={},{useDebugValue:MF}=Eu,{useSyncExternalStoreWithSelector:LF}=VF;let Xx=!1;const FF=t=>t;function UF(t,e=FF,n){(Bb?"production":void 0)!=="production"&&n&&!Xx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Xx=!0);const r=LF(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return MF(r),r}const Jx=t=>{(Bb?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?gF(t):t,n=(r,s)=>UF(e,r,s);return Object.assign(n,e),n},mo=t=>t?Jx(t):Jx,BF={};function $F(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const xu=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return xu(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return xu(r)(n)}}}},WF=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,S)=>({...S,...A}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...A)},r,s);const h=xu(i.serialize),f=()=>{const A=i.partialize({...r()});let S;const w=h({state:A,version:i.version}).then(x=>c.setItem(i.name,x)).catch(x=>{S=x});if(S)throw S;return w},m=s.setState;s.setState=(A,S)=>{m(A,S),f()};const y=t((...A)=>{n(...A),f()},r,s);let _;const E=()=>{var A;if(!c)return;o=!1,a.forEach(w=>w(r()));const S=((A=i.onRehydrateStorage)==null?void 0:A.call(i,r()))||void 0;return xu(c.getItem.bind(c))(i.name).then(w=>{if(w)return i.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return i.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var x;return _=i.merge(w,(x=r())!=null?x:y),n(_,!0),f()}).then(()=>{S==null||S(_,void 0),o=!0,l.forEach(w=>w(_))}).catch(w=>{S==null||S(void 0,w)})};return s.persist={setOptions:A=>{i={...i,...A},A.getStorage&&(c=A.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>E(),hasHydrated:()=>o,onHydrate:A=>(a.add(A),()=>{a.delete(A)}),onFinishHydration:A=>(l.add(A),()=>{l.delete(A)})},E(),_||y},zF=(t,e)=>(n,r,s)=>{let i={storage:$F(()=>localStorage),partialize:E=>E,version:0,merge:(E,A)=>({...A,...E}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...E)},r,s);const h=()=>{const E=i.partialize({...r()});return c.setItem(i.name,{state:E,version:i.version})},f=s.setState;s.setState=(E,A)=>{f(E,A),h()};const m=t((...E)=>{n(...E),h()},r,s);s.getInitialState=()=>m;let y;const _=()=>{var E,A;if(!c)return;o=!1,a.forEach(w=>{var x;return w((x=r())!=null?x:m)});const S=((A=i.onRehydrateStorage)==null?void 0:A.call(i,(E=r())!=null?E:m))||void 0;return xu(c.getItem.bind(c))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var x;const[N,V]=w;if(y=i.merge(V,(x=r())!=null?x:m),n(y,!0),N)return h()}).then(()=>{S==null||S(y,void 0),y=r(),o=!0,l.forEach(w=>w(y))}).catch(w=>{S==null||S(void 0,w)})};return s.persist={setOptions:E=>{i={...i,...E},E.storage&&(c=E.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},i.skipHydration||_(),y||m},qF=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((BF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),WF(t,e)):zF(t,e),HF=qF;mo(HF(t=>({user:null,loading:!0,setUser:e=>t({user:e,loading:!1}),setLoading:e=>t({loading:e}),logout:()=>t({user:null})}),{name:"auth-storage",partialize:t=>({user:t.user})}));mo((t,e)=>({workouts:[],currentWorkout:null,loading:!1,setWorkouts:n=>t({workouts:n}),setCurrentWorkout:n=>t({currentWorkout:n}),setLoading:n=>t({loading:n}),addWorkout:n=>t(r=>({workouts:[...r.workouts,n]})),updateWorkout:(n,r)=>t(s=>({workouts:s.workouts.map(i=>i.id===n?{...i,...r}:i)})),deleteWorkout:n=>t(r=>({workouts:r.workouts.filter(s=>s.id!==n)}))}));mo(t=>({groups:[],currentGroup:null,members:[],loading:!1,setGroups:e=>t({groups:e}),setCurrentGroup:e=>t({currentGroup:e}),setMembers:e=>t({members:e}),setLoading:e=>t({loading:e}),addGroup:e=>t(n=>({groups:[...n.groups,e]})),updateGroup:(e,n)=>t(r=>({groups:r.groups.map(s=>s.id===e?{...s,...n}:s)}))}));mo(t=>({goals:[],loading:!1,setGoals:e=>t({goals:e}),setLoading:e=>t({loading:e}),addGoal:e=>t(n=>({goals:[...n.goals,e]})),updateGoal:(e,n)=>t(r=>({goals:r.goals.map(s=>s.id===e?{...s,...n}:s)})),deleteGoal:e=>t(n=>({goals:n.goals.filter(r=>r.id!==e)}))}));mo(t=>({selectedDate:new Date,viewMode:"month",scheduledWorkouts:[],vacations:[],missedDays:[],setSelectedDate:e=>t({selectedDate:e}),setViewMode:e=>t({viewMode:e}),setScheduledWorkouts:e=>t({scheduledWorkouts:e}),setVacations:e=>t({vacations:e}),setMissedDays:e=>t({missedDays:e}),addVacation:e=>t(n=>({vacations:[...n.vacations,e]})),addMissedDay:e=>t(n=>({missedDays:[...n.missedDays,e]}))}));const $b=mo(t=>({sidebarOpen:!0,chatOpen:!1,activeModal:null,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),toggleChat:()=>t(e=>({chatOpen:!e.chatOpen})),setChatOpen:e=>t({chatOpen:e}),setActiveModal:e=>t({activeModal:e}),closeModal:()=>t({activeModal:null})}));mo(t=>({usage:[],totalTokens:0,loading:!1,filters:{userId:null,startDate:null,endDate:null},setUsage:e=>t({usage:e}),setTotalTokens:e=>t({totalTokens:e}),setLoading:e=>t({loading:e}),setFilters:e=>t(n=>({filters:{...n.filters,...e}})),resetFilters:()=>t({filters:{userId:null,startDate:null,endDate:null}})}));let Rc=null;const oa={setAdminContext(t){Rc=t},clearAdminContext(){Rc=null},async logAction(t,e,n={}){if(t)try{const r=Object.fromEntries(Object.entries(n).filter(([i,o])=>o!==void 0)),s={userId:t,action:e,metadata:r,timestamp:X(),userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`};Rc&&(s.adminUid=Rc),await Et(K(j,"analytics"),s)}catch(r){console.error("Analytics error:",r)}},async logPageView(t,e,n={}){return this.logAction(t,"page_view",{page:e,...n})},async getActivitySummary(t=7){const e=new Date;e.setDate(e.getDate()-t);const n=se(K(j,"analytics"),J("timestamp",">=",Tt.fromDate(e)),Mt("timestamp","desc")),s=(await oe(n)).docs.map(f=>({id:f.id,...f.data()})),i=new Set(s.map(f=>f.userId)),o={},a={},l={},c={};s.forEach(f=>{var y,_,E,A,S,w,x;o[f.action]=(o[f.action]||0)+1,f.action==="page_view"&&((y=f.metadata)!=null&&y.page)&&(a[f.metadata.page]=(a[f.metadata.page]||0)+1);const m=(E=(_=f.timestamp)==null?void 0:_.toDate)==null?void 0:E.call(_);if(m){const N=m.toISOString().split("T")[0];l[N]||(l[N]=new Set),l[N].add(f.userId)}c[f.userId]||(c[f.userId]={actions:0,lastSeen:null}),c[f.userId].actions++,(!c[f.userId].lastSeen||((S=(A=f.timestamp)==null?void 0:A.toDate)==null?void 0:S.call(A))>c[f.userId].lastSeen)&&(c[f.userId].lastSeen=(x=(w=f.timestamp)==null?void 0:w.toDate)==null?void 0:x.call(w))});const h=Object.entries(l).map(([f,m])=>({date:f,count:m.size})).sort((f,m)=>f.date.localeCompare(m.date));return{totalEvents:s.length,uniqueUsers:i.size,actionCounts:o,pageCounts:a,dailyActiveCounts:h,userActivity:c,recentEvents:s.slice(0,50),allEvents:s}},async getUserActivity(t,e=50){const n=se(K(j,"analytics"),J("userId","==",t),Mt("timestamp","desc"),Rt(e));return(await oe(n)).docs.map(s=>({id:s.id,...s.data()}))},async getRecentActivity(t=100){const e=se(K(j,"analytics"),Mt("timestamp","desc"),Rt(t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))}},Nc={WORKOUT_CREATED:"workout_created",WORKOUT_COMPLETED:"workout_completed",CARDIO_LOGGED:"cardio_logged"},Ho={async createFeedItem(t,e,n,r=null){try{let s=r;if(!s)try{const o=await Le(W(j,"users",t)),a=o.exists()?o.data():{};a.defaultVisibility?s=a.defaultVisibility:a.isPrivate?s="private":s="public"}catch{s="public"}return{id:(await Et(K(j,"feed"),{userId:t,type:e,data:n,visibility:s,groupId:(n==null?void 0:n.groupId)||null,reactions:{},reactionCount:0,commentCount:0,createdAt:X()})).id}}catch(s){throw console.error("Error creating feed item:",s),s}},async getFeed(t=20,e=null,n=null){try{let r;n?r=se(K(j,"feed"),J("userId","==",n),Mt("createdAt","desc"),Rt(t)):r=se(K(j,"feed"),Mt("createdAt","desc"),Rt(t)),e&&(r=se(r,ek(e)));const s=await oe(r);return{items:s.docs.map(o=>({id:o.id,...o.data(),_doc:o})),lastDoc:s.docs[s.docs.length-1]||null,hasMore:s.docs.length===t}}catch(r){return console.error("Error getting feed:",r),{items:[],lastDoc:null,hasMore:!1}}},async getFeedItem(t){const e=await Le(W(j,"feed",t));return e.exists()?{id:e.id,...e.data()}:null},async toggleReaction(t,e,n){const r=W(j,"feed",t),s=await Le(r);if(!s.exists())return;const a=((s.data().reactions||{})[n]||[]).includes(e);return a?await _e(r,{[`reactions.${n}`]:Bo(e),reactionCount:kr(-1)}):await _e(r,{[`reactions.${n}`]:sa(e),reactionCount:kr(1)}),!a},async getComments(t){const e=se(K(j,"feed",t,"comments"),Mt("createdAt","asc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async addComment(t,e,n,r=""){const s=await Et(K(j,"feed",t,"comments"),{userId:e,text:n,createdAt:X()});await _e(W(j,"feed",t),{commentCount:kr(1)});try{const i=await Le(W(j,"feed",t));if(i.exists()){const o=i.data().userId;o&&o!==e&&await Et(K(j,"notifications"),{userId:o,type:"comment",fromUserId:e,fromUserName:r,feedId:t,feedType:i.data().type,commentText:n.slice(0,100),read:!1,createdAt:X()})}}catch(i){console.error("Notification error:",i)}return{id:s.id}},async deleteComment(t,e,n){const r=W(j,"feed",t,"comments",e),s=await Le(r);s.exists()&&s.data().userId===n&&(await en(r),await _e(W(j,"feed",t),{commentCount:kr(-1)}))},async deleteFeedItem(t,e,n=!1){const r=W(j,"feed",t),s=await Le(r);s.exists()&&(n||s.data().userId===e)&&await en(r)}},ko={WORKOUT:"workout",CARDIO:"cardio",GROUP_WORKOUT:"group_workout",GOAL_COMPLETED:"goal_completed",GOAL_CREATED:"goal_created",STREAK:"streak",PR:"personal_record"},od={async getUnread(t){try{const e=se(K(j,"notifications"),J("userId","==",t),J("read","==",!1),Mt("createdAt","desc"),Rt(20));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{return[]}},async markAsRead(t){try{await _e(W(j,"notifications",t),{read:!0})}catch(e){console.error("Error marking notification read:",e)}},async markAllAsRead(t){try{const e=se(K(j,"notifications"),J("userId","==",t),J("read","==",!1)),n=await oe(e),r=[];n.docs.forEach(s=>{r.push(_e(W(j,"notifications",s.id),{read:!0}))}),await Promise.all(r)}catch(e){console.error("Error marking all read:",e)}}};function c9(t){if(!t)return"";const e=String(t).trim();if(/^\d+$/.test(e))return e;const n=e.match(/^(\d+)\s*[-\s]\s*(\d+)$/);if(n){const[,r,s]=n;return r===s?r:`${r}-${s}`}return e}function GF(t,e){return e&&e>0?Math.round(e):!t||t<=0?null:Math.round(t*2.5)}function KF(t,e){const n=GF(t,e);return n?e&&e>0?`${n} min`:`~${n} min`:null}function QF(t){if(!t||!t.length)return{exerciseSummary:[],totalSets:0};let e=0;return{exerciseSummary:t.map(r=>{const s=r.sets||[];e+=s.length;let i=0,o=0;return s.forEach(a=>{const l=parseFloat(a.actualWeight||a.prescribedWeight)||0;l>i&&(i=l,o=parseInt(a.actualReps||a.prescribedReps)||0)}),{name:r.name||"Exercise",sets:s.length,topWeight:i||null,topReps:o||null}}),totalSets:e}}function ad(t){try{return QF(t)}catch{return{exerciseSummary:[],totalSets:0}}}const Wb={async get(t){const e=await Le(W(j,"users",t));return e.exists()?{uid:e.id,...e.data()}:null},async getByUsername(t){if(!t)return null;const e=se(K(j,"users"),J("username","==",t.toLowerCase()),Rt(1)),n=await oe(e);if(n.empty)return null;const r=n.docs[0];return{uid:r.id,...r.data()}},async isUsernameAvailable(t,e=null){if(!t)return!1;const n=t.toLowerCase();if(["admin","settings","feed","profile","workouts","calendar","groups","goals","health","tools","usage","login","api"].includes(n))return!1;const s=se(K(j,"users"),J("username","==",n),Rt(1)),i=await oe(s);return!!(i.empty||e&&i.docs[0].id===e)},async setUsername(t,e){const n=e.toLowerCase();if(!/^[a-z0-9_]{3,20}$/.test(n))throw new Error("Username must be 3-20 characters, letters, numbers, and underscores only");if(!await this.isUsernameAvailable(n,t))throw new Error("Username is already taken or reserved");return await _e(W(j,"users",t),{username:n,updatedAt:X()}),n},async getAll(){return(await oe(K(j,"users"))).docs.map(e=>({uid:e.id,...e.data()}))},async search(t){const e=await this.getAll(),n=t.toLowerCase();return e.filter(r=>{var s,i,o;return((s=r.displayName)==null?void 0:s.toLowerCase().includes(n))||((i=r.email)==null?void 0:i.toLowerCase().includes(n))||((o=r.username)==null?void 0:o.toLowerCase().includes(n))})},async getDashboardConfig(t){const e=await Le(W(j,"users",t));return e.exists()&&e.data().dashboardConfig||null},async saveDashboardConfig(t,e){await _e(W(j,"users",t),{dashboardConfig:e,updatedAt:X()})}},Ra={async create(t,e){var l,c,h;const n=e.date instanceof Date?e.date:(l=e.date)!=null&&l.toDate?e.date.toDate():new Date(e.date),r=new Date;r.setHours(0,0,0,0),n.setHours(0,0,0,0);const s=n>r;let i=!1;s?i=!1:e.workoutType==="cardio"?i=!0:i=this.checkIfComplete(e.exercises);const o=await Et(K(j,"workouts"),{...e,userId:t,workoutType:e.workoutType||"strength",status:i?"completed":"scheduled",completedAt:i?X():null,createdAt:X(),updatedAt:X()});i&&e.workoutType!=="cardio"&&await this.checkAndUpdateGoals(t,e);const a=e.workoutType==="cardio"?Nc.CARDIO_LOGGED:Nc.WORKOUT_CREATED;if(oa.logAction(t,a,{workoutType:e.workoutType,exerciseCount:((c=e.exercises)==null?void 0:c.length)||0,status:i?"completed":"scheduled"}),i)try{const f=e.workoutType==="cardio"?ko.CARDIO:ko.WORKOUT,{exerciseSummary:m,totalSets:y}=ad(e.exercises);await Ho.createFeedItem(t,f,{workoutId:o.id,name:e.name,exerciseCount:((h=e.exercises)==null?void 0:h.length)||0,duration:e.duration,activityType:e.activityType,exerciseSummary:m,totalSets:y,...e.eventId?{eventId:e.eventId}:{}})}catch(f){console.error("Feed error:",f)}return{id:o.id,...e,status:i?"completed":"scheduled"}},checkIfComplete(t){return!t||t.length===0?!1:t.some(e=>{var n;return(n=e.sets)==null?void 0:n.some(r=>r.actualWeight||r.actualReps)})},async completeWorkout(t,e,n){var a;const r=W(j,"workouts",t),i=(await Le(r)).data(),o=(i==null?void 0:i.name)||"Workout";if(await _e(r,{exercises:e,status:"completed",completedAt:X(),updatedAt:X()}),i!=null&&i.trainerRequestId)try{await ig.complete(i.trainerRequestId,t,"")}catch(l){console.error("Trainer request auto-complete error:",l)}await this.checkAndUpdateGoals(n,{exercises:e}),oa.logAction(n,Nc.WORKOUT_COMPLETED,{exerciseCount:(e==null?void 0:e.length)||0});try{const{exerciseSummary:l,totalSets:c}=ad(e);await Ho.createFeedItem(n,ko.WORKOUT,{workoutId:t,name:o,exerciseCount:(e==null?void 0:e.length)||0,exerciseSummary:l,totalSets:c,...i!=null&&i.eventId?{eventId:i.eventId}:{}})}catch(l){console.error("Feed error:",l)}if(n&&(i!=null&&i.eventId))try{const{getEventForWorkout:l}=await He(async()=>{const{getEventForWorkout:h}=await Promise.resolve().then(()=>lT);return{getEventForWorkout:h}},void 0),c=l(i);if(c){c.creditReward&&await ah.add(n,c.creditReward);const h=W(j,"users",n),m=((a=(await Le(h)).data())==null?void 0:a.badges)||[];m.some(y=>y.id===c.id)||await _e(h,{badges:[...m,{id:c.id,name:c.badgeName,icon:c.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(l){console.error("Event reward error:",l)}return{id:t,status:"completed"}},async complete(t,e){var o,a,l;const n=W(j,"workouts",t),s=(await Le(n)).data(),i=s==null?void 0:s.userId;await _e(n,{...e,status:"completed",completedAt:X(),updatedAt:X()}),i&&e.exercises&&await this.checkAndUpdateGoals(i,{exercises:e.exercises}),i&&oa.logAction(i,Nc.WORKOUT_COMPLETED,{exerciseCount:((o=e.exercises)==null?void 0:o.length)||0});try{if(i){const{exerciseSummary:c,totalSets:h}=ad(e.exercises);await Ho.createFeedItem(i,ko.WORKOUT,{workoutId:t,name:(s==null?void 0:s.name)||"Workout",exerciseCount:((a=e.exercises)==null?void 0:a.length)||0,exerciseSummary:c,totalSets:h,...s!=null&&s.eventId?{eventId:s.eventId}:{}})}}catch(c){console.error("Feed error:",c)}if(i&&(s!=null&&s.eventId))try{const{getEventForWorkout:c}=await He(async()=>{const{getEventForWorkout:f}=await Promise.resolve().then(()=>lT);return{getEventForWorkout:f}},void 0),h=c(s);if(h){h.creditReward&&await ah.add(i,h.creditReward);const f=W(j,"users",i),y=((l=(await Le(f)).data())==null?void 0:l.badges)||[];y.some(_=>_.id===h.id)||await _e(f,{badges:[...y,{id:h.id,name:h.badgeName,icon:h.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(c){console.error("Event reward error:",c)}if(s!=null&&s.trainerRequestId)try{await ig.complete(s.trainerRequestId,t,"")}catch(c){console.error("Trainer request auto-complete error:",c)}return{id:t,status:"completed"}},async getCardioByUser(t,e=30){const n=se(K(j,"workouts"),J("userId","==",t),J("workoutType","==","cardio"),Rt(e));return(await oe(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var c,h;const a=(c=i.date)!=null&&c.toDate?i.date.toDate():new Date(i.date);return((h=o.date)!=null&&h.toDate?o.date.toDate():new Date(o.date))-a})},async getByDate(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=se(K(j,"workouts"),J("userId","==",t));return(await oe(r)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>{var a;return((a=i.date)!=null&&a.toDate?i.date.toDate().toISOString().split("T")[0]:i.date)===n})},async createForUser(t,e,n,r){return{id:(await Et(K(j,"workouts"),{...e,userId:t,createdBy:n,groupId:r,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:X(),updatedAt:X()})).id,...e,userId:t,status:"scheduled"}},async createForGroup(t,e,n,r){const s=Ui(j),i=[];for(const o of r){const a=W(K(j,"workouts"));s.set(a,{...e,userId:o,createdBy:n,groupId:t,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:X(),updatedAt:X()}),i.push({id:a.id,memberId:o})}return await s.commit(),i},async checkAndUpdateGoals(t,e){try{const n=se(K(j,"goals"),J("userId","==",t),J("status","==","active")),r=await oe(n);if(r.empty)return;const s=i=>i?i.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():"";for(const i of e.exercises||[]){const o=s(i.name);if(o)for(const a of r.docs){const l=a.data(),c=s(l.lift),h=l.metricType||"weight";if(!(o===c||o.includes(c)||c.includes(o)||c.split(" ").some(y=>y.length>3&&o.includes(y))))continue;let m=0;for(const y of i.sets||[]){let _=0;h==="weight"?_=parseFloat(y.actualWeight)||parseFloat(y.prescribedWeight)||0:h==="reps"?_=parseInt(y.actualReps)||parseInt(y.prescribedReps)||0:h==="time"&&(_=parseFloat(y.actualTime)||parseFloat(y.prescribedTime)||0),_>m&&(m=_)}if(m>0){const y=parseFloat(l.targetValue)||parseFloat(l.targetWeight)||0,_=parseFloat(l.startValue)||parseFloat(l.startWeight)||0,E=parseFloat(l.currentValue)||parseFloat(l.currentWeight)||_;if(m>E){let A=0;y>_&&(A=Math.min(100,Math.round((m-_)/(y-_)*100)));const S={currentValue:m,currentWeight:h==="weight"?m:l.currentWeight,progress:Math.max(l.progress||0,A),updatedAt:X()};if(m>=y&&y>0){S.status="completed",S.completedAt=X();try{await Ho.createFeedItem(t,ko.GOAL_COMPLETED,{goalId:a.id,lift:l.lift,targetValue:y,metricType:h,unit:h==="weight"?"lbs":h==="reps"?"reps":"sec"})}catch(w){console.error("Feed error:",w)}}await _e(W(j,"goals",a.id),S),console.log(`Goal updated: ${l.lift} - new value: ${m}`)}}}}}catch(n){console.error("Error checking goals:",n)}},async get(t){const e=await Le(W(j,"workouts",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getByUser(t,e=50){const n=se(K(j,"workouts"),J("userId","==",t),Mt("date","desc"),Rt(e));return(await oe(n)).docs.map(s=>({id:s.id,...s.data()}))},async getByGroup(t,e=50){const n=se(K(j,"workouts"),J("groupId","==",t),Mt("date","desc"),Rt(e));return(await oe(n)).docs.map(s=>({id:s.id,...s.data()}))},async getByDateRange(t,e,n){const r=se(K(j,"workouts"),J("userId","==",t),J("date",">=",e),J("date","<=",n),Mt("date","asc"));return(await oe(r)).docs.map(i=>({id:i.id,...i.data()}))},async update(t,e){const n=W(j,"workouts",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async delete(t){await en(W(j,"workouts",t));try{const e=se(K(j,"feed"),J("data.workoutId","==",t)),r=(await oe(e)).docs.map(s=>en(W(j,"feed",s.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async logExercise(t,e){const n=W(j,"workouts",t);await _e(n,{exercises:sa(e),updatedAt:X()})}},zb={generateInviteCode(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},async create(t,e){const n=this.generateInviteCode(),r=await Et(K(j,"groups"),{...e,creatorId:t,inviteCode:n,members:[t],admins:[t],createdAt:X(),updatedAt:X()}),s=W(j,"users",t);return await _e(s,{groups:sa(r.id)}),{id:r.id,inviteCode:n,...e}},async get(t){const e=await Le(W(j,"groups",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getMemberDetails(t){const e=[];for(const n of t){const r=await Le(W(j,"users",n));r.exists()?e.push({uid:n,...r.data()}):e.push({uid:n,displayName:"Unknown User"})}return e},async getByUser(t){const e=se(K(j,"groups"),J("members","array-contains",t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async findByInviteCode(t){const e=se(K(j,"groups"),J("inviteCode","==",t.toUpperCase())),n=await oe(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},async joinByCode(t,e){var r;const n=await this.findByInviteCode(t);if(!n)throw new Error("Invalid invite code");if((r=n.members)!=null&&r.includes(e))throw new Error("Already a member of this group");return await this.addMember(n.id,e),n},async update(t,e){const n=W(j,"groups",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async addMember(t,e){const n=Ui(j),r=W(j,"groups",t);n.update(r,{members:sa(e),updatedAt:X()});const s=W(j,"users",e);n.update(s,{groups:sa(t)}),await n.commit()},async removeMember(t,e){const n=Ui(j),r=W(j,"groups",t);n.update(r,{members:Bo(e),admins:Bo(e),updatedAt:X()});const s=W(j,"users",e);n.update(s,{groups:Bo(t)}),await n.commit()},async getMembers(t){const e=await this.get(t);return e?(await Promise.all(e.members.map(async r=>{const s=await Le(W(j,"users",r));return s.exists()?{id:r,...s.data()}:null}))).filter(Boolean):[]},async delete(t){const e=await this.get(t);if(!e)return;const n=Ui(j);for(const r of e.members){const s=W(j,"users",r);n.update(s,{groups:Bo(t)})}n.delete(W(j,"groups",t)),await n.commit()}},I0={async create(t,e){return{id:(await Et(K(j,"goals"),{...e,userId:t,status:"active",progress:0,createdAt:X(),updatedAt:X()})).id,...e}},async get(t){const e=await Le(W(j,"goals",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=se(K(j,"goals"),J("userId","==",t),Mt("targetDate","asc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=W(j,"goals",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async delete(t){return await en(W(j,"goals",t)),t}},k0={async create(t,e){return{id:(await Et(K(j,"schedules"),{...e,userId:t,createdAt:X(),updatedAt:X()})).id,...e}},async getByUser(t){const e=se(K(j,"schedules"),J("userId","==",t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByGroup(t){const e=se(K(j,"schedules"),J("groupId","==",t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=W(j,"schedules",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async delete(t){return await en(W(j,"schedules",t)),t}},YF={async log(t,e,n,r=null){const s=e.toISOString().split("T")[0],i=W(j,"attendance",`${t}_${s}`);await _e(i,{userId:t,date:s,status:n,workoutId:r,updatedAt:X()}).catch(async()=>{await Et(K(j,"attendance"),{userId:t,date:s,status:n,workoutId:r,createdAt:X()})})},async getByUser(t,e,n){const r=se(K(j,"attendance"),J("userId","==",t),J("date",">=",e.toISOString().split("T")[0]),J("date","<=",n.toISOString().split("T")[0]));return(await oe(r)).docs.map(i=>({id:i.id,...i.data()}))},async getByDateRange(t,e,n){return this.getByUser(t,e,n)},async getByGroup(t,e,n){const r=await zb.get(t);return r?(await Promise.all(r.members.map(i=>this.getByUser(i,e,n)))).flat():[]}},bo={async log(t){return{id:(await Et(K(j,"tokenUsage"),{...t,createdAt:X()})).id,...t}},async getRecent(t=100){const e=se(K(j,"tokenUsage"),Mt("createdAt","desc"),Rt(t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUser(t,e=50){const n=se(K(j,"tokenUsage"),J("userId","==",t),Mt("createdAt","desc"),Rt(e));return(await oe(n)).docs.map(s=>({id:s.id,...s.data()}))},async getRecentCounts(t){const e=await this.getByUser(t,100),n=Date.now(),r=n-60*60*1e3,s=n-24*60*60*1e3;let i=0,o=0;return e.forEach(a=>{var c,h,f,m;const l=((m=(f=(h=(c=a.createdAt)==null?void 0:c.toDate)==null?void 0:h.call(c))==null?void 0:f.getTime)==null?void 0:m.call(f))||new Date(a.createdAt).getTime()||0;l>r&&i++,l>s&&o++}),{hourCount:i,dayCount:o,total:e.length}},async getSummary(){const t=await this.getRecent(500),e={totalTokens:t.reduce((l,c)=>l+(c.totalTokens||0),0),totalRequests:t.length,byFeature:{}};t.forEach(l=>{l.feature&&(e.byFeature[l.feature]||(e.byFeature[l.feature]={tokens:0,requests:0}),e.byFeature[l.feature].tokens+=l.totalTokens||0,e.byFeature[l.feature].requests+=1)});const n=[...new Set(t.map(l=>l.userId))].filter(Boolean),r=[];for(const l of n)try{const c=await Le(W(j,"users",l));if(c.exists()){const h=c.data();r.push({id:l,displayName:h.displayName||h.email||l,email:h.email})}else r.push({id:l,displayName:l})}catch{r.push({id:l,displayName:l})}const s=Object.fromEntries(r.map(l=>[l.id,l.displayName])),i=t.map(l=>({...l,userName:s[l.userId]||l.userId})),o=[];let a=null;return i.forEach(l=>{var h,f;const c=(h=l.createdAt)!=null&&h.toDate?l.createdAt.toDate():new Date(l.createdAt);if(a&&a.feature===l.feature&&a.userId===l.userId){const m=(f=a.createdAt)!=null&&f.toDate?a.createdAt.toDate():new Date(a.createdAt);if(Math.abs(m-c)/1e3/60<=5){a.totalTokens+=l.totalTokens||0,a.promptTokens+=l.promptTokens||0,a.completionTokens+=l.completionTokens||0,a.requestCount=(a.requestCount||1)+1;return}}a&&o.push(a),a={...l,requestCount:1}}),a&&o.push(a),{records:o,summary:e,users:r}}},ld={async create(t,e){return{id:(await Et(K(j,"programs"),{...e,userId:t,status:"active",createdAt:X(),updatedAt:X()})).id,...e}},async get(t){const e=await Le(W(j,"programs",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=se(K(j,"programs"),J("userId","==",t),Mt("createdAt","desc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getActive(t){const e=se(K(j,"programs"),J("userId","==",t),J("status","==","active"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=W(j,"programs",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async delete(t){return await en(W(j,"programs",t)),t},getProgramDay(t,e){var c,h;if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return null;const n=(c=t.startDate)!=null&&c.toDate?t.startDate.toDate():new Date(t.startDate),r=new Date(e),s=Math.floor((r-n)/(1e3*60*60*24));if(s<0)return null;const i=Math.floor(s/7);if(i>=t.weeks.length)return null;const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][r.getDay()];if(!t.trainingDays.includes(o))return null;const a=t.weeks[i],l=(h=a==null?void 0:a.days)==null?void 0:h.find(f=>f.dayOfWeek===o);return l?{...l,weekNumber:a.weekNumber,phase:a.phase,programId:t.id,programName:t.name}:null},getProgramDaysInRange(t,e,n){if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return[];const r=[],s=new Date(e),i=new Date(n);for(;s<=i;){const o=this.getProgramDay(t,s);o&&r.push({...o,date:new Date(s),dateStr:s.toISOString().split("T")[0]}),s.setDate(s.getDate()+1)}return r}},b0={"ask-assistant":1,"generate-workout":5,"generate-group-workout":5,"generate-program":10,"form-check":15,"trainer-custom-workout":100,"trainer-review":50},XF=100,ah={async getBalance(t){const e=W(j,"users",t),n=await Le(e);return n.exists()?n.data().credits??0:0},async deduct(t,e,n=1){const r=(b0[e]||1)*n,s=await this.getBalance(t);if(s<r)return{success:!1,balance:s,cost:r,error:"insufficient_credits"};const i=W(j,"users",t);return await _e(i,{credits:kr(-r)}),{success:!0,balance:s-r,cost:r}},async deductAmount(t,e){const n=await this.getBalance(t);if(n<e)return{success:!1,balance:n,cost:e,error:"insufficient_credits"};const r=W(j,"users",t);return await _e(r,{credits:kr(-e)}),{success:!0,balance:n-e,cost:e}},async add(t,e){const n=W(j,"users",t);return await _e(n,{credits:kr(e)}),{success:!0}},async gift(t,e,n){if(n<=0)return{success:!1,error:"Amount must be positive"};const r=await this.getBalance(t);if(r<n)return{success:!1,balance:r,amount:n,error:"insufficient_credits"};const s=W(j,"users",t),i=W(j,"users",e);return await _e(s,{credits:kr(-n)}),await _e(i,{credits:kr(n)}),{success:!0,balance:r-n}},async ensureCredits(t){const e=W(j,"users",t),n=await Le(e);return n.exists()&&n.data().credits===void 0?(await _e(e,{credits:50}),50):n.exists()?n.data().credits??0:0}},qb={async create(t,e){return{id:(await Et(K(j,"health"),{...e,userId:t,createdAt:X(),updatedAt:X()})).id,...e,userId:t}},async update(t,e){const n=W(j,"health",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async getByUser(t,e=30){const n=se(K(j,"health"),J("userId","==",t),Rt(e));return(await oe(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>(o.date||"").localeCompare(i.date||""))},async getByDateRange(t,e,n){const r=se(K(j,"health"),J("userId","==",t));return(await oe(r)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.date>=e&&o.date<=n).sort((o,a)=>(a.date||"").localeCompare(o.date||""))},async delete(t){await en(W(j,"health",t))}},$l={async create(t,e,n,r,s=[]){return{id:(await Et(K(j,"groupWorkouts"),{...r,groupId:t,groupAdmins:e,groupMembers:s.length>0?s:e,assignedTo:n,status:"scheduled",createdAt:X(),updatedAt:X()})).id,...r,groupId:t,assignedTo:n,status:"scheduled"}},async getByGroup(t,e){const n=se(K(j,"groupWorkouts"),J("groupId","==",t),Mt("date","desc"));return(await oe(n)).docs.map(s=>({id:s.id,...s.data()}))},async getByUser(t){const e=se(K(j,"groupWorkouts"),J("assignedTo","==",t),Mt("date","desc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUserAndDateRange(t,e,n){const r=se(K(j,"groupWorkouts"),J("assignedTo","==",t),J("date",">=",e),J("date","<=",n));return(await oe(r)).docs.map(i=>({id:i.id,...i.data()}))},async get(t){const e=await Le(W(j,"groupWorkouts",t));return e.exists()?{id:e.id,...e.data()}:null},async update(t,e){const n=W(j,"groupWorkouts",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async complete(t,e,n=null,r=null){var a,l;const s=W(j,"groupWorkouts",t),i={...e,status:"completed",completedAt:X(),updatedAt:X()};n&&r&&n!==r?(i.completedBy=n,i.reviewStatus="pending"):i.reviewStatus="self",await _e(s,i);const o=r||n;if(o&&e.exercises)try{await Ra.checkAndUpdateGoals(o,{exercises:e.exercises})}catch(c){console.error("Goal check error:",c)}if(o)try{const h=(await Le(s)).data();let f="";h!=null&&h.groupId&&(f=((a=(await Le(W(j,"groups",h.groupId))).data())==null?void 0:a.name)||"");const{exerciseSummary:m,totalSets:y}=ad(e==null?void 0:e.exercises);await Ho.createFeedItem(o,ko.GROUP_WORKOUT,{workoutId:t,name:(h==null?void 0:h.name)||(e==null?void 0:e.name)||"Group Workout",groupName:f,groupId:h==null?void 0:h.groupId,exerciseCount:((l=e==null?void 0:e.exercises)==null?void 0:l.length)||0,exerciseSummary:m,totalSets:y},"group")}catch(c){console.error("Feed error:",c)}return{id:t,status:"completed",...i}},async approveReview(t){const e=W(j,"groupWorkouts",t);return await _e(e,{reviewStatus:"approved",reviewedAt:X(),updatedAt:X()}),{id:t,reviewStatus:"approved"}},async getPendingReviews(t){const e=se(K(j,"groupWorkouts"),J("assignedTo","==",t),J("reviewStatus","==","pending"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async delete(t){await en(W(j,"groupWorkouts",t));try{const e=se(K(j,"feed"),J("data.workoutId","==",t)),r=(await oe(e)).docs.map(s=>en(W(j,"feed",s.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async createBatch(t,e,n,r,s=[]){const i=Ui(j),o=[],a=s.length>0?s:e;for(const{assignedTo:l,name:c,exercises:h}of r){const f=W(K(j,"groupWorkouts")),m={groupId:t,groupAdmins:e,groupMembers:a,assignedTo:l,userId:l,name:c,date:n,exercises:h,status:"scheduled",createdAt:X(),updatedAt:X()};i.set(f,m),o.push({id:f.id,...m})}return await i.commit(),o}},Hb={async create(t,e){return{id:(await Et(K(j,"recurringActivities"),{...e,userId:t,active:!0,createdAt:X(),updatedAt:X()})).id,...e,userId:t,active:!0}},async getByUser(t){const e=se(K(j,"recurringActivities"),J("userId","==",t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=W(j,"recurringActivities",t);return await _e(n,{...e,updatedAt:X()}),{id:t,...e}},async delete(t){return await en(W(j,"recurringActivities",t)),t},async logSkip(t,e,n){const r=typeof e=="string"?e:e.toISOString().split("T")[0],s=W(j,"activitySkips",`${t}_${r}`);return await Kd(s,{activityId:t,userId:n,date:r,createdAt:X()}),{activityId:t,date:r,skipped:!0}},async getSkips(t,e,n){const r=se(K(j,"activitySkips"),J("userId","==",t));return(await oe(r)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.date>=e&&i.date<=n)},async removeSkip(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=W(j,"activitySkips",`${t}_${n}`);return await en(r),{activityId:t,date:n,skipped:!1}}},JF="charltonuw@gmail.com",Gb={async apply(t,e){return{id:(await Et(K(j,"trainerApplications"),{userId:t,...e,status:"pending",createdAt:X()})).id}},async getApplication(t){const e=se(K(j,"trainerApplications"),J("userId","==",t)),n=await oe(e);if(n.empty)return null;const r=n.docs.map(s=>({id:s.id,...s.data()}));return r.sort((s,i)=>{var o,a,l,c;return(((a=(o=i.createdAt)==null?void 0:o.toDate)==null?void 0:a.call(o))||0)-(((c=(l=s.createdAt)==null?void 0:l.toDate)==null?void 0:c.call(l))||0)}),r[0]},async getPendingApplications(){const t=se(K(j,"trainerApplications"),J("status","==","pending"));return(await oe(t)).docs.map(n=>({id:n.id,...n.data()}))},async reviewApplication(t,e){const n=W(j,"trainerApplications",t),r=await Le(n);if(!r.exists())throw new Error("Application not found");const s=r.data();if(await _e(n,{status:e,reviewedAt:X()}),e==="approved"){const i=W(j,"users",s.userId);await _e(i,{isTrainer:!0})}return{success:!0}},isTrainer(t,e){return e===JF?!0:(t==null?void 0:t.isTrainer)===!0}},ig={async create(t,e){return{id:(await Et(K(j,"trainerRequests"),{userId:t,...e,status:"pending",createdAt:X(),updatedAt:X()})).id}},async getByUser(t){const e=se(K(j,"trainerRequests"),J("userId","==",t));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getPending(){const t=se(K(j,"trainerRequests"),J("status","in",["pending","in_progress"]));return(await oe(t)).docs.map(n=>({id:n.id,...n.data()}))},async getAll(){const t=se(K(j,"trainerRequests"));return(await oe(t)).docs.map(n=>({id:n.id,...n.data()}))},async deny(t,e){const n=W(j,"trainerRequests",t);await _e(n,{status:"denied",denyReason:e||"",updatedAt:X()})},async delete(t){await en(W(j,"trainerRequests",t))},async claim(t,e){const n=W(j,"trainerRequests",t);await _e(n,{status:"in_progress",trainerId:e,claimedAt:X(),updatedAt:X()})},async linkWorkout(t,e){const n=W(j,"trainerRequests",t);await _e(n,{workoutId:e,updatedAt:X()})},async complete(t,e,n){const r=W(j,"trainerRequests",t);await _e(r,{status:"completed",workoutId:e,trainerNotes:n||"",completedAt:X(),updatedAt:X()})},async cancel(t){const e=W(j,"trainerRequests",t);await _e(e,{status:"cancelled",updatedAt:X()})},async get(t){const e=W(j,"trainerRequests",t),n=await Le(e);return n.exists()?{id:n.id,...n.data()}:null},async getUserSummary(t){const[e,n,r]=await Promise.all([Le(W(j,"users",t)),oe(se(K(j,"workouts"),J("userId","==",t),Rt(30))),oe(se(K(j,"goals"),J("userId","==",t)))]),s=e.exists()?e.data():{},i=r.docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.status==="completed").sort((c,h)=>{var y,_,E,A;const f=((_=(y=c.date)==null?void 0:y.toDate)==null?void 0:_.call(y))||new Date(c.date||0);return(((A=(E=h.date)==null?void 0:E.toDate)==null?void 0:A.call(E))||new Date(h.date||0))-f}),o=n.docs.map(c=>({id:c.id,...c.data()})),a={},l={};return i.slice(0,20).forEach(c=>{(c.exercises||[]).forEach(h=>{h.name&&(h.sets||[]).forEach(f=>{const m=parseFloat(f.actualWeight)||parseFloat(f.prescribedWeight)||0,y=parseInt(f.actualReps)||parseInt(f.prescribedReps)||0,_=parseInt(f.painLevel)||0;if(m>0&&y>0&&y<=12){const E=Math.round(m*(1+y/30));(!a[h.name]||E>a[h.name].e1rm)&&(a[h.name]={weight:m,reps:y,e1rm:E})}_>0&&(l[h.name]||(l[h.name]={maxPain:0,count:0}),l[h.name].count++,l[h.name].maxPain=Math.max(l[h.name].maxPain,_))})})}),{profile:{displayName:s.displayName,weight:s.weight,height:s.height,age:s.age,activityLevel:s.activityLevel},recentWorkouts:i.slice(0,5).map(c=>{var h,f,m,y,_;return{name:c.name,date:((_=(y=(m=(f=(h=c.date)==null?void 0:h.toDate)==null?void 0:f.call(h))==null?void 0:m.toISOString)==null?void 0:y.call(m))==null?void 0:_.split("T")[0])||c.date,exercises:(c.exercises||[]).map(E=>({name:E.name,type:E.type||"weight",sets:(E.sets||[]).map(A=>({prescribedWeight:A.prescribedWeight,prescribedReps:A.prescribedReps,actualWeight:A.actualWeight,actualReps:A.actualReps,rpe:A.rpe,painLevel:A.painLevel}))}))}}),maxLifts:a,painHistory:l,goals:o.filter(c=>c.status==="active").map(c=>({lift:c.lift,metricType:c.metricType,currentWeight:c.currentWeight||c.currentValue,targetWeight:c.targetWeight||c.targetValue}))}}},d9=Object.freeze(Object.defineProperty({__proto__:null,CREDIT_COSTS:b0,PREMIUM_CREDIT_COST:XF,attendanceService:YF,creditService:ah,goalService:I0,groupService:zb,groupWorkoutService:$l,healthService:qb,programService:ld,recurringActivityService:Hb,scheduleService:k0,tokenUsageService:bo,trainerRequestService:ig,trainerService:Gb,userService:Wb,workoutService:Ra},Symbol.toStringTag,{value:"Module"}));async function Dc(){const e=CS().currentUser;if(!e)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${await e.getIdToken()}`}}class ZF{constructor(){this.baseUrl=ak}async generateWorkout(e){try{const n=await Dc(),r=await fetch(`${this.baseUrl}/generate-workout`,{method:"POST",headers:n,body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to generate workout");const s=await r.json();return s.usage&&bo.log(s.usage).catch(console.error),s}catch(n){throw console.error("Generate workout error:",n),n}}async askAssistant(e,n={},r=null){try{const s=await Dc(),i={message:e,context:n};r&&(i.mode=r);const o=await fetch(`${this.baseUrl}/ask-assistant`,{method:"POST",headers:s,body:JSON.stringify(i)});if(!o.ok)throw new Error("Failed to get response");const a=await o.json();return a.usage&&bo.log(a.usage).catch(console.error),a}catch(s){throw console.error("Ask assistant error:",s),s}}async autofillWorkout(e,n){try{const r=await Dc(),s=await fetch(`${this.baseUrl}/autofill-workout`,{method:"POST",headers:r,body:JSON.stringify({workoutId:e,partialData:n})});if(!s.ok)throw new Error("Failed to autofill workout");const i=await s.json();return i.usage&&bo.log(i.usage).catch(console.error),i}catch(r){throw console.error("Autofill workout error:",r),r}}async analyzeProgress(e,n,r){try{const s=await Dc(),i=await fetch(`${this.baseUrl}/analyze-progress`,{method:"POST",headers:s,body:JSON.stringify({liftType:n,timeRange:r})});if(!i.ok)throw new Error("Failed to analyze progress");const o=await i.json();return o.usage&&bo.log(o.usage).catch(console.error),o}catch(s){throw console.error("Analyze progress error:",s),s}}async getTokenUsage(){return bo.getSummary()}}const og=new ZF,h9=()=>og.getTokenUsage();function eU(){const t=fi(),{chatOpen:e,setChatOpen:n}=$b(),{user:r,userProfile:s,updateProfile:i,isAppAdmin:o}=wr(),[a,l]=b.useState([]),[c,h]=b.useState(""),[f,m]=b.useState(!1),[y,_]=b.useState(null),[E,A]=b.useState(null),[S,w]=b.useState(!1),[x,N]=b.useState(!1),[V,L]=b.useState([]),[k,v]=b.useState(!1),T=b.useRef(null),[C,R]=b.useState(null),[D,P]=b.useState(()=>{const z=Date.now(),we=60*60*1e3,ye=24*60*60*1e3;try{const Fe=localStorage.getItem("ai_rate_limit"),Te=localStorage.getItem("ai_daily_limit");let Oe=Fe?JSON.parse(Fe):{count:0,resetTime:z+we},Ue=Te?JSON.parse(Te):{count:0,resetTime:z+ye};return z>Oe.resetTime&&(Oe={count:0,resetTime:z+we}),z>Ue.resetTime&&(Ue={count:0,resetTime:z+ye}),{...Oe,dailyCount:Ue.count,dailyResetTime:Ue.resetTime}}catch{return{count:0,resetTime:null}}}),ke=b.useRef(null),lt=b.useRef(null),Ne=60*60*1e3,xe=24*60*60*1e3,q=(C==null?void 0:C.rateLimitHourly)||8,Z=(C==null?void 0:C.rateLimitDaily)||25,ue=(C==null?void 0:C.overageCreditMultiplier)||3,ne=()=>{var z;(z=ke.current)==null||z.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{ne()},[a]),b.useEffect(()=>{var z;e&&((z=lt.current)==null||z.focus(),!E&&!S&&Ke(),C||Se())},[e]);const Se=async()=>{try{const z=await Le(W(j,"settings","ai"));z.exists()&&R(z.data())}catch{}};b.useEffect(()=>{E&&!k&&e&&nn()},[E,k,e]),b.useEffect(()=>{const z=(s==null?void 0:s.chatPersonality)||"coach";T.current&&T.current!==z&&k&&(v(!1),l([]),L([])),T.current=z},[s==null?void 0:s.chatPersonality]);const Ke=async()=>{if(r){w(!0);try{const[z,we,ye,Fe]=await Promise.all([I0.getByUser(r.uid).catch(()=>[]),qb.getByUser(r.uid,14).catch(()=>[]),k0.getByUser(r.uid).catch(()=>[]),Hb.getByUser(r.uid).catch(()=>[])]);let Te=[];try{(await oe(se(K(j,"workouts"),J("userId","==",r.uid),Rt(50)))).docs.forEach(Ge=>{var ae,Ye;const Ee=Ge.data();if(Ee.status!=="completed")return;const Ut=((Ye=(ae=Ee.date)==null?void 0:ae.toDate)==null?void 0:Ye.call(ae))||new Date(Ee.date);Te.push({...Ee,date:Ut.toISOString().split("T")[0]})})}catch(G){console.error(G)}try{(await oe(se(K(j,"groupWorkouts"),J("assignedTo","==",r.uid),Rt(30)))).docs.forEach(Ge=>{var ae,Ye;const Ee=Ge.data();if(Ee.status!=="completed")return;const Ut=((Ye=(ae=Ee.date)==null?void 0:ae.toDate)==null?void 0:Ye.call(ae))||new Date(Ee.date);Te.push({...Ee,date:Ut.toISOString().split("T")[0],isGroup:!0})})}catch(G){console.error(G)}Te.sort((G,Ge)=>new Date(Ge.date||0)-new Date(G.date||0));const Oe=Te.filter(G=>G.workoutType==="cardio").slice(0,10),Ue=Te.filter(G=>G.workoutType!=="cardio"),Lt={},Dt={},Gn={},Fr=new Date;Ue.slice(0,25).forEach(G=>{var Ut;const Ge=(Ut=G.date)!=null&&Ut.toDate?G.date.toDate():G.date?new Date(G.date):null,Ee=Ge&&!isNaN(Ge.getTime())?Math.floor((Fr-Ge)/(1e3*60*60*24)):null;(G.exercises||[]).forEach(ae=>{ae.name&&(ae.sets||[]).forEach(Ye=>{const yi=parseFloat(Ye.actualWeight)||parseFloat(Ye.prescribedWeight)||0,ws=parseInt(Ye.actualReps)||parseInt(Ye.prescribedReps)||0,Ur=parseInt(Ye.rpe)||0,_s=parseInt(Ye.painLevel)||0;if(!(!Ye.actualWeight&&!Ye.actualReps&&Ye.prescribedWeight)){if(yi>0&&ws>0&&ws<=12){const xs=Math.round(yi*(1+ws/30));(!Lt[ae.name]||xs>Lt[ae.name].e1rm)&&(Lt[ae.name]={weight:yi,reps:ws,e1rm:xs})}_s>0&&(Dt[ae.name]||(Dt[ae.name]={count:0,maxPain:0,lastDaysAgo:null,recentCount:0}),Dt[ae.name].count++,Dt[ae.name].maxPain=Math.max(Dt[ae.name].maxPain,_s),Ee!==null&&((Dt[ae.name].lastDaysAgo===null||Ee<Dt[ae.name].lastDaysAgo)&&(Dt[ae.name].lastDaysAgo=Ee),Ee<=30&&Dt[ae.name].recentCount++)),Ur>0&&(Gn[ae.name]||(Gn[ae.name]={total:0,count:0}),Gn[ae.name].total+=Ur,Gn[ae.name].count++)}})})});const vs={};Object.entries(Gn).forEach(([G,Ge])=>{vs[G]=Math.round(Ge.total/Ge.count*10)/10});const Kn={};if(we.length>0){const G=we.filter(ae=>ae.sleep).slice(0,7);G.length&&(Kn.avgSleep=Math.round(G.reduce((ae,Ye)=>ae+Ye.sleep,0)/G.length*10)/10);const Ge=we.filter(ae=>ae.protein).slice(0,7);Ge.length&&(Kn.avgProtein=Math.round(Ge.reduce((ae,Ye)=>ae+Ye.protein,0)/Ge.length));const Ee=we.filter(ae=>ae.calories).slice(0,7);Ee.length&&(Kn.avgCalories=Math.round(Ee.reduce((ae,Ye)=>ae+Ye.calories,0)/Ee.length));const Ut=we.filter(ae=>ae.weight).slice(0,3);Ut.length&&(Kn.recentWeight=Ut[0].weight)}const Qe={};s&&(s.weight&&(Qe.weight=s.weight),s.height&&(Qe.height=s.height),s.age&&(Qe.age=s.age),s.activityLevel&&(Qe.activityLevel=s.activityLevel),s.displayName&&(Qe.displayName=s.displayName)),Kn.recentWeight&&(Qe.weight=Kn.recentWeight);const Ft=Ue.slice(0,3).map(G=>({name:G.name,date:G.date,isGroup:G.isGroup||!1,groupName:G.groupName,exercises:(G.exercises||[]).map(Ge=>({name:Ge.name,type:Ge.type||"weight",sets:(Ge.sets||[]).map(Ee=>({prescribedWeight:Ee.prescribedWeight||"",prescribedReps:Ee.prescribedReps||"",actualWeight:Ee.actualWeight||"",actualReps:Ee.actualReps||"",prescribedTime:Ee.prescribedTime||"",actualTime:Ee.actualTime||"",rpe:Ee.rpe||"",painLevel:parseInt(Ee.painLevel)||0}))}))})),sr=Ue.slice(3,8).map(G=>{var Ge,Ee;return{name:G.name,date:G.date,exerciseCount:((Ge=G.exercises)==null?void 0:Ge.length)||0,exercises:(Ee=G.exercises)==null?void 0:Ee.slice(0,4).map(Ut=>{var ae;return{name:Ut.name,sets:((ae=Ut.sets)==null?void 0:ae.length)||0}})}}),go={profile:Qe,recentWorkoutsFull:Ft,recentWorkouts:sr,cardioWorkouts:Oe.slice(0,5).map(G=>({name:G.name,date:G.date,duration:G.duration,cardioType:G.cardioType,distance:G.distance})),goals:z.filter(G=>G.status==="active").map(G=>({lift:G.lift,metricType:G.metricType,currentWeight:G.currentWeight||G.currentValue,targetWeight:G.targetWeight||G.targetValue,targetDate:G.targetDate})),maxLifts:Lt,painHistory:Dt,rpeAverages:vs,health:Kn,schedules:ye.filter(G=>G.active!==!1).map(G=>({name:G.name,days:G.days,duration:G.duration})),recurringActivities:Fe.filter(G=>G.active).map(G=>({name:G.name,type:G.type,days:G.days}))};A(go)}catch(z){console.error("Error loading user context:",z),A({recentWorkouts:[],goals:[]})}finally{w(!1)}}},nn=async()=>{var we;if(!E||!r)return;const z=(s==null?void 0:s.credits)??0;if(!o&&z<b0["ask-assistant"]){l([{role:"assistant",content:"Hey! I'm your training coach. You're low on credits right now, but feel free to ask when you get more."}]),L(["What should I do today?","How's my progress?","Generate a workout","Review my last session"]),v(!0);return}N(!0);try{et();const ye=await og.askAssistant(null,{...E,personality:(s==null?void 0:s.chatPersonality)||"coach"},"greeting");l([{role:"assistant",content:ye.greeting||"Hey! Ready to train? I've got your full history  ask me anything."}]),(we=ye.quickActions)!=null&&we.length?L(ye.quickActions):L(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}catch(ye){console.error("Greeting fetch error:",ye),l([{role:"assistant",content:"Hey! I'm your training coach  I've got your full workout history loaded. Ask me anything about your lifts, pain, goals, or say 'generate a workout'."}]),L(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}finally{N(!1),v(!0)}},Ht=()=>{const z=Date.now();try{const we=s==null?void 0:s.rateLimitResetAt;if(we){const Ue=new Date(we).getTime(),Lt=localStorage.getItem("ai_rate_limit_checked");if(!Lt||Ue>parseInt(Lt))return localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit"),localStorage.setItem("ai_rate_limit_checked",String(z)),P({count:0,resetTime:z+Ne,dailyCount:0,dailyResetTime:z+xe}),null}const ye=localStorage.getItem("ai_rate_limit");let Fe=ye?JSON.parse(ye):{count:0,resetTime:z+Ne};z>Fe.resetTime&&(Fe={count:0,resetTime:z+Ne});const Te=localStorage.getItem("ai_daily_limit");let Oe=Te?JSON.parse(Te):{count:0,resetTime:z+xe};return z>Oe.resetTime&&(Oe={count:0,resetTime:z+xe}),P({...Fe,dailyCount:Oe.count,dailyResetTime:Oe.resetTime}),Oe.count>=Z||Fe.count>=q?"overage":null}catch{return null}},ut=()=>{const z=Date.now();try{const we=localStorage.getItem("ai_rate_limit");let ye=we?JSON.parse(we):{count:0,resetTime:z+Ne};z>ye.resetTime&&(ye={count:0,resetTime:z+Ne});const Fe=localStorage.getItem("ai_daily_limit");let Te=Fe?JSON.parse(Fe):{count:0,resetTime:z+xe};return z>Te.resetTime&&(Te={count:0,resetTime:z+xe}),Te.count>=Z||ye.count>=q?ue:1}catch{return 1}},et=()=>{const z=Date.now();try{const we=localStorage.getItem("ai_rate_limit");let ye=we?JSON.parse(we):{count:0,resetTime:z+Ne};z>ye.resetTime?ye={count:1,resetTime:z+Ne}:ye.count+=1,localStorage.setItem("ai_rate_limit",JSON.stringify(ye));const Fe=localStorage.getItem("ai_daily_limit");let Te=Fe?JSON.parse(Fe):{count:0,resetTime:z+xe};z>Te.resetTime?Te={count:1,resetTime:z+xe}:Te.count+=1,localStorage.setItem("ai_daily_limit",JSON.stringify(Te)),P({...ye,dailyCount:Te.count,dailyResetTime:Te.resetTime})}catch{localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit")}},ys=async z=>{if(!z.trim()||f)return;const we=o,ye=(s==null?void 0:s.credits)??0,Fe=ut(),Te=Fe>1;if(!we&&ye<Fe){const Oe=Te?`You've hit the rate limit and overage messages cost ${ue} credits each. You only have ${ye}. Resets soon.`:"You're out of AI credits. More credits coming soon  check Settings for your usage.";l(Ue=>[...Ue,{role:"user",content:z},{role:"assistant",content:Oe}]);return}Ht(),l(Oe=>[...Oe,{role:"user",content:z}]),m(!0);try{et(),r!=null&&r.uid&&!we&&i({credits:ye-Fe});const Oe=await og.askAssistant(z,{userId:r==null?void 0:r.uid,personality:(s==null?void 0:s.chatPersonality)||"coach",...E||{}});l(Ue=>[...Ue,{role:"assistant",content:Oe.message,workout:Oe.workout}])}catch{r!=null&&r.uid&&!we&&i({credits:ye}),l(Ue=>[...Ue,{role:"assistant",content:"Sorry, I couldn't process that. Please try again."}])}finally{m(!1)}},In=async z=>{if(z.preventDefault(),!c.trim()||f)return;const we=c.trim();h(""),await ys(we)},On=async z=>{await ys(z)},rn=async(z,we)=>{if(!(!r||!z)){_(we);try{const ye={name:z.name||"AI Generated Workout",date:new Date,exercises:z.exercises.map((Te,Oe)=>({id:Date.now()+Oe,name:Te.name,sets:Te.sets.map((Ue,Lt)=>{var Dt,Gn;return{id:Date.now()+Oe*100+Lt,prescribedWeight:((Dt=Ue.prescribedWeight)==null?void 0:Dt.toString())||"",prescribedReps:((Gn=Ue.prescribedReps)==null?void 0:Gn.toString())||"",actualWeight:"",actualReps:"",rpe:"",painLevel:0}}),notes:Te.notes||""})),notes:"Generated by AI Coach",status:"scheduled"},Fe=await Ra.create(r.uid,ye);l(Te=>Te.map((Oe,Ue)=>Ue===we?{...Oe,workoutSaved:!0,savedWorkoutId:Fe.id}:Oe))}catch(ye){console.error("Error saving workout:",ye),alert("Failed to save workout")}finally{_(null)}}},rr=x||!k&&S;return d.jsx(ia,{children:e&&d.jsxs(d.Fragment,{children:[d.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),d.jsxs(be.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:`fixed inset-4 lg:inset-auto lg:bottom-6 lg:right-6 lg:w-96 lg:h-[600px]
              bg-iron-900 border border-iron-700/50 rounded-2xl z-50
              flex flex-col overflow-hidden shadow-2xl`,children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-iron-800",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-9 h-9 rounded-full bg-flame-500/20 flex items-center justify-center",children:d.jsx(ro,{className:"w-4 h-4 text-flame-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-iron-100",children:"AI Coach"}),d.jsx("p",{className:"text-xs text-iron-500",children:S?"Loading your data...":E?"Your data is loaded":"Ready to help"})]})]}),d.jsx("button",{onClick:()=>n(!1),className:`p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800
                  rounded-full transition-colors`,children:d.jsx(_u,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[rr&&a.length===0&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-800 border border-iron-700 flex items-center justify-center flex-shrink-0",children:d.jsx(_p,{className:"w-4 h-4 text-flame-400"})}),d.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:d.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-400",children:[d.jsx(ss,{className:"w-3.5 h-3.5 animate-spin text-flame-400"}),d.jsx("span",{children:S?"Loading your training data...":"Getting your personalized greeting..."})]})})]}),a.map((z,we)=>{var ye,Fe,Te;return d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${z.role==="user"?"flex-row-reverse":""}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                      ${z.role==="user"?"bg-flame-500":"bg-iron-800 border border-iron-700"}`,children:z.role==="user"?d.jsx(Vb,{className:"w-4 h-4 text-white"}):d.jsx(_p,{className:"w-4 h-4 text-flame-400"})}),d.jsxs("div",{className:"max-w-[85%] space-y-2",children:[d.jsx("div",{className:`px-4 py-2.5 rounded-2xl text-sm
                        ${z.role==="user"?"bg-flame-500 text-white rounded-tr-md":"bg-iron-800 text-iron-100 rounded-tl-md"}`,children:z.content}),z.workout&&d.jsxs("div",{className:"bg-iron-800/50 border border-iron-700 rounded-xl p-3 space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Nn,{className:"w-4 h-4 text-flame-400"}),d.jsx("span",{className:"font-medium text-iron-100 text-sm",children:z.workout.name})]}),d.jsxs("span",{className:"text-xs text-iron-500",children:[(ye=z.workout.exercises)==null?void 0:ye.length," exercises"]})]}),d.jsxs("div",{className:"text-xs text-iron-400 space-y-1",children:[(Fe=z.workout.exercises)==null?void 0:Fe.slice(0,3).map((Oe,Ue)=>{var Lt;return d.jsxs("div",{children:[Oe.name,": ",(Lt=Oe.sets)==null?void 0:Lt.length," sets"]},Ue)}),((Te=z.workout.exercises)==null?void 0:Te.length)>3&&d.jsxs("div",{className:"text-iron-500",children:["+",z.workout.exercises.length-3," more..."]})]}),z.workoutSaved?d.jsx("button",{onClick:()=>{n(!1),t(`/workouts/${z.savedWorkoutId}`)},className:"w-full py-2 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:"Saved - View Workout"}):d.jsx("button",{onClick:()=>rn(z.workout,we),disabled:y===we,className:"w-full py-2 bg-flame-500/20 hover:bg-flame-500/30 text-flame-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:y===we?d.jsxs(d.Fragment,{children:[d.jsx(ss,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(S0,{className:"w-4 h-4"}),"Add to My Workouts"]})})]})]})]},we)}),f&&d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3",children:[d.jsx("div",{className:`w-8 h-8 rounded-full bg-iron-800 border border-iron-700
                    flex items-center justify-center`,children:d.jsx(_p,{className:"w-4 h-4 text-flame-400"})}),d.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:d.jsxs("div",{className:"flex gap-1",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"300ms"}})]})})]}),d.jsx("div",{ref:ke})]}),V.length>0&&a.length<=2&&!f&&!rr&&d.jsx("div",{className:"px-4 pb-2",children:d.jsx("div",{className:"flex flex-wrap gap-2",children:V.map((z,we)=>d.jsx("button",{onClick:()=>On(z),disabled:f,className:`px-3 py-1.5 text-xs bg-iron-800 text-iron-300
                        border border-iron-700 rounded-full
                        hover:border-flame-500/50 hover:text-iron-100
                        transition-colors disabled:opacity-50`,children:z},we))})}),d.jsxs("div",{className:"border-t border-iron-800",children:[ut()>1&&d.jsx("div",{className:"mx-4 mt-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:d.jsxs("p",{className:"text-[11px] text-yellow-400",children:["Rate limit reached  messages now cost ",ue," credits each until reset"]})}),d.jsxs("div",{className:"px-4 pt-2 flex justify-between text-[10px] text-iron-600",children:[d.jsxs("span",{children:[(s==null?void 0:s.credits)??0," credits left"]}),d.jsxs("span",{children:[ut()," credit",ut()>1?"s":""," / msg"]})]}),d.jsx("form",{onSubmit:In,className:"px-4 pb-4 pt-1.5",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{ref:lt,type:"text",value:c,onChange:z=>h(z.target.value),placeholder:"Ask about your workouts...","aria-label":"Chat message",className:`flex-1 bg-iron-800 text-iron-100 px-4 py-2.5 rounded-full
                    border border-iron-700 focus:border-flame-500/50 focus:outline-none
                    placeholder:text-iron-500 text-sm`}),d.jsx("button",{type:"submit",disabled:!c.trim()||f,className:`w-10 h-10 rounded-full bg-flame-500 text-white
                    flex items-center justify-center
                    hover:bg-flame-400 disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors`,children:f?d.jsx(ss,{className:"w-4 h-4 animate-spin"}):d.jsx(uF,{className:"w-4 h-4"})})]})})]})]})]})})}const Zx=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,tU=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;function nU(){const[t,e]=b.useState(null),[n,r]=b.useState(!1),[s,i]=b.useState(!1),[o,a]=b.useState(!1);b.useEffect(()=>{if(tU())return;const h=localStorage.getItem("installPromptDismissed");if(h&&Date.now()-parseInt(h)<7*24*60*60*1e3)return;const f=m=>{m.preventDefault(),e(m),setTimeout(()=>r(!0),3e3)};if(window.addEventListener("beforeinstallprompt",f),Zx()){const m=parseInt(localStorage.getItem("appVisits")||"0")+1;localStorage.setItem("appVisits",String(m)),m>=3&&setTimeout(()=>r(!0),3e3)}return()=>window.removeEventListener("beforeinstallprompt",f)},[]);const l=async()=>{t?(t.prompt(),(await t.userChoice).outcome==="accepted"&&r(!1),e(null)):Zx()&&i(!0)},c=()=>{r(!1),a(!0),localStorage.setItem("installPromptDismissed",String(Date.now()))};return!n||o?null:s?d.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end justify-center p-4",children:d.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-2xl p-5 max-w-sm w-full mb-4 shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Add to Home Screen"}),d.jsx("button",{onClick:c,className:"text-iron-500 hover:text-iron-300",children:d.jsx(_u,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:d.jsx(dF,{className:"w-4 h-4 text-blue-400"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-iron-200 font-medium",children:"1. Tap the Share button"}),d.jsx("p",{className:"text-xs text-iron-500",children:"In Safari's bottom toolbar"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:d.jsx(S0,{className:"w-4 h-4 text-blue-400"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'2. Tap "Add to Home Screen"'}),d.jsx("p",{className:"text-xs text-iron-500",children:"Scroll down in the share sheet"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:d.jsx(Hx,{className:"w-4 h-4 text-green-400"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'3. Tap "Add"'}),d.jsx("p",{className:"text-xs text-iron-500",children:"The app will appear on your home screen"})]})]})]}),d.jsx("button",{onClick:c,className:"w-full mt-4 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Got it"})]})}):d.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 lg:left-auto lg:right-6 lg:bottom-6 lg:max-w-sm",children:d.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-xl p-3 shadow-xl flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:d.jsx(Hx,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-iron-100",children:"Install Bench Only"}),d.jsx("p",{className:"text-xs text-iron-500",children:"Add to home screen for the full experience"})]}),d.jsx("button",{onClick:l,className:"px-3 py-1.5 bg-flame-500 text-white text-sm font-medium rounded-lg hover:bg-flame-400 transition-colors flex-shrink-0",children:"Install"}),d.jsx("button",{onClick:c,className:"text-iron-600 hover:text-iron-400 flex-shrink-0",children:d.jsx(_u,{className:"w-4 h-4"})})]})})}class rU extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){var e;return this.state.hasError?d.jsx("div",{className:"min-h-[50vh] flex items-center justify-center p-6",children:d.jsxs("div",{className:"text-center max-w-md",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:d.jsx(Y3,{className:"w-8 h-8 text-red-400"})}),d.jsx("h2",{className:"text-lg font-display text-iron-100 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-sm text-iron-500 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsxs("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"btn-secondary flex items-center gap-2 text-sm",children:[d.jsx(aF,{className:"w-4 h-4"}),"Try Again"]}),d.jsxs("button",{onClick:()=>{window.location.href="/today"},className:"btn-primary flex items-center gap-2 text-sm",children:[d.jsx(Ob,{className:"w-4 h-4"}),"Go Home"]})]})]})}):this.props.children}}const sU=[{path:"/today",icon:Ob,label:"Today",badgeKey:"workouts"},{path:"/workouts",icon:Nn,label:"Workouts"},{path:"/programs",icon:sF,label:"Programs",beta:!0},{path:"/groups",icon:Wi,label:"Groups"},{path:"/feed",icon:Nb,label:"Feed"},{path:"/goals",icon:$i,label:"Goals"},{path:"/docs",icon:Ul,label:"Docs"},{path:"/profile",icon:Vb,label:"Profile"}];function iU(){const t=ao(),e=fi(),{user:n,userProfile:r,signOut:s,signInWithGoogle:i,isGuest:o,isRealAdmin:a,realUser:l,impersonating:c,stopImpersonating:h}=wr(),{sidebarOpen:f,setSidebarOpen:m,chatOpen:y,toggleChat:_}=$b(),[E,A]=b.useState(!1),[S,w]=b.useState(0),[x,N]=b.useState(0);b.useEffect(()=>{n&&!o&&$l.getPendingReviews(n.uid).then(T=>w(T.length)).catch(T=>console.error("[Layout]",T.message))},[n,o,t.pathname]),b.useEffect(()=>{n&&!o&&od.getUnread(n.uid).then(T=>N(T.length)).catch(T=>console.error("[Layout]",T.message))},[n,o,t.pathname]),b.useEffect(()=>{a&&(l!=null&&l.uid)?oa.setAdminContext(l.uid):oa.clearAdminContext()},[a,l==null?void 0:l.uid]),b.useEffect(()=>{n&&!o&&oa.logPageView(n.uid,t.pathname)},[t.pathname,n,o]);const V=a,L=Gb.isTrainer(r,n==null?void 0:n.email),k=(()=>{let T=[...sU];return L&&T.push({path:"/trainer",icon:tF,label:"Trainer",isTrainer:!0}),V&&T.push({path:"/admin",icon:cF,label:"Admin",isAdmin:!0}),T})(),v=async()=>{await s(),e("/")};return d.jsxs("div",{className:"min-h-screen bg-iron-950 flex overflow-x-hidden",children:[o&&d.jsx("div",{className:`fixed left-0 right-0 z-30 bg-gradient-to-r from-flame-600 to-flame-500 text-white py-2.5 px-4
          top-14 lg:top-0`,children:d.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm min-w-0",children:[d.jsx(oh,{className:"w-4 h-4 flex-shrink-0"}),d.jsx("span",{className:"hidden sm:inline",children:"Demo Mode  your data won't be saved"}),d.jsx("span",{className:"sm:hidden truncate",children:"Demo Mode"})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[d.jsx("button",{onClick:v,className:"px-3 py-1 text-xs font-semibold bg-white/20 hover:bg-white/30 rounded-md transition-colors",children:"Exit Demo"}),d.jsx("button",{onClick:i,className:"px-3 py-1 text-xs font-semibold bg-white text-flame-600 hover:bg-white/90 rounded-md transition-colors",children:"Sign Up Free"})]})]})}),d.jsxs("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30
          ${f?"w-64":"w-20"} 
          ${o?"top-10":"top-0"}
          bg-iron-900/80 backdrop-blur-sm border-r border-iron-800
          transition-all duration-300`,children:[d.jsx("div",{className:"h-16 flex items-center px-4 border-b border-iron-800",children:d.jsxs($e,{to:"/today",className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-plate bg-flame-500 flex items-center justify-center",children:d.jsx(Nn,{className:"w-5 h-5 text-white"})}),f&&d.jsx(be.span,{initial:{opacity:0},animate:{opacity:1},className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]})}),d.jsx("nav",{className:"flex-1 py-4 px-2 space-y-1 overflow-y-auto",children:k.map(T=>{const C=t.pathname===T.path||T.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return d.jsxs($e,{to:T.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-plate
                  transition-all duration-200 group relative
                  ${C?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[C&&d.jsx(be.div,{layoutId:"activeNav",className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-flame-500 rounded-r"}),d.jsxs("div",{className:"relative flex-shrink-0",children:[d.jsx(T.icon,{className:"w-5 h-5"}),T.badgeKey==="workouts"&&S>0&&d.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:S>9?"9+":S}),T.path==="/feed"&&x>0&&d.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:x>9?"9+":x})]}),f&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium",children:T.label}),T.beta&&d.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]})]},T.path)})}),d.jsxs("div",{className:"p-4 border-t border-iron-800",children:[!o&&f&&(r==null?void 0:r.credits)!==void 0&&d.jsxs($e,{to:"/settings",className:"flex items-center gap-2 px-3 py-2 mb-3 rounded-lg bg-iron-800/50 hover:bg-iron-800 transition-colors",children:[d.jsx(so,{className:"w-4 h-4 text-flame-400"}),d.jsxs("span",{className:"text-sm text-iron-300",children:[d.jsx("span",{className:"font-medium text-iron-200",children:r.credits})," credits"]})]}),d.jsxs("div",{className:`flex items-center gap-3 ${f?"":"justify-center"}`,children:[d.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-9 h-9 rounded-full border-2 border-iron-700"}),f&&d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:n==null?void 0:n.displayName}),d.jsx("p",{className:"text-xs text-iron-500 truncate",children:(r==null?void 0:r.role)||"Member"})]})]}),f&&d.jsxs("button",{onClick:v,className:`mt-3 w-full flex items-center justify-center gap-2 px-3 py-2
                text-iron-400 hover:text-red-400 bg-iron-800/50 hover:bg-red-500/10
                rounded-plate transition-colors text-sm`,children:[d.jsx(Kx,{className:"w-4 h-4"}),"Sign Out"]})]}),d.jsx("button",{onClick:()=>m(!f),className:`absolute -right-3 top-20 w-6 h-6 bg-iron-800 border border-iron-700
            rounded-full flex items-center justify-center text-iron-400
            hover:text-iron-100 hover:border-iron-600 transition-colors`,children:d.jsx(Ns,{className:`w-4 h-4 transition-transform ${f?"rotate-180":""}`})})]}),d.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 bg-iron-900 border-b border-iron-800 z-40",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:d.jsxs("div",{className:"h-14 flex items-center justify-between px-4",children:[d.jsxs($e,{to:"/today",className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:d.jsx(Nn,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[!o&&(r==null?void 0:r.credits)!==void 0&&d.jsxs($e,{to:"/settings",className:"flex items-center gap-1 px-2 py-1 rounded-full bg-iron-800/80 mr-1",children:[d.jsx(so,{className:"w-3 h-3 text-flame-400"}),d.jsx("span",{className:"text-xs font-medium text-iron-300",children:r.credits})]}),x>0&&d.jsxs($e,{to:"/feed",className:"w-10 h-10 flex items-center justify-center text-iron-300 relative",children:[d.jsx(Z3,{className:"w-5 h-5"}),d.jsx("span",{className:"absolute top-1.5 right-1.5 w-4 h-4 bg-flame-500 rounded-full text-[10px] text-white flex items-center justify-center font-medium",children:x>9?"9+":x})]}),d.jsx("button",{onClick:()=>A(!0),className:"w-12 h-12 flex items-center justify-center text-iron-300 active:bg-iron-800 rounded-xl transition-colors",children:d.jsx(oF,{className:"w-7 h-7"})})]})]})}),d.jsxs("div",{className:"lg:hidden fixed bottom-6 right-4 z-30 flex flex-col gap-3",style:{marginBottom:"env(safe-area-inset-bottom, 0px)"},children:[t.pathname!=="/form-check"&&d.jsxs("button",{onClick:()=>e("/form-check"),className:`w-11 h-11 bg-iron-800 border border-iron-700 hover:bg-iron-700
              rounded-full shadow-lg flex items-center justify-center transition-all relative`,children:[d.jsx(Bl,{className:"w-5 h-5 text-purple-400"}),d.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]}),d.jsx("button",{onClick:_,className:`w-14 h-14 bg-flame-500 hover:bg-flame-600 
            active:bg-flame-700 rounded-full shadow-lg shadow-flame-500/30 
            flex items-center justify-center transition-all`,children:d.jsx(wu,{className:"w-6 h-6 text-white"})})]}),d.jsx(ia,{children:E&&d.jsxs(d.Fragment,{children:[d.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),d.jsxs(be.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:`lg:hidden fixed right-0 top-0 bottom-0 w-72 bg-iron-900 z-50
                border-l border-iron-800 flex flex-col`,children:[d.jsxs("div",{className:"h-14 flex items-center justify-between px-4 border-b border-iron-800",children:[d.jsx("span",{className:"font-display text-lg text-iron-50",children:"Menu"}),d.jsx("button",{onClick:()=>A(!1),className:"p-2 text-iron-400 hover:text-iron-100",children:d.jsx(_u,{className:"w-5 h-5"})})]}),d.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:k.map(T=>{const C=t.pathname===T.path||T.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return d.jsxs($e,{to:T.path,onClick:()=>A(!1),className:`flex items-center gap-4 px-4 py-4 rounded-plate
                        transition-colors
                        ${C?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(T.icon,{className:"w-6 h-6"}),T.badgeKey==="workouts"&&S>0&&d.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:S>9?"9+":S}),T.path==="/feed"&&x>0&&d.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:x>9?"9+":x})]}),d.jsx("span",{className:"font-medium text-lg",children:T.label}),T.beta&&d.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]},T.path)})}),d.jsxs("div",{className:"p-4 border-t border-iron-800",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-10 h-10 rounded-full border-2 border-iron-700"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-iron-100",children:n==null?void 0:n.displayName}),d.jsx("p",{className:"text-sm text-iron-500",children:n==null?void 0:n.email})]})]}),d.jsxs("button",{onClick:v,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5
                    text-red-400 bg-red-500/10 hover:bg-red-500/20
                    rounded-plate transition-colors`,children:[d.jsx(Kx,{className:"w-4 h-4"}),"Sign Out"]})]})]})]})}),d.jsx("main",{className:`flex-1 min-w-0 transition-all duration-300
        ${f?"lg:ml-64":"lg:ml-20"}
        ${o?"pt-[calc(env(safe-area-inset-top,0px)+3.5rem+2.5rem)] lg:pt-16":"pt-[calc(env(safe-area-inset-top,0px)+3.5rem)] lg:pt-0"}`,children:d.jsxs("div",{className:"min-h-screen p-4 lg:p-6 overflow-x-hidden",children:[c&&d.jsxs("div",{className:"mb-4 -mt-1 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-center gap-3 flex-wrap",children:[d.jsx(oh,{className:"w-4 h-4 text-amber-400 flex-shrink-0"}),d.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["Viewing as ",c.displayName||c.email]}),d.jsx("button",{onClick:()=>{h(),e("/admin")},className:"ml-auto px-3 py-1 text-xs font-medium bg-amber-500/20 hover:bg-amber-500/30 text-amber-300 rounded-lg transition-colors",children:"Exit"})]}),d.jsx(rU,{children:d.jsx(MR,{})},t.pathname)]})}),d.jsxs("div",{className:`hidden lg:flex fixed bottom-6 right-6 z-30 flex-col gap-3 transition-all duration-200
        ${y?"scale-0 opacity-0":"scale-100 opacity-100"}`,children:[t.pathname!=="/form-check"&&d.jsxs("button",{onClick:()=>e("/form-check"),className:`w-11 h-11 rounded-full bg-iron-800 border border-iron-700 text-purple-400
              flex items-center justify-center shadow-lg relative
              hover:bg-iron-700 transition-all duration-200`,title:"Form Check (Beta)",children:[d.jsx(Bl,{className:"w-5 h-5"}),d.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]}),d.jsx("button",{onClick:_,className:`w-14 h-14 rounded-full bg-flame-500 text-white
            flex items-center justify-center shadow-glow-lg
            hover:bg-flame-400 transition-all duration-200`,children:d.jsx(wu,{className:"w-6 h-6"})})]}),d.jsx(nU,{}),d.jsx(eU,{})]})}const eT=[{text:"Reviewing your recent training sessions...",icon:"brain",delay:0},{text:"Analyzing strength progression trends...",icon:"calc",delay:800},{text:"Checking for pain history and injury risks...",icon:"alert",delay:1600},{text:"Calculating working weights from your e1RM data...",icon:"calc",delay:2400},{text:"Selecting exercises based on your focus area...",icon:"dumbbell",delay:3200},{text:"Building optimal set and rep schemes...",icon:"dumbbell",delay:4e3},{text:"Writing personalized coaching notes...",icon:"msg",delay:4800},{text:"Workout ready!",icon:"check",delay:5600}];function oU(){const[t,e]=b.useState([]),[n,r]=b.useState(!1),[s,i]=b.useState(!1),o=b.useRef(null),a=b.useRef([]),l=()=>{e([]),r(!0),i(!0),a.current.forEach(clearTimeout),a.current=[],eT.forEach((h,f)=>{const m=setTimeout(()=>{e(y=>[...y,h]),f===eT.length-1&&r(!1)},h.delay);a.current.push(m)})};b.useEffect(()=>()=>a.current.forEach(clearTimeout),[]),b.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t]);const c={brain:d.jsx(sg,{className:"w-3 h-3 text-flame-400"}),alert:d.jsx("span",{className:"w-3 h-3 text-amber-400 text-[10px] leading-none flex items-center justify-center",children:""}),calc:d.jsx(ro,{className:"w-3 h-3 text-purple-400"}),dumbbell:d.jsx(Nn,{className:"w-3 h-3 text-cyan-400"}),msg:d.jsx(wu,{className:"w-3 h-3 text-blue-400"}),check:d.jsx(no,{className:"w-3 h-3 text-green-400"})};return d.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[d.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-iron-800 bg-iron-900",children:[d.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500/20 flex items-center justify-center",children:d.jsx(sg,{className:"w-3.5 h-3.5 text-flame-400"})}),d.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Workout Generator"}),n&&d.jsx(ss,{className:"w-4 h-4 text-flame-400 animate-spin ml-auto"}),!n&&s&&d.jsx(no,{className:"w-4 h-4 text-green-400 ml-auto"})]}),d.jsx("div",{ref:o,className:"p-4 min-h-[180px] max-h-[220px] overflow-y-auto",children:s?d.jsxs("div",{className:"space-y-2",children:[t.map((h,f)=>d.jsxs(be.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.25},className:"flex items-start gap-2.5",children:[d.jsx("div",{className:"mt-0.5 w-5 h-5 rounded bg-iron-800 flex items-center justify-center flex-shrink-0",children:c[h.icon]}),d.jsx("p",{className:`text-sm leading-relaxed ${h.icon==="check"?"text-green-400 font-medium":"text-iron-300"}`,children:h.text})]},f)),n&&d.jsxs("div",{className:"flex items-center gap-1.5 pt-1 ml-7",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse"}),d.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),d.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),!n&&s&&d.jsx("button",{onClick:l,className:"text-xs text-iron-500 hover:text-iron-300 mt-2 ml-7",children:"Run again"})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-[160px] gap-3",children:[d.jsx("p",{className:"text-sm text-iron-500",children:"See how the AI builds your workout"}),d.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-flame-500 hover:bg-flame-600 text-white text-sm rounded-lg transition-colors",children:[d.jsx(id,{className:"w-3.5 h-3.5"}),"Run Demo"]})]})})]})}function aU(){return d.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-iron-800",children:[d.jsx("p",{className:"text-[10px] text-iron-500",children:"Tuesday, February 11"}),d.jsx("p",{className:"text-sm font-display text-iron-100",children:"Good morning, Alex"})]}),d.jsxs("div",{className:"p-3 space-y-2.5",children:[d.jsx("div",{className:"bg-iron-800/60 rounded-xl p-3 border border-flame-500/20",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500/10 flex items-center justify-center",children:d.jsx(Nn,{className:"w-5 h-5 text-flame-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:"Push Day  Chest & Triceps"}),d.jsx("p",{className:"text-[11px] text-iron-500",children:"6 exercises  AI Generated"})]})]})}),d.jsx("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:d.jsx("div",{className:"flex gap-1.5 justify-between",children:["M","T","W","T","F","S","S"].map((t,e)=>d.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d.jsx("span",{className:`text-[9px] ${e===1?"text-flame-400":"text-iron-600"}`,children:t}),d.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-[10px] ${e===0?"bg-green-500/20 text-green-400":e===1?"bg-flame-500/20 text-flame-400 ring-1 ring-flame-500/30":e===4?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/20":"bg-iron-800/50 text-iron-600"}`,children:10+e})]},e))})}),d.jsxs("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[d.jsxs("span",{className:"text-[10px] text-iron-400 flex items-center gap-1",children:[d.jsx($i,{className:"w-3 h-3 text-flame-400"})," Bench Press 225 lbs"]}),d.jsx("span",{className:"text-[10px] text-flame-400",children:"87%"})]}),d.jsx("div",{className:"h-1.5 bg-iron-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-flame-500 to-flame-400 rounded-full",style:{width:"87%"}})})]})]})]})}function lU(){return d.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:d.jsx(Wi,{className:"w-3.5 h-3.5 text-cyan-400"})}),d.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Morning Crew"}),d.jsx("span",{className:"text-[10px] text-iron-500 ml-auto",children:"3 athletes"})]}),d.jsxs("div",{className:"p-3 space-y-2",children:[[{name:"You",status:"Completed",color:"green"},{name:"Jordan",status:"In Progress",color:"amber"},{name:"Sam",status:"Assigned",color:"iron"}].map((t,e)=>d.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2.5 bg-iron-800/40 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-iron-700 flex items-center justify-center text-[10px] text-iron-400",children:t.name[0]}),d.jsx("span",{className:"text-xs text-iron-300",children:t.name})]}),d.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${t.color==="green"?"bg-green-500/20 text-green-400":t.color==="amber"?"bg-amber-500/20 text-amber-400":"bg-iron-700 text-iron-500"}`,children:t.status})]},e)),d.jsx("div",{className:"pt-1 text-[10px] text-iron-500 text-center",children:"AI generates personalized weights for each athlete"})]})]})}function uU(){const t=[{phase:"Setup",score:9,color:"green"},{phase:"Descent",score:8,color:"green"},{phase:"Bottom",score:6,color:"yellow"},{phase:"Ascent",score:7,color:"yellow"},{phase:"Lockout",score:9,color:"green"}];return d.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/15 flex items-center justify-center",children:d.jsx("span",{className:"text-lg font-display font-bold text-green-400",children:"8"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Barbell Back Squat"}),d.jsx("p",{className:"text-[10px] text-iron-500",children:"Good depth, minor knee cave on ascent"})]}),d.jsx("span",{className:"text-[10px] text-iron-500",children:"5 frames"})]}),d.jsxs("div",{className:"px-4 pt-3 pb-2",children:[d.jsx("div",{className:"flex gap-1 mb-2",children:t.map((e,n)=>d.jsx("div",{className:`flex-1 h-1.5 rounded-full ${e.color==="green"?"bg-green-500":"bg-yellow-500"} ${n===2?"ring-1 ring-white/30":"opacity-50"}`},n))}),d.jsxs("div",{className:"text-[10px] text-iron-500 flex justify-between",children:[d.jsx("span",{children:"Setup"}),d.jsx("span",{children:"Lockout"})]})]}),d.jsx("div",{className:"px-4 pb-3",children:d.jsxs("div",{className:"bg-iron-800/50 rounded-lg p-2.5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[d.jsx("span",{className:"text-[10px] font-semibold text-yellow-400",children:"Frame 3  Bottom"}),d.jsx("span",{className:"text-[10px] font-bold text-yellow-400",children:"6/10"})]}),d.jsx("p",{className:"text-[11px] text-iron-400 leading-relaxed",children:"Slight knee cave at the bottom position. Depth is good  hip crease below knee line."}),d.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[d.jsx("span",{className:"text-flame-400 text-[10px]",children:""}),d.jsx("span",{className:"text-[10px] text-iron-500",children:"Push knees out over toes on the way down"})]})]})})]})}function cU(){const t=fi(),{user:e,signInWithGoogle:n,signInAsGuest:r,loading:s}=wr(),[i,o]=b.useState(null),[a,l]=b.useState(!1);b.useEffect(()=>{e&&t("/today")},[e,t]);const c=async()=>{o(null),l(!0);try{const f=await n();f.success?t("/today"):f.error!=="cancelled"&&o(f.error)}catch{o("Something went wrong. Please try again.")}finally{l(!1)}},h=()=>{r(),t("/today")};return d.jsxs("div",{className:"min-h-screen bg-iron-950 overflow-x-hidden",children:[d.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[d.jsx("div",{className:"absolute -top-32 right-0 w-[500px] h-[500px] bg-flame-500/[0.07] rounded-full blur-[120px]"}),d.jsx("div",{className:"absolute bottom-0 -left-32 w-[400px] h-[400px] bg-cyan-500/[0.04] rounded-full blur-[100px]"})]}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("header",{className:"py-5 px-5 sm:px-8",children:d.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2.5",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center shadow-lg shadow-flame-500/20",children:d.jsx(Nn,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wider",children:"BENCH ONLY"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs($e,{to:"/docs",className:"flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[d.jsx(Ul,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"hidden sm:inline",children:"Docs"})]}),d.jsxs("button",{onClick:h,className:"hidden sm:flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[d.jsx(id,{className:"w-3.5 h-3.5"}),"Try Demo"]}),d.jsx("button",{onClick:c,disabled:s||a,className:`flex items-center gap-2 px-4 py-2 bg-white text-iron-900
                  rounded-lg font-medium text-sm hover:bg-iron-100 transition-all disabled:opacity-50`,children:s||a?d.jsx(ss,{className:"w-4 h-4 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign In"]})})]})]})}),d.jsx("section",{className:"px-5 sm:px-8 pt-8 sm:pt-16 pb-12",children:d.jsx("div",{className:"max-w-5xl mx-auto",children:d.jsxs(be.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-xl",children:[d.jsx("h1",{className:"font-display text-display-lg sm:text-display-xl text-iron-50 mb-4",children:"TRAIN SMARTER"}),d.jsx("p",{className:"text-lg sm:text-xl text-iron-400 leading-relaxed mb-8",children:"AI-powered workout tracking. Generate personalized workouts, train with friends, and track your progress  all free."}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[d.jsxs("button",{onClick:c,disabled:s||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?d.jsx(ss,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&d.jsx(sh,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),d.jsxs("button",{onClick:h,className:`flex items-center justify-center gap-2 px-6 py-3.5 
                    bg-iron-800/80 text-iron-200 border border-iron-700
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[d.jsx(id,{className:"w-4 h-4"}),"Try Demo"]})]}),d.jsxs($e,{to:"/docs",className:"inline-flex items-center gap-1.5 text-sm text-iron-500 hover:text-iron-300 transition-colors mt-4",children:[d.jsx(Ul,{className:"w-3.5 h-3.5"}),"Read the docs  how it works, calculations, AI system"]}),i&&d.jsxs("p",{className:"text-sm text-red-400 mt-3",children:["Sign-in failed: ",i]})]})})}),d.jsx("section",{className:"px-5 sm:px-8 pb-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsx(be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[d.jsxs("div",{className:"pt-2",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(ro,{className:"w-5 h-5 text-flame-400"}),d.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI THAT KNOWS YOUR BODY"})]}),d.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"The AI reviews your lift history, e1RM data, RPE trends, and pain flags to generate workouts tailored to you. It avoids exercises that cause you pain and progressively overloads based on real data."}),d.jsx("div",{className:"space-y-2",children:["Analyzes your actual training history","Calculates working weights from your maxes","Skips exercises flagged for pain","Warm-up ramps and 1RM test protocols","Bodyweight and hotel/travel modes"].map((f,m)=>d.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[d.jsx(no,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),f]},m))})]}),d.jsx(oU,{})]})}),d.jsx(be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:d.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(so,{className:"w-5 h-5 text-flame-400"}),d.jsx("h3",{className:"font-display text-xl text-iron-100",children:"YOUR DAY AT A GLANCE"})]}),d.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"See today's workout, weekly progress, goal tracking, and community activity  all on one screen."}),d.jsx(aU,{})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Wi,{className:"w-5 h-5 text-cyan-400"}),d.jsx("h3",{className:"font-display text-xl text-iron-100",children:"TRAIN TOGETHER"})]}),d.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"Create groups, assign AI-generated workouts to your team, and track everyone's progress. Great for coaches and gym crews."}),d.jsx(lU,{})]})]})}),d.jsx(be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[d.jsxs("div",{className:"pt-2",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Bl,{className:"w-5 h-5 text-purple-400"}),d.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI FORM CHECK"}),d.jsx("span",{className:"text-[10px] font-semibold px-1.5 py-0.5 rounded-full bg-purple-500/20 text-purple-400 uppercase",children:"Beta"})]}),d.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"Upload a video of your lift and get instant frame-by-frame form analysis from AI. It detects the exercise, scores each phase of the movement, and gives you specific coaching cues."}),d.jsx("div",{className:"space-y-2",children:["Smart motion detection focuses on the actual lift","Per-frame scores with phase detection","Specific coaching cues and corrections","Video never leaves your device  only frames are sent"].map((f,m)=>d.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[d.jsx(no,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),f]},m))})]}),d.jsx(uU,{})]})}),d.jsx(be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-16",children:d.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{icon:ro,label:"AI Workouts"},{icon:Bl,label:"AI Form Check"},{icon:Wi,label:"Group Training"},{icon:$i,label:"Goal Tracking"},{icon:fF,label:"1RM Test Mode"},{icon:Nb,label:"Cardio Tracking"},{icon:Db,label:"Calendar"},{icon:Nn,label:"1RM Calculator"},{icon:sg,label:"AI Coach Chat"}].map(({icon:f,label:m},y)=>d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800/60 border border-iron-700/40 rounded-full text-xs text-iron-300",children:[d.jsx(f,{className:"w-3 h-3 text-iron-500"}),m]},y))})}),d.jsxs(be.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center pb-12",children:[d.jsx("h2",{className:"font-display text-3xl sm:text-4xl text-iron-100 mb-3",children:"START TRAINING TODAY"}),d.jsx("p",{className:"text-iron-400 mb-6",children:"Free to use. 50 credits to start  earn more as you train."}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[d.jsxs("button",{onClick:c,disabled:s||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?d.jsx(ss,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&d.jsx(sh,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),d.jsxs("button",{onClick:h,className:`flex items-center justify-center gap-2 px-6 py-3.5 
                    bg-iron-800/80 text-iron-200 border border-iron-700
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[d.jsx(id,{className:"w-4 h-4"}),"Explore Demo"]})]})]})]})}),d.jsx("footer",{className:"py-6 px-5 sm:px-8 border-t border-iron-800/50",children:d.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500 flex items-center justify-center",children:d.jsx(Nn,{className:"w-3.5 h-3.5 text-white"})}),d.jsx("span",{className:"font-display text-sm text-iron-500",children:"BENCH ONLY"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs($e,{to:"/docs",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[d.jsx(Ul,{className:"w-3 h-3"})," Docs"]}),d.jsxs("a",{href:"/ai-form-check",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[d.jsx(Bl,{className:"w-3 h-3"})," AI Form Check"]}),d.jsx("a",{href:"https://azoni.ai",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Built by Azoni"}),d.jsxs("p",{className:"text-xs text-iron-600",children:[" ",new Date().getFullYear()]})]})]})})]})]})}const Ti={NONE:"none",PENDING_SENT:"pending_sent",PENDING_RECEIVED:"pending_received",FRIENDS:"friends"},ag={async sendRequest(t,e){if(t===e)throw new Error("Cannot friend yourself");const n=await this.getFriendshipStatus(t,e);if(n.status===Ti.FRIENDS)throw new Error("Already friends");if(n.status===Ti.PENDING_SENT)throw new Error("Request already sent");if(n.status===Ti.PENDING_RECEIVED)return this.acceptRequest(n.requestId);const r=await Et(K(j,"friendRequests"),{from:t,to:e,status:"pending",createdAt:X()});try{await Et(K(j,"notifications"),{userId:e,type:"friend_request",fromUserId:t,read:!1,createdAt:X()})}catch(s){console.error("Notification error:",s)}return{id:r.id}},async acceptRequest(t){const e=W(j,"friendRequests",t),n=await Le(e);if(!n.exists())throw new Error("Request not found");const{from:r,to:s}=n.data(),i=[r,s].sort(),o=Ui(j),a=W(K(j,"friendships"));o.set(a,{users:i,user1:i[0],user2:i[1],createdAt:X()}),o.delete(e),await o.commit();try{await Et(K(j,"notifications"),{userId:r,type:"friend_accepted",fromUserId:s,read:!1,createdAt:X()})}catch(l){console.error("Notification error:",l)}return{id:a.id}},async declineRequest(t){await en(W(j,"friendRequests",t))},async cancelRequest(t){await en(W(j,"friendRequests",t))},async removeFriend(t,e){const n=await this._findFriendship(t,e);n&&await en(W(j,"friendships",n.id))},async getFriends(t){const e=se(K(j,"friendships"),J("user1","==",t)),n=se(K(j,"friendships"),J("user2","==",t)),[r,s]=await Promise.all([oe(e),oe(n)]),i=new Set;return r.docs.forEach(o=>{const l=o.data().users.find(c=>c!==t);l&&i.add(l)}),s.docs.forEach(o=>{const l=o.data().users.find(c=>c!==t);l&&i.add(l)}),[...i]},async getFriendSet(t){const e=await this.getFriends(t);return new Set(e)},async getReceivedRequests(t){const e=se(K(j,"friendRequests"),J("to","==",t),J("status","==","pending"),Mt("createdAt","desc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getSentRequests(t){const e=se(K(j,"friendRequests"),J("from","==",t),J("status","==","pending"),Mt("createdAt","desc"));return(await oe(e)).docs.map(r=>({id:r.id,...r.data()}))},async getFriendshipStatus(t,e){const n=await this._findFriendship(t,e);if(n)return{status:Ti.FRIENDS,friendshipId:n.id};const r=se(K(j,"friendRequests"),J("from","==",t),J("to","==",e),J("status","==","pending")),s=await oe(r);if(!s.empty)return{status:Ti.PENDING_SENT,requestId:s.docs[0].id};const i=se(K(j,"friendRequests"),J("from","==",e),J("to","==",t),J("status","==","pending")),o=await oe(i);return o.empty?{status:Ti.NONE}:{status:Ti.PENDING_RECEIVED,requestId:o.docs[0].id}},async getFriendCount(t){return(await this.getFriends(t)).length},async _findFriendship(t,e){const n=[t,e].sort(),r=se(K(j,"friendships"),J("user1","==",n[0]),J("user2","==",n[1])),s=await oe(r);return s.empty?null:{id:s.docs[0].id,...s.docs[0].data()}}};function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}function Vr(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function St(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function jn(t){St(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||lh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function dU(t,e){St(2,arguments);var n=jn(t),r=Vr(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function hU(t,e){St(2,arguments);var n=jn(t).getTime(),r=Vr(e);return new Date(n+r)}var fU={};function Ha(){return fU}function Tp(t,e){var n,r,s,i,o,a,l,c;St(1,arguments);var h=Ha(),f=Vr((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=jn(t),y=m.getDay(),_=(y<f?7:0)+y-f;return m.setDate(m.getDate()-_),m.setHours(0,0,0,0),m}function pU(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function uh(t){St(1,arguments);var e=jn(t);return e.setHours(0,0,0,0),e}function mU(t,e){St(2,arguments);var n=uh(t),r=uh(e);return n.getTime()===r.getTime()}function gU(t){return St(1,arguments),t instanceof Date||lh(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yU(t){if(St(1,arguments),!gU(t)&&typeof t!="number")return!1;var e=jn(t);return!isNaN(Number(e))}function tT(t,e){var n,r,s,i,o,a,l,c;St(1,arguments);var h=Ha(),f=Vr((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=jn(t),y=m.getDay(),_=(y<f?-7:0)+6-(y-f);return m.setDate(m.getDate()+_),m.setHours(23,59,59,999),m}function vU(t,e){St(2,arguments);var n=Vr(e);return hU(t,-n)}var wU=864e5;function _U(t){St(1,arguments);var e=jn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/wU)+1}function ch(t){St(1,arguments);var e=1,n=jn(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Kb(t){St(1,arguments);var e=jn(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=ch(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=ch(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function xU(t){St(1,arguments);var e=Kb(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=ch(n);return r}var TU=6048e5;function EU(t){St(1,arguments);var e=jn(t),n=ch(e).getTime()-xU(e).getTime();return Math.round(n/TU)+1}function dh(t,e){var n,r,s,i,o,a,l,c;St(1,arguments);var h=Ha(),f=Vr((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=jn(t),y=m.getUTCDay(),_=(y<f?7:0)+y-f;return m.setUTCDate(m.getUTCDate()-_),m.setUTCHours(0,0,0,0),m}function Qb(t,e){var n,r,s,i,o,a,l,c;St(1,arguments);var h=jn(t),f=h.getUTCFullYear(),m=Ha(),y=Vr((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setUTCFullYear(f+1,0,y),_.setUTCHours(0,0,0,0);var E=dh(_,e),A=new Date(0);A.setUTCFullYear(f,0,y),A.setUTCHours(0,0,0,0);var S=dh(A,e);return h.getTime()>=E.getTime()?f+1:h.getTime()>=S.getTime()?f:f-1}function SU(t,e){var n,r,s,i,o,a,l,c;St(1,arguments);var h=Ha(),f=Vr((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=Qb(t,e),y=new Date(0);y.setUTCFullYear(m,0,f),y.setUTCHours(0,0,0,0);var _=dh(y,e);return _}var IU=6048e5;function kU(t,e){St(1,arguments);var n=jn(t),r=dh(n,e).getTime()-SU(n,e).getTime();return Math.round(r/IU)+1}function We(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var bs={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return We(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):We(r+1,2)},d:function(e,n){return We(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return We(e.getUTCHours()%12||12,n.length)},H:function(e,n){return We(e.getUTCHours(),n.length)},m:function(e,n){return We(e.getUTCMinutes(),n.length)},s:function(e,n){return We(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return We(i,n.length)}},xo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bU={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return bs.y(e,n)},Y:function(e,n,r,s){var i=Qb(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return We(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):We(o,n.length)},R:function(e,n){var r=Kb(e);return We(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return We(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return We(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return We(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return bs.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return We(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=kU(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):We(i,n.length)},I:function(e,n,r){var s=EU(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):We(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):bs.d(e,n)},D:function(e,n,r){var s=_U(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):We(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return We(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return We(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return We(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=xo.noon:s===0?i=xo.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=xo.evening:s>=12?i=xo.afternoon:s>=4?i=xo.morning:i=xo.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return bs.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):bs.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):We(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):We(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):bs.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):bs.s(e,n)},S:function(e,n){return bs.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return rT(o);case"XXXX":case"XX":return Pi(o);case"XXXXX":case"XXX":default:return Pi(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return rT(o);case"xxxx":case"xx":return Pi(o);case"xxxxx":case"xxx":default:return Pi(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+nT(o,":");case"OOOO":default:return"GMT"+Pi(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+nT(o,":");case"zzzz":default:return"GMT"+Pi(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return We(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return We(o,n.length)}};function nT(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+We(i,2)}function rT(t,e){if(t%60===0){var n=t>0?"-":"+";return n+We(Math.abs(t)/60,2)}return Pi(t,e)}function Pi(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=We(Math.floor(s/60),2),o=We(s%60,2);return r+i+n+o}var sT=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Yb=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},AU=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return sT(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",sT(s,n)).replace("{{time}}",Yb(i,n))},CU={p:Yb,P:AU},PU=["D","DD"],RU=["YY","YYYY"];function NU(t){return PU.indexOf(t)!==-1}function DU(t){return RU.indexOf(t)!==-1}function iT(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var jU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OU=function(e,n,r){var s,i=jU[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Ep(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var VU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FU={date:Ep({formats:VU,defaultWidth:"full"}),time:Ep({formats:MU,defaultWidth:"full"}),dateTime:Ep({formats:LU,defaultWidth:"full"})},UU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BU=function(e,n,r,s){return UU[e]};function hl(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var $U={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},WU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},KU=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},QU={ordinalNumber:KU,era:hl({values:$U,defaultWidth:"wide"}),quarter:hl({values:WU,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:hl({values:zU,defaultWidth:"wide"}),day:hl({values:qU,defaultWidth:"wide"}),dayPeriod:hl({values:HU,defaultWidth:"wide",formattingValues:GU,defaultFormattingWidth:"wide"})};function fl(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?XU(a,function(f){return f.test(o)}):YU(a,function(f){return f.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var h=e.slice(o.length);return{value:c,rest:h}}}function YU(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function XU(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function JU(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var ZU=/^(\d+)(th|st|nd|rd)?/i,e6=/\d+/i,t6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},n6={any:[/^b/i,/^(a|c)/i]},r6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},s6={any:[/1/i,/2/i,/3/i,/4/i]},i6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},o6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},a6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},l6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},u6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},c6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d6={ordinalNumber:JU({matchPattern:ZU,parsePattern:e6,valueCallback:function(e){return parseInt(e,10)}}),era:fl({matchPatterns:t6,defaultMatchWidth:"wide",parsePatterns:n6,defaultParseWidth:"any"}),quarter:fl({matchPatterns:r6,defaultMatchWidth:"wide",parsePatterns:s6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:fl({matchPatterns:i6,defaultMatchWidth:"wide",parsePatterns:o6,defaultParseWidth:"any"}),day:fl({matchPatterns:a6,defaultMatchWidth:"wide",parsePatterns:l6,defaultParseWidth:"any"}),dayPeriod:fl({matchPatterns:u6,defaultMatchWidth:"any",parsePatterns:c6,defaultParseWidth:"any"})},h6={code:"en-US",formatDistance:OU,formatLong:FU,formatRelative:BU,localize:QU,match:d6,options:{weekStartsOn:0,firstWeekContainsDate:1}},f6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m6=/^'([^]*?)'?$/,g6=/''/g,y6=/[a-zA-Z]/;function cr(t,e,n){var r,s,i,o,a,l,c,h,f,m,y,_,E,A;St(2,arguments);var S=String(e),w=Ha(),x=(r=(s=void 0)!==null&&s!==void 0?s:w.locale)!==null&&r!==void 0?r:h6,N=Vr((i=(o=(a=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&a!==void 0?a:w.firstWeekContainsDate)!==null&&o!==void 0?o:(c=w.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=Vr((f=(m=(y=(_=void 0)!==null&&_!==void 0?_:void 0)!==null&&y!==void 0?y:w.weekStartsOn)!==null&&m!==void 0?m:(E=w.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&f!==void 0?f:0);if(!(V>=0&&V<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var L=jn(t);if(!yU(L))throw new RangeError("Invalid time value");var k=pU(L),v=vU(L,k),T={firstWeekContainsDate:N,weekStartsOn:V,locale:x,_originalDate:L},C=S.match(p6).map(function(R){var D=R[0];if(D==="p"||D==="P"){var P=CU[D];return P(R,x.formatLong)}return R}).join("").match(f6).map(function(R){if(R==="''")return"'";var D=R[0];if(D==="'")return v6(R);var P=bU[D];if(P)return DU(R)&&iT(R,e,String(t)),NU(R)&&iT(R,e,String(t)),P(v,R,x.localize,T);if(D.match(y6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return R}).join("");return C}function v6(t){var e=t.match(m6);return e?e[1].replace(g6,"'"):t}function oT(t){return St(1,arguments),mU(t,Date.now())}function w6(){return cr(new Date,"yyyy-MM-dd")}function _6(t){if(!t)return new Date;if(t instanceof Date)return t;if(t!=null&&t.toDate)return t.toDate();if(typeof t=="string"&&t.includes("T")){const r=new Date(t);if(!isNaN(r.getTime()))return new Date(r.getFullYear(),r.getMonth(),r.getDate(),12,0,0)}const e=String(t).split("-").map(Number);if(e.length>=3&&!isNaN(e[0])&&!isNaN(e[1])&&!isNaN(e[2]))return new Date(e[0],e[1]-1,e[2],12,0,0);const n=new Date(t);return isNaN(n.getTime())?new Date:n}function Ei(t){if(!t)return w6();if(t!=null&&t.toDate&&(t=t.toDate()),typeof t=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;t=new Date(t)}if(t!=null&&t.seconds&&(t=new Date(t.seconds*1e3)),t.getUTCHours()===0&&t.getUTCMinutes()===0){const e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),r=String(t.getUTCDate()).padStart(2,"0");return`${e}-${n}-${r}`}return cr(t,"yyyy-MM-dd")}function f9(t){if(!t)return new Date;let e;if(t!=null&&t.toDate)e=t.toDate();else{if(typeof t=="string")return _6(t);if(t instanceof Date)e=t;else if(t!=null&&t.seconds)e=new Date(t.seconds*1e3);else return new Date}const n=e.getUTCHours(),r=e.getUTCMinutes();if(n===0&&r===0){const l=e.getUTCFullYear(),c=e.getUTCMonth(),h=e.getUTCDate(),f=new Date(l,c,h,12,0,0);return isNaN(f.getTime())?new Date:f}const s=e.getFullYear(),i=e.getMonth(),o=e.getDate(),a=new Date(s,i,o,12,0,0);return isNaN(a.getTime())?new Date:a}const Wr=[{id:"docs",label:"Read the docs",description:"Learn how BenchOnly works",icon:Ul,credits:25,link:"/docs",linkLabel:"Open Docs",color:"blue"},{id:"goal",label:"Set your first goal",description:"Pick a lift and set a target",icon:$i,credits:100,link:"/goals",linkLabel:"Go to Goals",color:"flame"},{id:"workout",label:"Complete a workout",description:"Log a workout with actual sets",icon:Nn,credits:100,link:"/workouts/new",linkLabel:"New Workout",color:"green"},{id:"aiWorkout",label:"Generate an AI workout",description:"Let AI build a session for you",icon:ro,credits:50,link:"/workouts/generate",linkLabel:"Generate",color:"purple"},{id:"friend",label:"Add a friend",description:"Connect with a training partner",icon:pF,credits:50,link:"/friends",linkLabel:"Find Friends",color:"cyan"}],x6=Wr.reduce((t,e)=>t+e.credits,0),aT={blue:"bg-blue-500/15 text-blue-400 border-blue-500/20",flame:"bg-flame-500/15 text-flame-400 border-flame-500/20",green:"bg-green-500/15 text-green-400 border-green-500/20",purple:"bg-purple-500/15 text-purple-400 border-purple-500/20",cyan:"bg-cyan-500/15 text-cyan-400 border-cyan-500/20"};function T6({embedded:t=!1}){const{user:e,userProfile:n,updateProfile:r,isGuest:s}=wr(),[i,o]=b.useState(null),[a,l]=b.useState({}),[c,h]=b.useState(null),[f,m]=b.useState(!1),[y,_]=b.useState(!1),[E,A]=b.useState(!1);b.useEffect(()=>{if(!e||s)return;const k=(n==null?void 0:n.onboardingChecklist)||{};o(k),S(k)},[e,n]);const S=async k=>{if(!e)return;const v={};try{v.docs=k.docs===!0?"claimed":"ready";const T=await oe(se(K(j,"goals"),J("userId","==",e.uid),Rt(1)));v.goal=k.goal===!0?"claimed":T.size>0?"completed":"pending";const C=await oe(se(K(j,"workouts"),J("userId","==",e.uid),J("status","==","completed"),Rt(1)));v.workout=k.workout===!0?"claimed":C.size>0?"completed":"pending";const R=await oe(se(K(j,"workouts"),J("userId","==",e.uid),J("generatedByAI","==",!0),Rt(1)));v.aiWorkout=k.aiWorkout===!0?"claimed":R.size>0?"completed":"pending";const D=await ag.getFriends(e.uid),P=await ag.getSentRequests(e.uid);v.friend=k.friend===!0?"claimed":D.length>0||P.length>0?"completed":"pending"}catch(T){console.error("Checklist check error:",T),Wr.forEach(C=>{v[C.id]||(v[C.id]=k[C.id]===!0?"claimed":"pending")})}l(v),_(!0)},w=async(k,v)=>{if(!c){h(k);try{await ah.add(e.uid,v);const T={...(n==null?void 0:n.onboardingChecklist)||{},[k]:!0};await r({onboardingChecklist:T,credits:((n==null?void 0:n.credits)??0)+v}),l(C=>({...C,[k]:"claimed"})),o(T)}catch(T){console.error("Claim error:",T)}finally{h(null)}}},x=async()=>{try{await r({onboardingChecklist:{...(n==null?void 0:n.onboardingChecklist)||{},dismissed:!0}}),o(k=>({...k,dismissed:!0})),A(!0),setTimeout(()=>A(!1),4e3)}catch(k){console.error("Dismiss error:",k)}};if(s||!n||!y||Wr.every(k=>a[k.id]==="claimed"))return null;if(!t&&(i!=null&&i.dismissed))return E?d.jsxs(be.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-6 p-3 bg-iron-800/80 border border-iron-700 rounded-xl flex items-center gap-3",children:[d.jsx(Gx,{className:"w-4 h-4 text-flame-400 flex-shrink-0"}),d.jsxs("p",{className:"text-sm text-iron-300 flex-1",children:["You can find the getting started checklist in ",d.jsx($e,{to:"/settings",className:"text-flame-400 hover:underline",children:"Settings"}),"."]}),d.jsx("button",{onClick:()=>A(!1),className:"text-iron-500 hover:text-iron-300",children:d.jsx(_u,{className:"w-4 h-4"})})]}):null;const V=Wr.filter(k=>a[k.id]==="claimed").length,L=Wr.filter(k=>a[k.id]==="claimed").reduce((k,v)=>k+v.credits,0);return d.jsx(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:d.jsxs("div",{className:"card-steel rounded-xl overflow-hidden border border-flame-500/20",children:[d.jsxs("button",{onClick:()=>m(!f),className:"w-full flex items-center gap-3 p-4 hover:bg-iron-800/30 transition-colors",children:[d.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(Gx,{className:"w-5 h-5 text-flame-400"})}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsxs("h3",{className:"text-sm font-semibold text-iron-100",children:["Get Started  Earn ",x6," Credits"]}),d.jsxs("p",{className:"text-xs text-iron-500",children:[V,"/",Wr.length," complete  ",L," credits earned"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"relative w-8 h-8",children:[d.jsxs("svg",{className:"w-8 h-8 -rotate-90",viewBox:"0 0 32 32",children:[d.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-iron-800"}),d.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${V/Wr.length*81.7} 81.7`,className:"text-flame-500 transition-all duration-500"})]}),d.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] font-bold text-iron-300",children:[V,"/",Wr.length]})]}),f?d.jsx(ih,{className:"w-4 h-4 text-iron-500"}):d.jsx(jb,{className:"w-4 h-4 text-iron-500"})]})]}),d.jsx(ia,{children:!f&&d.jsx(be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:d.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[Wr.map(k=>{var ke,lt;const v=a[k.id],T=k.icon,C=v==="claimed",P=v==="completed"||v==="ready";return d.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${C?"bg-iron-800/30 opacity-60":"bg-iron-800/50"}`,children:[d.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${C?"bg-green-500/20":`${((ke=aT[k.color])==null?void 0:ke.split(" ")[0])||"bg-iron-700"}`}`,children:C?d.jsx(no,{className:"w-4 h-4 text-green-400"}):d.jsx(T,{className:`w-4 h-4 ${((lt=aT[k.color])==null?void 0:lt.split(" ")[1])||"text-iron-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm font-medium ${C?"text-iron-500 line-through":"text-iron-200"}`,children:k.label}),d.jsx("p",{className:"text-[11px] text-iron-600",children:k.description})]}),C?d.jsxs("span",{className:"text-[10px] text-green-400/70 flex items-center gap-1 flex-shrink-0",children:[d.jsx(so,{className:"w-3 h-3"}),"+",k.credits]}):P?d.jsx("button",{onClick:()=>w(k.id,k.credits),disabled:!!c,className:"px-2.5 py-1.5 text-xs rounded-lg bg-flame-500/20 text-flame-400 border border-flame-500/30 hover:bg-flame-500/30 transition-colors flex items-center gap-1 flex-shrink-0",children:c===k.id?d.jsx(ss,{className:"w-3 h-3 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(so,{className:"w-3 h-3"}),"Claim ",k.credits]})}):d.jsx($e,{to:k.link,className:"px-2.5 py-1.5 text-xs rounded-lg bg-iron-700/50 text-iron-400 hover:bg-iron-700 transition-colors flex-shrink-0",children:k.linkLabel})]},k.id)}),!t&&d.jsx("button",{onClick:x,className:"w-full text-center text-xs text-iron-600 hover:text-iron-400 py-2 transition-colors",children:"Dismiss checklist"})]})})})]})})}function E6({event:t,onClose:e,userContext:n}){const r=fi(),{user:s}=wr(),[i,o]=b.useState(!1),[a,l]=b.useState("intro"),[c,h]=b.useState(null),f=b.useMemo(()=>t?t.buildWorkout(n):null,[t,n]);if(!t)return null;const m=async()=>{if(!(!s||i)){o(!0);try{const E=f,A=new Date;A.setHours(12,0,0,0);const{circuitExercises:S,...w}=E,x=await Ra.create(s.uid,{...w,date:A});e(),x!=null&&x.id&&r(`/workouts/${x.id}`)}catch(E){console.error("Error creating event workout:",E),alert("Something went wrong. Try again!")}finally{o(!1)}}},y=t.theme||{},_=(f==null?void 0:f.circuitExercises)||[];return d.jsx(ia,{children:d.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:d.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:E=>E.stopPropagation(),className:"w-full max-w-sm bg-iron-900 rounded-2xl border border-iron-800 overflow-hidden shadow-2xl max-h-[85vh] flex flex-col",children:[d.jsx("div",{className:`h-1.5 flex-shrink-0 ${y.buttonBg||"bg-flame-500"}`}),d.jsx(ia,{mode:"wait",children:a==="intro"?d.jsxs(be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-6 text-center",children:[d.jsx("div",{className:"text-5xl mb-4",children:t.emoji}),d.jsx("h2",{className:"text-xl font-display text-iron-50 mb-2",children:t.name}),d.jsx("p",{className:"text-sm text-iron-400 leading-relaxed mb-4",children:t.description}),t.dateLabel&&d.jsxs("p",{className:"text-xs text-iron-500 mb-6",children:["Available ",t.dateLabel]}),d.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[d.jsx(so,{className:"w-4 h-4 text-flame-400"}),d.jsxs("span",{className:"text-sm font-medium text-iron-200",children:[t.creditReward," credits"]})]}),d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[d.jsx(J3,{className:"w-4 h-4 text-pink-400"}),d.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Profile badge"})]})]}),d.jsxs("button",{onClick:()=>l("preview"),className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${y.buttonBg||"bg-flame-500"} ${y.buttonHover||"hover:bg-flame-600"}`,children:["See the Workout",d.jsx(Ns,{className:"w-5 h-5"})]}),d.jsx("button",{onClick:e,className:"mt-3 text-sm text-iron-500 hover:text-iron-300 transition-colors",children:"Maybe later"})]},"intro"):d.jsxs(be.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex flex-col min-h-0",children:[d.jsxs("div",{className:"p-4 pb-3 flex-shrink-0",children:[d.jsxs("button",{onClick:()=>l("intro"),className:"flex items-center gap-1 text-xs text-iron-500 hover:text-iron-300 transition-colors mb-3",children:[d.jsx(X3,{className:"w-3.5 h-3.5"}),"Back"]}),d.jsxs("h2",{className:"text-lg font-display text-iron-50 flex items-center gap-2",children:[d.jsx("span",{children:t.emoji}),"Workout Preview"]}),d.jsxs("div",{className:"mt-3 p-3 bg-pink-500/10 border border-pink-500/20 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Qx,{className:"w-4 h-4 text-pink-400"}),d.jsx("span",{className:"text-xs font-semibold text-pink-300",children:"Circuit Format"})]}),d.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:"Do all 6 exercises in order = 1 round. Rest 3060s, then repeat. 3 rounds total. ~10 min."})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-2 space-y-2",children:[_.map((E,A)=>{const S=c===A,x=E.type==="time"?`${E.time}s hold`:`${E.reps} reps`;return d.jsxs("div",{className:"bg-iron-800/50 border border-iron-700/50 rounded-xl overflow-hidden",children:[d.jsxs("button",{onClick:()=>h(S?null:A),className:"w-full flex items-center gap-3 p-3 text-left hover:bg-iron-800/80 transition-colors",children:[d.jsx("span",{className:"w-6 h-6 rounded-full bg-pink-500/15 text-pink-400 text-xs font-bold flex items-center justify-center flex-shrink-0",children:A+1}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-iron-200",children:E.name}),d.jsx("p",{className:"text-xs text-iron-500",children:x})]}),E.notes&&(S?d.jsx(jb,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}):d.jsx(ih,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}))]}),d.jsx(ia,{children:S&&E.notes&&d.jsx(be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"overflow-hidden",children:d.jsx("p",{className:"px-3 pb-3 text-xs text-iron-400 leading-relaxed border-t border-iron-700/30 pt-2 mx-3",children:E.notes})})})]},A)}),d.jsxs("div",{className:"flex items-center gap-2 py-2 px-1",children:[d.jsx("div",{className:"flex-1 border-t border-iron-700/40"}),d.jsxs("span",{className:"text-[11px] text-iron-500 flex items-center gap-1.5",children:[d.jsx(Qx,{className:"w-3 h-3"}),"Repeat 3"]}),d.jsx("div",{className:"flex-1 border-t border-iron-700/40"})]})]}),d.jsx("div",{className:"p-4 pt-3 flex-shrink-0 border-t border-iron-800/50",children:d.jsx("button",{onClick:m,disabled:i,className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${y.buttonBg||"bg-flame-500"} ${y.buttonHover||"hover:bg-flame-600"} disabled:opacity-50`,children:i?d.jsxs(d.Fragment,{children:[d.jsx(ss,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Nn,{className:"w-5 h-5"}),"Let's Go"]})})})]},"preview")})]})})})}const A0=[{id:"valentines-2026",name:"Valentine's Day Challenge",description:"A quick bodyweight workout you can do anywhere  no equipment needed. Scaled to your fitness level.",emoji:"",startDate:"2026-02-14",endDate:"2026-02-17",badgeIcon:"",badgeName:"Valentine's Day 2026  Completed the Valentine's Challenge",creditReward:200,dateLabel:"Feb 1416",theme:{bg:"bg-pink-500/10",border:"border-pink-500/25",accent:"text-pink-400",buttonBg:"bg-pink-500",buttonHover:"hover:bg-pink-600"},buildWorkout(t){var a,l;const e=(t==null?void 0:t.maxLifts)||{},n=Object.keys(e).length>0;let r="beginner";if(n){const c=((a=e["Bench Press"])==null?void 0:a.weight)||((l=e["Dumbbell Bench Press"])==null?void 0:l.weight)||0,h=Math.max(...Object.values(e).map(f=>f.weight||0),0);h>225||c>185?r="advanced":(h>135||c>95)&&(r="intermediate")}const s={beginner:{pushups:8,squats:12,lunges:8,burpees:4,plank:30,mountainClimbers:12},intermediate:{pushups:15,squats:20,lunges:12,burpees:8,plank:45,mountainClimbers:20},advanced:{pushups:25,squats:30,lunges:16,burpees:12,plank:60,mountainClimbers:30}}[r],i=[{name:"Push-ups",type:"bodyweight",notes:"Hands shoulder-width apart, body in a straight line from head to heels. Lower until chest nearly touches the floor, then push back up. Keep core tight throughout. Too hard? Do knee push-ups or incline push-ups with hands on a chair/counter.",reps:s.pushups},{name:"Bodyweight Squats",type:"bodyweight",notes:"Feet shoulder-width apart, toes slightly out. Sit back and down like sitting into a chair  hips below parallel if possible. Drive through your heels to stand. Too hard? Squat to a chair (sit down lightly, then stand back up) or do half squats.",reps:s.squats},{name:"Alternating Lunges",type:"bodyweight",notes:"Step forward with one leg, lower until both knees are at ~90. Front knee stays over the ankle, not past your toes. Push back to standing and alternate legs. Too hard? Do reverse lunges (step backward instead) or hold onto a wall for balance.",reps:`${s.lunges} total`},{name:"Burpees",type:"bodyweight",notes:"From standing: squat down, place hands on the floor, jump feet back into a plank, do a push-up, jump feet forward, then jump up with hands overhead. That's one rep. Too hard? Skip the push-up and/or the jump  just step feet back and forward instead.",reps:s.burpees},{name:"Mountain Climbers",type:"bodyweight",notes:"Start in a high plank position. Drive one knee toward your chest, then quickly switch legs  like running in place horizontally. Keep hips level and core braced. Too hard? Slow it down  step feet in one at a time instead of jumping.",reps:`${s.mountainClimbers} total`},{name:"Plank",type:"time",notes:`Hold for ${s.plank} seconds. Forearms on the ground, elbows under shoulders, body in a straight line. Squeeze your glutes and brace your abs  don't let your hips sag or pike up. Too hard? Drop to your knees or do the plank from your hands instead of forearms.`,time:s.plank}],o=[];for(let c=1;c<=3;c++)i.forEach((h,f)=>{const m=`set-r${c}-${f}`,y=h.type==="time";o.push({id:`ex-r${c}-${f}`,name:`Round ${c}  ${h.name}`,type:h.type,notes:c===1?h.notes:"",sets:[{id:m,...y?{prescribedTime:String(h.time),actualTime:""}:{prescribedReps:String(h.reps),actualWeight:"",actualReps:""},rpe:"",painLevel:0,completed:!1}]})}),c<3&&o.push({id:`ex-rest-${c}`,name:"Rest 3060s",type:"rest",notes:"Catch your breath. Shake it out. Get ready for the next round.",sets:[{id:`set-rest-${c}`,prescribedTime:"60",actualTime:"",rpe:"",painLevel:0,completed:!1}]});return{name:"Valentine's Day Challenge ",notes:`Happy Valentine's Day! This is a circuit workout  do all 6 exercises in order to complete 1 round, then rest and repeat. 3 rounds total, no equipment needed. Scaled for your level (${r}).`,eventId:"valentines-2026",workoutType:"strength",circuitExercises:i,exercises:o}}}];function Xb(){const t=new Date;return A0.find(e=>{const n=new Date(e.startDate+"T00:00:00"),r=new Date(e.endDate+"T00:00:00");return t>=n&&t<r})||null}function S6(t){return t!=null&&t.eventId&&A0.find(e=>e.id===t.eventId)||null}const lT=Object.freeze(Object.defineProperty({__proto__:null,SPECIAL_EVENTS:A0,getActiveEvent:Xb,getEventForWorkout:S6},Symbol.toStringTag,{value:"Module"})),Sp="Bench Only";function I6(t){b.useEffect(()=>(document.title=t?`${t} | ${Sp}`:Sp,()=>{document.title=Sp}),[t])}function uT(){var _s,xs,Ts;I6("Today");const{user:t,userProfile:e,isGuest:n,isRealAdmin:r,impersonating:s,realUser:i}=wr(),o=fi(),[a,l]=b.useState([]),[c,h]=b.useState([]),[f,m]=b.useState([]),[y,_]=b.useState([]),[E,A]=b.useState([]),[S,w]=b.useState({completed:0,total:0}),[x,N]=b.useState(new Set),[V,L]=b.useState(new Set),[k,v]=b.useState({}),[T,C]=b.useState([]),[R,D]=b.useState({}),[P,ke]=b.useState(new Set),[lt,Ne]=b.useState([]),[xe,q]=b.useState(null),[Z,ue]=b.useState(null),[ne,Se]=b.useState(null),[Ke,nn]=b.useState(!0),[Ht,ut]=b.useState(!0),[et,ys]=b.useState(null),[In,On]=b.useState(null),[rn,rr]=b.useState(!1),[z,we]=b.useState(null),[ye,Fe]=b.useState(!1),[Te,Oe]=b.useState(""),[Ue,Lt]=b.useState(""),[Dt,Gn]=b.useState("epley"),[Fr,vs]=b.useState(!1),Kn=[{date:"Feb 2025",title:"Human Trainer Workouts",description:"Request a custom workout built by a real trainer, or send an existing workout for expert review.",tag:"New"},{date:"Feb 2025",title:"AI Coach Personalities",description:"Choose your coaching style in Settings  Coach, Drill Sergeant, Gym Bro, Sports Scientist, or Comedy Coach.",tag:"AI"},{date:"Feb 2025",title:"Smarter AI Chat",description:"Personalized greetings, full set-by-set workout data for pain diagnosis, and dynamic quick actions.",tag:"AI"},{date:"Feb 2025",title:"Oura Ring Integration",description:"Connect your Oura Ring to feed sleep, readiness, and recovery scores into AI workout generation.",tag:"Integration"},{date:"Feb 2025",title:"Gift Credits to Friends",description:"Send credits to friends from Settings. Search your friends list and pick an amount.",tag:"Social"},{date:"Feb 2025",title:"Premium Model for Everyone",description:"GPT-4o is now available to all users at 100 credits per use.",tag:"AI"},{date:"Feb 2025",title:"Smarter Exercise Input",description:"New autocomplete when creating workouts. Type to search, and new exercises are saved for next time.",tag:"UX"},{date:"Jan 2025",title:"Programs & Scheduling",description:"Generate multi-week training programs. Calendar scheduling with daily workout targets.",tag:"Core"},{date:"Jan 2025",title:"Friends System",description:"Add friends, see their activity in your feed, and control who sees your workouts.",tag:"Social"}],Qe={epley:{name:"Epley",calc:(U,le)=>U*(1+le/30)},brzycki:{name:"Brzycki",calc:(U,le)=>U*(36/(37-le))},lombardi:{name:"Lombardi",calc:(U,le)=>U*Math.pow(le,.1)},oconner:{name:"O'Conner",calc:(U,le)=>U*(1+le/40)}},sr=(()=>{const U=parseFloat(Te),le=parseInt(Ue);return!U||!le||le<1||le>30?null:le===1?U:Qe[Dt].calc(U,le)})(),go=sr?[{reps:1,pct:100},{reps:2,pct:97},{reps:3,pct:94},{reps:5,pct:89},{reps:8,pct:81},{reps:10,pct:75},{reps:12,pct:69}].map(U=>({...U,weight:Math.round(sr*U.pct/100)})):null,G=new Date,Ge=G.getHours(),Ee=Ge<12?"Good morning":Ge<17?"Good afternoon":"Good evening",Ut=((_s=e==null?void 0:e.displayName)==null?void 0:_s.split(" ")[0])||((xs=t==null?void 0:t.displayName)==null?void 0:xs.split(" ")[0])||"",ae=Ei(G),Ye=cr(G,"EEEE").toLowerCase();b.useEffect(()=>{t&&yi()},[t]);const yi=async()=>{try{if(n){ut(!1);return}const U=Tp(G,{weekStartsOn:1}),le=tT(G,{weekStartsOn:1}),[te,Be,It,ir,jt]=await Promise.all([Ra.getByUser(t.uid,50).catch(()=>[]),$l.getByUser(t.uid).catch(()=>[]),k0.getByUser(t.uid).catch(()=>[]),$l.getPendingReviews(t.uid).catch(()=>[]),I0.getByUser(t.uid).catch(()=>[])]),or=te.filter(Q=>{var ve;const de=(ve=Q.date)!=null&&ve.toDate?Q.date.toDate():new Date(Q.date);return Ei(de)===ae});l(or);const Xe=Be.filter(Q=>{var de;try{const ve=(de=Q.date)!=null&&de.toDate?Q.date.toDate():new Date(Q.date);return Ei(ve)===ae}catch{return!1}});h(Xe);const Vn=It.filter(Q=>{var de;if(Q.type==="recurring"){const ve=(Q.skippedDates||[]).includes(ae);return((de=Q.days)==null?void 0:de.includes(Ye))&&!ve}return Q.date===ae});m(Vn),_(ir),Ne(Object.values(jt.filter(Q=>Q.status==="active").sort((Q,de)=>(Q.targetDate||"").localeCompare(de.targetDate||"")).reduce((Q,de)=>(Q[de.lift]||(Q[de.lift]=de),Q),{}))),Promise.all([Ho.getFeed(5),Wb.getAll(),od.getUnread(t.uid),ag.getFriendSet(t.uid)]).then(([Q,de,ve,Pe])=>{C((Q==null?void 0:Q.items)||[]);const xr={};(de||[]).forEach(Tr=>{xr[Tr.uid]=Tr}),D(xr),A(ve||[]),ke(Pe||new Set)}).catch(Q=>console.error("[TodayPage] Feed/notifications load failed:",Q));const kt=new Set,Gt=new Set,mt={},_r=te.filter(Q=>{var ve;const de=(ve=Q.date)!=null&&ve.toDate?Q.date.toDate():new Date(Q.date);if(de>=U&&de<=le){const Pe=Ei(de);return Q.status==="completed"?kt.add(Pe):Q.status==="scheduled"?Gt.add(Pe):kt.add(Pe),mt[Pe]||(mt[Pe]={type:"personal",id:Q.id}),!0}return!1}),Kt=Be.filter(Q=>{var de;try{const ve=(de=Q.date)!=null&&de.toDate?Q.date.toDate():new Date(Q.date);if(ve>=U&&ve<=le){const Pe=Ei(ve);return Q.status==="completed"?kt.add(Pe):Gt.add(Pe),mt[Pe]||(mt[Pe]={type:"group",id:Q.id}),!0}}catch{}return!1});It.filter(Q=>Q.type==="recurring").forEach(Q=>{var de;for(let ve=0;ve<7;ve++){const Pe=new Date(U);Pe.setDate(Pe.getDate()+ve);const xr=Ei(Pe),Tr=cr(Pe,"EEEE").toLowerCase();Pe<uh(G)&&!oT(Pe)&&((de=Q.days)!=null&&de.includes(Tr))&&!(Q.skippedDates||[]).includes(xr)&&kt.add(xr)}}),N(kt),L(Gt),v(mt);const ar=It.filter(Q=>Q.type==="recurring").reduce((Q,de)=>{var ve;return Q+(((ve=de.days)==null?void 0:ve.length)||0)},0);w({completed:kt.size,total:Math.max(ar,kt.size)});const vn=new Date(G);vn.setHours(23,59,59,999);const sn=[];te.forEach(Q=>{var ve;if(Q.status!=="scheduled")return;const de=(ve=Q.date)!=null&&ve.toDate?Q.date.toDate():new Date(Q.date);de>vn&&sn.push({...Q,_date:de,_type:"personal"})}),Be.forEach(Q=>{var ve;if(Q.status==="completed")return;const de=(ve=Q.date)!=null&&ve.toDate?Q.date.toDate():new Date(Q.date);de>vn&&sn.push({...Q,_date:de,_type:"group"})}),sn.sort((Q,de)=>Q._date-de._date),Se(sn[0]||null);try{const Q=await ld.getActive(t.uid);nn(Q.length>0);let de=!1;for(const ve of Q){const Pe=ld.getProgramDay(ve,G);if(Pe){q(Pe),de=!0;break}}if(!de)for(let ve=1;ve<=14;ve++){const Pe=dU(G,ve);for(const xr of Q){const Tr=ld.getProgramDay(xr,Pe);if(Tr){ue({...Tr,date:Pe}),ve=15;break}}}}catch(Q){console.error("Error loading program day:",Q)}}catch(U){console.error("Error loading today data:",U)}finally{ut(!1)}},ws=async U=>{try{await $l.approveReview(U),_(le=>le.filter(te=>te.id!==U))}catch(le){console.error("Error approving:",le)}};b.useEffect(()=>{if(!t||n)return;const U=Xb();if(!U)return;ys(U),(async()=>{try{const{collection:te,query:Be,where:It,getDocs:ir,limit:jt}=await He(async()=>{const{collection:mt,query:_r,where:Kt,getDocs:ar,limit:vn}=await Promise.resolve().then(()=>_M);return{collection:mt,query:_r,where:Kt,getDocs:ar,limit:vn}},void 0),{db:or}=await He(async()=>{const{db:mt}=await Promise.resolve().then(()=>SM);return{db:mt}},void 0),Xe=Be(te(or,"workouts"),It("userId","==",t.uid),It("eventId","==",U.id),jt(1)),Vn=await ir(Xe);if(Vn.size>0){const mt=Vn.docs[0];On({id:mt.id,...mt.data()})}else sessionStorage.getItem(`event_dismissed_${U.id}`)||rr(!0);const kt=await Ra.getByUser(t.uid,20).catch(()=>[]),Gt={};kt.filter(mt=>mt.status==="completed").forEach(mt=>{var _r;(_r=mt.exercises)==null||_r.forEach(Kt=>{var ar;(ar=Kt.sets)==null||ar.forEach(vn=>{const sn=parseFloat(vn.actualWeight||vn.prescribedWeight),Q=parseInt(vn.actualReps||vn.prescribedReps);if(sn>0&&Q>0&&Q<=30){const de=Q===1?sn:sn*(1+Q/30);(!Gt[Kt.name]||de>Gt[Kt.name].weight)&&(Gt[Kt.name]={weight:Math.round(de)})}})})}),we({maxLifts:Gt})}catch(te){console.error("Event check error:",te)}})()},[t]);const Ur=a.length>0||c.length>0||f.length>0||xe;return a.length>0&&a.every(U=>U.status==="completed"||U.status!=="scheduled"),Ht?d.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:d.jsxs("div",{className:"animate-pulse space-y-6",children:[d.jsx("div",{className:"h-8 bg-iron-800 rounded-lg w-2/3"}),d.jsx("div",{className:"h-48 bg-iron-800 rounded-2xl"}),d.jsx("div",{className:"h-24 bg-iron-800 rounded-xl"})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto pb-24 overflow-x-hidden",children:[d.jsxs(be.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[d.jsx("p",{className:"text-iron-500 text-sm",children:cr(G,"EEEE, MMMM d")}),d.jsxs("h1",{className:"text-3xl font-display text-iron-50",children:[Ee,Ut?`, ${Ut}`:""]})]}),d.jsx(T6,{}),et&&(()=>{const U=et.theme||{},le=(In==null?void 0:In.status)==="completed";return d.jsx(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:d.jsx("div",{className:`card-steel p-4 rounded-xl border ${U.border||"border-flame-500/20"} ${U.bg||"bg-flame-500/5"}`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-3xl",children:et.emoji}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-sm font-semibold text-iron-100",children:et.name}),d.jsxs("p",{className:"text-xs text-iron-500",children:[le?"Completed! Badge earned + 200 credits":In?"In progress  tap to continue":`${et.creditReward} credits + profile badge`,et.dateLabel&&!le&&d.jsxs(d.Fragment,{children:["  ",et.dateLabel]})]})]}),le?d.jsx("span",{className:"text-2xl",children:""}):In?d.jsx($e,{to:`/workouts/${In.id}`,className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${U.buttonBg||"bg-flame-500"} ${U.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Continue"}):d.jsx("button",{onClick:()=>rr(!0),className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${U.buttonBg||"bg-flame-500"} ${U.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Start"})]})})})})(),y.length>0&&d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[d.jsxs("h3",{className:"text-xs text-amber-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[d.jsx(oh,{className:"w-3.5 h-3.5"}),"Needs Your Review"]}),d.jsx("div",{className:"space-y-2",children:y.slice(0,3).map(U=>d.jsxs("div",{className:"card-steel p-3 border-amber-500/20 bg-amber-500/5 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(oh,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:U.name||"Group Workout"}),d.jsx("p",{className:"text-xs text-iron-500",children:"Coach logged for you"})]}),d.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[d.jsx("button",{onClick:()=>ws(U.id),className:"p-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors",children:d.jsx(hF,{className:"w-4 h-4"})}),d.jsx($e,{to:`/workouts/group/${U.id}`,className:"p-2 bg-iron-800 hover:bg-iron-700 text-iron-300 rounded-lg transition-colors",children:d.jsx(Ns,{className:"w-4 h-4"})})]})]},U.id))})]}),E.length>0&&d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"text-xs text-cyan-400 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(wu,{className:"w-3.5 h-3.5"}),"New Activity (",E.length,")"]}),d.jsx("button",{onClick:async()=>{await od.markAllAsRead(t.uid),A([])},className:"text-xs text-iron-500 hover:text-iron-300",children:"Dismiss all"})]}),d.jsx("div",{className:"space-y-2",children:E.slice(0,3).map(U=>d.jsxs($e,{to:"/feed",onClick:()=>od.markAsRead(U.id),className:"card-steel p-3 border-cyan-500/20 bg-cyan-500/5 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(wu,{className:"w-5 h-5 text-cyan-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("p",{className:"text-sm font-medium text-iron-100 truncate",children:[U.fromUserName||"Someone"," commented on your ",U.feedType==="workout"?"workout":U.feedType==="group_workout"?"group workout":"activity"]}),d.jsxs("p",{className:"text-xs text-iron-500 truncate",children:['"',U.commentText,'"']})]}),d.jsx(Ns,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},U.id))})]}),d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:[d.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[d.jsx(so,{className:"w-3.5 h-3.5 text-flame-400"}),"Today's Workout"]}),c.map(U=>{var le;return d.jsx($e,{to:`/workouts/group/${U.id}`,className:"card-steel p-5 mb-3 border-cyan-500/20 hover:border-cyan-500/40 transition-colors block",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/10 flex items-center justify-center flex-shrink-0",children:U.status==="completed"?d.jsx(no,{className:"w-7 h-7 text-green-400"}):d.jsx(Wi,{className:"w-7 h-7 text-cyan-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:U.name}),d.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-cyan-500/20 text-cyan-400 rounded flex-shrink-0",children:"Group"})]}),d.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[((le=U.exercises)==null?void 0:le.length)||0," exercises",U.status==="completed"&&"  Completed"]})]}),d.jsx(Ns,{className:"w-5 h-5 text-iron-600"})]})},U.id)}),a.map(U=>{var le;return d.jsx($e,{to:`/workouts/${U.id}`,className:`card-steel p-5 mb-3 transition-colors block ${U.status==="completed"||U.status!=="scheduled"?"border-green-500/20 hover:border-green-500/40":"border-flame-500/20 hover:border-flame-500/40"}`,children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${U.status==="completed"||U.status!=="scheduled"?"bg-green-500/10":"bg-flame-500/10"}`,children:U.status==="completed"||U.status!=="scheduled"?d.jsx(no,{className:"w-7 h-7 text-green-400"}):d.jsx(Nn,{className:"w-7 h-7 text-flame-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:U.name}),d.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[U.workoutType==="cardio"?`${U.duration} min`:`${((le=U.exercises)==null?void 0:le.length)||0} exercises`,(U.status==="completed"||U.status!=="scheduled")&&"  Completed"]})]}),d.jsx(Ns,{className:"w-5 h-5 text-iron-600"})]})},U.id)}),f.length>0&&c.length===0&&a.length===0&&d.jsx("div",{className:"space-y-3",children:f.map(U=>d.jsx("div",{className:"card-steel p-5 border-emerald-500/20",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center flex-shrink-0",children:d.jsx(lF,{className:"w-7 h-7 text-emerald-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:U.name||"Scheduled Activity"}),d.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:["Recurring",U.duration&&`  ${U.duration} min`]})]})]})},U.id))}),xe&&!a.some(U=>U.programId===xe.programId)&&d.jsx($e,{to:`/programs/${xe.programId}`,className:"card-steel p-5 border-amber-500/20 hover:border-amber-500/40 transition-colors block",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:d.jsx($i,{className:"w-7 h-7 text-amber-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:xe.label}),d.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded bg-amber-500/20 text-amber-400 flex-shrink-0",children:xe.type})]}),d.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[xe.programName,"  Wk ",xe.weekNumber,"  ",xe.phase]}),d.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:[xe.primaryLift,": ",xe.primaryScheme," @ ",xe.intensity]})]}),d.jsx("div",{className:"flex items-center gap-1 text-flame-400 flex-shrink-0",children:d.jsx(ro,{className:"w-4 h-4"})})]})}),!xe&&Z&&d.jsx($e,{to:`/programs/${Z.programId}`,className:"card-steel p-4 border-iron-700/50 hover:border-iron-600 transition-colors block",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:d.jsx(Db,{className:"w-5 h-5 text-amber-400/70"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",cr(Z.date,"EEEE")]}),d.jsxs("p",{className:"text-sm font-medium text-iron-200 truncate",children:[Z.label,d.jsxs("span",{className:"ml-1.5 text-xs text-iron-500 font-normal",children:[Z.primaryLift,": ",Z.primaryScheme," @ ",Z.intensity]})]}),d.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[Z.programName,"  Wk ",Z.weekNumber,"  ",Z.phase]})]}),d.jsx(sh,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!Ur&&ne&&d.jsx($e,{to:ne._type==="group"?`/workouts/group/${ne.id}`:`/workouts/${ne.id}`,className:"card-steel p-4 mb-3 border-iron-700/50 hover:border-iron-600 transition-colors block",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${ne._type==="group"?"bg-cyan-500/10":"bg-flame-500/10"}`,children:ne._type==="group"?d.jsx(Wi,{className:"w-5 h-5 text-cyan-400"}):d.jsx(Nn,{className:"w-5 h-5 text-flame-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",cr(ne._date,"EEEE")]}),d.jsx("p",{className:"text-sm font-medium text-iron-200 truncate",children:ne.name||"Scheduled Workout"}),d.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[ne._type==="group"?"Group workout":`${((Ts=ne.exercises)==null?void 0:Ts.length)||0} exercises`,ne.workoutType==="cardio"&&ne.duration?`  ${ne.duration} min`:""]})]}),d.jsx(sh,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!Ur&&d.jsxs("div",{className:"card-steel p-8 text-center border-dashed border-iron-700",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-iron-800 flex items-center justify-center mx-auto mb-4",children:d.jsx(Nn,{className:"w-8 h-8 text-iron-600"})}),d.jsx("h3",{className:"text-lg font-display text-iron-200 mb-1",children:"Nothing scheduled today"}),d.jsx("p",{className:"text-sm text-iron-500 mb-6",children:"Generate a workout with AI or log one manually."}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-center",children:[d.jsxs($e,{to:"/workouts/generate",className:"btn-primary flex items-center gap-2",children:[d.jsx(ro,{className:"w-4 h-4"}),"Generate with AI"]}),d.jsxs($e,{to:"/workouts/new",className:"btn-secondary flex items-center gap-2",children:[d.jsx(S0,{className:"w-4 h-4"}),"Create Workout"]})]})]})]}),d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(nF,{className:"w-3.5 h-3.5 text-flame-400"}),"This Week"]}),d.jsx($e,{to:"/calendar",className:"text-xs text-flame-400 hover:text-flame-300",children:"Calendar "})]}),d.jsxs("div",{className:"card-steel p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("span",{className:"text-sm text-iron-400",children:[S.completed," workout",S.completed!==1?"s":""," completed"]}),d.jsxs("span",{className:"text-sm font-medium text-flame-400",children:[cr(Tp(G,{weekStartsOn:1}),"MMM d"),"  ",cr(tT(G,{weekStartsOn:1}),"MMM d")]})]}),d.jsx("div",{className:"flex gap-2",children:["M","T","W","T","F","S","S"].map((U,le)=>{const te=new Date(Tp(G,{weekStartsOn:1}));te.setDate(te.getDate()+le);const Be=Ei(te),It=oT(te),ir=te<uh(G)&&!It,jt=x.has(Be),or=V.has(Be),Xe=k[Be],Vn=!jt&&!or,kt=()=>{Xe?Xe.type==="group"?o(`/workouts/group/${Xe.id}`):o(`/workouts/${Xe.id}`):Vn&&o(`/workouts/generate?date=${Be}`)};return d.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1.5",children:[d.jsx("span",{className:`text-xs font-medium ${It?"text-flame-400":"text-iron-600"}`,children:U}),d.jsx("button",{onClick:kt,className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-medium transition-colors ${It?jt?"bg-green-500/20 text-green-400 ring-2 ring-flame-500/30":"bg-flame-500/20 text-flame-400 ring-2 ring-flame-500/30":jt?"bg-green-500/20 text-green-400":or?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/30":ir?"bg-iron-800/50 text-iron-600":"bg-iron-800/30 text-iron-600"} ${Xe||Vn?"cursor-pointer hover:ring-2 hover:ring-flame-500/30":"cursor-default"}`,children:cr(te,"d")})]},le)})})]})]}),lt.length>0?d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx($i,{className:"w-3.5 h-3.5 text-flame-400"}),"Goals"]}),d.jsx($e,{to:"/goals",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),d.jsx("div",{className:"space-y-2",children:lt.slice(0,3).map(U=>{const le=parseFloat(U.currentValue)||parseFloat(U.currentWeight)||0,te=parseFloat(U.targetValue)||parseFloat(U.targetWeight)||0,Be=parseFloat(U.startValue)||parseFloat(U.startWeight)||0,It=te>Be?Math.min(100,Math.round((le-Be)/(te-Be)*100)):0,ir=U.metricType==="weight"?"lbs":U.metricType==="reps"?"reps":"sec";return d.jsx($e,{to:"/goals",className:"card-steel p-3 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:"text-sm font-medium text-iron-200 truncate",children:U.lift}),d.jsxs("span",{className:"text-xs text-iron-500",children:[le,"/",te," ",ir]})]}),d.jsx("div",{className:"w-full h-1.5 bg-iron-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-flame-500 rounded-full transition-all",style:{width:`${Math.max(2,It)}%`}})})]})},U.id)})})]}):!Ht&&d.jsx(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:d.jsxs($e,{to:"/goals",className:"card-steel p-4 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:[d.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/10 flex items-center justify-center flex-shrink-0",children:d.jsx($i,{className:"w-5 h-5 text-flame-400"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Set a goal"}),d.jsx("p",{className:"text-xs text-iron-500",children:"Track your progress toward a target"})]}),d.jsx(Ns,{className:"w-4 h-4 text-iron-600"})]})}),d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:T.length>0?"mt-6":"",children:[d.jsxs("button",{onClick:()=>vs(!Fr),className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[d.jsx("div",{className:"w-9 h-9 rounded-lg bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(iF,{className:"w-5 h-5 text-purple-400"})}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("p",{className:"text-sm font-medium text-iron-200",children:"What's New"}),d.jsx("p",{className:"text-xs text-iron-500",children:"Latest features and updates"})]}),d.jsx(ih,{className:`w-4 h-4 text-iron-500 transition-transform ${Fr?"rotate-180":""}`})]}),Fr&&d.jsx(be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 border-purple-500/10 max-h-80 overflow-y-auto",children:d.jsx("div",{className:"space-y-3",children:Kn.map((U,le)=>d.jsxs("div",{className:`${le>0?"pt-3 border-t border-iron-800/50":""}`,children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-iron-800 text-iron-400",children:U.tag}),d.jsx("span",{className:"text-xs text-iron-600",children:U.date})]}),d.jsx("p",{className:"text-sm font-medium text-iron-200",children:U.title}),d.jsx("p",{className:"text-xs text-iron-500 mt-0.5",children:U.description})]},le))})})]}),d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-2",children:[d.jsxs("button",{onClick:()=>Fe(!ye),className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[d.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(eF,{className:"w-5 h-5 text-flame-400"})}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("p",{className:"text-sm font-medium text-iron-200",children:"1RM Calculator"}),d.jsx("p",{className:"text-xs text-iron-500",children:"Estimate your one-rep max"})]}),d.jsx(ih,{className:`w-4 h-4 text-iron-500 transition-transform ${ye?"rotate-180":""}`})]}),ye&&d.jsxs(be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 space-y-4 border-flame-500/10",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Weight (lbs)"}),d.jsx("input",{type:"number",inputMode:"decimal",value:Te,onChange:U=>Oe(U.target.value),placeholder:"225",className:"input-field w-full text-base py-2.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Reps"}),d.jsx("input",{type:"number",inputMode:"numeric",value:Ue,onChange:U=>Lt(U.target.value),placeholder:"5",min:"1",max:"30",className:"input-field w-full text-base py-2.5"})]})]}),d.jsx("div",{className:"flex gap-1.5",children:Object.entries(Qe).map(([U,{name:le}])=>d.jsx("button",{onClick:()=>Gn(U),className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-colors ${Dt===U?"bg-flame-500 text-white":"bg-iron-800 text-iron-500 hover:bg-iron-700"}`,children:le},U))}),sr&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-4 bg-gradient-to-br from-flame-500/20 to-flame-600/10 rounded-xl text-center",children:[d.jsx("p",{className:"text-xs text-iron-400 mb-0.5",children:"Estimated 1RM"}),d.jsxs("p",{className:"text-3xl font-display text-flame-400",children:[Math.round(sr)," ",d.jsx("span",{className:"text-base text-iron-400",children:"lbs"})]})]}),d.jsxs("div",{className:"bg-iron-800/50 rounded-lg overflow-hidden",children:[d.jsxs("div",{className:"grid grid-cols-3 text-[10px] font-medium text-iron-500 uppercase tracking-wider",children:[d.jsx("div",{className:"p-1.5 text-center",children:"Reps"}),d.jsx("div",{className:"p-1.5 text-center",children:"%1RM"}),d.jsx("div",{className:"p-1.5 text-center",children:"Weight"})]}),go.map(({reps:U,pct:le,weight:te})=>d.jsxs("div",{className:`grid grid-cols-3 text-sm ${U===1?"bg-flame-500/10":""}`,children:[d.jsx("div",{className:`p-1.5 text-center ${U===1?"text-flame-400 font-medium":"text-iron-400"}`,children:U}),d.jsxs("div",{className:`p-1.5 text-center ${U===1?"text-flame-400 font-medium":"text-iron-500"}`,children:[le,"%"]}),d.jsxs("div",{className:`p-1.5 text-center ${U===1?"text-flame-400 font-medium":"text-iron-200"}`,children:[te," lbs"]})]},U))]})]})]})]}),(()=>{const U=new Set((e==null?void 0:e.groups)||[]),le=T.filter(te=>{if(te.userId===(t==null?void 0:t.uid))return!0;const Be=te.visibility||"public";return Be==="private"?!1:Be==="friends"?P.has(te.userId):Be==="group"?te.groupId&&U.has(te.groupId):!0});return le.length>0?d.jsxs(be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Wi,{className:"w-3.5 h-3.5"}),"Recent Activity"]}),d.jsx($e,{to:"/feed",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),d.jsx("div",{className:"card-steel divide-y divide-iron-800",children:le.slice(0,4).map(te=>{var Vn,kt,Gt,mt,_r,Kt,ar,vn,sn;const Be=R[te.userId],It=(Be==null?void 0:Be.displayName)||"Someone",jt=te.userId===(t==null?void 0:t.uid)&&((Vn=te.data)==null?void 0:Vn.workoutId)?te.type==="group_workout"?`/workouts/group/${te.data.workoutId}`:`/workouts/${te.data.workoutId}`:null,or=jt?$e:"div",Xe=jt?{to:jt}:{};return d.jsxs(or,{...Xe,className:`flex items-center gap-3 p-3${jt?" hover:bg-iron-800/50 transition-colors":""}`,children:[d.jsx($e,{to:`/profile/${te.userId}`,className:"w-8 h-8 rounded-full bg-iron-800 flex items-center justify-center text-iron-400 text-xs flex-shrink-0 overflow-hidden",children:Be!=null&&Be.photoURL?d.jsx("img",{src:Be.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover"}):d.jsx("span",{children:It[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("p",{className:"text-sm text-iron-300 truncate",children:[d.jsx("span",{className:"text-iron-200 font-medium",children:It})," ",te.type==="workout"?`completed ${((kt=te.data)==null?void 0:kt.name)||"a workout"}`:te.type==="group_workout"?`completed their workout${(Gt=te.data)!=null&&Gt.groupName?` in ${te.data.groupName}`:""}`:te.type==="goal_completed"?`achieved ${(mt=te.data)==null?void 0:mt.lift}`:te.type==="cardio"?`logged ${(_r=te.data)==null?void 0:_r.duration}min ${((Kt=te.data)==null?void 0:Kt.name)||"cardio"}`:te.type==="personal_record"?`hit a new PR on ${(ar=te.data)==null?void 0:ar.exercise}`:"was active",((vn=te.data)==null?void 0:vn.eventId)&&d.jsx(rF,{className:"w-3.5 h-3.5 text-pink-400 fill-pink-400 inline ml-1 -mt-0.5"})]}),d.jsxs("p",{className:"text-xs text-iron-600",children:[((sn=te.createdAt)==null?void 0:sn.toDate)&&cr(te.createdAt.toDate(),"EEE, h:mm a"),(te.type==="workout"||te.type==="group_workout")&&(()=>{var de,ve;const Q=KF((de=te.data)==null?void 0:de.totalSets,(ve=te.data)==null?void 0:ve.duration);return Q?`  ${Q}`:""})()]})]}),jt&&d.jsx(Ns,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},te.id)})})]}):null})(),rn&&et&&d.jsx(E6,{event:et,userContext:z,onClose:()=>{rr(!1),sessionStorage.setItem(`event_dismissed_${et.id}`,"1")}})]})}const k6=b.lazy(()=>He(()=>import("./NotFoundPage-D_UwdTuu.js"),[])),b6=b.lazy(()=>He(()=>import("./DashboardPage-BsuYLYkA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),A6=b.lazy(()=>He(()=>import("./WorkoutsPage-BiUBBzxl.js"),__vite__mapDeps([9,3,7,10,11,12,13,8,14,15]))),cT=b.lazy(()=>He(()=>import("./NewWorkoutPage-B3FVx7Tx.js"),__vite__mapDeps([16,2,12,17,18,14]))),C6=b.lazy(()=>He(()=>import("./WorkoutDetailPage-BCmE05XB.js"),__vite__mapDeps([19,2,13,8,14,12,20,21]))),P6=b.lazy(()=>He(()=>import("./GroupWorkoutPage-DTjl4Y1v.js"),__vite__mapDeps([22,14,21,20,18]))),R6=b.lazy(()=>He(()=>import("./CalendarPage-aZkrWXvC.js"),__vite__mapDeps([23,5,6,1,15,24,7]))),N6=b.lazy(()=>He(()=>import("./GroupsPage-B7t8EZis.js"),__vite__mapDeps([25,10,26]))),D6=b.lazy(()=>He(()=>import("./GroupDetailPage-CD_CkGZK.js"),__vite__mapDeps([27,20,7,13,14,8,26,28,10]))),j6=b.lazy(()=>He(()=>import("./GoalsPage-fqaKx9pp.js"),__vite__mapDeps([29,15,8,14,30]))),O6=b.lazy(()=>He(()=>import("./ToolsPage-fguF50eK.js"),__vite__mapDeps([31,18,32,3]))),V6=b.lazy(()=>He(()=>import("./HealthPage-RjaVwDAr.js"),__vite__mapDeps([33,2,3,4,34]))),M6=b.lazy(()=>He(()=>import("./UsagePage-CGgwJXOU.js"),__vite__mapDeps([35,20,10,34,3]))),L6=b.lazy(()=>He(()=>import("./SettingsPage-BgjhlT4p.js"),__vite__mapDeps([36,2,37,38,11,39,40,41,32,10,42,14]))),F6=b.lazy(()=>He(()=>import("./AdminPage-CIZpHS3L.js"),__vite__mapDeps([43,10,8,14,44,6,17]))),U6=b.lazy(()=>He(()=>import("./FeedPage-BjIJq1uW.js"),__vite__mapDeps([45,10,40,44,6,12,14,46]))),B6=b.lazy(()=>He(()=>import("./FriendsPage-qNOFWGh2.js"),__vite__mapDeps([47,12,10,48]))),dT=b.lazy(()=>He(()=>import("./ProfilePage-C-kPFp_5.js"),__vite__mapDeps([49,41,48,12,10,1,5,44,6,46,7]))),$6=b.lazy(()=>He(()=>import("./GenerateWorkoutPage-DhIxG1hO.js"),__vite__mapDeps([50,37,21,14,20]))),W6=b.lazy(()=>He(()=>import("./ProgramsPage-DMOG9cJ2.js"),__vite__mapDeps([51,52,53,14]))),z6=b.lazy(()=>He(()=>import("./ProgramDetailPage-Donm_BEo.js"),__vite__mapDeps([54,52,30,12,24,15]))),q6=b.lazy(()=>He(()=>import("./DocsPage-B2DOFugP.js"),__vite__mapDeps([55,1,42]))),H6=b.lazy(()=>He(()=>import("./OnboardingPage-BeBGNvHN.js"),__vite__mapDeps([56,1,39]))),G6=b.lazy(()=>He(()=>import("./TrainerPage-BRkOYAYF.js"),__vite__mapDeps([57,58,12,8,28,14]))),K6=b.lazy(()=>He(()=>import("./FormCheckPage-ByMptVyx.js"),__vite__mapDeps([59,53,18,38,58,1])));function Ze(){return d.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:d.jsx("div",{className:"w-10 h-10 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})})}function Q6({children:t}){const{user:e,userProfile:n,loading:r,isGuest:s}=wr();return r?d.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"}),d.jsx("p",{className:"text-iron-400 font-medium",children:"Loading..."})]})}):e?!s&&n&&n.onboardingComplete===!1?d.jsx(pa,{to:"/onboarding",replace:!0}):t:d.jsx(pa,{to:"/login",replace:!0})}function Y6({children:t}){const{user:e,userProfile:n,loading:r,isGuest:s}=wr(),i=new URLSearchParams(window.location.search).has("preview");return r?d.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e?!i&&(s||(n==null?void 0:n.onboardingComplete)!==!1)?d.jsx(pa,{to:"/today",replace:!0}):t:d.jsx(pa,{to:"/login",replace:!0})}function X6({children:t}){const{user:e,loading:n}=wr(),r=new URLSearchParams(window.location.search).has("preview");return n?d.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e&&!r?d.jsx(pa,{to:"/",replace:!0}):t}function J6(){const{user:t,loading:e,signInAsGuest:n}=wr();return b.useEffect(()=>{!e&&!t&&n()},[e,t,n]),e?d.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):t?d.jsx(pa,{to:"/today",replace:!0}):null}function Z6(){return d.jsxs(FR,{children:[d.jsx(De,{path:"/login",element:d.jsx(X6,{children:d.jsx(cU,{})})}),d.jsx(De,{path:"/guest",element:d.jsx(J6,{})}),d.jsx(De,{path:"/docs",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(q6,{})})}),d.jsx(De,{path:"/onboarding",element:d.jsx(Y6,{children:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(H6,{})})})}),d.jsxs(De,{path:"/",element:d.jsx(Q6,{children:d.jsx(iU,{})}),children:[d.jsx(De,{index:!0,element:d.jsx(uT,{})}),d.jsx(De,{path:"today",element:d.jsx(uT,{})}),d.jsx(De,{path:"dashboard",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(b6,{})})}),d.jsx(De,{path:"workouts",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(A6,{})})}),d.jsx(De,{path:"workouts/group/:id",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(P6,{})})}),d.jsx(De,{path:"workouts/generate",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx($6,{})})}),d.jsx(De,{path:"workouts/new",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(cT,{})})}),d.jsx(De,{path:"workouts/:id/edit",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(cT,{})})}),d.jsx(De,{path:"workouts/:id",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(C6,{})})}),d.jsx(De,{path:"calendar",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(R6,{})})}),d.jsx(De,{path:"programs",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(W6,{})})}),d.jsx(De,{path:"programs/:id",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(z6,{})})}),d.jsx(De,{path:"groups",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(N6,{})})}),d.jsx(De,{path:"groups/:id",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(D6,{})})}),d.jsx(De,{path:"goals",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(j6,{})})}),d.jsx(De,{path:"tools",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(O6,{})})}),d.jsx(De,{path:"form-check",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(K6,{})})}),d.jsx(De,{path:"health",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(V6,{})})}),d.jsx(De,{path:"feed",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(U6,{})})}),d.jsx(De,{path:"friends",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(B6,{})})}),d.jsx(De,{path:"profile/:userId",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(dT,{})})}),d.jsx(De,{path:"profile",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(dT,{})})}),d.jsx(De,{path:"usage",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(M6,{})})}),d.jsx(De,{path:"settings",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(L6,{})})}),d.jsx(De,{path:"trainer",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(G6,{})})}),d.jsx(De,{path:"admin",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(F6,{})})})]}),d.jsx(De,{path:"*",element:d.jsx(b.Suspense,{fallback:d.jsx(Ze,{}),children:d.jsx(k6,{})})})]})}if("serviceWorker"in navigator){const t=()=>{navigator.serviceWorker.getRegistration().then(e=>{e&&e.update().catch(()=>{})})};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&t()}),setInterval(t,5*60*1e3),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}Ip.createRoot(document.getElementById("root")).render(d.jsx(Eu.StrictMode,{children:d.jsx(GR,{children:d.jsx(uk,{children:d.jsx(Z6,{})})})}));export{dU as $,X3 as A,sg as B,Db as C,oe as D,oh as E,nF as F,se as G,K as H,j as I,J,Mt as K,$e as L,Rt as M,Dc as N,a9 as O,id as P,Ra as Q,sh as R,ro as S,hF as T,Wi as U,Bl as V,eF as W,_u as X,Nn as Y,St as Z,He as _,t9 as a,mT as a$,Vr as a0,ag as a1,Ho as a2,Nb as a3,Vb as a4,KF as a5,wu as a6,uF as a7,rF as a8,Wb as a9,c9 as aA,h9 as aB,bo as aC,_e as aD,Eu as aE,oa as aF,Kd as aG,pU as aH,Ul as aI,sF as aJ,oF as aK,Qx as aL,YF as aM,mU as aN,Kx as aO,T6 as aP,Z3 as aQ,Gx as aR,_p as aS,Hx as aT,gD as aU,Io as aV,Ha as aW,h6 as aX,zP as aY,qb as aZ,e9 as a_,Ti as aa,oT as ab,cF as ac,ko as ad,Tp as ae,tT as af,Ei as ag,jn as ah,n9 as ai,so as aj,b0 as ak,XF as al,aF as am,ld as an,W as ao,en as ap,Le as aq,uh as ar,Gb as as,ig as at,tF as au,ah as av,k0 as aw,lF as ax,w6 as ay,_6 as az,fi as b,OF as b0,DA as b1,_M as b2,SM as b3,l9 as b4,d9 as b5,ao as c,wr as d,zb as e,ss as f,$l as g,no as h,jb as i,d as j,ih as k,ia as l,be as m,S0 as n,f9 as o,cr as p,pF as q,b as r,Ns as s,he as t,I6 as u,Y3 as v,$i as w,fF as x,J3 as y,I0 as z};
