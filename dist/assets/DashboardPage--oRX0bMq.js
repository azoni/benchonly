const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-hGcD7LDI.js","assets/index-BAW7rKOA.css"])))=>i.map(i=>d[i]);
import{G as ir,b8 as os,r as h,b6 as lr,j as o,aY as pt,S as Yn,I as Ot,K as wn,a4 as as,U as jn,k as Pt,a6 as Sn,o as Gn,m as qt,X as Nn,C as Cn,F as Mt,d as Dn,t as is,P as kn,N as qn,M as cr,ae as ur,ac as ls,af as dr,aj as cs,L as ye,z as nt,ai as us,al as gn,am as xn,ag as kt,_ as ds,aq as Fn,a3 as fs,g as hs,Q as ps,b7 as ms,an as gs,ab as xs,H as ys,aP as bs,E as vs}from"./index-hGcD7LDI.js";import{C as fr}from"./chevron-left-wxAteiSl.js";import{b as ws,d as js,c as ln,e as cn}from"./calorieService-6-LCVeV1.js";import{s as Bn}from"./index-BOBZ4ZL_.js";import{aC as Ss,c as hr,au as Ns,aA as Cs,av as Ds,aw as ks,ax as Es,aB as un,az as Rs,ay as Os}from"./LineChart-BlNWw3EL.js";import{M as Ps}from"./moon-DhQKan7D.js";import{s as Ms,a as zs,i as _s,b as Ts}from"./index-BSRBERPy.js";import{e as Ws}from"./index-BIcaetXa.js";import{e as Ls}from"./index-CYoCslOD.js";import{P as $s}from"./pen-DsZ9flSk.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ir("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=ir("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);function Ct(e){const{margin:t,containerPadding:n,containerWidth:r,cols:s}=e;return(r-t[0]*(s-1)-n[0]*2)/s}function St(e,t,n){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*n):e}function Et(e,t,n,r,s,l,i){const{margin:c,containerPadding:a,rowHeight:u}=e,f=Ct(e);let d,b,p,g;if(i?(d=Math.round(i.width),b=Math.round(i.height)):(d=St(r,f,c[0]),b=St(s,u,c[1])),l?(p=Math.round(l.top),g=Math.round(l.left)):i?(p=Math.round(i.top),g=Math.round(i.left)):(p=Math.round((u+c[1])*n+a[1]),g=Math.round((f+c[0])*t+a[0])),!l&&!i){if(Number.isFinite(r)){const E=Math.round((f+c[0])*(t+r)+a[0])-g-d;E!==c[0]&&(d+=E-c[0])}if(Number.isFinite(s)){const E=Math.round((u+c[1])*(n+s)+a[1])-p-b;E!==c[1]&&(b+=E-c[1])}}return{top:p,left:g,width:d,height:b}}function Is(e,t,n,r,s){const{margin:l,containerPadding:i,cols:c,rowHeight:a,maxRows:u}=e,f=Ct(e);let d=Math.round((n-i[0])/(f+l[0])),b=Math.round((t-i[1])/(a+l[1]));return d=Ft(d,0,c-r),b=Ft(b,0,u-s),{x:d,y:b}}function At(e,t,n){const{margin:r,containerPadding:s,rowHeight:l}=e,i=Ct(e),c=Math.round((n-s[0])/(i+r[0])),a=Math.round((t-s[1])/(l+r[1]));return{x:c,y:a}}function Ys(e,t,n){const{margin:r,rowHeight:s}=e,l=Ct(e),i=Math.max(1,Math.round((t+r[0])/(l+r[0]))),c=Math.max(1,Math.round((n+r[1])/(s+r[1])));return{w:i,h:c}}function Ft(e,t,n){return Math.max(Math.min(e,n),t)}function En(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function Bt(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r!==void 0&&En(r,t))return r}}function pr(e,t){return e.filter(n=>En(n,t))}function Gs(e,t){return t==="horizontal"?qs(e):t==="vertical"||t==="wrap"?yn(e):[...e]}function yn(e){return[...e].sort((t,n)=>t.y!==n.y?t.y-n.y:t.x-n.x)}function qs(e){return[...e].sort((t,n)=>t.x!==n.x?t.x-n.x:t.y-n.y)}function Rn(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(r!==void 0){const s=r.y+r.h;s>t&&(t=s)}}return t}function mt(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r!==void 0&&r.i===t)return r}}function On(e){return e.filter(t=>t.static===!0)}function Nt(e){return{i:e.i,x:e.x,y:e.y,w:e.w,h:e.h,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,constraints:e.constraints,isBounded:e.isBounded}}function mr(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];r!==void 0&&(t[n]=Nt(r))}return t}function Fs(e,t){const n=new Array(e.length);for(let r=0;r<e.length;r++){const s=e[r];s!==void 0&&(t.i===s.i?n[r]=t:n[r]=s)}return n}function Bs(e,t,n){let r=mt(e,t);return r?(r=n(Nt(r)),[Fs(e,r),r]):[[...e],null]}function Xs(e,t){const n=On(e);for(let r=0;r<e.length;r++){const s=e[r];if(s!==void 0)if(s.x+s.w>t.cols&&(s.x=t.cols-s.w),s.x<0&&(s.x=0,s.w=t.cols),!s.static)n.push(s);else for(;Bt(n,s);)s.y++}return e}function gt(e,t,n,r,s,l,i,c,a){if(t.static&&t.isDraggable!==!0)return[...e];if(t.y===r&&t.x===n)return[...e];const u=t.x,f=t.y;typeof n=="number"&&(t.x=n),typeof r=="number"&&(t.y=r),t.moved=!0;let d=Gs(e,i);(i==="vertical"&&typeof r=="number"?f>=r:i==="horizontal"&&typeof n=="number"?u>=n:!1)&&(d=d.reverse());const p=pr(d,t),g=p.length>0;if(g&&a)return mr(e);if(g&&l)return t.x=u,t.y=f,t.moved=!1,e;let S=[...e];for(let E=0;E<p.length;E++){const w=p[E];w!==void 0&&(w.moved||(w.static?S=Xn(S,w,t,s,i):S=Xn(S,t,w,s,i)))}return S}function Xn(e,t,n,r,s,l){const i=s==="horizontal",c=s==="vertical",a=t.static;if(r){r=!1;const d={x:i?Math.max(t.x-n.w,0):n.x,y:c?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},b=Bt(e,d),p=b!==void 0&&b.y+b.h>t.y,g=b!==void 0&&t.x+t.w>b.x;if(!b)return gt(e,n,i?d.x:void 0,c?d.y:void 0,r,a,s);if(p&&c)return gt(e,n,void 0,n.y+1,r,a,s);if(p&&s===null)return t.y=n.y,n.y=n.y+n.h,[...e];if(g&&i)return gt(e,t,n.x,void 0,r,a,s)}const u=i?n.x+1:void 0,f=c?n.y+1:void 0;return u===void 0&&f===void 0?[...e]:gt(e,n,u,f,r,a,s)}function wt(e,t,n){return Math.max(t,Math.min(n,e))}var Us={name:"gridBounds",constrainPosition(e,t,n,{cols:r,maxRows:s}){return{x:wt(t,0,Math.max(0,r-e.w)),y:wt(n,0,Math.max(0,s-e.h))}},constrainSize(e,t,n,r,{cols:s,maxRows:l}){const i=r==="w"||r==="nw"||r==="sw"?e.x+e.w:s-e.x,c=r==="n"||r==="nw"||r==="ne"?e.y+e.h:l-e.y;return{w:wt(t,1,Math.max(1,i)),h:wt(n,1,Math.max(1,c))}}},Vs={name:"minMaxSize",constrainSize(e,t,n){return{w:wt(t,e.minW??1,e.maxW??1/0),h:wt(n,e.minH??1,e.maxH??1/0)}}},gr=[Us,Vs];function Ht(e,t,n,r,s){let l={x:n,y:r};for(const i of e)i.constrainPosition&&(l=i.constrainPosition(t,l.x,l.y,s));if(t.constraints)for(const i of t.constraints)i.constrainPosition&&(l=i.constrainPosition(t,l.x,l.y,s));return l}function Ks(e,t,n,r,s,l){let i={w:n,h:r};for(const c of e)c.constrainSize&&(i=c.constrainSize(t,i.w,i.h,s,l));if(t.constraints)for(const c of t.constraints)c.constrainSize&&(i=c.constrainSize(t,i.w,i.h,s,l));return i}function xr({top:e,left:t,width:n,height:r}){const s=`translate(${t}px,${e}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${n}px`,height:`${r}px`,position:"absolute"}}function Js({top:e,left:t,width:n,height:r}){return{top:`${e}px`,left:`${t}px`,width:`${n}px`,height:`${r}px`,position:"absolute"}}function Un(e){return e*100+"%"}function Qs(e,t,n,r){return e+n>r?t:n}function yr(e,t,n){return e<0?t:n}function Zs(e){return Math.max(0,e)}function Xt(e){return Math.max(0,e)}var Pn=(e,t,n)=>{const{left:r,height:s,width:l}=t,i=e.top-(s-e.height);return{left:r,width:l,height:yr(i,e.height,s),top:Xt(i)}},Mn=(e,t,n)=>{const{top:r,left:s,height:l,width:i}=t;return{top:r,height:l,width:Qs(e.left,e.width,i,n),left:Zs(s)}},zn=(e,t,n)=>{const{top:r,height:s,width:l}=t,i=e.left+e.width-l;return i<0?{height:s,width:e.left+e.width,top:Xt(r),left:0}:{height:s,width:l,top:Xt(r),left:i}},_n=(e,t,n)=>{const{top:r,left:s,height:l,width:i}=t;return{width:i,left:s,height:yr(r,e.height,l),top:Xt(r)}},eo=(e,t,n)=>Pn(e,Mn(e,t,n)),to=(e,t,n)=>Pn(e,zn(e,t)),no=(e,t,n)=>_n(e,Mn(e,t,n)),ro=(e,t,n)=>_n(e,zn(e,t)),so={n:Pn,ne:eo,e:Mn,se:no,s:_n,sw:ro,w:zn,nw:to};function oo(e,t,n,r){const s=so[e];return s?s(t,{...t,...n},r):n}var ao={type:"transform",scale:1,calcStyle(e){return xr(e)}},io=ao,lo={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},co={enabled:!0,bounded:!1,threshold:3},uo={enabled:!0,handles:["se"]},fo={enabled:!1,defaultItem:{w:1,h:1}};function br(e,t,n,r,s){const l="h";t[r]+=1;const i=e.findIndex(a=>a.i===t.i),c=s??On(e).length>0;for(let a=i+1;a<e.length;a++){const u=e[a];if(u!==void 0&&!u.static){if(!c&&u.y>t.y+t.h)break;En(t,u)&&br(e,u,n+t[l],r,c)}}t[r]=n}function ho(e,t,n,r){for(t.x=Math.max(t.x,0),t.y=Math.max(t.y,0),t.y=Math.min(r,t.y);t.y>0&&!Bt(e,t);)t.y--;let s;for(;(s=Bt(e,t))!==void 0;)br(n,t,s.y+s.h,"y");return t.y=Math.max(t.y,0),t}var vr={type:"vertical",allowOverlap:!1,compact(e,t){const n=On(e);let r=Rn(n);const s=yn(e),l=new Array(e.length);for(let i=0;i<s.length;i++){const c=s[i];if(c===void 0)continue;let a=Nt(c);a.static||(a=ho(n,a,s,r),r=Math.max(r,a.y+a.h),n.push(a));const u=e.indexOf(c);l[u]=a,a.moved=!1}return l}},po={...vr,allowOverlap:!0,compact(e,t){return mr(e)}};function mo(e,t=!1,n=!1){let r;return t?r=po:r=vr,n?{...r,preventCollision:n}:r}function wr(e){return function(n,r,s,l,i,c,a){return e(n,r,a)}}function Kt(e){return function(n,r,s,l){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s,l);var i=l.get(n),c=l.get(r);if(i&&c)return i===r&&c===n;l.set(n,r),l.set(r,n);var a=e(n,r,s,l);return l.delete(n),l.delete(r),a}}function jr(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function Vn(e){return e.constructor===Object||e.constructor==null}function Kn(e){return typeof e.then=="function"}function Jt(e,t){return e===t||e!==e&&t!==t}var go="[object Arguments]",xo="[object Boolean]",yo="[object Date]",bo="[object RegExp]",vo="[object Map]",wo="[object Number]",jo="[object Object]",So="[object Set]",No="[object String]",Jn=Object.prototype.toString;function Qt(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,s=e.areObjectsEqual,l=e.areRegExpsEqual,i=e.areSetsEqual,c=e.createIsNestedEqual,a=c(u);function u(f,d,b){if(f===d)return!0;if(!f||!d||typeof f!="object"||typeof d!="object")return f!==f&&d!==d;if(Vn(f)&&Vn(d))return s(f,d,a,b);var p=Array.isArray(f),g=Array.isArray(d);if(p||g)return p===g&&t(f,d,a,b);var S=Jn.call(f);return S!==Jn.call(d)?!1:S===yo?n(f,d,a,b):S===bo?l(f,d,a,b):S===vo?r(f,d,a,b):S===So?i(f,d,a,b):S===jo||S===go?Kn(f)||Kn(d)?!1:s(f,d,a,b):S===xo||S===wo||S===No?Jt(f.valueOf(),d.valueOf()):!1}return u}function Sr(e,t,n,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n(e[s],t[s],s,s,e,t,r))return!1;return!0}var Co=Kt(Sr);function Nr(e,t){return Jt(e.valueOf(),t.valueOf())}function Cr(e,t,n,r){var s=e.size===t.size;if(!s)return!1;if(!e.size)return!0;var l={},i=0;return e.forEach(function(c,a){if(s){var u=!1,f=0;t.forEach(function(d,b){!u&&!l[f]&&(u=n(a,b,i,f,e,t,r)&&n(c,d,a,b,e,t,r))&&(l[f]=!0),f++}),i++,s=u}}),s}var Do=Kt(Cr),ko="_owner",Eo=Object.prototype.hasOwnProperty;function Dr(e,t,n,r){var s=Object.keys(e),l=s.length;if(Object.keys(t).length!==l)return!1;for(var i;l-- >0;){if(i=s[l],i===ko){var c=!!e.$$typeof,a=!!t.$$typeof;if((c||a)&&c!==a)return!1}if(!Eo.call(t,i)||!n(e[i],t[i],i,i,e,t,r))return!1}return!0}var Ro=Kt(Dr);function kr(e,t){return e.source===t.source&&e.flags===t.flags}function Er(e,t,n,r){var s=e.size===t.size;if(!s)return!1;if(!e.size)return!0;var l={};return e.forEach(function(i,c){if(s){var a=!1,u=0;t.forEach(function(f,d){!a&&!l[u]&&(a=n(i,f,c,d,e,t,r))&&(l[u]=!0),u++}),s=a}}),s}var Oo=Kt(Er),Rr=Object.freeze({areArraysEqual:Sr,areDatesEqual:Nr,areMapsEqual:Cr,areObjectsEqual:Dr,areRegExpsEqual:kr,areSetsEqual:Er,createIsNestedEqual:wr}),Or=Object.freeze({areArraysEqual:Co,areDatesEqual:Nr,areMapsEqual:Do,areObjectsEqual:Ro,areRegExpsEqual:kr,areSetsEqual:Oo,createIsNestedEqual:wr}),Po=Qt(Rr);function bt(e,t){return Po(e,t,void 0)}Qt(jr(Rr,{createIsNestedEqual:function(){return Jt}}));Qt(Or);Qt(jr(Or,{createIsNestedEqual:function(){return Jt}}));var Zt={exports:{}},Pr={},Mr={exports:{}},Mo="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zo=Mo,_o=zo;function zr(){}function _r(){}_r.resetWarningCache=zr;var To=function(){function e(r,s,l,i,c,a){if(a!==_o){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_r,resetWarningCache:zr};return n.PropTypes=n,n};Mr.exports=To();var en=Mr.exports;const Wo=os(Ss);var te={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.dontSetMe=Io;Xe.findInArray=Lo;Xe.int=Ho;Xe.isFunction=$o;Xe.isNum=Ao;function Lo(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function $o(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Ao(e){return typeof e=="number"&&!isNaN(e)}function Ho(e){return parseInt(e,10)}function Io(e,t,n){if(e[t])return new Error(`Invalid prop ${t} passed to ${n} - do not set this, set it on the child.`)}var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.browserPrefixToKey=Wr;xt.browserPrefixToStyle=Yo;xt.default=void 0;xt.getPrefix=Tr;const dn=["Moz","Webkit","O","ms"];function Tr(){var n,r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!t||e in t)return"";for(let s=0;s<dn.length;s++)if(Wr(e,dn[s])in t)return dn[s];return""}function Wr(e,t){return t?`${t}${Go(e)}`:e}function Yo(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function Go(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}xt.default=Tr();Object.defineProperty(te,"__esModule",{value:!0});te.addClassName=Ar;te.addEvent=Fo;te.addUserSelectStyles=na;te.createCSSTransform=Qo;te.createSVGTransform=Zo;te.getTouch=ea;te.getTouchIdentifier=ta;te.getTranslation=Tn;te.innerHeight=Vo;te.innerWidth=Ko;te.matchesSelector=$r;te.matchesSelectorAndParentsTo=qo;te.offsetXYFromParent=Jo;te.outerHeight=Xo;te.outerWidth=Uo;te.removeClassName=Hr;te.removeEvent=Bo;te.scheduleRemoveUserSelectStyles=ra;var _e=Xe,Qn=Lr(xt);function Lr(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Lr=function(s,l){if(!l&&s&&s.__esModule)return s;var i,c,a={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return a;if(i=l?r:n){if(i.has(s))return i.get(s);i.set(s,a)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((c=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(c.get||c.set)?i(a,u,c):a[u]=s[u]);return a})(e,t)}let It="";function $r(e,t){return It||(It=(0,_e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,_e.isFunction)(e[n])})),(0,_e.isFunction)(e[It])?e[It](t):!1}function qo(e,t,n){let r=e;do{if($r(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Fo(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,s):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function Bo(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,s):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function Xo(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_e.int)(n.borderTopWidth),t+=(0,_e.int)(n.borderBottomWidth),t}function Uo(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_e.int)(n.borderLeftWidth),t+=(0,_e.int)(n.borderRightWidth),t}function Vo(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_e.int)(n.paddingTop),t-=(0,_e.int)(n.paddingBottom),t}function Ko(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_e.int)(n.paddingLeft),t-=(0,_e.int)(n.paddingRight),t}function Jo(e,t,n){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),l=(e.clientX+t.scrollLeft-s.left)/n,i=(e.clientY+t.scrollTop-s.top)/n;return{x:l,y:i}}function Qo(e,t){const n=Tn(e,t,"px");return{[(0,Qn.browserPrefixToKey)("transform",Qn.default)]:n}}function Zo(e,t){return Tn(e,t,"")}function Tn(e,t,n){let{x:r,y:s}=e,l=`translate(${r}${n},${s}${n})`;if(t){const i=`${typeof t.x=="string"?t.x:t.x+n}`,c=`${typeof t.y=="string"?t.y:t.y+n}`;l=`translate(${i}, ${c})`+l}return l}function ea(e,t){return e.targetTouches&&(0,_e.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,_e.findInArray)(e.changedTouches,n=>t===n.identifier)}function ta(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function na(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Ar(e.body,"react-draggable-transparent-selection")}function ra(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Zn(e)}):Zn(e)}function Zn(e){if(e)try{if(e.body&&Hr(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Ar(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function Hr(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.canDragX=aa;Ue.canDragY=ia;Ue.createCoreData=ca;Ue.createDraggableData=ua;Ue.getBoundPosition=sa;Ue.getControlPosition=la;Ue.snapToGrid=oa;var ze=Xe,jt=te;function sa(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:da(r);const s=Wn(e);if(typeof r=="string"){const{ownerDocument:l}=s,i=l.defaultView;let c;if(r==="parent"?c=s.parentNode:c=s.getRootNode().querySelector(r),!(c instanceof i.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const a=c,u=i.getComputedStyle(s),f=i.getComputedStyle(a);r={left:-s.offsetLeft+(0,ze.int)(f.paddingLeft)+(0,ze.int)(u.marginLeft),top:-s.offsetTop+(0,ze.int)(f.paddingTop)+(0,ze.int)(u.marginTop),right:(0,jt.innerWidth)(a)-(0,jt.outerWidth)(s)-s.offsetLeft+(0,ze.int)(f.paddingRight)-(0,ze.int)(u.marginRight),bottom:(0,jt.innerHeight)(a)-(0,jt.outerHeight)(s)-s.offsetTop+(0,ze.int)(f.paddingBottom)-(0,ze.int)(u.marginBottom)}}return(0,ze.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,ze.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ze.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,ze.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function oa(e,t,n){const r=Math.round(t/e[0])*e[0],s=Math.round(n/e[1])*e[1];return[r,s]}function aa(e){return e.props.axis==="both"||e.props.axis==="x"}function ia(e){return e.props.axis==="both"||e.props.axis==="y"}function la(e,t,n){const r=typeof t=="number"?(0,jt.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const s=Wn(n),l=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,jt.offsetXYFromParent)(r||e,l,n.props.scale)}function ca(e,t,n){const r=!(0,ze.isNum)(e.lastX),s=Wn(e);return r?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function ua(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function da(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Wn(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var tn={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.default=fa;function fa(){}Object.defineProperty(tn,"__esModule",{value:!0});tn.default=void 0;var fn=Ir(h),we=Ln(en),ha=Ln(lr),xe=te,dt=Ue,hn=Xe,Rt=Ln(nn);function Ln(e){return e&&e.__esModule?e:{default:e}}function Ir(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Ir=function(s,l){if(!l&&s&&s.__esModule)return s;var i,c,a={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return a;if(i=l?r:n){if(i.has(s))return i.get(s);i.set(s,a)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((c=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(c.get||c.set)?i(a,u,c):a[u]=s[u]);return a})(e,t)}function je(e,t,n){return(t=pa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pa(e){var t=ma(e,"string");return typeof t=="symbol"?t:t+""}function ma(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Ge={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ft=Ge.mouse,rn=class extends fn.Component{constructor(){super(...arguments),je(this,"dragging",!1),je(this,"lastX",NaN),je(this,"lastY",NaN),je(this,"touchIdentifier",null),je(this,"mounted",!1),je(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,xe.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,xe.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const s=(0,xe.getTouchIdentifier)(t);this.touchIdentifier=s;const l=(0,dt.getControlPosition)(t,s,this);if(l==null)return;const{x:i,y:c}=l,a=(0,dt.createCoreData)(this,i,c);(0,Rt.default)("DraggableCore: handleDragStart: %j",a),(0,Rt.default)("calling",this.props.onStart),!(this.props.onStart(t,a)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,xe.addUserSelectStyles)(r),this.dragging=!0,this.lastX=i,this.lastY=c,(0,xe.addEvent)(r,ft.move,this.handleDrag),(0,xe.addEvent)(r,ft.stop,this.handleDragStop))}),je(this,"handleDrag",t=>{const n=(0,dt.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX,a=s-this.lastY;if([c,a]=(0,dt.snapToGrid)(this.props.grid,c,a),!c&&!a)return;r=this.lastX+c,s=this.lastY+a}const l=(0,dt.createCoreData)(this,r,s);if((0,Rt.default)("DraggableCore: handleDrag: %j",l),this.props.onDrag(t,l)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(a)}return}this.lastX=r,this.lastY=s}),je(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,dt.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX||0,u=s-this.lastY||0;[a,u]=(0,dt.snapToGrid)(this.props.grid,a,u),r=this.lastX+a,s=this.lastY+u}const l=(0,dt.createCoreData)(this,r,s);if(this.props.onStop(t,l)===!1||this.mounted===!1)return!1;const c=this.findDOMNode();c&&this.props.enableUserSelectHack&&(0,xe.scheduleRemoveUserSelectStyles)(c.ownerDocument),(0,Rt.default)("DraggableCore: handleDragStop: %j",l),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,c&&((0,Rt.default)("DraggableCore: Removing handlers"),(0,xe.removeEvent)(c.ownerDocument,ft.move,this.handleDrag),(0,xe.removeEvent)(c.ownerDocument,ft.stop,this.handleDragStop))}),je(this,"onMouseDown",t=>(ft=Ge.mouse,this.handleDragStart(t))),je(this,"onMouseUp",t=>(ft=Ge.mouse,this.handleDragStop(t))),je(this,"onTouchStart",t=>(ft=Ge.touch,this.handleDragStart(t))),je(this,"onTouchEnd",t=>(ft=Ge.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,xe.addEvent)(t,Ge.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,xe.removeEvent)(n,Ge.mouse.move,this.handleDrag),(0,xe.removeEvent)(n,Ge.touch.move,this.handleDrag),(0,xe.removeEvent)(n,Ge.mouse.stop,this.handleDragStop),(0,xe.removeEvent)(n,Ge.touch.stop,this.handleDragStop),(0,xe.removeEvent)(t,Ge.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,xe.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var t,n,r;return(t=this.props)!=null&&t.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:ha.default.findDOMNode(this)}render(){return fn.cloneElement(fn.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};tn.default=rn;je(rn,"displayName","DraggableCore");je(rn,"propTypes",{allowAnyClick:we.default.bool,allowMobileScroll:we.default.bool,children:we.default.node.isRequired,disabled:we.default.bool,enableUserSelectHack:we.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:we.default.arrayOf(we.default.number),handle:we.default.string,cancel:we.default.string,nodeRef:we.default.object,onStart:we.default.func,onDrag:we.default.func,onStop:we.default.func,onMouseDown:we.default.func,scale:we.default.number,className:hn.dontSetMe,style:hn.dontSetMe,transform:hn.dontSetMe});je(rn,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return a.default}}),e.default=void 0;var t=d(h),n=f(en),r=f(lr),s=Wo,l=te,i=Ue,c=Xe,a=f(tn),u=f(nn);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,C){if(typeof WeakMap=="function")var k=new WeakMap,M=new WeakMap;return(d=function(R,O){if(!O&&R&&R.__esModule)return R;var F,G,H={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return H;if(F=O?M:k){if(F.has(R))return F.get(R);F.set(R,H)}for(const ie in R)ie!=="default"&&{}.hasOwnProperty.call(R,ie)&&((G=(F=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,ie))&&(G.get||G.set)?F(H,ie,G):H[ie]=R[ie]);return H})(w,C)}function b(){return b=Object.assign?Object.assign.bind():function(w){for(var C=1;C<arguments.length;C++){var k=arguments[C];for(var M in k)({}).hasOwnProperty.call(k,M)&&(w[M]=k[M])}return w},b.apply(null,arguments)}function p(w,C,k){return(C=g(C))in w?Object.defineProperty(w,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[C]=k,w}function g(w){var C=S(w,"string");return typeof C=="symbol"?C:C+""}function S(w,C){if(typeof w!="object"||!w)return w;var k=w[Symbol.toPrimitive];if(k!==void 0){var M=k.call(w,C);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(w)}class E extends t.Component{static getDerivedStateFromProps(C,k){let{position:M}=C,{prevPropsPosition:R}=k;return M&&(!R||M.x!==R.x||M.y!==R.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:M,prevPropsPosition:R}),{x:M.x,y:M.y,prevPropsPosition:{...M}}):null}constructor(C){super(C),p(this,"onDragStart",(k,M)=>{if((0,u.default)("Draggable: onDragStart: %j",M),this.props.onStart(k,(0,i.createDraggableData)(this,M))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(k,M)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",M);const R=(0,i.createDraggableData)(this,M),O={x:R.x,y:R.y,slackX:0,slackY:0};if(this.props.bounds){const{x:G,y:H}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[ie,rt]=(0,i.getBoundPosition)(this,O.x,O.y);O.x=ie,O.y=rt,O.slackX=this.state.slackX+(G-O.x),O.slackY=this.state.slackY+(H-O.y),R.x=O.x,R.y=O.y,R.deltaX=O.x-this.state.x,R.deltaY=O.y-this.state.y}if(this.props.onDrag(k,R)===!1)return!1;this.setState(O)}),p(this,"onDragStop",(k,M)=>{if(!this.state.dragging||this.props.onStop(k,(0,i.createDraggableData)(this,M))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",M);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:G,y:H}=this.props.position;O.x=G,O.y=H}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var C,k;return((k=(C=this.props)==null?void 0:C.nodeRef)==null?void 0:k.current)??r.default.findDOMNode(this)}render(){const{axis:C,bounds:k,children:M,defaultPosition:R,defaultClassName:O,defaultClassNameDragging:F,defaultClassNameDragged:G,position:H,positionOffset:ie,scale:rt,...st}=this.props;let $={},T=null;const U=!!!H||this.state.dragging,le=H||R,re={x:(0,i.canDragX)(this)&&U?this.state.x:le.x,y:(0,i.canDragY)(this)&&U?this.state.y:le.y};this.state.isElementSVG?T=(0,l.createSVGTransform)(re,ie):$=(0,l.createCSSTransform)(re,ie);const Ae=(0,s.clsx)(M.props.className||"",O,{[F]:this.state.dragging,[G]:this.state.dragged});return t.createElement(a.default,b({},st,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(M),{className:Ae,style:{...M.props.style,...$},transform:T}))}}e.default=E,p(E,"displayName","Draggable"),p(E,"propTypes",{...a.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),p(E,"defaultProps",{...a.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Pr);const{default:Yr,DraggableCore:ga}=Pr;Zt.exports=Yr;Zt.exports.default=Yr;var xa=Zt.exports.DraggableCore=ga,ya=Zt.exports,$n={exports:{}},zt={},An={};An.__esModule=!0;An.cloneElement=Na;var ba=va(h);function va(e){return e&&e.__esModule?e:{default:e}}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(r){wa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wa(e,t,n){return(t=ja(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e){var t=Sa(e,"string");return typeof t=="symbol"?t:t+""}function Sa(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Na(e,t){return t.style&&e.props.style&&(t.style=tr(tr({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=`${e.props.className} ${t.className}`),ba.default.cloneElement(e,t)}var _t={};_t.__esModule=!0;_t.resizableProps=void 0;var P=Ca(en);function Ca(e){return e&&e.__esModule?e:{default:e}}_t.resizableProps={axis:P.default.oneOf(["both","x","y","none"]),className:P.default.string,children:P.default.element.isRequired,draggableOpts:P.default.shape({allowAnyClick:P.default.bool,cancel:P.default.string,children:P.default.node,disabled:P.default.bool,enableUserSelectHack:P.default.bool,offsetParent:typeof Element<"u"?P.default.instanceOf(Element):P.default.any,grid:P.default.arrayOf(P.default.number),handle:P.default.string,nodeRef:P.default.object,onStart:P.default.func,onDrag:P.default.func,onStop:P.default.func,onMouseDown:P.default.func,scale:P.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t;return r.axis==="both"||r.axis==="y"?P.default.number.isRequired(...t):P.default.number(...t)},handle:P.default.oneOfType([P.default.node,P.default.func]),handleSize:P.default.arrayOf(P.default.number),lockAspectRatio:P.default.bool,maxConstraints:P.default.arrayOf(P.default.number),minConstraints:P.default.arrayOf(P.default.number),onResizeStop:P.default.func,onResizeStart:P.default.func,onResize:P.default.func,resizeHandles:P.default.arrayOf(P.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:P.default.number,width:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t;return r.axis==="both"||r.axis==="x"?P.default.number.isRequired(...t):P.default.number(...t)}};zt.__esModule=!0;zt.default=void 0;var vt=Gr(h),Da=ya,ka=An,Ea=_t;const Ra=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function Gr(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Gr=function(s,l){if(!l&&s&&s.__esModule)return s;var i,c,a={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return a;if(i=l?r:n){if(i.has(s))return i.get(s);i.set(s,a)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((c=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(c.get||c.set)?i(a,u,c):a[u]=s[u]);return a})(e,t)}function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bn.apply(null,arguments)}function Oa(e,t){if(e==null)return{};var n,r,s=Pa(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Pa(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nr(Object(n),!0).forEach(function(r){Ma(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ma(e,t,n){return(t=za(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function za(e){var t=_a(e,"string");return typeof t=="symbol"?t:t+""}function _a(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}let Hn=class extends vt.Component{constructor(){super(...arguments),this.handleRefs={},this.lastHandleRect=null,this.slack=null,this.lastSize=null}componentWillUnmount(){this.resetData()}resetData(){this.lastHandleRect=this.slack=this.lastSize=null}runConstraints(t,n){const{minConstraints:r,maxConstraints:s,lockAspectRatio:l}=this.props;if(!r&&!s&&!l)return[t,n];if(l){const f=this.props.width/this.props.height,d=t-this.props.width,b=n-this.props.height;Math.abs(d)>Math.abs(b*f)?n=t/f:t=n*f}const[i,c]=[t,n];let[a,u]=this.slack||[0,0];return t+=a,n+=u,r&&(t=Math.max(r[0],t),n=Math.max(r[1],n)),s&&(t=Math.min(s[0],t),n=Math.min(s[1],n)),this.slack=[a+(i-t),u+(c-n)],[t,n]}resizeHandler(t,n){return(r,s)=>{var C;let{node:l,deltaX:i,deltaY:c}=s;t==="onResizeStart"&&this.resetData();const a=(this.props.axis==="both"||this.props.axis==="x")&&n!=="n"&&n!=="s",u=(this.props.axis==="both"||this.props.axis==="y")&&n!=="e"&&n!=="w";if(!a&&!u)return;const f=n[0],d=n[n.length-1],b=l.getBoundingClientRect();if(this.lastHandleRect!=null){if(d==="w"){const k=b.left-this.lastHandleRect.left;i+=k}if(f==="n"){const k=b.top-this.lastHandleRect.top;c+=k}}this.lastHandleRect=b,d==="w"&&(i=-i),f==="n"&&(c=-c);let p=this.props.width+(a?i/this.props.transformScale:0),g=this.props.height+(u?c/this.props.transformScale:0);[p,g]=this.runConstraints(p,g),t==="onResizeStop"&&this.lastSize&&({width:p,height:g}=this.lastSize);const S=p!==this.props.width||g!==this.props.height;t!=="onResizeStop"&&(this.lastSize={width:p,height:g});const E=typeof this.props[t]=="function"?this.props[t]:null;E&&!(t==="onResize"&&!S)&&((C=r.persist)==null||C.call(r),E(r,{node:l,size:{width:p,height:g},handle:n})),t==="onResizeStop"&&this.resetData()}}renderResizeHandle(t,n){const{handle:r}=this.props;if(!r)return vt.createElement("span",{className:`react-resizable-handle react-resizable-handle-${t}`,ref:n});if(typeof r=="function")return r(t,n);const s=typeof r.type=="string",l=pn({ref:n},s?{}:{handleAxis:t});return vt.cloneElement(r,l)}render(){const t=this.props,{children:n,className:r,draggableOpts:s,width:l,height:i,handle:c,handleSize:a,lockAspectRatio:u,axis:f,minConstraints:d,maxConstraints:b,onResize:p,onResizeStop:g,onResizeStart:S,resizeHandles:E,transformScale:w}=t,C=Oa(t,Ra);return(0,ka.cloneElement)(n,pn(pn({},C),{},{className:`${r?`${r} `:""}react-resizable`,children:[...vt.Children.toArray(n.props.children),...E.map(k=>{const M=this.handleRefs[k]??(this.handleRefs[k]=vt.createRef());return vt.createElement(Da.DraggableCore,bn({},s,{nodeRef:M,key:`resizableHandle-${k}`,onStop:this.resizeHandler("onResizeStop",k),onStart:this.resizeHandler("onResizeStart",k),onDrag:this.resizeHandler("onResize",k)}),this.renderResizeHandle(k,M))})]}))}};zt.default=Hn;Hn.propTypes=Ea.resizableProps;Hn.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var sn={};sn.__esModule=!0;sn.default=void 0;var mn=Fr(h),Ta=qr(en),Wa=qr(zt),La=_t;const $a=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function qr(e){return e&&e.__esModule?e:{default:e}}function Fr(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Fr=function(s,l){if(!l&&s&&s.__esModule)return s;var i,c,a={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return a;if(i=l?r:n){if(i.has(s))return i.get(s);i.set(s,a)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((c=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(c.get||c.set)?i(a,u,c):a[u]=s[u]);return a})(e,t)}function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vn.apply(null,arguments)}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(r){Aa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aa(e,t,n){return(t=Ha(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ha(e){var t=Ia(e,"string");return typeof t=="symbol"?t:t+""}function Ia(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ya(e,t){if(e==null)return{};var n,r,s=Ga(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Ga(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}class Br extends mn.Component{constructor(){super(...arguments),this.state={width:this.props.width,height:this.props.height,propsWidth:this.props.width,propsHeight:this.props.height},this.onResize=(t,n)=>{var s;const{size:r}=n;this.props.onResize?((s=t.persist)==null||s.call(t),this.setState(r,()=>this.props.onResize&&this.props.onResize(t,n))):this.setState(r)}}static getDerivedStateFromProps(t,n){return n.propsWidth!==t.width||n.propsHeight!==t.height?{width:t.width,height:t.height,propsWidth:t.width,propsHeight:t.height}:null}render(){const t=this.props,{handle:n,handleSize:r,onResize:s,onResizeStart:l,onResizeStop:i,draggableOpts:c,minConstraints:a,maxConstraints:u,lockAspectRatio:f,axis:d,width:b,height:p,resizeHandles:g,style:S,transformScale:E}=t,w=Ya(t,$a);return mn.createElement(Wa.default,{axis:d,draggableOpts:c,handle:n,handleSize:r,height:this.state.height,lockAspectRatio:f,maxConstraints:u,minConstraints:a,onResizeStart:l,onResize:this.onResize,onResizeStop:i,resizeHandles:g,transformScale:E,width:this.state.width},mn.createElement("div",vn({},w,{style:Ut(Ut({},S),{},{width:this.state.width+"px",height:this.state.height+"px"})})))}}sn.default=Br;Br.propTypes=Ut(Ut({},La.resizableProps),{},{children:Ta.default.element});$n.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var qa=$n.exports.Resizable=zt.default;$n.exports.ResizableBox=sn.default;function sr(e){const{children:t,cols:n,containerWidth:r,margin:s,containerPadding:l,rowHeight:i,maxRows:c,isDraggable:a,isResizable:u,isBounded:f,static:d,useCSSTransforms:b=!0,usePercentages:p=!1,transformScale:g=1,positionStrategy:S,dragThreshold:E=0,droppingPosition:w,className:C="",style:k,handle:M="",cancel:R="",x:O,y:F,w:G,h:H,minW:ie=1,maxW:rt=1/0,minH:st=1,maxH:$=1/0,i:T,resizeHandles:De,resizeHandle:U,constraints:le=gr,layoutItem:re,layout:Ae=[],onDragStart:Q,onDrag:He,onDragStop:ke,onResizeStart:ot,onResize:Ve,onResizeStop:Ee}=e,[ue,Re]=h.useState(!1),[at,ee]=h.useState(!1),he=h.useRef(null),B=h.useRef({left:0,top:0}),Oe=h.useRef({top:0,left:0,width:0,height:0}),Se=h.useRef(void 0),Ke=h.useRef(Ae);Ke.current=Ae;const be=h.useRef(null),ve=h.useRef(null),m=h.useRef(!1),y=h.useRef({x:0,y:0}),x=h.useRef(!1),j=h.useMemo(()=>({cols:n,containerPadding:l,containerWidth:r,margin:s,maxRows:c,rowHeight:i}),[n,l,r,s,c,i]),se=h.useMemo(()=>({cols:n,maxRows:c,containerWidth:r,containerHeight:0,rowHeight:i,margin:s,layout:[]}),[n,c,r,i,s]),X=h.useCallback(()=>({...se,layout:Ke.current}),[se]),pe=h.useMemo(()=>re??{i:T,x:O,y:F,w:G,h:H,minW:ie,maxW:rt,minH:st,maxH:$},[re,T,O,F,G,H,ie,rt,st,$]),Je=h.useCallback(_=>{if(S!=null&&S.calcStyle)return S.calcStyle(_);if(b)return xr(_);const W=Js(_);return p?{...W,left:Un(_.left/r),width:Un(_.width/r)}:W},[S,b,p,r]),Te=h.useCallback((_,{node:W})=>{if(!Q)return;const{offsetParent:V}=W;if(!V)return;const q=V.getBoundingClientRect(),ae=W.getBoundingClientRect(),de=ae.left/g,me=q.left/g,fe=ae.top/g,Le=q.top/g;let $e;if(S!=null&&S.calcDragPosition){const z=_;$e=S.calcDragPosition(z.clientX,z.clientY,z.clientX-ae.left,z.clientY-ae.top)}else $e={left:de-me+V.scrollLeft,top:fe-Le+V.scrollTop};if(B.current=$e,E>0){const z=_;y.current={x:z.clientX,y:z.clientY},m.current=!0,x.current=!1,Re(!0);return}Re(!0);const ct=At(j,$e.top,$e.left),{x:ut,y:v}=Ht(le,pe,ct.x,ct.y,X());Q(T,ut,v,{e:_,node:W,newPosition:$e})},[Q,g,j,S,E,le,pe,X,T]),it=h.useCallback((_,{node:W,deltaX:V,deltaY:q})=>{if(!He||!ue)return;const ae=_;if(m.current&&!x.current){const ut=ae.clientX-y.current.x,v=ae.clientY-y.current.y;if(Math.hypot(ut,v)<E)return;if(x.current=!0,m.current=!1,Q){const D=At(j,B.current.top,B.current.left),{x:L,y:Y}=Ht(le,pe,D.x,D.y,X());Q(T,L,Y,{e:_,node:W,newPosition:B.current})}}let de=B.current.top+q,me=B.current.left+V;if(f){const{offsetParent:ut}=W;if(ut){const v=ut.clientHeight-St(H,i,s[1]);de=Ft(de,0,v);const z=Ct(j),D=r-St(G,z,s[0]);me=Ft(me,0,D)}}const fe={top:de,left:me};B.current=fe;const Le=At(j,de,me),{x:$e,y:ct}=Ht(le,pe,Le.x,Le.y,X());He(T,$e,ct,{e:_,node:W,newPosition:fe})},[He,Q,ue,E,f,H,i,s,j,r,G,T,le,pe,X]),Ie=h.useCallback((_,{node:W})=>{if(!ke||!ue)return;const V=m.current;if(m.current=!1,x.current=!1,y.current={x:0,y:0},V){Re(!1),B.current={left:0,top:0};return}const{left:q,top:ae}=B.current,de={top:ae,left:q};Re(!1),B.current={left:0,top:0};const me=At(j,ae,q),{x:fe,y:Le}=Ht(le,pe,me.x,me.y,X());ke(T,fe,Le,{e:_,node:W,newPosition:de})},[ke,ue,j,le,pe,X,T]);be.current=Te,ve.current=it;const Ne=h.useCallback((_,{node:W,size:V,handle:q},ae,de)=>{const me=de==="onResizeStart"?ot:de==="onResize"?Ve:Ee;if(!me)return;let fe;W?fe=oo(q,ae,V,r):fe={...V,top:ae.top,left:ae.left},Oe.current=fe;const Le=Ys(j,fe.width,fe.height),{w:$e,h:ct}=Ks(le,pe,Le.w,Le.h,q,X());me(T,$e,ct,{e:_.nativeEvent,node:W,size:fe,handle:q})},[ot,Ve,Ee,r,j,T,le,pe,X]),Pe=h.useCallback((_,W)=>{ee(!0);const V=Et(j,O,F,G,H),q={...W,handle:W.handle};Ne(_,q,V,"onResizeStart")},[Ne,j,O,F,G,H]),lt=h.useCallback((_,W)=>{const V=Et(j,O,F,G,H),q={...W,handle:W.handle};Ne(_,q,V,"onResize")},[Ne,j,O,F,G,H]),Me=h.useCallback((_,W)=>{ee(!1),Oe.current={top:0,left:0,width:0,height:0};const V=Et(j,O,F,G,H),q={...W,handle:W.handle};Ne(_,q,V,"onResizeStop")},[Ne,j,O,F,G,H]);h.useEffect(()=>{var q,ae;if(!w)return;const _=he.current;if(!_)return;const W=Se.current||{left:0,top:0},V=ue&&(w.left!==W.left||w.top!==W.top);if(ue){if(V){const de=w.left-B.current.left,me=w.top-B.current.top,fe={node:_,deltaX:de,deltaY:me,lastX:B.current.left,lastY:B.current.top,x:w.left,y:w.top};(ae=ve.current)==null||ae.call(ve,w.e,fe)}}else{const de={node:_,deltaX:w.left,deltaY:w.top,lastX:0,lastY:0,x:w.left,y:w.top};(q=be.current)==null||q.call(be,w.e,de)}Se.current=w},[w,ue,T]);const Ce=Et(j,O,F,G,H,ue?B.current:null,at?Oe.current:null),Qe=pt.Children.only(t),We=Et(j,0,0,1,1),N=[We.width,We.height],oe=[1/0,1/0],I=Qe.props,qe=I.className,Ye=I.style;let ne=pt.cloneElement(Qe,{ref:he,className:hr("react-grid-item",qe,C,{static:d,resizing:at,"react-draggable":a,"react-draggable-dragging":ue,dropping:!!w,cssTransforms:b}),style:{...k,...Ye,...Je(Ce)}});const yt=U;return ne=o.jsx(qa,{draggableOpts:{disabled:!u},className:u?void 0:"react-resizable-hide",width:Ce.width,height:Ce.height,minConstraints:N,maxConstraints:oe,onResizeStart:Pe,onResize:lt,onResizeStop:Me,transformScale:g,resizeHandles:De,handle:yt,children:ne}),ne=o.jsx(xa,{disabled:!a,onStart:Te,onDrag:it,onStop:Ie,handle:M,cancel:".react-resizable-handle"+(R?","+R:""),scale:g,nodeRef:he,children:ne}),ne}var et=()=>{},or="react-grid-layout",Xr=!1;try{Xr=/firefox/i.test(navigator.userAgent)}catch{}function Fa(e,t){const n=pt.Children.toArray(e),r=pt.Children.toArray(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++){const l=n[s],i=r[s];if((l==null?void 0:l.key)!==(i==null?void 0:i.key))return!1}return!0}function ar(e,t,n,r){const s=[],l=new Set;pt.Children.forEach(t,c=>{if(!pt.isValidElement(c)||c.key===null)return;const a=String(c.key);l.add(a);const u=e.find(f=>f.i===a);if(u)s.push(Nt(u));else{const d=c.props["data-grid"];d?s.push({i:a,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):s.push({i:a,x:0,y:Rn(s),w:1,h:1})}});const i=Xs(s,{cols:n});return r.compact(i,n)}function Ba(e){const{children:t,width:n,gridConfig:r,dragConfig:s,resizeConfig:l,dropConfig:i,positionStrategy:c=io,compactor:a,constraints:u=gr,layout:f=[],droppingItem:d,autoSize:b=!0,className:p="",style:g={},innerRef:S,onLayoutChange:E=et,onDragStart:w=et,onDrag:C=et,onDragStop:k=et,onResizeStart:M=et,onResize:R=et,onResizeStop:O=et,onDrop:F=et,onDropDragOver:G=et}=e,H=h.useMemo(()=>({...lo,...r}),[r]),ie=h.useMemo(()=>({...co,...s}),[s]),rt=h.useMemo(()=>({...uo,...l}),[l]),st=h.useMemo(()=>({...fo,...i}),[i]),{cols:$,rowHeight:T,maxRows:De,margin:U,containerPadding:le}=H,{enabled:re,bounded:Ae,handle:Q,cancel:He,threshold:ke}=ie,{enabled:ot,handles:Ve,handleComponent:Ee}=rt,{enabled:ue,defaultItem:Re,onDragOver:at}=st,ee=a??mo(),he=ee.type,B=ee.allowOverlap,Oe=ee.preventCollision??!1,Se=h.useMemo(()=>d??{i:"__dropping-elem__",...Re},[d,Re]),Ke=c.type==="transform",be=c.scale,ve=le??U,[m,y]=h.useState(!1),[x,j]=h.useState(()=>ar(f,t,$,ee)),[se,X]=h.useState(null),[pe,Je]=h.useState(!1),[Te,it]=h.useState(null),[Ie,Ne]=h.useState(),Pe=h.useRef(null),lt=h.useRef(null),Me=h.useRef(null),Ce=h.useRef(0),Qe=h.useRef(x),We=h.useRef(f),N=h.useRef(t),oe=h.useRef(he),I=h.useRef(x);I.current=x,h.useEffect(()=>{y(!0),bt(x,f)||E(x)},[]),h.useEffect(()=>{if(se||Te)return;const v=!bt(f,We.current),z=!Fa(t,N.current),D=he!==oe.current;if(v||z||D){const Y=ar(v?f:x,t,$,ee);bt(Y,x)||j(Y)}We.current=f,N.current=t,oe.current=he},[f,t,$,he,ee,se,Te,x]),h.useEffect(()=>{if(!se&&!bt(x,Qe.current)){Qe.current=x;const v=x.filter(z=>z.i!==Se.i);E(v)}},[x,se,E,Se.i]);const qe=h.useMemo(()=>{if(!b)return;const v=Rn(x),z=ve[1];return v*T+(v-1)*U[1]+z*2+"px"},[b,x,T,U,ve]),Ye=h.useCallback((v,z,D,L)=>{const Y=I.current,A=mt(Y,v);if(!A)return;const K={w:A.w,h:A.h,x:A.x,y:A.y,i:v};Pe.current=Nt(A),Me.current=Y,X(K),w(Y,A,A,null,L.e,L.node)},[w]),ne=h.useCallback((v,z,D,L)=>{const Y=I.current,A=Pe.current,K=mt(Y,v);if(!K)return;const ce={w:K.w,h:K.h,x:K.x,y:K.y,i:v},J=gt(Y,K,z,D,!0,Oe,he,$,B);C(J,A,K,ce,L.e,L.node),j(ee.compact(J,$)),X(ce)},[Oe,he,$,B,ee,C]),yt=h.useCallback((v,z,D,L)=>{if(!se)return;const Y=I.current,A=Pe.current,K=mt(Y,v);if(!K)return;const ce=gt(Y,K,z,D,!0,Oe,he,$,B),J=ee.compact(ce,$);k(J,A,K,null,L.e,L.node);const ge=Me.current;Pe.current=null,Me.current=null,X(null),j(J),ge&&!bt(ge,J)&&E(J)},[se,Oe,he,$,B,ee,k,E]),_=h.useCallback((v,z,D,L)=>{const Y=I.current,A=mt(Y,v);A&&(lt.current=Nt(A),Me.current=Y,Je(!0),M(Y,A,A,null,L.e,L.node))},[M]),W=h.useCallback((v,z,D,L)=>{const Y=I.current,A=lt.current,{handle:K}=L;let ce=!1,J,ge;const[Tt,Ze]=Bs(Y,v,Z=>(J=Z.x,ge=Z.y,["sw","w","nw","n","ne"].includes(K)&&(["sw","nw","w"].includes(K)&&(J=Z.x+(Z.w-z),z=Z.x!==J&&J<0?Z.w:z,J=J<0?0:J),["ne","n","nw"].includes(K)&&(ge=Z.y+(Z.h-D),D=Z.y!==ge&&ge<0?Z.h:D,ge=ge<0?0:ge),ce=!0),Oe&&!B&&pr(Y,{...Z,w:z,h:D,x:J??Z.x,y:ge??Z.y}).filter(Lt=>Lt.i!==Z.i).length>0&&(ge=Z.y,D=Z.h,J=Z.x,z=Z.w,ce=!1),Z.w=z,Z.h=D,Z));if(!Ze)return;let Dt=Tt;ce&&J!==void 0&&ge!==void 0&&(Dt=gt(Tt,Ze,J,ge,!0,Oe,he,$,B));const Wt={w:Ze.w,h:Ze.h,x:Ze.x,y:Ze.y,i:v,static:!0};R(Dt,A,Ze,Wt,L.e,L.node),j(ee.compact(Dt,$)),X(Wt)},[Oe,he,$,B,ee,R]),V=h.useCallback((v,z,D,L)=>{const Y=I.current,A=lt.current,K=mt(Y,v),ce=ee.compact(Y,$);O(ce,A,K??null,null,L.e,L.node);const J=Me.current;lt.current=null,Me.current=null,X(null),Je(!1),j(ce),J&&!bt(J,ce)&&E(ce)},[$,ee,O,E]),q=h.useCallback(()=>{const v=I.current;if(!v.some(L=>L.i===Se.i)){it(null),X(null),Ne(void 0);return}const D=ee.compact(v.filter(L=>L.i!==Se.i),$);j(D),it(null),X(null),Ne(void 0)},[Se.i,$,ee]),ae=h.useCallback(v=>{var In;if(v.preventDefault(),v.stopPropagation(),Xr&&!((In=v.nativeEvent.target)!=null&&In.classList.contains(or)))return!1;const z=at?at(v.nativeEvent):G(v);if(z===!1)return Te&&q(),!1;const{dragOffsetX:D=0,dragOffsetY:L=0,...Y}=z??{},A={...Se,...Y},K=v.currentTarget.getBoundingClientRect(),ce={cols:$,margin:U,maxRows:De,rowHeight:T,containerWidth:n,containerPadding:ve},J=Ct(ce),ge=St(A.w,J,U[0]),Tt=St(A.h,T,U[1]),Ze=ge/2,Dt=Tt/2,Wt=v.clientX-K.left+D-Ze,Z=v.clientY-K.top+L-Dt,on=Math.max(0,Wt),Lt=Math.max(0,Z),$t={left:on/be,top:Lt/be,e:v.nativeEvent};if(Te)Ie&&(Ie.left!==$t.left||Ie.top!==$t.top)&&Ne($t);else{const an=Is(ce,Lt,on,A.w,A.h);it(o.jsx("div",{},A.i)),Ne($t),j([...I.current,{...A,x:an.x,y:an.y,static:!1,isDraggable:!0}])}},[Te,Ie,Se,at,G,q,be,$,U,De,T,n,ve]),de=h.useCallback(v=>{v.preventDefault(),v.stopPropagation(),Ce.current--,Ce.current<0&&(Ce.current=0),Ce.current===0&&q()},[q]),me=h.useCallback(v=>{v.preventDefault(),v.stopPropagation(),Ce.current++},[]),fe=h.useCallback(v=>{v.preventDefault(),v.stopPropagation();const z=I.current,D=z.find(L=>L.i===Se.i);Ce.current=0,q(),F(z,D,v.nativeEvent)},[Se.i,q,F]),Le=h.useCallback((v,z)=>{if(!v||!v.key)return null;const D=mt(x,String(v.key));if(!D)return null;const L=typeof D.isDraggable=="boolean"?D.isDraggable:!D.static&&re,Y=typeof D.isResizable=="boolean"?D.isResizable:!D.static&&ot,A=D.resizeHandles||[...Ve],K=L&&Ae&&D.isBounded!==!1,ce=Ee;return o.jsx(sr,{containerWidth:n,cols:$,margin:U,containerPadding:ve,maxRows:De,rowHeight:T,cancel:He,handle:Q,onDragStart:Ye,onDrag:ne,onDragStop:yt,onResizeStart:_,onResize:W,onResizeStop:V,isDraggable:L,isResizable:Y,isBounded:K,useCSSTransforms:Ke&&m,usePercentages:!m,transformScale:be,positionStrategy:c,dragThreshold:ke,w:D.w,h:D.h,x:D.x,y:D.y,i:D.i,minH:D.minH,minW:D.minW,maxH:D.maxH,maxW:D.maxW,static:D.static,droppingPosition:z?Ie:void 0,resizeHandles:A,resizeHandle:ce,constraints:u,layoutItem:D,layout:x,children:v},D.i)},[x,n,$,U,ve,De,T,He,Q,Ye,ne,yt,_,W,V,re,ot,Ae,Ke,m,be,c,ke,Ie,Ve,Ee,u]),$e=()=>se?o.jsx(sr,{w:se.w,h:se.h,x:se.x,y:se.y,i:se.i,className:`react-grid-placeholder ${pe?"placeholder-resizing":""}`,containerWidth:n,cols:$,margin:U,containerPadding:ve,maxRows:De,rowHeight:T,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:Ke,transformScale:be,constraints:u,layout:x,children:o.jsx("div",{})}):null,ct=hr(or,p),ut={height:qe,...g};return o.jsxs("div",{ref:S,className:ct,style:ut,onDrop:ue?fe:void 0,onDragLeave:ue?de:void 0,onDragEnter:ue?me:void 0,onDragOver:ue?ae:void 0,children:[pt.Children.map(t,v=>pt.isValidElement(v)?Le(v):null),ue&&Te&&Le(Te,!0),$e()]})}const Yt=[{icon:Yn,title:"Welcome to BENCH ONLY",description:"Your personal strength training companion. Track workouts, set goals, and train smarter.",color:"flame"},{icon:Ot,title:"Log Your Workouts",description:"Log sets, reps, and weight with a clean, focused interface. Track RPE and pain to monitor recovery.",color:"green"},{icon:wn,title:"Set & Track Goals",description:"Create goals for weight, reps, or time. Watch your progress with visual tracking.",color:"purple"},{icon:Yn,title:"AI Training Assistant",description:"Generate workouts tailored to your maxes and history. Each exercise includes form cues, substitutions, and video links.",color:"flame"},{icon:as,title:"AI Form Check",description:"Upload a video of your lift and get frame-by-frame form analysis with coaching cues and scores.",color:"purple"},{icon:jn,title:"Train with Groups",description:"Coaches can create groups and prescribe personalized workouts for each member with specific weights and reps.",color:"cyan"},{icon:Pt,title:"Schedule & Plan",description:"Set recurring workout days and see everything on your calendar. Never miss a session.",color:"yellow"},{icon:Sn,title:"Training Tools",description:"Calculate your 1RM, plan working weights, and optimize your training.",color:"green"}],Xa={flame:{bg:"bg-flame-500/20",text:"text-flame-400",border:"border-flame-500"},green:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500"},purple:{bg:"bg-purple-500/20",text:"text-purple-400",border:"border-purple-500"},cyan:{bg:"bg-cyan-500/20",text:"text-cyan-400",border:"border-cyan-500"},yellow:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500"}};function Ua({isOpen:e,onClose:t,isFirstTime:n=!1}){const[r,s]=h.useState(0);h.useEffect(()=>{e&&s(0)},[e]);const l=()=>{r<Yt.length-1?s(p=>p+1):c()},i=()=>{r>0&&s(p=>p-1)},c=()=>{localStorage.setItem("benchpressonly_onboarding_seen","true"),t()},a=()=>{localStorage.setItem("benchpressonly_onboarding_seen","true"),t()},u=Yt[r],f=Xa[u.color],d=u.icon,b=r===Yt.length-1;return o.jsx(Gn,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"}),o.jsx(qt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-lg z-50",children:o.jsxs("div",{className:"bg-iron-900 rounded-2xl border border-iron-800 overflow-hidden shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[o.jsx("div",{className:"flex items-center gap-2",children:Yt.map((p,g)=>o.jsx("button",{onClick:()=>s(g),className:`w-2 h-2 rounded-full transition-all ${g===r?"w-6 bg-flame-500":g<r?"bg-flame-500/50":"bg-iron-700"}`},g))}),o.jsx("button",{onClick:a,className:"p-2 text-iron-500 hover:text-iron-300 transition-colors",children:o.jsx(Nn,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6",children:o.jsx(Gn,{mode:"wait",children:o.jsxs(qt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"text-center",children:[o.jsx("div",{className:`w-20 h-20 mx-auto mb-6 rounded-2xl ${f.bg} flex items-center justify-center`,children:o.jsx(d,{className:`w-10 h-10 ${f.text}`})}),o.jsx("h2",{className:"text-2xl font-display text-iron-100 mb-3",children:u.title}),o.jsx("p",{className:"text-iron-400 leading-relaxed",children:u.description})]},r)})}),o.jsxs("div",{className:"p-4 border-t border-iron-800 flex items-center justify-between",children:[o.jsxs("button",{onClick:i,disabled:r===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${r===0?"text-iron-600 cursor-not-allowed":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[o.jsx(fr,{className:"w-4 h-4"}),"Back"]}),o.jsx("button",{onClick:l,className:"flex items-center gap-2 px-6 py-2 bg-flame-500 hover:bg-flame-600 text-white rounded-lg font-medium transition-colors",children:b?o.jsxs(o.Fragment,{children:["Get Started",o.jsx(Cn,{className:"w-4 h-4"})]}):o.jsxs(o.Fragment,{children:["Next",o.jsx(Mt,{className:"w-4 h-4"})]})})]})]})})]})})}function Va(){const[e,t]=h.useState(!1);return h.useEffect(()=>{if(!localStorage.getItem("benchpressonly_onboarding_seen")){const l=setTimeout(()=>t(!0),500);return()=>clearTimeout(l)}},[]),{showOnboarding:e,openOnboarding:()=>t(!0),closeOnboarding:()=>t(!1)}}const Vt="profile_setup_dismissed";function Ka(){const{userProfile:e}=Dn(),[t,n]=h.useState(!1);return h.useEffect(()=>{const s=localStorage.getItem(Vt),l=(e==null?void 0:e.weight)&&(e==null?void 0:e.height)&&(e==null?void 0:e.age);if(!s&&!l&&e){const i=setTimeout(()=>n(!0),1500);return()=>clearTimeout(i)}},[e]),{showModal:t,dismissModal:()=>{n(!1),localStorage.setItem(Vt,"true")}}}function Ja({isOpen:e,onClose:t}){const{userProfile:n,updateProfile:r}=Dn(),[s,l]=h.useState(1),[i,c]=h.useState(!1),[a,u]=h.useState({weight:"",heightFeet:"",heightInches:"",age:"",gender:"",activityLevel:"light"});if(!e)return null;const f=async()=>{c(!0);try{const p=a.heightFeet&&a.heightInches?parseInt(a.heightFeet)*12+parseInt(a.heightInches):null;await r({weight:a.weight?parseFloat(a.weight):null,heightFeet:a.heightFeet?parseInt(a.heightFeet):null,heightInches:a.heightInches?parseInt(a.heightInches):null,height:p,age:a.age?parseInt(a.age):null,gender:a.gender||null,activityLevel:a.activityLevel||"light"}),localStorage.setItem(Vt,"true"),t()}catch(p){console.error("Error saving profile:",p)}finally{c(!1)}},d=()=>{localStorage.setItem(Vt,"true"),t()},b=()=>{switch(s){case 1:return a.weight&&a.heightFeet;case 2:return a.age&&a.gender;case 3:return a.activityLevel;default:return!1}};return o.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-iron-900 rounded-2xl w-full max-w-md overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-iron-800 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500/20 flex items-center justify-center",children:o.jsx(is,{className:"w-5 h-5 text-flame-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-display text-lg text-iron-100",children:"Set Up Your Profile"}),o.jsx("p",{className:"text-xs text-iron-500",children:"For accurate calorie tracking"})]})]}),o.jsx("button",{onClick:d,className:"p-2 text-iron-400 hover:text-iron-200",children:o.jsx(Nn,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"px-4 pt-4",children:o.jsx("div",{className:"flex gap-2",children:[1,2,3].map(p=>o.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${p<=s?"bg-flame-500":"bg-iron-800"}`},p))})}),o.jsxs("div",{className:"p-6",children:[s===1&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-iron-100",children:"Body Measurements"}),o.jsx("p",{className:"text-sm text-iron-400",children:"This helps us calculate your base calorie burn."}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-iron-400 mb-1 block",children:"Weight (lbs)"}),o.jsx("input",{type:"number",value:a.weight,onChange:p=>u(g=>({...g,weight:p.target.value})),placeholder:"170",className:"input-field w-full text-lg",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-iron-400 mb-1 block",children:"Height"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"number",value:a.heightFeet,onChange:p=>u(g=>({...g,heightFeet:p.target.value})),placeholder:"5",className:"input-field w-full text-lg"}),o.jsx("span",{className:"text-xs text-iron-500 mt-1 block",children:"feet"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"number",value:a.heightInches,onChange:p=>u(g=>({...g,heightInches:p.target.value})),placeholder:"10",className:"input-field w-full text-lg"}),o.jsx("span",{className:"text-xs text-iron-500 mt-1 block",children:"inches"})]})]})]})]}),s===2&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-iron-100",children:"About You"}),o.jsx("p",{className:"text-sm text-iron-400",children:"Age and gender affect your metabolism."}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-iron-400 mb-1 block",children:"Age"}),o.jsx("input",{type:"number",value:a.age,onChange:p=>u(g=>({...g,age:p.target.value})),placeholder:"30",className:"input-field w-full text-lg",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-iron-400 mb-2 block",children:"Gender"}),o.jsx("div",{className:"flex gap-2",children:["male","female","other"].map(p=>o.jsx("button",{onClick:()=>u(g=>({...g,gender:p})),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors capitalize ${a.gender===p?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:bg-iron-700"}`,children:p},p))})]})]}),s===3&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-iron-100",children:"Daily Activity"}),o.jsx("p",{className:"text-sm text-iron-400",children:"How active are you outside of workouts?"}),o.jsx("div",{className:"space-y-2",children:Object.entries(ws).map(([p,g])=>o.jsxs("button",{onClick:()=>u(S=>({...S,activityLevel:p})),className:`w-full p-3 rounded-lg text-left transition-colors ${a.activityLevel===p?"bg-flame-500/20 border border-flame-500":"bg-iron-800 border border-iron-700 hover:border-iron-600"}`,children:[o.jsx("p",{className:`font-medium ${a.activityLevel===p?"text-flame-400":"text-iron-200"}`,children:g.label}),o.jsx("p",{className:"text-xs text-iron-500",children:g.description})]},p))})]})]}),o.jsxs("div",{className:"p-4 border-t border-iron-800 flex gap-3",children:[s>1?o.jsx("button",{onClick:()=>l(p=>p-1),className:"btn-secondary flex-1",children:"Back"}):o.jsx("button",{onClick:d,className:"btn-secondary flex-1",children:"Skip for now"}),s<3?o.jsxs("button",{onClick:()=>l(p=>p+1),disabled:!b(),className:"btn-primary flex-1 flex items-center justify-center gap-2",children:["Continue",o.jsx(Mt,{className:"w-4 h-4"})]}):o.jsxs("button",{onClick:f,disabled:i,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[o.jsx(Cn,{className:"w-4 h-4"}),i?"Saving...":"Complete"]})]})]})})}function Ur({stats:e}){const t=[{label:"This Week",value:`${e.workoutsThisWeek} workouts`,icon:Pt,color:"text-flame-400",bgColor:"bg-flame-500/10"},{label:"Total Workouts",value:e.totalWorkouts,icon:Ot,color:"text-green-400",bgColor:"bg-green-500/10"}];return o.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((n,r)=>o.jsx("div",{className:"card-steel p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-xl ${n.bgColor} flex items-center justify-center`,children:o.jsx(n.icon,{className:`w-5 h-5 ${n.color}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-display text-iron-100",children:n.value}),o.jsx("p",{className:"text-sm text-iron-500",children:n.label})]})]})},n.label))})}function Vr({workouts:e}){return!e||e.length===0?o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Recent Workouts"}),o.jsx(ye,{to:"/workouts",className:"text-sm text-flame-400 hover:text-flame-300",children:"View All"})]}),o.jsx("p",{className:"text-iron-500 text-sm",children:"No workouts yet. Start your first one!"})]}):o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Recent Workouts"}),o.jsx(ye,{to:"/workouts",className:"text-sm text-flame-400 hover:text-flame-300",children:"View All"})]}),o.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(t=>{var r,s;const n=(r=t.date)!=null&&r.toDate?t.date.toDate():new Date(t.date);return o.jsxs(ye,{to:`/workouts/${t.id}`,className:"flex items-center justify-between p-3 rounded-lg bg-iron-800/50 hover:bg-iron-800 transition-colors",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-iron-200",children:t.name}),o.jsxs("p",{className:"text-xs text-iron-500",children:[nt(n,"MMM d"),"  ",((s=t.exercises)==null?void 0:s.length)||0," exercises"]})]}),o.jsx(Mt,{className:"w-4 h-4 text-iron-600"})]},t.id)})})]})}function Kr({goals:e}){return!e||e.length===0?o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Active Goals"}),o.jsx(ye,{to:"/goals",className:"text-sm text-flame-400 hover:text-flame-300",children:"Add Goal"})]}),o.jsx("p",{className:"text-iron-500 text-sm",children:"No active goals. Set one to track progress!"})]}):o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Active Goals"}),o.jsx(ye,{to:"/goals",className:"text-sm text-flame-400 hover:text-flame-300",children:"View All"})]}),o.jsx("div",{className:"space-y-4",children:e.slice(0,4).map(t=>{const n=t.currentValue??t.currentWeight??0,r=t.targetValue??t.targetWeight??100,s=t.startValue??t.startWeight??n,l=r>s?(n-s)/(r-s)*100:0,i=t.metricType==="time"?"s":t.metricType==="reps"?" reps":" lbs";return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm text-iron-300",children:t.lift}),o.jsxs("span",{className:"text-xs text-iron-500",children:[n,i," / ",r,i]})]}),o.jsx("div",{className:"h-2 bg-iron-800 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-flame-500 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,l))}%`}})})]},t.id)})})]})}function Jr({healthData:e,goals:t}){const n=nt(new Date,"yyyy-MM-dd"),r=e==null?void 0:e.find(l=>l.date===n),s=[{key:"sleep",label:"Sleep",icon:Ps,unit:"hrs",color:"text-indigo-400",bgColor:"bg-indigo-500/20"},{key:"water",label:"Water",icon:Rs,unit:"oz",color:"text-cyan-400",bgColor:"bg-cyan-500/20"},{key:"protein",label:"Protein",icon:Os,unit:"g",color:"text-orange-400",bgColor:"bg-orange-500/20"}];return o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Today's Health"}),o.jsx(ye,{to:"/health",className:"text-sm text-flame-400 hover:text-flame-300",children:"Log More"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:s.map(({key:l,label:i,icon:c,unit:a,color:u,bgColor:f})=>{const d=r==null?void 0:r[l],b=(t==null?void 0:t[l])||(l==="sleep"?8:l==="water"?64:150),p=d?Math.min(100,d/b*100):0;return o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`w-10 h-10 mx-auto mb-2 rounded-lg ${f} flex items-center justify-center`,children:o.jsx(c,{className:`w-5 h-5 ${u}`})}),o.jsx("p",{className:"text-lg font-display text-iron-100",children:d?l==="sleep"?d.toFixed(1):Math.round(d):"-"}),o.jsx("p",{className:"text-xs text-iron-500",children:a}),o.jsx("div",{className:"h-1 bg-iron-800 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${p}%`,backgroundColor:l==="sleep"?"#818cf8":l==="water"?"#22d3ee":"#f97316"}})})]},l)})})]})}function Qr({healthData:e}){const t=[];for(let n=6;n>=0;n--){const r=nt(Bn(new Date,n),"yyyy-MM-dd"),s=e==null?void 0:e.find(l=>l.date===r);t.push({date:nt(Bn(new Date,n),"EEE"),sleep:(s==null?void 0:s.sleep)||null,water:s!=null&&s.water?s.water/10:null,protein:s!=null&&s.protein?s.protein/20:null})}return o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Health Trends"}),o.jsx(ye,{to:"/health",className:"text-sm text-flame-400 hover:text-flame-300",children:"Details"})]}),o.jsx("div",{className:"h-40",children:o.jsx(Ns,{width:"100%",height:"100%",children:o.jsxs(Cs,{data:t,children:[o.jsx(Ds,{dataKey:"date",stroke:"#6b7280",fontSize:10,tickLine:!1,axisLine:!1}),o.jsx(ks,{hide:!0}),o.jsx(Es,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",fontSize:"12px"},formatter:(n,r)=>r==="water"?[`${Math.round(n*10)} oz`,"Water"]:r==="protein"?[`${Math.round(n*20)} g`,"Protein"]:[`${n==null?void 0:n.toFixed(1)} hrs`,"Sleep"]}),o.jsx(un,{type:"monotone",dataKey:"sleep",stroke:"#818cf8",strokeWidth:2,dot:!1,connectNulls:!0}),o.jsx(un,{type:"monotone",dataKey:"water",stroke:"#22d3ee",strokeWidth:2,dot:!1,connectNulls:!0}),o.jsx(un,{type:"monotone",dataKey:"protein",stroke:"#f97316",strokeWidth:2,dot:!1,connectNulls:!0})]})})}),o.jsxs("div",{className:"flex justify-center gap-4 mt-2",children:[o.jsxs("span",{className:"flex items-center gap-1 text-xs text-iron-400",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-400"})," Sleep"]}),o.jsxs("span",{className:"flex items-center gap-1 text-xs text-iron-400",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-400"})," Water"]}),o.jsxs("span",{className:"flex items-center gap-1 text-xs text-iron-400",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"})," Protein"]})]})]})}function Zr(){const[e,t]=h.useState(""),[n,r]=h.useState(""),l=(()=>{const i=parseFloat(e),c=parseInt(n);return!i||!c||c<1?null:c===1?i:Math.round(i*(1+c/30))})();return o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"1RM Calculator"}),o.jsx(ye,{to:"/tools",className:"text-sm text-flame-400 hover:text-flame-300",children:"More Tools"})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"number",placeholder:"Weight","aria-label":"Weight in pounds",value:e,onChange:i=>t(i.target.value),className:"input-field w-full py-2 text-sm"})}),o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"number",placeholder:"Reps","aria-label":"Number of reps",value:n,onChange:i=>r(i.target.value),className:"input-field w-full py-2 text-sm"})})]}),l&&o.jsxs("div",{className:"text-center p-3 bg-flame-500/10 rounded-lg",children:[o.jsx("p",{className:"text-xs text-iron-400",children:"Estimated 1RM"}),o.jsxs("p",{className:"text-2xl font-display text-flame-400",children:[l," lbs"]})]})]})}function es(){const e=[{to:"/workouts",label:"Workouts",icon:Ot,color:"text-green-400",bgColor:"bg-green-500/20"},{to:"/goals",label:"Goals",icon:wn,color:"text-purple-400",bgColor:"bg-purple-500/20"},{to:"/calendar",label:"Calendar",icon:Pt,color:"text-blue-400",bgColor:"bg-blue-500/20"},{to:"/groups",label:"Groups",icon:jn,color:"text-cyan-400",bgColor:"bg-cyan-500/20"},{to:"/health",label:"Health",icon:dr,color:"text-red-400",bgColor:"bg-red-500/20"},{to:"/tools",label:"Tools",icon:Sn,color:"text-yellow-400",bgColor:"bg-yellow-500/20"},{to:"/feed",label:"Feed",icon:ur,color:"text-orange-400",bgColor:"bg-orange-500/20"},{to:"/settings",label:"Settings",icon:cs,color:"text-iron-400",bgColor:"bg-iron-700"}];return o.jsxs("div",{className:"card-steel p-4 h-full",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100 mb-3",children:"Quick Access"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map(({to:t,label:n,icon:r,color:s,bgColor:l})=>o.jsxs(ye,{to:t,className:"flex flex-col items-center p-2 rounded-lg bg-iron-800/50 hover:bg-iron-800 transition-colors",children:[o.jsx("div",{className:`w-9 h-9 rounded-lg ${l} flex items-center justify-center mb-1`,children:o.jsx(r,{className:`w-4 h-4 ${s}`})}),o.jsx("span",{className:"text-[10px] text-iron-400 text-center leading-tight",children:n})]},t))})]})}function ts({calorieData:e,profile:t}){var d;const[n,r]=h.useState("week"),s=(e==null?void 0:e.dailyBase)||0,l=(e==null?void 0:e.todayExercise)||0,i=(e==null?void 0:e.weekExercise)||0,c=(e==null?void 0:e.lifetimeExercise)||0,a=(t==null?void 0:t.weight)&&(t==null?void 0:t.height)&&(t==null?void 0:t.age),u=((d=t==null?void 0:t.settings)==null?void 0:d.weekStartDay)||"monday",f=e!=null&&e.trackingStartDate?nt(new Date(e.trackingStartDate),"MMM d, yyyy"):null;return o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Exercise Calories"}),o.jsxs("div",{className:"flex bg-iron-800 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>r("week"),className:`px-3 py-1 text-xs rounded-md transition-colors ${n==="week"?"bg-flame-500 text-white":"text-iron-400"}`,children:"Week"}),o.jsx("button",{onClick:()=>r("lifetime"),className:`px-3 py-1 text-xs rounded-md transition-colors ${n==="lifetime"?"bg-flame-500 text-white":"text-iron-400"}`,children:"All Time"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 rounded-xl bg-flame-500/20 flex items-center justify-center",children:o.jsx(cr,{className:"w-7 h-7 text-flame-400"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-3xl font-display text-iron-100",children:n==="week"?i.toLocaleString():c.toLocaleString()}),o.jsx("p",{className:"text-sm text-iron-500",children:n==="week"?`burned this week  resets ${u==="monday"?"Mon":"Sun"}`:f?`burned since ${f}`:"total burned"})]})]}),!a&&o.jsx(ye,{to:"/settings",className:"mt-4 block p-3 bg-iron-800 rounded-lg text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Complete your profile for accurate estimates "}),a&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-iron-800",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-iron-500",children:"Today's exercise"}),o.jsxs("span",{className:"text-flame-400 font-medium",children:["+",l.toLocaleString()," cal"]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[o.jsx("span",{className:"text-iron-500",children:"Daily base"}),o.jsxs("span",{className:"text-iron-400",children:[s.toLocaleString()," cal"]})]})]}),o.jsx(ye,{to:"/health",className:"mt-3 block text-center text-xs text-iron-500 hover:text-flame-400 transition-colors",children:"View details "})]})}function ns({user:e,userProfile:t}){var s;const n=(e==null?void 0:e.displayName)||"User",r=t==null?void 0:t.username;return o.jsx(ye,{to:"/profile",className:"card-steel p-6 block hover:border-iron-600 transition-colors",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-iron-800 flex items-center justify-center",children:t!=null&&t.photoURL||e!=null&&e.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(e==null?void 0:e.photoURL),alt:"",className:"w-16 h-16 rounded-full object-cover"}):o.jsx("span",{className:"text-2xl font-display text-iron-400",children:(s=n[0])==null?void 0:s.toUpperCase()})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100 truncate",children:n}),r&&o.jsxs("p",{className:"text-sm text-flame-400",children:["@",r]}),o.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"View your profile "})]})]})})}function rs({feedItems:e=[],users:t={}}){const n=r=>{var l,i,c,a;const s=((l=t[r.userId])==null?void 0:l.displayName)||"Someone";switch(r.type){case"workout":return`${s} completed ${((i=r.data)==null?void 0:i.name)||"a workout"}`;case"cardio":return`${s} logged ${(c=r.data)==null?void 0:c.duration}min cardio`;case"goal_completed":return`${s} achieved ${(a=r.data)==null?void 0:a.lift}`;case"personal_record":return`${s} set a new PR`;default:return`${s} was active`}};return o.jsxs("div",{className:"card-steel p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Community Activity"}),o.jsx(ye,{to:"/feed",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),e.length===0?o.jsxs("div",{className:"py-6 text-center",children:[o.jsx(jn,{className:"w-8 h-8 text-iron-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-iron-500",children:"No recent activity"}),o.jsx("p",{className:"text-xs text-iron-600 mt-1",children:"Complete a workout to appear here!"})]}):o.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(r=>{var s,l,i;return o.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-iron-800 last:border-0",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-800 flex items-center justify-center text-iron-400 text-xs flex-shrink-0",children:((l=(s=t[r.userId])==null?void 0:s.displayName)==null?void 0:l[0])||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm text-iron-300 truncate",children:n(r)}),o.jsx("p",{className:"text-xs text-iron-600",children:((i=r.createdAt)==null?void 0:i.toDate)&&nt(r.createdAt.toDate(),"MMM d, h:mm a")})]}),r.reactionCount>0&&o.jsx("span",{className:"text-xs text-iron-500",children:r.reactionCount})]},r.id)})})]})}function ss({workouts:e=[],goals:t=[]}){const[n,r]=h.useState(new Date),s=()=>{const a=gn(Ts(n),{weekStartsOn:1}),u=xn(Ws(n),{weekStartsOn:1});return Ls({start:a,end:u})},l=a=>{if(!a)return"";const u=a!=null&&a.toDate?a.toDate():new Date(a);return`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`},i=a=>{const u=l(a);return e.filter(f=>{var b;const d=(b=f.date)!=null&&b.toDate?f.date.toDate():new Date(f.date);return l(d)===u})},c=a=>{const u=l(a);return t.find(f=>l(f.targetDate)===u)};return o.jsxs("div",{className:"card-steel p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"font-display text-iron-100 flex items-center gap-2",children:[o.jsx(Pt,{className:"w-4 h-4 text-flame-400"}),"Calendar"]}),o.jsx(ye,{to:"/calendar",className:"text-xs text-flame-400 hover:text-flame-300",children:"View full "})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("button",{onClick:()=>r(a=>Ms(a,1)),className:"p-1 text-iron-500 hover:text-iron-300",children:o.jsx(fr,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-sm font-medium text-iron-300",children:nt(n,"MMMM yyyy")}),o.jsx("button",{onClick:()=>r(a=>zs(a,1)),className:"p-1 text-iron-500 hover:text-iron-300",children:o.jsx(Mt,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:["M","T","W","T","F","S","S"].map((a,u)=>o.jsx("div",{className:"text-center text-[10px] text-iron-500 py-0.5",children:a},u))}),o.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:s().map((a,u)=>{const f=i(a),d=f.length>0,b=f.some(E=>E.status==="completed"),p=c(a),g=_s(a,n),S=us(a);return o.jsxs(ye,{to:`/calendar?date=${l(a)}`,className:`
                relative aspect-square flex items-center justify-center text-[10px] rounded
                transition-colors hover:bg-iron-700
                ${g?"text-iron-300":"text-iron-600"}
                ${S?"ring-1 ring-flame-500":""}
                ${b?"bg-green-500/20":d?"bg-flame-500/20":""}
              `,children:[nt(a,"d"),p&&o.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-yellow-400"})]},u)})}),o.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3 text-[10px] text-iron-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 rounded bg-green-500/30"}),o.jsx("span",{children:"Done"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 rounded bg-flame-500/30"}),o.jsx("span",{children:"Planned"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400"}),o.jsx("span",{children:"Goal"})]})]})]})}const Fe={stats:{id:"stats",label:"Weekly Stats",icon:qn,component:Ur,defaultEnabled:!0,size:"half"},recentWorkouts:{id:"recentWorkouts",label:"Recent Workouts",icon:Ot,component:Vr,defaultEnabled:!0,size:"half"},goals:{id:"goals",label:"Active Goals",icon:wn,component:Kr,defaultEnabled:!0,size:"half"},calendar:{id:"calendar",label:"Calendar",icon:Pt,component:ss,defaultEnabled:!1,size:"half"},health:{id:"health",label:"Today's Health",icon:dr,component:Jr,defaultEnabled:!0,size:"half"},profile:{id:"profile",label:"My Profile",icon:ls,component:ns,defaultEnabled:!0,size:"half"},feed:{id:"feed",label:"Community Feed",icon:ur,component:rs,defaultEnabled:!1,size:"half"},calories:{id:"calories",label:"Calories Burned",icon:cr,component:ts,defaultEnabled:!1,size:"half"},healthChart:{id:"healthChart",label:"Health Trends",icon:qn,component:Qr,defaultEnabled:!1,size:"half"},oneRepMax:{id:"oneRepMax",label:"1RM Calculator",icon:Sn,component:Zr,defaultEnabled:!1,size:"half"},quickLinks:{id:"quickLinks",label:"Quick Access",icon:Mt,component:es,defaultEnabled:!0,size:"half"},addWidget:{id:"addWidget",label:"Add More Widgets",icon:kn,component:null,defaultEnabled:!0,size:"full",isSpecial:!0}},ht=["profile","quickLinks","goals","calendar"];function Qa({onCustomize:e,availableCount:t}){return t===0?null:o.jsx("button",{onClick:e,className:"card-steel p-6 w-full border-2 border-dashed border-iron-700 hover:border-flame-500/50 transition-colors group",children:o.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 group-hover:bg-flame-500/20 flex items-center justify-center mb-3 transition-colors",children:o.jsx(kn,{className:"w-6 h-6 text-iron-500 group-hover:text-flame-400 transition-colors"})}),o.jsx("p",{className:"text-iron-400 group-hover:text-iron-200 font-medium transition-colors",children:"Add More Widgets"}),o.jsxs("p",{className:"text-xs text-iron-600 mt-1",children:[t," more available"]})]})})}const Be="dashboard_widgets",tt="dashboard_layout",Gt={profile:{w:4,h:1},stats:{w:12,h:2},recentWorkouts:{w:6,h:5},goals:{w:4,h:3},calendar:{w:6,h:5},health:{w:4,h:3},feed:{w:6,h:5},calories:{w:4,h:3},healthChart:{w:6,h:4},oneRepMax:{w:4,h:3},quickLinks:{w:4,h:2}},Za=()=>[{i:"profile",x:0,y:0,w:4,h:1},{i:"quickLinks",x:0,y:1,w:4,h:2},{i:"goals",x:0,y:3,w:4,h:3},{i:"calendar",x:4,y:0,w:8,h:5}],ei=(e,t=null,n=12,r=!1)=>{if(r){let f=0;return e.map(d=>{const b=Gt[d]||{h:3},p=t==null?void 0:t.find(E=>E.i===d),g=(p==null?void 0:p.h)||b.h,S={i:d,x:0,y:f,w:12,h:g};return f+=g,S})}if(t&&t.length>0){const f={};t.forEach(p=>{f[p.i]=p});const d=[];let b=0;return e.forEach(p=>{if(f[p]){const g=f[p],S=Gt[p]||{w:4,h:3};d.push({i:p,x:g.x,y:g.y,w:g.w||S.w,h:g.h||S.h}),b=Math.max(b,g.y+(g.h||S.h))}}),e.forEach(p=>{if(!f[p]){const g=Gt[p]||{w:4,h:3};d.push({i:p,x:0,y:b,w:g.w,h:g.h}),b+=g.h}}),d}const s=["profile","quickLinks","goals","calendar"];if(e.length===s.length&&s.every(f=>e.includes(f)))return Za();const i=[];let c=0,a=0,u=0;return e.forEach(f=>{const d=Gt[f]||{w:4,h:3};c+d.w>n&&(c=0,a+=u,u=0),i.push({i:f,x:c,y:a,w:d.w,h:d.h}),c+=d.w,u=Math.max(u,d.h)}),i};function hi(){var ve;const{user:e,userProfile:t,isGuest:n}=Dn(),{showOnboarding:r,openOnboarding:s,closeOnboarding:l}=Va(),{showModal:i,dismissModal:c}=Ka(),[a,u]=h.useState({workoutsThisWeek:0,totalWorkouts:0,activeGoals:0}),[f,d]=h.useState([]),[b,p]=h.useState([]),[g,S]=h.useState([]),[E,w]=h.useState([]),[C,k]=h.useState([]),[M,R]=h.useState({todayTotal:0,weekTotal:0,lifetimeTotal:0}),[O,F]=h.useState([]),[G,H]=h.useState({}),[ie,rt]=h.useState(()=>{const m=localStorage.getItem("health_goals");return m?JSON.parse(m):{sleep:8,water:64,protein:150}}),[st,$]=h.useState(!0),[T,De]=h.useState(!1),[U,le]=h.useState(()=>{const m=localStorage.getItem(Be);if(m)try{let y=JSON.parse(m);const x=y.indexOf("feed");if(x!==-1)y[x]="profile";else if(!y.includes("profile")){const j=y.indexOf("quickLinks");j!==-1?y.splice(j,0,"profile"):y.push("profile")}return localStorage.setItem(Be,JSON.stringify(y)),y}catch{return ht}return ht}),[re,Ae]=h.useState(()=>{const m=localStorage.getItem(Be+"_enabled");if(m)try{let y=JSON.parse(m);const x=y.indexOf("feed");return x!==-1?y[x]="profile":y.includes("profile")||y.push("profile"),localStorage.setItem(Be+"_enabled",JSON.stringify(y)),y}catch{return ht}return ht}),[Q,He]=h.useState(()=>{const m=localStorage.getItem(tt);if(m)try{const y=JSON.parse(m);return Array.isArray(y)&&y.length>0&&y.every(x=>x&&x.i&&typeof x.x=="number"&&x.x>=0&&x.x<=11&&typeof x.y=="number"&&x.y>=0&&typeof x.w=="number"&&x.w>=1&&x.w<=12&&typeof x.h=="number"&&x.h>=1)?y:(localStorage.removeItem(tt),null)}catch{return localStorage.removeItem(tt),null}return null}),[ke,ot]=h.useState(0),Ve=h.useRef(null),[Ee,ue]=h.useState(!1),Re=h.useRef(null);h.useEffect(()=>{const m=()=>{if(Ve.current){const Je=Ve.current.clientWidth;if(Je>0){ot(Je);return}}const se=1280,pe=window.innerWidth-32;ot(Math.min(pe,se))};m();const y=setTimeout(m,0),x=setTimeout(m,100),j=setTimeout(m,300);return window.addEventListener("resize",m),()=>{clearTimeout(y),clearTimeout(x),clearTimeout(j),window.removeEventListener("resize",m)}},[Ee]),h.useEffect(()=>{Q&&Q.length>0&&(Q.every(y=>y&&y.i&&typeof y.x=="number"&&y.x>=0&&y.x<=11&&typeof y.y=="number"&&y.y>=0&&typeof y.w=="number"&&y.w>=1&&y.w<=12&&typeof y.h=="number"&&y.h>=1)||(console.warn("Invalid layout detected, resetting to defaults"),He(null),localStorage.removeItem(tt)))},[Q]),h.useEffect(()=>{const m=x=>!Array.isArray(x)||x.length===0?!1:x.every(j=>j&&j.i&&typeof j.x=="number"&&j.x>=0&&j.x<=11&&typeof j.y=="number"&&j.y>=0&&typeof j.w=="number"&&j.w>=1&&j.w<=12&&typeof j.h=="number"&&j.h>=1);(async()=>{if(e&&!n)try{const x=await kt.getDashboardConfig(e.uid);x&&(x.widgetOrder&&Array.isArray(x.widgetOrder)&&le(x.widgetOrder),x.enabledWidgets&&Array.isArray(x.enabledWidgets)&&Ae(x.enabledWidgets),x.layout&&m(x.layout)?He(x.layout):x.layout&&console.warn("Invalid layout from Firestore, ignoring"))}catch(x){console.error("Error loading dashboard config:",x)}ue(!0)})()},[e,n]),h.useEffect(()=>{if(Ee)return localStorage.setItem(Be,JSON.stringify(U)),localStorage.setItem(Be+"_enabled",JSON.stringify(re)),Q?localStorage.setItem(tt,JSON.stringify(Q)):localStorage.removeItem(tt),e&&!n&&(Re.current&&clearTimeout(Re.current),Re.current=setTimeout(async()=>{try{await kt.saveDashboardConfig(e.uid,{widgetOrder:U,enabledWidgets:re,layout:Q})}catch(m){console.error("Error saving dashboard config:",m)}},1e3)),()=>{Re.current&&clearTimeout(Re.current)}},[U,re,Q,e,n,Ee]),h.useEffect(()=>{e&&at()},[e]);const at=async()=>{var m;try{if(n){const{getSampleWorkouts:N,SAMPLE_GOALS:oe}=await ds(async()=>{const{getSampleWorkouts:_,SAMPLE_GOALS:W}=await import("./index-hGcD7LDI.js").then(V=>V.be);return{getSampleWorkouts:_,SAMPLE_GOALS:W}},__vite__mapDeps([0,1])),I=N();d(I.slice(0,5)),S(oe);const qe=new Date,Ye=gn(qe,{weekStartsOn:1}),ne=xn(qe,{weekStartsOn:1}),yt=I.filter(_=>{const W=_.date instanceof Date?_.date:new Date(_.date);return W>=Ye&&W<=ne});u({workoutsThisWeek:yt.length,totalWorkouts:I.length,activeGoals:oe.filter(_=>_.status==="active").length}),k([{date:Fn(),sleep:7.5,water:48,protein:120}]),R({todayTotal:2450,weekTotal:17150,lifetimeTotal:245e3}),$(!1);return}const[y,x,j,se]=await Promise.all([fs.getByUser(e.uid,60),hs.getByUser(e.uid),ps.getByUser(e.uid),ms.getByUser(e.uid,14).catch(()=>[])]),X=[...y,...x].sort((N,oe)=>{var Ye,ne;const I=(Ye=N.date)!=null&&Ye.toDate?N.date.toDate():new Date(N.date);return((ne=oe.date)!=null&&ne.toDate?oe.date.toDate():new Date(oe.date))-I});d(X.slice(0,5)),p(X),S(j.slice(0,3)),w(j.filter(N=>N.status==="active")),k(se);const pe=new Date,Je=gn(pe,{weekStartsOn:1}),Te=xn(pe,{weekStartsOn:1}),it=Fn(),Ie=X.filter(N=>{var I;const oe=(I=N.date)!=null&&I.toDate?N.date.toDate():new Date(N.date);return oe>=Je&&oe<=Te});u({workoutsThisWeek:Ie.length,totalWorkouts:X.length,activeGoals:j.filter(N=>N.status==="active").length});const Ne=js(t),Pe=(t==null?void 0:t.weight)||170,lt=X.filter(N=>gs(N.date)===it);let Me=0;lt.forEach(N=>{N.workoutType==="cardio"&&N.activityType&&N.duration?Me+=ln(N.activityType,N.duration,Pe):Me+=cn(N,Pe)});let Ce=0;Ie.forEach(N=>{N.workoutType==="cardio"&&N.activityType&&N.duration?Ce+=ln(N.activityType,N.duration,Pe):Ce+=cn(N,Pe)});let Qe=0,We=null;X.forEach(N=>{var I;N.workoutType==="cardio"&&N.activityType&&N.duration?Qe+=ln(N.activityType,N.duration,Pe):Qe+=cn(N,Pe);const oe=(I=N.date)!=null&&I.toDate?N.date.toDate():new Date(N.date);(!We||oe<We)&&(We=oe)}),R({dailyBase:Ne,todayExercise:Me,todayTotal:Ne+Me,weekExercise:Ce,lifetimeExercise:Qe,trackingStartDate:(We==null?void 0:We.toISOString())||null});try{const N=await xs.getFeed(20);if(((m=N==null?void 0:N.items)==null?void 0:m.length)>0){const oe=await kt.getAll(),I={},qe=new Set;oe.forEach(ne=>{I[ne.uid]=ne,(!ne.isPrivate||ne.uid===(e==null?void 0:e.uid))&&qe.add(ne.uid)});const Ye=N.items.filter(ne=>qe.has(ne.userId));F(Ye.slice(0,10)),H(I)}}catch(N){console.error("Error loading feed:",N)}$(!1)}catch(y){console.error("Error loading dashboard:",y),$(!1)}},ee=m=>{Ae(y=>y.includes(m)?y.filter(x=>x!==m):[...y,m]),U.includes(m)||le(y=>[...y,m])},he=h.useCallback(async()=>{if(localStorage.setItem(Be,JSON.stringify(U)),localStorage.setItem(Be+"_enabled",JSON.stringify(re)),Q?localStorage.setItem(tt,JSON.stringify(Q)):localStorage.removeItem(tt),e&&!n)try{await kt.saveDashboardConfig(e.uid,{widgetOrder:U,enabledWidgets:re,layout:Q})}catch(m){console.error("Error saving dashboard config:",m)}},[U,re,Q,e,n]),B=async()=>{await he(),De(!1)},Oe=async()=>{if(le(ht),Ae(ht),He(null),localStorage.removeItem(Be),localStorage.removeItem(Be+"_enabled"),localStorage.removeItem(tt),e&&!n)try{await kt.saveDashboardConfig(e.uid,{widgetOrder:ht,enabledWidgets:ht,layout:null})}catch(m){console.error("Error resetting dashboard config:",m)}},Se=()=>{const m=new Date().getHours();return m<12?"Good morning":m<18?"Good afternoon":"Good evening"},Ke=m=>{if(!Fe[m])return null;switch(m){case"stats":return o.jsx(Ur,{stats:a});case"recentWorkouts":return o.jsx(Vr,{workouts:f});case"goals":return o.jsx(Kr,{goals:g});case"calendar":return o.jsx(ss,{workouts:b,goals:E});case"health":return o.jsx(Jr,{healthData:C,goals:ie});case"profile":return o.jsx(ns,{user:e,userProfile:t});case"feed":return o.jsx(rs,{feedItems:O,users:G});case"calories":return o.jsx(ts,{calorieData:M,profile:t});case"healthChart":return o.jsx(Qr,{healthData:C});case"oneRepMax":return o.jsx(Zr,{});case"quickLinks":return o.jsx(es,{});case"addWidget":const x=Object.keys(Fe).filter(j=>!re.includes(j)&&j!=="addWidget").length;return o.jsx(Qa,{onCustomize:()=>De(!0),availableCount:x});default:return null}};if(st)return o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});Object.keys(Fe).filter(m=>{var y;return!re.includes(m)&&!((y=Fe[m])!=null&&y.isSpecial)}).length;const be=U.filter(m=>{var y;return!(!re.includes(m)||(y=Fe[m])!=null&&y.isSpecial)});return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[o.jsx(Ua,{isOpen:r,onClose:l}),!n&&o.jsx(Ja,{isOpen:i,onClose:c}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"font-display text-display-md text-iron-50",children:[Se(),", ",((ve=e==null?void 0:e.displayName)==null?void 0:ve.split(" ")[0])||"there"]}),o.jsxs("p",{className:"text-iron-400 mt-1",children:[nt(new Date,"EEEE, MMMM d"),"  Let's crush it today."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:s,className:"p-2 text-iron-500 hover:text-iron-300 hover:bg-iron-800 rounded-lg transition-colors",title:"App Guide",children:o.jsx(ys,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>De(!0),className:"hidden sm:flex items-center gap-1.5 px-3 py-2 text-iron-400 hover:text-iron-200 hover:bg-iron-800 rounded-lg transition-colors",title:"Customize Dashboard",children:[o.jsx($s,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Edit"})]}),o.jsxs(ye,{to:"/workouts",className:"btn-primary flex items-center gap-2",children:[o.jsx(Ot,{className:"w-5 h-5"}),"Workouts"]})]})]}),T&&o.jsxs(qt.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-flame-500/10 border border-flame-500/30 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-iron-100",children:"Customize Dashboard"}),o.jsx("p",{className:"text-sm text-iron-400",children:"Drag widgets to move  Drag corners to resize"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:Oe,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[o.jsx(bs,{className:"w-4 h-4"}),"Reset"]}),o.jsxs("button",{onClick:B,className:"flex items-center gap-1 px-4 py-1.5 bg-flame-500 text-white rounded-lg text-sm font-medium",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Done"]})]})]}),o.jsxs("div",{className:"mt-4 p-4 bg-iron-900/50 rounded-xl border border-iron-800",children:[o.jsx("p",{className:"text-xs text-iron-500 mb-3 uppercase tracking-wide",children:"Toggle Widgets"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Fe).filter(([m,y])=>!y.isSpecial).map(([m,y])=>{const x=y.icon,j=re.includes(m);return o.jsxs("button",{onClick:()=>ee(m),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${j?"bg-flame-500/20 text-flame-300 border border-flame-500/30":"bg-iron-800 text-iron-500 border border-iron-700 hover:border-iron-600"}`,children:[o.jsx(x,{className:"w-4 h-4"}),y.label,j?o.jsx(vs,{className:"w-3 h-3 ml-1"}):o.jsx(As,{className:"w-3 h-3 ml-1"})]},m)})})]})]}),Ee&&ke>0&&ke<640&&o.jsx("div",{className:"space-y-4",children:be.map(m=>Fe[m]?o.jsx("div",{className:"w-full",children:Ke(m)},m):null)}),o.jsx("div",{ref:Ve,className:`w-full ${T?"editing-dashboard":""} ${ke<640?"hidden":""}`,children:Ee&&ke>=640&&o.jsx(Ba,{className:"layout",layout:ei(be,Q,12,!1),cols:12,rowHeight:50,width:ke,margin:[12,12],containerPadding:[0,0],isDraggable:T,isResizable:T,compactType:null,preventCollision:!0,onLayoutChange:m=>{T&&He(m)},draggableHandle:".widget-drag-handle",resizeHandles:T?["se","e","s"]:[],children:be.map(m=>{const y=Fe[m];return y?o.jsxs("div",{className:"h-full",children:[T&&o.jsxs("div",{className:"widget-drag-handle absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-2 bg-iron-900/95 border-b border-iron-700 rounded-t-xl cursor-move",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hs,{className:"w-4 h-4 text-iron-400"}),o.jsx("span",{className:"text-xs font-medium text-iron-300",children:y.label})]}),o.jsx("button",{onClick:()=>ee(m),className:"p-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30",title:"Hide widget",children:o.jsx(Nn,{className:"w-3 h-3"})})]}),o.jsx("div",{className:`h-full ${T?"pt-9":""}`,children:o.jsx("div",{className:"h-full overflow-auto",children:Ke(m)})}),T&&o.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-flame-500/30 rounded-xl pointer-events-none"})]},m):null})})}),!Ee&&o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})}),Ee&&!T&&ke>=640&&Object.keys(Fe).filter(m=>!re.includes(m)&&!Fe[m].isSpecial).length>0&&o.jsx("button",{onClick:()=>De(!0),className:"mt-4 w-full card-steel p-4 border-2 border-dashed border-iron-700 hover:border-flame-500/50 transition-colors group",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(kn,{className:"w-5 h-5 text-iron-500 group-hover:text-flame-400 transition-colors"}),o.jsx("span",{className:"text-iron-400 group-hover:text-iron-200 transition-colors",children:"Add More Widgets"})]})})]})}export{hi as default};
