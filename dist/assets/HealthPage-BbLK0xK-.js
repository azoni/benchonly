import{r as o,b8 as Ut,d as Vt,at as Se,z as F,aq as qt,b9 as Ae,a3 as Xt,j as i,al as Yt,P as Zt,M as Ue,N as Ve,L as Jt,t as qe,k as Qt,X as Xe,i as ea,C as Ye,an as ta}from"./index-DngWaF3c.js";import{d as Ze,c as Ee,e as Ce,h as aa}from"./calorieService-6-LCVeV1.js";import{s as Z}from"./index-CNvf9wai.js";import{M as pt}from"./moon-KoPi0KQh.js";import{r as Pe,c as gt,a as Fe,S as ra,b as na,u as Q,s as ia,d as sa,e as la,f as oa,g as yt,h as bt,i as ve,j as ca,k as Je,l as da,m as ua,n as fa,o as va,p as ma,q as ke,t as ze,v as Me,w as ha,x as xa,y as V,z as Ge,A as Qe,B as et,Z as Ie,D as Oe,C as jt,E as wt,F as Pt,G as kt,H as tt,I as It,J as Ot,K as pa,L as q,M as ga,N as ya,O as oe,P as ba,Q as ie,R as se,T as Nt,U as St,V as At,W as ja,X as wa,Y as at,_ as Pa,$ as rt,a0 as ka,a1 as ge,a2 as Ia,a3 as Oa,a4 as Na,a5 as Sa,a6 as Et,a7 as Aa,a8 as Ea,a9 as Ca,aa as Da,ab as Ba,ac as za,ad as Ct,ae as Ma,af as Ta,ag as La,ah as nt,ai as Dt,aj as $a,ak as _a,al as Ka,am as U,an as Wa,ao as Fa,ap as Ga,aq as Ra,ar as it,as as Ha,at as Ua,au as st,av as lt,aw as De,ax as ot,ay as Va,az as qa,aA as Xa,aB as Be}from"./LineChart-DS-D-U0I.js";import{p as ct}from"./index-iIQZbxkE.js";function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ye.apply(null,arguments)}function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dt(Object(a),!0).forEach(function(r){Za(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Za(e,t,a){return(t=Ja(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ja(e){var t=Qa(e,"string");return typeof t=="symbol"?t:t+""}function Qa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _=32,er={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function tr(e){var{data:t,iconType:a,inactiveColor:r}=e,n=_/2,s=_/6,d=_/3,f=t.inactive?r:t.color,h=a??t.type;if(h==="none")return null;if(h==="plainline"){var c;return o.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:(c=t.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:n,x2:_,y2:n,className:"recharts-legend-icon"})}if(h==="line")return o.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(n,"h").concat(d,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*d,",").concat(n,`
            H`).concat(_,"M").concat(2*d,",").concat(n,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(d,",").concat(n),className:"recharts-legend-icon"});if(h==="rect")return o.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(_/8,"h").concat(_,"v").concat(_*3/4,"h").concat(-_,"z"),className:"recharts-legend-icon"});if(o.isValidElement(t.legendIcon)){var u=Ya({},t);return delete u.legendIcon,o.cloneElement(t.legendIcon,u)}return o.createElement(na,{fill:f,cx:n,cy:n,size:_,sizeType:"diameter",type:h})}function ar(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:s,iconType:d}=e,f={x:0,y:0,width:_,height:_},h={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,v)=>{var x=u.formatter||n,j=gt({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:u.inactive});if(u.type==="none")return null;var g=u.inactive?s:u.color,p=x?x(u.value,u,v):u.value;return o.createElement("li",ye({className:j,style:h,key:"legend-item-".concat(v)},Fe(e,u,v)),o.createElement(ra,{width:a,height:a,viewBox:f,style:c,"aria-label":"".concat(p," legend icon")},o.createElement(tr,{data:u,iconType:d,inactiveColor:s})),o.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},p))})}var rr=e=>{var t=Pe(e,er),{payload:a,layout:r,align:n}=t;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return o.createElement("ul",{className:"recharts-default-legend",style:s},o.createElement(ar,ye({},t,{payload:a})))};function nr(){return Q(ia)}var ir=["contextPayload"];function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Te.apply(null,arguments)}function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ut(Object(a),!0).forEach(function(r){sr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function sr(e,t,a){return(t=lr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lr(e){var t=or(e,"string");return typeof t=="symbol"?t:t+""}function or(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cr(e,t){if(e==null)return{};var a,r,n=dr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function ur(e){return e.value}function fr(e){var{contextPayload:t}=e,a=cr(e,ir),r=da(t,e.payloadUniqBy,ur),n=le(le({},a),{},{payload:r});return o.isValidElement(e.content)?o.cloneElement(e.content,n):typeof e.content=="function"?o.createElement(e.content,n):o.createElement(rr,n)}function vr(e,t,a,r,n,s){var{layout:d,align:f,verticalAlign:h}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(f==="center"&&d==="vertical"?c={left:((r||0)-s.width)/2}:c=f==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?u={top:((n||0)-s.height)/2}:u=h==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),le(le({},c),u)}function mr(e){var t=ve();return o.useEffect(()=>{t(ca(e))},[t,e]),null}function hr(e){var t=ve();return o.useEffect(()=>(t(Je(e)),()=>{t(Je({width:0,height:0}))}),[t,e]),null}function xr(e,t,a,r){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:a||r}:null}var pr={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Le(e){var t=Pe(e,pr),a=nr(),r=sa(),n=la(),{width:s,height:d,wrapperStyle:f,portal:h}=t,[c,u]=oa([a]),v=yt(),x=bt();if(v==null||x==null)return null;var j=v-((n==null?void 0:n.left)||0)-((n==null?void 0:n.right)||0),g=xr(t.layout,d,s,j),p=h?f:le(le({position:"absolute",width:(g==null?void 0:g.width)||s||"auto",height:(g==null?void 0:g.height)||d||"auto"},vr(f,t,n,v,x,c)),f),w=h??r;if(w==null||a==null)return null;var y=o.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:u},o.createElement(mr,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!h&&o.createElement(hr,{width:c.width,height:c.height}),o.createElement(fr,Te({},t,g,{margin:n,chartWidth:v,chartHeight:x,contextPayload:a})));return Ut.createPortal(y,w)}Le.displayName="Legend";var Bt=e=>null;Bt.displayName="Cell";var zt=(e,t,a)=>{var r=ve();return(n,s)=>d=>{e==null||e(n,s,d),r(ua({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},Mt=e=>{var t=ve();return(a,r)=>n=>{e==null||e(a,r,n),t(fa())}},Tt=(e,t,a)=>{var r=ve();return(n,s)=>d=>{e==null||e(n,s,d),r(va({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},ft=(e,t,a)=>{var r=a??e;if(!ke(r))return ze(r,t,0)},gr=(e,t,a)=>{var r={},n=e.filter(ma),s=e.filter(c=>c.stackId==null),d=n.reduce((c,u)=>{var v=c[u.stackId];return v==null&&(v=[]),v.push(u),c[u.stackId]=v,c},r),f=Object.entries(d).map(c=>{var u,[v,x]=c,j=x.map(p=>p.dataKey),g=ft(t,a,(u=x[0])===null||u===void 0?void 0:u.barSize);return{stackId:v,dataKeys:j,barSize:g}}),h=s.map(c=>{var u=[c.dataKey].filter(x=>x!=null),v=ft(t,a,c.barSize);return{stackId:void 0,dataKeys:u,barSize:v}});return[...f,...h]};function vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(a),!0).forEach(function(r){yr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function yr(e,t,a){return(t=br(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function br(e){var t=jr(e,"string");return typeof t=="symbol"?t:t+""}function jr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wr(e,t,a,r,n){var s,d=r.length;if(!(d<1)){var f=ze(e,a,0,!0),h,c=[];if(Me((s=r[0])===null||s===void 0?void 0:s.barSize)){var u=!1,v=a/d,x=r.reduce((P,O)=>P+(O.barSize||0),0);x+=(d-1)*f,x>=a&&(x-=(d-1)*f,f=0),x>=a&&v>0&&(u=!0,v*=.9,x=d*v);var j=(a-x)/2>>0,g={offset:j-f,size:0};h=r.reduce((P,O)=>{var k,C={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:g.offset+g.size+f,size:u?v:(k=O.barSize)!==null&&k!==void 0?k:0}},N=[...P,C];return g=C.position,N},c)}else{var p=ze(t,a,0,!0);a-2*p-(d-1)*f<=0&&(f=0);var w=(a-2*p-(d-1)*f)/d;w>1&&(w>>=0);var y=Me(n)?Math.min(w,n):w;h=r.reduce((P,O,k)=>[...P,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:p+(w+f)*k+(w-y)/2,size:y}}],c)}return h}}var Pr=(e,t,a,r,n,s,d)=>{var f=ke(d)?t:d,h=wr(a,r,n!==s?n:s,e,f);return n!==s&&h!=null&&(h=h.map(c=>pe(pe({},c),{},{position:pe(pe({},c.position),{},{offset:c.position.offset-n/2})}))),h},kr=(e,t)=>{var a=ha(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s)return s.find(d=>d.key===a)}}}},Ir=(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}};function Or(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Me(e.zIndex)?e.zIndex:t}var Nr=["x1","y1","x2","y2","key"],Sr=["offset"],Ar=["xAxisId","yAxisId"],Er=["xAxisId","yAxisId"];function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(a),!0).forEach(function(r){Cr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Cr(e,t,a){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dr(e){var t=Br(e,"string");return typeof t=="symbol"?t:t+""}function Br(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},J.apply(null,arguments)}function be(e,t){if(e==null)return{};var a,r,n=zr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function zr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Mr=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:r,y:n,width:s,height:d,ry:f}=e;return o.createElement("rect",{x:r,y:n,ry:f,width:s,height:d,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function Lt(e){var{option:t,lineItemProps:a}=e,r;if(o.isValidElement(t))r=o.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var n,{x1:s,y1:d,x2:f,y2:h,key:c}=a,u=be(a,Nr),v=(n=It(u))!==null&&n!==void 0?n:{},{offset:x}=v,j=be(v,Sr);r=o.createElement("line",J({},j,{x1:s,y1:d,x2:f,y2:h,fill:"none",key:c}))}return r}function Tr(e){var{x:t,width:a,horizontal:r=!0,horizontalPoints:n}=e;if(!r||!n||!n.length)return null;var{xAxisId:s,yAxisId:d}=e,f=be(e,Ar),h=n.map((c,u)=>{var v=B(B({},f),{},{x1:t,y1:c,x2:t+a,y2:c,key:"line-".concat(u),index:u});return o.createElement(Lt,{key:"line-".concat(u),option:r,lineItemProps:v})});return o.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function Lr(e){var{y:t,height:a,vertical:r=!0,verticalPoints:n}=e;if(!r||!n||!n.length)return null;var{xAxisId:s,yAxisId:d}=e,f=be(e,Er),h=n.map((c,u)=>{var v=B(B({},f),{},{x1:c,y1:t,x2:c,y2:t+a,key:"line-".concat(u),index:u});return o.createElement(Lt,{option:r,lineItemProps:v,key:"line-".concat(u)})});return o.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function $r(e){var{horizontalFill:t,fillOpacity:a,x:r,y:n,width:s,height:d,horizontalPoints:f,horizontal:h=!0}=e;if(!h||!t||!t.length||f==null)return null;var c=f.map(v=>Math.round(v+n-n)).sort((v,x)=>v-x);n!==c[0]&&c.unshift(0);var u=c.map((v,x)=>{var j=c[x+1],g=j==null,p=g?n+d-v:j-v;if(p<=0)return null;var w=x%t.length;return o.createElement("rect",{key:"react-".concat(x),y:v,x:r,height:p,width:s,stroke:"none",fill:t[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function _r(e){var{vertical:t=!0,verticalFill:a,fillOpacity:r,x:n,y:s,width:d,height:f,verticalPoints:h}=e;if(!t||!a||!a.length)return null;var c=h.map(v=>Math.round(v+n-n)).sort((v,x)=>v-x);n!==c[0]&&c.unshift(0);var u=c.map((v,x)=>{var j=c[x+1],g=j==null,p=g?n+d-v:j-v;if(p<=0)return null;var w=x%a.length;return o.createElement("rect",{key:"react-".concat(x),x:v,y:s,width:p,height:f,stroke:"none",fill:a[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Kr=(e,t)=>{var{xAxis:a,width:r,height:n,offset:s}=e;return jt(wt(B(B(B({},kt),a),{},{ticks:Pt(a),viewBox:{x:0,y:0,width:r,height:n}})),s.left,s.left+s.width,t)},Wr=(e,t)=>{var{yAxis:a,width:r,height:n,offset:s}=e;return jt(wt(B(B(B({},kt),a),{},{ticks:Pt(a),viewBox:{x:0,y:0,width:r,height:n}})),s.top,s.top+s.height,t)},Fr={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Oe.grid};function $e(e){var t=yt(),a=bt(),r=xa(),n=B(B({},Pe(e,Fr)),{},{x:V(e.x)?e.x:r.left,y:V(e.y)?e.y:r.top,width:V(e.width)?e.width:r.width,height:V(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:d,x:f,y:h,width:c,height:u,syncWithTicks:v,horizontalValues:x,verticalValues:j}=n,g=Ge(),p=Q(S=>tt(S,"xAxis",s,g)),w=Q(S=>tt(S,"yAxis",d,g));if(!Qe(c)||!Qe(u)||!V(f)||!V(h))return null;var y=n.verticalCoordinatesGenerator||Kr,P=n.horizontalCoordinatesGenerator||Wr,{horizontalPoints:O,verticalPoints:k}=n;if((!O||!O.length)&&typeof P=="function"){var C=x&&x.length,N=P({yAxis:w?B(B({},w),{},{ticks:C?x:w.ticks}):void 0,width:t??c,height:a??u,offset:r},C?!0:v);et(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(O=N)}if((!k||!k.length)&&typeof y=="function"){var E=j&&j.length,D=y({xAxis:p?B(B({},p),{},{ticks:E?j:p.ticks}):void 0,width:t??c,height:a??u,offset:r},E?!0:v);et(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(k=D)}return o.createElement(Ie,{zIndex:n.zIndex},o.createElement("g",{className:"recharts-cartesian-grid"},o.createElement(Mr,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),o.createElement($r,J({},n,{horizontalPoints:O})),o.createElement(_r,J({},n,{verticalPoints:k})),o.createElement(Tr,J({},n,{offset:r,horizontalPoints:O,xAxis:p,yAxis:w})),o.createElement(Lr,J({},n,{offset:r,verticalPoints:k,xAxis:p,yAxis:w}))))}$e.displayName="CartesianGrid";function ee(e,t){var a,r;return(a=(r=e.graphicalItems.cartesianItems.find(n=>n.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&a!==void 0?a:Ot}function te(e,t){var a,r;return(a=(r=e.graphicalItems.cartesianItems.find(n=>n.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&a!==void 0?a:Ot}var Gr="Invariant failed";function Rr(e,t){throw new Error(Gr)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_e.apply(null,arguments)}function je(e){return o.createElement(pa,_e({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Hr=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,n)=>{if(V(t))return t;var s=V(r)||ke(r);return s?t(r,n):(s||Rr(),a)}},Ur=(e,t,a)=>a,Vr=(e,t)=>t,me=q([St,Vr],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),qr=q([me],e=>e==null?void 0:e.maxBarSize),Xr=(e,t,a,r)=>r,Yr=q([oe,St,ee,te,Ur],(e,t,a,r,n)=>t.filter(s=>e==="horizontal"?s.xAxisId===a:s.yAxisId===r).filter(s=>s.isPanorama===n).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Zr=(e,t,a)=>{var r=oe(e),n=ee(e,t),s=te(e,t);if(!(n==null||s==null))return r==="horizontal"?at(e,"yAxis",s,a):at(e,"xAxis",n,a)},Jr=(e,t)=>{var a=oe(e),r=ee(e,t),n=te(e,t);if(!(r==null||n==null))return a==="horizontal"?rt(e,"xAxis",r):rt(e,"yAxis",n)},Qr=q([Yr,Pa,Jr],gr),en=(e,t,a)=>{var r,n,s=me(e,t);if(s==null)return 0;var d=ee(e,t),f=te(e,t);if(d==null||f==null)return 0;var h=oe(e),c=At(e),{maxBarSize:u}=s,v=ke(u)?c:u,x,j;return h==="horizontal"?(x=ie(e,"xAxis",d,a),j=se(e,"xAxis",d,a)):(x=ie(e,"yAxis",f,a),j=se(e,"yAxis",f,a)),(r=(n=Nt(x,j,!0))!==null&&n!==void 0?n:v)!==null&&r!==void 0?r:0},$t=(e,t,a)=>{var r=oe(e),n=ee(e,t),s=te(e,t);if(!(n==null||s==null)){var d,f;return r==="horizontal"?(d=ie(e,"xAxis",n,a),f=se(e,"xAxis",n,a)):(d=ie(e,"yAxis",s,a),f=se(e,"yAxis",s,a)),Nt(d,f)}},tn=q([Qr,At,ja,wa,en,$t,qr],Pr),an=(e,t,a)=>{var r=ee(e,t);if(r!=null)return ie(e,"xAxis",r,a)},rn=(e,t,a)=>{var r=te(e,t);if(r!=null)return ie(e,"yAxis",r,a)},nn=(e,t,a)=>{var r=ee(e,t);if(r!=null)return se(e,"xAxis",r,a)},sn=(e,t,a)=>{var r=te(e,t);if(r!=null)return se(e,"yAxis",r,a)},ln=q([tn,me],Ir),on=q([Zr,me],kr),cn=q([ga,ya,an,rn,nn,sn,ln,oe,ba,$t,on,me,Xr],(e,t,a,r,n,s,d,f,h,c,u,v,x)=>{var{chartData:j,dataStartIndex:g,dataEndIndex:p}=h;if(!(v==null||d==null||t==null||f!=="horizontal"&&f!=="vertical"||a==null||r==null||n==null||s==null||c==null)){var{data:w}=v,y;if(w!=null&&w.length>0?y=w:y=j==null?void 0:j.slice(g,p+1),y!=null)return Ln({layout:f,barSettings:v,pos:d,parentViewBox:t,bandSize:c,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:y,offset:e,cells:x,dataStartIndex:g})}}),dn=["index"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ke.apply(null,arguments)}function un(e,t){if(e==null)return{};var a,r,n=fn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function fn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var _t=o.createContext(void 0),vn=e=>{var t=o.useContext(_t);if(t!=null)return t.stackId;if(e!=null)return ka(e)},mn=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),hn=e=>{var t=o.useContext(_t);if(t!=null){var{stackId:a}=t;return"url(#".concat(mn(a,e),")")}},Kt=e=>{var{index:t}=e,a=un(e,dn),r=hn(t);return o.createElement(ge,Ke({className:"recharts-bar-stack-layer",clipPath:r},a))},xn=["onMouseEnter","onMouseLeave","onClick"],pn=["value","background","tooltipPosition"],gn=["id"],yn=["onMouseEnter","onClick","onMouseLeave"];function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(null,arguments)}function ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(a),!0).forEach(function(r){bn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ht(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function bn(e,t,a){return(t=jn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jn(e){var t=wn(e,"string");return typeof t=="symbol"?t:t+""}function wn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function we(e,t){if(e==null)return{};var a,r,n=Pn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Pn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var kn=e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:Et(a,t),payload:e}]},In=o.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:n,name:s,hide:d,unit:f,tooltipType:h,id:c}=e,u={dataDefinedOnItem:void 0,getPosition:Ea,settings:{stroke:a,strokeWidth:r,fill:n,dataKey:t,nameKey:void 0,name:Et(s,t),hide:d,type:h,color:n,unit:f,graphicalItemId:c}};return o.createElement(Aa,{tooltipEntrySettings:u})});function On(e){var t=Q(Dt),{data:a,dataKey:r,background:n,allOtherBarProps:s}=e,{onMouseEnter:d,onMouseLeave:f,onClick:h}=s,c=we(s,xn),u=zt(d,r,s.id),v=Mt(f),x=Tt(h,r,s.id);if(!n||a==null)return null;var j=$a(n);return o.createElement(Ie,{zIndex:Or(n,Oe.barBackground)},a.map((g,p)=>{var{value:w,background:y,tooltipPosition:P}=g,O=we(g,pn);if(!y)return null;var k=u(g,p),C=v(g,p),N=x(g,p),E=T(T(T(T(T({option:n,isActive:String(p)===t},O),{},{fill:"#eee"},y),j),Fe(c,g,p)),{},{onMouseEnter:k,onMouseLeave:C,onClick:N,dataKey:r,index:p,className:"recharts-bar-background-rectangle"});return o.createElement(je,G({key:"background-bar-".concat(p)},E))}))}function Nn(e){var{showLabels:t,children:a,rects:r}=e,n=r==null?void 0:r.map(s=>{var d={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return T(T({},d),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:d,fill:s.fill})});return o.createElement(Fa,{value:t?n:void 0},a)}function Sn(e){var{shape:t,activeBar:a,baseProps:r,entry:n,index:s,dataKey:d}=e,f=Q(Dt),h=Q(Ga),c=a&&String(s)===f&&(h==null||d===h),u=c?a:t;return c?o.createElement(Ie,{zIndex:Oe.activeBar},o.createElement(Kt,{index:s},o.createElement(je,G({},r,{name:String(r.name)},n,{isActive:c,option:u,index:s,dataKey:d})))):o.createElement(je,G({},r,{name:String(r.name)},n,{isActive:c,option:u,index:s,dataKey:d}))}function An(e){var{shape:t,baseProps:a,entry:r,index:n,dataKey:s}=e;return o.createElement(je,G({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:n,dataKey:s}))}function En(e){var t,{data:a,props:r}=e,n=(t=It(r))!==null&&t!==void 0?t:{},{id:s}=n,d=we(n,gn),{shape:f,dataKey:h,activeBar:c}=r,{onMouseEnter:u,onClick:v,onMouseLeave:x}=r,j=we(r,yn),g=zt(u,h,s),p=Mt(x),w=Tt(v,h,s);return a?o.createElement(o.Fragment,null,a.map((y,P)=>o.createElement(Kt,G({index:P,key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(P),className:"recharts-bar-rectangle"},Fe(j,y,P),{onMouseEnter:g(y,P),onMouseLeave:p(y,P),onClick:w(y,P)}),c?o.createElement(Sn,{shape:f,activeBar:c,baseProps:d,entry:y,index:P,dataKey:h}):o.createElement(An,{shape:f,baseProps:d,entry:y,index:P,dataKey:h})))):null}function Cn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:n,isAnimationActive:s,animationBegin:d,animationDuration:f,animationEasing:h,onAnimationEnd:c,onAnimationStart:u}=t,v=a.current,x=_a(t,"recharts-bar-"),[j,g]=o.useState(!1),p=!j,w=o.useCallback(()=>{typeof c=="function"&&c(),g(!1)},[c]),y=o.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return o.createElement(Nn,{showLabels:p,rects:r},o.createElement(Ka,{animationId:x,begin:d,duration:f,isActive:s,easing:h,onAnimationEnd:w,onAnimationStart:y,key:x},P=>{var O=P===1?r:r==null?void 0:r.map((k,C)=>{var N=v&&v[C];if(N)return T(T({},k),{},{x:U(N.x,k.x,P),y:U(N.y,k.y,P),width:U(N.width,k.width,P),height:U(N.height,k.height,P)});if(n==="horizontal"){var E=U(0,k.height,P),D=U(k.stackedBarStart,k.y,P);return T(T({},k),{},{y:D,height:E})}var S=U(0,k.width,P),L=U(k.stackedBarStart,k.x,P);return T(T({},k),{},{width:S,x:L})});return P>0&&(a.current=O??null),O==null?null:o.createElement(ge,null,o.createElement(En,{props:t,data:O}))}),o.createElement(Wa,{label:t.label}),t.children)}function Dn(e){var t=o.useRef(null);return o.createElement(Cn,{previousRectanglesRef:t,props:e})}var Wt=0,Bn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Ct(e,t)}};class zn extends o.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:n,xAxisId:s,yAxisId:d,needClip:f,background:h,id:c}=this.props;if(t||a==null)return null;var u=gt("recharts-bar",n),v=c;return o.createElement(ge,{className:u,id:c},f&&o.createElement("defs",null,o.createElement(Ma,{clipPathId:v,xAxisId:s,yAxisId:d})),o.createElement(ge,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(v,")"):void 0},o.createElement(On,{data:a,dataKey:r,background:h,allOtherBarProps:this.props}),o.createElement(Dn,this.props)))}}var Mn={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Wt,xAxisId:0,yAxisId:0,zIndex:Oe.bar};function Tn(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:s,activeBar:d,animationBegin:f,animationDuration:h,animationEasing:c,isAnimationActive:u}=e,{needClip:v}=Ca(t,a),x=Da(),j=Ge(),g=Ba(e.children,Bt),p=Q(P=>cn(P,e.id,j,g));if(x!=="vertical"&&x!=="horizontal")return null;var w,y=p==null?void 0:p[0];return y==null||y.height==null||y.width==null?w=0:w=x==="vertical"?y.height/2:y.width/2,o.createElement(za,{xAxisId:t,yAxisId:a,data:p,dataPointFormatter:Bn,errorBarOffset:w},o.createElement(zn,G({},e,{layout:x,needClip:v,data:p,xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:s,activeBar:d,animationBegin:f,animationDuration:h,animationEasing:c,isAnimationActive:u})))}function Ln(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:n,bandSize:s,xAxis:d,yAxis:f,xAxisTicks:h,yAxisTicks:c,stackedData:u,displayedData:v,offset:x,cells:j,parentViewBox:g,dataStartIndex:p}=e,w=t==="horizontal"?f:d,y=u?w.scale.domain():null,P=Ta({numericAxis:w}),O=w.scale.map(P);return v.map((k,C)=>{var N,E,D,S,L,ae;if(u){var ce=u[C+p];if(ce==null)return null;N=La(ce,y)}else N=Ct(k,a),Array.isArray(N)||(N=[P,N]);var W=Hr(r,Wt)(N[1],C);if(t==="horizontal"){var de,ue=f.scale.map(N[0]),X=f.scale.map(N[1]);if(ue==null||X==null)return null;E=nt({axis:d,ticks:h,bandSize:s,offset:n.offset,entry:k,index:C}),D=(de=X??ue)!==null&&de!==void 0?de:void 0,S=n.size;var re=ue-X;if(L=Ra(re)?0:re,ae={x:E,y:x.top,width:S,height:x.height},Math.abs(W)>0&&Math.abs(L)<Math.abs(W)){var he=it(L||W)*(Math.abs(W)-Math.abs(L));D-=he,L+=he}}else{var R=d.scale.map(N[0]),ne=d.scale.map(N[1]);if(R==null||ne==null)return null;if(E=R,D=nt({axis:f,ticks:c,bandSize:s,offset:n.offset,entry:k,index:C}),S=ne-R,L=n.size,ae={x:x.left,y:D,width:x.width,height:L},Math.abs(W)>0&&Math.abs(S)<Math.abs(W)){var fe=it(S||W)*(Math.abs(W)-Math.abs(S));S+=fe}}if(E==null||D==null||S==null||L==null)return null;var K=T(T({},k),{},{stackedBarStart:O,x:E,y:D,width:S,height:L,value:u?N:N[1],payload:k,background:ae,tooltipPosition:{x:E+S/2,y:D+L/2},parentViewBox:g},j&&j[C]&&j[C].props);return K}).filter(Boolean)}function $n(e){var t=Pe(e,Mn),a=vn(t.stackId),r=Ge();return o.createElement(Oa,{id:t.id,type:"bar"},n=>o.createElement(o.Fragment,null,o.createElement(Na,{legendPayload:kn(t)}),o.createElement(In,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),o.createElement(Sa,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),o.createElement(Ie,{zIndex:t.zIndex},o.createElement(Tn,G({},t,{id:n})))))}var We=o.memo($n,Ia);We.displayName="Bar";var _n=["axis","item"],Kn=o.forwardRef((e,t)=>o.createElement(Ha,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_n,tooltipPayloadSearcher:Ua,categoricalChartProps:e,ref:t}));const xt={sleep:8,water:64,protein:150},$={sleep:{label:"Sleep",unit:"hours",icon:pt,color:"#818cf8",bgColor:"bg-indigo-500/20",textColor:"text-indigo-400",placeholder:"7.5",step:"0.5",min:4,max:12},water:{label:"Water",unit:"oz",icon:qa,color:"#22d3ee",bgColor:"bg-cyan-500/20",textColor:"text-cyan-400",placeholder:"64",step:"8",min:32,max:200},protein:{label:"Protein",unit:"g",icon:Va,color:"#f97316",bgColor:"bg-orange-500/20",textColor:"text-orange-400",placeholder:"150",step:"10",min:50,max:300}};function Vn(){var Re,He;const{user:e,userProfile:t,isGuest:a}=Vt(),[r,n]=o.useState([]),[s,d]=o.useState([]),[f,h]=o.useState([]),[c,u]=o.useState(!0),[v,x]=o.useState(!1),[j,g]=o.useState(!1),[p,w]=o.useState(!1),[y,P]=o.useState(Se()),[O,k]=o.useState(7),[C,N]=o.useState("health"),[E,D]=o.useState({sleep:"",water:"",protein:""}),[S,L]=o.useState(()=>{const l=localStorage.getItem("health_goals");return l?JSON.parse(l):xt}),[ae,ce]=o.useState(S);o.useEffect(()=>{X()},[e]),o.useEffect(()=>{localStorage.setItem("health_goals",JSON.stringify(S))},[S]),o.useEffect(()=>{(s.length>=0||t)&&de()},[s,t,O]);const W=()=>{if(s.length===0)return new Date;let l=new Date;return s.forEach(m=>{var I;const b=(I=m.date)!=null&&I.toDate?m.date.toDate():new Date(m.date);b<l&&(l=b)}),l},de=()=>{const l=Ze(t),m=(t==null?void 0:t.weight)||170,b=W(),I=[];for(let A=O-1;A>=0;A--){const z=Z(new Date,A),M=F(z,"yyyy-MM-dd");if(z<b){I.push({date:F(z,"MMM d"),fullDate:M,base:0,exercise:0,total:0,beforeTracking:!0});continue}const xe=s.filter(H=>qt(H.date)===M);let Y=0;xe.forEach(H=>{H.workoutType==="cardio"&&H.activityType&&H.duration?Y+=Ee(H.activityType,H.duration,m):Y+=Ce(H,m)}),I.push({date:F(z,"MMM d"),fullDate:M,base:l,exercise:Y,total:l+Y})}h(I)},ue=()=>{var z;const l=(t==null?void 0:t.weight)||170,m=((z=t==null?void 0:t.settings)==null?void 0:z.weekStartDay)==="sunday"?0:1,b=new Date,I=ta(b,{weekStartsOn:m});let A=0;return s.forEach(M=>{var Y;const xe=(Y=M.date)!=null&&Y.toDate?M.date.toDate():new Date(M.date);xe>=I&&xe<=b&&(M.workoutType==="cardio"&&M.activityType&&M.duration?A+=Ee(M.activityType,M.duration,l):A+=Ce(M,l))}),A},X=async()=>{if(e){u(!0);try{if(a){const l=[];for(let m=13;m>=0;m--){const b=F(Z(new Date,m),"yyyy-MM-dd");l.push({id:`sample-${m}`,date:b,sleep:6+Math.random()*3,water:40+Math.random()*40,protein:100+Math.random()*80})}n(l),d([{date:Z(new Date,1),workoutType:"strength",exercises:[{sets:[{},{},{}]},{sets:[{},{}]}]},{date:Z(new Date,2),workoutType:"cardio",activityType:"running_moderate",duration:30},{date:Z(new Date,4),workoutType:"strength",exercises:[{sets:[{},{},{}]}]}])}else{const[l,m]=await Promise.all([Ae.getByUser(e.uid,30),Xt.getByUser(e.uid,60)]);n(l),d(m)}}catch(l){console.error("Error loading health data:",l)}finally{u(!1)}}},re=(l=null)=>{var I,A,z;const m=l||Se();P(m);const b=r.find(M=>M.date===m);D(b?{sleep:((I=b.sleep)==null?void 0:I.toString())||"",water:((A=b.water)==null?void 0:A.toString())||"",protein:((z=b.protein)==null?void 0:z.toString())||""}:{sleep:"",water:"",protein:""}),x(!0)},he=async()=>{w(!0);try{const l={date:y,sleep:E.sleep?parseFloat(E.sleep):null,water:E.water?parseInt(E.water):null,protein:E.protein?parseInt(E.protein):null};if(a){const m=r.findIndex(b=>b.date===y);m>=0?n(b=>b.map((I,A)=>A===m?{...I,...l}:I)):n(b=>[...b,{id:`guest-${Date.now()}`,...l}])}else{const m=r.find(b=>b.date===y);if(m)await Ae.update(m.id,l),n(b=>b.map(I=>I.id===m.id?{...I,...l}:I));else{const b=await Ae.create(e.uid,l);n(I=>[...I,b])}}x(!1)}catch(l){console.error("Error saving health data:",l),alert("Failed to save")}finally{w(!1)}},R=Se(),ne=r.find(l=>l.date===R),fe=[];for(let l=O-1;l>=0;l--){const m=F(Z(new Date,l),"yyyy-MM-dd"),b=r.find(I=>I.date===m);fe.push({date:F(Z(new Date,l),"MMM d"),fullDate:m,sleep:(b==null?void 0:b.sleep)||null,water:(b==null?void 0:b.water)||null,protein:(b==null?void 0:b.protein)||null})}const K=r.filter(l=>l.sleep||l.water||l.protein),Ft={sleep:K.length>0?(K.reduce((l,m)=>l+(m.sleep||0),0)/K.filter(l=>l.sleep).length).toFixed(1):"-",water:K.length>0?Math.round(K.reduce((l,m)=>l+(m.water||0),0)/K.filter(l=>l.water).length):"-",protein:K.length>0?Math.round(K.reduce((l,m)=>l+(m.protein||0),0)/K.filter(l=>l.protein).length):"-"};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});const Ne=f.find(l=>l.fullDate===R),Gt=ue(),Rt=Ze(t),Ht=((Re=t==null?void 0:t.settings)==null?void 0:Re.weekStartDay)||"monday";return i.jsxs("div",{className:"max-w-4xl mx-auto pb-24",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-display text-iron-100",children:"Health"}),i.jsx("p",{className:"text-iron-500 text-sm mt-1",children:"Track sleep, hydration, nutrition & calories"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{ce(S),g(!0)},className:"p-2 text-iron-400 hover:text-iron-200 hover:bg-iron-800 rounded-lg transition-colors",title:"Adjust Goals",children:i.jsx(Yt,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>re(),className:"btn-primary flex items-center gap-2",children:[i.jsx(Zt,{className:"w-5 h-5"}),"Log Today"]})]})]}),i.jsxs("div",{className:"card-steel p-1 mb-6 flex gap-1",children:[i.jsxs("button",{onClick:()=>N("health"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg font-medium text-sm transition-colors ${C==="health"?"bg-flame-500 text-white":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[i.jsx(pt,{className:"w-4 h-4"}),"Health Metrics"]}),i.jsxs("button",{onClick:()=>N("calories"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg font-medium text-sm transition-colors ${C==="calories"?"bg-flame-500 text-white":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[i.jsx(Ue,{className:"w-4 h-4"}),"Calories"]})]}),C==="calories"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"card-steel p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-flame-500/20 flex items-center justify-center",children:i.jsx(Ue,{className:"w-5 h-5 text-flame-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-iron-500",children:"Today's Exercise"}),i.jsxs("p",{className:"text-2xl font-display text-iron-100",children:["+",((He=Ne==null?void 0:Ne.exercise)==null?void 0:He.toLocaleString())||"0"]})]})]}),i.jsxs("div",{className:"text-xs text-iron-500",children:["Daily base: ",Rt.toLocaleString()," cal"]})]}),i.jsxs("div",{className:"card-steel p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center",children:i.jsx(Ve,{className:"w-5 h-5 text-orange-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-iron-500",children:"This Week"}),i.jsxs("p",{className:"text-2xl font-display text-iron-100",children:["+",Gt.toLocaleString()]})]})]}),i.jsxs("div",{className:"text-xs text-iron-500",children:["Exercise calories · Resets ",Ht==="monday"?"Monday":"Sunday"]})]})]}),!aa(t)&&i.jsx(Jt,{to:"/settings",className:"block card-steel p-4 border-yellow-500/30 hover:border-yellow-500/50 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(qe,{className:"w-5 h-5 text-yellow-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Complete your profile for accurate estimates"}),i.jsx("p",{className:"text-xs text-iron-500",children:"Add weight, height, age for personalized calorie calculations"})]})]})}),i.jsxs("div",{className:"card-steel p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-sm font-medium text-iron-400",children:["Daily Calories (",O," days)"]}),i.jsx("div",{className:"flex gap-2",children:[7,14,30].map(l=>i.jsxs("button",{onClick:()=>k(l),className:`px-3 py-1 text-xs rounded-lg transition-colors ${O===l?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:bg-iron-700"}`,children:[l,"d"]},l))})]}),i.jsx("div",{className:"h-64",children:i.jsx(st,{width:"100%",height:"100%",children:i.jsxs(Kn,{data:f,children:[i.jsx($e,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(lt,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1}),i.jsx(De,{stroke:"#6b7280",fontSize:12,tickLine:!1}),i.jsx(ot,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#9ca3af"},formatter:(l,m)=>[l.toLocaleString(),m==="base"?"Base (TDEE)":"Exercise"]}),i.jsx(Le,{}),i.jsx(We,{dataKey:"base",stackId:"a",fill:"#6b7280",name:"Base (TDEE)"}),i.jsx(We,{dataKey:"exercise",stackId:"a",fill:"#f97316",name:"Exercise",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"card-steel overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-iron-800",children:i.jsxs("h3",{className:"text-sm font-medium text-iron-400 flex items-center gap-2",children:[i.jsx(qe,{className:"w-4 h-4"}),"Recent Activity"]})}),i.jsxs("div",{className:"divide-y divide-iron-800",children:[s.slice(0,5).map(l=>{var A,z;const m=(A=l.date)!=null&&A.toDate?l.date.toDate():new Date(l.date),b=(t==null?void 0:t.weight)||170,I=l.workoutType==="cardio"&&l.activityType?Ee(l.activityType,l.duration,b):Ce(l,b);return i.jsxs("div",{className:"p-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-iron-200",children:l.name||"Workout"}),i.jsxs("p",{className:"text-xs text-iron-500",children:[F(m,"MMM d")," · ",l.workoutType==="cardio"?`${l.duration}min`:`${((z=l.exercises)==null?void 0:z.length)||0} exercises`]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-flame-400",children:["+",I]}),i.jsx("p",{className:"text-xs text-iron-500",children:"calories"})]})]},l.id)}),s.length===0&&i.jsx("p",{className:"p-4 text-center text-iron-500 text-sm",children:"No recent activity"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:Object.entries($).map(([l,m])=>{const b=m.icon,I=ne==null?void 0:ne[l],A=S[l],z=I?Math.min(100,I/A*100):0;return i.jsxs("div",{onClick:()=>re(R),className:"card-steel p-4 cursor-pointer hover:border-iron-600 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg ${m.bgColor} flex items-center justify-center`,children:i.jsx(b,{className:`w-4 h-4 ${m.textColor}`})}),i.jsx("span",{className:"text-sm text-iron-400",children:m.label})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-2xl font-display text-iron-100",children:I?l==="sleep"?I.toFixed(1):Math.round(I):"-"}),i.jsx("span",{className:"text-sm text-iron-500 ml-1",children:m.unit})]}),i.jsx("div",{className:"h-1.5 bg-iron-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${z}%`,backgroundColor:m.color}})}),i.jsxs("p",{className:"text-xs text-iron-600 mt-1",children:["Goal: ",A," ",m.unit]})]},l)})}),i.jsxs("div",{className:"card-steel p-4 mb-6",children:[i.jsxs("h3",{className:"text-sm font-medium text-iron-400 mb-3 flex items-center gap-2",children:[i.jsx(Ve,{className:"w-4 h-4"}),O,"-Day Averages"]}),i.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries($).map(([l,m])=>i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:`text-xl font-display ${m.textColor}`,children:[Ft[l]," ",i.jsx("span",{className:"text-sm text-iron-500",children:m.unit})]}),i.jsx("p",{className:"text-xs text-iron-500",children:m.label})]},l))})]}),i.jsxs("div",{className:"card-steel p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-sm font-medium text-iron-400",children:"Progress"}),i.jsx("div",{className:"flex gap-2",children:[7,14,30].map(l=>i.jsxs("button",{onClick:()=>k(l),className:`px-3 py-1 text-xs rounded-lg transition-colors ${O===l?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:bg-iron-700"}`,children:[l,"d"]},l))})]}),i.jsx("div",{className:"h-64",children:i.jsx(st,{width:"100%",height:"100%",children:i.jsxs(Xa,{data:fe,children:[i.jsx($e,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(lt,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1}),i.jsx(De,{yAxisId:"left",stroke:"#6b7280",fontSize:12,tickLine:!1,domain:[0,"auto"]}),i.jsx(De,{yAxisId:"right",orientation:"right",stroke:"#6b7280",fontSize:12,tickLine:!1,domain:[0,"auto"]}),i.jsx(ot,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#9ca3af"}}),i.jsx(Le,{}),i.jsx(Be,{yAxisId:"left",type:"monotone",dataKey:"sleep",stroke:$.sleep.color,strokeWidth:2,dot:{fill:$.sleep.color,strokeWidth:0,r:3},connectNulls:!0,name:"Sleep (hrs)"}),i.jsx(Be,{yAxisId:"right",type:"monotone",dataKey:"water",stroke:$.water.color,strokeWidth:2,dot:{fill:$.water.color,strokeWidth:0,r:3},connectNulls:!0,name:"Water (oz)"}),i.jsx(Be,{yAxisId:"right",type:"monotone",dataKey:"protein",stroke:$.protein.color,strokeWidth:2,dot:{fill:$.protein.color,strokeWidth:0,r:3},connectNulls:!0,name:"Protein (g)"})]})})})]}),i.jsxs("div",{className:"card-steel overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-iron-800",children:i.jsxs("h3",{className:"text-sm font-medium text-iron-400 flex items-center gap-2",children:[i.jsx(Qt,{className:"w-4 h-4"}),"Recent Entries"]})}),i.jsx("div",{className:"divide-y divide-iron-800",children:fe.slice().reverse().slice(0,7).map(l=>{const m=l.sleep||l.water||l.protein;return i.jsxs("div",{onClick:()=>re(l.fullDate),className:"p-4 flex items-center justify-between hover:bg-iron-800/50 cursor-pointer transition-colors",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-iron-200",children:l.date}),i.jsx("p",{className:"text-xs text-iron-500",children:l.fullDate===R?"Today":F(ct(l.fullDate),"EEEE")})]}),m?i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[l.sleep&&i.jsxs("span",{className:$.sleep.textColor,children:[l.sleep.toFixed(1),"h"]}),l.water&&i.jsxs("span",{className:$.water.textColor,children:[Math.round(l.water),"oz"]}),l.protein&&i.jsxs("span",{className:$.protein.textColor,children:[Math.round(l.protein),"g"]})]}):i.jsx("span",{className:"text-xs text-iron-600",children:"No data"})]},l.fullDate)})})]})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md",children:[i.jsxs("div",{className:"p-4 border-b border-iron-800 flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-display text-iron-100",children:F(ct(y),"MMMM d, yyyy")}),i.jsx("button",{onClick:()=>x(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:i.jsx(Xe,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-4 space-y-4",children:Object.entries($).map(([l,m])=>{const b=m.icon;return i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-iron-300 mb-2",children:[i.jsx(b,{className:`w-4 h-4 ${m.textColor}`}),m.label," (",m.unit,")"]}),i.jsx("input",{type:"number",inputMode:"decimal",value:E[l],onChange:I=>D(A=>({...A,[l]:I.target.value})),placeholder:m.placeholder,className:"input-field w-full text-base py-3"})]},l)})}),i.jsxs("div",{className:"p-4 border-t border-iron-800 flex gap-3",children:[i.jsx("button",{onClick:()=>x(!1),className:"btn-secondary flex-1",children:"Cancel"}),i.jsx("button",{onClick:he,disabled:p,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:p?i.jsxs(i.Fragment,{children:[i.jsx(ea,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ye,{className:"w-4 h-4"}),"Save"]})})]})]})}),j&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md",children:[i.jsxs("div",{className:"p-4 border-b border-iron-800 flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-display text-iron-100",children:"Daily Goals"}),i.jsx("button",{onClick:()=>g(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:i.jsx(Xe,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-4 space-y-4",children:Object.entries($).map(([l,m])=>{const b=m.icon;return i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-iron-300 mb-2",children:[i.jsx(b,{className:`w-4 h-4 ${m.textColor}`}),m.label," Goal (",m.unit,")"]}),i.jsx("input",{type:"number",inputMode:"decimal",step:m.step,min:m.min,max:m.max,value:ae[l],onChange:I=>ce(A=>({...A,[l]:parseFloat(I.target.value)||0})),placeholder:m.placeholder,className:"input-field w-full text-base py-3"}),i.jsxs("p",{className:"text-xs text-iron-500 mt-1",children:["Recommended: ",xt[l]," ",m.unit]})]},l)})}),i.jsxs("div",{className:"p-4 border-t border-iron-800 flex gap-3",children:[i.jsx("button",{onClick:()=>g(!1),className:"btn-secondary flex-1",children:"Cancel"}),i.jsxs("button",{onClick:()=>{L(ae),g(!1)},className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[i.jsx(Ye,{className:"w-4 h-4"}),"Save Goals"]})]})]})})]})}export{Vn as default};
