import{a as Qe,u as Xe,d as Je,b as Ze,c as es,r as d,ag as ie,ah as o,h as m,a3 as ss,g as ts,Q as as,ab as ns,j as e,i as E,ac as A,A as is,z as re,L as k,t as le,U as Ee,C as ce,X as Re,D as oe,k as Ce,F as De,ai as rs,af as Ie,aj as ls,V as cs,Y as os,$ as ds,ak as B,K as ms,I as xs,al as us,am as hs,an as K}from"./index-Bu1DCD4H.js";import{L as fs}from"./lock-DqiDxPaE.js";import{U as ps}from"./user-minus-zswjRH2J.js";import{C as de}from"./clock-ySZ75key.js";import{S as Fe}from"./search-DpIMhD4D.js";import{C as Ns}from"./chevron-left-C5bAH55x.js";import{s as gs,a as js,i as bs,b as vs}from"./index-DB8ZMbXE.js";import{f as ys}from"./index-C9IuBzhn.js";import{T as ws}from"./trophy-r8dcLTK3.js";import{e as Ss}from"./index-_CznCMm7.js";import{e as ks}from"./index-Del7ej_y.js";function Es({friendStatus:p,loading:n,onAction:q}){if(!p)return null;const T={[o.NONE]:{label:"Add Friend",icon:oe,className:"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"},[o.PENDING_SENT]:{label:"Pending",icon:de,className:"bg-iron-700 text-iron-300 hover:bg-iron-600"},[o.PENDING_RECEIVED]:{label:"Accept",icon:ce,className:"bg-green-500/20 text-green-400 hover:bg-green-500/30"},[o.FRIENDS]:{label:"Friends",icon:Ie,className:"bg-blue-500/10 text-blue-400 hover:bg-red-500/10 hover:text-red-400"}},w=T[p.status]||T[o.NONE],c=w.icon;return e.jsxs("button",{onClick:q,disabled:n,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w.className}`,children:[n?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(c,{className:"w-4 h-4"}),w.label]})}function Os(){var je,be,ve;const{userId:p}=Qe();Xe("Profile");const{user:n,isRealAdmin:q}=Je(),T=Ze(),w=es(),[c,H]=d.useState(null),[Pe,M]=d.useState(!0),[C,Le]=d.useState(null),[me,Ae]=d.useState([]),[R,Te]=d.useState(!1),[D,xe]=d.useState(new Date),[qe,Me]=d.useState([]),[Oe,Ue]=d.useState([]),[r,S]=d.useState(null),[Y,O]=d.useState(!1),[z,U]=d.useState(0),[Q,ue]=d.useState("overview"),[F,he]=d.useState([]),[I,X]=d.useState([]),[G,J]=d.useState([]),[Z,fe]=d.useState(!1),[V,pe]=d.useState("friends"),[$,Ge]=d.useState(""),[ee,Ve]=d.useState([]),[b,Ne]=d.useState({}),se=()=>{var s;(s=w.state)!=null&&s.from?T(w.state.from):T(-1)},$e=((je=w.state)==null?void 0:je.fromLabel)||"Back";d.useEffect(()=>{ge()},[p,n]);const ge=async()=>{M(!0);try{let s=null,t=null;if(p?(s=await ie.getByUsername(p),s?t=s.uid:(s=await ie.get(p),t=p)):(t=n==null?void 0:n.uid,s=await ie.get(t)),Te(t===(n==null?void 0:n.uid)),!s){H(null),M(!1);return}let l={status:o.NONE};if(n&&t!==n.uid)try{l=await m.getFriendshipStatus(n.uid,t),S(l)}catch(x){console.error("Friend status error:",x)}try{const x=await m.getFriendCount(t);if(U(x),t===(n==null?void 0:n.uid)){const v=await m.getReceivedRequests(n.uid);X(v)}}catch(x){console.error("Friend count error:",x)}const i=s.defaultVisibility||(s.isPrivate?"private":"public"),a=l.status===o.FRIENDS;if(!(t===(n==null?void 0:n.uid)||q||i==="public"||i==="friends"&&a)){H({...s,isPrivate:!0,defaultVisibility:i,uid:t}),M(!1);return}H(s);const[u,h]=await Promise.all([ss.getByUser(t,500),ts.getByUser(t)]),L=u.filter(x=>x.status==="completed"),ae=h.filter(x=>x.status==="completed"),_=[...L,...ae];Me([...u,...h]);const g={bench:0,squat:0,deadlift:0},f={bench:null,squat:null,deadlift:null},He=(x,v)=>!x||!v||v<1?0:v===1?x:Math.round(x*(1+v/30));_.forEach(x=>{x.exercises&&x.exercises.forEach(v=>{var ye,we;const j=((ye=v.name)==null?void 0:ye.toLowerCase())||"";let y=null;j.includes("bench")&&!j.includes("incline")&&!j.includes("decline")?y="bench":j.includes("squat")&&!j.includes("front")&&!j.includes("hack")?y="squat":j.includes("deadlift")&&!j.includes("romanian")&&!j.includes("rdl")&&!j.includes("stiff")&&(y="deadlift"),y&&((we=v.sets)==null||we.forEach(W=>{const ne=parseFloat(W.actualWeight)||parseFloat(W.prescribedWeight)||0,Se=parseInt(W.actualReps)||parseInt(W.prescribedReps)||1;g[y]=Math.max(g[y],ne);const ke=He(ne,Se);(!f[y]||ke>f[y].e1rm)&&(f[y]={weight:ne,reps:Se,e1rm:ke})}))})}),Le({totalWorkouts:_.length,bench:g.bench,squat:g.squat,deadlift:g.deadlift,total:g.bench+g.squat+g.deadlift,bestSets:f});const Ye=await as.getByUser(t);Ue(Ye.filter(x=>x.status==="active"));const ze=await ns.getFeed(5,null,t);Ae(ze.items)}catch(s){console.error("Error loading profile:",s)}finally{M(!1)}},te=async()=>{if(!(!n||Z)){fe(!0);try{const s=await cs(os(ds,"users")),t={},l=[];s.docs.forEach(u=>{const h={id:u.id,uid:u.id,...u.data()};t[u.id]=h,u.id!==n.uid&&l.push(h)}),Ve(l);const[i,a,N]=await Promise.all([m.getFriends(n.uid),m.getReceivedRequests(n.uid),m.getSentRequests(n.uid)]);he(i.map(u=>t[u]).filter(Boolean)),X(a),J(N),U(i.length)}catch(s){console.error("Error loading friends:",s)}finally{fe(!1)}}},P=async(s,t,l)=>{Ne(i=>({...i,[t]:!0}));try{if(s==="accept")await m.acceptRequest(t),await te();else if(s==="decline")await m.declineRequest(t),X(i=>i.filter(a=>a.id!==t));else if(s==="cancel")await m.cancelRequest(t),J(i=>i.filter(a=>a.id!==t));else if(s==="remove"){if(!confirm("Remove this friend?"))return;await m.removeFriend(n.uid,t),he(i=>i.filter(a=>(a.uid||a.id)!==t)),U(i=>Math.max(0,i-1))}else if(s==="send"){await m.sendRequest(n.uid,t);const i=await m.getSentRequests(n.uid);J(i)}}catch(i){console.error("Friend action error:",i),alert(i.message)}finally{Ne(i=>({...i,[t]:!1}))}},_e=s=>{switch(s){case B.WORKOUT:return e.jsx(xs,{className:"w-4 h-4 text-green-400"});case B.CARDIO:return e.jsx(le,{className:"w-4 h-4 text-orange-400"});case B.GOAL_COMPLETED:return e.jsx(ws,{className:"w-4 h-4 text-yellow-400"});case B.GOAL_CREATED:return e.jsx(ms,{className:"w-4 h-4 text-purple-400"});default:return e.jsx(le,{className:"w-4 h-4 text-iron-400"})}},We=()=>{const s=us(vs(D),{weekStartsOn:1}),t=hs(Ss(D),{weekStartsOn:1});return ks({start:s,end:t})},Be=s=>{const t=K(s);return qe.filter(l=>{var a;const i=(a=l.date)!=null&&a.toDate?l.date.toDate():new Date(l.date);return K(i)===t})},Ke=s=>{const t=K(s);return Oe.find(l=>K(l.targetDate)===t)};if(Pe)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(E,{className:"w-8 h-8 text-flame-500 animate-spin"})});if(!c)return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"User Not Found"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"This user doesn't exist or has been deleted."}),e.jsx("button",{onClick:se,className:"btn-primary",children:"Go Back"})]});if(c.isPrivate&&!R){const s=async()=>{if(n){O(!0);try{!r||r.status===o.NONE?(await m.sendRequest(n.uid,c.uid||p),S({status:o.PENDING_SENT})):r.status===o.PENDING_SENT?(await m.cancelRequest(r.requestId),S({status:o.NONE})):r.status===o.PENDING_RECEIVED&&(await m.acceptRequest(r.requestId),S({status:o.FRIENDS}),ge())}catch(t){console.error("Friend action error:",t)}finally{O(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(fs,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:c.defaultVisibility==="friends"?"Friends Only":"Private Profile"}),e.jsx("p",{className:"text-iron-500 mb-6",children:c.defaultVisibility==="friends"?"This user only shares their activity with friends.":"This user has set their profile to private."}),n&&c.defaultVisibility==="friends"&&e.jsxs("button",{onClick:s,disabled:Y||(r==null?void 0:r.status)===o.FRIENDS,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors mb-4 ${(r==null?void 0:r.status)===o.PENDING_SENT?"bg-iron-700 text-iron-300 hover:bg-iron-600":(r==null?void 0:r.status)===o.PENDING_RECEIVED?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"}`,children:[Y?e.jsx(E,{className:"w-4 h-4 animate-spin inline mr-1"}):null,(r==null?void 0:r.status)===o.PENDING_SENT?"Cancel Request":(r==null?void 0:r.status)===o.PENDING_RECEIVED?"Accept Friend Request":"Send Friend Request"]}),e.jsx("br",{}),e.jsx("button",{onClick:se,className:"btn-primary",children:"Go Back"})]})}return e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[((be=w.state)==null?void 0:be.from)&&e.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 text-iron-400 hover:text-iron-200 mb-6",children:[e.jsx(is,{className:"w-4 h-4"}),$e]}),e.jsx("div",{className:"card-steel p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-iron-800 flex items-center justify-center",children:c.photoURL?e.jsx("img",{src:c.photoURL,alt:"",className:"w-20 h-20 rounded-full"}):e.jsx(A,{className:"w-10 h-10 text-iron-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-display text-iron-100",children:[c.displayName||"User",q&&!R&&e.jsx("span",{className:`ml-2 text-xs font-normal px-2 py-0.5 rounded-full align-middle ${(c.defaultVisibility||"public")==="public"?"bg-green-500/10 text-green-400":c.defaultVisibility==="friends"?"bg-blue-500/10 text-blue-400":"bg-red-500/10 text-red-400"}`,children:c.defaultVisibility||"public"})]}),c.username&&e.jsxs("p",{className:"text-sm text-flame-400",children:["@",c.username]}),c.createdAt&&e.jsxs("p",{className:"text-xs text-iron-500 mt-1",children:["Member since ",re(c.createdAt.toDate?c.createdAt.toDate():new Date(c.createdAt),"MMMM yyyy"),z>0&&e.jsxs(e.Fragment,{children:[" · ",e.jsxs("button",{onClick:()=>{ue("friends"),F.length===0&&te()},className:"text-flame-400 hover:text-flame-300",children:[z," friend",z!==1?"s":""]})]})]}),((ve=c.badges)==null?void 0:ve.length)>0&&e.jsx("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:c.badges.map(s=>e.jsx("span",{title:s.name,className:"w-7 h-7 flex items-center justify-center bg-iron-800 border border-iron-700 rounded-lg text-sm cursor-default hover:bg-iron-700 transition-colors",children:s.icon},s.id))})]}),R?e.jsx(k,{to:"/settings",className:"btn-secondary text-sm",children:"Edit Profile"}):n&&e.jsx(Es,{friendStatus:r,loading:Y,onAction:async()=>{O(!0);try{const s=c.uid||p;!r||r.status===o.NONE?(await m.sendRequest(n.uid,s),S({status:o.PENDING_SENT})):r.status===o.PENDING_SENT?(await m.cancelRequest(r.requestId),S({status:o.NONE})):r.status===o.PENDING_RECEIVED?(await m.acceptRequest(r.requestId),S({status:o.FRIENDS})):r.status===o.FRIENDS&&confirm("Remove this friend?")&&(await m.removeFriend(n.uid,s),S({status:o.NONE}),U(t=>Math.max(0,t-1)))}catch(s){console.error("Friend action error:",s),alert(s.message)}finally{O(!1)}}})]})}),R&&e.jsx("div",{className:"flex gap-2 mb-6",children:[{key:"overview",label:"Overview",icon:le},{key:"friends",label:"Friends",icon:Ee,badge:I.length||null}].map(s=>e.jsxs("button",{onClick:()=>{ue(s.key),s.key==="friends"&&F.length===0&&!Z&&te()},className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-colors ${Q===s.key?"bg-flame-500/20 text-flame-400 border border-flame-500/30":"bg-iron-800/50 text-iron-400 border border-iron-700/50 hover:text-iron-200"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.badge>0&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-flame-500 text-white font-bold",children:s.badge})]},s.key))}),R&&Q==="friends"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:[{key:"friends",label:"My Friends",count:F.length},{key:"requests",label:"Requests",count:I.length},{key:"sent",label:"Sent",count:G.length},{key:"find",label:"Find People"}].map(s=>e.jsxs("button",{onClick:()=>pe(s.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${V===s.key?"bg-iron-800 text-iron-100":"text-iron-500 hover:text-iron-300"}`,children:[s.label,s.count>0&&e.jsx("span",{className:"ml-1.5 text-xs opacity-60",children:s.count})]},s.key))}),Z?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(E,{className:"w-6 h-6 text-flame-500 animate-spin mx-auto"}),e.jsx("p",{className:"text-iron-500 mt-3 text-sm",children:"Loading friends..."})]}):V==="friends"?F.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(Ee,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500 mb-2",children:"No friends yet"}),e.jsx("button",{onClick:()=>pe("find"),className:"text-sm text-flame-400 hover:text-flame-300",children:"Find people to add"})]}):e.jsx("div",{className:"space-y-2",children:F.map(s=>{const t=s.uid||s.id;return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(k,{to:`/profile/${s.username||t}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(A,{className:"w-5 h-5 text-iron-400"})}),e.jsxs(k,{to:`/profile/${s.username||t}`,className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:s.displayName||"User"}),s.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",s.username]})]}),e.jsx("button",{onClick:()=>P("remove",t),disabled:b[t],className:"p-2 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Remove friend",children:b[t]?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(ps,{className:"w-4 h-4"})})]},t)})}):V==="requests"?e.jsx("div",{className:"space-y-2",children:I.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(de,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No pending requests"})]}):I.map(s=>{const t=ee.find(l=>l.id===s.from)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(k,{to:`/profile/${t.username||s.from}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(A,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>P("accept",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(E,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ce,{className:"w-3.5 h-3.5"}),"Accept"]}),e.jsx("button",{onClick:()=>P("decline",s.id),disabled:b[s.id],className:"p-1.5 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(Re,{className:"w-4 h-4"})})]})]},s.id)})}):V==="sent"?e.jsx("div",{className:"space-y-2",children:G.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(oe,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No sent requests"})]}):G.map(s=>{const t=ee.find(l=>l.id===s.to)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(k,{to:`/profile/${t.username||s.to}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(A,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("button",{onClick:()=>P("cancel",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-iron-700 text-iron-300 hover:bg-iron-600 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(E,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Re,{className:"w-3.5 h-3.5"}),"Cancel"]})]},s.id)})}):e.jsxs("div",{children:[e.jsx("div",{className:"card-steel p-4 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search by name or username...",value:$,onChange:s=>Ge(s.target.value),className:"input-field w-full pl-10",autoFocus:!0})]})}),$.trim()?(()=>{const s=new Set(F.map(a=>a.uid||a.id)),t=new Set(G.map(a=>a.to)),l=new Set(I.map(a=>a.from)),i=ee.filter(a=>{var u,h;const N=$.toLowerCase();return(((u=a.displayName)==null?void 0:u.toLowerCase().includes(N))||((h=a.username)==null?void 0:h.toLowerCase().includes(N)))&&!s.has(a.id)});return i.length===0?e.jsx("div",{className:"card-steel p-8 text-center",children:e.jsxs("p",{className:"text-iron-500",children:['No users found matching "',$,'"']})}):e.jsx("div",{className:"space-y-2",children:i.map(a=>{const N=t.has(a.id),u=l.has(a.id);return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(k,{to:`/profile/${a.username||a.id}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(A,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:a.displayName||"User"}),a.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",a.username]})]}),N?e.jsxs("span",{className:"text-xs text-iron-500 flex items-center gap-1",children:[e.jsx(de,{className:"w-3.5 h-3.5"})," Pending"]}):u?e.jsxs("button",{onClick:()=>{const h=I.find(L=>L.from===a.id);h&&P("accept",h.id)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(ce,{className:"w-3.5 h-3.5"})," Accept"]}):e.jsxs("button",{onClick:()=>P("send",a.id),disabled:b[a.id],className:"flex items-center gap-1 px-3 py-1.5 bg-flame-500/20 text-flame-400 hover:bg-flame-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[a.id]?e.jsx(E,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(oe,{className:"w-3.5 h-3.5"}),"Add"]})]},a.id)})})})():e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Fe,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"Type a name or username to find people"})]})]})]}),(Q==="overview"||!R)&&e.jsxs(e.Fragment,{children:[C&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Bench Press",key:"bench",color:"text-flame-400",value:C.bench},{label:"Squat",key:"squat",color:"text-purple-400",value:C.squat},{label:"Deadlift",key:"deadlift",color:"text-green-400",value:C.deadlift},{label:"Total",key:"total",color:"text-yellow-400",value:C.total}].map(s=>{var i;const t=s.key!=="total"?(i=C.bestSets)==null?void 0:i[s.key]:null,l=t&&t.e1rm&&t.reps>1;return e.jsxs("div",{className:"card-steel p-4 text-center relative group cursor-default",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:s.label}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:s.value>0?`${s.value}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"}),l&&e.jsxs("div",{className:"absolute inset-0 bg-iron-900/95 rounded-xl flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none",children:[e.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wider",children:"Est. 1RM"}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:t.e1rm}),e.jsxs("p",{className:"text-[10px] text-iron-500",children:["from ",t.weight,"×",t.reps]})]})]},s.key)})}),e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-display text-lg text-iron-100 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-flame-500"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>xe(gs(D,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm text-iron-300 w-28 text-center",children:re(D,"MMM yyyy")}),e.jsx("button",{onClick:()=>xe(js(D,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(De,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["M","T","W","T","F","S","S"].map((s,t)=>e.jsx("div",{className:"text-center text-xs text-iron-500 py-1",children:s},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:We().map((s,t)=>{const l=Be(s),i=l.filter(f=>f.workoutType!=="cardio"),a=l.filter(f=>f.workoutType==="cardio");i.length>0;const N=a.length>0,u=i.some(f=>f.status==="completed"),h=i.some(f=>f.status!=="completed"),L=Ke(s),ae=bs(s,D),_=rs(s),g=u?"bg-green-500/20":h?"bg-flame-500/20":"";return e.jsxs("div",{className:`
                  relative aspect-square flex items-center justify-center text-xs rounded-md
                  ${ae?"text-iron-300":"text-iron-600"}
                  ${_?"ring-1 ring-flame-500":""}
                  ${g}
                `,children:[re(s,"d"),(N||L)&&e.jsxs("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 flex items-center gap-0.5",children:[N&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400"}),L&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400"})]})]},t)})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-4 text-xs text-iron-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-flame-500/20"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),e.jsx("span",{children:"Cardio"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),e.jsx("span",{children:"Goal"})]})]})]}),e.jsxs("div",{className:"card-steel p-4",children:[e.jsx("h2",{className:"font-display text-lg text-iron-100 mb-4",children:"Recent Activity"}),me.length===0?e.jsx("p",{className:"text-center text-iron-500 py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-3",children:me.map(s=>{var t,l;return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-iron-800 last:border-0",children:[_e(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-iron-300",children:((t=s.data)==null?void 0:t.name)||s.type.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-iron-600",children:((l=s.createdAt)==null?void 0:l.toDate)&&ys(s.createdAt.toDate(),{addSuffix:!0})})]}),s.reactionCount>0&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-iron-500",children:e.jsxs("span",{children:[s.reactionCount," reaction",s.reactionCount!==1?"s":""]})})]},s.id)})}),e.jsx(k,{to:`/feed?user=${(c==null?void 0:c.uid)||(n==null?void 0:n.uid)}`,className:"block mt-4 text-center text-sm text-flame-400 hover:text-flame-300",children:"View all activity"})]}),R&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"card-steel overflow-hidden divide-y divide-iron-800",children:[{to:"/calendar",icon:Ce,label:"Calendar",desc:"Monthly view & scheduling"},{to:"/health",icon:Ie,label:"Health",desc:"Weight, sleep & body metrics"},{to:"/settings",icon:ls,label:"Settings",desc:"Preferences & account"}].map(s=>e.jsxs(k,{to:s.to,state:{from:"/profile",fromLabel:"Back to Profile"},className:"flex items-center gap-4 p-4 hover:bg-iron-800/50 transition-colors",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx(s.icon,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-200",children:s.label}),e.jsx("p",{className:"text-xs text-iron-500",children:s.desc})]}),e.jsx(De,{className:"w-4 h-4 text-iron-600"})]},s.to))})})]})]})}export{Os as default};
