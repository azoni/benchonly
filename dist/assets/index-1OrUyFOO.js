const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-DKcEIga5.js","assets/chevron-left-BTF9FLn7.js","assets/calorieService-6-LCVeV1.js","assets/index-BHnhaXR9.js","assets/LineChart-CxiQ2Tlo.js","assets/moon-Cb-2UhGN.js","assets/index-BJj5aekW.js","assets/index-CQhaOWXG.js","assets/index-Dn7o6Ot4.js","assets/pen-2WTXpV0u.js","assets/eye-off-D-xaQHzE.js","assets/WorkoutsPage-DCnHPS2s.js","assets/search-Cqz9uFVH.js","assets/message-square-DWFO1tdv.js","assets/clock-B1Hjd9qX.js","assets/more-vertical-gWXSLDTX.js","assets/share-2-BL4EkioY.js","assets/trash-2-ugiI_USJ.js","assets/index-Rl57QzwM.js","assets/NewWorkoutPage-BG-AWiKT.js","assets/save-CBFloZ2_.js","assets/info-x9g-HWsJ.js","assets/WorkoutDetailPage-MKcfNsDg.js","assets/ExerciseInfoModal-BLbRJy1u.js","assets/external-link-CVgE83-U.js","assets/WorkoutSummaryCard-CME_7x-z.js","assets/file-text-BEFbWYQ1.js","assets/pencil-DNE44QRF.js","assets/GroupWorkoutPage-DKIegREb.js","assets/CalendarPage-Bh4gSKXL.js","assets/skip-forward-9b5JSss2.js","assets/GroupsPage-BpHu8M2p.js","assets/crown-CRLieMYL.js","assets/GroupDetailPage-DMvuqKi6.js","assets/timer-CV6y9BmQ.js","assets/copy-DTwbqvEa.js","assets/GroupBatchViewPage-BQ3oLXC9.js","assets/GoalsPage-CV1M1M_h.js","assets/index-CanLdVUj.js","assets/ToolsPage-DG7G5xIW.js","assets/bar-chart-3-DTgdZE3_.js","assets/HealthPage-CAmNnHJY.js","assets/index-BDKxMgxq.js","assets/UsagePage-D99G8CDK.js","assets/SettingsPage-DIMJOf0V.js","assets/shield-DJWpIBCc.js","assets/scale-Ci4R5Kkx.js","assets/globe-CtP2rlbG.js","assets/lock-BuovlhCZ.js","assets/AdminPage-GnonfWtt.js","assets/index-CpOAYZtm.js","assets/FeedPage-DhdoSqLc.js","assets/trophy-BCbrIbWw.js","assets/FriendsPage-Epeg83bb.js","assets/user-minus-DMJXxTsf.js","assets/ProfilePage-mJVmwJa2.js","assets/GenerateWorkoutPage-BmclN8BH.js","assets/ProgramsPage-C-fXVLY_.js","assets/index-BlUeUJqW.js","assets/pause-D1j0p_GP.js","assets/ProgramDetailPage-DF53_bRG.js","assets/DocsPage-CA4PqEkj.js","assets/CoachesPage-DXpAycAx.js","assets/check-circle-CVSOLJRR.js","assets/OnboardingPage-3WLXM3wJ.js","assets/TrainerPage-S7SlewZc.js","assets/x-circle-DUhAPexK.js","assets/FormCheckPage-CqM-9qLh.js"])))=>i.map(i=>d[i]);
function aV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function uJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _b={exports:{}},qp={},Eb={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.element"),lV=Symbol.for("react.portal"),uV=Symbol.for("react.fragment"),cV=Symbol.for("react.strict_mode"),dV=Symbol.for("react.profiler"),hV=Symbol.for("react.provider"),fV=Symbol.for("react.context"),pV=Symbol.for("react.forward_ref"),mV=Symbol.for("react.suspense"),gV=Symbol.for("react.memo"),yV=Symbol.for("react.lazy"),J_=Symbol.iterator;function vV(t){return t===null||typeof t!="object"?null:(t=J_&&t[J_]||t["@@iterator"],typeof t=="function"?t:null)}var Tb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ib=Object.assign,Sb={};function du(t,e,n){this.props=t,this.context=e,this.refs=Sb,this.updater=n||Tb}du.prototype.isReactComponent={};du.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};du.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bb(){}bb.prototype=du.prototype;function vv(t,e,n){this.props=t,this.context=e,this.refs=Sb,this.updater=n||Tb}var wv=vv.prototype=new bb;wv.constructor=vv;Ib(wv,du.prototype);wv.isPureReactComponent=!0;var X_=Array.isArray,kb=Object.prototype.hasOwnProperty,xv={current:null},Ab={key:!0,ref:!0,__self:!0,__source:!0};function Pb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kb.call(e,r)&&!Ab.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bd,type:t,key:s,ref:o,props:i,_owner:xv.current}}function wV(t,e){return{$$typeof:bd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _v(t){return typeof t=="object"&&t!==null&&t.$$typeof===bd}function xV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Z_=/\/+/g;function ig(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xV(""+t.key):e.toString(36)}function Zh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bd:case lV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ig(o,0):r,X_(i)?(n="",t!=null&&(n=t.replace(Z_,"$&/")+"/"),Zh(i,e,n,"",function(u){return u})):i!=null&&(_v(i)&&(i=wV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Z_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",X_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ig(s,a);o+=Zh(s,e,n,l,i)}else if(l=vV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ig(s,a++),o+=Zh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gh(t,e,n){if(t==null)return t;var r=[],i=0;return Zh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _V(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zn={current:null},ef={transition:null},EV={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:ef,ReactCurrentOwner:xv};function Cb(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:gh,forEach:function(t,e,n){gh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gh(t,function(){e++}),e},toArray:function(t){return gh(t,function(e){return e})||[]},only:function(t){if(!_v(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=du;$e.Fragment=uV;$e.Profiler=dV;$e.PureComponent=vv;$e.StrictMode=cV;$e.Suspense=mV;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EV;$e.act=Cb;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ib({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=xv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kb.call(e,l)&&!Ab.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:bd,type:t.type,key:i,ref:s,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:fV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hV,_context:t},t.Consumer=t};$e.createElement=Pb;$e.createFactory=function(t){var e=Pb.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:pV,render:t}};$e.isValidElement=_v;$e.lazy=function(t){return{$$typeof:yV,_payload:{_status:-1,_result:t},_init:_V}};$e.memo=function(t,e){return{$$typeof:gV,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=ef.transition;ef.transition={};try{t()}finally{ef.transition=e}};$e.unstable_act=Cb;$e.useCallback=function(t,e){return Zn.current.useCallback(t,e)};$e.useContext=function(t){return Zn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Zn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Zn.current.useEffect(t,e)};$e.useId=function(){return Zn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Zn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Zn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Zn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Zn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Zn.current.useReducer(t,e,n)};$e.useRef=function(t){return Zn.current.useRef(t)};$e.useState=function(t){return Zn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Zn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Zn.current.useTransition()};$e.version="18.3.1";Eb.exports=$e;var k=Eb.exports;const kd=Wp(k),TV=aV({__proto__:null,default:kd},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IV=k,SV=Symbol.for("react.element"),bV=Symbol.for("react.fragment"),kV=Object.prototype.hasOwnProperty,AV=IV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PV={key:!0,ref:!0,__self:!0,__source:!0};function Rb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kV.call(e,r)&&!PV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SV,type:t,key:s,ref:o,props:i,_owner:AV.current}}qp.Fragment=bV;qp.jsx=Rb;qp.jsxs=Rb;_b.exports=qp;var f=_b.exports,wy={},Nb={exports:{}},Ar={},Db={exports:{}},Vb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ce){var N=X.length;X.push(ce);e:for(;0<N;){var ue=N-1>>>1,Te=X[ue];if(0<i(Te,ce))X[ue]=ce,X[N]=Te,N=ue;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],N=X.pop();if(N!==ce){X[0]=N;e:for(var ue=0,Te=X.length,j=Te>>>1;ue<j;){var ot=2*(ue+1)-1,mt=X[ot],Fe=ot+1,Ze=X[Fe];if(0>i(mt,N))Fe<Te&&0>i(Ze,mt)?(X[ue]=Ze,X[Fe]=N,ue=Fe):(X[ue]=mt,X[ot]=N,ue=ot);else if(Fe<Te&&0>i(Ze,N))X[ue]=Ze,X[Fe]=N,ue=Fe;else break e}}return ce}function i(X,ce){var N=X.sortIndex-ce.sortIndex;return N!==0?N:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,p=3,m=!1,y=!1,v=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var ce=n(u);ce!==null;){if(ce.callback===null)r(u);else if(ce.startTime<=X)r(u),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=n(u)}}function V(X){if(v=!1,E(X),!y)if(n(l)!==null)y=!0,De(M);else{var ce=n(u);ce!==null&&Ie(V,ce.startTime-X)}}function M(X,ce){y=!1,v&&(v=!1,_(T),T=-1),m=!0;var N=p;try{for(E(ce),h=n(l);h!==null&&(!(h.expirationTime>ce)||X&&!R());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,p=h.priorityLevel;var Te=ue(h.expirationTime<=ce);ce=t.unstable_now(),typeof Te=="function"?h.callback=Te:h===n(l)&&r(l),E(ce)}else r(l);h=n(l)}if(h!==null)var j=!0;else{var ot=n(u);ot!==null&&Ie(V,ot.startTime-ce),j=!1}return j}finally{h=null,p=N,m=!1}}var O=!1,S=null,T=-1,A=5,b=-1;function R(){return!(t.unstable_now()-b<A)}function D(){if(S!==null){var X=t.unstable_now();b=X;var ce=!0;try{ce=S(!0,X)}finally{ce?C():(O=!1,S=null)}}else O=!1}var C;if(typeof x=="function")C=function(){x(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ye=Y.port2;Y.port1.onmessage=D,C=function(){ye.postMessage(null)}}else C=function(){I(D,0)};function De(X){S=X,O||(O=!0,C())}function Ie(X,ce){T=I(function(){X(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,De(M))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(p){case 1:case 2:case 3:var ce=3;break;default:ce=p}var N=p;p=ce;try{return X()}finally{p=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var N=p;p=X;try{return ce()}finally{p=N}},t.unstable_scheduleCallback=function(X,ce,N){var ue=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?ue+N:ue):N=ue,X){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=N+Te,X={id:c++,callback:ce,priorityLevel:X,startTime:N,expirationTime:Te,sortIndex:-1},N>ue?(X.sortIndex=N,e(u,X),n(l)===null&&X===n(u)&&(v?(_(T),T=-1):v=!0,Ie(V,N-ue))):(X.sortIndex=Te,e(l,X),y||m||(y=!0,De(M))),X},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(X){var ce=p;return function(){var N=p;p=ce;try{return X.apply(this,arguments)}finally{p=N}}}})(Vb);Db.exports=Vb;var CV=Db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RV=k,Ir=CV;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ob=new Set,$c={};function Ca(t,e){Ol(t,e),Ol(t+"Capture",e)}function Ol(t,e){for($c[t]=e,t=0;t<e.length;t++)Ob.add(e[t])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xy=Object.prototype.hasOwnProperty,NV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eE={},tE={};function DV(t){return xy.call(tE,t)?!0:xy.call(eE,t)?!1:NV.test(t)?tE[t]=!0:(eE[t]=!0,!1)}function VV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OV(t,e,n,r){if(e===null||typeof e>"u"||VV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function er(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cn[t]=new er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cn[e]=new er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cn[t]=new er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cn[t]=new er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cn[t]=new er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cn[t]=new er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cn[t]=new er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cn[t]=new er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cn[t]=new er(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ev=/[\-:]([a-z])/g;function Tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ev,Tv);Cn[e]=new er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ev,Tv);Cn[e]=new er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ev,Tv);Cn[e]=new er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cn[t]=new er(t,1,!1,t.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cn[t]=new er(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iv(t,e,n,r){var i=Cn.hasOwnProperty(e)?Cn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OV(e,n,i,r)&&(n=null),r||i===null?DV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=RV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yh=Symbol.for("react.element"),nl=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),_y=Symbol.for("react.profiler"),jb=Symbol.for("react.provider"),Mb=Symbol.for("react.context"),bv=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Ty=Symbol.for("react.suspense_list"),kv=Symbol.for("react.memo"),ws=Symbol.for("react.lazy"),Lb=Symbol.for("react.offscreen"),nE=Symbol.iterator;function zu(t){return t===null||typeof t!="object"?null:(t=nE&&t[nE]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,sg;function ac(t){if(sg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sg=e&&e[1]||""}return`
`+sg+t}var og=!1;function ag(t,e){if(!t||og)return"";og=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{og=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ac(t):""}function jV(t){switch(t.tag){case 5:return ac(t.type);case 16:return ac("Lazy");case 13:return ac("Suspense");case 19:return ac("SuspenseList");case 0:case 2:case 15:return t=ag(t.type,!1),t;case 11:return t=ag(t.type.render,!1),t;case 1:return t=ag(t.type,!0),t;default:return""}}function Iy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rl:return"Fragment";case nl:return"Portal";case _y:return"Profiler";case Sv:return"StrictMode";case Ey:return"Suspense";case Ty:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mb:return(t.displayName||"Context")+".Consumer";case jb:return(t._context.displayName||"Context")+".Provider";case bv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kv:return e=t.displayName||null,e!==null?e:Iy(t.type)||"Memo";case ws:e=t._payload,t=t._init;try{return Iy(t(e))}catch{}}return null}function MV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iy(e);case 8:return e===Sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LV(t){var e=Fb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vh(t){t._valueTracker||(t._valueTracker=LV(t))}function Ub(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Df(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sy(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bb(t,e){e=e.checked,e!=null&&Iv(t,"checked",e,!1)}function by(t,e){Bb(t,e);var n=Js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ky(t,e.type,n):e.hasOwnProperty("defaultValue")&&ky(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ky(t,e,n){(e!=="number"||Df(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lc=Array.isArray;function wl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ay(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(lc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Js(n)}}function zb(t,e){var n=Js(e.value),r=Js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $b(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Py(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$b(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wh,Wb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wh=wh||document.createElement("div"),wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FV=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(t){FV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gc[e]=gc[t]})});function qb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gc.hasOwnProperty(t)&&gc[t]?(""+e).trim():e+"px"}function Gb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var UV=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cy(t,e){if(e){if(UV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Ry(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function Av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dy=null,xl=null,_l=null;function aE(t){if(t=Cd(t)){if(typeof Dy!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Yp(e),Dy(t.stateNode,t.type,e))}}function Hb(t){xl?_l?_l.push(t):_l=[t]:xl=t}function Kb(){if(xl){var t=xl,e=_l;if(_l=xl=null,aE(t),e)for(t=0;t<e.length;t++)aE(e[t])}}function Qb(t,e){return t(e)}function Yb(){}var lg=!1;function Jb(t,e,n){if(lg)return t(e,n);lg=!0;try{return Qb(t,e,n)}finally{lg=!1,(xl!==null||_l!==null)&&(Yb(),Kb())}}function qc(t,e){var n=t.stateNode;if(n===null)return null;var r=Yp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Vy=!1;if(Hi)try{var $u={};Object.defineProperty($u,"passive",{get:function(){Vy=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{Vy=!1}function BV(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var yc=!1,Vf=null,Of=!1,Oy=null,zV={onError:function(t){yc=!0,Vf=t}};function $V(t,e,n,r,i,s,o,a,l){yc=!1,Vf=null,BV.apply(zV,arguments)}function WV(t,e,n,r,i,s,o,a,l){if($V.apply(this,arguments),yc){if(yc){var u=Vf;yc=!1,Vf=null}else throw Error(Z(198));Of||(Of=!0,Oy=u)}}function Ra(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lE(t){if(Ra(t)!==t)throw Error(Z(188))}function qV(t){var e=t.alternate;if(!e){if(e=Ra(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lE(i),t;if(s===r)return lE(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Zb(t){return t=qV(t),t!==null?ek(t):null}function ek(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ek(t);if(e!==null)return e;t=t.sibling}return null}var tk=Ir.unstable_scheduleCallback,uE=Ir.unstable_cancelCallback,GV=Ir.unstable_shouldYield,HV=Ir.unstable_requestPaint,Jt=Ir.unstable_now,KV=Ir.unstable_getCurrentPriorityLevel,Pv=Ir.unstable_ImmediatePriority,nk=Ir.unstable_UserBlockingPriority,jf=Ir.unstable_NormalPriority,QV=Ir.unstable_LowPriority,rk=Ir.unstable_IdlePriority,Gp=null,gi=null;function YV(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(Gp,t,void 0,(t.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:ZV,JV=Math.log,XV=Math.LN2;function ZV(t){return t>>>=0,t===0?32:31-(JV(t)/XV|0)|0}var xh=64,_h=4194304;function uc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uc(a):(s&=o,s!==0&&(r=uc(s)))}else o=n&~i,o!==0?r=uc(o):s!==0&&(r=uc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yr(e),i=1<<n,r|=t[n],e&=~i;return r}function eO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ik(){var t=xh;return xh<<=1,!(xh&4194240)&&(xh=64),t}function ug(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ad(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yr(e),t[e]=n}function nO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ct=0;function sk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ok,Rv,ak,lk,uk,My=!1,Eh=[],js=null,Ms=null,Ls=null,Gc=new Map,Hc=new Map,Ts=[],rO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cE(t,e){switch(t){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(e.pointerId)}}function Wu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cd(e),e!==null&&Rv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iO(t,e,n,r,i){switch(e){case"focusin":return js=Wu(js,t,e,n,r,i),!0;case"dragenter":return Ms=Wu(Ms,t,e,n,r,i),!0;case"mouseover":return Ls=Wu(Ls,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gc.set(s,Wu(Gc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hc.set(s,Wu(Hc.get(s)||null,t,e,n,r,i)),!0}return!1}function ck(t){var e=Jo(t.target);if(e!==null){var n=Ra(e);if(n!==null){if(e=n.tag,e===13){if(e=Xb(n),e!==null){t.blockedOn=e,uk(t.priority,function(){ak(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ly(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ny=r,n.target.dispatchEvent(r),Ny=null}else return e=Cd(n),e!==null&&Rv(e),t.blockedOn=n,!1;e.shift()}return!0}function dE(t,e,n){tf(t)&&n.delete(e)}function sO(){My=!1,js!==null&&tf(js)&&(js=null),Ms!==null&&tf(Ms)&&(Ms=null),Ls!==null&&tf(Ls)&&(Ls=null),Gc.forEach(dE),Hc.forEach(dE)}function qu(t,e){t.blockedOn===e&&(t.blockedOn=null,My||(My=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,sO)))}function Kc(t){function e(i){return qu(i,t)}if(0<Eh.length){qu(Eh[0],t);for(var n=1;n<Eh.length;n++){var r=Eh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(js!==null&&qu(js,t),Ms!==null&&qu(Ms,t),Ls!==null&&qu(Ls,t),Gc.forEach(e),Hc.forEach(e),n=0;n<Ts.length;n++)r=Ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ts.length&&(n=Ts[0],n.blockedOn===null);)ck(n),n.blockedOn===null&&Ts.shift()}var El=ns.ReactCurrentBatchConfig,Lf=!0;function oO(t,e,n,r){var i=ct,s=El.transition;El.transition=null;try{ct=1,Nv(t,e,n,r)}finally{ct=i,El.transition=s}}function aO(t,e,n,r){var i=ct,s=El.transition;El.transition=null;try{ct=4,Nv(t,e,n,r)}finally{ct=i,El.transition=s}}function Nv(t,e,n,r){if(Lf){var i=Ly(t,e,n,r);if(i===null)wg(t,e,r,Ff,n),cE(t,r);else if(iO(i,t,e,n,r))r.stopPropagation();else if(cE(t,r),e&4&&-1<rO.indexOf(t)){for(;i!==null;){var s=Cd(i);if(s!==null&&ok(s),s=Ly(t,e,n,r),s===null&&wg(t,e,r,Ff,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wg(t,e,r,null,n)}}var Ff=null;function Ly(t,e,n,r){if(Ff=null,t=Av(r),t=Jo(t),t!==null)if(e=Ra(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ff=t,null}function dk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KV()){case Pv:return 1;case nk:return 4;case jf:case QV:return 16;case rk:return 536870912;default:return 16}default:return 16}}var Rs=null,Dv=null,nf=null;function hk(){if(nf)return nf;var t,e=Dv,n=e.length,r,i="value"in Rs?Rs.value:Rs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nf=i.slice(t,1<r?1-r:void 0)}function rf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Th(){return!0}function hE(){return!1}function Pr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Th:hE,this.isPropagationStopped=hE,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Th)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Th)},persist:function(){},isPersistent:Th}),e}var hu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vv=Pr(hu),Pd=Ut({},hu,{view:0,detail:0}),lO=Pr(Pd),cg,dg,Gu,Hp=Ut({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ov,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gu&&(Gu&&t.type==="mousemove"?(cg=t.screenX-Gu.screenX,dg=t.screenY-Gu.screenY):dg=cg=0,Gu=t),cg)},movementY:function(t){return"movementY"in t?t.movementY:dg}}),fE=Pr(Hp),uO=Ut({},Hp,{dataTransfer:0}),cO=Pr(uO),dO=Ut({},Pd,{relatedTarget:0}),hg=Pr(dO),hO=Ut({},hu,{animationName:0,elapsedTime:0,pseudoElement:0}),fO=Pr(hO),pO=Ut({},hu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mO=Pr(pO),gO=Ut({},hu,{data:0}),pE=Pr(gO),yO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wO[t])?!!e[t]:!1}function Ov(){return xO}var _O=Ut({},Pd,{key:function(t){if(t.key){var e=yO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ov,charCode:function(t){return t.type==="keypress"?rf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EO=Pr(_O),TO=Ut({},Hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mE=Pr(TO),IO=Ut({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ov}),SO=Pr(IO),bO=Ut({},hu,{propertyName:0,elapsedTime:0,pseudoElement:0}),kO=Pr(bO),AO=Ut({},Hp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PO=Pr(AO),CO=[9,13,27,32],jv=Hi&&"CompositionEvent"in window,vc=null;Hi&&"documentMode"in document&&(vc=document.documentMode);var RO=Hi&&"TextEvent"in window&&!vc,fk=Hi&&(!jv||vc&&8<vc&&11>=vc),gE=" ",yE=!1;function pk(t,e){switch(t){case"keyup":return CO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var il=!1;function NO(t,e){switch(t){case"compositionend":return mk(e);case"keypress":return e.which!==32?null:(yE=!0,gE);case"textInput":return t=e.data,t===gE&&yE?null:t;default:return null}}function DO(t,e){if(il)return t==="compositionend"||!jv&&pk(t,e)?(t=hk(),nf=Dv=Rs=null,il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fk&&e.locale!=="ko"?null:e.data;default:return null}}var VO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VO[t.type]:e==="textarea"}function gk(t,e,n,r){Hb(r),e=Uf(e,"onChange"),0<e.length&&(n=new Vv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wc=null,Qc=null;function OO(t){kk(t,0)}function Kp(t){var e=al(t);if(Ub(e))return t}function jO(t,e){if(t==="change")return e}var yk=!1;if(Hi){var fg;if(Hi){var pg="oninput"in document;if(!pg){var wE=document.createElement("div");wE.setAttribute("oninput","return;"),pg=typeof wE.oninput=="function"}fg=pg}else fg=!1;yk=fg&&(!document.documentMode||9<document.documentMode)}function xE(){wc&&(wc.detachEvent("onpropertychange",vk),Qc=wc=null)}function vk(t){if(t.propertyName==="value"&&Kp(Qc)){var e=[];gk(e,Qc,t,Av(t)),Jb(OO,e)}}function MO(t,e,n){t==="focusin"?(xE(),wc=e,Qc=n,wc.attachEvent("onpropertychange",vk)):t==="focusout"&&xE()}function LO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kp(Qc)}function FO(t,e){if(t==="click")return Kp(e)}function UO(t,e){if(t==="input"||t==="change")return Kp(e)}function BO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ei=typeof Object.is=="function"?Object.is:BO;function Yc(t,e){if(ei(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xy.call(e,i)||!ei(t[i],e[i]))return!1}return!0}function _E(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EE(t,e){var n=_E(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_E(n)}}function wk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xk(){for(var t=window,e=Df();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Df(t.document)}return e}function Mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zO(t){var e=xk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wk(n.ownerDocument.documentElement,n)){if(r!==null&&Mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=EE(n,s);var o=EE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $O=Hi&&"documentMode"in document&&11>=document.documentMode,sl=null,Fy=null,xc=null,Uy=!1;function TE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uy||sl==null||sl!==Df(r)||(r=sl,"selectionStart"in r&&Mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xc&&Yc(xc,r)||(xc=r,r=Uf(Fy,"onSelect"),0<r.length&&(e=new Vv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sl)))}function Ih(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ol={animationend:Ih("Animation","AnimationEnd"),animationiteration:Ih("Animation","AnimationIteration"),animationstart:Ih("Animation","AnimationStart"),transitionend:Ih("Transition","TransitionEnd")},mg={},_k={};Hi&&(_k=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Qp(t){if(mg[t])return mg[t];if(!ol[t])return t;var e=ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _k)return mg[t]=e[n];return t}var Ek=Qp("animationend"),Tk=Qp("animationiteration"),Ik=Qp("animationstart"),Sk=Qp("transitionend"),bk=new Map,IE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){bk.set(t,e),Ca(e,[t])}for(var gg=0;gg<IE.length;gg++){var yg=IE[gg],WO=yg.toLowerCase(),qO=yg[0].toUpperCase()+yg.slice(1);ho(WO,"on"+qO)}ho(Ek,"onAnimationEnd");ho(Tk,"onAnimationIteration");ho(Ik,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(Sk,"onTransitionEnd");Ol("onMouseEnter",["mouseout","mouseover"]);Ol("onMouseLeave",["mouseout","mouseover"]);Ol("onPointerEnter",["pointerout","pointerover"]);Ol("onPointerLeave",["pointerout","pointerover"]);Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GO=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function SE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WV(r,e,void 0,t),t.currentTarget=null}function kk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;SE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;SE(i,a,u),s=l}}}if(Of)throw t=Oy,Of=!1,Oy=null,t}function St(t,e){var n=e[qy];n===void 0&&(n=e[qy]=new Set);var r=t+"__bubble";n.has(r)||(Ak(e,t,2,!1),n.add(r))}function vg(t,e,n){var r=0;e&&(r|=4),Ak(n,t,r,e)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Jc(t){if(!t[Sh]){t[Sh]=!0,Ob.forEach(function(n){n!=="selectionchange"&&(GO.has(n)||vg(n,!1,t),vg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sh]||(e[Sh]=!0,vg("selectionchange",!1,e))}}function Ak(t,e,n,r){switch(dk(e)){case 1:var i=oO;break;case 4:i=aO;break;default:i=Nv}n=i.bind(null,e,n,t),i=void 0,!Vy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Jo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Jb(function(){var u=s,c=Av(n),h=[];e:{var p=bk.get(t);if(p!==void 0){var m=Vv,y=t;switch(t){case"keypress":if(rf(n)===0)break e;case"keydown":case"keyup":m=EO;break;case"focusin":y="focus",m=hg;break;case"focusout":y="blur",m=hg;break;case"beforeblur":case"afterblur":m=hg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=fE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SO;break;case Ek:case Tk:case Ik:m=fO;break;case Sk:m=kO;break;case"scroll":m=lO;break;case"wheel":m=PO;break;case"copy":case"cut":case"paste":m=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mE}var v=(e&4)!==0,I=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,E;x!==null;){E=x;var V=E.stateNode;if(E.tag===5&&V!==null&&(E=V,_!==null&&(V=qc(x,_),V!=null&&v.push(Xc(x,V,E)))),I)break;x=x.return}0<v.length&&(p=new m(p,y,null,n,c),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Ny&&(y=n.relatedTarget||n.fromElement)&&(Jo(y)||y[Ki]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Jo(y):null,y!==null&&(I=Ra(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=fE,V="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=mE,V="onPointerLeave",_="onPointerEnter",x="pointer"),I=m==null?p:al(m),E=y==null?p:al(y),p=new v(V,x+"leave",m,n,c),p.target=I,p.relatedTarget=E,V=null,Jo(c)===u&&(v=new v(_,x+"enter",y,n,c),v.target=E,v.relatedTarget=I,V=v),I=V,m&&y)t:{for(v=m,_=y,x=0,E=v;E;E=Wa(E))x++;for(E=0,V=_;V;V=Wa(V))E++;for(;0<x-E;)v=Wa(v),x--;for(;0<E-x;)_=Wa(_),E--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=Wa(v),_=Wa(_)}v=null}else v=null;m!==null&&bE(h,p,m,v,!1),y!==null&&I!==null&&bE(h,I,y,v,!0)}}e:{if(p=u?al(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=jO;else if(vE(p))if(yk)M=UO;else{M=LO;var O=MO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=FO);if(M&&(M=M(t,u))){gk(h,M,n,c);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&ky(p,"number",p.value)}switch(O=u?al(u):window,t){case"focusin":(vE(O)||O.contentEditable==="true")&&(sl=O,Fy=u,xc=null);break;case"focusout":xc=Fy=sl=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,TE(h,n,c);break;case"selectionchange":if($O)break;case"keydown":case"keyup":TE(h,n,c)}var S;if(jv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else il?pk(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(fk&&n.locale!=="ko"&&(il||T!=="onCompositionStart"?T==="onCompositionEnd"&&il&&(S=hk()):(Rs=c,Dv="value"in Rs?Rs.value:Rs.textContent,il=!0)),O=Uf(u,T),0<O.length&&(T=new pE(T,t,null,n,c),h.push({event:T,listeners:O}),S?T.data=S:(S=mk(n),S!==null&&(T.data=S)))),(S=RO?NO(t,n):DO(t,n))&&(u=Uf(u,"onBeforeInput"),0<u.length&&(c=new pE("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=S))}kk(h,e)})}function Xc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qc(t,n),s!=null&&r.unshift(Xc(t,s,i)),s=qc(t,e),s!=null&&r.push(Xc(t,s,i))),t=t.return}return r}function Wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=qc(n,s),l!=null&&o.unshift(Xc(n,l,a))):i||(l=qc(n,s),l!=null&&o.push(Xc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HO=/\r\n?/g,KO=/\u0000|\uFFFD/g;function kE(t){return(typeof t=="string"?t:""+t).replace(HO,`
`).replace(KO,"")}function bh(t,e,n){if(e=kE(e),kE(t)!==e&&n)throw Error(Z(425))}function Bf(){}var By=null,zy=null;function $y(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wy=typeof setTimeout=="function"?setTimeout:void 0,QO=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,YO=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(t){return AE.resolve(null).then(t).catch(JO)}:Wy;function JO(t){setTimeout(function(){throw t})}function xg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kc(e)}function Fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function PE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fu=Math.random().toString(36).slice(2),ci="__reactFiber$"+fu,Zc="__reactProps$"+fu,Ki="__reactContainer$"+fu,qy="__reactEvents$"+fu,XO="__reactListeners$"+fu,ZO="__reactHandles$"+fu;function Jo(t){var e=t[ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ki]||n[ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PE(t);t!==null;){if(n=t[ci])return n;t=PE(t)}return e}t=n,n=t.parentNode}return null}function Cd(t){return t=t[ci]||t[Ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Yp(t){return t[Zc]||null}var Gy=[],ll=-1;function fo(t){return{current:t}}function At(t){0>ll||(t.current=Gy[ll],Gy[ll]=null,ll--)}function wt(t,e){ll++,Gy[ll]=t.current,t.current=e}var Xs={},qn=fo(Xs),lr=fo(!1),da=Xs;function jl(t,e){var n=t.type.contextTypes;if(!n)return Xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ur(t){return t=t.childContextTypes,t!=null}function zf(){At(lr),At(qn)}function CE(t,e,n){if(qn.current!==Xs)throw Error(Z(168));wt(qn,e),wt(lr,n)}function Pk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,MV(t)||"Unknown",i));return Ut({},n,r)}function $f(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xs,da=qn.current,wt(qn,t),wt(lr,lr.current),!0}function RE(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=Pk(t,e,da),r.__reactInternalMemoizedMergedChildContext=t,At(lr),At(qn),wt(qn,t)):At(lr),wt(lr,n)}var Vi=null,Jp=!1,_g=!1;function Ck(t){Vi===null?Vi=[t]:Vi.push(t)}function ej(t){Jp=!0,Ck(t)}function po(){if(!_g&&Vi!==null){_g=!0;var t=0,e=ct;try{var n=Vi;for(ct=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,Jp=!1}catch(i){throw Vi!==null&&(Vi=Vi.slice(t+1)),tk(Pv,po),i}finally{ct=e,_g=!1}}return null}var ul=[],cl=0,Wf=null,qf=0,jr=[],Mr=0,ha=null,ji=1,Mi="";function Oo(t,e){ul[cl++]=qf,ul[cl++]=Wf,Wf=t,qf=e}function Rk(t,e,n){jr[Mr++]=ji,jr[Mr++]=Mi,jr[Mr++]=ha,ha=t;var r=ji;t=Mi;var i=32-Yr(r)-1;r&=~(1<<i),n+=1;var s=32-Yr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-Yr(e)+i|n<<i|r,Mi=s+t}else ji=1<<s|n<<i|r,Mi=t}function Lv(t){t.return!==null&&(Oo(t,1),Rk(t,1,0))}function Fv(t){for(;t===Wf;)Wf=ul[--cl],ul[cl]=null,qf=ul[--cl],ul[cl]=null;for(;t===ha;)ha=jr[--Mr],jr[Mr]=null,Mi=jr[--Mr],jr[Mr]=null,ji=jr[--Mr],jr[Mr]=null}var Tr=null,_r=null,Rt=!1,Qr=null;function Nk(t,e){var n=Fr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tr=t,_r=Fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tr=t,_r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ha!==null?{id:ji,overflow:Mi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tr=t,_r=null,!0):!1;default:return!1}}function Hy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(Rt){var e=_r;if(e){var n=e;if(!NE(t,e)){if(Hy(t))throw Error(Z(418));e=Fs(n.nextSibling);var r=Tr;e&&NE(t,e)?Nk(r,n):(t.flags=t.flags&-4097|2,Rt=!1,Tr=t)}}else{if(Hy(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Rt=!1,Tr=t}}}function DE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tr=t}function kh(t){if(t!==Tr)return!1;if(!Rt)return DE(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$y(t.type,t.memoizedProps)),e&&(e=_r)){if(Hy(t))throw Dk(),Error(Z(418));for(;e;)Nk(t,e),e=Fs(e.nextSibling)}if(DE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_r=Fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_r=null}}else _r=Tr?Fs(t.stateNode.nextSibling):null;return!0}function Dk(){for(var t=_r;t;)t=Fs(t.nextSibling)}function Ml(){_r=Tr=null,Rt=!1}function Uv(t){Qr===null?Qr=[t]:Qr.push(t)}var tj=ns.ReactCurrentBatchConfig;function Hu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Ah(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function VE(t){var e=t._init;return e(t._payload)}function Vk(t){function e(_,x){if(t){var E=_.deletions;E===null?(_.deletions=[x],_.flags|=16):E.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=$s(_,x),_.index=0,_.sibling=null,_}function s(_,x,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<x?(_.flags|=2,x):E):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,E,V){return x===null||x.tag!==6?(x=Ag(E,_.mode,V),x.return=_,x):(x=i(x,E),x.return=_,x)}function l(_,x,E,V){var M=E.type;return M===rl?c(_,x,E.props.children,V,E.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ws&&VE(M)===x.type)?(V=i(x,E.props),V.ref=Hu(_,x,E),V.return=_,V):(V=df(E.type,E.key,E.props,null,_.mode,V),V.ref=Hu(_,x,E),V.return=_,V)}function u(_,x,E,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=Pg(E,_.mode,V),x.return=_,x):(x=i(x,E.children||[]),x.return=_,x)}function c(_,x,E,V,M){return x===null||x.tag!==7?(x=ia(E,_.mode,V,M),x.return=_,x):(x=i(x,E),x.return=_,x)}function h(_,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ag(""+x,_.mode,E),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yh:return E=df(x.type,x.key,x.props,null,_.mode,E),E.ref=Hu(_,null,x),E.return=_,E;case nl:return x=Pg(x,_.mode,E),x.return=_,x;case ws:var V=x._init;return h(_,V(x._payload),E)}if(lc(x)||zu(x))return x=ia(x,_.mode,E,null),x.return=_,x;Ah(_,x)}return null}function p(_,x,E,V){var M=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(_,x,""+E,V);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yh:return E.key===M?l(_,x,E,V):null;case nl:return E.key===M?u(_,x,E,V):null;case ws:return M=E._init,p(_,x,M(E._payload),V)}if(lc(E)||zu(E))return M!==null?null:c(_,x,E,V,null);Ah(_,E)}return null}function m(_,x,E,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return _=_.get(E)||null,a(x,_,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case yh:return _=_.get(V.key===null?E:V.key)||null,l(x,_,V,M);case nl:return _=_.get(V.key===null?E:V.key)||null,u(x,_,V,M);case ws:var O=V._init;return m(_,x,E,O(V._payload),M)}if(lc(V)||zu(V))return _=_.get(E)||null,c(x,_,V,M,null);Ah(x,V)}return null}function y(_,x,E,V){for(var M=null,O=null,S=x,T=x=0,A=null;S!==null&&T<E.length;T++){S.index>T?(A=S,S=null):A=S.sibling;var b=p(_,S,E[T],V);if(b===null){S===null&&(S=A);break}t&&S&&b.alternate===null&&e(_,S),x=s(b,x,T),O===null?M=b:O.sibling=b,O=b,S=A}if(T===E.length)return n(_,S),Rt&&Oo(_,T),M;if(S===null){for(;T<E.length;T++)S=h(_,E[T],V),S!==null&&(x=s(S,x,T),O===null?M=S:O.sibling=S,O=S);return Rt&&Oo(_,T),M}for(S=r(_,S);T<E.length;T++)A=m(S,_,T,E[T],V),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),x=s(A,x,T),O===null?M=A:O.sibling=A,O=A);return t&&S.forEach(function(R){return e(_,R)}),Rt&&Oo(_,T),M}function v(_,x,E,V){var M=zu(E);if(typeof M!="function")throw Error(Z(150));if(E=M.call(E),E==null)throw Error(Z(151));for(var O=M=null,S=x,T=x=0,A=null,b=E.next();S!==null&&!b.done;T++,b=E.next()){S.index>T?(A=S,S=null):A=S.sibling;var R=p(_,S,b.value,V);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(_,S),x=s(R,x,T),O===null?M=R:O.sibling=R,O=R,S=A}if(b.done)return n(_,S),Rt&&Oo(_,T),M;if(S===null){for(;!b.done;T++,b=E.next())b=h(_,b.value,V),b!==null&&(x=s(b,x,T),O===null?M=b:O.sibling=b,O=b);return Rt&&Oo(_,T),M}for(S=r(_,S);!b.done;T++,b=E.next())b=m(S,_,T,b.value,V),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),x=s(b,x,T),O===null?M=b:O.sibling=b,O=b);return t&&S.forEach(function(D){return e(_,D)}),Rt&&Oo(_,T),M}function I(_,x,E,V){if(typeof E=="object"&&E!==null&&E.type===rl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case yh:e:{for(var M=E.key,O=x;O!==null;){if(O.key===M){if(M=E.type,M===rl){if(O.tag===7){n(_,O.sibling),x=i(O,E.props.children),x.return=_,_=x;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ws&&VE(M)===O.type){n(_,O.sibling),x=i(O,E.props),x.ref=Hu(_,O,E),x.return=_,_=x;break e}n(_,O);break}else e(_,O);O=O.sibling}E.type===rl?(x=ia(E.props.children,_.mode,V,E.key),x.return=_,_=x):(V=df(E.type,E.key,E.props,null,_.mode,V),V.ref=Hu(_,x,E),V.return=_,_=V)}return o(_);case nl:e:{for(O=E.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(_,x.sibling),x=i(x,E.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=Pg(E,_.mode,V),x.return=_,_=x}return o(_);case ws:return O=E._init,I(_,x,O(E._payload),V)}if(lc(E))return y(_,x,E,V);if(zu(E))return v(_,x,E,V);Ah(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,E),x.return=_,_=x):(n(_,x),x=Ag(E,_.mode,V),x.return=_,_=x),o(_)):n(_,x)}return I}var Ll=Vk(!0),Ok=Vk(!1),Gf=fo(null),Hf=null,dl=null,Bv=null;function zv(){Bv=dl=Hf=null}function $v(t){var e=Gf.current;At(Gf),t._currentValue=e}function Qy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tl(t,e){Hf=t,Bv=dl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function Br(t){var e=t._currentValue;if(Bv!==t)if(t={context:t,memoizedValue:e,next:null},dl===null){if(Hf===null)throw Error(Z(308));dl=t,Hf.dependencies={lanes:0,firstContext:t}}else dl=dl.next=t;return e}var Xo=null;function Wv(t){Xo===null?Xo=[t]:Xo.push(t)}function jk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Wv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qi(t,r)}function Qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function qv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qi(t,n)}return i=r.interleaved,i===null?(e.next=e,Wv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qi(t,n)}function sf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cv(t,n)}}function OE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kf(t,e,n,r){var i=t.updateQueue;xs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=Ut({},h,p);break e;case 2:xs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pa|=o,t.lanes=o,t.memoizedState=h}}function jE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Rd={},yi=fo(Rd),ed=fo(Rd),td=fo(Rd);function Zo(t){if(t===Rd)throw Error(Z(174));return t}function Gv(t,e){switch(wt(td,e),wt(ed,t),wt(yi,Rd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Py(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Py(e,t)}At(yi),wt(yi,e)}function Fl(){At(yi),At(ed),At(td)}function Lk(t){Zo(td.current);var e=Zo(yi.current),n=Py(e,t.type);e!==n&&(wt(ed,t),wt(yi,n))}function Hv(t){ed.current===t&&(At(yi),At(ed))}var Mt=fo(0);function Qf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eg=[];function Kv(){for(var t=0;t<Eg.length;t++)Eg[t]._workInProgressVersionPrimary=null;Eg.length=0}var of=ns.ReactCurrentDispatcher,Tg=ns.ReactCurrentBatchConfig,fa=0,Ft=null,hn=null,xn=null,Yf=!1,_c=!1,nd=0,nj=0;function Mn(){throw Error(Z(321))}function Qv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ei(t[n],e[n]))return!1;return!0}function Yv(t,e,n,r,i,s){if(fa=s,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,of.current=t===null||t.memoizedState===null?oj:aj,t=n(r,i),_c){s=0;do{if(_c=!1,nd=0,25<=s)throw Error(Z(301));s+=1,xn=hn=null,e.updateQueue=null,of.current=lj,t=n(r,i)}while(_c)}if(of.current=Jf,e=hn!==null&&hn.next!==null,fa=0,xn=hn=Ft=null,Yf=!1,e)throw Error(Z(300));return t}function Jv(){var t=nd!==0;return nd=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Ft.memoizedState=xn=t:xn=xn.next=t,xn}function zr(){if(hn===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=hn.next;var e=xn===null?Ft.memoizedState:xn.next;if(e!==null)xn=e,hn=t;else{if(t===null)throw Error(Z(310));hn=t,t={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},xn===null?Ft.memoizedState=xn=t:xn=xn.next=t}return xn}function rd(t,e){return typeof e=="function"?e(t):e}function Ig(t){var e=zr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=hn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((fa&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ft.lanes|=c,pa|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ei(r,e.memoizedState)||(ir=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ft.lanes|=s,pa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sg(t){var e=zr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ei(s,e.memoizedState)||(ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Fk(){}function Uk(t,e){var n=Ft,r=zr(),i=e(),s=!ei(r.memoizedState,i);if(s&&(r.memoizedState=i,ir=!0),r=r.queue,Xv($k.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xn!==null&&xn.memoizedState.tag&1){if(n.flags|=2048,id(9,zk.bind(null,n,r,i,e),void 0,null),En===null)throw Error(Z(349));fa&30||Bk(n,e,i)}return i}function Bk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zk(t,e,n,r){e.value=n,e.getSnapshot=r,Wk(e)&&qk(t)}function $k(t,e,n){return n(function(){Wk(e)&&qk(t)})}function Wk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ei(t,n)}catch{return!0}}function qk(t){var e=Qi(t,1);e!==null&&Jr(e,t,1,-1)}function ME(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rd,lastRenderedState:t},e.queue=t,t=t.dispatch=sj.bind(null,Ft,t),[e.memoizedState,t]}function id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gk(){return zr().memoizedState}function af(t,e,n,r){var i=li();Ft.flags|=t,i.memoizedState=id(1|e,n,void 0,r===void 0?null:r)}function Xp(t,e,n,r){var i=zr();r=r===void 0?null:r;var s=void 0;if(hn!==null){var o=hn.memoizedState;if(s=o.destroy,r!==null&&Qv(r,o.deps)){i.memoizedState=id(e,n,s,r);return}}Ft.flags|=t,i.memoizedState=id(1|e,n,s,r)}function LE(t,e){return af(8390656,8,t,e)}function Xv(t,e){return Xp(2048,8,t,e)}function Hk(t,e){return Xp(4,2,t,e)}function Kk(t,e){return Xp(4,4,t,e)}function Qk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yk(t,e,n){return n=n!=null?n.concat([t]):null,Xp(4,4,Qk.bind(null,e,t),n)}function Zv(){}function Jk(t,e){var n=zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xk(t,e){var n=zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zk(t,e,n){return fa&21?(ei(n,e)||(n=ik(),Ft.lanes|=n,pa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=n)}function rj(t,e){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var r=Tg.transition;Tg.transition={};try{t(!1),e()}finally{ct=n,Tg.transition=r}}function eA(){return zr().memoizedState}function ij(t,e,n){var r=zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tA(t))nA(e,n);else if(n=jk(t,e,n,r),n!==null){var i=Xn();Jr(n,t,r,i),rA(n,e,r)}}function sj(t,e,n){var r=zs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tA(t))nA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ei(a,o)){var l=e.interleaved;l===null?(i.next=i,Wv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=jk(t,e,i,r),n!==null&&(i=Xn(),Jr(n,t,r,i),rA(n,e,r))}}function tA(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function nA(t,e){_c=Yf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cv(t,n)}}var Jf={readContext:Br,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},oj={readContext:Br,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:Br,useEffect:LE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,af(4194308,4,Qk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return af(4194308,4,t,e)},useInsertionEffect:function(t,e){return af(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=li();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ij.bind(null,Ft,t),[r.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:ME,useDebugValue:Zv,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=ME(!1),e=t[0];return t=rj.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ft,i=li();if(Rt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),En===null)throw Error(Z(349));fa&30||Bk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,LE($k.bind(null,r,s,t),[t]),r.flags|=2048,id(9,zk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=li(),e=En.identifierPrefix;if(Rt){var n=Mi,r=ji;n=(r&~(1<<32-Yr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aj={readContext:Br,useCallback:Jk,useContext:Br,useEffect:Xv,useImperativeHandle:Yk,useInsertionEffect:Hk,useLayoutEffect:Kk,useMemo:Xk,useReducer:Ig,useRef:Gk,useState:function(){return Ig(rd)},useDebugValue:Zv,useDeferredValue:function(t){var e=zr();return Zk(e,hn.memoizedState,t)},useTransition:function(){var t=Ig(rd)[0],e=zr().memoizedState;return[t,e]},useMutableSource:Fk,useSyncExternalStore:Uk,useId:eA,unstable_isNewReconciler:!1},lj={readContext:Br,useCallback:Jk,useContext:Br,useEffect:Xv,useImperativeHandle:Yk,useInsertionEffect:Hk,useLayoutEffect:Kk,useMemo:Xk,useReducer:Sg,useRef:Gk,useState:function(){return Sg(rd)},useDebugValue:Zv,useDeferredValue:function(t){var e=zr();return hn===null?e.memoizedState=t:Zk(e,hn.memoizedState,t)},useTransition:function(){var t=Sg(rd)[0],e=zr().memoizedState;return[t,e]},useMutableSource:Fk,useSyncExternalStore:Uk,useId:eA,unstable_isNewReconciler:!1};function Hr(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zp={isMounted:function(t){return(t=t._reactInternals)?Ra(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xn(),i=zs(t),s=Wi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Us(t,s,i),e!==null&&(Jr(e,t,i,r),sf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xn(),i=zs(t),s=Wi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Us(t,s,i),e!==null&&(Jr(e,t,i,r),sf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xn(),r=zs(t),i=Wi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Us(t,i,r),e!==null&&(Jr(e,t,r,n),sf(e,t,r))}};function FE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yc(n,r)||!Yc(i,s):!0}function iA(t,e,n){var r=!1,i=Xs,s=e.contextType;return typeof s=="object"&&s!==null?s=Br(s):(i=ur(e)?da:qn.current,r=e.contextTypes,s=(r=r!=null)?jl(t,i):Xs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function UE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zp.enqueueReplaceState(e,e.state,null)}function Jy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},qv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Br(s):(s=ur(e)?da:qn.current,i.context=jl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zp.enqueueReplaceState(i,i.state,null),Kf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ul(t,e){try{var n="",r=e;do n+=jV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uj=typeof WeakMap=="function"?WeakMap:Map;function sA(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zf||(Zf=!0,l0=r),Xy(t,e)},n}function oA(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xy(t,e),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function BE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tj.bind(null,t,e,n),e.then(t,t))}function zE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $E(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,Us(n,e,1))),n.lanes|=1),t)}var cj=ns.ReactCurrentOwner,ir=!1;function Jn(t,e,n,r){e.child=t===null?Ok(e,null,n,r):Ll(e,t.child,n,r)}function WE(t,e,n,r,i){n=n.render;var s=e.ref;return Tl(e,i),r=Yv(t,e,n,r,s,i),n=Jv(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(Rt&&n&&Lv(e),e.flags|=1,Jn(t,e,r,i),e.child)}function qE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!aw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aA(t,e,s,r,i)):(t=df(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yc,n(o,r)&&t.ref===e.ref)return Yi(t,e,i)}return e.flags|=1,t=$s(s,r),t.ref=e.ref,t.return=e,e.child=t}function aA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Yc(s,r)&&t.ref===e.ref)if(ir=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,Yi(t,e,i)}return Zy(t,e,n,r,i)}function lA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(fl,xr),xr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(fl,xr),xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wt(fl,xr),xr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,wt(fl,xr),xr|=r;return Jn(t,e,i,n),e.child}function uA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zy(t,e,n,r,i){var s=ur(n)?da:qn.current;return s=jl(e,s),Tl(e,i),n=Yv(t,e,n,r,s,i),r=Jv(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(Rt&&r&&Lv(e),e.flags|=1,Jn(t,e,n,i),e.child)}function GE(t,e,n,r,i){if(ur(n)){var s=!0;$f(e)}else s=!1;if(Tl(e,i),e.stateNode===null)lf(t,e),iA(e,n,r),Jy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Br(u):(u=ur(n)?da:qn.current,u=jl(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&UE(e,o,r,u),xs=!1;var p=e.memoizedState;o.state=p,Kf(e,r,o,i),l=e.memoizedState,a!==r||p!==l||lr.current||xs?(typeof c=="function"&&(Yy(e,n,c,r),l=e.memoizedState),(a=xs||FE(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Hr(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Br(l):(l=ur(n)?da:qn.current,l=jl(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&UE(e,o,r,l),xs=!1,p=e.memoizedState,o.state=p,Kf(e,r,o,i);var y=e.memoizedState;a!==h||p!==y||lr.current||xs?(typeof m=="function"&&(Yy(e,n,m,r),y=e.memoizedState),(u=xs||FE(e,n,u,r,p,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return e0(t,e,n,r,s,i)}function e0(t,e,n,r,i,s){uA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&RE(e,n,!1),Yi(t,e,s);r=e.stateNode,cj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ll(e,t.child,null,s),e.child=Ll(e,null,a,s)):Jn(t,e,a,s),e.memoizedState=r.state,i&&RE(e,n,!0),e.child}function cA(t){var e=t.stateNode;e.pendingContext?CE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CE(t,e.context,!1),Gv(t,e.containerInfo)}function HE(t,e,n,r,i){return Ml(),Uv(i),e.flags|=256,Jn(t,e,n,r),e.child}var t0={dehydrated:null,treeContext:null,retryLane:0};function n0(t){return{baseLanes:t,cachePool:null,transitions:null}}function dA(t,e,n){var r=e.pendingProps,i=Mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wt(Mt,i&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nm(o,r,0,null),t=ia(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=n0(n),e.memoizedState=t0,t):ew(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dj(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$s(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$s(a,s):(s=ia(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?n0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=t0,r}return s=t.child,t=s.sibling,r=$s(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ew(t,e){return e=nm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ph(t,e,n,r){return r!==null&&Uv(r),Ll(e,t.child,null,n),t=ew(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dj(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bg(Error(Z(422))),Ph(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nm({mode:"visible",children:r.children},i,0,null),s=ia(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ll(e,t.child,null,o),e.child.memoizedState=n0(o),e.memoizedState=t0,s);if(!(e.mode&1))return Ph(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=bg(s,r,void 0),Ph(t,e,o,r)}if(a=(o&t.childLanes)!==0,ir||a){if(r=En,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qi(t,i),Jr(r,t,i,-1))}return ow(),r=bg(Error(Z(421))),Ph(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ij.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_r=Fs(i.nextSibling),Tr=e,Rt=!0,Qr=null,t!==null&&(jr[Mr++]=ji,jr[Mr++]=Mi,jr[Mr++]=ha,ji=t.id,Mi=t.overflow,ha=e),e=ew(e,r.children),e.flags|=4096,e)}function KE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qy(t.return,e,n)}function kg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function hA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jn(t,e,r.children,n),r=Mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KE(t,n,e);else if(t.tag===19)KE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wt(Mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Qf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kg(e,!0,n,null,s);break;case"together":kg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=$s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hj(t,e,n){switch(e.tag){case 3:cA(e),Ml();break;case 5:Lk(e);break;case 1:ur(e.type)&&$f(e);break;case 4:Gv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wt(Gf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wt(Mt,Mt.current&1),e.flags|=128,null):n&e.child.childLanes?dA(t,e,n):(wt(Mt,Mt.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);wt(Mt,Mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Mt,Mt.current),r)break;return null;case 22:case 23:return e.lanes=0,lA(t,e,n)}return Yi(t,e,n)}var fA,r0,pA,mA;fA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};r0=function(){};pA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zo(yi.current);var s=null;switch(n){case"input":i=Sy(t,i),r=Sy(t,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=Ay(t,i),r=Ay(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bf)}Cy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($c.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($c.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&St("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ku(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fj(t,e,n){var r=e.pendingProps;switch(Fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return ur(e.type)&&zf(),Ln(e),null;case 3:return r=e.stateNode,Fl(),At(lr),At(qn),Kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(d0(Qr),Qr=null))),r0(t,e),Ln(e),null;case 5:Hv(e);var i=Zo(td.current);if(n=e.type,t!==null&&e.stateNode!=null)pA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Ln(e),null}if(t=Zo(yi.current),kh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ci]=e,r[Zc]=s,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(i=0;i<cc.length;i++)St(cc[i],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":rE(r,s),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},St("invalid",r);break;case"textarea":sE(r,s),St("invalid",r)}Cy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,t),i=["children",""+a]):$c.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":vh(r),iE(r,s,!0);break;case"textarea":vh(r),oE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$b(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ci]=e,t[Zc]=r,fA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ry(n,r),n){case"dialog":St("cancel",t),St("close",t),i=r;break;case"iframe":case"object":case"embed":St("load",t),i=r;break;case"video":case"audio":for(i=0;i<cc.length;i++)St(cc[i],t);i=r;break;case"source":St("error",t),i=r;break;case"img":case"image":case"link":St("error",t),St("load",t),i=r;break;case"details":St("toggle",t),i=r;break;case"input":rE(t,r),i=Sy(t,r),St("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),St("invalid",t);break;case"textarea":sE(t,r),i=Ay(t,r),St("invalid",t);break;default:i=r}Cy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Gb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Wb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wc(t,l):typeof l=="number"&&Wc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($c.hasOwnProperty(s)?l!=null&&s==="onScroll"&&St("scroll",t):l!=null&&Iv(t,s,l,o))}switch(n){case"input":vh(t),iE(t,r,!1);break;case"textarea":vh(t),oE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Js(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wl(t,!!r.multiple,s,!1):r.defaultValue!=null&&wl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)mA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Zo(td.current),Zo(yi.current),kh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ci]=e,(s=r.nodeValue!==n)&&(t=Tr,t!==null))switch(t.tag){case 3:bh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ci]=e,e.stateNode=r}return Ln(e),null;case 13:if(At(Mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&_r!==null&&e.mode&1&&!(e.flags&128))Dk(),Ml(),e.flags|=98560,s=!1;else if(s=kh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[ci]=e}else Ml(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),s=!1}else Qr!==null&&(d0(Qr),Qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Mt.current&1?fn===0&&(fn=3):ow())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return Fl(),r0(t,e),t===null&&Jc(e.stateNode.containerInfo),Ln(e),null;case 10:return $v(e.type._context),Ln(e),null;case 17:return ur(e.type)&&zf(),Ln(e),null;case 19:if(At(Mt),s=e.memoizedState,s===null)return Ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ku(s,!1);else{if(fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qf(t),o!==null){for(e.flags|=128,Ku(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wt(Mt,Mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Jt()>Bl&&(e.flags|=128,r=!0,Ku(s,!1),e.lanes=4194304)}else{if(!r)if(t=Qf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ku(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rt)return Ln(e),null}else 2*Jt()-s.renderingStartTime>Bl&&n!==1073741824&&(e.flags|=128,r=!0,Ku(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,n=Mt.current,wt(Mt,r?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return sw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xr&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function pj(t,e){switch(Fv(e),e.tag){case 1:return ur(e.type)&&zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fl(),At(lr),At(qn),Kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hv(e),null;case 13:if(At(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(Mt),null;case 4:return Fl(),null;case 10:return $v(e.type._context),null;case 22:case 23:return sw(),null;case 24:return null;default:return null}}var Ch=!1,zn=!1,mj=typeof WeakSet=="function"?WeakSet:Set,me=null;function hl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(t,e,r)}else n.current=null}function i0(t,e,n){try{n()}catch(r){$t(t,e,r)}}var QE=!1;function gj(t,e){if(By=Lf,t=xk(),Mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++c===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zy={focusedElem:t,selectionRange:n},Lf=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,I=y.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hr(e.type,v),I);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(V){$t(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return y=QE,QE=!1,y}function Ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&i0(e,n,s)}i=i.next}while(i!==r)}}function em(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function s0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gA(t){var e=t.alternate;e!==null&&(t.alternate=null,gA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ci],delete e[Zc],delete e[qy],delete e[XO],delete e[ZO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yA(t){return t.tag===5||t.tag===3||t.tag===4}function YE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function o0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bf));else if(r!==4&&(t=t.child,t!==null))for(o0(t,e,n),t=t.sibling;t!==null;)o0(t,e,n),t=t.sibling}function a0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(a0(t,e,n),t=t.sibling;t!==null;)a0(t,e,n),t=t.sibling}var bn=null,Kr=!1;function hs(t,e,n){for(n=n.child;n!==null;)vA(t,e,n),n=n.sibling}function vA(t,e,n){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(Gp,n)}catch{}switch(n.tag){case 5:zn||hl(n,e);case 6:var r=bn,i=Kr;bn=null,hs(t,e,n),bn=r,Kr=i,bn!==null&&(Kr?(t=bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bn.removeChild(n.stateNode));break;case 18:bn!==null&&(Kr?(t=bn,n=n.stateNode,t.nodeType===8?xg(t.parentNode,n):t.nodeType===1&&xg(t,n),Kc(t)):xg(bn,n.stateNode));break;case 4:r=bn,i=Kr,bn=n.stateNode.containerInfo,Kr=!0,hs(t,e,n),bn=r,Kr=i;break;case 0:case 11:case 14:case 15:if(!zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&i0(n,e,o),i=i.next}while(i!==r)}hs(t,e,n);break;case 1:if(!zn&&(hl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$t(n,e,a)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(zn=(r=zn)||n.memoizedState!==null,hs(t,e,n),zn=r):hs(t,e,n);break;default:hs(t,e,n)}}function JE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mj),e.forEach(function(r){var i=Sj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bn=a.stateNode,Kr=!1;break e;case 3:bn=a.stateNode.containerInfo,Kr=!0;break e;case 4:bn=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(bn===null)throw Error(Z(160));vA(s,o,i),bn=null,Kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$t(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wA(e,t),e=e.sibling}function wA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),ai(t),r&4){try{Ec(3,t,t.return),em(3,t)}catch(v){$t(t,t.return,v)}try{Ec(5,t,t.return)}catch(v){$t(t,t.return,v)}}break;case 1:Gr(e,t),ai(t),r&512&&n!==null&&hl(n,n.return);break;case 5:if(Gr(e,t),ai(t),r&512&&n!==null&&hl(n,n.return),t.flags&32){var i=t.stateNode;try{Wc(i,"")}catch(v){$t(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Bb(i,s),Ry(a,o);var u=Ry(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Gb(i,h):c==="dangerouslySetInnerHTML"?Wb(i,h):c==="children"?Wc(i,h):Iv(i,c,h,u)}switch(a){case"input":by(i,s);break;case"textarea":zb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?wl(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?wl(i,!!s.multiple,s.defaultValue,!0):wl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zc]=s}catch(v){$t(t,t.return,v)}}break;case 6:if(Gr(e,t),ai(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){$t(t,t.return,v)}}break;case 3:if(Gr(e,t),ai(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(v){$t(t,t.return,v)}break;case 4:Gr(e,t),ai(t);break;case 13:Gr(e,t),ai(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rw=Jt())),r&4&&JE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(u=zn)||c,Gr(e,t),zn=u):Gr(e,t),ai(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(me=t,c=t.child;c!==null;){for(h=me=c;me!==null;){switch(p=me,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ec(4,p,p.return);break;case 1:hl(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){$t(r,n,v)}}break;case 5:hl(p,p.return);break;case 22:if(p.memoizedState!==null){ZE(h);continue}}m!==null?(m.return=p,me=m):ZE(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qb("display",o))}catch(v){$t(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){$t(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gr(e,t),ai(t),r&4&&JE(t);break;case 21:break;default:Gr(e,t),ai(t)}}function ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yA(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wc(i,""),r.flags&=-33);var s=YE(t);a0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YE(t);o0(t,a,o);break;default:throw Error(Z(161))}}catch(l){$t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yj(t,e,n){me=t,xA(t)}function xA(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var i=me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ch;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zn;a=Ch;var u=zn;if(Ch=o,(zn=l)&&!u)for(me=i;me!==null;)o=me,l=o.child,o.tag===22&&o.memoizedState!==null?eT(i):l!==null?(l.return=o,me=l):eT(i);for(;s!==null;)me=s,xA(s),s=s.sibling;me=i,Ch=a,zn=u}XE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,me=s):XE(t)}}function XE(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||em(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Kc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}zn||e.flags&512&&s0(e)}catch(p){$t(e,e.return,p)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function ZE(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function eT(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{em(4,e)}catch(l){$t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){$t(e,i,l)}}var s=e.return;try{s0(e)}catch(l){$t(e,s,l)}break;case 5:var o=e.return;try{s0(e)}catch(l){$t(e,o,l)}}}catch(l){$t(e,e.return,l)}if(e===t){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var vj=Math.ceil,Xf=ns.ReactCurrentDispatcher,tw=ns.ReactCurrentOwner,Ur=ns.ReactCurrentBatchConfig,et=0,En=null,un=null,Pn=0,xr=0,fl=fo(0),fn=0,sd=null,pa=0,tm=0,nw=0,Tc=null,rr=null,rw=0,Bl=1/0,Di=null,Zf=!1,l0=null,Bs=null,Rh=!1,Ns=null,ep=0,Ic=0,u0=null,uf=-1,cf=0;function Xn(){return et&6?Jt():uf!==-1?uf:uf=Jt()}function zs(t){return t.mode&1?et&2&&Pn!==0?Pn&-Pn:tj.transition!==null?(cf===0&&(cf=ik()),cf):(t=ct,t!==0||(t=window.event,t=t===void 0?16:dk(t.type)),t):1}function Jr(t,e,n,r){if(50<Ic)throw Ic=0,u0=null,Error(Z(185));Ad(t,n,r),(!(et&2)||t!==En)&&(t===En&&(!(et&2)&&(tm|=n),fn===4&&Is(t,Pn)),cr(t,r),n===1&&et===0&&!(e.mode&1)&&(Bl=Jt()+500,Jp&&po()))}function cr(t,e){var n=t.callbackNode;tO(t,e);var r=Mf(t,t===En?Pn:0);if(r===0)n!==null&&uE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uE(n),e===1)t.tag===0?ej(tT.bind(null,t)):Ck(tT.bind(null,t)),YO(function(){!(et&6)&&po()}),n=null;else{switch(sk(r)){case 1:n=Pv;break;case 4:n=nk;break;case 16:n=jf;break;case 536870912:n=rk;break;default:n=jf}n=AA(n,_A.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _A(t,e){if(uf=-1,cf=0,et&6)throw Error(Z(327));var n=t.callbackNode;if(Il()&&t.callbackNode!==n)return null;var r=Mf(t,t===En?Pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tp(t,r);else{e=r;var i=et;et|=2;var s=TA();(En!==t||Pn!==e)&&(Di=null,Bl=Jt()+500,ra(t,e));do try{_j();break}catch(a){EA(t,a)}while(!0);zv(),Xf.current=s,et=i,un!==null?e=0:(En=null,Pn=0,e=fn)}if(e!==0){if(e===2&&(i=jy(t),i!==0&&(r=i,e=c0(t,i))),e===1)throw n=sd,ra(t,0),Is(t,r),cr(t,Jt()),n;if(e===6)Is(t,r);else{if(i=t.current.alternate,!(r&30)&&!wj(i)&&(e=tp(t,r),e===2&&(s=jy(t),s!==0&&(r=s,e=c0(t,s))),e===1))throw n=sd,ra(t,0),Is(t,r),cr(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:jo(t,rr,Di);break;case 3:if(Is(t,r),(r&130023424)===r&&(e=rw+500-Jt(),10<e)){if(Mf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wy(jo.bind(null,t,rr,Di),e);break}jo(t,rr,Di);break;case 4:if(Is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vj(r/1960))-r,10<r){t.timeoutHandle=Wy(jo.bind(null,t,rr,Di),r);break}jo(t,rr,Di);break;case 5:jo(t,rr,Di);break;default:throw Error(Z(329))}}}return cr(t,Jt()),t.callbackNode===n?_A.bind(null,t):null}function c0(t,e){var n=Tc;return t.current.memoizedState.isDehydrated&&(ra(t,e).flags|=256),t=tp(t,e),t!==2&&(e=rr,rr=n,e!==null&&d0(e)),t}function d0(t){rr===null?rr=t:rr.push.apply(rr,t)}function wj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ei(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(t,e){for(e&=~nw,e&=~tm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yr(e),r=1<<n;t[n]=-1,e&=~r}}function tT(t){if(et&6)throw Error(Z(327));Il();var e=Mf(t,0);if(!(e&1))return cr(t,Jt()),null;var n=tp(t,e);if(t.tag!==0&&n===2){var r=jy(t);r!==0&&(e=r,n=c0(t,r))}if(n===1)throw n=sd,ra(t,0),Is(t,e),cr(t,Jt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jo(t,rr,Di),cr(t,Jt()),null}function iw(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(Bl=Jt()+500,Jp&&po())}}function ma(t){Ns!==null&&Ns.tag===0&&!(et&6)&&Il();var e=et;et|=1;var n=Ur.transition,r=ct;try{if(Ur.transition=null,ct=1,t)return t()}finally{ct=r,Ur.transition=n,et=e,!(et&6)&&po()}}function sw(){xr=fl.current,At(fl)}function ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QO(n)),un!==null)for(n=un.return;n!==null;){var r=n;switch(Fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zf();break;case 3:Fl(),At(lr),At(qn),Kv();break;case 5:Hv(r);break;case 4:Fl();break;case 13:At(Mt);break;case 19:At(Mt);break;case 10:$v(r.type._context);break;case 22:case 23:sw()}n=n.return}if(En=t,un=t=$s(t.current,null),Pn=xr=e,fn=0,sd=null,nw=tm=pa=0,rr=Tc=null,Xo!==null){for(e=0;e<Xo.length;e++)if(n=Xo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xo=null}return t}function EA(t,e){do{var n=un;try{if(zv(),of.current=Jf,Yf){for(var r=Ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yf=!1}if(fa=0,xn=hn=Ft=null,_c=!1,nd=0,tw.current=null,n===null||n.return===null){fn=1,sd=e,un=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=zE(o);if(m!==null){m.flags&=-257,$E(m,o,a,s,e),m.mode&1&&BE(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){BE(s,u,e),ow();break e}l=Error(Z(426))}}else if(Rt&&a.mode&1){var I=zE(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),$E(I,o,a,s,e),Uv(Ul(l,a));break e}}s=l=Ul(l,a),fn!==4&&(fn=2),Tc===null?Tc=[s]:Tc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=sA(s,l,e);OE(s,_);break e;case 1:a=l;var x=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Bs===null||!Bs.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=oA(s,a,e);OE(s,V);break e}}s=s.return}while(s!==null)}SA(n)}catch(M){e=M,un===n&&n!==null&&(un=n=n.return);continue}break}while(!0)}function TA(){var t=Xf.current;return Xf.current=Jf,t===null?Jf:t}function ow(){(fn===0||fn===3||fn===2)&&(fn=4),En===null||!(pa&268435455)&&!(tm&268435455)||Is(En,Pn)}function tp(t,e){var n=et;et|=2;var r=TA();(En!==t||Pn!==e)&&(Di=null,ra(t,e));do try{xj();break}catch(i){EA(t,i)}while(!0);if(zv(),et=n,Xf.current=r,un!==null)throw Error(Z(261));return En=null,Pn=0,fn}function xj(){for(;un!==null;)IA(un)}function _j(){for(;un!==null&&!GV();)IA(un)}function IA(t){var e=kA(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?SA(t):un=e,tw.current=null}function SA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pj(n,e),n!==null){n.flags&=32767,un=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fn=6,un=null;return}}else if(n=fj(n,e,xr),n!==null){un=n;return}if(e=e.sibling,e!==null){un=e;return}un=e=t}while(e!==null);fn===0&&(fn=5)}function jo(t,e,n){var r=ct,i=Ur.transition;try{Ur.transition=null,ct=1,Ej(t,e,n,r)}finally{Ur.transition=i,ct=r}return null}function Ej(t,e,n,r){do Il();while(Ns!==null);if(et&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nO(t,s),t===En&&(un=En=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rh||(Rh=!0,AA(jf,function(){return Il(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ur.transition,Ur.transition=null;var o=ct;ct=1;var a=et;et|=4,tw.current=null,gj(t,n),wA(n,t),zO(zy),Lf=!!By,zy=By=null,t.current=n,yj(n),HV(),et=a,ct=o,Ur.transition=s}else t.current=n;if(Rh&&(Rh=!1,Ns=t,ep=i),s=t.pendingLanes,s===0&&(Bs=null),YV(n.stateNode),cr(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zf)throw Zf=!1,t=l0,l0=null,t;return ep&1&&t.tag!==0&&Il(),s=t.pendingLanes,s&1?t===u0?Ic++:(Ic=0,u0=t):Ic=0,po(),null}function Il(){if(Ns!==null){var t=sk(ep),e=Ur.transition,n=ct;try{if(Ur.transition=null,ct=16>t?16:t,Ns===null)var r=!1;else{if(t=Ns,Ns=null,ep=0,et&6)throw Error(Z(331));var i=et;for(et|=4,me=t.current;me!==null;){var s=me,o=s.child;if(me.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(me=u;me!==null;){var c=me;switch(c.tag){case 0:case 11:case 15:Ec(8,c,s)}var h=c.child;if(h!==null)h.return=c,me=h;else for(;me!==null;){c=me;var p=c.sibling,m=c.return;if(gA(c),c===u){me=null;break}if(p!==null){p.return=m,me=p;break}me=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var I=v.sibling;v.sibling=null,v=I}while(v!==null)}}me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,me=o;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ec(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,me=_;break e}me=s.return}}var x=t.current;for(me=x;me!==null;){o=me;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,me=E;else e:for(o=x;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:em(9,a)}}catch(M){$t(a,a.return,M)}if(a===o){me=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,me=V;break e}me=a.return}}if(et=i,po(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(Gp,t)}catch{}r=!0}return r}finally{ct=n,Ur.transition=e}}return!1}function nT(t,e,n){e=Ul(n,e),e=sA(t,e,1),t=Us(t,e,1),e=Xn(),t!==null&&(Ad(t,1,e),cr(t,e))}function $t(t,e,n){if(t.tag===3)nT(t,t,n);else for(;e!==null;){if(e.tag===3){nT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){t=Ul(n,t),t=oA(e,t,1),e=Us(e,t,1),t=Xn(),e!==null&&(Ad(e,1,t),cr(e,t));break}}e=e.return}}function Tj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xn(),t.pingedLanes|=t.suspendedLanes&n,En===t&&(Pn&n)===n&&(fn===4||fn===3&&(Pn&130023424)===Pn&&500>Jt()-rw?ra(t,0):nw|=n),cr(t,e)}function bA(t,e){e===0&&(t.mode&1?(e=_h,_h<<=1,!(_h&130023424)&&(_h=4194304)):e=1);var n=Xn();t=Qi(t,e),t!==null&&(Ad(t,e,n),cr(t,n))}function Ij(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bA(t,n)}function Sj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),bA(t,n)}var kA;kA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||lr.current)ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ir=!1,hj(t,e,n);ir=!!(t.flags&131072)}else ir=!1,Rt&&e.flags&1048576&&Rk(e,qf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lf(t,e),t=e.pendingProps;var i=jl(e,qn.current);Tl(e,n),i=Yv(null,e,r,t,i,n);var s=Jv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ur(r)?(s=!0,$f(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qv(e),i.updater=Zp,e.stateNode=i,i._reactInternals=e,Jy(e,r,t,n),e=e0(null,e,r,!0,s,n)):(e.tag=0,Rt&&s&&Lv(e),Jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kj(r),t=Hr(r,t),i){case 0:e=Zy(null,e,r,t,n);break e;case 1:e=GE(null,e,r,t,n);break e;case 11:e=WE(null,e,r,t,n);break e;case 14:e=qE(null,e,r,Hr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),Zy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),GE(t,e,r,i,n);case 3:e:{if(cA(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mk(t,e),Kf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ul(Error(Z(423)),e),e=HE(t,e,r,n,i);break e}else if(r!==i){i=Ul(Error(Z(424)),e),e=HE(t,e,r,n,i);break e}else for(_r=Fs(e.stateNode.containerInfo.firstChild),Tr=e,Rt=!0,Qr=null,n=Ok(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ml(),r===i){e=Yi(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return Lk(e),t===null&&Ky(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$y(r,i)?o=null:s!==null&&$y(r,s)&&(e.flags|=32),uA(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return dA(t,e,n);case 4:return Gv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ll(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),WE(t,e,r,i,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wt(Gf,r._currentValue),r._currentValue=o,s!==null)if(ei(s.value,o)){if(s.children===i.children&&!lr.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Tl(e,n),i=Br(i),r=r(i),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,i=Hr(r,e.pendingProps),i=Hr(r.type,i),qE(t,e,r,i,n);case 15:return aA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),lf(t,e),e.tag=1,ur(r)?(t=!0,$f(e)):t=!1,Tl(e,n),iA(e,r,i),Jy(e,r,i,n),e0(null,e,r,!0,t,n);case 19:return hA(t,e,n);case 22:return lA(t,e,n)}throw Error(Z(156,e.tag))};function AA(t,e){return tk(t,e)}function bj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,n,r){return new bj(t,e,n,r)}function aw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kj(t){if(typeof t=="function")return aw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bv)return 11;if(t===kv)return 14}return 2}function $s(t,e){var n=t.alternate;return n===null?(n=Fr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function df(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")aw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rl:return ia(n.children,i,s,e);case Sv:o=8,i|=8;break;case _y:return t=Fr(12,n,e,i|2),t.elementType=_y,t.lanes=s,t;case Ey:return t=Fr(13,n,e,i),t.elementType=Ey,t.lanes=s,t;case Ty:return t=Fr(19,n,e,i),t.elementType=Ty,t.lanes=s,t;case Lb:return nm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jb:o=10;break e;case Mb:o=9;break e;case bv:o=11;break e;case kv:o=14;break e;case ws:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Fr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ia(t,e,n,r){return t=Fr(7,t,r,e),t.lanes=n,t}function nm(t,e,n,r){return t=Fr(22,t,r,e),t.elementType=Lb,t.lanes=n,t.stateNode={isHidden:!1},t}function Ag(t,e,n){return t=Fr(6,t,null,e),t.lanes=n,t}function Pg(t,e,n){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Aj(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ug(0),this.expirationTimes=ug(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ug(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lw(t,e,n,r,i,s,o,a,l){return t=new Aj(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qv(s),t}function Pj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PA(t){if(!t)return Xs;t=t._reactInternals;e:{if(Ra(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ur(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(ur(n))return Pk(t,n,e)}return e}function CA(t,e,n,r,i,s,o,a,l){return t=lw(n,r,!0,t,i,s,o,a,l),t.context=PA(null),n=t.current,r=Xn(),i=zs(n),s=Wi(r,i),s.callback=e??null,Us(n,s,i),t.current.lanes=i,Ad(t,i,r),cr(t,r),t}function rm(t,e,n,r){var i=e.current,s=Xn(),o=zs(i);return n=PA(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Us(i,e,o),t!==null&&(Jr(t,i,o,s),sf(t,i,o)),o}function np(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uw(t,e){rT(t,e),(t=t.alternate)&&rT(t,e)}function Cj(){return null}var RA=typeof reportError=="function"?reportError:function(t){console.error(t)};function cw(t){this._internalRoot=t}im.prototype.render=cw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));rm(t,e,null,null)};im.prototype.unmount=cw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ma(function(){rm(null,t,null,null)}),e[Ki]=null}};function im(t){this._internalRoot=t}im.prototype.unstable_scheduleHydration=function(t){if(t){var e=lk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ts.length&&e!==0&&e<Ts[n].priority;n++);Ts.splice(n,0,t),n===0&&ck(t)}};function dw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iT(){}function Rj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=np(o);s.call(u)}}var o=CA(e,r,t,0,null,!1,!1,"",iT);return t._reactRootContainer=o,t[Ki]=o.current,Jc(t.nodeType===8?t.parentNode:t),ma(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=np(l);a.call(u)}}var l=lw(t,0,!1,null,null,!1,!1,"",iT);return t._reactRootContainer=l,t[Ki]=l.current,Jc(t.nodeType===8?t.parentNode:t),ma(function(){rm(e,l,n,r)}),l}function om(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=np(o);a.call(l)}}rm(e,o,t,i)}else o=Rj(n,e,t,i,r);return np(o)}ok=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uc(e.pendingLanes);n!==0&&(Cv(e,n|1),cr(e,Jt()),!(et&6)&&(Bl=Jt()+500,po()))}break;case 13:ma(function(){var r=Qi(t,1);if(r!==null){var i=Xn();Jr(r,t,1,i)}}),uw(t,1)}};Rv=function(t){if(t.tag===13){var e=Qi(t,134217728);if(e!==null){var n=Xn();Jr(e,t,134217728,n)}uw(t,134217728)}};ak=function(t){if(t.tag===13){var e=zs(t),n=Qi(t,e);if(n!==null){var r=Xn();Jr(n,t,e,r)}uw(t,e)}};lk=function(){return ct};uk=function(t,e){var n=ct;try{return ct=t,e()}finally{ct=n}};Dy=function(t,e,n){switch(e){case"input":if(by(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yp(r);if(!i)throw Error(Z(90));Ub(r),by(r,i)}}}break;case"textarea":zb(t,n);break;case"select":e=n.value,e!=null&&wl(t,!!n.multiple,e,!1)}};Qb=iw;Yb=ma;var Nj={usingClientEntryPoint:!1,Events:[Cd,al,Yp,Hb,Kb,iw]},Qu={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dj={bundleType:Qu.bundleType,version:Qu.version,rendererPackageName:Qu.rendererPackageName,rendererConfig:Qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zb(t),t===null?null:t.stateNode},findFiberByHostInstance:Qu.findFiberByHostInstance||Cj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{Gp=Nh.inject(Dj),gi=Nh}catch{}}Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nj;Ar.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dw(e))throw Error(Z(200));return Pj(t,e,null,n)};Ar.createRoot=function(t,e){if(!dw(t))throw Error(Z(299));var n=!1,r="",i=RA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lw(t,1,!1,null,null,n,!1,r,i),t[Ki]=e.current,Jc(t.nodeType===8?t.parentNode:t),new cw(e)};Ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Zb(e),t=t===null?null:t.stateNode,t};Ar.flushSync=function(t){return ma(t)};Ar.hydrate=function(t,e,n){if(!sm(e))throw Error(Z(200));return om(null,t,e,!0,n)};Ar.hydrateRoot=function(t,e,n){if(!dw(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CA(e,null,t,1,n??null,i,!1,s,o),t[Ki]=e.current,Jc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new im(e)};Ar.render=function(t,e,n){if(!sm(e))throw Error(Z(200));return om(null,t,e,!1,n)};Ar.unmountComponentAtNode=function(t){if(!sm(t))throw Error(Z(40));return t._reactRootContainer?(ma(function(){om(null,null,t,!1,function(){t._reactRootContainer=null,t[Ki]=null})}),!0):!1};Ar.unstable_batchedUpdates=iw;Ar.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sm(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return om(t,e,n,!1,r)};Ar.version="18.3.1-next-f1338f8080-20240426";function NA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NA)}catch(t){console.error(t)}}NA(),Nb.exports=Ar;var Vj=Nb.exports,sT=Vj;wy.createRoot=sT.createRoot,wy.hydrateRoot=sT.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function od(){return od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},od.apply(this,arguments)}var Ds;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ds||(Ds={}));const oT="popstate";function Oj(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return h0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rp(i)}return Mj(e,n,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jj(){return Math.random().toString(36).substr(2,8)}function aT(t,e){return{usr:t.state,key:t.key,idx:e}}function h0(t,e,n,r){return n===void 0&&(n=null),od({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pu(e):e,{state:n,key:e&&e.key||r||jj()})}function rp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Mj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ds.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(od({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Ds.Pop;let I=c(),_=I==null?null:I-u;u=I,l&&l({action:a,location:v.location,delta:_})}function p(I,_){a=Ds.Push;let x=h0(v.location,I,_);u=c()+1;let E=aT(x,u),V=v.createHref(x);try{o.pushState(E,"",V)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(V)}s&&l&&l({action:a,location:v.location,delta:1})}function m(I,_){a=Ds.Replace;let x=h0(v.location,I,_);u=c();let E=aT(x,u),V=v.createHref(x);o.replaceState(E,"",V),s&&l&&l({action:a,location:v.location,delta:0})}function y(I){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof I=="string"?I:rp(I);return x=x.replace(/ $/,"%20"),en(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let v={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(oT,h),l=I,()=>{i.removeEventListener(oT,h),l=null}},createHref(I){return e(i,I)},createURL:y,encodeLocation(I){let _=y(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(I){return o.go(I)}};return v}var lT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lT||(lT={}));function Lj(t,e,n){return n===void 0&&(n="/"),Fj(t,e,n)}function Fj(t,e,n,r){let i=typeof e=="string"?pu(e):e,s=fw(i.pathname||"/",n);if(s==null)return null;let o=DA(t);Uj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Xj(s);a=Qj(o[l],u)}return a}function DA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(en(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ws([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(en(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DA(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Hj(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of VA(s.path))i(s,o,l)}),e}function VA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=VA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Uj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Bj=/^:[\w-]+$/,zj=3,$j=2,Wj=1,qj=10,Gj=-2,uT=t=>t==="*";function Hj(t,e){let n=t.split("/"),r=n.length;return n.some(uT)&&(r+=Gj),e&&(r+=$j),n.filter(i=>!uT(i)).reduce((i,s)=>i+(Bj.test(s)?zj:s===""?Wj:qj),r)}function Kj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Qj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=Yj({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Ws([s,h.pathname]),pathnameBase:rM(Ws([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Ws([s,h.pathnameBase]))}return o}function Yj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Jj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:p,isOptional:m}=c;if(p==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Jj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Xj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eM=t=>Zj.test(t);function tM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?pu(t):t,s;if(n)if(eM(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),hw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=cT(n.substring(1),"/"):s=cT(n,e)}else s=e;return{pathname:s,search:iM(r),hash:sM(i)}}function cT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Cg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pw(t,e){let n=nM(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function mw(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=pu(t):(i=od({},t),en(!i.pathname||!i.pathname.includes("?"),Cg("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),Cg("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),Cg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=tM(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ws=t=>t.join("/").replace(/\/\/+/g,"/"),rM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OA=["post","put","patch","delete"];new Set(OA);const aM=["get",...OA];new Set(aM);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(this,arguments)}const gw=k.createContext(null),lM=k.createContext(null),mo=k.createContext(null),am=k.createContext(null),ki=k.createContext({outlet:null,matches:[],isDataRoute:!1}),jA=k.createContext(null);function uM(t,e){let{relative:n}=e===void 0?{}:e;mu()||en(!1);let{basename:r,navigator:i}=k.useContext(mo),{hash:s,pathname:o,search:a}=LA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ws([r,o])),i.createHref({pathname:l,search:a,hash:s})}function mu(){return k.useContext(am)!=null}function Na(){return mu()||en(!1),k.useContext(am).location}function MA(t){k.useContext(mo).static||k.useLayoutEffect(t)}function go(){let{isDataRoute:t}=k.useContext(ki);return t?IM():cM()}function cM(){mu()||en(!1);let t=k.useContext(gw),{basename:e,future:n,navigator:r}=k.useContext(mo),{matches:i}=k.useContext(ki),{pathname:s}=Na(),o=JSON.stringify(pw(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return MA(()=>{a.current=!0}),k.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=mw(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ws([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}const dM=k.createContext(null);function hM(t){let e=k.useContext(ki).outlet;return e&&k.createElement(dM.Provider,{value:t},e)}function cJ(){let{matches:t}=k.useContext(ki),e=t[t.length-1];return e?e.params:{}}function LA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(mo),{matches:i}=k.useContext(ki),{pathname:s}=Na(),o=JSON.stringify(pw(i,r.v7_relativeSplatPath));return k.useMemo(()=>mw(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function fM(t,e){return pM(t,e)}function pM(t,e,n,r){mu()||en(!1);let{navigator:i}=k.useContext(mo),{matches:s}=k.useContext(ki),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Na(),c;if(e){var h;let I=typeof e=="string"?pu(e):e;l==="/"||(h=I.pathname)!=null&&h.startsWith(l)||en(!1),c=I}else c=u;let p=c.pathname||"/",m=p;if(l!=="/"){let I=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(I.length).join("/")}let y=Lj(t,{pathname:m}),v=wM(y&&y.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Ws([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Ws([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&v?k.createElement(am.Provider,{value:{location:ad({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ds.Pop}},v):v}function mM(){let t=TM(),e=oM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const gM=k.createElement(mM,null);class yM extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(ki.Provider,{value:this.props.routeContext},k.createElement(jA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vM(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(gw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ki.Provider,{value:e},r)}function wM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);c>=0||en(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,p)=>{let m,y=!1,v=null,I=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||gM,l&&(u<0&&p===0?(SM("route-fallback"),y=!0,I=null):u===p&&(y=!0,I=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),x=()=>{let E;return m?E=v:y?E=I:h.route.Component?E=k.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=c,k.createElement(vM,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?k.createElement(yM,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var FA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FA||{}),UA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(UA||{});function xM(t){let e=k.useContext(gw);return e||en(!1),e}function _M(t){let e=k.useContext(lM);return e||en(!1),e}function EM(t){let e=k.useContext(ki);return e||en(!1),e}function BA(t){let e=EM(),n=e.matches[e.matches.length-1];return n.route.id||en(!1),n.route.id}function TM(){var t;let e=k.useContext(jA),n=_M(),r=BA();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IM(){let{router:t}=xM(FA.UseNavigateStable),e=BA(UA.UseNavigateStable),n=k.useRef(!1);return MA(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ad({fromRouteId:e},s)))},[t,e])}const dT={};function SM(t,e,n){dT[t]||(dT[t]=!0)}function bM(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zl(t){let{to:e,replace:n,state:r,relative:i}=t;mu()||en(!1);let{future:s,static:o}=k.useContext(mo),{matches:a}=k.useContext(ki),{pathname:l}=Na(),u=go(),c=mw(e,pw(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return k.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function kM(t){return hM(t.context)}function We(t){en(!1)}function AM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ds.Pop,navigator:s,static:o=!1,future:a}=t;mu()&&en(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:s,static:o,future:ad({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=pu(r));let{pathname:c="/",search:h="",hash:p="",state:m=null,key:y="default"}=r,v=k.useMemo(()=>{let I=fw(c,l);return I==null?null:{location:{pathname:I,search:h,hash:p,state:m,key:y},navigationType:i}},[l,c,h,p,m,y,i]);return v==null?null:k.createElement(mo.Provider,{value:u},k.createElement(am.Provider,{children:n,value:v}))}function PM(t){let{children:e,location:n}=t;return fM(f0(e),n)}new Promise(()=>{});function f0(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,f0(r.props.children,s));return}r.type!==We&&en(!1),!r.props.index||!r.props.children||en(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=f0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p0.apply(this,arguments)}function CM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NM(t,e){return t.button===0&&(!e||e==="_self")&&!RM(t)}function m0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function DM(t,e){let n=m0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const VM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OM="6";try{window.__reactRouterVersion=OM}catch{}const jM="startTransition",hT=TV[jM];function MM(t){let{basename:e,children:n,future:r,window:i}=t,s=k.useRef();s.current==null&&(s.current=Oj({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=k.useCallback(h=>{u&&hT?hT(()=>l(h)):l(h)},[l,u]);return k.useLayoutEffect(()=>o.listen(c),[o,c]),k.useEffect(()=>bM(r),[r]),k.createElement(AM,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const LM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,p=CM(e,VM),{basename:m}=k.useContext(mo),y,v=!1;if(typeof u=="string"&&FM.test(u)&&(y=u,LM))try{let E=new URL(window.location.href),V=u.startsWith("//")?new URL(E.protocol+u):new URL(u),M=fw(V.pathname,m);V.origin===E.origin&&M!=null?u=M+V.search+V.hash:v=!0}catch{}let I=uM(u,{relative:i}),_=UM(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function x(E){r&&r(E),E.defaultPrevented||_(E)}return k.createElement("a",p0({},p,{href:y||I,onClick:v||s?r:x,ref:n,target:l}))});var fT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fT||(fT={}));var pT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pT||(pT={}));function UM(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=go(),u=Na(),c=LA(t,{relative:o});return k.useCallback(h=>{if(NM(h,n)){h.preventDefault();let p=r!==void 0?r:rp(u)===rp(c);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function dJ(t){let e=k.useRef(m0(t)),n=k.useRef(!1),r=Na(),i=k.useMemo(()=>DM(r.search,n.current?null:e.current),[r.search]),s=go(),o=k.useCallback((a,l)=>{const u=m0(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var mT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[c],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new zM;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $M=function(t){const e=zA(t);return $A.encodeByteArray(e,!0)},ip=function(t){return $M(t).replace(/\./g,"")},WA=function(t){try{return $A.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=()=>WM().__FIREBASE_DEFAULTS__,GM=()=>{if(typeof process>"u"||typeof mT>"u")return;const t=mT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WA(t[1]);return e&&JSON.parse(e)},lm=()=>{try{return qM()||GM()||HM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qA=t=>{var e,n;return(n=(e=lm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KM=t=>{const e=qA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},GA=()=>{var t;return(t=lm())===null||t===void 0?void 0:t.config},HA=t=>{var e;return(e=lm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ip(JSON.stringify(n)),ip(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function XM(){var t;const e=(t=lm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nL(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KA(){return!XM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QA(){try{return typeof indexedDB=="object"}catch{return!1}}function rL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="FirebaseError";class rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iL,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nd.prototype.create)}}class Nd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?sL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rs(i,a,r)}}function sL(t,e){return t.replace(oL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oL=/\{\$([^}]+)}/g;function aL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(gT(s)&&gT(o)){if(!Zs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lL(t,e){const n=new uL(t,e);return n.subscribe.bind(n)}class uL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rg),i.error===void 0&&(i.error=Rg),i.complete===void 0&&(i.complete=Rg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class ga{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fL(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hL(t){return t===Mo?void 0:t}function fL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const mL={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},gL=qe.INFO,yL={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},vL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yw{constructor(e){this.name=e,this._logLevel=gL,this._logHandler=vL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const wL=(t,e)=>e.some(n=>t instanceof n);let yT,vT;function xL(){return yT||(yT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _L(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YA=new WeakMap,g0=new WeakMap,JA=new WeakMap,Ng=new WeakMap,vw=new WeakMap;function EL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&YA.set(n,t)}).catch(()=>{}),vw.set(e,t),e}function TL(t){if(g0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});g0.set(t,e)}let y0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return g0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IL(t){y0=t(y0)}function SL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dg(this),e,...n);return JA.set(r,e.sort?e.sort():[e]),qs(r)}:_L().includes(t)?function(...e){return t.apply(Dg(this),e),qs(YA.get(this))}:function(...e){return qs(t.apply(Dg(this),e))}}function bL(t){return typeof t=="function"?SL(t):(t instanceof IDBTransaction&&TL(t),wL(t,xL())?new Proxy(t,y0):t)}function qs(t){if(t instanceof IDBRequest)return EL(t);if(Ng.has(t))return Ng.get(t);const e=bL(t);return e!==t&&(Ng.set(t,e),vw.set(e,t)),e}const Dg=t=>vw.get(t);function kL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=qs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(qs(o.result),l.oldVersion,l.newVersion,qs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AL=["get","getKey","getAll","getAllKeys","count"],PL=["put","add","delete","clear"],Vg=new Map;function wT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vg.get(e))return Vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Vg.set(e,s),s}IL(t=>({...t,get:(e,n,r)=>wT(e,n)||t.get(e,n,r),has:(e,n)=>!!wT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const v0="@firebase/app",xT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new yw("@firebase/app"),NL="@firebase/app-compat",DL="@firebase/analytics-compat",VL="@firebase/analytics",OL="@firebase/app-check-compat",jL="@firebase/app-check",ML="@firebase/auth",LL="@firebase/auth-compat",FL="@firebase/database",UL="@firebase/data-connect",BL="@firebase/database-compat",zL="@firebase/functions",$L="@firebase/functions-compat",WL="@firebase/installations",qL="@firebase/installations-compat",GL="@firebase/messaging",HL="@firebase/messaging-compat",KL="@firebase/performance",QL="@firebase/performance-compat",YL="@firebase/remote-config",JL="@firebase/remote-config-compat",XL="@firebase/storage",ZL="@firebase/storage-compat",e4="@firebase/firestore",t4="@firebase/vertexai-preview",n4="@firebase/firestore-compat",r4="firebase",i4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",s4={[v0]:"fire-core",[NL]:"fire-core-compat",[VL]:"fire-analytics",[DL]:"fire-analytics-compat",[jL]:"fire-app-check",[OL]:"fire-app-check-compat",[ML]:"fire-auth",[LL]:"fire-auth-compat",[FL]:"fire-rtdb",[UL]:"fire-data-connect",[BL]:"fire-rtdb-compat",[zL]:"fire-fn",[$L]:"fire-fn-compat",[WL]:"fire-iid",[qL]:"fire-iid-compat",[GL]:"fire-fcm",[HL]:"fire-fcm-compat",[KL]:"fire-perf",[QL]:"fire-perf-compat",[YL]:"fire-rc",[JL]:"fire-rc-compat",[XL]:"fire-gcs",[ZL]:"fire-gcs-compat",[e4]:"fire-fst",[n4]:"fire-fst-compat",[t4]:"fire-vertex","fire-js":"fire-js",[r4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Map,o4=new Map,w0=new Map;function _T(t,e){try{t.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $l(t){const e=t.name;if(w0.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;w0.set(e,t);for(const n of op.values())_T(n,t);for(const n of o4.values())_T(n,t);return!0}function Vd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function a4(t,e,n=sp){Vd(t,e).clearInstance(n)}function fi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Nd("app","Firebase",l4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=i4;function XA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(n||(n=GA()),!n)throw Gs.create("no-options");const s=op.get(i);if(s){if(Zs(n,s.options)&&Zs(r,s.config))return s;throw Gs.create("duplicate-app",{appName:i})}const o=new pL(i);for(const l of w0.values())o.addComponent(l);const a=new u4(n,r,o);return op.set(i,a),a}function ZA(t=sp){const e=op.get(t);if(!e&&t===sp&&GA())return XA();if(!e)throw Gs.create("no-app",{appName:t});return e}function Hs(t,e,n){var r;let i=(r=s4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(a.join(" "));return}$l(new ga(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="firebase-heartbeat-database",d4=1,ld="firebase-heartbeat-store";let Og=null;function eP(){return Og||(Og=kL(c4,d4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ld)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),Og}async function h4(t){try{const n=(await eP()).transaction(ld),r=await n.objectStore(ld).get(tP(t));return await n.done,r}catch(e){if(e instanceof rs)Ji.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(n.message)}}}async function ET(t,e){try{const r=(await eP()).transaction(ld,"readwrite");await r.objectStore(ld).put(e,tP(t)),await r.done}catch(n){if(n instanceof rs)Ji.warn(n.message);else{const r=Gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ji.warn(r.message)}}}function tP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1024,p4=30*24*60*60*1e3;class m4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=TT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=p4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=TT(),{heartbeatsToSend:r,unsentEntries:i}=g4(this._heartbeatsCache.heartbeats),s=ip(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ji.warn(n),""}}}function TT(){return new Date().toISOString().substring(0,10)}function g4(t,e=f4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),IT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),IT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QA()?rL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ET(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ET(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function IT(t){return ip(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){$l(new ga("platform-logger",e=>new CL(e),"PRIVATE")),$l(new ga("heartbeat",e=>new m4(e),"PRIVATE")),Hs(v0,xT,t),Hs(v0,xT,"esm2017"),Hs("fire-js","")}v4("");function ww(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w4=nP,rP=new Nd("auth","Firebase",nP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=new yw("@firebase/auth");function x4(t,...e){ap.logLevel<=qe.WARN&&ap.warn(`Auth (${gu}): ${t}`,...e)}function hf(t,...e){ap.logLevel<=qe.ERROR&&ap.error(`Auth (${gu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw _w(t,...e)}function Xr(t,...e){return _w(t,...e)}function xw(t,e,n){const r=Object.assign(Object.assign({},w4()),{[e]:n});return new Nd("auth","Firebase",r).create(e,{appName:t.name})}function Ks(t){return xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ti(t,"argument-error"),xw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _w(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rP.create(t,...e)}function Ne(t,e,...n){if(!t)throw _w(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hf(e),new Error(e)}function Xi(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _4(){return ST()==="http:"||ST()==="https:"}function ST(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_4()||eL()||"connection"in navigator)?navigator.onLine:!0}function T4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=JM()||tL()}get(){return E4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){Xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new Od(3e4,6e4);function Tw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yu(t,e,n,r,i={}){return oP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Dd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return ZM()||(u.referrerPolicy="no-referrer"),sP.fetch()(aP(t,t.config.apiHost,n,a),u)})}async function oP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},I4),e);try{const i=new k4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Dh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Dh(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xw(t,c,u);Ti(t,c)}}catch(i){if(i instanceof rs)throw i;Ti(t,"network-request-failed",{message:String(i)})}}async function b4(t,e,n,r,i={}){const s=await yu(t,e,n,r,i);return"mfaPendingCredential"in s&&Ti(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ew(t.config,i):`${t.config.apiScheme}://${i}`}class k4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),S4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e){return yu(t,"POST","/v1/accounts:delete",e)}async function lP(t,e){return yu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P4(t,e=!1){const n=Et(t),r=await n.getIdToken(e),i=Iw(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sc(jg(i.auth_time)),issuedAtTime:Sc(jg(i.iat)),expirationTime:Sc(jg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jg(t){return Number(t)*1e3}function Iw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const i=WA(n);return i?JSON.parse(i):(hf("Failed to decode base64 JWT payload"),null)}catch(i){return hf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function bT(t){const e=Iw(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rs&&C4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ud(t,lP(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uP(s.providerUserInfo):[],a=D4(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _0(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function N4(t){const e=Et(t);await lp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uP(t){return t.map(e=>{var{providerId:n}=e,r=ww(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e){const n=await oP(t,{},async()=>{const r=Dd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O4(t,e){return yu(t,"POST","/v2/accounts:revokeToken",Tw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=bT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await V4(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Sl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ww(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ud(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return P4(this,e)}reload(){return N4(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await ud(this,A4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:V,isAnonymous:M,providerData:O,stsTokenManager:S}=n;Ne(E&&S,e,"internal-error");const T=Sl.fromJSON(this.name,S);Ne(typeof E=="string",e,"internal-error"),fs(h,e.name),fs(p,e.name),Ne(typeof V=="boolean",e,"internal-error"),Ne(typeof M=="boolean",e,"internal-error"),fs(m,e.name),fs(y,e.name),fs(v,e.name),fs(I,e.name),fs(_,e.name),fs(x,e.name);const A=new Fi({uid:E,auth:e,email:p,emailVerified:V,displayName:h,isAnonymous:M,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:T,createdAt:_,lastLoginAt:x});return O&&Array.isArray(O)&&(A.providerData=O.map(b=>Object.assign({},b))),I&&(A._redirectEventId=I),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Sl;i.updateFromServerResponse(n);const s=new Fi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Sl;a.updateFromIdToken(r);const l=new Fi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;function Ui(t){Xi(t instanceof Function,"Expected a class definition");let e=kT.get(t);return e?(Xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cP.type="NONE";const AT=cP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e,n){return`firebase:${t}:${e}:${n}`}class bl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ff(this.userKey,i.apiKey,s),this.fullPersistenceKey=ff("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bl(Ui(AT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ui(AT);const o=ff(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Fi._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new bl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gP(e))return"Blackberry";if(yP(e))return"Webos";if(hP(e))return"Safari";if((e.includes("chrome/")||fP(e))&&!e.includes("edge/"))return"Chrome";if(mP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dP(t=mn()){return/firefox\//i.test(t)}function hP(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fP(t=mn()){return/crios\//i.test(t)}function pP(t=mn()){return/iemobile/i.test(t)}function mP(t=mn()){return/android/i.test(t)}function gP(t=mn()){return/blackberry/i.test(t)}function yP(t=mn()){return/webos/i.test(t)}function Sw(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j4(t=mn()){var e;return Sw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M4(){return nL()&&document.documentMode===10}function vP(t=mn()){return Sw(t)||mP(t)||yP(t)||gP(t)||/windows phone/i.test(t)||pP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t,e=[]){let n;switch(t){case"Browser":n=PT(mn());break;case"Worker":n=`${PT(mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e={}){return yu(t,"GET","/v2/passwordPolicy",Tw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=6;class B4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:U4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CT(this),this.idTokenSubscription=new CT(this),this.beforeStateQueue=new L4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lP(this,{idToken:e}),r=await Fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(Ks(this));const n=e?Et(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F4(this),n=new B4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await O4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&x4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vu(t){return Et(t)}class CT{constructor(e){this.auth=e,this.observer=null,this.addObserver=lL(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $4(t){bw=t}function W4(t){return bw.loadJS(t)}function q4(){return bw.gapiScript}function G4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t,e){const n=Vd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zs(s,e??{}))return i;Ti(i,"already-initialized")}return n.initialize({options:e})}function K4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Q4(t,e,n){const r=vu(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=xP(e),{host:o,port:a}=Y4(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),J4()}function xP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y4(t){const e=xP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:RT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:RT(o)}}}function RT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(t,e){return b4(t,"POST","/v1/accounts:signInWithIdp",Tw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="http://localhost";class ya extends _P{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ww(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ya(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return kl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kl(e,n)}buildRequest(){const e={requestUri:X4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends jd{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ya._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oi.credential(n,r)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends jd{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends jd{constructor(){super("twitter.com")}static credential(e,n){return ya._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Fi._fromIdTokenResponse(e,r,i),o=NT(r);return new Wl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=NT(r);return new Wl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function NT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends rs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,up.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new up(e,n,r,i)}}function EP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?up._fromErrorAndOperation(t,s,e,r):s})}async function Z4(t,e,n=!1){const r=await ud(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e,n=!1){const{auth:r}=t;if(fi(r.app))return Promise.reject(Ks(r));const i="reauthenticate";try{const s=await ud(t,EP(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const o=Iw(s.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),Wl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ti(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e,n=!1){if(fi(t.app))return Promise.reject(Ks(t));const r="signIn",i=await EP(t,r,e),s=await Wl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function nF(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function rF(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function iF(t,e,n,r){return Et(t).onAuthStateChanged(e,n,r)}function sF(t){return Et(t).signOut()}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=1e3,aF=10;class IP extends TP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);M4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IP.type="LOCAL";const lF=IP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP extends TP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SP.type="SESSION";const bP=SP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await uF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=kw("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function dF(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function hF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pF(){return kP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="firebaseLocalStorageDb",mF=1,dp="firebaseLocalStorage",PP="fbase_key";class Md{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dm(t,e){return t.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function gF(){const t=indexedDB.deleteDatabase(AP);return new Md(t).toPromise()}function E0(){const t=indexedDB.open(AP,mF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dp,{keyPath:PP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dp)?e(r):(r.close(),await gF(),e(await E0()))})})}async function DT(t,e,n){const r=dm(t,!0).put({[PP]:e,value:n});return new Md(r).toPromise()}async function yF(t,e){const n=dm(t,!1).get(e),r=await new Md(n).toPromise();return r===void 0?null:r.value}function VT(t,e){const n=dm(t,!0).delete(e);return new Md(n).toPromise()}const vF=800,wF=3;class CP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await E0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(pF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await hF(),!this.activeServiceWorker)return;this.sender=new cF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await E0();return await DT(e,cp,"1"),await VT(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=dm(i,!1).getAll();return new Md(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CP.type="LOCAL";const xF=CP;new Od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){return e?Ui(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends _P{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _F(t){return tF(t.auth,new Pw(t),t.bypassAuthState)}function EF(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),eF(n,new Pw(t),t.bypassAuthState)}async function TF(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),Z4(n,new Pw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _F;case"linkViaPopup":case"linkViaRedirect":return TF;case"reauthViaPopup":case"reauthViaRedirect":return EF;default:Ti(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new Od(2e3,1e4);async function SF(t,e,n){if(fi(t.app))return Promise.reject(Xr(t,"operation-not-supported-in-this-environment"));const r=vu(t);iP(t,e,um);const i=Aw(r,n);return new ea(r,"signInViaPopup",e,i).executeNotNull()}class ea extends RP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=kw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IF.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="pendingRedirect",pf=new Map;class kF extends RP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await AF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AF(t,e){const n=DP(e),r=NP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function PF(t,e){return NP(t)._set(DP(e),"true")}function CF(t,e){pf.set(t._key(),e)}function NP(t){return Ui(t._redirectPersistence)}function DP(t){return ff(bF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e,n){return NF(t,e,n)}async function NF(t,e,n){if(fi(t.app))return Promise.reject(Ks(t));const r=vu(t);iP(t,e,um),await r._initializationPromise;const i=Aw(r,n);return await PF(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function DF(t,e){return await vu(t)._initializationPromise,VP(t,e,!1)}async function VP(t,e,n=!1){if(fi(t.app))return Promise.reject(Ks(t));const r=vu(t),i=Aw(r,e),o=await new kF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=10*60*1e3;class OF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VF&&this.cachedEventUids.clear(),this.cachedEventUids.has(OT(e))}saveEventToCache(e){this.cachedEventUids.add(OT(e)),this.lastProcessedEventTime=Date.now()}}function OT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(t,e={}){return yu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FF=/^https?/;async function UF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MF(t);for(const n of e)try{if(BF(n))return}catch{}Ti(t,"unauthorized-domain")}function BF(t){const e=x0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FF.test(n))return!1;if(LF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new Od(3e4,6e4);function jT(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $F(t){return new Promise((e,n)=>{var r,i,s;function o(){jT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jT(),n(Xr(t,"network-request-failed"))},timeout:zF.get()})}if(!((i=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vi().gapi)===null||s===void 0)&&s.load)o();else{const a=G4("iframefcb");return vi()[a]=()=>{gapi.load?o():n(Xr(t,"network-request-failed"))},W4(`${q4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mf=null,e})}let mf=null;function WF(t){return mf=mf||$F(t),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=new Od(5e3,15e3),GF="__/auth/iframe",HF="emulator/auth/iframe",KF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YF(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ew(e,HF):`https://${t.config.authDomain}/${GF}`,r={apiKey:e.apiKey,appName:t.name,v:gu},i=QF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Dd(r).slice(1)}`}async function JF(t){const e=await WF(t),n=vi().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:YF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xr(t,"network-request-failed"),a=vi().setTimeout(()=>{s(o)},qF.get());function l(){vi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZF=500,e5=600,t5="_blank",n5="http://localhost";class MT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r5(t,e,n,r=ZF,i=e5){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},XF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=mn().toLowerCase();n&&(a=fP(u)?t5:n),dP(u)&&(e=e||n5,l.scrollbars="yes");const c=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(j4(u)&&a!=="_self")return i5(e||"",a),new MT(null);const h=window.open(e||"",a,c);Ne(h,t,"popup-blocked");try{h.focus()}catch{}return new MT(h)}function i5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="__/auth/handler",o5="emulator/auth/handler",a5=encodeURIComponent("fac");async function LT(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gu,eventId:i};if(e instanceof um){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",aL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof jd){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${a5}=${encodeURIComponent(l)}`:"";return`${l5(t)}?${Dd(a).slice(1)}${u}`}function l5({config:t}){return t.emulator?Ew(t,o5):`https://${t.authDomain}/${s5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="webStorageSupport";class u5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bP,this._completeRedirectFn=VP,this._overrideRedirectResult=CF}async _openPopup(e,n,r,i){var s;Xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await LT(e,n,r,x0(),i);return r5(e,o,kw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await LT(e,n,r,x0(),i);return dF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JF(e),r=new OF(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mg,{type:Mg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Mg];o!==void 0&&n(!!o),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vP()||hP()||Sw()}}const c5=u5;var FT="@firebase/auth",UT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f5(t){$l(new ga("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wP(t)},u=new z4(r,i,s,l);return K4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$l(new ga("auth-internal",e=>{const n=vu(e.getProvider("auth").getImmediate());return(r=>new d5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(FT,UT,h5(t)),Hs(FT,UT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=5*60,m5=HA("authIdTokenMaxAge")||p5;let BT=null;const g5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m5)return;const i=n==null?void 0:n.token;BT!==i&&(BT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jP(t=ZA()){const e=Vd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=H4(t,{popupRedirectResolver:c5,persistence:[xF,lF,bP]}),r=HA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=g5(s.toString());rF(n,o,()=>o(n.currentUser)),nF(n,a=>o(a))}}const i=qA("auth");return i&&Q4(n,`http://${i}`),n}function y5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",y5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f5("Browser");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sa,MP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function A(){}A.prototype=T.prototype,S.D=T.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(b,R,D){for(var C=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)C[Y-2]=arguments[Y];return T.prototype[R].apply(b,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,A){A||(A=0);var b=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)b[R]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(R=0;16>R;++R)b[R]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=S.g[0],A=S.g[1],R=S.g[2];var D=S.g[3],C=T+(D^A&(R^D))+b[0]+3614090360&4294967295;T=A+(C<<7&4294967295|C>>>25),C=D+(R^T&(A^R))+b[1]+3905402710&4294967295,D=T+(C<<12&4294967295|C>>>20),C=R+(A^D&(T^A))+b[2]+606105819&4294967295,R=D+(C<<17&4294967295|C>>>15),C=A+(T^R&(D^T))+b[3]+3250441966&4294967295,A=R+(C<<22&4294967295|C>>>10),C=T+(D^A&(R^D))+b[4]+4118548399&4294967295,T=A+(C<<7&4294967295|C>>>25),C=D+(R^T&(A^R))+b[5]+1200080426&4294967295,D=T+(C<<12&4294967295|C>>>20),C=R+(A^D&(T^A))+b[6]+2821735955&4294967295,R=D+(C<<17&4294967295|C>>>15),C=A+(T^R&(D^T))+b[7]+4249261313&4294967295,A=R+(C<<22&4294967295|C>>>10),C=T+(D^A&(R^D))+b[8]+1770035416&4294967295,T=A+(C<<7&4294967295|C>>>25),C=D+(R^T&(A^R))+b[9]+2336552879&4294967295,D=T+(C<<12&4294967295|C>>>20),C=R+(A^D&(T^A))+b[10]+4294925233&4294967295,R=D+(C<<17&4294967295|C>>>15),C=A+(T^R&(D^T))+b[11]+2304563134&4294967295,A=R+(C<<22&4294967295|C>>>10),C=T+(D^A&(R^D))+b[12]+1804603682&4294967295,T=A+(C<<7&4294967295|C>>>25),C=D+(R^T&(A^R))+b[13]+4254626195&4294967295,D=T+(C<<12&4294967295|C>>>20),C=R+(A^D&(T^A))+b[14]+2792965006&4294967295,R=D+(C<<17&4294967295|C>>>15),C=A+(T^R&(D^T))+b[15]+1236535329&4294967295,A=R+(C<<22&4294967295|C>>>10),C=T+(R^D&(A^R))+b[1]+4129170786&4294967295,T=A+(C<<5&4294967295|C>>>27),C=D+(A^R&(T^A))+b[6]+3225465664&4294967295,D=T+(C<<9&4294967295|C>>>23),C=R+(T^A&(D^T))+b[11]+643717713&4294967295,R=D+(C<<14&4294967295|C>>>18),C=A+(D^T&(R^D))+b[0]+3921069994&4294967295,A=R+(C<<20&4294967295|C>>>12),C=T+(R^D&(A^R))+b[5]+3593408605&4294967295,T=A+(C<<5&4294967295|C>>>27),C=D+(A^R&(T^A))+b[10]+38016083&4294967295,D=T+(C<<9&4294967295|C>>>23),C=R+(T^A&(D^T))+b[15]+3634488961&4294967295,R=D+(C<<14&4294967295|C>>>18),C=A+(D^T&(R^D))+b[4]+3889429448&4294967295,A=R+(C<<20&4294967295|C>>>12),C=T+(R^D&(A^R))+b[9]+568446438&4294967295,T=A+(C<<5&4294967295|C>>>27),C=D+(A^R&(T^A))+b[14]+3275163606&4294967295,D=T+(C<<9&4294967295|C>>>23),C=R+(T^A&(D^T))+b[3]+4107603335&4294967295,R=D+(C<<14&4294967295|C>>>18),C=A+(D^T&(R^D))+b[8]+1163531501&4294967295,A=R+(C<<20&4294967295|C>>>12),C=T+(R^D&(A^R))+b[13]+2850285829&4294967295,T=A+(C<<5&4294967295|C>>>27),C=D+(A^R&(T^A))+b[2]+4243563512&4294967295,D=T+(C<<9&4294967295|C>>>23),C=R+(T^A&(D^T))+b[7]+1735328473&4294967295,R=D+(C<<14&4294967295|C>>>18),C=A+(D^T&(R^D))+b[12]+2368359562&4294967295,A=R+(C<<20&4294967295|C>>>12),C=T+(A^R^D)+b[5]+4294588738&4294967295,T=A+(C<<4&4294967295|C>>>28),C=D+(T^A^R)+b[8]+2272392833&4294967295,D=T+(C<<11&4294967295|C>>>21),C=R+(D^T^A)+b[11]+1839030562&4294967295,R=D+(C<<16&4294967295|C>>>16),C=A+(R^D^T)+b[14]+4259657740&4294967295,A=R+(C<<23&4294967295|C>>>9),C=T+(A^R^D)+b[1]+2763975236&4294967295,T=A+(C<<4&4294967295|C>>>28),C=D+(T^A^R)+b[4]+1272893353&4294967295,D=T+(C<<11&4294967295|C>>>21),C=R+(D^T^A)+b[7]+4139469664&4294967295,R=D+(C<<16&4294967295|C>>>16),C=A+(R^D^T)+b[10]+3200236656&4294967295,A=R+(C<<23&4294967295|C>>>9),C=T+(A^R^D)+b[13]+681279174&4294967295,T=A+(C<<4&4294967295|C>>>28),C=D+(T^A^R)+b[0]+3936430074&4294967295,D=T+(C<<11&4294967295|C>>>21),C=R+(D^T^A)+b[3]+3572445317&4294967295,R=D+(C<<16&4294967295|C>>>16),C=A+(R^D^T)+b[6]+76029189&4294967295,A=R+(C<<23&4294967295|C>>>9),C=T+(A^R^D)+b[9]+3654602809&4294967295,T=A+(C<<4&4294967295|C>>>28),C=D+(T^A^R)+b[12]+3873151461&4294967295,D=T+(C<<11&4294967295|C>>>21),C=R+(D^T^A)+b[15]+530742520&4294967295,R=D+(C<<16&4294967295|C>>>16),C=A+(R^D^T)+b[2]+3299628645&4294967295,A=R+(C<<23&4294967295|C>>>9),C=T+(R^(A|~D))+b[0]+4096336452&4294967295,T=A+(C<<6&4294967295|C>>>26),C=D+(A^(T|~R))+b[7]+1126891415&4294967295,D=T+(C<<10&4294967295|C>>>22),C=R+(T^(D|~A))+b[14]+2878612391&4294967295,R=D+(C<<15&4294967295|C>>>17),C=A+(D^(R|~T))+b[5]+4237533241&4294967295,A=R+(C<<21&4294967295|C>>>11),C=T+(R^(A|~D))+b[12]+1700485571&4294967295,T=A+(C<<6&4294967295|C>>>26),C=D+(A^(T|~R))+b[3]+2399980690&4294967295,D=T+(C<<10&4294967295|C>>>22),C=R+(T^(D|~A))+b[10]+4293915773&4294967295,R=D+(C<<15&4294967295|C>>>17),C=A+(D^(R|~T))+b[1]+2240044497&4294967295,A=R+(C<<21&4294967295|C>>>11),C=T+(R^(A|~D))+b[8]+1873313359&4294967295,T=A+(C<<6&4294967295|C>>>26),C=D+(A^(T|~R))+b[15]+4264355552&4294967295,D=T+(C<<10&4294967295|C>>>22),C=R+(T^(D|~A))+b[6]+2734768916&4294967295,R=D+(C<<15&4294967295|C>>>17),C=A+(D^(R|~T))+b[13]+1309151649&4294967295,A=R+(C<<21&4294967295|C>>>11),C=T+(R^(A|~D))+b[4]+4149444226&4294967295,T=A+(C<<6&4294967295|C>>>26),C=D+(A^(T|~R))+b[11]+3174756917&4294967295,D=T+(C<<10&4294967295|C>>>22),C=R+(T^(D|~A))+b[2]+718787259&4294967295,R=D+(C<<15&4294967295|C>>>17),C=A+(D^(R|~T))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var A=T-this.blockSize,b=this.B,R=this.h,D=0;D<T;){if(R==0)for(;D<=A;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<T;)if(b[R++]=S.charCodeAt(D++),R==this.blockSize){i(this,b),R=0;break}}else for(;D<T;)if(b[R++]=S[D++],R==this.blockSize){i(this,b),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var A=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=A&255,A/=256;for(this.u(S),S=Array(16),T=A=0;4>T;++T)for(var b=0;32>b;b+=8)S[A++]=this.g[T]>>>b&255;return S};function s(S,T){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=T(S)}function o(S,T){this.h=T;for(var A=[],b=!0,R=S.length-1;0<=R;R--){var D=S[R]|0;b&&D==T||(A[R]=D,b=!1)}this.g=A}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return I(u(-S));for(var T=[],A=1,b=0;S>=A;b++)T[b]=S/A|0,A*=4294967296;return new o(T,0)}function c(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return I(c(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(T,8)),b=h,R=0;R<S.length;R+=8){var D=Math.min(8,S.length-R),C=parseInt(S.substring(R,R+D),T);8>D?(D=u(Math.pow(T,D)),b=b.j(D).add(u(C))):(b=b.j(A),b=b.add(u(C)))}return b}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-I(this).m();for(var S=0,T=1,A=0;A<this.g.length;A++){var b=this.i(A);S+=(0<=b?b:4294967296+b)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+I(this).toString(S);for(var T=u(Math.pow(S,6)),A=this,b="";;){var R=V(A,T).g;A=_(A,R.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=R,y(A))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=_(this,S),v(S)?-1:y(S)?0:1};function I(S){for(var T=S.g.length,A=[],b=0;b<T;b++)A[b]=~S.g[b];return new o(A,~S.h).add(p)}t.abs=function(){return v(this)?I(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),A=[],b=0,R=0;R<=T;R++){var D=b+(this.i(R)&65535)+(S.i(R)&65535),C=(D>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);b=C>>>16,D&=65535,C&=65535,A[R]=C<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(I(T))}t.j=function(S){if(y(this)||y(S))return h;if(v(this))return v(S)?I(this).j(I(S)):I(I(this).j(S));if(v(S))return I(this.j(I(S)));if(0>this.l(m)&&0>S.l(m))return u(this.m()*S.m());for(var T=this.g.length+S.g.length,A=[],b=0;b<2*T;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<S.g.length;R++){var D=this.i(b)>>>16,C=this.i(b)&65535,Y=S.i(R)>>>16,ye=S.i(R)&65535;A[2*b+2*R]+=C*ye,x(A,2*b+2*R),A[2*b+2*R+1]+=D*ye,x(A,2*b+2*R+1),A[2*b+2*R+1]+=C*Y,x(A,2*b+2*R+1),A[2*b+2*R+2]+=D*Y,x(A,2*b+2*R+2)}for(b=0;b<T;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=T;b<2*T;b++)A[b]=0;return new o(A,0)};function x(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function V(S,T){if(y(T))throw Error("division by zero");if(y(S))return new E(h,h);if(v(S))return T=V(I(S),T),new E(I(T.g),I(T.h));if(v(T))return T=V(S,I(T)),new E(I(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var A=p,b=T;0>=b.l(S);)A=M(A),b=M(b);var R=O(A,1),D=O(b,1);for(b=O(b,2),A=O(A,2);!y(b);){var C=D.add(b);0>=C.l(S)&&(R=R.add(A),D=C),b=O(b,1),A=O(A,1)}return T=_(S,R.j(T)),new E(R,T)}for(R=h;0<=S.l(T);){for(A=Math.max(1,Math.floor(S.m()/T.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=u(A),C=D.j(T);v(C)||0<C.l(S);)A-=b,D=u(A),C=D.j(T);y(D)&&(D=p),R=R.add(D),S=_(S,C)}return new E(R,S)}t.A=function(S){return V(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),A=[],b=0;b<T;b++)A[b]=this.i(b)&S.i(b);return new o(A,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),A=[],b=0;b<T;b++)A[b]=this.i(b)|S.i(b);return new o(A,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),A=[],b=0;b<T;b++)A[b]=this.i(b)^S.i(b);return new o(A,this.h^S.h)};function M(S){for(var T=S.g.length+1,A=[],b=0;b<T;b++)A[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(A,S.h)}function O(S,T){var A=T>>5;T%=32;for(var b=S.g.length-A,R=[],D=0;D<b;D++)R[D]=0<T?S.i(D+A)>>>T|S.i(D+A+1)<<32-T:S.i(D+A);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,sa=o}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LP,dc,FP,gf,T0,UP,BP,zP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,w){return d==Array.prototype||d==Object.prototype||(d[g]=w.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var g=0;g<d.length;++g){var w=d[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var w=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var B=d[P];if(!(B in w))break e;w=w[B]}d=d[d.length-1],P=w[d],g=g(P),g!=P&&g!=null&&e(w,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var w=0,P=!1,B={next:function(){if(!P&&w<d.length){var W=w++;return{value:g(W,d[W]),done:!1}}return P=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,w){return d.call.apply(d.bind,arguments)}function h(d,g,w){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,P),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function p(d,g,w){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,p.apply(null,arguments)}function m(d,g){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function y(d,g){function w(){}w.prototype=g.prototype,d.aa=g.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(P,B,W){for(var se=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)se[pt-2]=arguments[pt];return g.prototype[B].apply(P,se)}}function v(d){const g=d.length;if(0<g){const w=Array(g);for(let P=0;P<g;P++)w[P]=d[P];return w}return[]}function I(d,g){for(let w=1;w<arguments.length;w++){const P=arguments[w];if(l(P)){const B=d.length||0,W=P.length||0;d.length=B+W;for(let se=0;se<W;se++)d[B+se]=P[se]}else d.push(P)}}class _{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){return/^[\s\xa0]*$/.test(d)}function E(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(d,g,w){for(const P in d)g.call(w,d[P],P,d)}function S(d,g){for(const w in d)g.call(void 0,d[w],w,d)}function T(d){const g={};for(const w in d)g[w]=d[w];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(d,g){let w,P;for(let B=1;B<arguments.length;B++){P=arguments[B];for(w in P)d[w]=P[w];for(let W=0;W<A.length;W++)w=A[W],Object.prototype.hasOwnProperty.call(P,w)&&(d[w]=P[w])}}function R(d){var g=1;d=d.split(":");const w=[];for(;0<g&&d.length;)w.push(d.shift()),g--;return d.length&&w.push(d.join(":")),w}function D(d){a.setTimeout(()=>{throw d},0)}function C(){var d=ce;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Y{constructor(){this.h=this.g=null}add(g,w){const P=ye.get();P.set(g,w),this.h?this.h.next=P:this.g=P,this.h=P}}var ye=new _(()=>new De,d=>d.reset());class De{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,X=!1,ce=new Y,N=()=>{const d=a.Promise.resolve(void 0);Ie=()=>{d.then(ue)}};var ue=()=>{for(var d;d=C();){try{d.h.call(d.g)}catch(w){D(w)}var g=ye;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}X=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return d}();function mt(d,g){if(j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(M){e:{try{V(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else w=="mouseover"?g=d.fromElement:w=="mouseout"&&(g=d.toElement);this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Fe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&mt.aa.h.call(this)}}y(mt,j);var Fe={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Rn=0;function Kt(d,g,w,P,B){this.listener=d,this.proxy=null,this.src=g,this.type=w,this.capture=!!P,this.ha=B,this.key=++Rn,this.da=this.fa=!1}function rn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Qt(d){this.src=d,this.g={},this.h=0}Qt.prototype.add=function(d,g,w,P,B){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var se=ni(d,g,P,B);return-1<se?(g=d[se],w||(g.fa=!1)):(g=new Kt(g,this.src,W,!!P,B),g.fa=w,d.push(g)),g};function Hn(d,g){var w=g.type;if(w in d.g){var P=d.g[w],B=Array.prototype.indexOf.call(P,g,void 0),W;(W=0<=B)&&Array.prototype.splice.call(P,B,1),W&&(rn(g),d.g[w].length==0&&(delete d.g[w],d.h--))}}function ni(d,g,w,P){for(var B=0;B<d.length;++B){var W=d[B];if(!W.da&&W.listener==g&&W.capture==!!w&&W.ha==P)return B}return-1}var ri="closure_lm_"+(1e6*Math.random()|0),gr={};function Ai(d,g,w,P,B){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Ai(d,g[W],w,P,B);return null}return w=Ve(w),d&&d[Ze]?d.K(g,w,u(P)?!!P.capture:!1,B):ii(d,g,w,!1,P,B)}function ii(d,g,w,P,B,W){if(!g)throw Error("Invalid event type");var se=u(B)?!!B.capture:!!B,pt=ke(d);if(pt||(d[ri]=pt=new Qt(d)),w=pt.add(g,w,P,se,W),w.proxy)return w;if(P=bo(),w.proxy=P,P.src=d,P.listener=w,d.addEventListener)ot||(B=se),B===void 0&&(B=!1),d.addEventListener(g.toString(),P,B);else if(d.attachEvent)d.attachEvent(H(g.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function bo(){function d(w){return g.call(d.src,d.listener,w)}const g=Se;return d}function si(d,g,w,P,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)si(d,g[W],w,P,B);else P=u(P)?!!P.capture:!!P,w=Ve(w),d&&d[Ze]?(d=d.i,g=String(g).toString(),g in d.g&&(W=d.g[g],w=ni(W,w,P,B),-1<w&&(rn(W[w]),Array.prototype.splice.call(W,w,1),W.length==0&&(delete d.g[g],d.h--)))):d&&(d=ke(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ni(g,w,P,B)),(w=-1<d?g[d]:null)&&$r(w))}function $r(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ze])Hn(g.i,d);else{var w=d.type,P=d.proxy;g.removeEventListener?g.removeEventListener(w,P,d.capture):g.detachEvent?g.detachEvent(H(w),P):g.addListener&&g.removeListener&&g.removeListener(P),(w=ke(g))?(Hn(w,d),w.h==0&&(w.src=null,g[ri]=null)):rn(d)}}}function H(d){return d in gr?gr[d]:gr[d]="on"+d}function Se(d,g){if(d.da)d=!0;else{g=new mt(g,this);var w=d.listener,P=d.ha||d.src;d.fa&&$r(d),d=w.call(P,g)}return d}function ke(d){return d=d[ri],d instanceof Qt?d:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(d){return typeof d=="function"?d:(d[Ke]||(d[Ke]=function(g){return d.handleEvent(g)}),d[Ke])}function F(){Te.call(this),this.i=new Qt(this),this.M=this,this.F=null}y(F,Te),F.prototype[Ze]=!0,F.prototype.removeEventListener=function(d,g,w,P){si(this,d,g,w,P)};function q(d,g){var w,P=d.F;if(P)for(w=[];P;P=P.F)w.push(P);if(d=d.M,P=g.type||g,typeof g=="string")g=new j(g,d);else if(g instanceof j)g.target=g.target||d;else{var B=g;g=new j(P,d),b(g,B)}if(B=!0,w)for(var W=w.length-1;0<=W;W--){var se=g.g=w[W];B=ne(se,P,!0,g)&&B}if(se=g.g=d,B=ne(se,P,!0,g)&&B,B=ne(se,P,!1,g)&&B,w)for(W=0;W<w.length;W++)se=g.g=w[W],B=ne(se,P,!1,g)&&B}F.prototype.N=function(){if(F.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var w=d.g[g],P=0;P<w.length;P++)rn(w[P]);delete d.g[g],d.h--}}this.F=null},F.prototype.K=function(d,g,w,P){return this.i.add(String(d),g,!1,w,P)},F.prototype.L=function(d,g,w,P){return this.i.add(String(d),g,!0,w,P)};function ne(d,g,w,P){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,W=0;W<g.length;++W){var se=g[W];if(se&&!se.da&&se.capture==w){var pt=se.listener,Sn=se.ha||se.src;se.fa&&Hn(d.i,se),B=pt.call(Sn,P)!==!1&&B}}return B&&!P.defaultPrevented}function pe(d,g,w){if(typeof d=="function")w&&(d=p(d,w));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function xe(d){d.g=pe(()=>{d.g=null,d.i&&(d.i=!1,xe(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class ft extends Te{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(d){Te.call(this),this.h=d,this.g={}}y(cn,Te);var gt=[];function yn(d){O(d.g,function(g,w){this.g.hasOwnProperty(w)&&$r(g)},d),d.g={}}cn.prototype.N=function(){cn.aa.N.call(this),yn(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yt=a.JSON.stringify,sn=a.JSON.parse,yr=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function dn(){}dn.prototype.h=null;function oi(d){return d.h||(d.h=d.i())}function Ua(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){j.call(this,"d")}y(ls,j);function us(){j.call(this,"c")}y(us,j);var Kn={},ko=null;function ie(){return ko=ko||new F}Kn.La="serverreachability";function Ue(d){j.call(this,Kn.La,d)}y(Ue,j);function z(d){const g=ie();q(g,new Ue(g))}Kn.STAT_EVENT="statevent";function he(d,g){j.call(this,Kn.STAT_EVENT,d),this.stat=g}y(he,j);function G(d){const g=ie();q(g,new he(g,d))}Kn.Ma="timingevent";function _e(d,g){j.call(this,Kn.Ma,d),this.size=g}y(_e,j);function Je(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function tt(){this.g=!0}tt.prototype.xa=function(){this.g=!1};function Vt(d,g,w,P,B,W){d.info(function(){if(d.g)if(W)for(var se="",pt=W.split("&"),Sn=0;Sn<pt.length;Sn++){var nt=pt[Sn].split("=");if(1<nt.length){var On=nt[0];nt=nt[1];var jn=On.split("_");se=2<=jn.length&&jn[1]=="type"?se+(On+"="+nt+"&"):se+(On+"=redacted&")}}else se=null;else se=W;return"XMLHTTP REQ ("+P+") [attempt "+B+"]: "+g+`
`+w+`
`+se})}function Ot(d,g,w,P,B,W,se){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+B+"]: "+g+`
`+w+`
`+W+" "+se})}function Yt(d,g,w,P){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Nn(d,w)+(P?" "+P:"")})}function Wr(d,g){d.info(function(){return"TIMEOUT: "+g})}tt.prototype.info=function(){};function Nn(d,g){if(!d.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var P=w[d];if(!(2>P.length)){var B=P[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var se=1;se<B.length;se++)B[se]=""}}}}return yt(w)}catch{return g}}var Dn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cr;function Qn(){}y(Qn,dn),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Cr=new Qn;function vn(d,g,w,P){this.j=d,this.i=g,this.l=w,this.R=P||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vn}function Vn(){this.i=null,this.g="",this.h=!1}var tr={},oe={};function Ae(d,g,w){d.L=1,d.v=ah(Ci(g)),d.m=w,d.P=!0,Me(d,null)}function Me(d,g){d.F=Date.now(),Nr(d),d.A=Ci(d.v);var w=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),P_(w.i,"t",P),d.C=0,w=d.j.J,d.h=new Vn,d.g=H_(d.j,w?g:null,!d.m),0<d.O&&(d.M=new ft(p(d.Y,d,d.g),d.O)),g=d.U,w=d.g,P=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(gt[0]=B.toString()),B=gt);for(var W=0;W<B.length;W++){var se=Ai(w,B[W],P||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),z(),Vt(d.i,d.u,d.A,d.l,d.R,d.m)}vn.prototype.ca=function(d){d=d.target;const g=this.M;g&&Ri(d)==3?g.j():this.Y(d)},vn.prototype.Y=function(d){try{if(d==this.g)e:{const jn=Ri(this.g);var g=this.g.Ba();const $a=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||j_(this.g)))){this.J||jn!=4||g==7||(g==8||0>=$a?z(3):z(2)),Qm(this);var w=this.g.Z();this.X=w;t:if(rt(this)){var P=j_(this.g);d="";var B=P.length,W=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ao(this),Vu(this);var se="";break t}this.h.i=new a.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(P[g],{stream:!(W&&g==B-1)});P.length=0,this.h.g+=d,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=w==200,Ot(this.i,this.u,this.A,this.l,this.R,jn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,Sn=this.g;if((pt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(pt)){var nt=pt;break t}}nt=null}if(w=nt)Yt(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ym(this,w);else{this.o=!1,this.s=3,G(12),Ao(this),Vu(this);break e}}if(this.P){w=!0;let qr;for(;!this.J&&this.C<se.length;)if(qr=Rr(this,se),qr==oe){jn==4&&(this.s=4,G(14),w=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(qr==tr){this.s=4,G(15),Yt(this.i,this.l,se,"[Invalid Chunk]"),w=!1;break}else Yt(this.i,this.l,qr,null),Ym(this,qr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||se.length!=0||this.h.h||(this.s=1,G(16),w=!1),this.o=this.o&&w,!w)Yt(this.i,this.l,se,"[Invalid Chunked Response]"),Ao(this),Vu(this);else if(0<se.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),ng(On),On.M=!0,G(11))}}else Yt(this.i,this.l,se,null),Ym(this,se);jn==4&&Ao(this),this.o&&!this.J&&(jn==4?$_(this.j,this):(this.o=!1,Nr(this)))}else sV(this.g),w==400&&0<se.indexOf("Unknown SID")?(this.s=3,G(12)):(this.s=0,G(13)),Ao(this),Vu(this)}}}catch{}finally{}};function rt(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Rr(d,g){var w=d.C,P=g.indexOf(`
`,w);return P==-1?oe:(w=Number(g.substring(w,P)),isNaN(w)?tr:(P+=1,P+w>g.length?oe:(g=g.slice(P,P+w),d.C=P+w,g)))}vn.prototype.cancel=function(){this.J=!0,Ao(this)};function Nr(d){d.S=Date.now()+d.I,Km(d,d.I)}function Km(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Je(p(d.ba,d),g)}function Qm(d){d.B&&(a.clearTimeout(d.B),d.B=null)}vn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Wr(this.i,this.A),this.L!=2&&(z(),G(17)),Ao(this),this.s=2,Vu(this)):Km(this,this.S-d)};function Vu(d){d.j.G==0||d.J||$_(d.j,d)}function Ao(d){Qm(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,yn(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Ym(d,g){try{var w=d.j;if(w.G!=0&&(w.g==d||Jm(w.h,d))){if(!d.K&&Jm(w.h,d)&&w.G==3){try{var P=w.Da.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var B=P;if(B[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)fh(w),dh(w);else break e;tg(w),G(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=Je(p(w.Za,w),6e3));if(1>=x_(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Co(w,11)}else if((d.K||w.g==d)&&fh(w),!x(g))for(B=w.Da.g.parse(g),g=0;g<B.length;g++){let nt=B[g];if(w.T=nt[0],nt=nt[1],w.G==2)if(nt[0]=="c"){w.K=nt[1],w.ia=nt[2];const On=nt[3];On!=null&&(w.la=On,w.j.info("VER="+w.la));const jn=nt[4];jn!=null&&(w.Aa=jn,w.j.info("SVER="+w.Aa));const $a=nt[5];$a!=null&&typeof $a=="number"&&0<$a&&(P=1.5*$a,w.L=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const qr=d.g;if(qr){const mh=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mh){var W=P.h;W.g||mh.indexOf("spdy")==-1&&mh.indexOf("quic")==-1&&mh.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Xm(W,W.h),W.h=null))}if(P.D){const rg=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;rg&&(P.ya=rg,It(P.I,P.D,rg))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),P=w;var se=d;if(P.qa=G_(P,P.J?P.ia:null,P.W),se.K){__(P.h,se);var pt=se,Sn=P.L;Sn&&(pt.I=Sn),pt.B&&(Qm(pt),Nr(pt)),P.g=se}else B_(P);0<w.i.length&&hh(w)}else nt[0]!="stop"&&nt[0]!="close"||Co(w,7);else w.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Co(w,7):eg(w):nt[0]!="noop"&&w.l&&w.l.ta(nt),w.v=0)}}z(4)}catch{}}var $D=class{constructor(d,g){this.g=d,this.map=g}};function v_(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function w_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function x_(d){return d.h?1:d.g?d.g.size:0}function Jm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Xm(d,g){d.g?d.g.add(g):d.h=g}function __(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}v_.prototype.cancel=function(){if(this.i=E_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function E_(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const w of d.g.values())g=g.concat(w.D);return g}return v(d.i)}function WD(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],w=d.length,P=0;P<w;P++)g.push(d[P]);return g}g=[],w=0;for(P in d)g[w++]=d[P];return g}function qD(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var w=0;w<d;w++)g.push(w);return g}g=[],w=0;for(const P in d)g[w++]=P;return g}}}function T_(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var w=qD(d),P=WD(d),B=P.length,W=0;W<B;W++)g.call(void 0,P[W],w&&w[W],d)}var I_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GD(d,g){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var P=d[w].indexOf("="),B=null;if(0<=P){var W=d[w].substring(0,P);B=d[w].substring(P+1)}else W=d[w];g(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Po(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Po){this.h=d.h,sh(this,d.j),this.o=d.o,this.g=d.g,oh(this,d.s),this.l=d.l;var g=d.i,w=new Mu;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),S_(this,w),this.m=d.m}else d&&(g=String(d).match(I_))?(this.h=!1,sh(this,g[1]||"",!0),this.o=Ou(g[2]||""),this.g=Ou(g[3]||"",!0),oh(this,g[4]),this.l=Ou(g[5]||"",!0),S_(this,g[6]||"",!0),this.m=Ou(g[7]||"")):(this.h=!1,this.i=new Mu(null,this.h))}Po.prototype.toString=function(){var d=[],g=this.j;g&&d.push(ju(g,b_,!0),":");var w=this.g;return(w||g=="file")&&(d.push("//"),(g=this.o)&&d.push(ju(g,b_,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(ju(w,w.charAt(0)=="/"?QD:KD,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",ju(w,JD)),d.join("")};function Ci(d){return new Po(d)}function sh(d,g,w){d.j=w?Ou(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function oh(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function S_(d,g,w){g instanceof Mu?(d.i=g,XD(d.i,d.h)):(w||(g=ju(g,YD)),d.i=new Mu(g,d.h))}function It(d,g,w){d.i.set(g,w)}function ah(d){return It(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ou(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ju(d,g,w){return typeof d=="string"?(d=encodeURI(d).replace(g,HD),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function HD(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var b_=/[#\/\?@]/g,KD=/[#\?:]/g,QD=/[#\?]/g,YD=/[#\?@]/g,JD=/#/g;function Mu(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function cs(d){d.g||(d.g=new Map,d.h=0,d.i&&GD(d.i,function(g,w){d.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Mu.prototype,t.add=function(d,g){cs(this),this.i=null,d=Ba(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(g),this.h+=1,this};function k_(d,g){cs(d),g=Ba(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function A_(d,g){return cs(d),g=Ba(d,g),d.g.has(g)}t.forEach=function(d,g){cs(this),this.g.forEach(function(w,P){w.forEach(function(B){d.call(g,B,P,this)},this)},this)},t.na=function(){cs(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let P=0;P<g.length;P++){const B=d[P];for(let W=0;W<B.length;W++)w.push(g[P])}return w},t.V=function(d){cs(this);let g=[];if(typeof d=="string")A_(this,d)&&(g=g.concat(this.g.get(Ba(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)g=g.concat(d[w])}return g},t.set=function(d,g){return cs(this),this.i=null,d=Ba(this,d),A_(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function P_(d,g,w){k_(d,g),0<w.length&&(d.i=null,d.g.set(Ba(d,g),v(w)),d.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var P=g[w];const W=encodeURIComponent(String(P)),se=this.V(P);for(P=0;P<se.length;P++){var B=W;se[P]!==""&&(B+="="+encodeURIComponent(String(se[P]))),d.push(B)}}return this.i=d.join("&")};function Ba(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function XD(d,g){g&&!d.j&&(cs(d),d.i=null,d.g.forEach(function(w,P){var B=P.toLowerCase();P!=B&&(k_(this,P),P_(this,B,w))},d)),d.j=g}function ZD(d,g){const w=new tt;if(a.Image){const P=new Image;P.onload=m(ds,w,"TestLoadImage: loaded",!0,g,P),P.onerror=m(ds,w,"TestLoadImage: error",!1,g,P),P.onabort=m(ds,w,"TestLoadImage: abort",!1,g,P),P.ontimeout=m(ds,w,"TestLoadImage: timeout",!1,g,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else g(!1)}function eV(d,g){const w=new tt,P=new AbortController,B=setTimeout(()=>{P.abort(),ds(w,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:P.signal}).then(W=>{clearTimeout(B),W.ok?ds(w,"TestPingServer: ok",!0,g):ds(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),ds(w,"TestPingServer: error",!1,g)})}function ds(d,g,w,P,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),P(w)}catch{}}function tV(){this.g=new yr}function nV(d,g,w){const P=w||"";try{T_(d,function(B,W){let se=B;u(B)&&(se=yt(B)),g.push(P+W+"="+encodeURIComponent(se))})}catch(B){throw g.push(P+"type="+encodeURIComponent("_badmap")),B}}function lh(d){this.l=d.Ub||null,this.j=d.eb||!1}y(lh,dn),lh.prototype.g=function(){return new uh(this.l,this.j)},lh.prototype.i=function(d){return function(){return d}}({});function uh(d,g){F.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(uh,F),t=uh.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Fu(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lu(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function C_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Lu(this):Fu(this),this.readyState==3&&C_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Lu(this))},t.Qa=function(d){this.g&&(this.response=d,Lu(this))},t.ga=function(){this.g&&Lu(this)};function Lu(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Fu(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=g.next();return d.join(`\r
`)};function Fu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(uh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function R_(d){let g="";return O(d,function(w,P){g+=P,g+=":",g+=w,g+=`\r
`}),g}function Zm(d,g,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=R_(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):It(d,g,w))}function zt(d){F.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(zt,F);var rV=/^https?$/i,iV=["POST","PUT"];t=zt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cr.g(),this.v=this.o?oi(this.o):oi(Cr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(W){N_(this,W);return}if(d=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var B in P)w.set(B,P[B]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const W of P.keys())w.set(W,P.get(W));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),B=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iV,g,void 0))||P||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,se]of w)this.g.setRequestHeader(W,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O_(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){N_(this,W)}};function N_(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,D_(d),ch(d)}function D_(d){d.A||(d.A=!0,q(d,"complete"),q(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,q(this,"complete"),q(this,"abort"),ch(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ch(this,!0)),zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?V_(this):this.bb())},t.bb=function(){V_(this)};function V_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Ri(d)!=4||d.Z()!=2)){if(d.u&&Ri(d)==4)pe(d.Ea,0,d);else if(q(d,"readystatechange"),Ri(d)==4){d.h=!1;try{const se=d.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var P;if(P=se===0){var B=String(d.D).match(I_)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),P=!rV.test(B?B.toLowerCase():"")}w=P}if(w)q(d,"complete"),q(d,"success");else{d.m=6;try{var W=2<Ri(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",D_(d)}}finally{ch(d)}}}}function ch(d,g){if(d.g){O_(d);const w=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||q(d,"ready");try{w.onreadystatechange=P}catch{}}}function O_(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Ri(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),sn(g)}};function j_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function sV(d){const g={};d=(d.g&&2<=Ri(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(x(d[P]))continue;var w=R(d[P]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=g[B]||[];g[B]=W,W.push(w)}S(g,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uu(d,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||g}function M_(d){this.Aa=0,this.i=[],this.j=new tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uu("baseRetryDelayMs",5e3,d),this.cb=Uu("retryDelaySeedMs",1e4,d),this.Wa=Uu("forwardChannelMaxRetries",2,d),this.wa=Uu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new v_(d&&d.concurrentRequestLimit),this.Da=new tV,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=M_.prototype,t.la=8,t.G=1,t.connect=function(d,g,w,P){G(0),this.W=d,this.H=g||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.I=G_(this,null,this.W),hh(this)};function eg(d){if(L_(d),d.G==3){var g=d.U++,w=Ci(d.I);if(It(w,"SID",d.K),It(w,"RID",g),It(w,"TYPE","terminate"),Bu(d,w),g=new vn(d,d.j,g),g.L=2,g.v=ah(Ci(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.v,w=!0),w||(g.g=H_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Nr(g)}q_(d)}function dh(d){d.g&&(ng(d),d.g.cancel(),d.g=null)}function L_(d){dh(d),d.u&&(a.clearTimeout(d.u),d.u=null),fh(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function hh(d){if(!w_(d.h)&&!d.s){d.s=!0;var g=d.Ga;Ie||N(),X||(Ie(),X=!0),ce.add(g,d),d.B=0}}function oV(d,g){return x_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Je(p(d.Ga,d,g),W_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const B=new vn(this,this.j,d);let W=this.o;if(this.S&&(W?(W=T(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=U_(this,B,g),w=Ci(this.I),It(w,"RID",d),It(w,"CVER",22),this.D&&It(w,"X-HTTP-Session-Id",this.D),Bu(this,w),W&&(this.O?g="headers="+encodeURIComponent(String(R_(W)))+"&"+g:this.m&&Zm(w,this.m,W)),Xm(this.h,B),this.Ua&&It(w,"TYPE","init"),this.P?(It(w,"$req",g),It(w,"SID","null"),B.T=!0,Ae(B,w,null)):Ae(B,w,g),this.G=2}}else this.G==3&&(d?F_(this,d):this.i.length==0||w_(this.h)||F_(this))};function F_(d,g){var w;g?w=g.l:w=d.U++;const P=Ci(d.I);It(P,"SID",d.K),It(P,"RID",w),It(P,"AID",d.T),Bu(d,P),d.m&&d.o&&Zm(P,d.m,d.o),w=new vn(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),g&&(d.i=g.D.concat(d.i)),g=U_(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Xm(d.h,w),Ae(w,P,g)}function Bu(d,g){d.H&&O(d.H,function(w,P){It(g,P,w)}),d.l&&T_({},function(w,P){It(g,P,w)})}function U_(d,g,w){w=Math.min(d.i.length,w);var P=d.l?p(d.l.Na,d.l,d):null;e:{var B=d.i;let W=-1;for(;;){const se=["count="+w];W==-1?0<w?(W=B[0].g,se.push("ofs="+W)):W=0:se.push("ofs="+W);let pt=!0;for(let Sn=0;Sn<w;Sn++){let nt=B[Sn].g;const On=B[Sn].map;if(nt-=W,0>nt)W=Math.max(0,B[Sn].g-100),pt=!1;else try{nV(On,se,"req"+nt+"_")}catch{P&&P(On)}}if(pt){P=se.join("&");break e}}}return d=d.i.splice(0,w),g.D=d,P}function B_(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Ie||N(),X||(Ie(),X=!0),ce.add(g,d),d.v=0}}function tg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Je(p(d.Fa,d),W_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,z_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Je(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,G(10),dh(this),z_(this))};function ng(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function z_(d){d.g=new vn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ci(d.qa);It(g,"RID","rpc"),It(g,"SID",d.K),It(g,"AID",d.T),It(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&It(g,"TO",d.ja),It(g,"TYPE","xmlhttp"),Bu(d,g),d.m&&d.o&&Zm(g,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=ah(Ci(g)),w.m=null,w.P=!0,Me(w,d)}t.Za=function(){this.C!=null&&(this.C=null,dh(this),tg(this),G(19))};function fh(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function $_(d,g){var w=null;if(d.g==g){fh(d),ng(d),d.g=null;var P=2}else if(Jm(d.h,g))w=g.D,__(d.h,g),P=1;else return;if(d.G!=0){if(g.o)if(P==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;P=ie(),q(P,new _e(P,w)),hh(d)}else B_(d);else if(B=g.s,B==3||B==0&&0<g.X||!(P==1&&oV(d,g)||P==2&&tg(d)))switch(w&&0<w.length&&(g=d.h,g.i=g.i.concat(w)),B){case 1:Co(d,5);break;case 4:Co(d,10);break;case 3:Co(d,6);break;default:Co(d,2)}}}function W_(d,g){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*g}function Co(d,g){if(d.j.info("Error code "+g),g==2){var w=p(d.fb,d),P=d.Xa;const B=!P;P=new Po(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sh(P,"https"),ah(P),B?ZD(P.toString(),w):eV(P.toString(),w)}else G(2);d.G=0,d.l&&d.l.sa(g),q_(d),L_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),G(2)):(this.j.info("Failed to ping google.com"),G(1))};function q_(d){if(d.G=0,d.ka=[],d.l){const g=E_(d.h);(g.length!=0||d.i.length!=0)&&(I(d.ka,g),I(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function G_(d,g,w){var P=w instanceof Po?Ci(w):new Po(w);if(P.g!="")g&&(P.g=g+"."+P.g),oh(P,P.s);else{var B=a.location;P=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var W=new Po(null);P&&sh(W,P),g&&(W.g=g),B&&oh(W,B),w&&(W.l=w),P=W}return w=d.D,g=d.ya,w&&g&&It(P,w,g),It(P,"VER",d.la),Bu(d,P),P}function H_(d,g,w){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new zt(new lh({eb:w})):new zt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function K_(){}t=K_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ph(){}ph.prototype.g=function(d,g){return new vr(d,g)};function vr(d,g){F.call(this),this.g=new M_(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!x(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new za(this)}y(vr,F),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){eg(this.g)},vr.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=yt(d),d=w);g.i.push(new $D(g.Ya++,d)),g.G==3&&hh(g)},vr.prototype.N=function(){this.g.l=null,delete this.j,eg(this.g),delete this.g,vr.aa.N.call(this)};function Q_(d){ls.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const w in g){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(Q_,ls);function Y_(){us.call(this),this.status=1}y(Y_,us);function za(d){this.g=d}y(za,K_),za.prototype.ua=function(){q(this.g,"a")},za.prototype.ta=function(d){q(this.g,new Q_(d))},za.prototype.sa=function(d){q(this.g,new Y_)},za.prototype.ra=function(){q(this.g,"b")},ph.prototype.createWebChannel=ph.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,zP=function(){return new ph},BP=function(){return ie()},UP=Kn,T0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dn.NO_ERROR=0,Dn.TIMEOUT=8,Dn.HTTP_ERROR=6,gf=Dn,jt.COMPLETE="complete",FP=jt,Ua.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",F.prototype.listen=F.prototype.K,dc=Ua,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,LP=zt}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const $T="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new yw("@firebase/firestore");function Ja(){return eo.logLevel}function v5(t){eo.setLogLevel(t)}function Q(t,...e){if(eo.logLevel<=qe.DEBUG){const n=e.map(Cw);eo.debug(`Firestore (${wu}): ${t}`,...n)}}function Xt(t,...e){if(eo.logLevel<=qe.ERROR){const n=e.map(Cw);eo.error(`Firestore (${wu}): ${t}`,...n)}}function Sr(t,...e){if(eo.logLevel<=qe.WARN){const n=e.map(Cw);eo.warn(`Firestore (${wu}): ${t}`,...n)}}function Cw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${wu}) INTERNAL ASSERTION FAILED: `+t;throw Xt(e),new Error(e)}function ge(t,e){t||fe()}function w5(t,e){t||fe()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_n.UNAUTHENTICATED))}shutdown(){}}class x5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _5{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new $P(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new _n(e)}}class E5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class T5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new E5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ge(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new qP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class S5{getToken(){return Promise.resolve(new qP(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=b5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function ql(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function GP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Pt(0,0))}static max(){return new Ee(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends cd{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const k5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends cd{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return k5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ge.fromString(e))}static fromName(e){return new le(Ge.fromString(e).popFirst(5))}static empty(){return new le(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function I0(t){return t.fields.find(e=>e.kind===2)}function Lo(t){return t.fields.filter(e=>e.kind!==2)}function A5(t,e){let n=Ce(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=P5(t.fields[r],e.fields[r]),n!==0)return n;return Ce(t.fields.length,e.fields.length)}Gl.UNKNOWN_ID=-1;class oa{constructor(e,n){this.fieldPath=e,this.kind=n}}function P5(t,e){const n=kt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Ce(t.kind,e.kind)}class Hl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hl(0,br.min())}}function HP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new br(i,le.empty(),e)}function KP(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(Ee.min(),le.empty(),-1)}static max(){return new br(Ee.max(),le.empty(),-1)}}function Nw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==QP)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Tn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new bc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Dw(r.target.error);this.V.reject(new bc(e,i))}}static open(e,n,r,i){try{return new hm(n,e.transaction(i,r))}catch(s){throw new bc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new R5(n)}}class wi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,wi.S(mn())===12.2&&Xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Q("SimpleDb","Removing database:",e),Wo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!QA())return!1;if(wi.v())return!0;const e=mn(),n=wi.S(e),r=0<n&&n<10,i=JP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new bc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new K($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new bc(e,o))},i.onupgradeneeded=s=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=hm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),U.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function JP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class C5{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wo(this.B.delete())}}class bc extends K{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function vo(t){return t.name==="IndexedDbTransactionError"}class R5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wo(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),Wo(this.store.add(e))}get(e){return Wo(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),Wo(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),Wo(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new U((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new U((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new U((r,i)=>{n.onerror=s=>{const o=Dw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new U((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new C5(a),u=n(a.primaryKey,a.value,l);if(u instanceof U){const c=u.catch(h=>(l.done(),U.reject(h)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>U.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Wo(t){return new U((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Dw(r.target.error);n(i)}})}let WT=!1;function Dw(t){const e=wi.S(mn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WT||(WT=!0,setTimeout(()=>{throw r},0)),r}}return t}class N5{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){vo(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await yo(n)}await this.X(6e4)})}}class D5{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return U.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=KP(s);Nw(o,r)>0&&(r=o)}),new br(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sr.oe=-1;function Ld(t){return t==null}function dd(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!dd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qT(e)),e=V5(t.get(n),e);return qT(e)}function V5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qT(t){return t+""}function pi(t){const e=t.length;if(ge(e>=2),e===2)return ge(t.charAt(0)===""&&t.charAt(1)===""),Ge.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&fe(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:fe()}s=o+2}return new Ge(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){return[t,$n(e)]}function ZP(t,e,n){return[t,$n(e),n]}const O5={},j5=["prefixPath","collectionGroup","readTime","documentId"],M5=["prefixPath","collectionGroup","documentId"],L5=["collectionGroup","readTime","prefixPath","documentId"],F5=["canonicalId","targetId"],U5=["targetId","path"],B5=["path","targetId"],z5=["collectionId","parent"],$5=["indexId","uid"],W5=["uid","sequenceNumber"],q5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G5=["indexId","uid","orderedDocumentKey"],H5=["userId","collectionPath","documentId"],K5=["userId","collectionPath","largestBatchId"],Q5=["userId","collectionGroup","largestBatchId"],eC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y5=[...eC,"documentOverlays"],tC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nC=tC,Vw=[...nC,"indexConfiguration","indexState","indexEntries"],J5=Vw,X5=[...Vw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends YP{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function gn(t,e){const n=re(t);return wi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rC(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||kn.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kn.RED,this.left=i??kn.EMPTY,this.right=s??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KT(this.data.getIterator())}getIteratorFrom(e){return new KT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class KT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new or([])}unionWith(e){let n=new dt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sC("Invalid base64 string: "+s):s}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const e3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(ge(!!t),typeof t=="string"){let e=0;const n=e3.exec(t);if(ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pm(t){const e=t.mapValue.fields.__previous_value__;return fm(e)?pm(e):e}function hd(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class to{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new to("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vf={nullValue:"NULL_VALUE"};function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fm(t)?4:oC(t)?9007199254740991:mm(t)?10:11:fe()}function Ii(t,e){if(t===e)return!0;const n=no(t);if(n!==no(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hd(t).isEqual(hd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zi(i.timestampValue),a=Zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ct(i.geoPointValue.latitude)===Ct(s.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ct(i.integerValue)===Ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ct(i.doubleValue),a=Ct(s.doubleValue);return o===a?dd(o)===dd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ql(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HT(o)!==HT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ii(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function fd(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function ro(t,e){if(t===e)return 0;const n=no(t),r=no(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ct(s.integerValue||s.doubleValue),l=Ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return QT(t.timestampValue,e.timestampValue);case 4:return QT(hd(t),hd(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(s,o){const a=es(s),l=es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Ce(a[u],l[u]);if(c!==0)return c}return Ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ce(Ct(s.latitude),Ct(o.latitude));return a!==0?a:Ce(Ct(s.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Ce(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0);return v!==0?v:YT(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Vs.mapValue&&o===Vs.mapValue)return 0;if(s===Vs.mapValue)return 1;if(o===Vs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const p=Ce(l[h],c[h]);if(p!==0)return p;const m=ro(a[l[h]],u[c[h]]);if(m!==0)return m}return Ce(l.length,c.length)}(t.mapValue,e.mapValue);default:throw fe()}}function QT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Zi(t),r=Zi(e),i=Ce(n.seconds,r.seconds);return i!==0?i:Ce(n.nanos,r.nanos)}function YT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ro(n[i],r[i]);if(s)return s}return Ce(n.length,r.length)}function Kl(t){return b0(t)}function b0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=b0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${b0(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function wf(t){switch(no(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pm(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return es(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+wf(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return wo(r.fields,(s,o)=>{i+=s.length+wf(o)}),i}(t.mapValue);default:throw fe()}}function va(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k0(t){return!!t&&"integerValue"in t}function pd(t){return!!t&&"arrayValue"in t}function JT(t){return!!t&&"nullValue"in t}function XT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xf(t){return!!t&&"mapValue"in t}function mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function kc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=kc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const aC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function n3(t){return"nullValue"in t?vf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?va(to.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?mm(t)?aC:{mapValue:{}}:fe()}function r3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?va(to.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?aC:"mapValue"in t?mm(t)?{mapValue:{}}:Vs:fe()}function ZT(t,e){const n=ro(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function eI(t,e){const n=ro(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=kc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(kc(this.value))}}function lC(t){const e=[];return wo(t.fields,(n,r)=>{const i=new kt([n]);if(xf(r)){const s=lC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,Ee.min(),Ee.min(),Ee.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new bt(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new bt(e,2,n,Ee.min(),Ee.min(),An.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Ee.min(),Ee.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.position=e,this.inclusive=n}}function tI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=ro(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n="asc"){this.field=e,this.dir=n}}function i3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{}class He extends uC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new s3(e,n,r):n==="array-contains"?new l3(e,r):n==="in"?new mC(e,r):n==="not-in"?new u3(e,r):n==="array-contains-any"?new c3(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o3(e,r):new a3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ro(n,this.value)):n!==null&&no(this.value)===no(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ut extends uC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ut(e,n)}matches(e){return Ql(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ql(t){return t.op==="and"}function A0(t){return t.op==="or"}function Ow(t){return cC(t)&&Ql(t)}function cC(t){for(const e of t.filters)if(e instanceof ut)return!1;return!0}function P0(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Kl(t.value);if(Ow(t))return t.filters.map(e=>P0(e)).join(",");{const e=t.filters.map(n=>P0(n)).join(",");return`${t.op}(${e})`}}function dC(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)}(t,e):t instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&dC(o,i.filters[a]),!0):!1}(t,e):void fe()}function hC(t,e){const n=t.filters.concat(e);return ut.create(n,t.op)}function fC(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Kl(n.value)}`}(t):t instanceof ut?function(n){return n.op.toString()+" {"+n.getFilters().map(fC).join(" ,")+"}"}(t):"Filter"}class s3 extends He{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class o3 extends He{constructor(e,n){super(e,"in",n),this.keys=pC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a3 extends He{constructor(e,n){super(e,"not-in",n),this.keys=pC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class l3 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pd(n)&&fd(n.arrayValue,this.value)}}class mC extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fd(this.value.arrayValue,n)}}class u3 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fd(this.value.arrayValue,n)}}class c3 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function C0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new d3(t,e,n,r,i,s,o)}function wa(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>P0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kl(r)).join(",")),e.ue=n}return e.ue}function Fd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!i3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nI(t.startAt,e.startAt)&&nI(t.endAt,e.endAt)}function hp(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fp(t,e){return t.filters.filter(n=>n instanceof He&&n.field.isEqual(e))}function rI(t,e,n){let r=vf,i=!0;for(const s of fp(t,e)){let o=vf,a=!0;switch(s.op){case"<":case"<=":o=n3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=vf}ZT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];ZT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function iI(t,e,n){let r=Vs,i=!0;for(const s of fp(t,e)){let o=Vs,a=!0;switch(s.op){case">=":case">":o=r3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Vs}eI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];eI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gC(t,e,n,r,i,s,o,a){return new is(t,e,n,r,i,s,o,a)}function xu(t){return new is(t)}function sI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jw(t){return t.collectionGroup!==null}function Al(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new md(s,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new md(kt.keyField(),r))}return e.ce}function Wn(t){const e=re(t);return e.le||(e.le=vC(e,Al(t))),e.le}function yC(t){const e=re(t);return e.he||(e.he=vC(e,t.explicitOrderBy)),e.he}function vC(t,e){if(t.limitType==="F")return C0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new md(i.field,s)});const n=t.endAt?new io(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new io(t.startAt.position,t.startAt.inclusive):null;return C0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R0(t,e){const n=t.filters.concat([e]);return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pp(t,e,n){return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ud(t,e){return Fd(Wn(t),Wn(e))&&t.limitType===e.limitType}function wC(t){return`${wa(Wn(t))}|lt:${t.limitType}`}function Xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fC(i)).join(", ")}]`),Ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Kl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Kl(i)).join(",")),`Target(${r})`}(Wn(t))}; limitType=${t.limitType})`}function Bd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Al(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=tI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Al(r),i)||r.endAt&&!function(o,a,l){const u=tI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Al(r),i))}(t,e)}function xC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _C(t){return(e,n)=>{let r=!1;for(const i of Al(t)){const s=h3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function h3(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ro(l,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return iC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new Tt(le.comparator);function ar(){return f3}const EC=new Tt(le.comparator);function hc(...t){let e=EC;for(const n of t)e=e.insert(n.key,n);return e}function TC(t){let e=EC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return Ac()}function IC(){return Ac()}function Ac(){return new ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const p3=new Tt(le.comparator),m3=new dt(le.comparator);function je(...t){let e=m3;for(const n of t)e=e.add(n);return e}const g3=new dt(Ce);function Mw(){return g3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function SC(t){return{integerValue:""+t}}function bC(t,e){return XP(e)?SC(e):Lw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this._=void 0}}function y3(t,e,n){return t instanceof Yl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fm(s)&&(s=pm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xa?AC(t,e):t instanceof _a?PC(t,e):function(i,s){const o=kC(i,s),a=oI(o)+oI(i.Pe);return k0(o)&&k0(i.Pe)?SC(a):Lw(i.serializer,a)}(t,e)}function v3(t,e,n){return t instanceof xa?AC(t,e):t instanceof _a?PC(t,e):n}function kC(t,e){return t instanceof Jl?function(r){return k0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yl extends gm{}class xa extends gm{constructor(e){super(),this.elements=e}}function AC(t,e){const n=CC(e);for(const r of t.elements)n.some(i=>Ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends gm{constructor(e){super(),this.elements=e}}function PC(t,e){let n=CC(e);for(const r of t.elements)n=n.filter(i=>!Ii(i,r));return{arrayValue:{values:n}}}class Jl extends gm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function oI(t){return Ct(t.integerValue||t.doubleValue)}function CC(t){return pd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n){this.field=e,this.transform=n}}function w3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xa&&i instanceof xa||r instanceof _a&&i instanceof _a?ql(r.elements,i.elements,Ii):r instanceof Jl&&i instanceof Jl?Ii(r.Pe,i.Pe):r instanceof Yl&&i instanceof Yl}(t.transform,e.transform)}class x3{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _f(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ym{}function RC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eu(t.key,Nt.none()):new _u(t.key,t.data,Nt.none());{const n=t.data,r=An.empty();let i=new dt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new os(t.key,r,new or(i.toArray()),Nt.none())}}function _3(t,e,n){t instanceof _u?function(i,s,o){const a=i.value.clone(),l=lI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(i,s,o){if(!_f(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=lI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(NC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pc(t,e,n,r){return t instanceof _u?function(s,o,a,l){if(!_f(s.precondition,o))return a;const u=s.value.clone(),c=uI(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(s,o,a,l){if(!_f(s.precondition,o))return a;const u=uI(s.fieldTransforms,l,o),c=o.data;return c.setAll(NC(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return _f(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function E3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=kC(r.transform,i||null);s!=null&&(n===null&&(n=An.empty()),n.set(r.field,s))}return n||null}function aI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ql(r,i,(s,o)=>w3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _u extends ym{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends ym{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lI(t,e,n){const r=new Map;ge(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,v3(o,a,n[i]))}return r}function uI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,y3(s,o,e))}return r}class Eu extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fw extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=RC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(n,r)=>aI(n,r))&&ql(this.baseMutations,e.baseMutations,(n,r)=>aI(n,r))}}class Bw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length);let i=function(){return p3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Bw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,Xe;function VC(t){switch(t){default:return fe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function OC(t){if(t===void 0)return Xt("GRPC error has no .code"),$.UNKNOWN;switch(t){case on.OK:return $.OK;case on.CANCELLED:return $.CANCELLED;case on.UNKNOWN:return $.UNKNOWN;case on.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case on.INTERNAL:return $.INTERNAL;case on.UNAVAILABLE:return $.UNAVAILABLE;case on.UNAUTHENTICATED:return $.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case on.NOT_FOUND:return $.NOT_FOUND;case on.ALREADY_EXISTS:return $.ALREADY_EXISTS;case on.PERMISSION_DENIED:return $.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case on.ABORTED:return $.ABORTED;case on.OUT_OF_RANGE:return $.OUT_OF_RANGE;case on.UNIMPLEMENTED:return $.UNIMPLEMENTED;case on.DATA_LOSS:return $.DATA_LOSS;default:return fe()}}(Xe=on||(on={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=new sa([4294967295,4294967295],0);function cI(t){const e=jC().encode(t),n=new MP;return n.update(e),new Uint8Array(n.digest())}function dI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sa([n,r],0),new sa([i,s],0)]}class $w{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=sa.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(sa.fromNumber(r)));return i.compare(I3)===1&&(i=new sa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cI(e),[r,i]=dI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $w(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=cI(e),[r,i]=dI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $d(Ee.min(),i,new Tt(Ce),ar(),je())}}class Wd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wd(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class MC{constructor(e,n){this.targetId=e,this.me=n}}class LC{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hI{constructor(){this.fe=0,this.ge=pI(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new Wd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=pI()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S3{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=fI(),this.Qe=new Tt(Ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(hp(s))if(r===0){const o=new le(s.path);this.Ue(n,o,bt.newNoDocument(o,Ee.min()))}else ge(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}mp==null||mp.et(function(c,h,p,m,y){var v,I,_,x,E,V;const M={localCacheCount:c,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},O=h.unchangedNames;return O&&(M.bloomFilter={applied:y===0,hashCount:(v=O==null?void 0:O.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(x=(_=(I=O==null?void 0:O.bits)===null||I===void 0?void 0:I.bitmap)===null||_===void 0?void 0:_.length)!==null&&x!==void 0?x:0,padding:(V=(E=O==null?void 0:O.bits)===null||E===void 0?void 0:E.padding)!==null&&V!==void 0?V:0,mightContain:S=>{var T;return(T=m==null?void 0:m.mightContain(S))!==null&&T!==void 0&&T}}),M}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=es(r).toUint8Array()}catch(l){if(l instanceof sC)return Sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $w(o,i,s)}catch(l){return Sr(l instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hp(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,bt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=je();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new $d(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=fI(),this.Qe=new Tt(Ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hI,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hI),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fI(){return new Tt(le.comparator)}function pI(){return new Tt(le.comparator)}const b3={asc:"ASCENDING",desc:"DESCENDING"},k3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A3={and:"AND",or:"OR"};class P3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N0(t,e){return t.useProto3Json||Ld(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C3(t,e){return Xl(t,e.toTimestamp())}function tn(t){return ge(!!t),Ee.fromTimestamp(function(n){const r=Zi(n);return new Pt(r.seconds,r.nanos)}(t))}function Ww(t,e){return D0(t,e).canonicalString()}function D0(t,e){const n=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UC(t){const e=Ge.fromString(t);return ge(YC(e)),e}function gd(t,e){return Ww(t.databaseId,e.path)}function xi(t,e){const n=UC(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le($C(n))}function BC(t,e){return Ww(t.databaseId,e)}function zC(t){const e=UC(t);return e.length===4?Ge.emptyPath():$C(e)}function V0(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $C(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mI(t,e,n){return{name:gd(t,e),fields:n.value.mapValue.fields}}function WC(t,e,n){const r=xi(t,e.name),i=tn(e.updateTime),s=e.createTime?tn(e.createTime):Ee.min(),o=new An({mapValue:{fields:e.fields}}),a=bt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function R3(t,e){return"found"in e?function(r,i){ge(!!i.found),i.found.name,i.found.updateTime;const s=xi(r,i.found.name),o=tn(i.found.updateTime),a=i.found.createTime?tn(i.found.createTime):Ee.min(),l=new An({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ge(!!i.missing),ge(!!i.readTime);const s=xi(r,i.missing),o=tn(i.readTime);return bt.newNoDocument(s,o)}(t,e):fe()}function N3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ge(c===void 0||typeof c=="string"),Bt.fromBase64String(c||"")):(ge(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Bt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?$.UNKNOWN:OC(u.code);return new K(c,u.message||"")}(o);n=new LC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xi(t,r.document.name),s=tn(r.document.updateTime),o=r.document.createTime?tn(r.document.createTime):Ee.min(),a=new An({mapValue:{fields:r.document.fields}}),l=bt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Ef(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xi(t,r.document),s=r.readTime?tn(r.readTime):Ee.min(),o=bt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ef([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xi(t,r.document),s=r.removedTargetIds||[];n=new Ef([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new T3(i,s),a=r.targetId;n=new MC(a,o)}}return n}function yd(t,e){let n;if(e instanceof _u)n={update:mI(t,e.key,e.value)};else if(e instanceof Eu)n={delete:gd(t,e.key)};else if(e instanceof os)n={update:mI(t,e.key,e.data),updateMask:L3(e.fieldMask)};else{if(!(e instanceof Fw))return fe();n={verify:gd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:C3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function O0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Nt.updateTime(tn(s.updateTime)):s.exists!==void 0?Nt.exists(s.exists):Nt.none()}(e.currentDocument):Nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ge(a.setToServerValue==="REQUEST_TIME"),l=new Yl;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new xa(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new _a(c)}else"increment"in a?l=new Jl(o,a.increment):fe();const u=kt.fromServerFormat(a.fieldPath);return new zd(u,l)}(t,i)):[];if(e.update){e.update.name;const i=xi(t,e.update.name),s=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new or(u.map(c=>kt.fromServerFormat(c)))}(e.updateMask);return new os(i,s,o,n,r)}return new _u(i,s,n,r)}if(e.delete){const i=xi(t,e.delete);return new Eu(i,n)}if(e.verify){const i=xi(t,e.verify);return new Fw(i,n)}return fe()}function D3(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?tn(i.updateTime):tn(s);return o.isEqual(Ee.min())&&(o=tn(s)),new x3(o,i.transformResults||[])}(n,e))):[]}function qC(t,e){return{documents:[BC(t,e.path)]}}function vm(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BC(t,i);const s=function(u){if(u.length!==0)return QC(ut.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(p){return{field:As(p.field),direction:O3(p.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=N0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function GC(t,e,n,r){const{_t:i,parent:s}=vm(t,e),o={},a=[];let l=0;return n.forEach(u=>{const c=r?u.alias:"aggregate_"+l++;o[c]=u.alias,u.aggregateType==="count"?a.push({alias:c,count:{}}):u.aggregateType==="avg"?a.push({alias:c,avg:{field:As(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:c,sum:{field:As(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function HC(t){let e=zC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const p=KC(h);return p instanceof ut&&Ow(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new md(Za(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Ld(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new io(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,m=h.values||[];return new io(m,p)}(n.endAt)),gC(e,i,o,s,a,"F",l,u)}function V3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Za(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Za(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Za(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Za(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Za(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ut.create(n.compositeFilter.filters.map(r=>KC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function O3(t){return b3[t]}function j3(t){return k3[t]}function M3(t){return A3[t]}function As(t){return{fieldPath:t.canonicalString()}}function Za(t){return kt.fromServerFormat(t.fieldPath)}function QC(t){return t instanceof He?function(n){if(n.op==="=="){if(XT(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(JT(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XT(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(JT(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:j3(n.op),value:n.value}}}(t):t instanceof ut?function(n){const r=n.getFilters().map(i=>QC(i));return r.length===1?r[0]:{compositeFilter:{op:M3(n.op),filters:r}}}(t):fe()}function L3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r,i,s=Ee.min(),o=Ee.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ct=e}}function F3(t,e){let n;if(e.document)n=WC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Ta(e.noDocument.readTime);n=bt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe();{const r=le.fromSegments(e.unknownDocument.path),i=Ta(e.unknownDocument.version);n=bt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Pt(i[0],i[1]);return Ee.fromTimestamp(s)}(e.readTime)),n}function gI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:gd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Xl(s,o.version.toTimestamp()),createTime:Xl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ea(e.version)};else{if(!e.isUnknownDocument())return fe();r.unknownDocument={path:n.path.toArray(),version:Ea(e.version)}}return r}function gp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ea(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ta(t){const e=new Pt(t.seconds,t.nanoseconds);return Ee.fromTimestamp(e)}function qo(t,e){const n=(e.baseMutations||[]).map(s=>O0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>O0(t.ct,s)),i=Pt.fromMillis(e.localWriteTimeMs);return new Uw(e.batchId,i,n,r)}function pc(t){const e=Ta(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ta(t.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ge(s.documents.length===1),Wn(xu(zC(s.documents[0])))}(t.query):function(s){return Wn(HC(s))}(t.query),new Bi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Bt.fromBase64String(t.resumeToken))}function XC(t,e){const n=Ea(e.snapshotVersion),r=Ea(e.lastLimboFreeSnapshotVersion);let i;i=hp(e.target)?qC(t.ct,e.target):vm(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qw(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pp(e,e.limit,"L"):e}function Lg(t,e){return new zw(e.largestBatchId,O0(t.ct,e.overlayMutation))}function yI(t,e){const n=e.path.lastSegment();return[t,$n(e.path.popLast()),n]}function vI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ea(r.readTime),documentKey:$n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{getBundleMetadata(e,n){return wI(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ta(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return wI(e).put(function(i){return{bundleId:i.id,createTime:Ea(tn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return xI(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:qw(s.bundledQuery),readTime:Ta(s.readTime)}}(r)})}saveNamedQuery(e,n){return xI(e).put(function(i){return{name:i.name,readTime:Ea(tn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function wI(t){return gn(t,"bundles")}function xI(t){return gn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new wm(e,r)}getOverlay(e,n){return Yu(e).get(yI(this.userId,n)).next(r=>r?Lg(this.serializer,r):null)}getOverlays(e,n){const r=mi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new zw(n,o);i.push(this.ht(e,a))}),U.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add($n(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Yu(e).j("collectionPathOverlayIndex",a))}),U.waitFor(s)}getOverlaysForCollection(e,n,r){const i=mi(),s=$n(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Lg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=mi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Yu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Lg(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return Yu(e).put(function(i,s,o){const[a,l,u]=yI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yd(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Yu(t){return gn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{Pt(e){return gn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Bt.fromUint8Array(r):Bt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ct(e.integerValue));else if("doubleValue"in e){const r=Ct(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),dd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Zi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(es(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?oC(e)?this.dt(n,Number.MAX_SAFE_INTEGER):mm(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):fe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ct(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),le.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Go.vt=new Go;function z3(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function _I(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=z3(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class $3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=_I(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=_I(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class W3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class q3{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ju{constructor(){this.jt=new $3,this.Ht=new W3(this.jt),this.Jt=new q3(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ho(this.indexId,this.documentKey,this.arrayValue,r)}}function ps(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=EI(t.arrayValue,e.arrayValue),n!==0?n:(n=EI(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function EI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.Xt=new dt((n,r)=>kt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ge(e.collectionGroup===this.collectionId),this.nn)return!1;const n=I0(e);if(n!==void 0&&!this.sn(n))return!1;const r=Lo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new dt(kt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new oa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new oa(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new oa(r.field,r.dir==="asc"?0:1)));return new Gl(Gl.UNKNOWN_ID,this.collectionId,n,Hl.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t){var e,n;if(ge(t instanceof He||t instanceof ut),t instanceof He){if(t instanceof mC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>He.create(t.field,"==",s)))||[];return ut.create(i,"or")}return t}const r=t.filters.map(i=>ZC(i));return ut.create(r,t.op)}function G3(t){if(t.getFilters().length===0)return[];const e=L0(ZC(t));return ge(eR(e)),j0(e)||M0(e)?[e]:e.getFilters()}function j0(t){return t instanceof He}function M0(t){return t instanceof ut&&Ow(t)}function eR(t){return j0(t)||M0(t)||function(n){if(n instanceof ut&&A0(n)){for(const r of n.getFilters())if(!j0(r)&&!M0(r))return!1;return!0}return!1}(t)}function L0(t){if(ge(t instanceof He||t instanceof ut),t instanceof He)return t;if(t.filters.length===1)return L0(t.filters[0]);const e=t.filters.map(r=>L0(r));let n=ut.create(e,t.op);return n=yp(n),eR(n)?n:(ge(n instanceof ut),ge(Ql(n)),ge(n.filters.length>1),n.filters.reduce((r,i)=>Gw(r,i)))}function Gw(t,e){let n;return ge(t instanceof He||t instanceof ut),ge(e instanceof He||e instanceof ut),n=t instanceof He?e instanceof He?function(i,s){return ut.create([i,s],"and")}(t,e):II(t,e):e instanceof He?II(e,t):function(i,s){if(ge(i.filters.length>0&&s.filters.length>0),Ql(i)&&Ql(s))return hC(i,s.getFilters());const o=A0(i)?i:s,a=A0(i)?s:i,l=o.filters.map(u=>Gw(u,a));return ut.create(l,"or")}(t,e),yp(n)}function II(t,e){if(Ql(e))return hC(e,t.getFilters());{const n=e.filters.map(r=>Gw(t,r));return ut.create(n,"or")}}function yp(t){if(ge(t instanceof He||t instanceof ut),t instanceof He)return t;const e=t.getFilters();if(e.length===1)return yp(e[0]);if(cC(t))return t;const n=e.map(i=>yp(i)),r=[];return n.forEach(i=>{i instanceof He?r.push(i):i instanceof ut&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ut.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.un=new Hw}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(br.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Hw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Uint8Array(0);class K3{constructor(e,n){this.databaseId=n,this.cn=new Hw,this.ln=new ss(r=>wa(r),(r,i)=>Fd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:$n(i)};return SI(e).put(s)}return U.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[GP(n),""],!1,!0);return SI(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(pi(o.parent))}return r})}addFieldIndex(e,n){const r=Xu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ha(e);return s.next(a=>{o.put(vI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Xu(e),i=Ha(e),s=Ga(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Xu(e),r=Ga(e),i=Ha(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return U.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new TI(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Ga(e);let i=!0;const s=new Map;return U.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=je();const a=[];return U.forEach(s,(l,u)=>{Q("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(l)} to execute ${wa(n)}`);const c=function(E,V){const M=I0(V);if(M===void 0)return null;for(const O of fp(E,M.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,l),h=function(E,V){const M=new Map;for(const O of Lo(V))for(const S of fp(E,O.fieldPath))switch(S.op){case"==":case"in":M.set(O.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return M.set(O.fieldPath.canonicalString(),S.value),Array.from(M.values())}return null}(u,l),p=function(E,V){const M=[];let O=!0;for(const S of Lo(V)){const T=S.kind===0?rI(E,S.fieldPath,E.startAt):iI(E,S.fieldPath,E.startAt);M.push(T.value),O&&(O=T.inclusive)}return new io(M,O)}(u,l),m=function(E,V){const M=[];let O=!0;for(const S of Lo(V)){const T=S.kind===0?iI(E,S.fieldPath,E.endAt):rI(E,S.fieldPath,E.endAt);M.push(T.value),O&&(O=T.inclusive)}return new io(M,O)}(u,l),y=this.In(l,u,p),v=this.In(l,u,m),I=this.Tn(l,u,h),_=this.En(l.indexId,c,y,p.inclusive,v,m.inclusive,I);return U.forEach(_,x=>r.G(x,n.limit).next(E=>{E.forEach(V=>{const M=le.fromSegments(V.documentKey);o.has(M)||(o=o.add(M),a.push(M))})}))}).next(()=>a)}return U.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=G3(ut.create(e.filters,"and")).map(r=>C0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/u]):jh,m=this.An(e,p,r[h%u],i),y=this.Rn(e,p,s[h%u],o),v=a.map(I=>this.An(e,p,I,!0));c.push(...this.createRange(m,y,v))}return c}An(e,n,r,i){const s=new Ho(e,le.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Ho(e,le.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new TI(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return U.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new dt(kt.comparator),c=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?c=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Ju;for(const i of Lo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Go.vt.It(s,o)}return r.zt()}dn(e){const n=new Ju;return Go.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Ju;return Go.vt.It(va(this.databaseId,n),r.Yt(function(s){const o=Lo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Ju);let s=0;for(const o of Lo(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&pd(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);Go.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ju;l.seed(a.zt()),Go.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof He&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Xu(e),i=Ha(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return U.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,h){const p=h?new Hl(h.sequenceNumber,new br(Ta(h.readTime),new le(pi(h.documentKey)),h.largestBatchId)):Hl.empty(),m=c.fields.map(([y,v])=>new oa(kt.fromServerFormat(y),v));return new Gl(c.indexId,c.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ce(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Xu(e),s=Ha(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>U.forEach(a,l=>s.put(vI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return U.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?U.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),U.forEach(a,l=>this.wn(e,i,l).next(u=>{const c=this.Sn(s,l);return u.isEqual(c)?U.resolve():this.bn(e,s,l,u,c)}))))})}Dn(e,n,r,i){return Ga(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Ga(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Ga(e);let s=new dt(ps);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Ho(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new dt(ps);const i=this.Vn(n,e);if(i==null)return r;const s=I0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(pd(o))for(const a of o.arrayValue.values||[])r=r.add(new Ho(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Ho(n.indexId,e.key,jh,i));return r}bn(e,n,r,i,s){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,h,p){const m=l.getIterator(),y=u.getIterator();let v=qa(m),I=qa(y);for(;v||I;){let _=!1,x=!1;if(v&&I){const E=c(v,I);E<0?x=!0:E>0&&(_=!0)}else v!=null?x=!0:_=!0;_?(h(I),I=qa(y)):x?(p(v),v=qa(m)):(v=qa(m),I=qa(y))}}(i,s,ps,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),U.waitFor(o)}yn(e){let n=1;return Ha(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ps(o,a)).filter((o,a,l)=>!a||ps(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ps(o,e),l=ps(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return ps(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bI)}getMinOffset(e,n){return U.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||fe())).next(bI)}}function SI(t){return gn(t,"collectionParents")}function Ga(t){return gn(t,"indexEntries")}function Xu(t){return gn(t,"indexConfiguration")}function Ha(t){return gn(t,"indexState")}function bI(t){ge(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Nw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new br(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(c,h,p)=>(a++,p.delete()));s.push(l.next(()=>{ge(a===1)}));const u=[];for(const c of n.mutations){const h=ZP(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return U.waitFor(s).next(()=>u)}function vp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(41943040,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class xm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ge(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new xm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=el(e),o=ms(e);return o.add({}).next(a=>{ge(typeof a=="number");const l=new Uw(a,n,r,i),u=function(m,y,v){const I=v.baseMutations.map(x=>yd(m.ct,x)),_=v.mutations.map(x=>yd(m.ct,x));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:I,mutations:_}}(this.serializer,this.userId,l),c=[];let h=new dt((p,m)=>Ce(p.canonicalString(),m.canonicalString()));for(const p of i){const m=ZP(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),c.push(o.put(u)),c.push(s.put(m,O5))}return h.forEach(p=>{c.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),U.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return ms(e).get(n).next(r=>r?(ge(r.userId===this.userId),qo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?U.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ms(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ge(a.batchId>=r),s=qo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ms(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).U("userMutationsIndex",n).next(r=>r.map(i=>qo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=yf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return el(e).J({range:i},(o,a,l)=>{const[u,c,h]=o,p=pi(c);if(u===this.userId&&n.path.isEqual(p))return ms(e).get(h).next(m=>{if(!m)throw fe();ge(m.userId===this.userId),s.push(qo(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(Ce);const i=[];return n.forEach(s=>{const o=yf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=el(e).J({range:a},(u,c,h)=>{const[p,m,y]=u,v=pi(m);p===this.userId&&s.path.isEqual(v)?r=r.add(y):h.done()});i.push(l)}),U.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=yf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new dt(Ce);return el(e).J({range:o},(l,u,c)=>{const[h,p,m]=l,y=pi(p);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):c.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ms(e).get(s).next(o=>{if(o===null)throw fe();ge(o.userId===this.userId),r.push(qo(this.serializer,o))}))}),U.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return tR(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),U.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return U.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return el(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=pi(s[1]);i.push(l)}else a.done()}).next(()=>{ge(i.length===0)})})}containsKey(e,n){return nR(e,this.userId,n)}Nn(e){return rR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nR(t,e,n){const r=yf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return el(t).J({range:s,H:!0},(a,l,u)=>{const[c,h,p]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ms(t){return gn(t,"mutations")}function el(t){return gn(t,"documentMutations")}function rR(t){return gn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ia(0)}static kn(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Ia(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ee.fromTimestamp(new Pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ka(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ge(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ka(e).J((o,a)=>{const l=pc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ka(e).J((r,i)=>{const s=pc(i);n(s)})}qn(e){return AI(e).get("targetGlobalKey").next(n=>(ge(n!==null),n))}Qn(e,n){return AI(e).put("targetGlobalKey",n)}Kn(e,n){return Ka(e).put(XC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=wa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ka(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=pc(a);Fd(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ps(e);return n.forEach(o=>{const a=$n(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),U.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ps(e);return U.forEach(n,s=>{const o=$n(s.path);return U.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ps(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ps(e);let s=je();return i.J({range:r,H:!0},(o,a,l)=>{const u=pi(o[1]),c=new le(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=$n(n.path),i=IDBKeyRange.bound([r],[GP(r)],!1,!0);let s=0;return Ps(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return Ka(e).get(n).next(r=>r?pc(r):null)}}function Ka(t){return gn(t,"targets")}function AI(t){return gn(t,"targetGlobal")}function Ps(t){return gn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI([t,e],[n,r]){const i=Ce(t,n);return i===0?Ce(e,r):i}class Y3{constructor(e){this.Un=e,this.buffer=new dt(PI),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vo(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Hn(3e5)})}}class J3{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(sr.oe);const r=new Y3(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(kI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kI):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Ja()<=qe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function sR(t,e){return new J3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n){this.db=e,this.garbageCollector=sR(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Mh(e,r)}removeReference(e,n,r){return Mh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Mh(e,n)}nr(e,n){return function(i,s){let o=!1;return rR(i).Y(a=>nR(i,a,s).next(l=>(l&&(o=!0),U.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ee.min()),Ps(e).delete(function(h){return[0,$n(h.path)]}(o))))});i.push(l)}}).next(()=>U.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Mh(e,n)}tr(e,n){const r=Ps(e);let i,s=sr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==sr.oe&&n(new le(pi(i)),s),s=u,i=l):s=sr.oe}).next(()=>{s!==sr.oe&&n(new le(pi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mh(t,e){return Ps(t).put(function(r,i){return{targetId:0,path:$n(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ro(e).put(r)}removeEntry(e,n,r){return Ro(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],gp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=bt.newInvalidDocument(n);return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:bt.newInvalidDocument(n)};return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(n))},(i,s)=>{r={document:this.ir(n,s),size:vp(s)}}).next(()=>r)}getEntries(e,n){let r=ar();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=ar(),i=new Tt(le.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,vp(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return U.resolve();let i=new dt(NI);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Zu(i.first()),Zu(i.last())),o=i.getIterator();let a=o.getNext();return Ro(e).J({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&NI(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.$(Zu(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),gp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ro(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=ar();for(const h of u){const p=this.ir(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Bd(n,p)||i.has(p.key))&&(c=c.insert(p.key,p))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=ar();const o=RI(n,r),a=RI(n,br.max());return Ro(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.ir(le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new eU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return CI(e).get("remoteDocumentGlobalKey").next(n=>(ge(!!n),n))}rr(e,n){return CI(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=F3(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return bt.newInvalidDocument(e)}}function aR(t){return new Z3(t)}class eU extends oR{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ss(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new dt((s,o)=>Ce(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=gI(this.cr.serializer,o);i=i.add(s.path.popLast());const u=vp(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=gI(this.cr.serializer,o.convertToNoDocument(Ee.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),U.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function CI(t){return gn(t,"remoteDocumentGlobal")}function Ro(t){return gn(t,"remoteDocumentsV14")}function Zu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function RI(t,e){const n=e.documentKey.path.toArray();return[t,gp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function NI(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ce(n[s],r[s]),i)return i;return i=Ce(n.length,r.length),i||(i=Ce(n[n.length-2],r[r.length-2]),i||Ce(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pc(r.mutation,i,or.empty(),Pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=hc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ar();const o=Ac(),a=function(){return Ac()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof os)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Pc(c.mutation,u,c.mutation.getFieldMask(),Pt.now())):o.set(u.key,or.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new tU(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ac();let i=new Tt((o,a)=>o-a),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||or.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||je()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=IC();c.forEach(p=>{if(!s.has(p)){const m=RC(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(mi());let a=-1,l=s;return o.next(u=>U.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?U.resolve():this.remoteDocumentCache.getEntry(e,c).next(p=>{l=l.insert(c,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,je())).next(c=>({batchId:a,changes:TC(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=hc();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const u=function(h,p){return new is(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,bt.newInvalidDocument(c)))});let a=hc();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Pc(c.mutation,u,or.empty(),Pt.now()),Bd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qw(i.bundledQuery),readTime:tn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.overlays=new Tt(le.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=mi(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Tt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=mi(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=mi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zw(n,r));let s=this.Ir.get(n);s===void 0&&(s=je(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.Tr=new dt(wn.Er),this.dr=new dt(wn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Ge([])),r=new wn(n,e),i=new wn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Ge([])),r=new wn(n,e),i=new wn(n,e+1);let s=je();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new wn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ce(e.wr,n.wr)}static Ar(e,n){return Ce(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dt(wn.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new wn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wn(n,0),i=new wn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(Ce);return n.forEach(i=>{const s=new wn(i,0),o=new wn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new wn(new le(s),0);let a=new dt(Ce);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new wn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wn(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.Mr=e,this.docs=function(){return new Tt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Nw(KP(c),r)<=0||(i.has(c.key)||Bd(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aU(this)}getSize(e){return U.resolve(this.size)}}class aU extends oR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.persistence=e,this.Nr=new ss(n=>wa(n),Fd),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kw,this.targetCount=0,this.kr=Ia.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sr(0),this.Kr=!1,this.Kr=!0,this.$r=new iU,this.referenceDelegate=e(this),this.Ur=new lU(this),this.indexManager=new H3,this.remoteDocumentCache=function(i){return new oU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JC(n),this.Gr=new nU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new uU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class uU extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class _m{constructor(e){this.persistence=e,this.Jr=new Kw,this.Yr=null}static Zr(e){return new _m(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class wp{constructor(e,n){this.persistence=e,this.ti=new ss(r=>$n(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sR(this,n)}static Zr(e,n){return new wp(e,n)}zr(){}jr(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return U.forEach(this.ti,(r,i)=>this.nr(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Ee.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),U.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wf(e.data.value)),n}nr(e,n,r){return U.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ti.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new hm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GT,{unique:!0}),l.createObjectStore("documentMutations")}(e),DI(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=U.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),DI(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GT,{unique:!0});const h=u.store("mutations"),p=c.map(m=>h.put(m));return U.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:H5});u.createIndex("collectionPathOverlayIndex",K5,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Q5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:j5});u.createIndex("documentKeyIndex",M5),u.createIndex("collectionGroupIndex",L5)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:$5}).createIndex("sequenceNumberIndex",W5,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:q5}).createIndex("documentKeyIndex",G5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=vp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>U.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>U.forEach(a,l=>{ge(l.userId===s.userId);const u=qo(this.serializer,l);return tR(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ge(o),u=function(h){return[0,$n(h)]}(l);s.push(n.get(u).next(c=>c?U.resolve():(h=>n.put({targetId:0,path:$n(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:z5});const r=n.store("collectionParents"),i=new Hw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:$n(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ge(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const c=pi(a);return s(c.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=pc(i),o=XC(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new le(Ge.fromString(h.document.name).popFirst(5)):h.noDocument?le.fromSegments(h.noDocument.path):h.unknownDocument?le.fromSegments(h.unknownDocument.path):fe()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>U.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=aR(this.serializer),s=new Qw(_m.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:je();qo(this.serializer,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),U.forEach(a,(l,u)=>{const c=new _n(u),h=wm.lt(this.serializer,c),p=s.getIndexManager(c),m=xm.lt(c,this.serializer,p,s.referenceDelegate);return new lR(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new S0(n,sr.oe),l).next()})})}}function DI(t){t.createObjectStore("targetDocuments",{keyPath:U5}).createIndex("documentTargetsIndex",B5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",F5,{unique:!0}),t.createObjectStore("targetGlobal")}const Fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yw{constructor(e,n,r,i,s,o,a,l,u,c,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=c,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Yw.D())throw new K($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X3(this,i),this.Ai=n+"main",this.serializer=new JC(l),this.Ri=new wi(this.Ai,this.hi,new cU(this.serializer)),this.$r=new B3,this.Ur=new Q3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aR(this.serializer),this.Gr=new U3,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,c===!1&&Xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,Fg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new sr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(vo(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ec(e).get("owner").next(n=>U.resolve(this.vi(n)))}Ci(e){return Lh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=gn(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return U.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?U.resolve(!0):ec(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,Fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new S0(e,sr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return xm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new K3(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return wm.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?X5:l===16?J5:l===15?Vw:l===14?nC:l===13?tC:l===12?Y5:l===11?eC:void fe()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new S0(a,this.Qr?this.Qr.next():sr.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K($.FAILED_PRECONDITION,QP);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ec(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K($.FAILED_PRECONDITION,Fg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ec(e).put("owner",n)}static D(){return wi.D()}bi(e){const n=ec(e);return n.get("owner").next(r=>this.vi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):U.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;KA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ec(t){return gn(t,"owner")}function Lh(t){return gn(t,"clientMetadata")}function Jw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Xw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return KA()?8:JP(mn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ja()<=qe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ja()<=qe.DEBUG&&Q("QueryEngine","Query:",Xa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ja()<=qe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):U.resolve())}Yi(e,n){if(sI(n))return U.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pp(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=je(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,pp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return sI(n)||i.isEqual(Ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Ja()<=qe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xa(n)),this.rs(e,o,n,HP(i,-1)).next(a=>a))})}ts(e,n){let r=new dt(_C(e));return n.forEach((i,s)=>{Bd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ja()<=qe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Tt(Ce),this._s=new ss(s=>wa(s),Fd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cR(t,e,n,r){return new hU(t,e,n,r)}async function dR(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=je();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function fU(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,p=h.keys();let m=U.resolve();return p.forEach(y=>{m=m.next(()=>c.getEntry(l,y)).next(v=>{const I=u.docVersions.get(y);ge(I!==null),v.version.compareTo(I)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=je();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hR(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pU(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Bt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(h,m),function(v,I,_){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,c)&&a.push(n.Ur.updateTargetData(s,m))});let l=ar(),u=je();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(fR(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Ee.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function fR(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function mU(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zl(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Bi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function eu(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!vo(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function xp(t,e,n){const r=re(t);let i=Ee.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=re(l),p=h._s.get(c);return p!==void 0?U.resolve(h.os.get(p)):h.Ur.getTargetData(u,c)}(r,o,Wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?s:je())).next(a=>(gR(r,xC(e),a),{documents:a,Ts:s})))}function pR(t,e){const n=re(t),r=re(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function mR(t,e){const n=re(t),r=n.us.get(e)||Ee.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,HP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(gR(n,e,i),i))}function gR(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function gU(t,e,n,r){const i=re(t);let s=je(),o=ar();for(const u of n){const c=e.Es(u.metadata.name);u.document&&(s=s.add(c));const h=e.ds(u);h.setReadTime(e.As(u.metadata.readTime)),o=o.insert(c,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Zl(i,function(c){return Wn(xu(Ge.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>fR(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Ps,c.Is)).next(()=>c.Ps)))}async function yU(t,e,n=je()){const r=await Zl(t,Wn(qw(e.bundledQuery))),i=re(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=tn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Bt.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function VI(t,e){return`firestore_clients_${t}_${e}`}function OI(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ug(t,e){return`firestore_targets_${t}_${e}`}class _p{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new K(i.error.code,i.error.message))),o?new _p(e,n,i.state,s):(Xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new K(r.error.code,r.error.message))),s?new Cc(e,r.state,i):(Xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Mw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=XP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Ep(e,s):(Xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Zw{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Zw(n.clientId,n.onlineState):(Xt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class F0{constructor(){this.activeTargetIds=Mw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Tt(Ce),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=VI(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new F0),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(VI(this.persistenceKey,r));if(i){const s=Ep.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ug(this.persistenceKey,e));if(i){const s=Cc.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Q("SharedClientState","READ",e,n),n}setItem(e,n){Q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=sr.oe;if(s!=null)try{const a=JSON.parse(s);ge(typeof a=="number"),o=a}catch(a){Xt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==sr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new _p(this.currentUser,e,n,r),s=OI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=OI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Ug(this.persistenceKey,e),s=new Cc(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Ep.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _p.Rs(new _n(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Cc.Rs(i,n)}Ls(e){return Zw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Mw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class yR{constructor(){this.so=new F0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function zg(){return Fh===null?Fh=function(){return 268435456+Math.round(2147483648*Math.random())}():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class _U extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=zg(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Sr("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=wU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=zg();return new Promise((o,a)=>{const l=new LP;l.setWithCredentials(!0),l.listenOnce(FP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gf.NO_ERROR:const c=l.getResponseJson();Q(Fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case gf.TIMEOUT:Q(Fn,`RPC '${e}' ${s} timed out`),a(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const h=l.getStatus();if(Q(Fn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_)>=0?_:$.UNKNOWN}(m.status);a(new K(y,m.message))}else a(new K($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K($.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{Q(Fn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Q(Fn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=zg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zP(),a=BP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Q(Fn,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let p=!1,m=!1;const y=new xU({Io:I=>{m?Q(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(Q(Fn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),Q(Fn,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},To:()=>h.close()}),v=(I,_,x)=>{I.listen(_,E=>{try{x(E)}catch(V){setTimeout(()=>{throw V},0)}})};return v(h,dc.EventType.OPEN,()=>{m||(Q(Fn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(h,dc.EventType.CLOSE,()=>{m||(m=!0,Q(Fn,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(h,dc.EventType.ERROR,I=>{m||(m=!0,Sr(Fn,`RPC '${e}' stream ${i} transport errored:`,I),y.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),v(h,dc.EventType.MESSAGE,I=>{var _;if(!m){const x=I.data[0];ge(!!x);const E=x,V=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(V){Q(Fn,`RPC '${e}' stream ${i} received error:`,V);const M=V.status;let O=function(A){const b=on[A];if(b!==void 0)return OC(b)}(M),S=V.message;O===void 0&&(O=$.INTERNAL,S="Unknown error status: "+M+" with message "+V.message),m=!0,y.So(new K(O,S)),h.close()}else Q(Fn,`RPC '${e}' stream ${i} received:`,x),y.bo(x)}}),v(a,UP.STAT_EVENT,I=>{I.stat===T0.PROXY?Q(Fn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===T0.NOPROXY&&Q(Fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof window<"u"?window:null}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new P3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ex(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Xt(n.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EU extends wR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=N3(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?tn(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=V0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=hp(l)?{documents:qC(s,l)}:{query:vm(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FC(s,o.resumeToken);const u=N0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=Xl(s,o.snapshotVersion.toTimestamp());const u=N0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=V3(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=V0(this.serializer),n.removeTarget=e,this.a_(n)}}class TU extends wR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=D3(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=V0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yd(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,D0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,D0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xt(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{xo(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=re(l);u.L_.add(4),await Tu(u),u.q_.set("Unknown"),u.L_.delete(4),await Gd(u)}(this))})}),this.q_=new SU(r,i)}}async function Gd(t){if(xo(t))for(const e of t.B_)await e(!0)}async function Tu(t){for(const e of t.B_)await e(!1)}function Em(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rx(n)?nx(n):Su(n).r_()&&tx(n,e))}function tu(t,e){const n=re(t),r=Su(n);n.N_.delete(e),r.r_()&&xR(n,e),n.N_.size===0&&(r.r_()?r.o_():xo(n)&&n.q_.set("Unknown"))}function tx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Su(t).A_(e)}function xR(t,e){t.Q_.xe(e),Su(t).R_(e)}function nx(t){t.Q_=new S3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Su(t).start(),t.q_.v_()}function rx(t){return xo(t)&&!Su(t).n_()&&t.N_.size>0}function xo(t){return re(t).L_.size===0}function _R(t){t.Q_=void 0}async function kU(t){t.q_.set("Online")}async function AU(t){t.N_.forEach((e,n)=>{tx(t,e)})}async function PU(t,e){_R(t),rx(t)?(t.q_.M_(e),nx(t)):t.q_.set("Unknown")}async function CU(t,e,n){if(t.q_.set("Online"),e instanceof LC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tp(t,r)}else if(e instanceof Ef?t.Q_.Ke(e):e instanceof MC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await hR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Bt.EMPTY_BYTE_STRING,c.snapshotVersion)),xR(s,l);const h=new Bi(c.target,l,u,c.sequenceNumber);tx(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Tp(t,r)}}async function Tp(t,e,n){if(!vo(e))throw e;t.L_.add(1),await Tu(t),t.q_.set("Offline"),n||(n=()=>hR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gd(t)})}function ER(t,e){return e().catch(n=>Tp(t,n,e))}async function Iu(t){const e=re(t),n=so(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;RU(e);)try{const i=await mU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,NU(e,i)}catch(i){await Tp(e,i)}TR(e)&&IR(e)}function RU(t){return xo(t)&&t.O_.length<10}function NU(t,e){t.O_.push(e);const n=so(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TR(t){return xo(t)&&!so(t).n_()&&t.O_.length>0}function IR(t){so(t).start()}async function DU(t){so(t).p_()}async function VU(t){const e=so(t);for(const n of t.O_)e.m_(n.mutations)}async function OU(t,e,n){const r=t.O_.shift(),i=Bw.from(r,e,n);await ER(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Iu(t)}async function jU(t,e){e&&so(t).V_&&await async function(r,i){if(function(o){return VC(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();so(r).s_(),await ER(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Iu(r)}}(t,e),TR(t)&&IR(t)}async function MI(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=xo(n);n.L_.add(3),await Tu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gd(n)}async function U0(t,e){const n=re(t);e?(n.L_.delete(2),await Gd(n)):e||(n.L_.add(2),await Tu(n),n.q_.set("Unknown"))}function Su(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new EU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:kU.bind(null,t),Ro:AU.bind(null,t),mo:PU.bind(null,t),d_:CU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rx(t)?nx(t):t.q_.set("Unknown")):(await t.K_.stop(),_R(t))})),t.K_}function so(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new TU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DU.bind(null,t),mo:jU.bind(null,t),f_:VU.bind(null,t),g_:OU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Iu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ix(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bu(t,e){if(Xt("AsyncQueue",`${e}: ${t}`),vo(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=hc(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new Pl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.W_=new Tt(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class nu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new nu(e,n,Pl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class LU{constructor(){this.queries=FI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=FI(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function FI(){return new ss(t=>wC(t),Ud)}async function sx(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new MU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=bu(o,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ax(n)}async function ox(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FU(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ax(n)}function UU(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ax(t){t.Y_.forEach(e=>{e.next()})}var B0,UI;(UI=B0||(B0={})).ea="default",UI.Cache="cache";class lx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new nu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==B0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.serializer=e}Es(e){return xi(this.serializer,e)}ds(e){return e.metadata.exists?WC(this.serializer,e.document,!1):bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return tn(e)}}class zU{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ge.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new BI(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||je()).add(s);n.set(o,a)}}return n}async complete(){const e=await gU(this.localStore,new BI(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await yU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function SR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.key=e}}class kR{constructor(e){this.key=e}}class AR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=_C(e),this.Ra=new Pl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new LI,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const p=i.get(c),m=Bd(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),I=!0):this.ga(p,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),I=!0):p&&!m&&(r.track({type:1,doc:p}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,h)=>function(m,y){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return v(m)-v(y)}(c.type,h.type)||this.Aa(c.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new nu(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new LI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new kR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bR(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return nu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $U{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WU{constructor(e){this.key=e,this.va=!1}}class qU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ss(a=>wC(a),Ud),this.Ma=new Map,this.xa=new Set,this.Oa=new Tt(le.comparator),this.Na=new Map,this.La=new Kw,this.Ba={},this.ka=new Map,this.qa=Ia.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function GU(t,e,n=!0){const r=Tm(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await PR(r,e,n,!0),i}async function HU(t,e){const n=Tm(t);await PR(n,e,!0,!1)}async function PR(t,e,n,r){const i=await Zl(t.localStore,Wn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ux(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Em(t.remoteStore,i),a}async function ux(t,e,n,r,i){t.Ka=(h,p,m)=>async function(v,I,_,x){let E=I.view.ma(_);E.ns&&(E=await xp(v.localStore,I.query,!1).then(({documents:S})=>I.view.ma(S,E)));const V=x&&x.targetChanges.get(I.targetId),M=x&&x.targetMismatches.get(I.targetId)!=null,O=I.view.applyChanges(E,v.isPrimaryClient,V,M);return z0(v,I.targetId,O.wa),O.snapshot}(t,h,p,m);const s=await xp(t.localStore,e,!0),o=new AR(e,s.Ts),a=o.ma(s.documents),l=Wd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);z0(t,n,u.wa);const c=new $U(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function KU(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ud(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tu(r.remoteStore,i.targetId),ru(r,i.targetId)}).catch(yo)):(ru(r,i.targetId),await eu(r.localStore,i.targetId,!0))}async function QU(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tu(n.remoteStore,r.targetId))}async function YU(t,e,n){const r=fx(t);try{const i=await function(o,a){const l=re(o),u=Pt.now(),c=a.reduce((m,y)=>m.add(y.key),je());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=ar(),v=je();return l.cs.getEntries(m,c).next(I=>{y=I,y.forEach((_,x)=>{x.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(I=>{h=I;const _=[];for(const x of a){const E=E3(x,h.get(x.key).overlayedDocument);E!=null&&_.push(new os(x.key,E,lC(E.value.mapValue),Nt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(I=>{p=I;const _=I.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,_)})}).then(()=>({batchId:p.batchId,changes:TC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Tt(Ce)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await as(r,i.changes),await Iu(r.remoteStore)}catch(i){const s=bu(i,"Failed to persist write");n.reject(s)}}async function CR(t,e){const n=re(t);try{const r=await pU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ge(o.va):i.removedDocuments.size>0&&(ge(o.va),o.va=!1))}),await as(n,r,e)}catch(r){await yo(r)}}function zI(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const p of h.j_)p.Z_(a)&&(u=!0)}),u&&ax(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JU(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Tt(le.comparator);o=o.insert(s,bt.newNoDocument(s,Ee.min()));const a=je().add(s),l=new $d(Ee.min(),new Map,new Tt(Ce),o,a);await CR(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),hx(r)}else await eu(r.localStore,e,!1).then(()=>ru(r,e,n)).catch(yo)}async function XU(t,e){const n=re(t),r=e.batch.batchId;try{const i=await fU(n.localStore,e);dx(n,r,null),cx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await as(n,i)}catch(i){await yo(i)}}async function ZU(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ge(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);dx(r,e,n),cx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await as(r,i)}catch(i){await yo(i)}}async function eB(t,e){const n=re(t);xo(n.remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=bu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function cx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dx(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ru(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RR(t,r)})}function RR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(tu(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hx(t))}function z0(t,e,n){for(const r of n)r instanceof bR?(t.La.addReference(r.key,e),tB(t,r)):r instanceof kR?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RR(t,r.key)):fe()}function tB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),hx(t))}function hx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new WU(n)),t.Oa=t.Oa.insert(n,r),Em(t.remoteStore,new Bi(Wn(xu(n.path)),r,"TargetPurposeLimboResolution",sr.oe))}}async function as(t,e,n){const r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Xw.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=re(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(u,p=>U.forEach(p.$i,m=>c.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>U.forEach(p.Ui,m=>c.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!vo(h))throw h;Q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const m=c.os.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);c.os=c.os.insert(p,v)}}}(r.localStore,s))}async function nB(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await dR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await as(n,r.hs)}}function rB(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let i=je();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function iB(t,e){const n=re(t),r=await xp(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&z0(n,e.targetId,i.wa),i}async function sB(t,e){const n=re(t);return mR(n.localStore,e).then(r=>as(n,r))}async function oB(t,e,n,r){const i=re(t),s=await function(a,l){const u=re(a),c=re(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.Mn(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):U.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Iu(i.remoteStore):n==="acknowledged"||n==="rejected"?(dx(i,e,r||null),cx(i,e),function(a,l){re(re(a).mutationQueue).On(l)}(i.localStore,e)):fe(),await as(i,s)):Q("SyncEngine","Cannot apply mutation batch with id: "+e)}async function aB(t,e){const n=re(t);if(Tm(n),fx(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await $I(n,r.toArray());n.Qa=!0,await U0(n.remoteStore,!0);for(const s of i)Em(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ru(n,o),eu(n.localStore,o,!0))),tu(n.remoteStore,o)}),await i,await $I(n,r),function(o){const a=re(o);a.Na.forEach((l,u)=>{tu(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Tt(le.comparator)}(n),n.Qa=!1,await U0(n.remoteStore,!1)}}async function $I(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Zl(r.localStore,Wn(l[0]));for(const u of l){const c=r.Fa.get(u),h=await iB(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await pR(r.localStore,o);a=await Zl(r.localStore,u),await ux(r,NR(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function NR(t){return gC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lB(t){return function(n){return re(re(n).persistence).Qi()}(re(t).localStore)}async function uB(t,e,n,r){const i=re(t);if(i.Qa)return void Q("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await mR(i.localStore,xC(s[0])),a=$d.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Bt.EMPTY_BYTE_STRING);await as(i,o,a);break}case"rejected":await eu(i.localStore,e,!0),ru(i,e,r);break;default:fe()}}async function cB(t,e,n){const r=Tm(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Q("SyncEngine","Adding an already active target "+i);continue}const s=await pR(r.localStore,i),o=await Zl(r.localStore,s);await ux(r,NR(s),o.targetId,!1,o.resumeToken),Em(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await eu(r.localStore,i,!1).then(()=>{tu(r.remoteStore,i),ru(r,i)}).catch(yo)}}function Tm(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JU.bind(null,e),e.Ca.d_=FU.bind(null,e.eventManager),e.Ca.$a=UU.bind(null,e.eventManager),e}function fx(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZU.bind(null,e),e}function dB(t,e,n){const r=re(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,y){const v=re(m),I=tn(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",_=>v.Gr.getBundleMetadata(_,y.id)).then(_=>!!_&&_.createTime.compareTo(I)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(SR(l));const u=new zU(l,s.localStore,o.serializer);let c=await o.Ua();for(;c;){const p=await u.la(c);p&&a._updateProgress(p),c=await o.Ua()}const h=await u.complete();return await as(s,h.Ia,void 0),await function(m,y){const v=re(m);return v.persistence.runTransaction("Save bundle","readwrite",I=>v.Gr.saveBundleMetadata(I,y))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Sr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class oo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cR(this.persistence,new uR,e.initialUser,this.serializer)}Ga(e){return new Qw(_m.Zr,this.serializer)}Wa(e){return new yR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oo.provider={build:()=>new oo};class hB extends oo{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){ge(this.persistence.referenceDelegate instanceof wp);const r=this.persistence.referenceDelegate.garbageCollector;return new iR(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new Qw(r=>wp.Zr(r,n),this.serializer)}}class px extends oo{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await fx(this.Ja.syncEngine),await Iu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return cR(this.persistence,new uR,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new iR(r,e.asyncQueue,n)}Ha(e,n){const r=new D5(n,this.persistence);return new N5(e.asyncQueue,r)}Ga(e){const n=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new Yw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,vR(),Tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new yR}}class DR extends px{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={no:oB.bind(null,n),ro:uB.bind(null,n),io:cB.bind(null,n),Qi:lB.bind(null,n),eo:sB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await aB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=vR();if(!Bg.D(n))throw new K($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ao{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nB.bind(null,this.syncEngine),await U0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LU}()}createDatastore(e){const n=qd(e.databaseInfo.databaseId),r=function(s){return new _U(s)}(e.databaseInfo);return function(s,o,a,l){return new IU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new bU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>zI(this.syncEngine,n,0),function(){return jI.D()?new jI:new vU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new qU(i,s,o,a,l,u);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Tu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ao.provider={build:()=>new ao};function WI(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Tn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new BU(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=re(i),a={documents:s.map(h=>gd(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ge.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const p=R3(o.serializer,h);u.set(p.key.toString(),p)});const c=[];return s.forEach(h=>{const p=u.get(h.toString());ge(!!p),c.push(p)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Eu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=le.fromPath(r);this.mutations.push(new Fw(i,this.precondition(i)))}),await async function(r,i){const s=re(r),o={writes:i.map(a=>yd(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Ge.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw fe();n=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ee.min())?Nt.exists(!1):Nt.updateTime(n):Nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ee.min()))throw new K($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(n)}return Nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new ex(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new pB(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Ld(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_n.UNAUTHENTICATED,this.clientId=Rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mx(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>MI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>MI(e.remoteStore,i)),t._onlineComponents=e}async function mx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await $g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Sr("Error using user provided cache. Falling back to memory cache: "+n),await $g(t,new oo)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await $g(t,new oo);return t._offlineComponents}async function Sm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await qI(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await qI(t,new ao))),t._onlineComponents}function VR(t){return mx(t).then(e=>e.persistence)}function ku(t){return mx(t).then(e=>e.localStore)}function OR(t){return Sm(t).then(e=>e.remoteStore)}function gx(t){return Sm(t).then(e=>e.syncEngine)}function jR(t){return Sm(t).then(e=>e.datastore)}async function iu(t){const e=await Sm(t),n=e.eventManager;return n.onListen=GU.bind(null,e.syncEngine),n.onUnlisten=KU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QU.bind(null,e.syncEngine),n}function yB(t){return t.asyncQueue.enqueue(async()=>{const e=await VR(t),n=await OR(t);return e.setNetworkEnabled(!0),function(i){const s=re(i);return s.L_.delete(0),Gd(s)}(n)})}function vB(t){return t.asyncQueue.enqueue(async()=>{const e=await VR(t),n=await OR(t);return e.setNetworkEnabled(!1),async function(i){const s=re(i);s.L_.add(0),await Tu(s),s.q_.set("Offline")}(n)})}function wB(t,e){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const h=re(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=bu(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await ku(t),e,n)),n.promise}function MR(t,e,n={}){const r=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Im({next:p=>{c.Za(),o.enqueueAndForget(()=>ox(s,h));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new lx(xu(a.path),c,{includeMetadataChanges:!0,_a:!0});return sx(s,h)}(await iu(t),t.asyncQueue,e,n,r)),r.promise}function xB(t,e){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await xp(i,s,!0),l=new AR(s,a.Ts),u=l.ma(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=bu(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await ku(t),e,n)),n.promise}function LR(t,e,n={}){const r=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Im({next:p=>{c.Za(),o.enqueueAndForget(()=>ox(s,h)),p.fromCache&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new lx(a,c,{includeMetadataChanges:!0,_a:!0});return sx(s,h)}(await iu(t),t.asyncQueue,e,n,r)),r.promise}function _B(t,e,n){const r=new Tn;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await jR(t);r.resolve(async function(o,a,l){var u;const c=re(o),{request:h,ut:p,parent:m}=GC(c.serializer,yC(a),l);c.connection.Fo||delete h.parent;const y=(await c.Lo("RunAggregationQuery",c.serializer.databaseId,m,h,1)).filter(I=>!!I.result);ge(y.length===1);const v=(u=y[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(v).reduce((I,_)=>(I[p[_]]=v[_],I),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function EB(t,e){const n=new Im(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){re(i).Y_.add(s),s.next()}(await iu(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){re(i).Y_.delete(s)}(await iu(t),n))}}function TB(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?jC().encode(o):o,function(c,h){return new fB(c,h)}(function(c,h){if(c instanceof Uint8Array)return WI(c,h);if(c instanceof ArrayBuffer)return WI(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,qd(e));t.asyncQueue.enqueueAndForget(async()=>{dB(await gx(t),i,r)})}function IB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=re(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await ku(t),e))}function SB(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=re(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(h,p,m,y,v){h=[...h],p=[...p],h.sort(m),p.sort(m);const I=h.length,_=p.length;let x=0,E=0;for(;x<_&&E<I;){const V=m(h[E],p[x]);V<0?v(h[E++]):V>0?y(p[x++]):(x++,E++)}for(;x<_;)y(p[x++]);for(;E<I;)v(h[E++])}(u,i,A5,c=>{a.push(o.addFieldIndex(l,c))},c=>{a.push(o.deleteFieldIndex(l,c))})).next(()=>U.waitFor(a)))}(await ku(t),e))}function bB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){re(r).ss.zi=i}(await ku(t),e))}function kB(t){return t.asyncQueue.enqueue(async()=>function(n){const r=re(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await ku(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UR(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HI(t){if(!le.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KI(t){if(le.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bm(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BR(t,e){if(e<=0)throw new K($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WP;switch(r.type){case"firstParty":return new T5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=GI.get(n);r&&(Q("ComponentProvider","Removing Datastore"),GI.delete(n),r.terminate())}(this),Promise.resolve()}}function zR(t,e,n,r={}){var i;const s=(t=ze(t,Hd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_n.MOCK_USER;else{a=YM(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _n(u)}t._authCredentials=new x5(new $P(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new In(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Zr extends In{constructor(e,n,r){super(e,n,xu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new le(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function te(t,e,...n){if(t=Et(t),yx("collection","path",e),t instanceof Hd){const r=Ge.fromString(e,...n);return KI(r),new Zr(t,null,r)}{if(!(t instanceof qt||t instanceof Zr))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return KI(r),new Zr(t.firestore,null,r)}}function AB(t,e){if(t=ze(t,Hd),yx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new In(t,null,function(r){return new is(Ge.emptyPath(),r)}(e))}function J(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Rw.newId()),yx("doc","path",e),t instanceof Hd){const r=Ge.fromString(e,...n);return HI(r),new qt(t,null,new le(r))}{if(!(t instanceof qt||t instanceof Zr))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return HI(r),new qt(t.firestore,t instanceof Zr?t.converter:null,new le(r))}}function PB(t,e){return t=Et(t),e=Et(e),(t instanceof qt||t instanceof Zr)&&(e instanceof qt||e instanceof Zr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function vx(t,e){return t=Et(t),e=Et(e),t instanceof In&&e instanceof In&&t.firestore===e.firestore&&Ud(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ex(this,"async_queue_retry"),this.Vu=()=>{const r=Tf();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ix.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class $R{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=-1;class ht extends Hd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new YI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YI(e),this._firestoreClient=void 0,await e}}}function RB(t,e,n){n||(n="(default)");const r=Vd(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Zs(s,e))return i;throw new K($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function WR(t,e){const n=typeof t=="object"?t:ZA(),r=typeof t=="string"?t:e||"(default)",i=Vd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KM("firestore");s&&zR(i,...s)}return i}function Dt(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qR(t),t._firestoreClient}function qR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new t3(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,FR(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new gB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function NB(t,e){Sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return GR(t,ao.provider,{build:r=>new px(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function DB(t){Sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();GR(t,ao.provider,{build:n=>new DR(n,e.cacheSizeBytes)})}function GR(t,e,n){if((t=ze(t,ht))._firestoreClient||t._terminated)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},qR(t)}function VB(t){if(t._initialized&&!t._terminated)throw new K($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wi.D())return Promise.resolve();const i=r+"main";await wi.delete(i)}(Jw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function OB(t){return function(n){const r=new Tn;return n.asyncQueue.enqueueAndForget(async()=>eB(await gx(n),r)),r.promise}(Dt(t=ze(t,ht)))}function jB(t){return yB(Dt(t=ze(t,ht)))}function MB(t){return vB(Dt(t=ze(t,ht)))}function LB(t){return a4(t.app,"firestore",t._databaseId.database),t._delete()}function FB(t,e){const n=Dt(t=ze(t,ht)),r=new $R;return TB(n,t._databaseId,e,r),r}function UB(t,e){return IB(Dt(t=ze(t,ht)),e).then(n=>n?new In(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class HR{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lo(Bt.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lo(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function BB(){return new _o("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=/^__.*__$/;class $B{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class KR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Am{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ip(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QR(this.Cu)&&zB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class WB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qd(e)}Qu(e,n,r,i=!1){return new Am({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Da(t){const e=t._freezeSettings(),n=qd(t._databaseId);return new WB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pm(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Sx("Data must be an object, but it was:",o,r);const a=XR(r,o);let l,u;if(s.merge)l=new or(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const p=vd(e,h,n);if(!o.contains(p))throw new K($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);eN(c,p)||c.push(p)}l=new or(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new $B(new An(a),l,u)}class Qd extends Eo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function YR(t,e,n){return new Am({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wx extends Eo{_toFieldTransform(e){return new zd(e.path,new Yl)}isEqual(e){return e instanceof wx}}class xx extends Eo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=YR(this,e,!0),r=this.Ku.map(s=>Va(s,n)),i=new xa(r);return new zd(e.path,i)}isEqual(e){return e instanceof xx&&Zs(this.Ku,e.Ku)}}class _x extends Eo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=YR(this,e,!0),r=this.Ku.map(s=>Va(s,n)),i=new _a(r);return new zd(e.path,i)}isEqual(e){return e instanceof _x&&Zs(this.Ku,e.Ku)}}class Ex extends Eo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Jl(e.serializer,bC(e.serializer,this.$u));return new zd(e.path,n)}isEqual(e){return e instanceof Ex&&this.$u===e.$u}}function Tx(t,e,n,r){const i=t.Qu(1,e,n);Sx("Data must be an object, but it was:",i,r);const s=[],o=An.empty();wo(r,(l,u)=>{const c=Cm(e,l,n);u=Et(u);const h=i.Nu(c);if(u instanceof Qd)s.push(c);else{const p=Va(u,h);p!=null&&(s.push(c),o.set(c,p))}});const a=new or(s);return new KR(o,a,i.fieldTransforms)}function Ix(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[vd(e,r,n)],l=[i];if(s.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(vd(e,s[p])),l.push(s[p+1]);const u=[],c=An.empty();for(let p=a.length-1;p>=0;--p)if(!eN(u,a[p])){const m=a[p];let y=l[p];y=Et(y);const v=o.Nu(m);if(y instanceof Qd)u.push(m);else{const I=Va(y,v);I!=null&&(u.push(m),c.set(m,I))}}const h=new or(u);return new KR(c,h,o.fieldTransforms)}function JR(t,e,n,r=!1){return Va(n,t.Qu(r?4:3,e))}function Va(t,e){if(ZR(t=Et(t)))return Sx("Unsupported field value:",e,t),XR(t,e);if(t instanceof Eo)return function(r,i){if(!QR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Va(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Pt.fromDate(r);return{timestampValue:Xl(i.serializer,s)}}if(r instanceof Pt){const s=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,s)}}if(r instanceof km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:FC(i.serializer,r._byteString)};if(r instanceof qt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ww(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kd)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Lw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${bm(r)}`)}(t,e)}function XR(t,e){const n={};return iC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(r,i)=>{const s=Va(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ZR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof km||t instanceof lo||t instanceof qt||t instanceof Eo||t instanceof Kd)}function Sx(t,e,n){if(!ZR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=bm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function vd(t,e,n){if((e=Et(e))instanceof _o)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw Ip("Field path arguments must be of type string or ",t,!1,void 0,n)}const qB=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(qB)>=0)throw Ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _o(...e.split("."))._internalPath}catch{throw Ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ip(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K($.INVALID_ARGUMENT,a+t+l)}function eN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GB extends wd{data(){return super.data()}}function Rm(t,e){return typeof e=="string"?Cm(t,e):e instanceof _o?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bx{}class Au extends bx{}function ve(t,e,...n){let r=[];e instanceof bx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Oa).length,a=s.filter(l=>l instanceof Pu).length;if(o>1||o>0&&a>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pu extends Au{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pu(e,n,r)}_apply(e){const n=this._parse(e);return iN(e._query,n),new In(e.firestore,e.converter,R0(e._query,n))}_parse(e){const n=Da(e.firestore);return function(s,o,a,l,u,c,h){let p;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){XI(h,c);const m=[];for(const y of h)m.push(JI(l,s,y));p={arrayValue:{values:m}}}else p=JI(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||XI(h,c),p=JR(a,o,h,c==="in"||c==="not-in");return He.create(u,c,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ae(t,e,n){const r=e,i=Rm("where",t);return Pu._create(i,r,n)}class Oa extends bx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Oa(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)iN(o,l),o=R0(o,l)}(e._query,n),new In(e.firestore,e.converter,R0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function HB(...t){return t.forEach(e=>sN("or",e)),Oa._create("or",t)}function KB(...t){return t.forEach(e=>sN("and",e)),Oa._create("and",t)}class Nm extends Au{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new md(s,o)}(e._query,this._field,this._direction);return new In(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new is(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Gt(t,e="asc"){const n=e,r=Rm("orderBy",t);return Nm._create(r,n)}class Yd extends Au{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Yd(e,n,r)}_apply(e){return new In(e.firestore,e.converter,pp(e._query,this._limit,this._limitType))}}function Wt(t){return BR("limit",t),Yd._create("limit",t,"F")}function QB(t){return BR("limitToLast",t),Yd._create("limitToLast",t,"L")}class Jd extends Au{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Jd(e,n,r)}_apply(e){const n=rN(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,function(i,s){return new is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function YB(...t){return Jd._create("startAt",t,!0)}function nN(...t){return Jd._create("startAfter",t,!1)}class Xd extends Au{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Xd(e,n,r)}_apply(e){const n=rN(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,function(i,s){return new is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function JB(...t){return Xd._create("endBefore",t,!1)}function XB(...t){return Xd._create("endAt",t,!0)}function rN(t,e,n,r){if(n[0]=Et(n[0]),n[0]instanceof wd)return function(s,o,a,l,u){if(!l)throw new K($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of Al(s))if(h.field.isKeyField())c.push(va(o,l.key));else{const p=l.data.field(h.field);if(fm(p))throw new K($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=h.field.canonicalString();throw new K($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}c.push(p)}return new io(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Da(t.firestore);return function(o,a,l,u,c,h){const p=o.explicitOrderBy;if(c.length>p.length)throw new K($.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<c.length;y++){const v=c[y];if(p[y].field.isKeyField()){if(typeof v!="string")throw new K($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!jw(o)&&v.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const I=o.path.child(Ge.fromString(v));if(!le.isDocumentKey(I))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const _=new le(I);m.push(va(a,_))}else{const I=JR(l,u,v);m.push(I)}}return new io(m,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function JI(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!le.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return va(t,new le(r))}if(n instanceof qt)return va(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bm(n)}.`)}function XI(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function sN(t,e){if(!(e instanceof Pu||e instanceof Oa))throw new K($.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class kx{convertValue(e,n="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ct(o.doubleValue));return new Kd(s)}convertGeoPoint(e){return new km(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hd(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);ge(YC(r));const i=new to(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ZB extends kx{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){return new su("sum",vd("sum",t))}function tz(t){return new su("avg",vd("average",t))}function oN(){return new su("count")}function nz(t,e){var n,r;return t instanceof su&&e instanceof su&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function rz(t,e){return vx(t.query,e.query)&&Zs(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sa extends wd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rc extends Sa{data(e={}){return super.data(e)}}class ba{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Os(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rc(this._firestore,this._userDataWriter,r.key,r,new Os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:iz(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}function sz(t,e){return t instanceof Sa&&e instanceof Sa?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ba&&e instanceof ba&&t._firestore===e._firestore&&vx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){t=ze(t,qt);const e=ze(t.firestore,ht);return MR(Dt(e),t._key).then(n=>Ax(e,t,n))}class To extends kx{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function oz(t){t=ze(t,qt);const e=ze(t.firestore,ht),n=Dt(e),r=new To(e);return wB(n,t._key).then(i=>new Sa(e,r,t._key,i,new Os(i!==null&&i.hasLocalMutations,!0),t.converter))}function az(t){t=ze(t,qt);const e=ze(t.firestore,ht);return MR(Dt(e),t._key,{source:"server"}).then(n=>Ax(e,t,n))}function we(t){t=ze(t,In);const e=ze(t.firestore,ht),n=Dt(e),r=new To(e);return tN(t._query),LR(n,t._query).then(i=>new ba(e,r,t,i))}function lz(t){t=ze(t,In);const e=ze(t.firestore,ht),n=Dt(e),r=new To(e);return xB(n,t._query).then(i=>new ba(e,r,t,i))}function uz(t){t=ze(t,In);const e=ze(t.firestore,ht),n=Dt(e),r=new To(e);return LR(n,t._query,{source:"server"}).then(i=>new ba(e,r,t,i))}function Sp(t,e,n){t=ze(t,qt);const r=ze(t.firestore,ht),i=Dm(t.converter,e,n);return Cu(r,[Pm(Da(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nt.none())])}function Oe(t,e,n,...r){t=ze(t,qt);const i=ze(t.firestore,ht),s=Da(i);let o;return o=typeof(e=Et(e))=="string"||e instanceof _o?Ix(s,"updateDoc",t._key,e,n,r):Tx(s,"updateDoc",t._key,e),Cu(i,[o.toMutation(t._key,Nt.exists(!0))])}function pn(t){return Cu(ze(t.firestore,ht),[new Eu(t._key,Nt.none())])}function Ht(t,e){const n=ze(t.firestore,ht),r=J(t),i=Dm(t.converter,e);return Cu(n,[Pm(Da(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nt.exists(!1))]).then(()=>r)}function cz(t,...e){var n,r,i;t=Et(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($0(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof qt)u=ze(t.firestore,ht),c=xu(t._key.path),l={next:h=>{e[o]&&e[o](Ax(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ze(t,In);u=ze(h.firestore,ht),c=h._query;const p=new To(u);l={next:m=>{e[o]&&e[o](new ba(u,p,h,m))},error:e[o+1],complete:e[o+2]},tN(t._query)}return function(p,m,y,v){const I=new Im(v),_=new lx(m,I,y);return p.asyncQueue.enqueueAndForget(async()=>sx(await iu(p),_)),()=>{I.Za(),p.asyncQueue.enqueueAndForget(async()=>ox(await iu(p),_))}}(Dt(u),c,a,l)}function dz(t,e){return EB(Dt(t=ze(t,ht)),$0(e)?e:{next:e})}function Cu(t,e){return function(r,i){const s=new Tn;return r.asyncQueue.enqueueAndForget(async()=>YU(await gx(r),i,s)),s.promise}(Dt(t),e)}function Ax(t,e,n){const r=n.docs.get(e._key),i=new To(t);return new Sa(t,i,e._key,r,new Os(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){return aN(t,{count:oN()})}function aN(t,e){const n=ze(t.firestore,ht),r=Dt(n),i=rC(e,(s,o)=>new DC(o,s.aggregateType,s._internalFieldPath));return _B(r,t._query,i).then(s=>function(a,l,u){const c=new To(a);return new HR(l,c,u)}(n,t,s))}class fz{constructor(e){this.kind="memory",this._onlineComponentProvider=ao.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=oo.provider}toJSON(){return{kind:this.kind}}}class pz{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=lN(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class mz{constructor(){this.kind="memoryEager",this._offlineComponentProvider=oo.provider}toJSON(){return{kind:this.kind}}}class gz{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new hB(e)}}toJSON(){return{kind:this.kind}}}function yz(){return new mz}function vz(t){return new gz(t==null?void 0:t.cacheSizeBytes)}function wz(t){return new fz(t)}function xz(t){return new pz(t)}class _z{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ao.provider,this._offlineComponentProvider={build:n=>new px(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Ez{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ao.provider,this._offlineComponentProvider={build:n=>new DR(n,e==null?void 0:e.cacheSizeBytes)}}}function lN(t){return new _z(t==null?void 0:t.forceOwnership)}function Tz(){return new Ez}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Da(e)}set(e,n,r){this._verifyNotCommitted();const i=Cs(e,this._firestore),s=Dm(i.converter,n,r),o=Pm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Cs(e,this._firestore);let o;return o=typeof(n=Et(n))=="string"||n instanceof _o?Ix(this._dataReader,"WriteBatch.update",s._key,n,r,i):Tx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cs(e,this._firestore);return this._mutations=this._mutations.concat(new Eu(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cs(t,e){if((t=Et(t)).firestore!==e)throw new K($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Da(n)}get(n){const r=Cs(n,this._firestore),i=new ZB(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return fe();const o=s[0];if(o.isFoundDocument())return new wd(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new wd(this._firestore,i,r._key,null,r.converter);throw fe()})}set(n,r,i){const s=Cs(n,this._firestore),o=Dm(s.converter,r,i),a=Pm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Cs(n,this._firestore);let a;return a=typeof(r=Et(r))=="string"||r instanceof _o?Ix(this._dataReader,"Transaction.update",o._key,r,i,s):Tx(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Cs(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Cs(e,this._firestore),r=new To(this._firestore);return super.get(e).then(i=>new Sa(this._firestore,r,n._key,i._document,new Os(!1,!1),n.converter))}}function Sz(t,e,n){t=ze(t,ht);const r=Object.assign(Object.assign({},Iz),n);return function(s){if(s.maxAttempts<1)throw new K($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Tn;return s.asyncQueue.enqueueAndForget(async()=>{const u=await jR(s);new mB(s.asyncQueue,u,a,o,l).au()}),l.promise}(Dt(t),i=>e(new cN(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(){return new Qd("deleteField")}function de(){return new wx("serverTimestamp")}function Cl(...t){return new xx("arrayUnion",t)}function pl(...t){return new _x("arrayRemove",t)}function di(t){return new Ex("increment",t)}function kz(t){return new Kd(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){return Dt(t=ze(t,ht)),new uN(t,e=>Cu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(t,e){const n=Dt(t=ze(t,ht));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Sr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(c){throw new K($.INVALID_ARGUMENT,"Failed to parse JSON: "+(c==null?void 0:c.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=ZI(l,"collectionGroup"),c=[];if(Array.isArray(l.fields))for(const h of l.fields){const p=Cm("setIndexConfiguration",ZI(h,"fieldPath"));h.arrayConfig==="CONTAINS"?c.push(new oa(p,2)):h.order==="ASCENDING"?c.push(new oa(p,0)):h.order==="DESCENDING"&&c.push(new oa(p,1))}a.push(new Gl(Gl.UNKNOWN_ID,u,c,Hl.empty()))}return a}(e);return SB(n,r)}function ZI(t,e){if(typeof t[e]!="string")throw new K($.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Pz(t){var e;t=ze(t,ht);const n=e1.get(t);if(n)return n;if(((e=Dt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new dN(t);return e1.set(t,r),r}function Cz(t){hN(t,!0)}function Rz(t){hN(t,!1)}function Nz(t){kB(Dt(t._firestore)).then(e=>Q("deleting all persistent cache indexes succeeded")).catch(e=>Sr("deleting all persistent cache indexes failed",e))}function hN(t,e){bB(Dt(t._firestore),e).then(n=>Q(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Sr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const e1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){var e;const n=(e=Dt(ze(t.firestore,ht))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:vm(n,Wn(t._query))._t}function Vz(t,e){var n;const r=rC(e,(s,o)=>new DC(o,s.aggregateType,s._internalFieldPath)),i=(n=Dt(ze(t.firestore,ht))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return i===void 0?null:GC(i,yC(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Px.instance.onExistenceFilterMismatch(e)}}class Px{constructor(){this.Uu=new Map}static get instance(){return Uh||(Uh=new Px,function(n){if(mp)throw new Error("a TestingHooksSpi instance is already set");mp=n}(Uh)),Uh}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let Uh=null;(function(e,n=!0){(function(i){wu=i})(gu),$l(new ga("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ht(new _5(r.getProvider("auth-internal")),new I5(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hs($T,"4.7.3",e),Hs($T,"4.7.3","esm2017")})();const t1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:kx,AggregateField:su,AggregateQuerySnapshot:HR,Bytes:lo,CACHE_SIZE_UNLIMITED:CB,CollectionReference:Zr,DocumentReference:qt,DocumentSnapshot:Sa,FieldPath:_o,FieldValue:Eo,Firestore:ht,FirestoreError:K,GeoPoint:km,LoadBundleTask:$R,PersistentCacheIndexManager:dN,Query:In,QueryCompositeFilterConstraint:Oa,QueryConstraint:Au,QueryDocumentSnapshot:Rc,QueryEndAtConstraint:Xd,QueryFieldFilterConstraint:Pu,QueryLimitConstraint:Yd,QueryOrderByConstraint:Nm,QuerySnapshot:ba,QueryStartAtConstraint:Jd,SnapshotMetadata:Os,Timestamp:Pt,Transaction:cN,VectorValue:Kd,WriteBatch:uN,_AutoId:Rw,_ByteString:Bt,_DatabaseId:to,_DocumentKey:le,_EmptyAppCheckTokenProvider:S5,_EmptyAuthCredentialsProvider:WP,_FieldPath:kt,_TestingHooks:Oz,_cast:ze,_debugAssert:w5,_internalAggregationQueryToProtoRunAggregationQueryRequest:Vz,_internalQueryToProtoQueryTarget:Dz,_isBase64Available:Z5,_logWarn:Sr,_validateIsNotUsedTogether:UR,addDoc:Ht,aggregateFieldEqual:nz,aggregateQuerySnapshotEqual:rz,and:KB,arrayRemove:pl,arrayUnion:Cl,average:tz,clearIndexedDbPersistence:VB,collection:te,collectionGroup:AB,connectFirestoreEmulator:zR,count:oN,deleteAllPersistentCacheIndexes:Nz,deleteDoc:pn,deleteField:bz,disableNetwork:MB,disablePersistentCacheIndexAutoCreation:Rz,doc:J,documentId:BB,enableIndexedDbPersistence:NB,enableMultiTabIndexedDbPersistence:DB,enableNetwork:jB,enablePersistentCacheIndexAutoCreation:Cz,endAt:XB,endBefore:JB,ensureFirestoreConfigured:Dt,executeWrite:Cu,getAggregateFromServer:aN,getCountFromServer:hz,getDoc:Qe,getDocFromCache:oz,getDocFromServer:az,getDocs:we,getDocsFromCache:lz,getDocsFromServer:uz,getFirestore:WR,getPersistentCacheIndexManager:Pz,increment:di,initializeFirestore:RB,limit:Wt,limitToLast:QB,loadBundle:FB,memoryEagerGarbageCollector:yz,memoryLocalCache:wz,memoryLruGarbageCollector:vz,namedQuery:UB,onSnapshot:cz,onSnapshotsInSync:dz,or:HB,orderBy:Gt,persistentLocalCache:xz,persistentMultipleTabManager:Tz,persistentSingleTabManager:lN,query:ve,queryEqual:vx,refEqual:PB,runTransaction:Sz,serverTimestamp:de,setDoc:Sp,setIndexConfiguration:Az,setLogLevel:v5,snapshotEqual:sz,startAfter:nN,startAt:YB,sum:ez,terminate:LB,updateDoc:Oe,vector:kz,waitForPendingWrites:OB,where:ae,writeBatch:aa},Symbol.toStringTag,{value:"Module"}));var jz="firebase",Mz="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(jz,Mz,"app");const Lz={apiKey:"AIzaSyDV6I7Z6uGqgT8EPwTR3dr2w2xo6aoWqI4",authDomain:"benchonly-7d92a.firebaseapp.com",projectId:"benchonly-7d92a",storageBucket:"benchonly-7d92a.firebasestorage.app",messagingSenderId:"461193748919",appId:"1:461193748919:web:4268cfef7783562e374832"},Cx=XA(Lz),tl=jP(Cx),bp=new Oi;bp.setCustomParameters({prompt:"select_account"});const L=WR(Cx),n1=Object.freeze(Object.defineProperty({__proto__:null,auth:tl,db:L,default:Cx,googleProvider:bp},Symbol.toStringTag,{value:"Module"}));let ou=!1;var Yh,vb;try{ou=!!((vb=(Yh=window==null?void 0:window.Capacitor)==null?void 0:Yh.isNativePlatform)!=null&&vb.call(Yh))}catch{ou=!1}const W0=ou;var Jh,wb;ou&&((wb=(Jh=window==null?void 0:window.Capacitor)==null?void 0:Jh.getPlatform)==null||wb.call(Jh));var Xh,xb;ou&&((xb=(Xh=window==null?void 0:window.Capacitor)==null?void 0:Xh.getPlatform)==null||xb.call(Xh));const Fz="https://benchpressonly.com",fN=ou?`${Fz}/.netlify/functions`:"/.netlify/functions";function r1(t){return`${fN}/${t}`}const pN=k.createContext({}),ti=()=>k.useContext(pN),Uz={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null},Bz={uid:"guest-user",email:"guest@benchonly.com",displayName:"Guest User",photoURL:null,role:"member",groups:["sample-group"],settings:{notifications:!0,units:"lbs",theme:"dark"}},mN=()=>[{id:"sample-1",userId:"guest-user",name:"Heavy Bench Day",date:new Date(Date.now()-1*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"275",prescribedReps:"5",actualWeight:"275",actualReps:"5",rpe:"7"},{prescribedWeight:"285",prescribedReps:"5",actualWeight:"285",actualReps:"5",rpe:"8"},{prescribedWeight:"295",prescribedReps:"3",actualWeight:"295",actualReps:"4",rpe:"9"}]},{id:2,name:"Close Grip Bench",sets:[{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"7"},{prescribedWeight:"185",prescribedReps:"8",actualWeight:"185",actualReps:"8",rpe:"8"}]}]},{id:"sample-2",userId:"guest-user",name:"Volume Day",date:new Date(Date.now()-3*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"6"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"8",rpe:"7"},{prescribedWeight:"225",prescribedReps:"8",actualWeight:"225",actualReps:"7",rpe:"8"}]}]},{id:"sample-3",userId:"guest-user",name:"Accessory Work",date:new Date(Date.now()-5*24*60*60*1e3),status:"completed",exercises:[{id:1,name:"Incline Dumbbell Press",sets:[{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"10",rpe:"7"},{prescribedWeight:"70",prescribedReps:"10",actualWeight:"70",actualReps:"9",rpe:"8"}]},{id:2,name:"Tricep Pushdown",sets:[{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"6"},{prescribedWeight:"50",prescribedReps:"12",actualWeight:"50",actualReps:"12",rpe:"7"}]}]},{id:"sample-scheduled",userId:"guest-user",name:"Tomorrow's Workout",date:new Date(Date.now()+1*24*60*60*1e3),status:"scheduled",exercises:[{id:1,name:"Bench Press",sets:[{prescribedWeight:"280",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"290",prescribedReps:"5",actualWeight:"",actualReps:"",rpe:""},{prescribedWeight:"300",prescribedReps:"3",actualWeight:"",actualReps:"",rpe:""}]}]}],zz=mN(),$z=[{id:"goal-1",userId:"guest-user",lift:"Bench Press",startWeight:275,currentWeight:295,targetWeight:315,targetDate:new Date(Date.now()+60*24*60*60*1e3).toISOString().split("T")[0],status:"active"},{id:"goal-2",userId:"guest-user",lift:"Close Grip Bench",startWeight:185,currentWeight:205,targetWeight:225,targetDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],status:"active"}],Wz=[{id:"sample-group",name:"Bench Bros",description:"A group for serious bench pressers",admins:["guest-user"],members:["guest-user","member-1","member-2"],createdAt:new Date,inviteCode:"BENCHBROS"}];function gN({children:t}){const[e,n]=k.useState(null),[r,i]=k.useState(null),[s,o]=k.useState(!0),[a,l]=k.useState(!1),[u,c]=k.useState(null),[h,p]=k.useState(null),[m,y]=k.useState(!1);k.useEffect(()=>{const b=iF(tl,async R=>{if(R){n(R),l(!1);const D=J(L,"users",R.uid),C=await Qe(D);if(C.exists()){const Y=C.data();i(Y),Y.credits==null&&(await Oe(J(L,"users",R.uid),{credits:50}),Y.credits=50,i({...Y,credits:50}))}else{const Y={uid:R.uid,email:R.email,displayName:R.displayName,photoURL:R.photoURL,createdAt:de(),lastActive:de(),role:"member",groups:[],credits:0,onboardingComplete:!1,settings:{notifications:!0,units:"lbs",theme:"dark"}};await Sp(D,Y),i(Y)}}else a||(n(null),i(null));o(!1)});return()=>b()},[a]),k.useEffect(()=>{W0&&DF(tl).catch(b=>{(b==null?void 0:b.code)!=="auth/redirect-cancelled-by-user"&&console.error("[Auth] Redirect result error:",b.message)})},[]);const v=async()=>{try{if(W0)return await RF(tl,bp),{success:!0};const b=await SF(tl,bp);return l(!1),{success:!0,user:b.user}}catch(b){return console.error("Google sign in error:",b),(b==null?void 0:b.code)==="auth/popup-closed-by-user"||(b==null?void 0:b.code)==="auth/cancelled-popup-request"?{success:!1,error:"cancelled"}:{success:!1,error:b.message}}},I=()=>(n(Uz),i(Bz),l(!0),o(!1),{success:!0}),_=async()=>{try{return a?(n(null),i(null),l(!1),{success:!0}):(await sF(tl),{success:!0})}catch(b){return console.error("Sign out error:",b),{success:!1,error:b.message}}},x=(e==null?void 0:e.email)==="charltonuw@gmail.com"&&!a,E=x&&!u&&!m,V=async b=>{if(x)try{const R=J(L,"users",b),D=await Qe(R);if(!D.exists())return;const C={...D.data(),uid:b};c({uid:b,email:C.email,displayName:C.displayName,photoURL:C.photoURL}),p(C)}catch(R){console.error("Impersonation error:",R)}},M=()=>{c(null),p(null)},A={user:u?{...e,uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL}:e,userProfile:u?h:r,realUser:e,realUserProfile:r,loading:s,isGuest:a,isAppAdmin:E,isRealAdmin:x,impersonating:u,actingAsNormalUser:m,setActingAsNormalUser:y,startImpersonating:V,stopImpersonating:M,signInWithGoogle:v,signInAsGuest:I,signOut:_,updateProfile:async b=>{if(!e)return{success:!1,error:"Not authenticated"};if(a)return i(R=>({...R,...b})),{success:!0};try{const R=u?u.uid:e.uid,D=J(L,"users",R);return await Sp(D,{...b,lastActive:de()},{merge:!0}),u?p(C=>({...C,...b})):i(C=>({...C,...b})),{success:!0}}catch(R){return console.error("Update profile error:",R),{success:!1,error:R.message}}},isAuthenticated:!!e};return f.jsx(pN.Provider,{value:A,children:t})}const yJ=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:gN,SAMPLE_GOALS:$z,SAMPLE_GROUPS:Wz,SAMPLE_WORKOUTS:zz,getSampleWorkouts:mN,useAuth:ti},Symbol.toStringTag,{value:"Module"})),qz="modulepreload",Gz=function(t){return"/"+t},i1={},Ye=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Gz(l),l in i1)return;i1[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":qz,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},yN=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Vm=k.createContext({}),Om=k.createContext(null),jm=typeof document<"u",Rx=jm?k.useLayoutEffect:k.useEffect,vN=k.createContext({strict:!1}),Nx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Hz="framerAppearId",wN="data-"+Nx(Hz);function Kz(t,e,n,r){const{visualElement:i}=k.useContext(Vm),s=k.useContext(vN),o=k.useContext(Om),a=k.useContext(yN).reducedMotion,l=k.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;k.useInsertionEffect(()=>{u&&u.update(n,o)});const c=k.useRef(!!(n[wN]&&!window.HandoffComplete));return Rx(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),k.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function ml(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Qz(t,e,n){return k.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ml(n)&&(n.current=r))},[e])}function xd(t){return typeof t=="string"||Array.isArray(t)}function Mm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Dx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vx=["initial",...Dx];function Lm(t){return Mm(t.animate)||Vx.some(e=>xd(t[e]))}function xN(t){return!!(Lm(t)||t.variants)}function Yz(t,e){if(Lm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||xd(n)?n:void 0,animate:xd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Jz(t){const{initial:e,animate:n}=Yz(t,k.useContext(Vm));return k.useMemo(()=>({initial:e,animate:n}),[s1(e),s1(n)])}function s1(t){return Array.isArray(t)?t.join(" "):t}const o1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_d={};for(const t in o1)_d[t]={isEnabled:e=>o1[t].some(n=>!!e[n])};function Xz(t){for(const e in t)_d[e]={..._d[e],...t[e]}}const Ox=k.createContext({}),_N=k.createContext({}),Zz=Symbol.for("motionComponentSymbol");function e6({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Xz(t);function s(a,l){let u;const c={...k.useContext(yN),...a,layoutId:t6(a)},{isStatic:h}=c,p=Jz(a),m=r(a,h);if(!h&&jm){p.visualElement=Kz(i,m,c,e);const y=k.useContext(_N),v=k.useContext(vN).strict;p.visualElement&&(u=p.visualElement.loadFeatures(c,v,t,y))}return k.createElement(Vm.Provider,{value:p},u&&p.visualElement?k.createElement(u,{visualElement:p.visualElement,...c}):null,n(i,a,Qz(m,p.visualElement,l),m,h,p.visualElement))}const o=k.forwardRef(s);return o[Zz]=i,o}function t6({layoutId:t}){const e=k.useContext(Ox).id;return e&&t!==void 0?e+"-"+t:t}function n6(t){function e(r,i={}){return e6(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const r6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jx(t){return typeof t!="string"||t.includes("-")?!1:!!(r6.indexOf(t)>-1||/[A-Z]/.test(t))}const kp={};function i6(t){Object.assign(kp,t)}const Zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ja=new Set(Zd);function EN(t,{layout:e,layoutId:n}){return ja.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kp[t]||t==="opacity")}const fr=t=>!!(t&&t.getVelocity),s6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o6=Zd.length;function a6(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<o6;o++){const a=Zd[o];if(t[a]!==void 0){const l=s6[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const TN=t=>e=>typeof e=="string"&&e.startsWith(t),IN=TN("--"),q0=TN("var(--"),l6=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,u6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,uo=(t,e,n)=>Math.min(Math.max(n,t),e),Ma={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Nc={...Ma,transform:t=>uo(0,1,t)},Bh={...Ma,default:1},Dc=t=>Math.round(t*1e5)/1e5,Fm=/(-)?([\d]*\.?[\d])+/g,SN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,c6=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function eh(t){return typeof t=="string"}const th=t=>({test:e=>eh(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vs=th("deg"),_i=th("%"),be=th("px"),d6=th("vh"),h6=th("vw"),a1={..._i,parse:t=>_i.parse(t)/100,transform:t=>_i.transform(t*100)},l1={...Ma,transform:Math.round},bN={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,size:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,rotate:vs,rotateX:vs,rotateY:vs,rotateZ:vs,scale:Bh,scaleX:Bh,scaleY:Bh,scaleZ:Bh,skew:vs,skewX:vs,skewY:vs,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:Nc,originX:a1,originY:a1,originZ:be,zIndex:l1,fillOpacity:Nc,strokeOpacity:Nc,numOctaves:l1};function Mx(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const h in e){const p=e[h];if(IN(h)){s[h]=p;continue}const m=bN[h],y=u6(p,m);if(ja.has(h)){if(l=!0,o[h]=y,!c)continue;p!==(m.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=y):i[h]=y}if(e.transform||(l||r?i.transform=a6(t.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${p} ${m}`}}const Lx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kN(t,e,n){for(const r in e)!fr(e[r])&&!EN(r,n)&&(t[r]=e[r])}function f6({transformTemplate:t},e,n){return k.useMemo(()=>{const r=Lx();return Mx(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function p6(t,e,n){const r=t.style||{},i={};return kN(i,r,t),Object.assign(i,f6(t,e,n)),t.transformValues?t.transformValues(i):i}function m6(t,e,n){const r={},i=p6(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const g6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ap(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||g6.has(t)}let AN=t=>!Ap(t);function y6(t){t&&(AN=e=>e.startsWith("on")?!Ap(e):t(e))}try{y6(require("@emotion/is-prop-valid").default)}catch{}function v6(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(AN(i)||n===!0&&Ap(i)||!e&&!Ap(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function u1(t,e,n){return typeof t=="string"?t:be.transform(e+n*t)}function w6(t,e,n){const r=u1(e,t.x,t.width),i=u1(n,t.y,t.height);return`${r} ${i}`}const x6={offset:"stroke-dashoffset",array:"stroke-dasharray"},_6={offset:"strokeDashoffset",array:"strokeDasharray"};function E6(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?x6:_6;t[s.offset]=be.transform(-r);const o=be.transform(e),a=be.transform(n);t[s.array]=`${o} ${a}`}function Fx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,p){if(Mx(t,u,c,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:v}=t;m.transform&&(v&&(y.transform=m.transform),delete m.transform),v&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=w6(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&E6(m,o,a,l,!1)}const PN=()=>({...Lx(),attrs:{}}),Ux=t=>typeof t=="string"&&t.toLowerCase()==="svg";function T6(t,e,n,r){const i=k.useMemo(()=>{const s=PN();return Fx(s,e,{enableHardwareAcceleration:!1},Ux(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};kN(s,t.style,t),i.style={...s,...i.style}}return i}function I6(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(jx(n)?T6:m6)(r,s,o,n),c={...v6(r,typeof n=="string",t),...l,ref:i},{children:h}=r,p=k.useMemo(()=>fr(h)?h.get():h,[h]);return k.createElement(n,{...c,children:p})}}function CN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const RN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NN(t,e,n,r){CN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(RN.has(i)?i:Nx(i),e.attrs[i])}function Bx(t,e){const{style:n}=t,r={};for(const i in n)(fr(n[i])||e.style&&fr(e.style[i])||EN(i,t))&&(r[i]=n[i]);return r}function DN(t,e){const n=Bx(t,e);for(const r in t)if(fr(t[r])||fr(e[r])){const i=Zd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function zx(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function VN(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pp=t=>Array.isArray(t),S6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),b6=t=>Pp(t)?t[t.length-1]||0:t;function If(t){const e=fr(t)?t.get():t;return S6(e)?e.toValue():e}function k6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:A6(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const ON=t=>(e,n)=>{const r=k.useContext(Vm),i=k.useContext(Om),s=()=>k6(t,e,r,i);return n?s():VN(s)};function A6(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=If(s[p]);let{initial:o,animate:a}=t;const l=Lm(t),u=xN(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;return h&&typeof h!="boolean"&&!Mm(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=zx(t,m);if(!y)return;const{transitionEnd:v,transition:I,..._}=y;for(const x in _){let E=_[x];if(Array.isArray(E)){const V=c?E.length-1:0;E=E[V]}E!==null&&(i[x]=E)}for(const x in v)i[x]=v[x]}),i}const Zt=t=>t;class c1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function P6(t){let e=new c1,n=new c1,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const h=c&&i,p=h?e:n;return u&&o.add(l),p.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const c=e.order[u];c(l),o.has(c)&&(a.schedule(c),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const zh=["prepare","read","update","preRender","render","postRender"],C6=40;function R6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=zh.reduce((h,p)=>(h[p]=P6(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,C6),1),i.timestamp=h,i.isProcessing=!0,zh.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:zh.reduce((h,p)=>{const m=s[p];return h[p]=(y,v=!1,I=!1)=>(n||l(),m.schedule(y,v,I)),h},{}),cancel:h=>zh.forEach(p=>s[p].cancel(h)),state:i,steps:s}}const{schedule:_t,cancel:ts,state:Un,steps:Wg}=R6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zt,!0),N6={useVisualState:ON({scrapeMotionValuesFromProps:DN,createRenderState:PN,onMount:(t,e,{renderState:n,latestValues:r})=>{_t.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),_t.render(()=>{Fx(n,r,{enableHardwareAcceleration:!1},Ux(e.tagName),t.transformTemplate),NN(e,n)})}})},D6={useVisualState:ON({scrapeMotionValuesFromProps:Bx,createRenderState:Lx})};function V6(t,{forwardMotionProps:e=!1},n,r){return{...jx(t)?N6:D6,preloadedFeatures:n,useRender:I6(e),createVisualElement:r,Component:t}}function zi(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const jN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Um(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const O6=t=>e=>jN(e)&&t(e,Um(e));function qi(t,e,n,r){return zi(t,e,O6(n),r)}const j6=(t,e)=>n=>e(t(n)),Qs=(...t)=>t.reduce(j6);function MN(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const d1=MN("dragHorizontal"),h1=MN("dragVertical");function LN(t){let e=!1;if(t==="y")e=h1();else if(t==="x")e=d1();else{const n=d1(),r=h1();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function FN(){const t=LN(!0);return t?(t(),!1):!0}class Io{constructor(e){this.isMounted=!1,this.node=e}update(){}}function f1(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||FN())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&_t.update(()=>a[r](s,o))};return qi(t.current,n,i,{passive:!t.getProps()[r]})}class M6 extends Io{mount(){this.unmount=Qs(f1(this.node,!0),f1(this.node,!1))}unmount(){}}class L6 extends Io{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qs(zi(this.node.current,"focus",()=>this.onFocus()),zi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const UN=(t,e)=>e?t===e?!0:UN(t,e.parentElement):!1;function qg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Um(n))}class F6 extends Io{constructor(){super(...arguments),this.removeStartListeners=Zt,this.removeEndListeners=Zt,this.removeAccessibleListeners=Zt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=qi(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:h}=this.node.getProps();_t.update(()=>{!h&&!UN(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=qi(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Qs(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||qg("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&_t.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=zi(this.node.current,"keyup",o),qg("down",(a,l)=>{this.startPress(a,l)})},n=zi(this.node.current,"keydown",e),r=()=>{this.isPressing&&qg("cancel",(s,o)=>this.cancelPress(s,o))},i=zi(this.node.current,"blur",r);this.removeAccessibleListeners=Qs(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_t.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!FN()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_t.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=qi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=zi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qs(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const G0=new WeakMap,Gg=new WeakMap,U6=t=>{const e=G0.get(t.target);e&&e(t)},B6=t=>{t.forEach(U6)};function z6({root:t,...e}){const n=t||document;Gg.has(n)||Gg.set(n,{});const r=Gg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(B6,{root:t,...e})),r[i]}function $6(t,e,n){const r=z6(e);return G0.set(t,n),r.observe(t),()=>{G0.delete(t),r.unobserve(t)}}const W6={some:0,all:1};class q6 extends Io{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:W6[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),p=u?c:h;p&&p(l)};return $6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(G6(e,n))&&this.startObserver()}unmount(){}}function G6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const H6={inView:{Feature:q6},tap:{Feature:F6},focus:{Feature:L6},hover:{Feature:M6}};function BN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function K6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Q6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Bm(t,e,n){const r=t.getProps();return zx(r,e,n!==void 0?n:r.custom,K6(t),Q6(t))}let $x=Zt;const la=t=>t*1e3,Gi=t=>t/1e3,Y6={current:!1},zN=t=>Array.isArray(t)&&typeof t[0]=="number";function $N(t){return!!(!t||typeof t=="string"&&WN[t]||zN(t)||Array.isArray(t)&&t.every($N))}const mc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,WN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mc([0,.65,.55,1]),circOut:mc([.55,0,1,.45]),backIn:mc([.31,.01,.66,-.59]),backOut:mc([.33,1.53,.69,.99])};function qN(t){if(t)return zN(t)?mc(t):Array.isArray(t)?t.map(qN):WN[t]}function J6(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=qN(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function X6(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const GN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Z6=1e-7,e9=12;function t9(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=GN(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Z6&&++a<e9);return o}function nh(t,e,n,r){if(t===e&&n===r)return Zt;const i=s=>t9(s,0,1,t,n);return s=>s===0||s===1?s:GN(i(s),e,r)}const n9=nh(.42,0,1,1),r9=nh(0,0,.58,1),HN=nh(.42,0,.58,1),i9=t=>Array.isArray(t)&&typeof t[0]!="number",KN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,QN=t=>e=>1-t(1-e),Wx=t=>1-Math.sin(Math.acos(t)),YN=QN(Wx),s9=KN(Wx),JN=nh(.33,1.53,.69,.99),qx=QN(JN),o9=KN(qx),a9=t=>(t*=2)<1?.5*qx(t):.5*(2-Math.pow(2,-10*(t-1))),l9={linear:Zt,easeIn:n9,easeInOut:HN,easeOut:r9,circIn:Wx,circInOut:s9,circOut:YN,backIn:qx,backInOut:o9,backOut:JN,anticipate:a9},p1=t=>{if(Array.isArray(t)){$x(t.length===4);const[e,n,r,i]=t;return nh(e,n,r,i)}else if(typeof t=="string")return l9[t];return t},Gx=(t,e)=>n=>!!(eh(n)&&c6.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),XN=(t,e,n)=>r=>{if(!eh(r))return r;const[i,s,o,a]=r.match(Fm);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},u9=t=>uo(0,255,t),Hg={...Ma,transform:t=>Math.round(u9(t))},ta={test:Gx("rgb","red"),parse:XN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Hg.transform(t)+", "+Hg.transform(e)+", "+Hg.transform(n)+", "+Dc(Nc.transform(r))+")"};function c9(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const H0={test:Gx("#"),parse:c9,transform:ta.transform},gl={test:Gx("hsl","hue"),parse:XN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_i.transform(Dc(e))+", "+_i.transform(Dc(n))+", "+Dc(Nc.transform(r))+")"},Yn={test:t=>ta.test(t)||H0.test(t)||gl.test(t),parse:t=>ta.test(t)?ta.parse(t):gl.test(t)?gl.parse(t):H0.parse(t),transform:t=>eh(t)?t:t.hasOwnProperty("red")?ta.transform(t):gl.transform(t)},Lt=(t,e,n)=>-n*t+n*e+t;function Kg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function d9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Kg(l,a,t+1/3),s=Kg(l,a,t),o=Kg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Qg=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},h9=[H0,ta,gl],f9=t=>h9.find(e=>e.test(t));function m1(t){const e=f9(t);let n=e.parse(t);return e===gl&&(n=d9(n)),n}const ZN=(t,e)=>{const n=m1(t),r=m1(e),i={...n};return s=>(i.red=Qg(n.red,r.red,s),i.green=Qg(n.green,r.green,s),i.blue=Qg(n.blue,r.blue,s),i.alpha=Lt(n.alpha,r.alpha,s),ta.transform(i))};function p9(t){var e,n;return isNaN(t)&&eh(t)&&(((e=t.match(Fm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(SN))===null||n===void 0?void 0:n.length)||0)>0}const e2={regex:l6,countKey:"Vars",token:"${v}",parse:Zt},t2={regex:SN,countKey:"Colors",token:"${c}",parse:Yn.parse},n2={regex:Fm,countKey:"Numbers",token:"${n}",parse:Ma.parse};function Yg(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Cp(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Yg(n,e2),Yg(n,t2),Yg(n,n2),n}function r2(t){return Cp(t).values}function i2(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Cp(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(e2.token,o[l]):l<r+n?a=a.replace(t2.token,Yn.transform(o[l])):a=a.replace(n2.token,Dc(o[l]));return a}}const m9=t=>typeof t=="number"?0:t;function g9(t){const e=r2(t);return i2(t)(e.map(m9))}const co={test:p9,parse:r2,createTransformer:i2,getAnimatableNone:g9},s2=(t,e)=>n=>`${n>0?e:t}`;function o2(t,e){return typeof t=="number"?n=>Lt(t,e,n):Yn.test(t)?ZN(t,e):t.startsWith("var(")?s2(t,e):l2(t,e)}const a2=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>o2(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},y9=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=o2(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},l2=(t,e)=>{const n=co.createTransformer(e),r=Cp(t),i=Cp(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Qs(a2(r.values,i.values),n):s2(t,e)},Ed=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},g1=(t,e)=>n=>Lt(t,e,n);function v9(t){return typeof t=="number"?g1:typeof t=="string"?Yn.test(t)?ZN:l2:Array.isArray(t)?a2:typeof t=="object"?y9:g1}function w9(t,e,n){const r=[],i=n||v9(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Zt:e;a=Qs(l,a)}r.push(a)}return r}function u2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if($x(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=w9(e,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const h=Ed(t[c],t[c+1],u);return o[c](h)};return n?u=>l(uo(t[0],t[s-1],u)):l}function x9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ed(0,e,r);t.push(Lt(n,1,i))}}function _9(t){const e=[0];return x9(e,t.length-1),e}function E9(t,e){return t.map(n=>n*e)}function T9(t,e){return t.map(()=>e||HN).splice(0,t.length-1)}function Rp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=i9(r)?r.map(p1):p1(r),s={done:!1,value:e[0]},o=E9(n&&n.length===e.length?n:_9(e),t),a=u2(o,e,{ease:Array.isArray(i)?i:T9(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function c2(t,e){return e?t*(1e3/e):0}const I9=5;function d2(t,e,n){const r=Math.max(e-I9,0);return c2(n-t(r),e-r)}const Jg=.001,S9=.01,b9=10,k9=.05,A9=1;function P9({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=uo(k9,A9,o),t=uo(S9,b9,Gi(t)),o<1?(i=u=>{const c=u*o,h=c*t,p=c-n,m=K0(u,o),y=Math.exp(-h);return Jg-p/m*y},s=u=>{const h=u*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-h),v=K0(Math.pow(u,2),o);return(-i(u)+Jg>0?-1:1)*((p-m)*y)/v}):(i=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-Jg+c*h},s=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=R9(i,s,a);if(t=la(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const C9=12;function R9(t,e,n){let r=n;for(let i=1;i<C9;i++)r=r-t(r)/e(r);return r}function K0(t,e){return t*Math.sqrt(1-e*e)}const N9=["duration","bounce"],D9=["stiffness","damping","mass"];function y1(t,e){return e.some(n=>t[n]!==void 0)}function V9(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!y1(t,D9)&&y1(t,N9)){const n=P9(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function h2({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:h,isResolvedFromDuration:p}=V9({...r,velocity:-Gi(r.velocity||0)}),m=h||0,y=l/(2*Math.sqrt(a*u)),v=s-i,I=Gi(Math.sqrt(a/u)),_=Math.abs(v)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let x;if(y<1){const E=K0(I,y);x=V=>{const M=Math.exp(-y*I*V);return s-M*((m+y*I*v)/E*Math.sin(E*V)+v*Math.cos(E*V))}}else if(y===1)x=E=>s-Math.exp(-I*E)*(v+(m+I*v)*E);else{const E=I*Math.sqrt(y*y-1);x=V=>{const M=Math.exp(-y*I*V),O=Math.min(E*V,300);return s-M*((m+y*I*v)*Math.sinh(O)+E*v*Math.cosh(O))/E}}return{calculatedDuration:p&&c||null,next:E=>{const V=x(E);if(p)o.done=E>=c;else{let M=m;E!==0&&(y<1?M=d2(x,E,V):M=0);const O=Math.abs(M)<=n,S=Math.abs(s-V)<=e;o.done=O&&S}return o.value=o.done?s:V,o}}}function v1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],p={done:!1,value:h},m=T=>a!==void 0&&T<a||l!==void 0&&T>l,y=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let v=n*e;const I=h+v,_=o===void 0?I:o(I);_!==I&&(v=_-h);const x=T=>-v*Math.exp(-T/r),E=T=>_+x(T),V=T=>{const A=x(T),b=E(T);p.done=Math.abs(A)<=u,p.value=p.done?_:b};let M,O;const S=T=>{m(p.value)&&(M=T,O=h2({keyframes:[p.value,y(p.value)],velocity:d2(E,T,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:T=>{let A=!1;return!O&&M===void 0&&(A=!0,V(T),S(T)),M!==void 0&&T>M?O.next(T-M):(!A&&V(T),p)}}}const O9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>_t.update(e,!0),stop:()=>ts(e),now:()=>Un.isProcessing?Un.timestamp:performance.now()}},w1=2e4;function x1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<w1;)e+=n,r=t.next(e);return e>=w1?1/0:e}const j9={decay:v1,inertia:v1,tween:Rp,keyframes:Rp,spring:h2};function Np({autoplay:t=!0,delay:e=0,driver:n=O9,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:h,...p}){let m=1,y=!1,v,I;const _=()=>{I=new Promise(ue=>{v=ue})};_();let x;const E=j9[i]||Rp;let V;E!==Rp&&typeof r[0]!="number"&&(V=u2([0,100],r,{clamp:!1}),r=[0,100]);const M=E({...p,keyframes:r});let O;a==="mirror"&&(O=E({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let S="idle",T=null,A=null,b=null;M.calculatedDuration===null&&s&&(M.calculatedDuration=x1(M));const{calculatedDuration:R}=M;let D=1/0,C=1/0;R!==null&&(D=R+o,C=D*(s+1)-o);let Y=0;const ye=ue=>{if(A===null)return;m>0&&(A=Math.min(A,ue)),m<0&&(A=Math.min(ue-C/m,A)),T!==null?Y=T:Y=Math.round(ue-A)*m;const Te=Y-e*(m>=0?1:-1),j=m>=0?Te<0:Te>C;Y=Math.max(Te,0),S==="finished"&&T===null&&(Y=C);let ot=Y,mt=M;if(s){const Kt=Math.min(Y,C)/D;let rn=Math.floor(Kt),Qt=Kt%1;!Qt&&Kt>=1&&(Qt=1),Qt===1&&rn--,rn=Math.min(rn,s+1),!!(rn%2)&&(a==="reverse"?(Qt=1-Qt,o&&(Qt-=o/D)):a==="mirror"&&(mt=O)),ot=uo(0,1,Qt)*D}const Fe=j?{done:!1,value:r[0]}:mt.next(ot);V&&(Fe.value=V(Fe.value));let{done:Ze}=Fe;!j&&R!==null&&(Ze=m>=0?Y>=C:Y<=0);const Rn=T===null&&(S==="finished"||S==="running"&&Ze);return h&&h(Fe.value),Rn&&X(),Fe},De=()=>{x&&x.stop(),x=void 0},Ie=()=>{S="idle",De(),v(),_(),A=b=null},X=()=>{S="finished",c&&c(),De(),v()},ce=()=>{if(y)return;x||(x=n(ye));const ue=x.now();l&&l(),T!==null?A=ue-T:(!A||S==="finished")&&(A=ue),S==="finished"&&_(),b=A,T=null,S="running",x.start()};t&&ce();const N={then(ue,Te){return I.then(ue,Te)},get time(){return Gi(Y)},set time(ue){ue=la(ue),Y=ue,T!==null||!x||m===0?T=ue:A=x.now()-ue/m},get duration(){const ue=M.calculatedDuration===null?x1(M):M.calculatedDuration;return Gi(ue)},get speed(){return m},set speed(ue){ue===m||!x||(m=ue,N.time=Gi(Y))},get state(){return S},play:ce,pause:()=>{S="paused",T=Y},stop:()=>{y=!0,S!=="idle"&&(S="idle",u&&u(),Ie())},cancel:()=>{b!==null&&ye(b),Ie()},complete:()=>{S="finished"},sample:ue=>(A=0,ye(ue))};return N}function M9(t){let e;return()=>(e===void 0&&(e=t()),e)}const L9=M9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),F9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),$h=10,U9=2e4,B9=(t,e)=>e.type==="spring"||t==="backgroundColor"||!$N(e.ease);function z9(t,e,{onUpdate:n,onComplete:r,...i}){if(!(L9()&&F9.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const c=()=>{l=new Promise(E=>{a=E})};c();let{keyframes:h,duration:p=300,ease:m,times:y}=i;if(B9(e,i)){const E=Np({...i,repeat:0,delay:0});let V={done:!1,value:h[0]};const M=[];let O=0;for(;!V.done&&O<U9;)V=E.sample(O),M.push(V.value),O+=$h;y=void 0,h=M,p=O-$h,m="linear"}const v=J6(t.owner.current,e,h,{...i,duration:p,ease:m,times:y}),I=()=>{u=!1,v.cancel()},_=()=>{u=!0,_t.update(I),a(),c()};return v.onfinish=()=>{u||(t.set(X6(h,i)),r&&r(),_())},{then(E,V){return l.then(E,V)},attachTimeline(E){return v.timeline=E,v.onfinish=null,Zt},get time(){return Gi(v.currentTime||0)},set time(E){v.currentTime=la(E)},get speed(){return v.playbackRate},set speed(E){v.playbackRate=E},get duration(){return Gi(p)},play:()=>{o||(v.play(),ts(I))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:E}=v;if(E){const V=Np({...i,autoplay:!1});t.setWithVelocity(V.sample(E-$h).value,V.sample(E).value,$h)}_()},complete:()=>{u||v.finish()},cancel:_}}function $9({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Zt,pause:Zt,stop:Zt,then:s=>(s(),Promise.resolve()),cancel:Zt,complete:Zt});return e?Np({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const W9={type:"spring",stiffness:500,damping:25,restSpeed:10},q9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),G9={type:"keyframes",duration:.8},H9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},K9=(t,{keyframes:e})=>e.length>2?G9:ja.has(t)?t.startsWith("scale")?q9(e[1]):W9:H9,Q0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(co.test(e)||e==="0")&&!e.startsWith("url(")),Q9=new Set(["brightness","contrast","saturate","opacity"]);function Y9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Fm)||[];if(!r)return t;const i=n.replace(r,"");let s=Q9.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const J9=/([a-z-]*)\(.*?\)/g,Y0={...co,getAnimatableNone:t=>{const e=t.match(J9);return e?e.map(Y9).join(" "):t}},X9={...bN,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:Y0,WebkitFilter:Y0},Hx=t=>X9[t];function f2(t,e){let n=Hx(t);return n!==Y0&&(n=co),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const p2=t=>/^0[^.\s]+$/.test(t);function Z9(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||p2(t)}function e$(t,e,n,r){const i=Q0(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),Z9(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];s[c]=f2(e,a)}return s}function t$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function Kx(t,e){return t[e]||t.default||t}const n$={skipAnimations:!1},Qx=(t,e,n,r={})=>i=>{const s=Kx(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-la(o);const l=e$(e,t,n,s),u=l[0],c=l[l.length-1],h=Q0(t,u),p=Q0(t,c);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(t$(s)||(m={...m,...K9(t,m)}),m.duration&&(m.duration=la(m.duration)),m.repeatDelay&&(m.repeatDelay=la(m.repeatDelay)),!h||!p||Y6.current||s.type===!1||n$.skipAnimations)return $9(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=z9(e,t,m);if(y)return y}return Np(m)};function Dp(t){return!!(fr(t)&&t.add)}const m2=t=>/^\-?\d*\.?\d+$/.test(t);function Yx(t,e){t.indexOf(e)===-1&&t.push(e)}function Jx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Xx{constructor(){this.subscriptions=[]}add(e){return Yx(this.subscriptions,e),()=>Jx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const r$=t=>!isNaN(parseFloat(t));class i${constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Un;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,_t.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_t.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=r$(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Xx);const r=this.events[e].add(n);return e==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?c2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function au(t,e){return new i$(t,e)}const g2=t=>e=>e.test(t),s$={test:t=>t==="auto",parse:t=>t},y2=[Ma,be,_i,vs,h6,d6,s$],tc=t=>y2.find(g2(t)),o$=[...y2,Yn,co],a$=t=>o$.find(g2(t));function l$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,au(n))}function u$(t,e){const n=Bm(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=b6(s[o]);l$(t,o,a)}}function c$(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),c!=null&&(typeof c=="string"&&(m2(c)||p2(c))?c=parseFloat(c):!a$(c)&&co.test(u)&&(c=f2(l,u)),t.addValue(l,au(c,{owner:t})),n[l]===void 0&&(n[l]=c),c!==null&&t.setBaseTarget(l,c))}}function d$(t,e){return e?(e[t]||e.default||e).from:void 0}function h$(t,e,n){const r={};for(const i in t){const s=d$(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function f$({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function p$(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function v2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const p=t.getValue(h),m=a[h];if(!p||m===void 0||c&&f$(c,h))continue;const y={delay:n,elapsed:0,...Kx(s||{},h)};if(window.HandoffAppearAnimations){const _=t.getProps()[wN];if(_){const x=window.HandoffAppearAnimations(_,h,p,_t);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let v=!y.isHandoff&&!p$(p,m);if(y.type==="spring"&&(p.getVelocity()||y.velocity)&&(v=!1),p.animation&&(v=!1),v)continue;p.start(Qx(h,p,m,t.shouldReduceMotion&&ja.has(h)?{type:!1}:y));const I=p.animation;Dp(l)&&(l.add(h),I.then(()=>l.remove(h))),u.push(I)}return o&&Promise.all(u).then(()=>{o&&u$(t,o)}),u}function J0(t,e,n={}){const r=Bm(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(v2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:h}=i;return m$(t,e,u+l,c,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function m$(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(g$).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(J0(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function g$(t,e){return t.sortNodePosition(e)}function y$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>J0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=J0(t,e,n);else{const i=typeof e=="function"?Bm(t,e,n.custom):e;r=Promise.all(v2(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const v$=[...Dx].reverse(),w$=Dx.length;function x$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>y$(t,n,r)))}function _$(t){let e=x$(t);const n=T$();let r=!0;const i=(l,u)=>{const c=Bm(t,u);if(c){const{transition:h,transitionEnd:p,...m}=c;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,u){const c=t.getProps(),h=t.getVariantContext(!0)||{},p=[],m=new Set;let y={},v=1/0;for(let _=0;_<w$;_++){const x=v$[_],E=n[x],V=c[x]!==void 0?c[x]:h[x],M=xd(V),O=x===u?E.isActive:null;O===!1&&(v=_);let S=V===h[x]&&V!==c[x]&&M;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),E.protectedKeys={...y},!E.isActive&&O===null||!V&&!E.prevProp||Mm(V)||typeof V=="boolean")continue;let A=E$(E.prevProp,V)||x===u&&E.isActive&&!S&&M||_>v&&M,b=!1;const R=Array.isArray(V)?V:[V];let D=R.reduce(i,{});O===!1&&(D={});const{prevResolvedValues:C={}}=E,Y={...C,...D},ye=De=>{A=!0,m.has(De)&&(b=!0,m.delete(De)),E.needsAnimating[De]=!0};for(const De in Y){const Ie=D[De],X=C[De];if(y.hasOwnProperty(De))continue;let ce=!1;Pp(Ie)&&Pp(X)?ce=!BN(Ie,X):ce=Ie!==X,ce?Ie!==void 0?ye(De):m.add(De):Ie!==void 0&&m.has(De)?ye(De):E.protectedKeys[De]=!0}E.prevProp=V,E.prevResolvedValues=D,E.isActive&&(y={...y,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!S||b)&&p.push(...R.map(De=>({animation:De,options:{type:x,...l}})))}if(m.size){const _={};m.forEach(x=>{const E=t.getBaseTarget(x);E!==void 0&&(_[x]=E)}),p.push({animation:_})}let I=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,u,c){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),n[l].isActive=u;const p=o(c,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function E$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!BN(e,t):!1}function No(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function T$(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}class I$ extends Io{constructor(e){super(e),e.animationState||(e.animationState=_$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Mm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let S$=0;class b$ extends Io{constructor(){super(...arguments),this.id=S$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const k$={animation:{Feature:I$},exit:{Feature:b$}},_1=(t,e)=>Math.abs(t-e);function A$(t,e){const n=_1(t.x,e.x),r=_1(t.y,e.y);return Math.sqrt(n**2+r**2)}class w2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Zg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=A$(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=h,{timestamp:v}=Un;this.history.push({...y,timestamp:v});const{onStart:I,onMove:_}=this.handlers;p||(I&&I(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Xg(p,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Zg(h.type==="pointercancel"?this.lastMoveEventInfo:Xg(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,I),y&&y(h,I)},!jN(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Um(e),a=Xg(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Un;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,Zg(a,this.history)),this.removeListeners=Qs(qi(this.contextWindow,"pointermove",this.handlePointerMove),qi(this.contextWindow,"pointerup",this.handlePointerUp),qi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ts(this.updatePoint)}}function Xg(t,e){return e?{point:e(t.point)}:t}function E1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Zg({point:t},e){return{point:t,delta:E1(t,x2(e)),offset:E1(t,P$(e)),velocity:C$(e,.1)}}function P$(t){return t[0]}function x2(t){return t[t.length-1]}function C$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=x2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>la(e)));)n--;if(!r)return{x:0,y:0};const s=Gi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kr(t){return t.max-t.min}function X0(t,e=0,n=.01){return Math.abs(t-e)<=n}function T1(t,e,n,r=.5){t.origin=r,t.originPoint=Lt(e.min,e.max,t.origin),t.scale=kr(n)/kr(e),(X0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Lt(n.min,n.max,t.origin)-t.originPoint,(X0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Vc(t,e,n,r){T1(t.x,e.x,n.x,r?r.originX:void 0),T1(t.y,e.y,n.y,r?r.originY:void 0)}function I1(t,e,n){t.min=n.min+e.min,t.max=t.min+kr(e)}function R$(t,e,n){I1(t.x,e.x,n.x),I1(t.y,e.y,n.y)}function S1(t,e,n){t.min=e.min-n.min,t.max=t.min+kr(e)}function Oc(t,e,n){S1(t.x,e.x,n.x),S1(t.y,e.y,n.y)}function N$(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Lt(n,t,r.max):Math.min(t,n)),t}function b1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function D$(t,{top:e,left:n,bottom:r,right:i}){return{x:b1(t.x,n,i),y:b1(t.y,e,r)}}function k1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function V$(t,e){return{x:k1(t.x,e.x),y:k1(t.y,e.y)}}function O$(t,e){let n=.5;const r=kr(t),i=kr(e);return i>r?n=Ed(e.min,e.max-r,t.min):r>i&&(n=Ed(t.min,t.max-i,e.min)),uo(0,1,n)}function j$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Z0=.35;function M$(t=Z0){return t===!1?t=0:t===!0&&(t=Z0),{x:A1(t,"left","right"),y:A1(t,"top","bottom")}}function A1(t,e,n){return{min:P1(t,e),max:P1(t,n)}}function P1(t,e){return typeof t=="number"?t:t[e]||0}const C1=()=>({translate:0,scale:1,origin:0,originPoint:0}),yl=()=>({x:C1(),y:C1()}),R1=()=>({min:0,max:0}),an=()=>({x:R1(),y:R1()});function Vr(t){return[t("x"),t("y")]}function _2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function L$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function F$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ey(t){return t===void 0||t===1}function ev({scale:t,scaleX:e,scaleY:n}){return!ey(t)||!ey(e)||!ey(n)}function Fo(t){return ev(t)||E2(t)||t.z||t.rotate||t.rotateX||t.rotateY}function E2(t){return N1(t.x)||N1(t.y)}function N1(t){return t&&t!=="0%"}function Vp(t,e,n){const r=t-n,i=e*r;return n+i}function D1(t,e,n,r,i){return i!==void 0&&(t=Vp(t,i,r)),Vp(t,n,r)+e}function tv(t,e=0,n=1,r,i){t.min=D1(t.min,e,n,r,i),t.max=D1(t.max,e,n,r,i)}function T2(t,{x:e,y:n}){tv(t.x,e.translate,e.scale,e.originPoint),tv(t.y,n.translate,n.scale,n.originPoint)}function U$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&vl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,T2(t,o)),r&&Fo(s.latestValues)&&vl(t,s.latestValues))}e.x=V1(e.x),e.y=V1(e.y)}function V1(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function _s(t,e){t.min=t.min+e,t.max=t.max+e}function O1(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Lt(t.min,t.max,s);tv(t,e[n],e[r],o,e.scale)}const B$=["x","scaleX","originX"],z$=["y","scaleY","originY"];function vl(t,e){O1(t.x,e,B$),O1(t.y,e,z$)}function I2(t,e){return _2(F$(t.getBoundingClientRect(),e))}function $$(t,e,n){const r=I2(t,n),{scroll:i}=e;return i&&(_s(r.x,i.offset.x),_s(r.y,i.offset.y)),r}const S2=({current:t})=>t?t.ownerDocument.defaultView:null,W$=new WeakMap;class q${constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=an(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Um(c,"page").point)},s=(c,h)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=LN(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(I=>{let _=this.getAxisMotionValue(I).get()||0;if(_i.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const E=x.layout.layoutBox[I];E&&(_=kr(E)*(parseFloat(_)/100))}}this.originPoint[I]=_}),y&&_t.update(()=>y(c,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:I}=h;if(m&&this.currentDirection===null){this.currentDirection=G$(I),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,I),this.updateAxis("y",h.point,I),this.visualElement.render(),v&&v(c,h)},a=(c,h)=>this.stop(c,h),l=()=>Vr(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new w2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:S2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&_t.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Wh(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=N$(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ml(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=D$(i.layoutBox,n):this.constraints=!1,this.elastic=M$(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=j$(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ml(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$$(r,i.root,this.visualElement.getTransformPagePoint());let o=V$(i.layout.layoutBox,s);if(n){const a=n(L$(o));this.hasMutatedConstraints=!!a,a&&(o=_2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Vr(c=>{if(!Wh(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Qx(e,r,0,n))}stopAnimation(){Vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vr(n=>{const{drag:r}=this.getProps();if(!Wh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Lt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ml(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=O$({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vr(o=>{if(!Wh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Lt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;W$.set(this.visualElement,this);const e=this.visualElement.current,n=qi(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ml(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=zi(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vr(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Z0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function G$(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class H$ extends Io{constructor(e){super(e),this.removeGroupControls=Zt,this.removeListeners=Zt,this.controls=new q$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zt}unmount(){this.removeGroupControls(),this.removeListeners()}}const j1=t=>(e,n)=>{t&&_t.update(()=>t(e,n))};class K$ extends Io{constructor(){super(...arguments),this.removePointerDownListener=Zt}onPointerDown(e){this.session=new w2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:j1(e),onStart:j1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&_t.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=qi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Q$(){const t=k.useContext(Om);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=k.useId();return k.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Sf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function M1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const nc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=M1(t,e.target.x),r=M1(t,e.target.y);return`${n}% ${r}%`}},Y$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=co.parse(t);if(i.length>5)return r;const s=co.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Lt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class J$ extends kd.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;i6(X$),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||_t.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function b2(t){const[e,n]=Q$(),r=k.useContext(Ox);return kd.createElement(J$,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(_N),isPresent:e,safeToRemove:n})}const X$={borderRadius:{...nc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nc,borderTopRightRadius:nc,borderBottomLeftRadius:nc,borderBottomRightRadius:nc,boxShadow:Y$},k2=["TopLeft","TopRight","BottomLeft","BottomRight"],Z$=k2.length,L1=t=>typeof t=="string"?parseFloat(t):t,F1=t=>typeof t=="number"||be.test(t);function eW(t,e,n,r,i,s){i?(t.opacity=Lt(0,n.opacity!==void 0?n.opacity:1,tW(r)),t.opacityExit=Lt(e.opacity!==void 0?e.opacity:1,0,nW(r))):s&&(t.opacity=Lt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Z$;o++){const a=`border${k2[o]}Radius`;let l=U1(e,a),u=U1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||F1(l)===F1(u)?(t[a]=Math.max(Lt(L1(l),L1(u),r),0),(_i.test(u)||_i.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Lt(e.rotate||0,n.rotate||0,r))}function U1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tW=A2(0,.5,YN),nW=A2(.5,.95,Zt);function A2(t,e,n){return r=>r<t?0:r>e?1:n(Ed(t,e,r))}function B1(t,e){t.min=e.min,t.max=e.max}function Dr(t,e){B1(t.x,e.x),B1(t.y,e.y)}function z1(t,e,n,r,i){return t-=e,t=Vp(t,1/n,r),i!==void 0&&(t=Vp(t,1/i,r)),t}function rW(t,e=0,n=1,r=.5,i,s=t,o=t){if(_i.test(e)&&(e=parseFloat(e),e=Lt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Lt(s.min,s.max,r);t===s&&(a-=e),t.min=z1(t.min,e,n,a,i),t.max=z1(t.max,e,n,a,i)}function $1(t,e,[n,r,i],s,o){rW(t,e[n],e[r],e[i],e.scale,s,o)}const iW=["x","scaleX","originX"],sW=["y","scaleY","originY"];function W1(t,e,n,r){$1(t.x,e,iW,n?n.x:void 0,r?r.x:void 0),$1(t.y,e,sW,n?n.y:void 0,r?r.y:void 0)}function q1(t){return t.translate===0&&t.scale===1}function P2(t){return q1(t.x)&&q1(t.y)}function oW(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function C2(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function G1(t){return kr(t.x)/kr(t.y)}class aW{constructor(){this.members=[]}add(e){Yx(this.members,e),e.scheduleRender()}remove(e){if(Jx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function H1(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const lW=(t,e)=>t.depth-e.depth;class uW{constructor(){this.children=[],this.isDirty=!1}add(e){Yx(this.children,e),this.isDirty=!0}remove(e){Jx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lW),this.isDirty=!1,this.children.forEach(e)}}function cW(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ts(r),t(s-e))};return _t.read(r,!0),()=>ts(r)}function dW(t){window.MotionDebug&&window.MotionDebug.record(t)}function hW(t){return t instanceof SVGElement&&t.tagName!=="svg"}function fW(t,e,n){const r=fr(t)?t:au(t);return r.start(Qx("",r,e,n)),r.animation}const K1=["","X","Y","Z"],pW={visibility:"hidden"},Q1=1e3;let mW=0;const Uo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function R2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=mW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Uo.totalNodes=Uo.resolvedTargetDeltas=Uo.recalculatedProjection=0,this.nodes.forEach(vW),this.nodes.forEach(TW),this.nodes.forEach(IW),this.nodes.forEach(wW),dW(Uo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hW(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=cW(p,250),Sf.hasAnimatedSinceResize&&(Sf.hasAnimatedSinceResize=!1,this.nodes.forEach(J1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||PW,{onLayoutAnimationStart:I,onLayoutAnimationComplete:_}=c.getProps(),x=!this.targetLayout||!C2(this.targetLayout,y)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,E);const V={...Kx(v,"layout"),onPlay:I,onComplete:_};(c.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else p||J1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ts(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Y1);return}this.isUpdating||this.nodes.forEach(_W),this.isUpdating=!1,this.nodes.forEach(EW),this.nodes.forEach(gW),this.nodes.forEach(yW),this.clearAllSnapshots();const a=performance.now();Un.delta=uo(0,1e3/60,a-Un.timestamp),Un.timestamp=a,Un.isProcessing=!0,Wg.update.process(Un),Wg.preRender.process(Un),Wg.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(xW),this.sharedNodes.forEach(bW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=an(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!P2(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Fo(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),CW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return an();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(_s(a.x,l.offset.x),_s(a.y,l.offset.y)),a}removeElementScroll(o){const a=an();Dr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:h}=u;if(u!==this.root&&c&&h.layoutScroll){if(c.isRoot){Dr(a,o);const{scroll:p}=this.root;p&&(_s(a.x,-p.offset.x),_s(a.y,-p.offset.y))}_s(a.x,c.offset.x),_s(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=an();Dr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&vl(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Fo(c.latestValues)&&vl(l,c.latestValues)}return Fo(this.latestValues)&&vl(l,this.latestValues),l}removeTransform(o){const a=an();Dr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Fo(u.latestValues))continue;ev(u.latestValues)&&u.updateSnapshot();const c=an(),h=u.measurePageBox();Dr(c,h),W1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Fo(this.latestValues)&&W1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Un.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),Oc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=an(),this.targetWithTransforms=an()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),R$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dr(this.target,this.layout.layoutBox),T2(this.target,this.targetDelta)):Dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),Oc(this.relativeTargetOrigin,this.target,m.target),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Uo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ev(this.parent.latestValues)||E2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Dr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;U$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=yl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=yl(),this.projectionDeltaWithTransform=yl());const v=this.projectionTransform;Vc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=H1(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Uo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=yl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=an(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=m!==y,I=this.getStack(),_=!I||I.members.length<=1,x=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(AW));this.animationProgress=0;let E;this.mixTargetDelta=V=>{const M=V/1e3;X1(h.x,o.x,M),X1(h.y,o.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kW(this.relativeTarget,this.relativeTargetOrigin,p,M),E&&oW(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=an()),Dr(E,this.relativeTarget)),v&&(this.animationValues=c,eW(c,u,this.latestValues,M,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ts(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Sf.hasAnimatedSinceResize=!0,this.currentAnimation=fW(0,Q1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Q1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&N2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||an();const h=kr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=kr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Dr(a,l),vl(a,c),Vc(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aW),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<K1.length;c++){const h="rotate"+K1[c];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return pW;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=If(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=If(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=H1(this.projectionDeltaWithTransform,this.treeScale,p),c&&(u.transform=c(p,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in kp){if(p[v]===void 0)continue;const{correct:I,applyTo:_}=kp[v],x=u.transform==="none"?p[v]:I(p[v],h);if(_){const E=_.length;for(let V=0;V<E;V++)u[_[V]]=x}else u[v]=x}return this.options.layoutId&&(u.pointerEvents=h===this?If(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Y1),this.root.sharedNodes.clear()}}}function gW(t){t.updateLayout()}function yW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Vr(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=kr(p);p.min=r[h].min,p.max=p.min+m}):N2(s,n.layoutBox,r)&&Vr(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=kr(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=yl();Vc(a,r,n.layoutBox);const l=yl();o?Vc(l,t.applyTransform(i,!0),n.measuredBox):Vc(l,r,n.layoutBox);const u=!P2(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const y=an();Oc(y,n.layoutBox,p.layoutBox);const v=an();Oc(v,r,m.layoutBox),C2(y,v)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vW(t){Uo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xW(t){t.clearSnapshot()}function Y1(t){t.clearMeasurements()}function _W(t){t.isLayoutDirty=!1}function EW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function J1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TW(t){t.resolveTargetDelta()}function IW(t){t.calcProjection()}function SW(t){t.resetRotation()}function bW(t){t.removeLeadSnapshot()}function X1(t,e,n){t.translate=Lt(e.translate,0,n),t.scale=Lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Z1(t,e,n,r){t.min=Lt(e.min,n.min,r),t.max=Lt(e.max,n.max,r)}function kW(t,e,n,r){Z1(t.x,e.x,n.x,r),Z1(t.y,e.y,n.y,r)}function AW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PW={duration:.45,ease:[.4,0,.1,1]},eS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),tS=eS("applewebkit/")&&!eS("chrome/")?Math.round:Zt;function nS(t){t.min=tS(t.min),t.max=tS(t.max)}function CW(t){nS(t.x),nS(t.y)}function N2(t,e,n){return t==="position"||t==="preserve-aspect"&&!X0(G1(e),G1(n),.2)}const RW=R2({attachResizeListener:(t,e)=>zi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ty={current:void 0},D2=R2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ty.current){const t=new RW({});t.mount(window),t.setOptions({layoutScroll:!0}),ty.current=t}return ty.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NW={pan:{Feature:K$},drag:{Feature:H$,ProjectionNode:D2,MeasureLayout:b2}},DW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function VW(t){const e=DW.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function nv(t,e,n=1){const[r,i]=VW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return m2(o)?parseFloat(o):o}else return q0(i)?nv(i,e,n+1):i}function OW(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!q0(s))return;const o=nv(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!q0(s))continue;const o=nv(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const jW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),V2=t=>jW.has(t),MW=t=>Object.keys(t).some(V2),rS=t=>t===Ma||t===be,iS=(t,e)=>parseFloat(t.split(", ")[e]),sS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return iS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?iS(s[1],t):0}},LW=new Set(["x","y","z"]),FW=Zd.filter(t=>!LW.has(t));function UW(t){const e=[];return FW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const lu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:sS(4,13),y:sS(5,14)};lu.translateX=lu.x;lu.translateY=lu.y;const BW=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=lu[u](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),t[u]=lu[u](l,s)}),t},zW=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(V2);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let c=n[l],h=tc(c);const p=e[l];let m;if(Pp(p)){const y=p.length,v=p[0]===null?1:0;c=p[v],h=tc(c);for(let I=v;I<y&&p[I]!==null;I++)m?$x(tc(p[I])===m):m=tc(p[I])}else m=tc(p);if(h!==m)if(rS(h)&&rS(m)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===be&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(c===0||p===0)?c===0?u.set(m.transform(c)):e[l]=h.transform(p):(o||(s=UW(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=BW(e,t,a);return s.length&&s.forEach(([c,h])=>{t.getValue(c).set(h)}),t.render(),jm&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function $W(t,e,n,r){return MW(e)?zW(t,e,n,r):{target:e,transitionEnd:r}}const WW=(t,e,n,r)=>{const i=OW(t,e,r);return e=i.target,r=i.transitionEnd,$W(t,e,n,r)},rv={current:null},O2={current:!1};function qW(){if(O2.current=!0,!!jm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rv.current=t.matches;t.addListener(e),e()}else rv.current=!1}function GW(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(fr(s))t.addValue(i,s),Dp(r)&&r.add(i);else if(fr(o))t.addValue(i,au(s,{owner:t})),Dp(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,au(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const oS=new WeakMap,j2=Object.keys(_d),HW=j2.length,aS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],KW=Vx.length;class QW{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_t.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Lm(n),this.isVariantNode=xN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const p=c[h];a[h]!==void 0&&fr(p)&&(p.set(a[h],!1),Dp(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,oS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),O2.current||qW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oS.delete(this.current),this.projection&&this.projection.unmount(),ts(this.notifyUpdate),ts(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ja.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&_t.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<HW;l++){const u=j2[l],{isEnabled:c,Feature:h,ProjectionNode:p,MeasureLayout:m}=_d[u];p&&(o=p),c(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:h,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||h&&ml(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):an()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<aS.length;r++){const i=aS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=GW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<KW;r++){const i=Vx[r],s=this.props[i];(xd(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=au(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=zx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!fr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Xx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class M2 extends QW{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=h$(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){c$(this,r,o);const a=WW(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function YW(t){return window.getComputedStyle(t)}class JW extends M2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ja.has(n)){const r=Hx(n);return r&&r.default||0}else{const r=YW(e),i=(IN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return I2(e,n)}build(e,n,r,i){Mx(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Bx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){CN(e,n,r,i)}}class XW extends M2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ja.has(n)){const r=Hx(n);return r&&r.default||0}return n=RN.has(n)?n:Nx(n),e.getAttribute(n)}measureInstanceViewportBox(){return an()}scrapeMotionValuesFromProps(e,n){return DN(e,n)}build(e,n,r,i){Fx(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){NN(e,n,r,i)}mount(e){this.isSVGTag=Ux(e.tagName),super.mount(e)}}const ZW=(t,e)=>jx(t)?new XW(e,{enableHardwareAcceleration:!1}):new JW(e,{enableHardwareAcceleration:!0}),eq={layout:{ProjectionNode:D2,MeasureLayout:b2}},tq={...k$,...H6,...NW,...eq},Be=n6((t,e)=>V6(t,e,tq,ZW));function L2(){const t=k.useRef(!1);return Rx(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function nq(){const t=L2(),[e,n]=k.useState(0),r=k.useCallback(()=>{t.current&&n(e+1)},[e]);return[k.useCallback(()=>_t.postRender(r),[r]),e]}class rq extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function iq({children:t,isPresent:e}){const n=k.useId(),r=k.useRef(null),i=k.useRef({width:0,height:0,top:0,left:0});return k.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),k.createElement(rq,{isPresent:e,childRef:r,sizeRef:i},k.cloneElement(t,{ref:r}))}const ny=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=VN(sq),l=k.useId(),u=k.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const h of a.values())if(!h)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),s?void 0:[n]);return k.useMemo(()=>{a.forEach((c,h)=>a.set(h,!1))},[n]),k.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=k.createElement(iq,{isPresent:n},t)),k.createElement(Om.Provider,{value:u},t)};function sq(){return new Map}function oq(t){return k.useEffect(()=>()=>t(),[])}const Bo=t=>t.key||"";function aq(t,e){t.forEach(n=>{const r=Bo(n);e.set(r,n)})}function lq(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Ys=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=k.useContext(Ox).forceRender||nq()[0],l=L2(),u=lq(t);let c=u;const h=k.useRef(new Map).current,p=k.useRef(c),m=k.useRef(new Map).current,y=k.useRef(!0);if(Rx(()=>{y.current=!1,aq(u,m),p.current=c}),oq(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return k.createElement(k.Fragment,null,c.map(x=>k.createElement(ny,{key:Bo(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));c=[...c];const v=p.current.map(Bo),I=u.map(Bo),_=v.length;for(let x=0;x<_;x++){const E=v[x];I.indexOf(E)===-1&&!h.has(E)&&h.set(E,void 0)}return o==="wait"&&h.size&&(c=[]),h.forEach((x,E)=>{if(I.indexOf(E)!==-1)return;const V=m.get(E);if(!V)return;const M=v.indexOf(E);let O=x;if(!O){const S=()=>{h.delete(E);const T=Array.from(m.keys()).filter(A=>!I.includes(A));if(T.forEach(A=>m.delete(A)),p.current=u.filter(A=>{const b=Bo(A);return b===E||T.includes(b)}),!h.size){if(l.current===!1)return;a(),r&&r()}};O=k.createElement(ny,{key:Bo(V),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},V),h.set(E,O)}c.splice(M,0,O)}),c=c.map(x=>{const E=x.key;return h.has(E)?x:k.createElement(ny,{key:Bo(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),k.createElement(k.Fragment,null,h.size?c:c.map(x=>k.cloneElement(x)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>k.createElement("svg",{ref:c,...uq,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${cq(t)}`,a].join(" "),...u},[...e.map(([h,p])=>k.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=Pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=Pe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Pe("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=Pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Pe("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=Pe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Pe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=Pe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=Pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=Pe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=Pe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=Pe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=Pe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=Pe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=Pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Cq={},hS=t=>{let e;const n=new Set,r=(c,h)=>{const p=typeof c=="function"?c(e):c;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Cq?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},Rq=t=>t?hS(t):hS;var q2={exports:{}},G2={},H2={exports:{}},K2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=k;function Nq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dq=typeof Object.is=="function"?Object.is:Nq,Vq=cu.useState,Oq=cu.useEffect,jq=cu.useLayoutEffect,Mq=cu.useDebugValue;function Lq(t,e){var n=e(),r=Vq({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return jq(function(){i.value=n,i.getSnapshot=e,iy(i)&&s({inst:i})},[t,n,e]),Oq(function(){return iy(i)&&s({inst:i}),t(function(){iy(i)&&s({inst:i})})},[t]),Mq(n),n}function iy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dq(t,n)}catch{return!0}}function Fq(t,e){return e()}var Uq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fq:Lq;K2.useSyncExternalStore=cu.useSyncExternalStore!==void 0?cu.useSyncExternalStore:Uq;H2.exports=K2;var Bq=H2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=k,zq=Bq;function $q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wq=typeof Object.is=="function"?Object.is:$q,qq=zq.useSyncExternalStore,Gq=zm.useRef,Hq=zm.useEffect,Kq=zm.useMemo,Qq=zm.useDebugValue;G2.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Gq(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Kq(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&o.hasValue){var y=o.value;if(i(y,m))return h=y}return h=m}if(y=h,Wq(c,m))return y;var v=r(m);return i!==void 0&&i(y,v)?(c=m,y):(c=m,h=v)}var u=!1,c,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=qq(t,s[0],s[1]);return Hq(function(){o.hasValue=!0,o.value=a},[a]),Qq(a),a};q2.exports=G2;var Yq=q2.exports;const Jq=Wp(Yq),Q2={},{useDebugValue:Xq}=kd,{useSyncExternalStoreWithSelector:Zq}=Jq;let fS=!1;const e8=t=>t;function t8(t,e=e8,n){(Q2?"production":void 0)!=="production"&&n&&!fS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fS=!0);const r=Zq(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Xq(r),r}const pS=t=>{(Q2?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Rq(t):t,n=(r,i)=>t8(e,r,i);return Object.assign(n,e),n},La=t=>t?pS(t):pS,n8={};function r8(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Id=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Id(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Id(r)(n)}}}},i8=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:I=>I,version:0,merge:(I,_)=>({..._,...I}),...e},o=!1;const a=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...I)},r,i);const c=Id(s.serialize),h=()=>{const I=s.partialize({...r()});let _;const x=c({state:I,version:s.version}).then(E=>u.setItem(s.name,E)).catch(E=>{_=E});if(_)throw _;return x},p=i.setState;i.setState=(I,_)=>{p(I,_),h()};const m=t((...I)=>{n(...I),h()},r,i);let y;const v=()=>{var I;if(!u)return;o=!1,a.forEach(x=>x(r()));const _=((I=s.onRehydrateStorage)==null?void 0:I.call(s,r()))||void 0;return Id(u.getItem.bind(u))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var E;return y=s.merge(x,(E=r())!=null?E:m),n(y,!0),h()}).then(()=>{_==null||_(y,void 0),o=!0,l.forEach(x=>x(y))}).catch(x=>{_==null||_(void 0,x)})};return i.persist={setOptions:I=>{s={...s,...I},I.getStorage&&(u=I.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:I=>(a.add(I),()=>{a.delete(I)}),onFinishHydration:I=>(l.add(I),()=>{l.delete(I)})},v(),y||m},s8=(t,e)=>(n,r,i)=>{let s={storage:r8(()=>localStorage),partialize:v=>v,version:0,merge:(v,I)=>({...I,...v}),...e},o=!1;const a=new Set,l=new Set;let u=s.storage;if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const c=()=>{const v=s.partialize({...r()});return u.setItem(s.name,{state:v,version:s.version})},h=i.setState;i.setState=(v,I)=>{h(v,I),c()};const p=t((...v)=>{n(...v),c()},r,i);i.getInitialState=()=>p;let m;const y=()=>{var v,I;if(!u)return;o=!1,a.forEach(x=>{var E;return x((E=r())!=null?E:p)});const _=((I=s.onRehydrateStorage)==null?void 0:I.call(s,(v=r())!=null?v:p))||void 0;return Id(u.getItem.bind(u))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var E;const[V,M]=x;if(m=s.merge(M,(E=r())!=null?E:p),n(m,!0),V)return c()}).then(()=>{_==null||_(m,void 0),m=r(),o=!0,l.forEach(x=>x(m))}).catch(x=>{_==null||_(void 0,x)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||y(),m||p},o8=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((n8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),i8(t,e)):s8(t,e),a8=o8;La(a8(t=>({user:null,loading:!0,setUser:e=>t({user:e,loading:!1}),setLoading:e=>t({loading:e}),logout:()=>t({user:null})}),{name:"auth-storage",partialize:t=>({user:t.user})}));La((t,e)=>({workouts:[],currentWorkout:null,loading:!1,setWorkouts:n=>t({workouts:n}),setCurrentWorkout:n=>t({currentWorkout:n}),setLoading:n=>t({loading:n}),addWorkout:n=>t(r=>({workouts:[...r.workouts,n]})),updateWorkout:(n,r)=>t(i=>({workouts:i.workouts.map(s=>s.id===n?{...s,...r}:s)})),deleteWorkout:n=>t(r=>({workouts:r.workouts.filter(i=>i.id!==n)}))}));La(t=>({groups:[],currentGroup:null,members:[],loading:!1,setGroups:e=>t({groups:e}),setCurrentGroup:e=>t({currentGroup:e}),setMembers:e=>t({members:e}),setLoading:e=>t({loading:e}),addGroup:e=>t(n=>({groups:[...n.groups,e]})),updateGroup:(e,n)=>t(r=>({groups:r.groups.map(i=>i.id===e?{...i,...n}:i)}))}));La(t=>({goals:[],loading:!1,setGoals:e=>t({goals:e}),setLoading:e=>t({loading:e}),addGoal:e=>t(n=>({goals:[...n.goals,e]})),updateGoal:(e,n)=>t(r=>({goals:r.goals.map(i=>i.id===e?{...i,...n}:i)})),deleteGoal:e=>t(n=>({goals:n.goals.filter(r=>r.id!==e)}))}));La(t=>({selectedDate:new Date,viewMode:"month",scheduledWorkouts:[],vacations:[],missedDays:[],setSelectedDate:e=>t({selectedDate:e}),setViewMode:e=>t({viewMode:e}),setScheduledWorkouts:e=>t({scheduledWorkouts:e}),setVacations:e=>t({vacations:e}),setMissedDays:e=>t({missedDays:e}),addVacation:e=>t(n=>({vacations:[...n.vacations,e]})),addMissedDay:e=>t(n=>({missedDays:[...n.missedDays,e]}))}));const Y2=La(t=>({sidebarOpen:!0,chatOpen:!1,activeModal:null,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),toggleChat:()=>t(e=>({chatOpen:!e.chatOpen})),setChatOpen:e=>t({chatOpen:e}),setActiveModal:e=>t({activeModal:e}),closeModal:()=>t({activeModal:null})}));La(t=>({usage:[],totalTokens:0,loading:!1,filters:{userId:null,startDate:null,endDate:null},setUsage:e=>t({usage:e}),setTotalTokens:e=>t({totalTokens:e}),setLoading:e=>t({loading:e}),setFilters:e=>t(n=>({filters:{...n.filters,...e}})),resetFilters:()=>t({filters:{userId:null,startDate:null,endDate:null}})}));function l8(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const u8=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,c8=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,d8={};function mS(t,e){return(d8.jsx?c8:u8).test(t)}const h8=/[ \t\n\f\r]/g;function f8(t){return typeof t=="object"?t.type==="text"?gS(t.value):!1:gS(t)}function gS(t){return t.replace(h8,"")===""}class rh{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}rh.prototype.normal={};rh.prototype.property={};rh.prototype.space=void 0;function J2(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new rh(n,r,e)}function sv(t){return t.toLowerCase()}class pr{constructor(e,n){this.attribute=n,this.property=e}}pr.prototype.attribute="";pr.prototype.booleanish=!1;pr.prototype.boolean=!1;pr.prototype.commaOrSpaceSeparated=!1;pr.prototype.commaSeparated=!1;pr.prototype.defined=!1;pr.prototype.mustUseProperty=!1;pr.prototype.number=!1;pr.prototype.overloadedBoolean=!1;pr.prototype.property="";pr.prototype.spaceSeparated=!1;pr.prototype.space=void 0;let p8=0;const Le=Fa(),ln=Fa(),ov=Fa(),ee=Fa(),vt=Fa(),Nl=Fa(),wr=Fa();function Fa(){return 2**++p8}const av=Object.freeze(Object.defineProperty({__proto__:null,boolean:Le,booleanish:ln,commaOrSpaceSeparated:wr,commaSeparated:Nl,number:ee,overloadedBoolean:ov,spaceSeparated:vt},Symbol.toStringTag,{value:"Module"})),sy=Object.keys(av);class e_ extends pr{constructor(e,n,r,i){let s=-1;if(super(e,n),yS(this,"space",i),typeof r=="number")for(;++s<sy.length;){const o=sy[s];yS(this,sy[s],(r&av[o])===av[o])}}}e_.prototype.defined=!0;function yS(t,e,n){n&&(t[e]=n)}function Ru(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new e_(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[sv(r)]=r,n[sv(s.attribute)]=r}return new rh(e,n,t.space)}const X2=Ru({properties:{ariaActiveDescendant:null,ariaAtomic:ln,ariaAutoComplete:null,ariaBusy:ln,ariaChecked:ln,ariaColCount:ee,ariaColIndex:ee,ariaColSpan:ee,ariaControls:vt,ariaCurrent:null,ariaDescribedBy:vt,ariaDetails:null,ariaDisabled:ln,ariaDropEffect:vt,ariaErrorMessage:null,ariaExpanded:ln,ariaFlowTo:vt,ariaGrabbed:ln,ariaHasPopup:null,ariaHidden:ln,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:vt,ariaLevel:ee,ariaLive:null,ariaModal:ln,ariaMultiLine:ln,ariaMultiSelectable:ln,ariaOrientation:null,ariaOwns:vt,ariaPlaceholder:null,ariaPosInSet:ee,ariaPressed:ln,ariaReadOnly:ln,ariaRelevant:null,ariaRequired:ln,ariaRoleDescription:vt,ariaRowCount:ee,ariaRowIndex:ee,ariaRowSpan:ee,ariaSelected:ln,ariaSetSize:ee,ariaSort:null,ariaValueMax:ee,ariaValueMin:ee,ariaValueNow:ee,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Z2(t,e){return e in t?t[e]:e}function eD(t,e){return Z2(t,e.toLowerCase())}const m8=Ru({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Nl,acceptCharset:vt,accessKey:vt,action:null,allow:null,allowFullScreen:Le,allowPaymentRequest:Le,allowUserMedia:Le,alt:null,as:null,async:Le,autoCapitalize:null,autoComplete:vt,autoFocus:Le,autoPlay:Le,blocking:vt,capture:null,charSet:null,checked:Le,cite:null,className:vt,cols:ee,colSpan:null,content:null,contentEditable:ln,controls:Le,controlsList:vt,coords:ee|Nl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Le,defer:Le,dir:null,dirName:null,disabled:Le,download:ov,draggable:ln,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Le,formTarget:null,headers:vt,height:ee,hidden:ov,high:ee,href:null,hrefLang:null,htmlFor:vt,httpEquiv:vt,id:null,imageSizes:null,imageSrcSet:null,inert:Le,inputMode:null,integrity:null,is:null,isMap:Le,itemId:null,itemProp:vt,itemRef:vt,itemScope:Le,itemType:vt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Le,low:ee,manifest:null,max:null,maxLength:ee,media:null,method:null,min:null,minLength:ee,multiple:Le,muted:Le,name:null,nonce:null,noModule:Le,noValidate:Le,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Le,optimum:ee,pattern:null,ping:vt,placeholder:null,playsInline:Le,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Le,referrerPolicy:null,rel:vt,required:Le,reversed:Le,rows:ee,rowSpan:ee,sandbox:vt,scope:null,scoped:Le,seamless:Le,selected:Le,shadowRootClonable:Le,shadowRootDelegatesFocus:Le,shadowRootMode:null,shape:null,size:ee,sizes:null,slot:null,span:ee,spellCheck:ln,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ee,step:null,style:null,tabIndex:ee,target:null,title:null,translate:null,type:null,typeMustMatch:Le,useMap:null,value:ln,width:ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:vt,axis:null,background:null,bgColor:null,border:ee,borderColor:null,bottomMargin:ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Le,declare:Le,event:null,face:null,frame:null,frameBorder:null,hSpace:ee,leftMargin:ee,link:null,longDesc:null,lowSrc:null,marginHeight:ee,marginWidth:ee,noResize:Le,noHref:Le,noShade:Le,noWrap:Le,object:null,profile:null,prompt:null,rev:null,rightMargin:ee,rules:null,scheme:null,scrolling:ln,standby:null,summary:null,text:null,topMargin:ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Le,disableRemotePlayback:Le,prefix:null,property:null,results:ee,security:null,unselectable:null},space:"html",transform:eD}),g8=Ru({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wr,accentHeight:ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ee,amplitude:ee,arabicForm:null,ascent:ee,attributeName:null,attributeType:null,azimuth:ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ee,by:null,calcMode:null,capHeight:ee,className:vt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ee,diffuseConstant:ee,direction:null,display:null,dur:null,divisor:ee,dominantBaseline:null,download:Le,dx:null,dy:null,edgeMode:null,editable:null,elevation:ee,enableBackground:null,end:null,event:null,exponent:ee,externalResourcesRequired:null,fill:null,fillOpacity:ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Nl,g2:Nl,glyphName:Nl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ee,horizOriginX:ee,horizOriginY:ee,id:null,ideographic:ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ee,k:ee,k1:ee,k2:ee,k3:ee,k4:ee,kernelMatrix:wr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ee,overlineThickness:ee,paintOrder:null,panose1:null,path:null,pathLength:ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:vt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ee,pointsAtY:ee,pointsAtZ:ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wr,rev:wr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wr,requiredFeatures:wr,requiredFonts:wr,requiredFormats:wr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ee,specularExponent:ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ee,strikethroughThickness:ee,string:null,stroke:null,strokeDashArray:wr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ee,strokeOpacity:ee,strokeWidth:null,style:null,surfaceScale:ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wr,tabIndex:ee,tableValues:null,target:null,targetX:ee,targetY:ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ee,underlineThickness:ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ee,values:null,vAlphabetic:ee,vMathematical:ee,vectorEffect:null,vHanging:ee,vIdeographic:ee,version:null,vertAdvY:ee,vertOriginX:ee,vertOriginY:ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Z2}),tD=Ru({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),nD=Ru({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:eD}),rD=Ru({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),y8={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},v8=/[A-Z]/g,vS=/-[a-z]/g,w8=/^data[-\w.:]+$/i;function x8(t,e){const n=sv(e);let r=e,i=pr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&w8.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(vS,E8);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!vS.test(s)){let o=s.replace(v8,_8);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=e_}return new i(r,e)}function _8(t){return"-"+t.toLowerCase()}function E8(t){return t.charAt(1).toUpperCase()}const T8=J2([X2,m8,tD,nD,rD],"html"),t_=J2([X2,g8,tD,nD,rD],"svg");function I8(t){return t.join(" ").trim()}var n_={},wS=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,S8=/\n/g,b8=/^\s*/,k8=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,A8=/^:\s*/,P8=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,C8=/^[;\s]*/,R8=/^\s+|\s+$/g,N8=`
`,xS="/",_S="*",Ko="",D8="comment",V8="declaration";function O8(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(y){var v=y.match(S8);v&&(n+=v.length);var I=y.lastIndexOf(N8);r=~I?y.length-I:r+y.length}function s(){var y={line:n,column:r};return function(v){return v.position=new o(y),u(),v}}function o(y){this.start=y,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(y){var v=new Error(e.source+":"+n+":"+r+": "+y);if(v.reason=y,v.filename=e.source,v.line=n,v.column=r,v.source=t,!e.silent)throw v}function l(y){var v=y.exec(t);if(v){var I=v[0];return i(I),t=t.slice(I.length),v}}function u(){l(b8)}function c(y){var v;for(y=y||[];v=h();)v!==!1&&y.push(v);return y}function h(){var y=s();if(!(xS!=t.charAt(0)||_S!=t.charAt(1))){for(var v=2;Ko!=t.charAt(v)&&(_S!=t.charAt(v)||xS!=t.charAt(v+1));)++v;if(v+=2,Ko===t.charAt(v-1))return a("End of comment missing");var I=t.slice(2,v-2);return r+=2,i(I),t=t.slice(v),r+=2,y({type:D8,comment:I})}}function p(){var y=s(),v=l(k8);if(v){if(h(),!l(A8))return a("property missing ':'");var I=l(P8),_=y({type:V8,property:ES(v[0].replace(wS,Ko)),value:I?ES(I[0].replace(wS,Ko)):Ko});return l(C8),_}}function m(){var y=[];c(y);for(var v;v=p();)v!==!1&&(y.push(v),c(y));return y}return u(),m()}function ES(t){return t?t.replace(R8,Ko):Ko}var j8=O8,M8=Nf&&Nf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n_,"__esModule",{value:!0});n_.default=F8;const L8=M8(j8);function F8(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,L8.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var $m={};Object.defineProperty($m,"__esModule",{value:!0});$m.camelCase=void 0;var U8=/^--[a-zA-Z0-9_-]+$/,B8=/-([a-z])/g,z8=/^[^-]+$/,$8=/^-(webkit|moz|ms|o|khtml)-/,W8=/^-(ms)-/,q8=function(t){return!t||z8.test(t)||U8.test(t)},G8=function(t,e){return e.toUpperCase()},TS=function(t,e){return"".concat(e,"-")},H8=function(t,e){return e===void 0&&(e={}),q8(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(W8,TS):t=t.replace($8,TS),t.replace(B8,G8))};$m.camelCase=H8;var K8=Nf&&Nf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Q8=K8(n_),Y8=$m;function lv(t,e){var n={};return!t||typeof t!="string"||(0,Q8.default)(t,function(r,i){r&&i&&(n[(0,Y8.camelCase)(r,e)]=i)}),n}lv.default=lv;var J8=lv;const X8=Wp(J8),iD=sD("end"),r_=sD("start");function sD(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Z8(t){const e=r_(t),n=iD(t);if(e&&n)return{start:e,end:n}}function Lc(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?IS(t.position):"start"in t||"end"in t?IS(t):"line"in t||"column"in t?uv(t):""}function uv(t){return SS(t&&t.line)+":"+SS(t&&t.column)}function IS(t){return uv(t&&t.start)+"-"+uv(t&&t.end)}function SS(t){return t&&typeof t=="number"?t:1}class Gn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Lc(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gn.prototype.file="";Gn.prototype.name="";Gn.prototype.reason="";Gn.prototype.message="";Gn.prototype.stack="";Gn.prototype.column=void 0;Gn.prototype.line=void 0;Gn.prototype.ancestors=void 0;Gn.prototype.cause=void 0;Gn.prototype.fatal=void 0;Gn.prototype.place=void 0;Gn.prototype.ruleId=void 0;Gn.prototype.source=void 0;const i_={}.hasOwnProperty,e7=new Map,t7=/[A-Z]/g,n7=new Set(["table","tbody","thead","tfoot","tr"]),r7=new Set(["td","th"]),oD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function i7(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=h7(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=d7(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?t_:T8,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=aD(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function aD(t,e,n){if(e.type==="element")return s7(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return o7(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return l7(t,e,n);if(e.type==="mdxjsEsm")return a7(t,e);if(e.type==="root")return u7(t,e,n);if(e.type==="text")return c7(t,e)}function s7(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=t_,t.schema=i),t.ancestors.push(e);const s=uD(t,e.tagName,!1),o=f7(t,e);let a=o_(t,e);return n7.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!f8(l):!0})),lD(t,o,s,e),s_(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function o7(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Sd(t,e.position)}function a7(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Sd(t,e.position)}function l7(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=t_,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:uD(t,e.name,!0),o=p7(t,e),a=o_(t,e);return lD(t,o,s,e),s_(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function u7(t,e,n){const r={};return s_(r,o_(t,e)),t.create(e,t.Fragment,r,n)}function c7(t,e){return e.value}function lD(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function s_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function d7(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function h7(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=r_(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function f7(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&i_.call(e.properties,i)){const s=m7(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&r7.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function p7(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Sd(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Sd(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function o_(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:e7;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=aD(t,s,o);a!==void 0&&n.push(a)}return n}function m7(t,e,n){const r=x8(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?l8(n):I8(n)),r.property==="style"){let i=typeof n=="object"?n:g7(t,String(n));return t.stylePropertyNameCase==="css"&&(i=y7(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?y8[r.property]||r.property:r.attribute,n]}}function g7(t,e){try{return X8(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Gn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=oD+"#cannot-parse-style-attribute",i}}function uD(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=mS(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=mS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return i_.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Sd(t)}function Sd(t,e){const n=new Gn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=oD+"#cannot-handle-mdx-estrees-without-createevaluater",n}function y7(t){const e={};let n;for(n in t)i_.call(t,n)&&(e[v7(n)]=t[n]);return e}function v7(t){let e=t.replace(t7,w7);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function w7(t){return"-"+t.toLowerCase()}const oy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},x7={};function _7(t,e){const n=x7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return cD(t,r,i)}function cD(t,e,n){if(E7(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return bS(t.children,e,n)}return Array.isArray(t)?bS(t,e,n):""}function bS(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=cD(t[i],e,n);return r.join("")}function E7(t){return!!(t&&typeof t=="object")}const kS=document.createElement("i");function a_(t){const e="&"+t+";";kS.innerHTML=e;const n=kS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Si(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Lr(t,e){return t.length>0?(Si(t,t.length,0,e),t):e}const AS={}.hasOwnProperty;function T7(t){const e={};let n=-1;for(;++n<t.length;)I7(e,t[n]);return e}function I7(t,e){let n;for(n in e){const i=(AS.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){AS.call(i,o)||(i[o]=[]);const a=s[o];S7(i[o],Array.isArray(a)?a:a?[a]:[])}}}function S7(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Si(t,0,0,r)}function dD(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Dl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const hi=So(/[A-Za-z]/),Er=So(/[\dA-Za-z]/),b7=So(/[#-'*+\--9=?A-Z^-~]/);function cv(t){return t!==null&&(t<32||t===127)}const dv=So(/\d/),k7=So(/[\dA-Fa-f]/),A7=So(/[!-/:-@[-`{-~]/);function Re(t){return t!==null&&t<-2}function hr(t){return t!==null&&(t<0||t===32)}function it(t){return t===-2||t===-1||t===32}const P7=So(new RegExp("\\p{P}|\\p{S}","u")),C7=So(/\s/);function So(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Nu(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Er(t.charCodeAt(n+1))&&Er(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function xt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return it(l)?(t.enter(n),a(l)):e(l)}function a(l){return it(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const R7={tokenize:N7};function N7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),xt(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Re(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const D7={tokenize:V7},PS={tokenize:O7};function V7(t){const e=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const V=n[r];return e.containerState=V[1],t.attempt(V[0].continuation,l,u)(E)}return u(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const V=e.events.length;let M=V,O;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){O=e.events[M][1].end;break}_(r);let S=V;for(;S<e.events.length;)e.events[S][1].end={...O},S++;return Si(e.events,M+1,0,e.events.slice(V)),e.events.length=S,u(E)}return a(E)}function u(E){if(r===n.length){if(!i)return p(E);if(i.currentConstruct&&i.currentConstruct.concrete)return y(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(PS,c,h)(E)}function c(E){return i&&x(),_(r),p(E)}function h(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,y(E)}function p(E){return e.containerState={},t.attempt(PS,m,y)(E)}function m(E){return r++,n.push([e.currentConstruct,e.containerState]),p(E)}function y(E){if(E===null){i&&x(),_(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(E)}function v(E){if(E===null){I(t.exit("chunkFlow"),!0),_(0),t.consume(E);return}return Re(E)?(t.consume(E),I(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),v)}function I(E,V){const M=e.sliceStream(E);if(V&&M.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(M),e.parser.lazy[E.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const S=e.events.length;let T=S,A,b;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(A){b=e.events[T][1].end;break}A=!0}for(_(r),O=S;O<e.events.length;)e.events[O][1].end={...b},O++;Si(e.events,T+1,0,e.events.slice(S)),e.events.length=O}}function _(E){let V=n.length;for(;V-- >E;){const M=n[V];e.containerState=M[1],M[0].exit.call(e,t)}n.length=E}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function O7(t,e,n){return xt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function CS(t){if(t===null||hr(t)||C7(t))return 1;if(P7(t))return 2}function l_(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const hv={name:"attention",resolveAll:j7,tokenize:M7};function j7(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},p={...t[n][1].start};RS(h,-l),RS(p,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Lr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Lr(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=Lr(u,l_(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Lr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=Lr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Si(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function M7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=CS(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=CS(l),h=!c||c===2&&i||n.includes(l),p=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!p)),u._close=!!(s===42?p:p&&(c||!h)),e(l)}}function RS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const L7={name:"autolink",tokenize:F7};function F7(t,e,n){let r=0;return i;function i(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return hi(m)?(t.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Er(m)?(r=1,a(m)):u(m)}function a(m){return m===58?(t.consume(m),r=0,l):(m===43||m===45||m===46||Er(m))&&r++<32?(t.consume(m),a):(r=0,u(m))}function l(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||cv(m)?n(m):(t.consume(m),l)}function u(m){return m===64?(t.consume(m),c):b7(m)?(t.consume(m),u):n(m)}function c(m){return Er(m)?h(m):n(m)}function h(m){return m===46?(t.consume(m),r=0,c):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||Er(m))&&r++<63){const y=m===45?p:h;return t.consume(m),y}return n(m)}}const Wm={partial:!0,tokenize:U7};function U7(t,e,n){return r;function r(s){return it(s)?xt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Re(s)?e(s):n(s)}}const hD={continuation:{tokenize:z7},exit:$7,name:"blockQuote",tokenize:B7};function B7(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return it(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function z7(t,e,n){const r=this;return i;function i(o){return it(o)?xt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(hD,e,n)(o)}}function $7(t){t.exit("blockQuote")}const fD={name:"characterEscape",tokenize:W7};function W7(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return A7(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const pD={name:"characterReference",tokenize:q7};function q7(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=Er,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=k7,c):(t.enter("characterReferenceValue"),s=7,o=dv,c(h))}function c(h){if(h===59&&i){const p=t.exit("characterReferenceValue");return o===Er&&!a_(r.sliceSerialize(p))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),c):n(h)}}const NS={partial:!0,tokenize:H7},DS={concrete:!0,name:"codeFenced",tokenize:G7};function G7(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return l;function l(O){return u(O)}function u(O){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(O)}function c(O){return O===a?(o++,t.consume(O),c):o<3?n(O):(t.exit("codeFencedFenceSequence"),it(O)?xt(t,h,"whitespace")(O):h(O))}function h(O){return O===null||Re(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(NS,v,V)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(O))}function p(O){return O===null||Re(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(O)):it(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),xt(t,m,"whitespace")(O)):O===96&&O===a?n(O):(t.consume(O),p)}function m(O){return O===null||Re(O)?h(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(O))}function y(O){return O===null||Re(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(O)):O===96&&O===a?n(O):(t.consume(O),y)}function v(O){return t.attempt(i,V,I)(O)}function I(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),_}function _(O){return s>0&&it(O)?xt(t,x,"linePrefix",s+1)(O):x(O)}function x(O){return O===null||Re(O)?t.check(NS,v,V)(O):(t.enter("codeFlowValue"),E(O))}function E(O){return O===null||Re(O)?(t.exit("codeFlowValue"),x(O)):(t.consume(O),E)}function V(O){return t.exit("codeFenced"),e(O)}function M(O,S,T){let A=0;return b;function b(ye){return O.enter("lineEnding"),O.consume(ye),O.exit("lineEnding"),R}function R(ye){return O.enter("codeFencedFence"),it(ye)?xt(O,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ye):D(ye)}function D(ye){return ye===a?(O.enter("codeFencedFenceSequence"),C(ye)):T(ye)}function C(ye){return ye===a?(A++,O.consume(ye),C):A>=o?(O.exit("codeFencedFenceSequence"),it(ye)?xt(O,Y,"whitespace")(ye):Y(ye)):T(ye)}function Y(ye){return ye===null||Re(ye)?(O.exit("codeFencedFence"),S(ye)):T(ye)}}}function H7(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const ay={name:"codeIndented",tokenize:Q7},K7={partial:!0,tokenize:Y7};function Q7(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),xt(t,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Re(u)?t.attempt(K7,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Re(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function Y7(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Re(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):xt(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Re(o)?i(o):n(o)}}const J7={name:"codeText",previous:Z7,resolve:X7,tokenize:eG};function X7(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Z7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eG(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,c(h)):Re(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Re(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class tG{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&rc(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),rc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),rc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);rc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);rc(this.left,n.reverse())}}}function rc(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function mD(t){const e={};let n=-1,r,i,s,o,a,l,u;const c=new tG(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,nG(c,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Si(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function nG(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,p=-1,m=n,y=0,v=0;const I=[v];for(;m;){for(;t.get(++i)[1]!==m;);s.push(i),m._tokenizer||(c=r.sliceStream(m),m.next||c.push(null),h&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(v=p+1,I.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):I.pop(),p=I.length;p--;){const _=a.slice(I[p],I[p+1]),x=s.pop();l.push([x,x+_.length-1]),t.splice(x,2,_)}for(l.reverse(),p=-1;++p<l.length;)u[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return u}const rG={resolve:sG,tokenize:oG},iG={partial:!0,tokenize:aG};function sG(t){return mD(t),t}function oG(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Re(a)?t.check(iG,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function aG(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),xt(t,s,"linePrefix")}function s(o){if(o===null||Re(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function gD(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(_){return _===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(_),t.exit(s),p):_===null||_===32||_===41||cv(_)?n(_):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(_))}function p(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===62?(t.exit("chunkString"),t.exit(a),p(_)):_===null||_===60||Re(_)?n(_):(t.consume(_),_===92?y:m)}function y(_){return _===60||_===62||_===92?(t.consume(_),m):m(_)}function v(_){return!c&&(_===null||_===41||hr(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(_)):c<u&&_===40?(t.consume(_),c++,v):_===41?(t.consume(_),c--,v):_===null||_===32||_===40||cv(_)?n(_):(t.consume(_),_===92?I:v)}function I(_){return _===40||_===41||_===92?(t.consume(_),v):v(_)}}function yD(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(m){return t.enter(r),t.enter(i),t.consume(m),t.exit(i),t.enter(s),c}function c(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):Re(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||Re(m)||a++>999?(t.exit("chunkString"),c(m)):(t.consume(m),l||(l=!it(m)),m===92?p:h)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,h):h(m)}}function vD(t,e,n,r,i,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),o=p===40?41:p,l):n(p)}function l(p){return p===o?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(s),u(p))}function u(p){return p===o?(t.exit(s),l(o)):p===null?n(p):Re(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),xt(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(p))}function c(p){return p===o||p===null||Re(p)?(t.exit("chunkString"),u(p)):(t.consume(p),p===92?h:c)}function h(p){return p===o||p===92?(t.consume(p),c):c(p)}}function Fc(t,e){let n;return r;function r(i){return Re(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):it(i)?xt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const lG={name:"definition",tokenize:cG},uG={partial:!0,tokenize:dG};function cG(t,e,n){const r=this;let i;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return yD.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=Dl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),l):n(m)}function l(m){return hr(m)?Fc(t,u)(m):u(m)}function u(m){return gD(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function c(m){return t.attempt(uG,h,h)(m)}function h(m){return it(m)?xt(t,p,"whitespace")(m):p(m)}function p(m){return m===null||Re(m)?(t.exit("definition"),r.parser.defined.push(i),e(m)):n(m)}}function dG(t,e,n){return r;function r(a){return hr(a)?Fc(t,i)(a):n(a)}function i(a){return vD(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return it(a)?xt(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Re(a)?e(a):n(a)}}const hG={name:"hardBreakEscape",tokenize:fG};function fG(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Re(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const pG={name:"headingAtx",resolve:mG,tokenize:gG};function mG(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Si(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function gG(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||hr(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Re(c)?(t.exit("atxHeading"),e(c)):it(c)?xt(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||hr(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const yG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],VS=["pre","script","style","textarea"],vG={concrete:!0,name:"htmlFlow",resolveTo:_G,tokenize:EG},wG={partial:!0,tokenize:IG},xG={partial:!0,tokenize:TG};function _G(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function EG(t,e,n){const r=this;let i,s,o,a,l;return u;function u(j){return c(j)}function c(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),h}function h(j){return j===33?(t.consume(j),p):j===47?(t.consume(j),s=!0,v):j===63?(t.consume(j),i=3,r.interrupt?e:N):hi(j)?(t.consume(j),o=String.fromCharCode(j),I):n(j)}function p(j){return j===45?(t.consume(j),i=2,m):j===91?(t.consume(j),i=5,a=0,y):hi(j)?(t.consume(j),i=4,r.interrupt?e:N):n(j)}function m(j){return j===45?(t.consume(j),r.interrupt?e:N):n(j)}function y(j){const ot="CDATA[";return j===ot.charCodeAt(a++)?(t.consume(j),a===ot.length?r.interrupt?e:D:y):n(j)}function v(j){return hi(j)?(t.consume(j),o=String.fromCharCode(j),I):n(j)}function I(j){if(j===null||j===47||j===62||hr(j)){const ot=j===47,mt=o.toLowerCase();return!ot&&!s&&VS.includes(mt)?(i=1,r.interrupt?e(j):D(j)):yG.includes(o.toLowerCase())?(i=6,ot?(t.consume(j),_):r.interrupt?e(j):D(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?x(j):E(j))}return j===45||Er(j)?(t.consume(j),o+=String.fromCharCode(j),I):n(j)}function _(j){return j===62?(t.consume(j),r.interrupt?e:D):n(j)}function x(j){return it(j)?(t.consume(j),x):b(j)}function E(j){return j===47?(t.consume(j),b):j===58||j===95||hi(j)?(t.consume(j),V):it(j)?(t.consume(j),E):b(j)}function V(j){return j===45||j===46||j===58||j===95||Er(j)?(t.consume(j),V):M(j)}function M(j){return j===61?(t.consume(j),O):it(j)?(t.consume(j),M):E(j)}function O(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),l=j,S):it(j)?(t.consume(j),O):T(j)}function S(j){return j===l?(t.consume(j),l=null,A):j===null||Re(j)?n(j):(t.consume(j),S)}function T(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||hr(j)?M(j):(t.consume(j),T)}function A(j){return j===47||j===62||it(j)?E(j):n(j)}function b(j){return j===62?(t.consume(j),R):n(j)}function R(j){return j===null||Re(j)?D(j):it(j)?(t.consume(j),R):n(j)}function D(j){return j===45&&i===2?(t.consume(j),De):j===60&&i===1?(t.consume(j),Ie):j===62&&i===4?(t.consume(j),ue):j===63&&i===3?(t.consume(j),N):j===93&&i===5?(t.consume(j),ce):Re(j)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(wG,Te,C)(j)):j===null||Re(j)?(t.exit("htmlFlowData"),C(j)):(t.consume(j),D)}function C(j){return t.check(xG,Y,Te)(j)}function Y(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),ye}function ye(j){return j===null||Re(j)?C(j):(t.enter("htmlFlowData"),D(j))}function De(j){return j===45?(t.consume(j),N):D(j)}function Ie(j){return j===47?(t.consume(j),o="",X):D(j)}function X(j){if(j===62){const ot=o.toLowerCase();return VS.includes(ot)?(t.consume(j),ue):D(j)}return hi(j)&&o.length<8?(t.consume(j),o+=String.fromCharCode(j),X):D(j)}function ce(j){return j===93?(t.consume(j),N):D(j)}function N(j){return j===62?(t.consume(j),ue):j===45&&i===2?(t.consume(j),N):D(j)}function ue(j){return j===null||Re(j)?(t.exit("htmlFlowData"),Te(j)):(t.consume(j),ue)}function Te(j){return t.exit("htmlFlow"),e(j)}}function TG(t,e,n){const r=this;return i;function i(o){return Re(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function IG(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Wm,e,n)}}const SG={name:"htmlText",tokenize:bG};function bG(t,e,n){const r=this;let i,s,o;return a;function a(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),l}function l(N){return N===33?(t.consume(N),u):N===47?(t.consume(N),M):N===63?(t.consume(N),E):hi(N)?(t.consume(N),T):n(N)}function u(N){return N===45?(t.consume(N),c):N===91?(t.consume(N),s=0,y):hi(N)?(t.consume(N),x):n(N)}function c(N){return N===45?(t.consume(N),m):n(N)}function h(N){return N===null?n(N):N===45?(t.consume(N),p):Re(N)?(o=h,Ie(N)):(t.consume(N),h)}function p(N){return N===45?(t.consume(N),m):h(N)}function m(N){return N===62?De(N):N===45?p(N):h(N)}function y(N){const ue="CDATA[";return N===ue.charCodeAt(s++)?(t.consume(N),s===ue.length?v:y):n(N)}function v(N){return N===null?n(N):N===93?(t.consume(N),I):Re(N)?(o=v,Ie(N)):(t.consume(N),v)}function I(N){return N===93?(t.consume(N),_):v(N)}function _(N){return N===62?De(N):N===93?(t.consume(N),_):v(N)}function x(N){return N===null||N===62?De(N):Re(N)?(o=x,Ie(N)):(t.consume(N),x)}function E(N){return N===null?n(N):N===63?(t.consume(N),V):Re(N)?(o=E,Ie(N)):(t.consume(N),E)}function V(N){return N===62?De(N):E(N)}function M(N){return hi(N)?(t.consume(N),O):n(N)}function O(N){return N===45||Er(N)?(t.consume(N),O):S(N)}function S(N){return Re(N)?(o=S,Ie(N)):it(N)?(t.consume(N),S):De(N)}function T(N){return N===45||Er(N)?(t.consume(N),T):N===47||N===62||hr(N)?A(N):n(N)}function A(N){return N===47?(t.consume(N),De):N===58||N===95||hi(N)?(t.consume(N),b):Re(N)?(o=A,Ie(N)):it(N)?(t.consume(N),A):De(N)}function b(N){return N===45||N===46||N===58||N===95||Er(N)?(t.consume(N),b):R(N)}function R(N){return N===61?(t.consume(N),D):Re(N)?(o=R,Ie(N)):it(N)?(t.consume(N),R):A(N)}function D(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),i=N,C):Re(N)?(o=D,Ie(N)):it(N)?(t.consume(N),D):(t.consume(N),Y)}function C(N){return N===i?(t.consume(N),i=void 0,ye):N===null?n(N):Re(N)?(o=C,Ie(N)):(t.consume(N),C)}function Y(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||hr(N)?A(N):(t.consume(N),Y)}function ye(N){return N===47||N===62||hr(N)?A(N):n(N)}function De(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function Ie(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),X}function X(N){return it(N)?xt(t,ce,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):ce(N)}function ce(N){return t.enter("htmlTextData"),o(N)}}const u_={name:"labelEnd",resolveAll:CG,resolveTo:RG,tokenize:NG},kG={tokenize:DG},AG={tokenize:VG},PG={tokenize:OG};function CG(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Si(t,0,t.length,n),t}function RG(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=Lr(a,t.slice(s+1,s+r+3)),a=Lr(a,[["enter",c,e]]),a=Lr(a,l_(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Lr(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=Lr(a,t.slice(o+1)),a=Lr(a,[["exit",l,e]]),Si(t,s,t.length,a),t}function NG(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(p){return s?s._inactive?h(p):(o=r.parser.defined.includes(Dl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(kG,c,o?c:h)(p):p===91?t.attempt(AG,c,o?u:h)(p):o?c(p):h(p)}function u(p){return t.attempt(PG,c,h)(p)}function c(p){return e(p)}function h(p){return s._balanced=!0,n(p)}}function DG(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return hr(h)?Fc(t,s)(h):s(h)}function s(h){return h===41?c(h):gD(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return hr(h)?Fc(t,l)(h):c(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?vD(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return hr(h)?Fc(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function VG(t,e,n){const r=this;return i;function i(a){return yD.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Dl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function OG(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const jG={name:"labelStartImage",resolveAll:u_.resolveAll,tokenize:MG};function MG(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const LG={name:"labelStartLink",resolveAll:u_.resolveAll,tokenize:FG};function FG(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const ly={name:"lineEnding",tokenize:UG};function UG(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),xt(t,e,"linePrefix")}}const kf={name:"thematicBreak",tokenize:BG};function BG(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Re(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),it(u)?xt(t,a,"whitespace")(u):a(u))}}const nr={continuation:{tokenize:qG},exit:HG,name:"list",tokenize:WG},zG={partial:!0,tokenize:KG},$G={partial:!0,tokenize:GG};function WG(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:dv(m)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(kf,n,u)(m):u(m);if(!r.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(m)}return n(m)}function l(m){return dv(m)&&++o<10?(t.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),u(m)):n(m)}function u(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,t.check(Wm,r.interrupt?n:c,t.attempt(zG,p,h))}function c(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function h(m){return it(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function qG(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Wm,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xt(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!it(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt($G,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,xt(t,t.attempt(nr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function GG(t,e,n){const r=this;return xt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function HG(t){t.exit(this.containerState.type)}function KG(t,e,n){const r=this;return xt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!it(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const OS={name:"setextUnderline",resolveTo:QG,tokenize:YG};function QG(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function YG(t,e,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),it(u)?xt(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Re(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const JG={tokenize:XG};function XG(t){const e=this,n=t.attempt(Wm,r,t.attempt(this.parser.constructs.flowInitial,i,xt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(rG,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const ZG={resolveAll:xD()},eH=wD("string"),tH=wD("text");function wD(t){return{resolveAll:xD(t==="text"?nH:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let p=-1;if(h)for(;++p<h.length;){const m=h[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function xD(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function nH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const rH={42:nr,43:nr,45:nr,48:nr,49:nr,50:nr,51:nr,52:nr,53:nr,54:nr,55:nr,56:nr,57:nr,62:hD},iH={91:lG},sH={[-2]:ay,[-1]:ay,32:ay},oH={35:pG,42:kf,45:[OS,kf],60:vG,61:OS,95:kf,96:DS,126:DS},aH={38:pD,92:fD},lH={[-5]:ly,[-4]:ly,[-3]:ly,33:jG,38:pD,42:hv,60:[L7,SG],91:LG,92:[hG,fD],93:u_,95:hv,96:J7},uH={null:[hv,ZG]},cH={null:[42,95]},dH={null:[]},hH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:cH,contentInitial:iH,disable:dH,document:rH,flow:oH,flowInitial:sH,insideSpan:uH,string:aH,text:lH},Symbol.toStringTag,{value:"Module"}));function fH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:S(M),check:S(O),consume:x,enter:E,exit:V,interrupt:S(O,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(R){return o=Lr(o,R),I(),o[o.length-1]!==null?[]:(T(e,0),u.events=l_(s,u.events,u),u.events)}function p(R,D){return mH(m(R),D)}function m(R){return pH(o,R)}function y(){const{_bufferIndex:R,_index:D,line:C,column:Y,offset:ye}=r;return{_bufferIndex:R,_index:D,line:C,column:Y,offset:ye}}function v(R){i[R.line]=R.column,b()}function I(){let R;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<D.length;)_(D.charCodeAt(r._bufferIndex));else _(D)}}function _(R){c=c(R)}function x(R){Re(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,b()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=R}function E(R,D){const C=D||{};return C.type=R,C.start=y(),u.events.push(["enter",C,u]),a.push(C),C}function V(R){const D=a.pop();return D.end=y(),u.events.push(["exit",D,u]),D}function M(R,D){T(R,D.from)}function O(R,D){D.restore()}function S(R,D){return C;function C(Y,ye,De){let Ie,X,ce,N;return Array.isArray(Y)?Te(Y):"tokenize"in Y?Te([Y]):ue(Y);function ue(Fe){return Ze;function Ze(Rn){const Kt=Rn!==null&&Fe[Rn],rn=Rn!==null&&Fe.null,Qt=[...Array.isArray(Kt)?Kt:Kt?[Kt]:[],...Array.isArray(rn)?rn:rn?[rn]:[]];return Te(Qt)(Rn)}}function Te(Fe){return Ie=Fe,X=0,Fe.length===0?De:j(Fe[X])}function j(Fe){return Ze;function Ze(Rn){return N=A(),ce=Fe,Fe.partial||(u.currentConstruct=Fe),Fe.name&&u.parser.constructs.disable.null.includes(Fe.name)?mt():Fe.tokenize.call(D?Object.assign(Object.create(u),D):u,l,ot,mt)(Rn)}}function ot(Fe){return R(ce,N),ye}function mt(Fe){return N.restore(),++X<Ie.length?j(Ie[X]):De}}}function T(R,D){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Si(u.events,D,u.events.length-D,R.resolve(u.events.slice(D),u)),R.resolveTo&&(u.events=R.resolveTo(u.events,u))}function A(){const R=y(),D=u.previous,C=u.currentConstruct,Y=u.events.length,ye=Array.from(a);return{from:Y,restore:De};function De(){r=R,u.previous=D,u.currentConstruct=C,u.events.length=Y,a=ye,b()}}function b(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function pH(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function mH(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function gH(t){const r={constructs:T7([hH,...(t||{}).extensions||[]]),content:i(R7),defined:[],document:i(D7),flow:i(JG),lazy:{},string:i(eH),text:i(tH)};return r;function i(s){return o;function o(a){return fH(r,s,a)}}}function yH(t){for(;!mD(t););return t}const jS=/[\0\t\n\r]/g;function vH(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(jS.lastIndex=h,u=jS.exec(s),p=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(p),!u){e=s.slice(h);break}if(m===10&&h===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<p&&(l.push(s.slice(h,p)),t+=p-h),m){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=p+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const wH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xH(t){return t.replace(wH,_H)}function _H(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return dD(n.slice(s?2:1),s?16:10)}return a_(n)||t}const _D={}.hasOwnProperty;function EH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),TH(n)(yH(gH(n).document().write(vH()(t,e,!0))))}function TH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(si),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(gr),blockQuote:s(rn),characterEscape:A,characterReference:A,codeFenced:s(Qt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Qt,o),codeText:s(Hn,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(ni),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ri),hardBreakEscape:s(Ai),hardBreakTrailing:s(Ai),htmlFlow:s(ii,o),htmlFlowData:A,htmlText:s(ii,o),htmlTextData:A,image:s(bo),label:o,link:s(si),listItem:s(H),listItemValue:p,listOrdered:s($r,h),listUnordered:s($r),paragraph:s(Se),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gr),strong:s(ke),thematicBreak:s(Ve)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:Kt,autolinkProtocol:Rn,blockQuote:l(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:mt,characterReferenceMarkerNumeric:mt,characterReferenceValue:Fe,characterReference:Ze,codeFenced:l(I),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:b,codeIndented:l(_),codeText:l(ye),codeTextData:b,data:b,definition:l(),definitionDestinationString:V,definitionLabelString:x,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(D),hardBreakTrailing:l(D),htmlFlow:l(C),htmlFlowData:b,htmlText:l(Y),htmlTextData:b,image:l(Ie),label:ce,labelText:X,lineEnding:R,link:l(De),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ot,resourceDestinationString:N,resourceTitleString:ue,resource:Te,setextHeading:l(T),setextHeadingLineSequence:S,setextHeadingText:O,strong:l(),thematicBreak:l()}};ED(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(F){let q={type:"root",children:[]};const ne={stack:[q],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},pe=[];let xe=-1;for(;++xe<F.length;)if(F[xe][1].type==="listOrdered"||F[xe][1].type==="listUnordered")if(F[xe][0]==="enter")pe.push(xe);else{const ft=pe.pop();xe=i(F,ft,xe)}for(xe=-1;++xe<F.length;){const ft=e[F[xe][0]];_D.call(ft,F[xe][1].type)&&ft[F[xe][1].type].call(Object.assign({sliceSerialize:F[xe][2].sliceSerialize},ne),F[xe][1])}if(ne.tokenStack.length>0){const ft=ne.tokenStack[ne.tokenStack.length-1];(ft[1]||MS).call(ne,void 0,ft[0])}for(q.position={start:gs(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:gs(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},xe=-1;++xe<e.transforms.length;)q=e.transforms[xe](q)||q;return q}function i(F,q,ne){let pe=q-1,xe=-1,ft=!1,cn,gt,yn,yt;for(;++pe<=ne;){const sn=F[pe];switch(sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{sn[0]==="enter"?xe++:xe--,yt=void 0;break}case"lineEndingBlank":{sn[0]==="enter"&&(cn&&!yt&&!xe&&!yn&&(yn=pe),yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yt=void 0}if(!xe&&sn[0]==="enter"&&sn[1].type==="listItemPrefix"||xe===-1&&sn[0]==="exit"&&(sn[1].type==="listUnordered"||sn[1].type==="listOrdered")){if(cn){let yr=pe;for(gt=void 0;yr--;){const dn=F[yr];if(dn[1].type==="lineEnding"||dn[1].type==="lineEndingBlank"){if(dn[0]==="exit")continue;gt&&(F[gt][1].type="lineEndingBlank",ft=!0),dn[1].type="lineEnding",gt=yr}else if(!(dn[1].type==="linePrefix"||dn[1].type==="blockQuotePrefix"||dn[1].type==="blockQuotePrefixWhitespace"||dn[1].type==="blockQuoteMarker"||dn[1].type==="listItemIndent"))break}yn&&(!gt||yn<gt)&&(cn._spread=!0),cn.end=Object.assign({},gt?F[gt][1].start:sn[1].end),F.splice(gt||pe,0,["exit",cn,sn[2]]),pe++,ne++}if(sn[1].type==="listItemPrefix"){const yr={type:"listItem",_spread:!1,start:Object.assign({},sn[1].start),end:void 0};cn=yr,F.splice(pe,0,["enter",yr,sn[2]]),pe++,ne++,yn=void 0,yt=!0}}}return F[q][1]._spread=ft,ne}function s(F,q){return ne;function ne(pe){a.call(this,F(pe),pe),q&&q.call(this,pe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(F,q,ne){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([q,ne||void 0]),F.position={start:gs(q.start),end:void 0}}function l(F){return q;function q(ne){F&&F.call(this,ne),u.call(this,ne)}}function u(F,q){const ne=this.stack.pop(),pe=this.tokenStack.pop();if(pe)pe[0].type!==F.type&&(q?q.call(this,F,pe[0]):(pe[1]||MS).call(this,F,pe[0]));else throw new Error("Cannot close `"+F.type+"` ("+Lc({start:F.start,end:F.end})+"): its not open");ne.position.end=gs(F.end)}function c(){return _7(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function p(F){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function m(){const F=this.resume(),q=this.stack[this.stack.length-1];q.lang=F}function y(){const F=this.resume(),q=this.stack[this.stack.length-1];q.meta=F}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function I(){const F=this.resume(),q=this.stack[this.stack.length-1];q.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const F=this.resume(),q=this.stack[this.stack.length-1];q.value=F.replace(/(\r?\n|\r)$/g,"")}function x(F){const q=this.resume(),ne=this.stack[this.stack.length-1];ne.label=q,ne.identifier=Dl(this.sliceSerialize(F)).toLowerCase()}function E(){const F=this.resume(),q=this.stack[this.stack.length-1];q.title=F}function V(){const F=this.resume(),q=this.stack[this.stack.length-1];q.url=F}function M(F){const q=this.stack[this.stack.length-1];if(!q.depth){const ne=this.sliceSerialize(F).length;q.depth=ne}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function S(F){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function A(F){const ne=this.stack[this.stack.length-1].children;let pe=ne[ne.length-1];(!pe||pe.type!=="text")&&(pe=Ke(),pe.position={start:gs(F.start),end:void 0},ne.push(pe)),this.stack.push(pe)}function b(F){const q=this.stack.pop();q.value+=this.sliceSerialize(F),q.position.end=gs(F.end)}function R(F){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ne=q.children[q.children.length-1];ne.position.end=gs(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(q.type)&&(A.call(this,F),b.call(this,F))}function D(){this.data.atHardBreak=!0}function C(){const F=this.resume(),q=this.stack[this.stack.length-1];q.value=F}function Y(){const F=this.resume(),q=this.stack[this.stack.length-1];q.value=F}function ye(){const F=this.resume(),q=this.stack[this.stack.length-1];q.value=F}function De(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=q,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function Ie(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=q,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function X(F){const q=this.sliceSerialize(F),ne=this.stack[this.stack.length-2];ne.label=xH(q),ne.identifier=Dl(q).toLowerCase()}function ce(){const F=this.stack[this.stack.length-1],q=this.resume(),ne=this.stack[this.stack.length-1];if(this.data.inReference=!0,ne.type==="link"){const pe=F.children;ne.children=pe}else ne.alt=q}function N(){const F=this.resume(),q=this.stack[this.stack.length-1];q.url=F}function ue(){const F=this.resume(),q=this.stack[this.stack.length-1];q.title=F}function Te(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function ot(F){const q=this.resume(),ne=this.stack[this.stack.length-1];ne.label=q,ne.identifier=Dl(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function mt(F){this.data.characterReferenceType=F.type}function Fe(F){const q=this.sliceSerialize(F),ne=this.data.characterReferenceType;let pe;ne?(pe=dD(q,ne==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):pe=a_(q);const xe=this.stack[this.stack.length-1];xe.value+=pe}function Ze(F){const q=this.stack.pop();q.position.end=gs(F.end)}function Rn(F){b.call(this,F);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(F)}function Kt(F){b.call(this,F);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(F)}function rn(){return{type:"blockquote",children:[]}}function Qt(){return{type:"code",lang:null,meta:null,value:""}}function Hn(){return{type:"inlineCode",value:""}}function ni(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ri(){return{type:"emphasis",children:[]}}function gr(){return{type:"heading",depth:0,children:[]}}function Ai(){return{type:"break"}}function ii(){return{type:"html",value:""}}function bo(){return{type:"image",title:null,url:"",alt:null}}function si(){return{type:"link",title:null,url:"",children:[]}}function $r(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function H(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function Se(){return{type:"paragraph",children:[]}}function ke(){return{type:"strong",children:[]}}function Ke(){return{type:"text",value:""}}function Ve(){return{type:"thematicBreak"}}}function gs(t){return{line:t.line,column:t.column,offset:t.offset}}function ED(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?ED(t,r):IH(t,r)}}function IH(t,e){let n;for(n in e)if(_D.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function MS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Lc({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Lc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Lc({start:e.start,end:e.end})+") is still open")}function SH(t){const e=this;e.parser=n;function n(r){return EH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function bH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function kH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function AH(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function PH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function CH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Nu(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function NH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function DH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function TD(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function VH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return TD(t,e);const i={src:Nu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function OH(t,e){const n={src:Nu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function jH(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function MH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return TD(t,e);const i={href:Nu(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function LH(t,e){const n={href:Nu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function FH(t,e,n){const r=t.all(e),i=n?UH(n):ID(e),s={},o=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function UH(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=ID(n[r])}return e}function ID(t){const e=t.spread;return e??t.children.length>1}function BH(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function zH(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function $H(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function WH(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function qH(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=r_(e.children[1]),l=iD(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function GH(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const h=e.children[l],p={},m=o?o[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:s,properties:p,children:[]};h&&(y.children=t.all(h),t.patch(h,y),y=t.applyData(h,y)),u.push(y)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function HH(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const LS=9,FS=32;function KH(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(US(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(US(e.slice(i),i>0,!1)),s.join("")}function US(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===LS||s===FS;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===LS||s===FS;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function QH(t,e){const n={type:"text",value:KH(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function YH(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const JH={blockquote:bH,break:kH,code:AH,delete:PH,emphasis:CH,footnoteReference:RH,heading:NH,html:DH,imageReference:VH,image:OH,inlineCode:jH,linkReference:MH,link:LH,listItem:FH,list:BH,paragraph:zH,root:$H,strong:WH,table:qH,tableCell:HH,tableRow:GH,text:QH,thematicBreak:YH,toml:qh,yaml:qh,definition:qh,footnoteDefinition:qh};function qh(){}const SD=-1,qm=0,Uc=1,Mp=2,c_=3,d_=4,h_=5,f_=6,bD=7,kD=8,BS=typeof self=="object"?self:globalThis,XH=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case qm:case SD:return n(o,i);case Uc:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Mp:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case c_:return n(new Date(o),i);case d_:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case h_:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case f_:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case bD:{const{name:a,message:l}=o;return n(new BS[a](l),i)}case kD:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new BS[s](o),i)};return r},zS=t=>XH(new Map,t)(0),Qa="",{toString:ZH}={},{keys:eK}=Object,ic=t=>{const e=typeof t;if(e!=="object"||!t)return[qm,e];const n=ZH.call(t).slice(8,-1);switch(n){case"Array":return[Uc,Qa];case"Object":return[Mp,Qa];case"Date":return[c_,Qa];case"RegExp":return[d_,Qa];case"Map":return[h_,Qa];case"Set":return[f_,Qa];case"DataView":return[Uc,n]}return n.includes("Array")?[Uc,n]:n.includes("Error")?[bD,n]:[Mp,n]},Gh=([t,e])=>t===qm&&(e==="function"||e==="symbol"),tK=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=ic(o);switch(a){case qm:{let c=o;switch(l){case"bigint":a=kD,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([SD],o)}return i([a,c],o)}case Uc:{if(l){let p=o;return l==="DataView"?p=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(o)),i([l,[...p]],o)}const c=[],h=i([a,c],o);for(const p of o)c.push(s(p));return h}case Mp:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],h=i([a,c],o);for(const p of eK(o))(t||!Gh(ic(o[p])))&&c.push([s(p),s(o[p])]);return h}case c_:return i([a,o.toISOString()],o);case d_:{const{source:c,flags:h}=o;return i([a,{source:c,flags:h}],o)}case h_:{const c=[],h=i([a,c],o);for(const[p,m]of o)(t||!(Gh(ic(p))||Gh(ic(m))))&&c.push([s(p),s(m)]);return h}case f_:{const c=[],h=i([a,c],o);for(const p of o)(t||!Gh(ic(p)))&&c.push(s(p));return h}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},$S=(t,{json:e,lossy:n}={})=>{const r=[];return tK(!(e||n),!!e,new Map,r)(t),r},Lp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?zS($S(t,e)):structuredClone(t):(t,e)=>zS($S(t,e));function nK(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function rK(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function iK(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||nK,r=t.options.footnoteBackLabel||rK,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),h=String(u.identifier).toUpperCase(),p=Nu(h.toLowerCase());let m=0;const y=[],v=t.footnoteCounts.get(h);for(;v!==void 0&&++m<=v;){y.length>0&&y.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,m);typeof x=="string"&&(x={type:"text",value:x}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const I=c[c.length-1];if(I&&I.type==="element"&&I.tagName==="p"){const x=I.children[I.children.length-1];x&&x.type==="text"?x.value+=" ":I.children.push({type:"text",value:" "}),I.children.push(...y)}else c.push(...y);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(c,!0)};t.patch(u,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Lp(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const AD=function(t){if(t==null)return lK;if(typeof t=="function")return Gm(t);if(typeof t=="object")return Array.isArray(t)?sK(t):oK(t);if(typeof t=="string")return aK(t);throw new Error("Expected function, string, or object as test")};function sK(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=AD(t[n]);return Gm(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function oK(t){const e=t;return Gm(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function aK(t){return Gm(e);function e(n){return n&&n.type===t}}function Gm(t){return e;function e(n,r,i){return!!(uK(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function lK(){return!0}function uK(t){return t!==null&&typeof t=="object"&&"type"in t}const PD=[],cK=!0,WS=!1,dK="skip";function hK(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=AD(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=PD,y,v,I;if((!e||s(l,u,c[c.length-1]||void 0))&&(m=fK(n(l,c)),m[0]===WS))return m;if("children"in l&&l.children){const _=l;if(_.children&&m[0]!==dK)for(v=(r?_.children.length:-1)+o,I=c.concat(_);v>-1&&v<_.children.length;){const x=_.children[v];if(y=a(x,v,I)(),y[0]===WS)return y;v=typeof y[1]=="number"?y[1]:v+o}}return m}}}function fK(t){return Array.isArray(t)?t:typeof t=="number"?[cK,t]:t==null?PD:[t]}function CD(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),hK(t,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}const fv={}.hasOwnProperty,pK={};function mK(t,e){const n=e||pK,r=new Map,i=new Map,s=new Map,o={...JH,...n.handlers},a={all:u,applyData:yK,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:gK,wrap:wK};return CD(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,p=String(c.identifier).toUpperCase();h.has(p)||h.set(p,c)}}),a;function l(c,h){const p=c.type,m=a.handlers[p];if(fv.call(a.handlers,p)&&m)return m(a,c,h);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in c){const{children:v,...I}=c,_=Lp(I);return _.children=a.all(c),_}return Lp(c)}return(a.options.unknownHandler||vK)(a,c,h)}function u(c){const h=[];if("children"in c){const p=c.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],c);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=qS(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=qS(v.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function gK(t,e){t.position&&(e.position=Z8(t))}function yK(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Lp(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function vK(t,e){const n=e.data||{},r="value"in e&&!(fv.call(n,"hProperties")||fv.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function wK(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function qS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function GS(t,e){const n=mK(t,e),r=n.one(t,void 0),i=iK(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function xK(t,e){return t&&"run"in t?async function(n,r){const i=GS(n,{file:r,...e});await t.run(i,r)}:function(n,r){return GS(n,{file:r,...t||e})}}function HS(t){if(t)throw t}var Af=Object.prototype.hasOwnProperty,RD=Object.prototype.toString,KS=Object.defineProperty,QS=Object.getOwnPropertyDescriptor,YS=function(e){return typeof Array.isArray=="function"?Array.isArray(e):RD.call(e)==="[object Array]"},JS=function(e){if(!e||RD.call(e)!=="[object Object]")return!1;var n=Af.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Af.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Af.call(e,i)},XS=function(e,n){KS&&n.name==="__proto__"?KS(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},ZS=function(e,n){if(n==="__proto__")if(Af.call(e,n)){if(QS)return QS(e,n).value}else return;return e[n]},_K=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=ZS(a,n),i=ZS(e,n),a!==i&&(c&&i&&(JS(i)||(s=YS(i)))?(s?(s=!1,o=r&&YS(r)?r:[]):o=r&&JS(r)?r:{},XS(a,{name:n,newValue:t(c,o,i)})):typeof i<"u"&&XS(a,{name:n,newValue:i}));return a};const uy=Wp(_K);function pv(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function EK(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?TK(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function TK(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const ui={basename:IK,dirname:SK,extname:bK,join:kK,sep:"/"};function IK(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ih(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function SK(t){if(ih(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function bK(t){ih(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function kK(...t){let e=-1,n;for(;++e<t.length;)ih(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":AK(n)}function AK(t){ih(t);const e=t.codePointAt(0)===47;let n=PK(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function PK(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function ih(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const CK={cwd:RK};function RK(){return"/"}function mv(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function NK(t){if(typeof t=="string")t=new URL(t);else if(!mv(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return DK(t)}function DK(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const cy=["history","path","basename","stem","extname","dirname"];class ND{constructor(e){let n;e?mv(e)?n={path:e}:typeof e=="string"||VK(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":CK.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<cy.length;){const s=cy[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)cy.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ui.basename(this.path):void 0}set basename(e){hy(e,"basename"),dy(e,"basename"),this.path=ui.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ui.dirname(this.path):void 0}set dirname(e){eb(this.basename,"dirname"),this.path=ui.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ui.extname(this.path):void 0}set extname(e){if(dy(e,"extname"),eb(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ui.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){mv(e)&&(e=NK(e)),hy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ui.basename(this.path,this.extname):void 0}set stem(e){hy(e,"stem"),dy(e,"stem"),this.path=ui.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Gn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function dy(t,e){if(t&&t.includes(ui.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ui.sep+"`")}function hy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function eb(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function VK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const OK=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},jK={}.hasOwnProperty;class p_ extends OK{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=EK()}copy(){const e=new p_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(uy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(my("data",this.frozen),this.namespace[e]=n,this):jK.call(this.namespace,e)&&this.namespace[e]||void 0:e?(my("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Hh(e),r=this.parser||this.Parser;return fy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),fy("process",this.parser||this.Parser),py("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Hh(e),l=r.parse(a);r.run(l,a,function(c,h,p){if(c||!h||!p)return u(c);const m=h,y=r.stringify(m,p);FK(y)?p.value=y:p.result=y,u(c,p)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),fy("processSync",this.parser||this.Parser),py("processSync",this.compiler||this.Compiler),this.process(e,i),nb("processSync","process",n),r;function i(s,o){n=!0,HS(s),r=o}}run(e,n,r){tb(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Hh(n);i.run(e,l,u);function u(c,h,p){const m=h||e;c?a(c):o?o(m):r(void 0,m,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),nb("runSync","run",r),i;function s(o,a){HS(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Hh(n),i=this.compiler||this.Compiler;return py("stringify",i),tb(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(my("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=uy(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,p=-1;for(;++h<r.length;)if(r[h][0]===u){p=h;break}if(p===-1)r.push([u,...c]);else if(c.length>0){let[m,...y]=c;const v=r[p][1];pv(v)&&pv(m)&&(m=uy(!0,v,m)),r[p]=[u,m,...y]}}}}const MK=new p_().freeze();function fy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function py(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function my(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tb(t){if(!pv(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function nb(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Hh(t){return LK(t)?t:new ND(t)}function LK(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function FK(t){return typeof t=="string"||UK(t)}function UK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const BK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",rb=[],ib={allowDangerousHtml:!0},zK=/^(https?|ircs?|mailto|xmpp)$/i,$K=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function WK(t){const e=qK(t),n=GK(t);return HK(e.runSync(e.parse(n),n),t)}function qK(t){const e=t.rehypePlugins||rb,n=t.remarkPlugins||rb,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...ib}:ib;return MK().use(SH).use(n).use(xK,r).use(e)}function GK(t){const e=t.children||"",n=new ND;return typeof e=="string"&&(n.value=e),n}function HK(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||KK;for(const c of $K)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+BK+c.id,void 0);return CD(t,u),i7(t,{Fragment:f.Fragment,components:i,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function u(c,h,p){if(c.type==="raw"&&p&&typeof h=="number")return o?p.children.splice(h,1):p.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let m;for(m in oy)if(Object.hasOwn(oy,m)&&Object.hasOwn(c.properties,m)){const y=c.properties[m],v=oy[m];(v===null||v.includes(c.tagName))&&(c.properties[m]=l(String(y||""),m,c))}}if(c.type==="element"){let m=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!m&&r&&typeof h=="number"&&(m=!r(c,h,p)),m&&p&&typeof h=="number")return a&&c.children?p.children.splice(h,1,...c.children):p.children.splice(h,1),h}}}function KK(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||zK.test(t.slice(0,e))?t:""}let Kh=null;const Vl={setAdminContext(t){Kh=t},clearAdminContext(){Kh=null},async logAction(t,e,n={}){if(t)try{const r=Object.fromEntries(Object.entries(n).filter(([s,o])=>o!==void 0)),i={userId:t,action:e,metadata:r,timestamp:de(),userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`};Kh&&(i.adminUid=Kh),await Ht(te(L,"analytics"),i)}catch(r){console.error("Analytics error:",r)}},async logPageView(t,e,n={}){return this.logAction(t,"page_view",{page:e,...n})},async getActivitySummary(t=7){const e=new Date;e.setDate(e.getDate()-t);const n=ve(te(L,"analytics"),ae("timestamp",">=",Pt.fromDate(e)),Gt("timestamp","desc")),i=(await we(n)).docs.map(h=>({id:h.id,...h.data()})),s=new Set(i.map(h=>h.userId)),o={},a={},l={},u={};i.forEach(h=>{var m,y,v,I,_,x,E;o[h.action]=(o[h.action]||0)+1,h.action==="page_view"&&((m=h.metadata)!=null&&m.page)&&(a[h.metadata.page]=(a[h.metadata.page]||0)+1);const p=(v=(y=h.timestamp)==null?void 0:y.toDate)==null?void 0:v.call(y);if(p){const V=p.toISOString().split("T")[0];l[V]||(l[V]=new Set),l[V].add(h.userId)}u[h.userId]||(u[h.userId]={actions:0,lastSeen:null}),u[h.userId].actions++,(!u[h.userId].lastSeen||((_=(I=h.timestamp)==null?void 0:I.toDate)==null?void 0:_.call(I))>u[h.userId].lastSeen)&&(u[h.userId].lastSeen=(E=(x=h.timestamp)==null?void 0:x.toDate)==null?void 0:E.call(x))});const c=Object.entries(l).map(([h,p])=>({date:h,count:p.size})).sort((h,p)=>h.date.localeCompare(p.date));return{totalEvents:i.length,uniqueUsers:s.size,actionCounts:o,pageCounts:a,dailyActiveCounts:c,userActivity:u,recentEvents:i.slice(0,50),allEvents:i}},async getUserActivity(t,e=50){const n=ve(te(L,"analytics"),ae("userId","==",t),Gt("timestamp","desc"),Wt(e));return(await we(n)).docs.map(i=>({id:i.id,...i.data()}))},async getRecentActivity(t=100){const e=ve(te(L,"analytics"),Gt("timestamp","desc"),Wt(t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))}},Qh={WORKOUT_CREATED:"workout_created",WORKOUT_COMPLETED:"workout_completed",CARDIO_LOGGED:"cardio_logged"},na={async createFeedItem(t,e,n,r=null){try{let i=r;if(!i)try{const o=await Qe(J(L,"users",t)),a=o.exists()?o.data():{};a.defaultVisibility?i=a.defaultVisibility:a.isPrivate?i="private":i="public"}catch{i="public"}return{id:(await Ht(te(L,"feed"),{userId:t,type:e,data:n,visibility:i,groupId:(n==null?void 0:n.groupId)||null,reactions:{},reactionCount:0,commentCount:0,createdAt:de()})).id}}catch(i){throw console.error("Error creating feed item:",i),i}},async getFeed(t=20,e=null,n=null){try{let r;n?r=ve(te(L,"feed"),ae("userId","==",n),Gt("createdAt","desc"),Wt(t)):r=ve(te(L,"feed"),Gt("createdAt","desc"),Wt(t)),e&&(r=ve(r,nN(e)));const i=await we(r);return{items:i.docs.map(o=>({id:o.id,...o.data(),_doc:o})),lastDoc:i.docs[i.docs.length-1]||null,hasMore:i.docs.length===t}}catch(r){return console.error("Error getting feed:",r),{items:[],lastDoc:null,hasMore:!1}}},async getFeedItem(t){const e=await Qe(J(L,"feed",t));return e.exists()?{id:e.id,...e.data()}:null},async toggleReaction(t,e,n){const r=J(L,"feed",t),i=await Qe(r);if(!i.exists())return;const a=((i.data().reactions||{})[n]||[]).includes(e);return a?await Oe(r,{[`reactions.${n}`]:pl(e),reactionCount:di(-1)}):await Oe(r,{[`reactions.${n}`]:Cl(e),reactionCount:di(1)}),!a},async getComments(t){const e=ve(te(L,"feed",t,"comments"),Gt("createdAt","asc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async addComment(t,e,n,r=""){const i=await Ht(te(L,"feed",t,"comments"),{userId:e,text:n,createdAt:de()});await Oe(J(L,"feed",t),{commentCount:di(1)});try{const s=await Qe(J(L,"feed",t));if(s.exists()){const o=s.data().userId;o&&o!==e&&await Ht(te(L,"notifications"),{userId:o,type:"comment",fromUserId:e,fromUserName:r,feedId:t,feedType:s.data().type,commentText:n.slice(0,100),read:!1,createdAt:de()})}}catch(s){console.error("Notification error:",s)}return{id:i.id}},async deleteComment(t,e,n){const r=J(L,"feed",t,"comments",e),i=await Qe(r);i.exists()&&i.data().userId===n&&(await pn(r),await Oe(J(L,"feed",t),{commentCount:di(-1)}))},async deleteFeedItem(t,e,n=!1){const r=J(L,"feed",t),i=await Qe(r);i.exists()&&(n||i.data().userId===e)&&await pn(r)}},Qo={WORKOUT:"workout",CARDIO:"cardio",GROUP_WORKOUT:"group_workout",GOAL_COMPLETED:"goal_completed",GOAL_CREATED:"goal_created",STREAK:"streak",PR:"personal_record"},QK=["","","","","",""],Bc={async getUnread(t){try{const e=ve(te(L,"notifications"),ae("userId","==",t),ae("read","==",!1),Gt("createdAt","desc"),Wt(20));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{return[]}},async markAsRead(t){try{await Oe(J(L,"notifications",t),{read:!0})}catch(e){console.error("Error marking notification read:",e)}},async markAllAsRead(t){try{const e=ve(te(L,"notifications"),ae("userId","==",t),ae("read","==",!1)),n=await we(e),r=[];n.docs.forEach(i=>{r.push(Oe(J(L,"notifications",i.id),{read:!0}))}),await Promise.all(r)}catch(e){console.error("Error marking all read:",e)}}},wJ=Object.freeze(Object.defineProperty({__proto__:null,FEED_TYPES:Qo,REACTIONS:QK,feedService:na,notificationService:Bc},Symbol.toStringTag,{value:"Module"}));function xJ(t){if(!t)return"";const e=String(t).trim();if(/^\d+$/.test(e))return e;const n=e.match(/^(\d+)\s*[-\s]\s*(\d+)$/);if(n){const[,r,i]=n;return r===i?r:`${r}-${i}`}return e}function YK(t,e){return e&&e>0?Math.round(e):!t||t<=0?null:Math.round(t*2.5)}function JK(t,e){const n=YK(t,e);return n?e&&e>0?`${n} min`:`~${n} min`:null}function _J(t){if(!t)return[];const e=[],n=new Set;return t.forEach((r,i)=>{if(!n.has(i)){if(r.supersetGroup!=null){const s=t.findIndex((o,a)=>a!==i&&!n.has(a)&&o.supersetGroup===r.supersetGroup);if(s!==-1){n.add(i),n.add(s),e.push({type:"superset",exerciseA:t[i],exerciseB:t[s],indexA:i,indexB:s,supersetGroup:r.supersetGroup});return}}n.add(i),e.push({type:"single",exercise:r,index:i})}}),e}function XK(t){if(!t||!t.length)return{exerciseSummary:[],totalSets:0};let e=0;return{exerciseSummary:t.map(r=>{const i=r.sets||[];e+=i.length;const s=r.type==="time"||i.some(u=>u.prescribedTime||u.actualTime),o=r.type==="bodyweight";if(s){let u=0;return i.forEach(c=>{const h=parseInt(c.actualTime||c.prescribedTime)||0;h>u&&(u=h)}),{name:r.name||"Exercise",sets:i.length,topWeight:null,topReps:null,topTime:u||null,exerciseType:"time"}}let a=0,l=0;return i.forEach(u=>{const c=parseFloat(u.actualWeight||u.prescribedWeight)||0;c>a&&(a=c,l=parseInt(u.actualReps||u.prescribedReps)||0)}),a||i.forEach(u=>{const c=parseInt(u.actualReps||u.prescribedReps)||0;c>l&&(l=c)}),{name:r.name||"Exercise",sets:i.length,topWeight:a||null,topReps:l||null,exerciseType:o?"bodyweight":"weight"}}),totalSets:e}}function Pf(t){try{return XK(t)}catch{return{exerciseSummary:[],totalSets:0}}}const DD={async get(t){const e=await Qe(J(L,"users",t));return e.exists()?{uid:e.id,...e.data()}:null},async getByUsername(t){if(!t)return null;const e=ve(te(L,"users"),ae("username","==",t.toLowerCase()),Wt(1)),n=await we(e);if(n.empty)return null;const r=n.docs[0];return{uid:r.id,...r.data()}},async isUsernameAvailable(t,e=null){if(!t)return!1;const n=t.toLowerCase();if(["admin","settings","feed","profile","workouts","calendar","groups","goals","health","tools","usage","login","api"].includes(n))return!1;const i=ve(te(L,"users"),ae("username","==",n),Wt(1)),s=await we(i);return!!(s.empty||e&&s.docs[0].id===e)},async setUsername(t,e){const n=e.toLowerCase();if(!/^[a-z0-9_]{3,20}$/.test(n))throw new Error("Username must be 3-20 characters, letters, numbers, and underscores only");if(!await this.isUsernameAvailable(n,t))throw new Error("Username is already taken or reserved");return await Oe(J(L,"users",t),{username:n,updatedAt:de()}),n},async getAll(){return(await we(te(L,"users"))).docs.map(e=>({uid:e.id,...e.data()}))},async search(t){const e=await this.getAll(),n=t.toLowerCase();return e.filter(r=>{var i,s,o;return((i=r.displayName)==null?void 0:i.toLowerCase().includes(n))||((s=r.email)==null?void 0:s.toLowerCase().includes(n))||((o=r.username)==null?void 0:o.toLowerCase().includes(n))})},async getDashboardConfig(t){const e=await Qe(J(L,"users",t));return e.exists()&&e.data().dashboardConfig||null},async saveDashboardConfig(t,e){await Oe(J(L,"users",t),{dashboardConfig:e,updatedAt:de()})}},Pa={async create(t,e){var l,u,c;const n=e.date instanceof Date?e.date:(l=e.date)!=null&&l.toDate?e.date.toDate():new Date(e.date),r=new Date;r.setHours(0,0,0,0),n.setHours(0,0,0,0);const i=n>r;let s=!1;i?s=!1:e.workoutType==="cardio"?s=!0:s=this.checkIfComplete(e.exercises);const o=await Ht(te(L,"workouts"),{...e,userId:t,workoutType:e.workoutType||"strength",status:s?"completed":"scheduled",completedAt:s?de():null,createdAt:de(),updatedAt:de()});s&&e.workoutType!=="cardio"&&await this.checkAndUpdateGoals(t,e);const a=e.workoutType==="cardio"?Qh.CARDIO_LOGGED:Qh.WORKOUT_CREATED;if(Vl.logAction(t,a,{workoutType:e.workoutType,exerciseCount:((u=e.exercises)==null?void 0:u.length)||0,status:s?"completed":"scheduled"}),s)try{const h=e.workoutType==="cardio"?Qo.CARDIO:Qo.WORKOUT,{exerciseSummary:p,totalSets:m}=Pf(e.exercises);await na.createFeedItem(t,h,{workoutId:o.id,name:e.name,exerciseCount:((c=e.exercises)==null?void 0:c.length)||0,duration:e.duration,activityType:e.activityType,exerciseSummary:p,totalSets:m,...e.eventId?{eventId:e.eventId}:{},...e.workoutCategory&&e.workoutCategory!=="strength"?{workoutCategory:e.workoutCategory}:{}})}catch(h){console.error("Feed error:",h)}return{id:o.id,...e,status:s?"completed":"scheduled"}},checkIfComplete(t){return!t||t.length===0?!1:t.some(e=>{var n;return(n=e.sets)==null?void 0:n.some(r=>r.actualWeight||r.actualReps)})},async completeWorkout(t,e,n){var a;const r=J(L,"workouts",t),s=(await Qe(r)).data(),o=(s==null?void 0:s.name)||"Workout";if(await Oe(r,{exercises:e,status:"completed",completedAt:de(),updatedAt:de()}),s!=null&&s.trainerRequestId)try{await gv.complete(s.trainerRequestId,t,"")}catch(l){console.error("Trainer request auto-complete error:",l)}await this.checkAndUpdateGoals(n,{exercises:e}),Vl.logAction(n,Qh.WORKOUT_COMPLETED,{exerciseCount:(e==null?void 0:e.length)||0});try{const{exerciseSummary:l,totalSets:u}=Pf(e);await na.createFeedItem(n,Qo.WORKOUT,{workoutId:t,name:o,exerciseCount:(e==null?void 0:e.length)||0,exerciseSummary:l,totalSets:u,...s!=null&&s.eventId?{eventId:s.eventId}:{},...s!=null&&s.workoutCategory&&s.workoutCategory!=="strength"?{workoutCategory:s.workoutCategory}:{}})}catch(l){console.error("Feed error:",l)}if(n&&(s!=null&&s.eventId))try{const{getEventForWorkout:l}=await Ye(async()=>{const{getEventForWorkout:c}=await Promise.resolve().then(()=>pb);return{getEventForWorkout:c}},void 0),u=l(s);if(u){u.creditReward&&await Fp.add(n,u.creditReward);const c=J(L,"users",n),p=((a=(await Qe(c)).data())==null?void 0:a.badges)||[];p.some(m=>m.id===u.id)||await Oe(c,{badges:[...p,{id:u.id,name:u.badgeName,icon:u.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(l){console.error("Event reward error:",l)}return{id:t,status:"completed"}},async complete(t,e){var o,a,l;const n=J(L,"workouts",t),i=(await Qe(n)).data(),s=i==null?void 0:i.userId;await Oe(n,{...e,status:"completed",completedAt:de(),updatedAt:de()}),s&&e.exercises&&await this.checkAndUpdateGoals(s,{exercises:e.exercises}),s&&Vl.logAction(s,Qh.WORKOUT_COMPLETED,{exerciseCount:((o=e.exercises)==null?void 0:o.length)||0});try{if(s){const{exerciseSummary:u,totalSets:c}=Pf(e.exercises);await na.createFeedItem(s,Qo.WORKOUT,{workoutId:t,name:(i==null?void 0:i.name)||"Workout",exerciseCount:((a=e.exercises)==null?void 0:a.length)||0,exerciseSummary:u,totalSets:c,...i!=null&&i.eventId?{eventId:i.eventId}:{},...i!=null&&i.workoutCategory&&i.workoutCategory!=="strength"?{workoutCategory:i.workoutCategory}:{}})}}catch(u){console.error("Feed error:",u)}if(s&&(i!=null&&i.eventId))try{const{getEventForWorkout:u}=await Ye(async()=>{const{getEventForWorkout:h}=await Promise.resolve().then(()=>pb);return{getEventForWorkout:h}},void 0),c=u(i);if(c){c.creditReward&&await Fp.add(s,c.creditReward);const h=J(L,"users",s),m=((l=(await Qe(h)).data())==null?void 0:l.badges)||[];m.some(y=>y.id===c.id)||await Oe(h,{badges:[...m,{id:c.id,name:c.badgeName,icon:c.badgeIcon,earnedAt:new Date().toISOString()}]})}}catch(u){console.error("Event reward error:",u)}if(i!=null&&i.trainerRequestId)try{await gv.complete(i.trainerRequestId,t,"")}catch(u){console.error("Trainer request auto-complete error:",u)}return{id:t,status:"completed"}},async getCardioByUser(t,e=30){const n=ve(te(L,"workouts"),ae("userId","==",t),ae("workoutType","==","cardio"),Wt(e));return(await we(n)).docs.map(s=>({id:s.id,...s.data()})).sort((s,o)=>{var u,c;const a=(u=s.date)!=null&&u.toDate?s.date.toDate():new Date(s.date);return((c=o.date)!=null&&c.toDate?o.date.toDate():new Date(o.date))-a})},async getByDate(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=ve(te(L,"workouts"),ae("userId","==",t));return(await we(r)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>{var a;return((a=s.date)!=null&&a.toDate?s.date.toDate().toISOString().split("T")[0]:s.date)===n})},async createForUser(t,e,n,r){return{id:(await Ht(te(L,"workouts"),{...e,userId:t,createdBy:n,groupId:r,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:de(),updatedAt:de()})).id,...e,userId:t,status:"scheduled"}},async createForGroup(t,e,n,r){const i=aa(L),s=[];for(const o of r){const a=J(te(L,"workouts"));i.set(a,{...e,userId:o,createdBy:n,groupId:t,workoutType:e.workoutType||"strength",status:"scheduled",isAssigned:!0,createdAt:de(),updatedAt:de()}),s.push({id:a.id,memberId:o})}return await i.commit(),s},async checkAndUpdateGoals(t,e){try{const n=ve(te(L,"goals"),ae("userId","==",t),ae("status","==","active")),r=await we(n);if(r.empty)return;const i=s=>s?s.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():"";for(const s of e.exercises||[]){const o=i(s.name);if(o)for(const a of r.docs){const l=a.data(),u=i(l.lift),c=l.metricType||"weight";if(!(o===u||o.includes(u)||u.includes(o)||u.split(" ").some(m=>m.length>3&&o.includes(m))))continue;let p=0;for(const m of s.sets||[]){let y=0;c==="weight"?y=parseFloat(m.actualWeight)||parseFloat(m.prescribedWeight)||0:c==="reps"?y=parseInt(m.actualReps)||parseInt(m.prescribedReps)||0:c==="time"&&(y=parseFloat(m.actualTime)||parseFloat(m.prescribedTime)||0),y>p&&(p=y)}if(p>0){const m=parseFloat(l.targetValue)||parseFloat(l.targetWeight)||0,y=parseFloat(l.startValue)||parseFloat(l.startWeight)||0,v=parseFloat(l.currentValue)||parseFloat(l.currentWeight)||y;if(p>v){let I=0;m>y&&(I=Math.min(100,Math.round((p-y)/(m-y)*100)));const _={currentValue:p,currentWeight:c==="weight"?p:l.currentWeight,progress:Math.max(l.progress||0,I),updatedAt:de()};if(p>=m&&m>0){_.status="completed",_.completedAt=de();try{await na.createFeedItem(t,Qo.GOAL_COMPLETED,{goalId:a.id,lift:l.lift,targetValue:m,metricType:c,unit:c==="weight"?"lbs":c==="reps"?"reps":"sec"})}catch(x){console.error("Feed error:",x)}}await Oe(J(L,"goals",a.id),_),console.log(`Goal updated: ${l.lift} - new value: ${p}`)}}}}}catch(n){console.error("Error checking goals:",n)}},async get(t){const e=await Qe(J(L,"workouts",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getByUser(t,e=50){const n=ve(te(L,"workouts"),ae("userId","==",t),Gt("date","desc"),Wt(e));return(await we(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByGroup(t,e=50){const n=ve(te(L,"workouts"),ae("groupId","==",t),Gt("date","desc"),Wt(e));return(await we(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByDateRange(t,e,n){const r=ve(te(L,"workouts"),ae("userId","==",t),ae("date",">=",e),ae("date","<=",n),Gt("date","asc"));return(await we(r)).docs.map(s=>({id:s.id,...s.data()}))},async update(t,e){const n=J(L,"workouts",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){await pn(J(L,"workouts",t));try{const e=ve(te(L,"feed"),ae("data.workoutId","==",t)),r=(await we(e)).docs.map(i=>pn(J(L,"feed",i.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async logExercise(t,e){const n=J(L,"workouts",t);await Oe(n,{exercises:Cl(e),updatedAt:de()})}},VD={generateInviteCode(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},async create(t,e){const n=this.generateInviteCode(),r=await Ht(te(L,"groups"),{...e,creatorId:t,inviteCode:n,members:[t],admins:[t],createdAt:de(),updatedAt:de()}),i=J(L,"users",t);return await Oe(i,{groups:Cl(r.id)}),{id:r.id,inviteCode:n,...e}},async get(t){const e=await Qe(J(L,"groups",t));return e.exists()?{id:e.id,...e.data()}:null},async getById(t){return this.get(t)},async getMemberDetails(t){const e=[];for(const n of t){const r=await Qe(J(L,"users",n));r.exists()?e.push({uid:n,...r.data()}):e.push({uid:n,displayName:"Unknown User"})}return e},async getByUser(t){const e=ve(te(L,"groups"),ae("members","array-contains",t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async findByInviteCode(t){const e=ve(te(L,"groups"),ae("inviteCode","==",t.toUpperCase())),n=await we(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},async joinByCode(t,e){var r;const n=await this.findByInviteCode(t);if(!n)throw new Error("Invalid invite code");if((r=n.members)!=null&&r.includes(e))throw new Error("Already a member of this group");return await this.addMember(n.id,e),n},async update(t,e){const n=J(L,"groups",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async addMember(t,e){const n=aa(L),r=J(L,"groups",t);n.update(r,{members:Cl(e),updatedAt:de()});const i=J(L,"users",e);n.update(i,{groups:Cl(t)}),await n.commit()},async removeMember(t,e){const n=aa(L),r=J(L,"groups",t);n.update(r,{members:pl(e),admins:pl(e),updatedAt:de()});const i=J(L,"users",e);n.update(i,{groups:pl(t)}),await n.commit()},async getMembers(t){const e=await this.get(t);return e?(await Promise.all(e.members.map(async r=>{const i=await Qe(J(L,"users",r));return i.exists()?{id:r,...i.data()}:null}))).filter(Boolean):[]},async delete(t){const e=await this.get(t);if(!e)return;const n=aa(L);for(const r of e.members){const i=J(L,"users",r);n.update(i,{groups:pl(t)})}n.delete(J(L,"groups",t)),await n.commit()}},m_={async create(t,e){return{id:(await Ht(te(L,"goals"),{...e,userId:t,status:"active",progress:0,createdAt:de(),updatedAt:de()})).id,...e}},async get(t){const e=await Qe(J(L,"goals",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=ve(te(L,"goals"),ae("userId","==",t),Gt("targetDate","asc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=J(L,"goals",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await pn(J(L,"goals",t)),t}},g_={async create(t,e){return{id:(await Ht(te(L,"schedules"),{...e,userId:t,createdAt:de(),updatedAt:de()})).id,...e}},async getByUser(t){const e=ve(te(L,"schedules"),ae("userId","==",t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByGroup(t){const e=ve(te(L,"schedules"),ae("groupId","==",t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=J(L,"schedules",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await pn(J(L,"schedules",t)),t}},ZK={async log(t,e,n,r=null){const i=e.toISOString().split("T")[0],s=J(L,"attendance",`${t}_${i}`);await Oe(s,{userId:t,date:i,status:n,workoutId:r,updatedAt:de()}).catch(async()=>{await Ht(te(L,"attendance"),{userId:t,date:i,status:n,workoutId:r,createdAt:de()})})},async getByUser(t,e,n){const r=ve(te(L,"attendance"),ae("userId","==",t),ae("date",">=",e.toISOString().split("T")[0]),ae("date","<=",n.toISOString().split("T")[0]));return(await we(r)).docs.map(s=>({id:s.id,...s.data()}))},async getByDateRange(t,e,n){return this.getByUser(t,e,n)},async getByGroup(t,e,n){const r=await VD.get(t);return r?(await Promise.all(r.members.map(s=>this.getByUser(s,e,n)))).flat():[]}},zo={async log(t){return{id:(await Ht(te(L,"tokenUsage"),{...t,createdAt:de()})).id,...t}},async getRecent(t=100){const e=ve(te(L,"tokenUsage"),Gt("createdAt","desc"),Wt(t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUser(t,e=50){const n=ve(te(L,"tokenUsage"),ae("userId","==",t),Gt("createdAt","desc"),Wt(e));return(await we(n)).docs.map(i=>({id:i.id,...i.data()}))},async getRecentCounts(t){const e=await this.getByUser(t,100),n=Date.now(),r=n-60*60*1e3,i=n-24*60*60*1e3;let s=0,o=0;return e.forEach(a=>{var u,c,h,p;const l=((p=(h=(c=(u=a.createdAt)==null?void 0:u.toDate)==null?void 0:c.call(u))==null?void 0:h.getTime)==null?void 0:p.call(h))||new Date(a.createdAt).getTime()||0;l>r&&s++,l>i&&o++}),{hourCount:s,dayCount:o,total:e.length}},async getSummary(){const t=await this.getRecent(500),e={totalTokens:t.reduce((l,u)=>l+(u.totalTokens||0),0),totalRequests:t.length,byFeature:{}};t.forEach(l=>{l.feature&&(e.byFeature[l.feature]||(e.byFeature[l.feature]={tokens:0,requests:0}),e.byFeature[l.feature].tokens+=l.totalTokens||0,e.byFeature[l.feature].requests+=1)});const n=[...new Set(t.map(l=>l.userId))].filter(Boolean),r=[];for(const l of n)try{const u=await Qe(J(L,"users",l));if(u.exists()){const c=u.data();r.push({id:l,displayName:c.displayName||c.email||l,email:c.email})}else r.push({id:l,displayName:l})}catch{r.push({id:l,displayName:l})}const i=Object.fromEntries(r.map(l=>[l.id,l.displayName])),s=t.map(l=>({...l,userName:i[l.userId]||l.userId})),o=[];let a=null;return s.forEach(l=>{var c,h;const u=(c=l.createdAt)!=null&&c.toDate?l.createdAt.toDate():new Date(l.createdAt);if(a&&a.feature===l.feature&&a.userId===l.userId){const p=(h=a.createdAt)!=null&&h.toDate?a.createdAt.toDate():new Date(a.createdAt);if(Math.abs(p-u)/1e3/60<=5){a.totalTokens+=l.totalTokens||0,a.promptTokens+=l.promptTokens||0,a.completionTokens+=l.completionTokens||0,a.requestCount=(a.requestCount||1)+1;return}}a&&o.push(a),a={...l,requestCount:1}}),a&&o.push(a),{records:o,summary:e,users:r}}},Cf={async create(t,e){return{id:(await Ht(te(L,"programs"),{...e,userId:t,status:"active",createdAt:de(),updatedAt:de()})).id,...e}},async get(t){const e=await Qe(J(L,"programs",t));return e.exists()?{id:e.id,...e.data()}:null},async getByUser(t){const e=ve(te(L,"programs"),ae("userId","==",t),Gt("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getActive(t){const e=ve(te(L,"programs"),ae("userId","==",t),ae("status","==","active"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=J(L,"programs",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await pn(J(L,"programs",t)),t},getProgramDay(t,e){var u,c;if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return null;const n=(u=t.startDate)!=null&&u.toDate?t.startDate.toDate():new Date(t.startDate),r=new Date(e),i=Math.floor((r-n)/(1e3*60*60*24));if(i<0)return null;const s=Math.floor(i/7);if(s>=t.weeks.length)return null;const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][r.getDay()];if(!t.trainingDays.includes(o))return null;const a=t.weeks[s],l=(c=a==null?void 0:a.days)==null?void 0:c.find(h=>h.dayOfWeek===o);return l?{...l,weekNumber:a.weekNumber,phase:a.phase,programId:t.id,programName:t.name}:null},getProgramDaysInRange(t,e,n){if(!(t!=null&&t.weeks)||!(t!=null&&t.startDate)||!(t!=null&&t.trainingDays))return[];const r=[],i=new Date(e),s=new Date(n);for(;i<=s;){const o=this.getProgramDay(t,i);o&&r.push({...o,date:new Date(i),dateStr:i.toISOString().split("T")[0]}),i.setDate(i.getDate()+1)}return r}},y_={"ask-assistant":1,"generate-workout":5,"generate-group-workout":5,"generate-program":10,"form-check":15,"trainer-custom-workout":100,"trainer-review":50},eQ=100,Fp={async getBalance(t){const e=J(L,"users",t),n=await Qe(e);return n.exists()?n.data().credits??0:0},async deduct(t,e,n=1){const r=(y_[e]||1)*n,i=await this.getBalance(t);if(i<r)return{success:!1,balance:i,cost:r,error:"insufficient_credits"};const s=J(L,"users",t);return await Oe(s,{credits:di(-r)}),{success:!0,balance:i-r,cost:r}},async deductAmount(t,e){const n=await this.getBalance(t);if(n<e)return{success:!1,balance:n,cost:e,error:"insufficient_credits"};const r=J(L,"users",t);return await Oe(r,{credits:di(-e)}),{success:!0,balance:n-e,cost:e}},async add(t,e){const n=J(L,"users",t);return await Oe(n,{credits:di(e)}),{success:!0}},async gift(t,e,n){if(n<=0)return{success:!1,error:"Amount must be positive"};const r=await this.getBalance(t);if(r<n)return{success:!1,balance:r,amount:n,error:"insufficient_credits"};const i=J(L,"users",t),s=J(L,"users",e);return await Oe(i,{credits:di(-n)}),await Oe(s,{credits:di(n)}),{success:!0,balance:r-n}},async ensureCredits(t){const e=J(L,"users",t),n=await Qe(e);return n.exists()&&n.data().credits===void 0?(await Oe(e,{credits:50}),50):n.exists()?n.data().credits??0:0}},OD={async create(t,e){return{id:(await Ht(te(L,"health"),{...e,userId:t,createdAt:de(),updatedAt:de()})).id,...e,userId:t}},async update(t,e){const n=J(L,"health",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async getByUser(t,e=30){const n=ve(te(L,"health"),ae("userId","==",t),Wt(e));return(await we(n)).docs.map(s=>({id:s.id,...s.data()})).sort((s,o)=>(o.date||"").localeCompare(s.date||""))},async getByDateRange(t,e,n){const r=ve(te(L,"health"),ae("userId","==",t));return(await we(r)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.date>=e&&o.date<=n).sort((o,a)=>(a.date||"").localeCompare(o.date||""))},async delete(t){await pn(J(L,"health",t))}},zc={async create(t,e,n,r,i=[]){return{id:(await Ht(te(L,"groupWorkouts"),{...r,groupId:t,groupAdmins:e,groupMembers:i.length>0?i:e,assignedTo:n,status:"scheduled",createdAt:de(),updatedAt:de()})).id,...r,groupId:t,assignedTo:n,status:"scheduled"}},async getByGroup(t,e){const n=ve(te(L,"groupWorkouts"),ae("groupId","==",t),Gt("date","desc"));return(await we(n)).docs.map(i=>({id:i.id,...i.data()}))},async getByUser(t){const e=ve(te(L,"groupWorkouts"),ae("assignedTo","==",t),Gt("date","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getByUserAndDateRange(t,e,n){const r=ve(te(L,"groupWorkouts"),ae("assignedTo","==",t),ae("date",">=",e),ae("date","<=",n));return(await we(r)).docs.map(s=>({id:s.id,...s.data()}))},async get(t){const e=await Qe(J(L,"groupWorkouts",t));return e.exists()?{id:e.id,...e.data()}:null},async update(t,e){const n=J(L,"groupWorkouts",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async complete(t,e,n=null,r=null){var a,l;const i=J(L,"groupWorkouts",t),s={...e,status:"completed",completedAt:de(),updatedAt:de()};n&&r&&n!==r?(s.completedBy=n,s.reviewStatus="pending"):s.reviewStatus="self",await Oe(i,s);const o=r||n;if(o&&e.exercises)try{await Pa.checkAndUpdateGoals(o,{exercises:e.exercises})}catch(u){console.error("Goal check error:",u)}if(o)try{const c=(await Qe(i)).data();let h="";c!=null&&c.groupId&&(h=((a=(await Qe(J(L,"groups",c.groupId))).data())==null?void 0:a.name)||"");const{exerciseSummary:p,totalSets:m}=Pf(e==null?void 0:e.exercises);await na.createFeedItem(o,Qo.GROUP_WORKOUT,{workoutId:t,name:(c==null?void 0:c.name)||(e==null?void 0:e.name)||"Group Workout",groupName:h,groupId:c==null?void 0:c.groupId,exerciseCount:((l=e==null?void 0:e.exercises)==null?void 0:l.length)||0,exerciseSummary:p,totalSets:m})}catch(u){console.error("Feed error:",u)}return{id:t,status:"completed",...s}},async approveReview(t){const e=J(L,"groupWorkouts",t);return await Oe(e,{reviewStatus:"approved",reviewedAt:de(),updatedAt:de()}),{id:t,reviewStatus:"approved"}},async getPendingReviews(t){const e=ve(te(L,"groupWorkouts"),ae("assignedTo","==",t),ae("reviewStatus","==","pending"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async delete(t){await pn(J(L,"groupWorkouts",t));try{const e=ve(te(L,"feed"),ae("data.workoutId","==",t)),r=(await we(e)).docs.map(i=>pn(J(L,"feed",i.id)));await Promise.all(r)}catch(e){console.error("Feed cleanup error:",e)}return t},async createBatch(t,e,n,r,i=[]){const s=aa(L),o=[],a=i.length>0?i:e;for(const{assignedTo:l,name:u,exercises:c}of r){const h=J(te(L,"groupWorkouts")),p={groupId:t,groupAdmins:e,groupMembers:a,assignedTo:l,userId:l,name:u,date:n,exercises:c,status:"scheduled",createdAt:de(),updatedAt:de()};s.set(h,p),o.push({id:h.id,...p})}return await s.commit(),o}},jD={async create(t,e){return{id:(await Ht(te(L,"recurringActivities"),{...e,userId:t,active:!0,createdAt:de(),updatedAt:de()})).id,...e,userId:t,active:!0}},async getByUser(t){const e=ve(te(L,"recurringActivities"),ae("userId","==",t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async update(t,e){const n=J(L,"recurringActivities",t);return await Oe(n,{...e,updatedAt:de()}),{id:t,...e}},async delete(t){return await pn(J(L,"recurringActivities",t)),t},async logSkip(t,e,n){const r=typeof e=="string"?e:e.toISOString().split("T")[0],i=J(L,"activitySkips",`${t}_${r}`);return await Sp(i,{activityId:t,userId:n,date:r,createdAt:de()}),{activityId:t,date:r,skipped:!0}},async getSkips(t,e,n){const r=ve(te(L,"activitySkips"),ae("userId","==",t));return(await we(r)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.date>=e&&s.date<=n)},async removeSkip(t,e){const n=typeof e=="string"?e:e.toISOString().split("T")[0],r=J(L,"activitySkips",`${t}_${n}`);return await pn(r),{activityId:t,date:n,skipped:!1}}},tQ="charltonuw@gmail.com",MD={async apply(t,e){return{id:(await Ht(te(L,"trainerApplications"),{userId:t,...e,status:"pending",createdAt:de()})).id}},async getApplication(t){const e=ve(te(L,"trainerApplications"),ae("userId","==",t)),n=await we(e);if(n.empty)return null;const r=n.docs.map(i=>({id:i.id,...i.data()}));return r.sort((i,s)=>{var o,a,l,u;return(((a=(o=s.createdAt)==null?void 0:o.toDate)==null?void 0:a.call(o))||0)-(((u=(l=i.createdAt)==null?void 0:l.toDate)==null?void 0:u.call(l))||0)}),r[0]},async getPendingApplications(){const t=ve(te(L,"trainerApplications"),ae("status","==","pending"));return(await we(t)).docs.map(n=>({id:n.id,...n.data()}))},async reviewApplication(t,e){const n=J(L,"trainerApplications",t),r=await Qe(n);if(!r.exists())throw new Error("Application not found");const i=r.data();if(await Oe(n,{status:e,reviewedAt:de()}),e==="approved"){const s=J(L,"users",i.userId);await Oe(s,{isTrainer:!0})}return{success:!0}},isTrainer(t,e){return e===tQ?!0:(t==null?void 0:t.isTrainer)===!0}},gv={async create(t,e){return{id:(await Ht(te(L,"trainerRequests"),{userId:t,...e,status:"pending",createdAt:de(),updatedAt:de()})).id}},async getByUser(t){const e=ve(te(L,"trainerRequests"),ae("userId","==",t));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getPending(){const t=ve(te(L,"trainerRequests"),ae("status","in",["pending","in_progress"]));return(await we(t)).docs.map(n=>({id:n.id,...n.data()}))},async getAll(){const t=ve(te(L,"trainerRequests"));return(await we(t)).docs.map(n=>({id:n.id,...n.data()}))},async deny(t,e){const n=J(L,"trainerRequests",t);await Oe(n,{status:"denied",denyReason:e||"",updatedAt:de()})},async delete(t){await pn(J(L,"trainerRequests",t))},async claim(t,e){const n=J(L,"trainerRequests",t);await Oe(n,{status:"in_progress",trainerId:e,claimedAt:de(),updatedAt:de()})},async linkWorkout(t,e){const n=J(L,"trainerRequests",t);await Oe(n,{workoutId:e,updatedAt:de()})},async complete(t,e,n){const r=J(L,"trainerRequests",t);await Oe(r,{status:"completed",workoutId:e,trainerNotes:n||"",completedAt:de(),updatedAt:de()})},async cancel(t){const e=J(L,"trainerRequests",t);await Oe(e,{status:"cancelled",updatedAt:de()})},async get(t){const e=J(L,"trainerRequests",t),n=await Qe(e);return n.exists()?{id:n.id,...n.data()}:null},async getUserSummary(t){const[e,n,r]=await Promise.all([Qe(J(L,"users",t)),we(ve(te(L,"workouts"),ae("userId","==",t),Wt(30))),we(ve(te(L,"goals"),ae("userId","==",t)))]),i=e.exists()?e.data():{},s=r.docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.status==="completed").sort((c,h)=>{var y,v,I,_;const p=((v=(y=c.date)==null?void 0:y.toDate)==null?void 0:v.call(y))||new Date(c.date||0);return(((_=(I=h.date)==null?void 0:I.toDate)==null?void 0:_.call(I))||new Date(h.date||0))-p}),o=n.docs.map(c=>({id:c.id,...c.data()})),a={},l={},u=new Date;return s.slice(0,20).forEach(c=>{var m;const h=(m=c.date)!=null&&m.toDate?c.date.toDate():c.date?new Date(c.date):null,p=h&&!isNaN(h.getTime())?Math.floor((u-h)/(1e3*60*60*24)):null;(c.exercises||[]).forEach(y=>{y.name&&(y.sets||[]).forEach(v=>{const I=parseFloat(v.actualWeight)||parseFloat(v.prescribedWeight)||0,_=parseInt(v.actualReps)||parseInt(v.prescribedReps)||0,x=parseInt(v.painLevel)||0;if(I>0&&_>0&&_<=12){const E=Math.round(I*(1+_/30));(!a[y.name]||E>a[y.name].e1rm)&&(a[y.name]={weight:I,reps:_,e1rm:E})}x>0&&(l[y.name]||(l[y.name]={maxPain:0,count:0,lastDaysAgo:null,recentCount:0}),l[y.name].count++,l[y.name].maxPain=Math.max(l[y.name].maxPain,x),p!==null&&((l[y.name].lastDaysAgo===null||p<l[y.name].lastDaysAgo)&&(l[y.name].lastDaysAgo=p),p<=30&&l[y.name].recentCount++))})})}),{profile:{displayName:i.displayName,weight:i.weight,height:i.height,age:i.age,activityLevel:i.activityLevel},recentWorkouts:s.slice(0,5).map(c=>{var h,p,m,y,v;return{name:c.name,date:((v=(y=(m=(p=(h=c.date)==null?void 0:h.toDate)==null?void 0:p.call(h))==null?void 0:m.toISOString)==null?void 0:y.call(m))==null?void 0:v.split("T")[0])||c.date,exercises:(c.exercises||[]).map(I=>({name:I.name,type:I.type||"weight",sets:(I.sets||[]).map(_=>({prescribedWeight:_.prescribedWeight,prescribedReps:_.prescribedReps,actualWeight:_.actualWeight,actualReps:_.actualReps,rpe:_.rpe,painLevel:_.painLevel}))}))}}),maxLifts:a,painHistory:l,goals:o.filter(c=>c.status==="active").map(c=>({lift:c.lift,metricType:c.metricType,currentWeight:c.currentWeight||c.currentValue,targetWeight:c.targetWeight||c.targetValue}))}}},LD={async share(t,e,n,r,i="",s=""){return{id:(await Ht(te(L,"sharedWorkouts"),{fromUserId:t,toUserId:n,fromUserName:e,toUserName:s,workout:{name:r.name,exercises:(r.exercises||[]).map(a=>({name:a.name,type:a.type||"weight",sets:(a.sets||[]).map(l=>({prescribedWeight:l.prescribedWeight||l.actualWeight||null,prescribedReps:l.prescribedReps||l.actualReps||null,prescribedTime:l.prescribedTime||l.actualTime||null}))})),workoutType:r.workoutType||"strength"},message:i,status:"pending",createdAt:de()})).id}},async getSharedWithMe(t){const e=ve(te(L,"sharedWorkouts"),ae("toUserId","==",t),Gt("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getPendingSharedCount(t){const e=ve(te(L,"sharedWorkouts"),ae("toUserId","==",t),ae("status","==","pending"));return(await we(e)).size},async getSharedByMe(t){const e=ve(te(L,"sharedWorkouts"),ae("fromUserId","==",t),Gt("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async revoke(t){await pn(J(L,"sharedWorkouts",t))},async saveAsWorkout(t,e,n=null){const r=await Qe(J(L,"sharedWorkouts",t));if(!r.exists())throw new Error("Shared workout not found");const i=r.data(),s=await Pa.create(e,{name:i.workout.name,exercises:n||i.workout.exercises,date:new Date,workoutType:i.workout.workoutType||"strength"});return await Oe(J(L,"sharedWorkouts",t),{status:"saved"}),s},async dismiss(t){await Oe(J(L,"sharedWorkouts",t),{status:"dismissed"})}},EJ=Object.freeze(Object.defineProperty({__proto__:null,CREDIT_COSTS:y_,PREMIUM_CREDIT_COST:eQ,attendanceService:ZK,creditService:Fp,goalService:m_,groupService:VD,groupWorkoutService:zc,healthService:OD,programService:Cf,recurringActivityService:jD,scheduleService:g_,sharedWorkoutService:LD,tokenUsageService:zo,trainerRequestService:gv,trainerService:MD,userService:DD,workoutService:Pa},Symbol.toStringTag,{value:"Module"}));async function Yo(){const e=jP().currentUser;if(!e)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${await e.getIdToken()}`}}class nQ{constructor(){this.baseUrl=fN}async generateWorkout(e){try{const n=await Yo(),r=await fetch(`${this.baseUrl}/generate-workout`,{method:"POST",headers:n,body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to generate workout");const i=await r.json();return i.usage&&zo.log(i.usage).catch(console.error),i}catch(n){throw console.error("Generate workout error:",n),n}}async askAssistant(e,n={},r=null){try{const i=await Yo(),s={message:e,context:n};r&&(s.mode=r);const o=await fetch(`${this.baseUrl}/ask-assistant`,{method:"POST",headers:i,body:JSON.stringify(s)});if(!o.ok)throw new Error("Failed to get response");const a=await o.json();return a.usage&&zo.log(a.usage).catch(console.error),a}catch(i){throw console.error("Ask assistant error:",i),i}}async autofillWorkout(e,n){try{const r=await Yo(),i=await fetch(`${this.baseUrl}/autofill-workout`,{method:"POST",headers:r,body:JSON.stringify({workoutId:e,partialData:n})});if(!i.ok)throw new Error("Failed to autofill workout");const s=await i.json();return s.usage&&zo.log(s.usage).catch(console.error),s}catch(r){throw console.error("Autofill workout error:",r),r}}async analyzeProgress(e,n,r){try{const i=await Yo(),s=await fetch(`${this.baseUrl}/analyze-progress`,{method:"POST",headers:i,body:JSON.stringify({liftType:n,timeRange:r})});if(!s.ok)throw new Error("Failed to analyze progress");const o=await s.json();return o.usage&&zo.log(o.usage).catch(console.error),o}catch(i){throw console.error("Analyze progress error:",i),i}}async askAssistantStream(e,n={},r,i,s){try{const o=await Yo(),a=await fetch(`${this.baseUrl}/ask-assistant-stream`,{method:"POST",headers:o,body:JSON.stringify({message:e,context:n})});if(!a.ok){const h=await a.json().catch(()=>({}));throw new Error(h.error||`Stream failed (${a.status})`)}const l=a.body.getReader(),u=new TextDecoder;let c="";for(;;){const{done:h,value:p}=await l.read();if(h)break;c+=u.decode(p,{stream:!0});const m=c.split(`

`);c=m.pop();for(const y of m)if(y.startsWith("data: "))try{const v=JSON.parse(y.slice(6));v.error?s(v.error):v.done?(v.usage&&zo.log(v.usage).catch(console.error),i(v)):v.delta&&r(v.delta)}catch{}}}catch(o){console.error("Stream error:",o),s(o.message||"Stream failed")}}async getTokenUsage(){return zo.getSummary()}}const Rf=new nQ,TJ=()=>Rf.getTokenUsage();function rQ(){const[t,e]=k.useState(0);return k.useEffect(()=>{if(W0){let n,r;return Ye(async()=>{const{Keyboard:i}=await import("./index-B6-l_63q.js");return{Keyboard:i}},[]).then(({Keyboard:i})=>{n=i.addListener("keyboardWillShow",s=>{e(s.keyboardHeight)}),r=i.addListener("keyboardWillHide",()=>{e(0)})}).catch(()=>{}),()=>{n==null||n.then(i=>i.remove()),r==null||r.then(i=>i.remove())}}else{const n=window.visualViewport;if(!n)return;const r=()=>{const i=window.innerHeight-n.height;e(i>100?i:0)};return n.addEventListener("resize",r),()=>n.removeEventListener("resize",r)}},[]),t}const iQ={async getStatus(t){const e=J(L,"users",t,"integrations","oura"),n=await Qe(e);if(!n.exists())return{connected:!1};const r=n.data();return{connected:r.status==="connected",status:r.status,connectedAt:r.connectedAt,lastSynced:r.lastSynced,data:r.data||null}},async connect(){const t=await Yo(),e=await fetch(r1("oura-auth"),{method:"POST",headers:t});if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.error||"Failed to initiate Oura connection")}const{authUrl:n}=await e.json();return n},async sync(){const t=await Yo(),e=await fetch(r1("oura-sync"),{method:"POST",headers:t});if(!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||"Failed to sync Oura data")}return e.json()},async disconnect(t){const e=J(L,"users",t,"integrations","oura");await pn(e)},async getLatestScores(t){const e=await this.getStatus(t);if(!e.connected||!e.data)return null;const{sleep:n,readiness:r,activity:i}=e.data,s=n!=null&&n.length?n[n.length-1]:null,o=r!=null&&r.length?r[r.length-1]:null,a=i!=null&&i.length?i[i.length-1]:null,l=n!=null&&n.length?Math.round(n.reduce((c,h)=>c+(h.score||0),0)/n.length):null,u=r!=null&&r.length?Math.round(r.reduce((c,h)=>c+(h.score||0),0)/r.length):null;return{latest:{sleep:s,readiness:o,activity:a},averages:{sleepScore:l,readinessScore:u}}}};function sQ(){const t=go(),{chatOpen:e,setChatOpen:n}=Y2(),{user:r,userProfile:i,updateProfile:s,isAppAdmin:o}=ti(),[a,l]=k.useState([]),[u,c]=k.useState(""),[h,p]=k.useState(!1),[m,y]=k.useState(null),[v,I]=k.useState(null),[_,x]=k.useState(!1),[E,V]=k.useState(!1),[M,O]=k.useState([]),[S,T]=k.useState(!1),A=k.useRef(null),[b,R]=k.useState(null),[D,C]=k.useState(()=>{const H=Date.now(),Se=60*60*1e3,ke=24*60*60*1e3;try{const Ke=localStorage.getItem("ai_rate_limit"),Ve=localStorage.getItem("ai_daily_limit");let F=Ke?JSON.parse(Ke):{count:0,resetTime:H+Se},q=Ve?JSON.parse(Ve):{count:0,resetTime:H+ke};return H>F.resetTime&&(F={count:0,resetTime:H+Se}),H>q.resetTime&&(q={count:0,resetTime:H+ke}),{...F,dailyCount:q.count,dailyResetTime:q.resetTime}}catch{return{count:0,resetTime:null}}}),Y=rQ(),[ye,De]=k.useState(!0),[Ie,X]=k.useState(!1),ce=k.useRef(null),N=k.useRef(null),ue=k.useRef(null),Te=60*60*1e3,j=24*60*60*1e3,ot=(b==null?void 0:b.rateLimitHourly)||8,mt=(b==null?void 0:b.rateLimitDaily)||25,Fe=(b==null?void 0:b.overageCreditMultiplier)||3,Ze=()=>{var H;(H=ce.current)==null||H.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{ye?Ze():a.length>0&&X(!0)},[a]),k.useEffect(()=>{const H=N.current;if(!H)return;const Se=()=>{const{scrollTop:ke,scrollHeight:Ke,clientHeight:Ve}=H,F=Ke-ke-Ve<50;De(F),F&&X(!1)};return H.addEventListener("scroll",Se,{passive:!0}),()=>H.removeEventListener("scroll",Se)},[e]),k.useEffect(()=>{Y>0&&setTimeout(Ze,100)},[Y]),k.useEffect(()=>{var H;e&&((H=ue.current)==null||H.focus(),!v&&!_&&Kt(),b||Rn())},[e]);const Rn=async()=>{try{const H=await Qe(J(L,"settings","ai"));H.exists()&&R(H.data())}catch{}};k.useEffect(()=>{v&&!S&&e&&rn()},[v,S,e]),k.useEffect(()=>{const H=(i==null?void 0:i.chatPersonality)||"coach";A.current&&A.current!==H&&S&&(T(!1),l([]),O([])),A.current=H},[i==null?void 0:i.chatPersonality]);const Kt=async()=>{if(r){x(!0);try{const[H,Se,ke,Ke]=await Promise.all([m_.getByUser(r.uid).catch(()=>[]),OD.getByUser(r.uid,14).catch(()=>[]),g_.getByUser(r.uid).catch(()=>[]),jD.getByUser(r.uid).catch(()=>[])]);let Ve=[];try{(await we(ve(te(L,"workouts"),ae("userId","==",r.uid),Wt(50)))).docs.forEach(Ue=>{var G,_e;const z=Ue.data();if(z.status!=="completed")return;const he=((_e=(G=z.date)==null?void 0:G.toDate)==null?void 0:_e.call(G))||new Date(z.date);Ve.push({...z,date:he.toISOString().split("T")[0]})})}catch(ie){console.error(ie)}try{(await we(ve(te(L,"groupWorkouts"),ae("assignedTo","==",r.uid),Wt(30)))).docs.forEach(Ue=>{var G,_e;const z=Ue.data();if(z.status!=="completed")return;const he=((_e=(G=z.date)==null?void 0:G.toDate)==null?void 0:_e.call(G))||new Date(z.date);Ve.push({...z,date:he.toISOString().split("T")[0],isGroup:!0})})}catch(ie){console.error(ie)}Ve.sort((ie,Ue)=>new Date(Ue.date||0)-new Date(ie.date||0));const F=Ve.filter(ie=>ie.workoutType==="cardio").slice(0,10),q=Ve.filter(ie=>ie.workoutType!=="cardio"),ne={},pe={},xe={},ft=new Date;q.slice(0,25).forEach(ie=>{var he;const Ue=(he=ie.date)!=null&&he.toDate?ie.date.toDate():ie.date?new Date(ie.date):null,z=Ue&&!isNaN(Ue.getTime())?Math.floor((ft-Ue)/(1e3*60*60*24)):null;(ie.exercises||[]).forEach(G=>{G.name&&(G.sets||[]).forEach(_e=>{const Je=parseFloat(_e.actualWeight)||parseFloat(_e.prescribedWeight)||0,tt=parseInt(_e.actualReps)||parseInt(_e.prescribedReps)||0,Vt=parseInt(_e.rpe)||0,Ot=parseInt(_e.painLevel)||0;if(!(!_e.actualWeight&&!_e.actualReps&&_e.prescribedWeight)){if(Je>0&&tt>0&&tt<=12){const Yt=Math.round(Je*(1+tt/30));(!ne[G.name]||Yt>ne[G.name].e1rm)&&(ne[G.name]={weight:Je,reps:tt,e1rm:Yt})}Ot>0&&(pe[G.name]||(pe[G.name]={count:0,maxPain:0,lastDaysAgo:null,recentCount:0}),pe[G.name].count++,pe[G.name].maxPain=Math.max(pe[G.name].maxPain,Ot),z!==null&&((pe[G.name].lastDaysAgo===null||z<pe[G.name].lastDaysAgo)&&(pe[G.name].lastDaysAgo=z),z<=30&&pe[G.name].recentCount++)),Vt>0&&(xe[G.name]||(xe[G.name]={total:0,count:0}),xe[G.name].total+=Vt,xe[G.name].count++)}})})});const cn={};Object.entries(xe).forEach(([ie,Ue])=>{cn[ie]=Math.round(Ue.total/Ue.count*10)/10});const gt={};if(Se.length>0){const ie=Se.filter(G=>G.sleep).slice(0,7);ie.length&&(gt.avgSleep=Math.round(ie.reduce((G,_e)=>G+_e.sleep,0)/ie.length*10)/10);const Ue=Se.filter(G=>G.protein).slice(0,7);Ue.length&&(gt.avgProtein=Math.round(Ue.reduce((G,_e)=>G+_e.protein,0)/Ue.length));const z=Se.filter(G=>G.calories).slice(0,7);z.length&&(gt.avgCalories=Math.round(z.reduce((G,_e)=>G+_e.calories,0)/z.length));const he=Se.filter(G=>G.weight).slice(0,3);he.length&&(gt.recentWeight=he[0].weight)}const yn={};i&&(i.weight&&(yn.weight=i.weight),i.height&&(yn.height=i.height),i.age&&(yn.age=i.age),i.activityLevel&&(yn.activityLevel=i.activityLevel),i.displayName&&(yn.displayName=i.displayName)),gt.recentWeight&&(yn.weight=gt.recentWeight);const yt=q.slice(0,3).map(ie=>({name:ie.name,date:ie.date,isGroup:ie.isGroup||!1,groupName:ie.groupName,userNotes:ie.userNotes||"",exercises:(ie.exercises||[]).map(Ue=>({name:Ue.name,type:Ue.type||"weight",userNotes:Ue.userNotes||"",sets:(Ue.sets||[]).map(z=>({prescribedWeight:z.prescribedWeight||"",prescribedReps:z.prescribedReps||"",actualWeight:z.actualWeight||"",actualReps:z.actualReps||"",prescribedTime:z.prescribedTime||"",actualTime:z.actualTime||"",rpe:z.rpe||"",painLevel:parseInt(z.painLevel)||0}))}))})),sn=q.slice(3,8).map(ie=>{var Ue,z;return{name:ie.name,date:ie.date,exerciseCount:((Ue=ie.exercises)==null?void 0:Ue.length)||0,exercises:(z=ie.exercises)==null?void 0:z.slice(0,4).map(he=>{var G;return{name:he.name,sets:((G=he.sets)==null?void 0:G.length)||0}})}}),[yr,dn,oi]=await Promise.allSettled([we(ve(te(L,"formCheckJobs"),ae("userId","==",r.uid),ae("status","==","complete"),Gt("createdAt","desc"),Wt(5))).catch(()=>we(ve(te(L,"formCheckJobs"),ae("userId","==",r.uid),ae("status","==","complete"),Wt(5)))).then(ie=>{const Ue=[];return ie.forEach(z=>{var G,_e,Je,tt,Vt;const he=z.data();he.analysis&&Ue.push({exercise:he.analysis.exercise||"Unknown",score:he.analysis.overallScore||0,summary:he.analysis.overallSummary||"",focusCue:((G=he.analysis.focusDrill)==null?void 0:G.cue)||"",injuryRisks:(he.analysis.injuryRisks||[]).filter(Ot=>Ot.severity!=="low").map(Ot=>({area:Ot.area,severity:Ot.severity})),date:((Vt=(tt=(Je=(_e=he.createdAt)==null?void 0:_e.toDate)==null?void 0:Je.call(_e))==null?void 0:tt.toISOString)==null?void 0:Vt.call(tt).split("T")[0])||""})}),Ue.sort((z,he)=>(he.date||"").localeCompare(z.date||"")),Ue}),iQ.getLatestScores(r.uid),Qe(J(L,"users",r.uid)).then(ie=>ie.exists()?ie.data():{})]),Ua=yr.status==="fulfilled"?yr.value:[],Pi=dn.status==="fulfilled"?dn.value:null,ls=oi.status==="fulfilled"?oi.value:{},us=ls.adminNotes||"",Kn=ls.aiContextOverrides;Kn&&(Kn.maxLifts&&Object.entries(Kn.maxLifts).forEach(([ie,Ue])=>{ne[ie]={...ne[ie]||{},...Ue}}),Kn.excludeExercises&&Kn.excludeExercises.forEach(ie=>{const Ue=ie.toLowerCase();Object.keys(ne).forEach(z=>{const he=z.toLowerCase();(Ue===he||he.includes(Ue)||Ue.includes(he))&&delete ne[z]})}));const ko={profile:yn,recentWorkoutsFull:yt,recentWorkouts:sn,cardioWorkouts:F.slice(0,5).map(ie=>({name:ie.name,date:ie.date,duration:ie.duration,cardioType:ie.cardioType,distance:ie.distance})),goals:H.filter(ie=>ie.status==="active").map(ie=>({lift:ie.lift,metricType:ie.metricType,currentWeight:ie.currentWeight||ie.currentValue,targetWeight:ie.targetWeight||ie.targetValue,targetDate:ie.targetDate})),maxLifts:ne,painHistory:pe,rpeAverages:cn,health:gt,schedules:ke.filter(ie=>ie.active!==!1).map(ie=>({name:ie.name,days:ie.days,duration:ie.duration})),recurringActivities:Ke.filter(ie=>ie.active).map(ie=>({name:ie.name,type:ie.type,days:ie.days})),ouraData:Pi,formChecks:Ua,adminNotes:us};I(ko)}catch(H){console.error("Error loading user context:",H),I({recentWorkouts:[],goals:[]})}finally{x(!1)}}},rn=async()=>{var Se;if(!v||!r)return;const H=(i==null?void 0:i.credits)??0;if(!o&&H<y_["ask-assistant"]){l([{role:"assistant",content:"Hey! I'm your training coach. You're low on credits right now, but feel free to ask when you get more."}]),O(["What should I do today?","How's my progress?","Generate a workout","Review my last session"]),T(!0);return}V(!0);try{ni();const ke=await Rf.askAssistant(null,{...v,personality:(i==null?void 0:i.chatPersonality)||"coach"},"greeting");l([{role:"assistant",content:ke.greeting||"Hey! Ready to train? I've got your full history  ask me anything."}]),(Se=ke.quickActions)!=null&&Se.length?O(ke.quickActions):O(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}catch(ke){console.error("Greeting fetch error:",ke),l([{role:"assistant",content:"Hey! I'm your training coach  I've got your full workout history loaded. Ask me anything about your lifts, pain, goals, or say 'generate a workout'."}]),O(["What should I do today?","How's my progress?","Generate a workout","Review my last session"])}finally{V(!1),T(!0)}},Qt=()=>{const H=Date.now();try{const Se=i==null?void 0:i.rateLimitResetAt;if(Se){const q=new Date(Se).getTime(),ne=localStorage.getItem("ai_rate_limit_checked");if(!ne||q>parseInt(ne))return localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit"),localStorage.setItem("ai_rate_limit_checked",String(H)),C({count:0,resetTime:H+Te,dailyCount:0,dailyResetTime:H+j}),null}const ke=localStorage.getItem("ai_rate_limit");let Ke=ke?JSON.parse(ke):{count:0,resetTime:H+Te};H>Ke.resetTime&&(Ke={count:0,resetTime:H+Te});const Ve=localStorage.getItem("ai_daily_limit");let F=Ve?JSON.parse(Ve):{count:0,resetTime:H+j};return H>F.resetTime&&(F={count:0,resetTime:H+j}),C({...Ke,dailyCount:F.count,dailyResetTime:F.resetTime}),F.count>=mt||Ke.count>=ot?"overage":null}catch{return null}},Hn=()=>{const H=Date.now();try{const Se=localStorage.getItem("ai_rate_limit");let ke=Se?JSON.parse(Se):{count:0,resetTime:H+Te};H>ke.resetTime&&(ke={count:0,resetTime:H+Te});const Ke=localStorage.getItem("ai_daily_limit");let Ve=Ke?JSON.parse(Ke):{count:0,resetTime:H+j};return H>Ve.resetTime&&(Ve={count:0,resetTime:H+j}),Ve.count>=mt||ke.count>=ot?Fe:1}catch{return 1}},ni=()=>{const H=Date.now();try{const Se=localStorage.getItem("ai_rate_limit");let ke=Se?JSON.parse(Se):{count:0,resetTime:H+Te};H>ke.resetTime?ke={count:1,resetTime:H+Te}:ke.count+=1,localStorage.setItem("ai_rate_limit",JSON.stringify(ke));const Ke=localStorage.getItem("ai_daily_limit");let Ve=Ke?JSON.parse(Ke):{count:0,resetTime:H+j};H>Ve.resetTime?Ve={count:1,resetTime:H+j}:Ve.count+=1,localStorage.setItem("ai_daily_limit",JSON.stringify(Ve)),C({...ke,dailyCount:Ve.count,dailyResetTime:Ve.resetTime})}catch{localStorage.removeItem("ai_rate_limit"),localStorage.removeItem("ai_daily_limit")}},ri=async H=>{if(!H.trim()||h)return;const Se=o,ke=(i==null?void 0:i.credits)??0,Ke=Hn(),Ve=Ke>1;if(!Se&&ke<Ke){const q=Ve?`You've hit the rate limit and overage messages cost ${Fe} credits each. You only have ${ke}. Resets soon.`:"You're out of AI credits. More credits coming soon  check Settings for your usage.";l(ne=>[...ne,{role:"user",content:H},{role:"assistant",content:q}]);return}Qt(),l(q=>[...q,{role:"user",content:H}]),p(!0),ni(),r!=null&&r.uid&&!Se&&s({credits:ke-Ke});const F={userId:r==null?void 0:r.uid,personality:(i==null?void 0:i.chatPersonality)||"coach",...v||{}};try{l(ne=>[...ne,{role:"assistant",content:"",streaming:!0}]);let q=!1;if(await Rf.askAssistantStream(H,F,ne=>{l(pe=>{const xe=[...pe],ft=xe[xe.length-1];return xe[xe.length-1]={...ft,content:ft.content+ne},xe})},ne=>{l(pe=>{const xe=[...pe],ft=xe[xe.length-1],cn=ft.content.replace(/```workout[\s\S]*?```/g,"").trim();return xe[xe.length-1]={...ft,content:cn,workout:ne.workout,streaming:!1},xe}),p(!1)},ne=>{console.warn("Stream failed, falling back:",ne),q=!0}),q){l(pe=>pe.filter(xe=>!(xe.role==="assistant"&&xe.streaming)));const ne=await Rf.askAssistant(H,F);l(pe=>[...pe,{role:"assistant",content:ne.message,workout:ne.workout}]),p(!1)}}catch{r!=null&&r.uid&&!Se&&s({credits:ke}),l(ne=>{var xe;const pe=ne.filter(ft=>!(ft.role==="assistant"&&ft.streaming&&!ft.content));return[...pe,...(xe=pe[pe.length-1])!=null&&xe.streaming?[]:[{role:"assistant",content:"Sorry, I couldn't process that. Please try again."}]]}),p(!1)}},gr=H=>{c(H.target.value);const Se=H.target;Se.style.height="auto",Se.style.height=Math.min(Se.scrollHeight,120)+"px"},Ai=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),ii(H))},ii=async H=>{if(H.preventDefault(),!u.trim()||h)return;const Se=u.trim();c(""),ue.current&&(ue.current.style.height="auto"),await ri(Se)},bo=async H=>{await ri(H)},si=async(H,Se)=>{if(!(!r||!H)){y(Se);try{const ke={name:H.name||"AI Generated Workout",date:new Date,exercises:H.exercises.map((Ve,F)=>({id:Date.now()+F,name:Ve.name,sets:Ve.sets.map((q,ne)=>{var pe,xe;return{id:Date.now()+F*100+ne,prescribedWeight:((pe=q.prescribedWeight)==null?void 0:pe.toString())||"",prescribedReps:((xe=q.prescribedReps)==null?void 0:xe.toString())||"",actualWeight:"",actualReps:"",rpe:"",painLevel:0}}),notes:Ve.notes||""})),notes:"Generated by AI Coach",status:"scheduled"},Ke=await Pa.create(r.uid,ke);l(Ve=>Ve.map((F,q)=>q===Se?{...F,workoutSaved:!0,savedWorkoutId:Ke.id}:F))}catch(ke){console.error("Error saving workout:",ke),alert("Failed to save workout")}finally{y(null)}}},$r=E||!S&&_;return f.jsx(Ys,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),f.jsxs(Be.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:`fixed inset-4 lg:inset-auto lg:bottom-6 lg:right-6 lg:w-96 lg:h-[600px]
              bg-iron-900 border border-iron-700/50 rounded-2xl z-50
              flex flex-col overflow-hidden shadow-2xl`,style:Y>0?{bottom:`${Y+4}px`}:void 0,children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-iron-800",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-9 h-9 rounded-full bg-flame-500/20 flex items-center justify-center",children:f.jsx(ka,{className:"w-4 h-4 text-flame-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-iron-100",children:"AI Coach"}),f.jsx("p",{className:"text-xs text-iron-500",children:_?"Loading your data...":v?"Your data is loaded":"Ready to help"})]})]}),f.jsx("button",{onClick:()=>n(!1),className:`p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800
                  rounded-full transition-colors`,children:f.jsx(uu,{className:"w-5 h-5"})})]}),f.jsxs("div",{ref:N,className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide relative",children:[$r&&a.length===0&&f.jsxs("div",{className:"flex gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-800 border border-iron-700 flex items-center justify-center flex-shrink-0",children:f.jsx(ry,{className:"w-4 h-4 text-flame-400"})}),f.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-400",children:[f.jsx(Ei,{className:"w-3.5 h-3.5 animate-spin text-flame-400"}),f.jsx("span",{children:_?"Loading your training data...":"Getting your personalized greeting..."})]})})]}),a.map((H,Se)=>{var ke,Ke,Ve;return f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${H.role==="user"?"flex-row-reverse":""}`,children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                      ${H.role==="user"?"bg-flame-500":"bg-iron-800 border border-iron-700"}`,children:H.role==="user"?f.jsx(W2,{className:"w-4 h-4 text-white"}):f.jsx(ry,{className:"w-4 h-4 text-flame-400"})}),f.jsxs("div",{className:"max-w-[85%] space-y-2",children:[f.jsx("div",{className:`px-4 py-2.5 rounded-2xl text-sm
                        ${H.role==="user"?"bg-flame-500 text-white rounded-tr-md":"bg-iron-800 text-iron-100 rounded-tl-md"}`,children:H.role==="assistant"?f.jsxs("div",{className:"chat-markdown",children:[f.jsx(WK,{components:{p:({children:F})=>f.jsx("p",{className:"mb-2 last:mb-0",children:F}),strong:({children:F})=>f.jsx("strong",{className:"text-iron-50 font-semibold",children:F}),em:({children:F})=>f.jsx("em",{className:"text-flame-300",children:F}),ul:({children:F})=>f.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:F}),ol:({children:F})=>f.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:F}),li:({children:F})=>f.jsx("li",{className:"text-iron-200",children:F}),code:({inline:F,children:q})=>F?f.jsx("code",{className:"bg-iron-700 px-1 py-0.5 rounded text-flame-300 text-xs",children:q}):f.jsx("pre",{className:"bg-iron-900 p-2 rounded-lg my-2 overflow-x-auto text-xs",children:f.jsx("code",{children:q})}),h3:({children:F})=>f.jsx("h3",{className:"font-semibold text-iron-50 mt-2 mb-1",children:F})},children:H.content}),H.streaming&&f.jsx("span",{className:"inline-block w-1.5 h-4 bg-flame-400 animate-pulse ml-0.5 rounded-sm"})]}):H.content}),H.workout&&f.jsxs("div",{className:"bg-iron-800/50 border border-iron-700 rounded-xl p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(dr,{className:"w-4 h-4 text-flame-400"}),f.jsx("span",{className:"font-medium text-iron-100 text-sm",children:H.workout.name})]}),f.jsxs("span",{className:"text-xs text-iron-500",children:[(ke=H.workout.exercises)==null?void 0:ke.length," exercises"]})]}),f.jsxs("div",{className:"text-xs text-iron-400 space-y-1",children:[(Ke=H.workout.exercises)==null?void 0:Ke.slice(0,3).map((F,q)=>{var ne;return f.jsxs("div",{children:[F.name,": ",(ne=F.sets)==null?void 0:ne.length," sets"]},q)}),((Ve=H.workout.exercises)==null?void 0:Ve.length)>3&&f.jsxs("div",{className:"text-iron-500",children:["+",H.workout.exercises.length-3," more..."]})]}),H.workoutSaved?f.jsx("button",{onClick:()=>{n(!1),t(`/workouts/${H.savedWorkoutId}`)},className:"w-full py-2 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:"Saved - View Workout"}):f.jsx("button",{onClick:()=>si(H.workout,Se),disabled:m===Se,className:"w-full py-2 bg-flame-500/20 hover:bg-flame-500/30 text-flame-400 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:m===Se?f.jsxs(f.Fragment,{children:[f.jsx(Ei,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Zx,{className:"w-4 h-4"}),"Add to My Workouts"]})})]})]})]},Se)}),h&&!a.some(H=>H.streaming&&H.content)&&f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3",children:[f.jsx("div",{className:`w-8 h-8 rounded-full bg-iron-800 border border-iron-700
                    flex items-center justify-center`,children:f.jsx(ry,{className:"w-4 h-4 text-flame-400"})}),f.jsx("div",{className:"bg-iron-800 px-4 py-3 rounded-2xl rounded-tl-md",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-2 h-2 rounded-full bg-iron-500 animate-bounce",style:{animationDelay:"300ms"}})]})})]}),f.jsx("div",{ref:ce})]}),f.jsx(Ys,{children:!ye&&f.jsxs(Be.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:()=>{Ze(),X(!1),De(!0)},className:`absolute bottom-36 left-1/2 -translate-x-1/2 z-10
                    w-8 h-8 rounded-full bg-iron-700 border border-iron-600
                    flex items-center justify-center
                    hover:bg-iron-600 transition-colors shadow-lg`,children:[f.jsx(Td,{className:"w-4 h-4 text-iron-300"}),Ie&&f.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-flame-500 rounded-full"})]})}),M.length>0&&a.length<=2&&!h&&!$r&&f.jsx("div",{className:"px-4 pb-2",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:M.map((H,Se)=>f.jsx("button",{onClick:()=>bo(H),disabled:h,className:`px-3 py-1.5 text-xs bg-iron-800 text-iron-300
                        border border-iron-700 rounded-full
                        hover:border-flame-500/50 hover:text-iron-100
                        transition-colors disabled:opacity-50`,children:H},Se))})}),f.jsxs("div",{className:"border-t border-iron-800",children:[Hn()>1&&f.jsx("div",{className:"mx-4 mt-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:f.jsxs("p",{className:"text-[11px] text-yellow-400",children:["Rate limit reached  messages now cost ",Fe," credits each until reset"]})}),f.jsxs("div",{className:"px-4 pt-2 flex justify-between text-[10px] text-iron-600",children:[f.jsxs("span",{children:[(i==null?void 0:i.credits)??0," credits left"]}),f.jsxs("span",{children:[Hn()," credit",Hn()>1?"s":""," / msg"]})]}),f.jsx("form",{onSubmit:ii,className:"px-4 pb-4 pt-1.5",children:f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx("textarea",{ref:ue,value:u,onChange:gr,onKeyDown:Ai,placeholder:"Ask about your workouts...","aria-label":"Chat message",rows:1,className:`flex-1 bg-iron-800 text-iron-100 px-4 py-2.5
                    ${u.includes(`
`)?"rounded-2xl":"rounded-full"}
                    border border-iron-700 focus:border-flame-500/50 focus:outline-none
                    placeholder:text-iron-500 text-sm resize-none overflow-hidden`,style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!u.trim()||h,className:`w-10 h-10 rounded-full bg-flame-500 text-white
                    flex items-center justify-center
                    hover:bg-flame-400 disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors`,children:h?f.jsx(Ei,{className:"w-4 h-4 animate-spin"}):f.jsx($2,{className:"w-4 h-4"})})]})})]})]})]})})}const sb=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,oQ=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;function aQ(){const[t,e]=k.useState(null),[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1);k.useEffect(()=>{if(oQ())return;const c=localStorage.getItem("installPromptDismissed");if(c&&Date.now()-parseInt(c)<7*24*60*60*1e3)return;const h=p=>{p.preventDefault(),e(p),setTimeout(()=>r(!0),3e3)};if(window.addEventListener("beforeinstallprompt",h),sb()){const p=parseInt(localStorage.getItem("appVisits")||"0")+1;localStorage.setItem("appVisits",String(p)),p>=3&&setTimeout(()=>r(!0),3e3)}return()=>window.removeEventListener("beforeinstallprompt",h)},[]);const l=async()=>{t?(t.prompt(),(await t.userChoice).outcome==="accepted"&&r(!1),e(null)):sb()&&s(!0)},u=()=>{r(!1),a(!0),localStorage.setItem("installPromptDismissed",String(Date.now()))};return!n||o?null:i?f.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end justify-center p-4",children:f.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-2xl p-5 max-w-sm w-full mb-4 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Add to Home Screen"}),f.jsx("button",{onClick:u,className:"text-iron-500 hover:text-iron-300",children:f.jsx(uu,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(bq,{className:"w-4 h-4 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:"1. Tap the Share button"}),f.jsx("p",{className:"text-xs text-iron-500",children:"In Safari's bottom toolbar"})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(Zx,{className:"w-4 h-4 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'2. Tap "Add to Home Screen"'}),f.jsx("p",{className:"text-xs text-iron-500",children:"Scroll down in the share sheet"})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:f.jsx(lS,{className:"w-4 h-4 text-green-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-iron-200 font-medium",children:'3. Tap "Add"'}),f.jsx("p",{className:"text-xs text-iron-500",children:"The app will appear on your home screen"})]})]})]}),f.jsx("button",{onClick:u,className:"w-full mt-4 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Got it"})]})}):f.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 lg:left-auto lg:right-6 lg:bottom-6 lg:max-w-sm",children:f.jsxs("div",{className:"bg-iron-900 border border-iron-700 rounded-xl p-3 shadow-xl flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:f.jsx(lS,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100",children:"Install Bench Only"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Add to home screen for the full experience"})]}),f.jsx("button",{onClick:l,className:"px-3 py-1.5 bg-flame-500 text-white text-sm font-medium rounded-lg hover:bg-flame-400 transition-colors flex-shrink-0",children:"Install"}),f.jsx("button",{onClick:u,className:"text-iron-600 hover:text-iron-400 flex-shrink-0",children:f.jsx(uu,{className:"w-4 h-4"})})]})})}class lQ extends k.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){var e;return this.state.hasError?f.jsx("div",{className:"min-h-[50vh] flex items-center justify-center p-6",children:f.jsxs("div",{className:"text-center max-w-md",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:f.jsx(dq,{className:"w-8 h-8 text-red-400"})}),f.jsx("h2",{className:"text-lg font-display text-iron-100 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-sm text-iron-500 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),f.jsxs("div",{className:"flex gap-3 justify-center",children:[f.jsxs("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"btn-secondary flex items-center gap-2 text-sm",children:[f.jsx(Tq,{className:"w-4 h-4"}),"Try Again"]}),f.jsxs("button",{onClick:()=>{window.location.href="/today"},className:"btn-primary flex items-center gap-2 text-sm",children:[f.jsx(z2,{className:"w-4 h-4"}),"Go Home"]})]})]})}):this.props.children}}const uQ=[{path:"/today",icon:z2,label:"Today",badgeKey:"workouts"},{path:"/workouts",icon:dr,label:"Workouts"},{path:"/programs",icon:xq,label:"Programs",beta:!0},{path:"/groups",icon:ca,label:"Groups"},{path:"/feed",icon:F2,label:"Feed"},{path:"/goals",icon:ua,label:"Goals"},{path:"/docs",icon:jc,label:"Docs"},{path:"/profile",icon:W2,label:"Profile"}];function cQ(){const t=Na(),e=go(),{user:n,userProfile:r,signOut:i,signInWithGoogle:s,isGuest:o,isRealAdmin:a,isAppAdmin:l,realUser:u,impersonating:c,stopImpersonating:h}=ti(),{sidebarOpen:p,setSidebarOpen:m,chatOpen:y,toggleChat:v}=Y2(),[I,_]=k.useState(!1),[x,E]=k.useState(!1),[V,M]=k.useState(0),[O,S]=k.useState(0),[T,A]=k.useState(0);k.useEffect(()=>{n&&!o&&zc.getPendingReviews(n.uid).then(Y=>M(Y.length)).catch(Y=>console.error("[Layout]",Y.message))},[n,o,t.pathname]),k.useEffect(()=>{n&&!o&&Bc.getUnread(n.uid).then(Y=>A(Y.length)).catch(Y=>console.error("[Layout]",Y.message))},[n,o,t.pathname]),k.useEffect(()=>{n&&!o&&LD.getPendingSharedCount(n.uid).then(Y=>S(Y)).catch(()=>{})},[n,o,t.pathname]),k.useEffect(()=>{a&&(u!=null&&u.uid)?Vl.setAdminContext(u.uid):Vl.clearAdminContext()},[a,u==null?void 0:u.uid]),k.useEffect(()=>{n&&!o&&Vl.logPageView(n.uid,t.pathname)},[t.pathname,n,o]);const b=l,R=MD.isTrainer(r,n==null?void 0:n.email),D=(()=>{let Y=[...uQ];return R&&Y.push({path:"/trainer",icon:gq,label:"Trainer",isTrainer:!0}),b&&Y.push({path:"/admin",icon:Sq,label:"Admin",isAdmin:!0}),Y})(),C=async()=>{await i(),e("/")};return f.jsxs("div",{className:"min-h-screen bg-iron-950 flex overflow-x-hidden",children:[o&&f.jsx("div",{className:`fixed left-0 right-0 z-30 bg-gradient-to-r from-flame-600 to-flame-500 text-white py-2.5 px-4
          top-14 lg:top-0`,children:f.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm min-w-0",children:[f.jsx(jp,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("span",{className:"hidden sm:inline",children:"Demo Mode  your data won't be saved"}),f.jsx("span",{className:"sm:hidden truncate",children:"Demo Mode"})]}),f.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[f.jsx("button",{onClick:C,className:"px-3 py-1 text-xs font-semibold bg-white/20 hover:bg-white/30 rounded-md transition-colors",children:"Exit Demo"}),f.jsx("button",{onClick:s,className:"px-3 py-1 text-xs font-semibold bg-white text-flame-600 hover:bg-white/90 rounded-md transition-colors",children:"Sign Up Free"})]})]})}),f.jsxs("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30
          ${p?"w-64":"w-20"} 
          ${o?"top-10":"top-0"}
          bg-iron-900/80 backdrop-blur-sm border-r border-iron-800
          transition-all duration-300`,children:[f.jsx("div",{className:"h-16 flex items-center px-4 border-b border-iron-800",children:f.jsxs(at,{to:"/today",className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-plate bg-flame-500 flex items-center justify-center",children:f.jsx(dr,{className:"w-5 h-5 text-white"})}),p&&f.jsx(Be.span,{initial:{opacity:0},animate:{opacity:1},className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]})}),f.jsx("nav",{className:"flex-1 py-4 px-2 space-y-1 overflow-y-auto",children:D.map(Y=>{const ye=t.pathname===Y.path||Y.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return f.jsxs(at,{to:Y.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-plate
                  transition-all duration-200 group relative
                  ${ye?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[ye&&f.jsx(Be.div,{layoutId:"activeNav",className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-flame-500 rounded-r"}),f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx(Y.icon,{className:"w-5 h-5"}),Y.badgeKey==="workouts"&&V>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V>9?"9+":V}),Y.path==="/workouts"&&O>0&&t.pathname!=="/workouts"&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-purple-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:O>9?"9+":O}),Y.path==="/feed"&&T>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T>9?"9+":T})]}),p&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"font-medium",children:Y.label}),Y.beta&&f.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]})]},Y.path)})}),f.jsxs("div",{className:"p-4 border-t border-iron-800",children:[!o&&p&&(r==null?void 0:r.credits)!==void 0&&f.jsxs(at,{to:"/settings",className:"flex items-center gap-2 px-3 py-2 mb-3 rounded-lg bg-iron-800/50 hover:bg-iron-800 transition-colors",children:[f.jsx(Aa,{className:"w-4 h-4 text-flame-400"}),f.jsxs("span",{className:"text-sm text-iron-300",children:[f.jsx("span",{className:"font-medium text-iron-200",children:r.credits})," credits"]})]}),f.jsxs("div",{className:`flex items-center gap-3 ${p?"":"justify-center"}`,children:[f.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-9 h-9 rounded-full border-2 border-iron-700"}),p&&f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:n==null?void 0:n.displayName}),f.jsx("p",{className:"text-xs text-iron-500 truncate",children:(r==null?void 0:r.role)||"Member"})]})]}),p&&f.jsxs("button",{onClick:C,className:`mt-3 w-full flex items-center justify-center gap-2 px-3 py-2
                text-iron-400 hover:text-red-400 bg-iron-800/50 hover:bg-red-500/10
                rounded-plate transition-colors text-sm`,children:[f.jsx(cS,{className:"w-4 h-4"}),"Sign Out"]})]}),f.jsx("button",{onClick:()=>m(!p),className:`absolute -right-3 top-20 w-6 h-6 bg-iron-800 border border-iron-700
            rounded-full flex items-center justify-center text-iron-400
            hover:text-iron-100 hover:border-iron-600 transition-colors`,children:f.jsx(Es,{className:`w-4 h-4 transition-transform ${p?"rotate-180":""}`})})]}),f.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 bg-iron-900 border-b border-iron-800 z-40",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:f.jsxs("div",{className:"h-14 flex items-center justify-between px-4",children:[f.jsxs(at,{to:"/today",className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center flex-shrink-0",children:f.jsx(dr,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wide",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[!o&&(r==null?void 0:r.credits)!==void 0&&f.jsxs(at,{to:"/settings",className:"flex items-center gap-1 px-2 py-1 rounded-full bg-iron-800/80 mr-1",children:[f.jsx(Aa,{className:"w-3 h-3 text-flame-400"}),f.jsx("span",{className:"text-xs font-medium text-iron-300",children:r.credits})]}),T>0&&f.jsxs(at,{to:"/feed",className:"w-10 h-10 flex items-center justify-center text-iron-300 relative",children:[f.jsx(pq,{className:"w-5 h-5"}),f.jsx("span",{className:"absolute top-1.5 right-1.5 w-4 h-4 bg-flame-500 rounded-full text-[10px] text-white flex items-center justify-center font-medium",children:T>9?"9+":T})]}),f.jsx("button",{onClick:()=>_(!0),className:"w-12 h-12 flex items-center justify-center text-iron-300 active:bg-iron-800 rounded-xl transition-colors",children:f.jsx(Eq,{className:"w-7 h-7"})})]})]})}),f.jsxs("div",{className:"lg:hidden fixed bottom-6 right-4 z-30 flex flex-col items-end gap-3",style:{marginBottom:"env(safe-area-inset-bottom, 0px)"},children:[f.jsxs(Ys,{children:[x&&t.pathname!=="/form-check"&&f.jsxs(Be.button,{initial:{opacity:0,scale:.3,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.3,y:20},transition:{duration:.2},onClick:()=>{e("/form-check"),E(!1)},"aria-label":"Form Check (Beta)",className:`w-11 h-11 bg-iron-800 border border-iron-700
                rounded-full shadow-lg flex items-center justify-center transition-colors relative`,children:[f.jsx(Mc,{className:"w-5 h-5 text-purple-400"}),f.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]},"fab-formcheck"),x&&f.jsx(Be.button,{initial:{opacity:0,scale:.3,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.3,y:20},transition:{duration:.2,delay:.05},onClick:()=>{v(),E(!1)},"aria-label":"Open AI Chat",className:`w-11 h-11 bg-flame-500
                rounded-full shadow-lg flex items-center justify-center transition-colors`,children:f.jsx(Rl,{className:"w-5 h-5 text-white"})},"fab-chat")]}),f.jsx("button",{onClick:()=>E(!x),"aria-label":x?"Close menu":"Open actions menu","aria-expanded":x,className:`w-14 h-14 rounded-full shadow-lg shadow-flame-500/30
            flex items-center justify-center transition-all duration-200
            ${x?"bg-iron-700 rotate-0":"bg-flame-500 hover:bg-flame-600 active:bg-flame-700"}`,children:x?f.jsx(uu,{className:"w-6 h-6 text-white"}):f.jsx(Rl,{className:"w-6 h-6 text-white"})})]}),f.jsx(Ys,{children:I&&f.jsxs(f.Fragment,{children:[f.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),f.jsxs(Be.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:`lg:hidden fixed right-0 top-0 bottom-0 w-72 bg-iron-900 z-50
                border-l border-iron-800 flex flex-col`,children:[f.jsxs("div",{className:"h-14 flex items-center justify-between px-4 border-b border-iron-800",children:[f.jsx("span",{className:"font-display text-lg text-iron-50",children:"Menu"}),f.jsx("button",{onClick:()=>_(!1),className:"p-2 text-iron-400 hover:text-iron-100",children:f.jsx(uu,{className:"w-5 h-5"})})]}),f.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:D.map(Y=>{const ye=t.pathname===Y.path||Y.path==="/today"&&(t.pathname==="/"||t.pathname==="/today");return f.jsxs(at,{to:Y.path,onClick:()=>_(!1),className:`flex items-center gap-4 px-4 py-4 rounded-plate
                        transition-colors
                        ${ye?"bg-flame-500/10 text-flame-500":"text-iron-400 hover:text-iron-100 hover:bg-iron-800/50"}`,children:[f.jsxs("div",{className:"relative",children:[f.jsx(Y.icon,{className:"w-6 h-6"}),Y.badgeKey==="workouts"&&V>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-amber-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V>9?"9+":V}),Y.path==="/workouts"&&O>0&&t.pathname!=="/workouts"&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-purple-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:O>9?"9+":O}),Y.path==="/feed"&&T>0&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-flame-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T>9?"9+":T})]}),f.jsx("span",{className:"font-medium text-lg",children:Y.label}),Y.beta&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none",children:"Beta"})]},Y.path)})}),f.jsxs("div",{className:"p-4 border-t border-iron-800",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:n==null?void 0:n.displayName,className:"w-10 h-10 rounded-full border-2 border-iron-700"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-iron-100",children:n==null?void 0:n.displayName}),f.jsx("p",{className:"text-sm text-iron-500",children:n==null?void 0:n.email})]})]}),f.jsxs("button",{onClick:C,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5
                    text-red-400 bg-red-500/10 hover:bg-red-500/20
                    rounded-plate transition-colors`,children:[f.jsx(cS,{className:"w-4 h-4"}),"Sign Out"]})]})]})]})}),f.jsx("main",{className:`flex-1 min-w-0 transition-all duration-300
        ${p?"lg:ml-64":"lg:ml-20"}
        ${o?"pt-[calc(env(safe-area-inset-top,0px)+3.5rem+2.5rem)] lg:pt-16":"pt-[calc(env(safe-area-inset-top,0px)+3.5rem)] lg:pt-0"}`,children:f.jsxs("div",{className:"min-h-screen p-4 lg:p-6 overflow-x-hidden",children:[c&&f.jsxs("div",{className:"mb-4 -mt-1 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-center gap-3 flex-wrap",children:[f.jsx(jp,{className:"w-4 h-4 text-amber-400 flex-shrink-0"}),f.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["Viewing as ",c.displayName||c.email]}),f.jsx("button",{onClick:()=>{h(),e("/admin")},className:"ml-auto px-3 py-1 text-xs font-medium bg-amber-500/20 hover:bg-amber-500/30 text-amber-300 rounded-lg transition-colors",children:"Exit"})]}),f.jsx(lQ,{children:f.jsx(kM,{})},t.pathname)]})}),f.jsxs("div",{className:`hidden lg:flex fixed bottom-6 right-6 z-30 flex-col gap-3 transition-all duration-200
        ${y?"scale-0 opacity-0":"scale-100 opacity-100"}`,children:[t.pathname!=="/form-check"&&f.jsxs("button",{onClick:()=>e("/form-check"),className:`w-11 h-11 rounded-full bg-iron-800 border border-iron-700 text-purple-400
              flex items-center justify-center shadow-lg relative
              hover:bg-iron-700 transition-all duration-200`,title:"Form Check (Beta)",children:[f.jsx(Mc,{className:"w-5 h-5"}),f.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-purple-500 text-[7px] font-bold text-white flex items-center justify-center",children:""})]}),f.jsx("button",{onClick:v,className:`w-14 h-14 rounded-full bg-flame-500 text-white
            flex items-center justify-center shadow-glow-lg
            hover:bg-flame-400 transition-all duration-200`,children:f.jsx(Rl,{className:"w-6 h-6"})})]}),f.jsx(aQ,{}),f.jsx(sQ,{})]})}const ob=[{text:"Reviewing your recent training sessions...",icon:"brain",delay:0},{text:"Analyzing strength progression trends...",icon:"calc",delay:800},{text:"Checking for pain history and injury risks...",icon:"alert",delay:1600},{text:"Calculating working weights from your e1RM data...",icon:"calc",delay:2400},{text:"Selecting exercises based on your focus area...",icon:"dumbbell",delay:3200},{text:"Building optimal set and rep schemes...",icon:"dumbbell",delay:4e3},{text:"Writing personalized coaching notes...",icon:"msg",delay:4800},{text:"Workout ready!",icon:"check",delay:5600}];function dQ(){const[t,e]=k.useState([]),[n,r]=k.useState(!1),[i,s]=k.useState(!1),o=k.useRef(null),a=k.useRef([]),l=()=>{e([]),r(!0),s(!0),a.current.forEach(clearTimeout),a.current=[],ob.forEach((c,h)=>{const p=setTimeout(()=>{e(m=>[...m,c]),h===ob.length-1&&r(!1)},c.delay);a.current.push(p)})};k.useEffect(()=>()=>a.current.forEach(clearTimeout),[]),k.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t]);const u={brain:f.jsx(iv,{className:"w-3 h-3 text-flame-400"}),alert:f.jsx("span",{className:"w-3 h-3 text-amber-400 text-[10px] leading-none flex items-center justify-center",children:""}),calc:f.jsx(ka,{className:"w-3 h-3 text-purple-400"}),dumbbell:f.jsx(dr,{className:"w-3 h-3 text-cyan-400"}),msg:f.jsx(Rl,{className:"w-3 h-3 text-blue-400"}),check:f.jsx($i,{className:"w-3 h-3 text-green-400"})};return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-iron-800 bg-iron-900",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500/20 flex items-center justify-center",children:f.jsx(iv,{className:"w-3.5 h-3.5 text-flame-400"})}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Workout Generator"}),n&&f.jsx(Ei,{className:"w-4 h-4 text-flame-400 animate-spin ml-auto"}),!n&&i&&f.jsx($i,{className:"w-4 h-4 text-green-400 ml-auto"})]}),f.jsx("div",{ref:o,className:"p-4 min-h-[180px] max-h-[220px] overflow-y-auto",children:i?f.jsxs("div",{className:"space-y-2",children:[t.map((c,h)=>f.jsxs(Be.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.25},className:"flex items-start gap-2.5",children:[f.jsx("div",{className:"mt-0.5 w-5 h-5 rounded bg-iron-800 flex items-center justify-center flex-shrink-0",children:u[c.icon]}),f.jsx("p",{className:`text-sm leading-relaxed ${c.icon==="check"?"text-green-400 font-medium":"text-iron-300"}`,children:c.text})]},h)),n&&f.jsxs("div",{className:"flex items-center gap-1.5 pt-1 ml-7",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse"}),f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),f.jsx("span",{className:"w-1.5 h-1.5 bg-flame-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),!n&&i&&f.jsx("button",{onClick:l,className:"text-xs text-iron-500 hover:text-iron-300 mt-2 ml-7",children:"Run again"})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-[160px] gap-3",children:[f.jsx("p",{className:"text-sm text-iron-500",children:"See how the AI builds your workout"}),f.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-flame-500 hover:bg-flame-600 text-white text-sm rounded-lg transition-colors",children:[f.jsx(bf,{className:"w-3.5 h-3.5"}),"Run Demo"]})]})})]})}function hQ(){return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800",children:[f.jsx("p",{className:"text-[10px] text-iron-500",children:"Tuesday, February 11"}),f.jsx("p",{className:"text-sm font-display text-iron-100",children:"Good morning, Alex"})]}),f.jsxs("div",{className:"p-3 space-y-2.5",children:[f.jsx("div",{className:"bg-iron-800/60 rounded-xl p-3 border border-flame-500/20",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500/10 flex items-center justify-center",children:f.jsx(dr,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:"Push Day  Chest & Triceps"}),f.jsx("p",{className:"text-[11px] text-iron-500",children:"6 exercises  AI Generated"})]})]})}),f.jsx("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:f.jsx("div",{className:"flex gap-1.5 justify-between",children:["M","T","W","T","F","S","S"].map((t,e)=>f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx("span",{className:`text-[9px] ${e===1?"text-flame-400":"text-iron-600"}`,children:t}),f.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-[10px] ${e===0?"bg-green-500/20 text-green-400":e===1?"bg-flame-500/20 text-flame-400 ring-1 ring-flame-500/30":e===4?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/20":"bg-iron-800/50 text-iron-600"}`,children:10+e})]},e))})}),f.jsxs("div",{className:"bg-iron-800/40 rounded-xl p-2.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs("span",{className:"text-[10px] text-iron-400 flex items-center gap-1",children:[f.jsx(ua,{className:"w-3 h-3 text-flame-400"})," Bench Press 225 lbs"]}),f.jsx("span",{className:"text-[10px] text-flame-400",children:"87%"})]}),f.jsx("div",{className:"h-1.5 bg-iron-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-flame-500 to-flame-400 rounded-full",style:{width:"87%"}})})]})]})]})}function fQ(){return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:f.jsx(ca,{className:"w-3.5 h-3.5 text-cyan-400"})}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Morning Crew"}),f.jsx("span",{className:"text-[10px] text-iron-500 ml-auto",children:"3 athletes"})]}),f.jsxs("div",{className:"p-3 space-y-2",children:[[{name:"You",status:"Completed",color:"green"},{name:"Jordan",status:"In Progress",color:"amber"},{name:"Sam",status:"Assigned",color:"iron"}].map((t,e)=>f.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2.5 bg-iron-800/40 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-iron-700 flex items-center justify-center text-[10px] text-iron-400",children:t.name[0]}),f.jsx("span",{className:"text-xs text-iron-300",children:t.name})]}),f.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${t.color==="green"?"bg-green-500/20 text-green-400":t.color==="amber"?"bg-amber-500/20 text-amber-400":"bg-iron-700 text-iron-500"}`,children:t.status})]},e)),f.jsx("div",{className:"pt-1 text-[10px] text-iron-500 text-center",children:"AI generates personalized weights for each athlete"})]})]})}function pQ(){const t=[{phase:"Setup",score:9,color:"green"},{phase:"Descent",score:8,color:"green"},{phase:"Bottom",score:6,color:"yellow"},{phase:"Ascent",score:7,color:"yellow"},{phase:"Lockout",score:9,color:"green"}];return f.jsxs("div",{className:"bg-iron-900/80 rounded-2xl border border-iron-700/50 overflow-hidden",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-iron-800 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/15 flex items-center justify-center",children:f.jsx("span",{className:"text-lg font-display font-bold text-green-400",children:"8"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Barbell Back Squat"}),f.jsx("p",{className:"text-[10px] text-iron-500",children:"Good depth, minor knee cave on ascent"})]}),f.jsx("span",{className:"text-[10px] text-iron-500",children:"5 frames"})]}),f.jsxs("div",{className:"px-4 pt-3 pb-2",children:[f.jsx("div",{className:"flex gap-1 mb-2",children:t.map((e,n)=>f.jsx("div",{className:`flex-1 h-1.5 rounded-full ${e.color==="green"?"bg-green-500":"bg-yellow-500"} ${n===2?"ring-1 ring-white/30":"opacity-50"}`},n))}),f.jsxs("div",{className:"text-[10px] text-iron-500 flex justify-between",children:[f.jsx("span",{children:"Setup"}),f.jsx("span",{children:"Lockout"})]})]}),f.jsx("div",{className:"px-4 pb-3",children:f.jsxs("div",{className:"bg-iron-800/50 rounded-lg p-2.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("span",{className:"text-[10px] font-semibold text-yellow-400",children:"Frame 3  Bottom"}),f.jsx("span",{className:"text-[10px] font-bold text-yellow-400",children:"6/10"})]}),f.jsx("p",{className:"text-[11px] text-iron-400 leading-relaxed",children:"Slight knee cave at the bottom position. Depth is good  hip crease below knee line."}),f.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[f.jsx("span",{className:"text-flame-400 text-[10px]",children:""}),f.jsx("span",{className:"text-[10px] text-iron-500",children:"Push knees out over toes on the way down"})]})]})})]})}function mQ(){const t=go(),{user:e,signInWithGoogle:n,signInAsGuest:r,loading:i}=ti(),[s,o]=k.useState(null),[a,l]=k.useState(!1);k.useEffect(()=>{e&&t("/today")},[e,t]);const u=async()=>{o(null),l(!0);try{const h=await n();h.success?t("/today"):h.error!=="cancelled"&&o(h.error)}catch{o("Something went wrong. Please try again.")}finally{l(!1)}},c=()=>{r(),t("/today")};return f.jsxs("div",{className:"min-h-screen bg-iron-950 overflow-x-hidden",children:[f.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute -top-32 right-0 w-[500px] h-[500px] bg-flame-500/[0.07] rounded-full blur-[120px]"}),f.jsx("div",{className:"absolute bottom-0 -left-32 w-[400px] h-[400px] bg-cyan-500/[0.04] rounded-full blur-[100px]"})]}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("header",{className:"py-5 px-5 sm:px-8",children:f.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2.5",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-flame-500 flex items-center justify-center shadow-lg shadow-flame-500/20",children:f.jsx(dr,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-display text-xl text-iron-50 tracking-wider",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(at,{to:"/docs",className:"flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[f.jsx(jc,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"hidden sm:inline",children:"Docs"})]}),f.jsxs("button",{onClick:c,className:"hidden sm:flex items-center gap-1.5 px-3 py-2 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:[f.jsx(bf,{className:"w-3.5 h-3.5"}),"Try Demo"]}),f.jsx("button",{onClick:u,disabled:i||a,className:`flex items-center gap-2 px-4 py-2 bg-white text-iron-900\r
                  rounded-lg font-medium text-sm hover:bg-iron-100 transition-all disabled:opacity-50`,children:i||a?f.jsx(Ei,{className:"w-4 h-4 animate-spin"}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign In"]})})]})]})}),f.jsx("section",{className:"px-5 sm:px-8 pt-8 sm:pt-16 pb-12",children:f.jsx("div",{className:"max-w-5xl mx-auto",children:f.jsxs(Be.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-xl",children:[f.jsx("h1",{className:"font-display text-display-lg sm:text-display-xl text-iron-50 mb-4",children:"TRAIN SMARTER"}),f.jsx("p",{className:"text-lg sm:text-xl text-iron-400 leading-relaxed mb-8",children:"AI-powered strength training. Generate personalized workouts, check your form, train with friends, and track everything  all free."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[f.jsxs("button",{onClick:u,disabled:i||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white\r
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?f.jsx(Ei,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&f.jsx(Op,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),f.jsxs("button",{onClick:c,className:`flex items-center justify-center gap-2 px-6 py-3.5 \r
                    bg-iron-800/80 text-iron-200 border border-iron-700\r
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[f.jsx(bf,{className:"w-4 h-4"}),"Try Demo"]})]}),f.jsxs(at,{to:"/docs",className:"inline-flex items-center gap-1.5 text-sm text-iron-500 hover:text-iron-300 transition-colors mt-4",children:[f.jsx(jc,{className:"w-3.5 h-3.5"}),"Read the docs  how it works, calculations, AI system"]}),s&&f.jsxs("p",{className:"text-sm text-red-400 mt-3",children:["Sign-in failed: ",s]})]})})}),f.jsx("section",{className:"px-5 sm:px-8 pb-16",children:f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsx(Be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(ka,{className:"w-5 h-5 text-flame-400"}),f.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI THAT KNOWS YOUR BODY"})]}),f.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"The AI reviews your lift history, e1RM data, RPE trends, and pain flags to generate workouts tailored to you. It avoids exercises that cause you pain and progressively overloads based on real data."}),f.jsx("div",{className:"space-y-2",children:["Analyzes your training history and maxes","Generates workouts with exercise-specific form cues","AI form check  frame-by-frame video analysis","Skips exercises flagged for pain","Bodyweight, hotel/travel, and 1RM test modes"].map((h,p)=>f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[f.jsx($i,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),h]},p))})]}),f.jsx(dQ,{})]})}),f.jsx(Be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Aa,{className:"w-5 h-5 text-flame-400"}),f.jsx("h3",{className:"font-display text-xl text-iron-100",children:"YOUR DAY AT A GLANCE"})]}),f.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"See today's workout, weekly progress, goal tracking, and community activity  all on one screen."}),f.jsx(hQ,{})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(ca,{className:"w-5 h-5 text-cyan-400"}),f.jsx("h3",{className:"font-display text-xl text-iron-100",children:"TRAIN TOGETHER"})]}),f.jsx("p",{className:"text-sm text-iron-400 mb-4",children:"Create groups, assign AI-generated workouts to your team, and track everyone's progress. Great for coaches and gym crews."}),f.jsx(fQ,{})]})]})}),f.jsx(Be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-12",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Mc,{className:"w-5 h-5 text-purple-400"}),f.jsx("h2",{className:"font-display text-2xl text-iron-100",children:"AI FORM CHECK"}),f.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 border border-amber-500/30",children:"BETA"})]}),f.jsx("p",{className:"text-iron-400 mb-4 leading-relaxed",children:"Upload a video of your lift and get instant frame-by-frame form analysis from AI. It detects the exercise, scores each phase of the movement, and gives you specific coaching cues."}),f.jsx("div",{className:"space-y-2",children:["Smart motion detection focuses on the actual lift","Per-frame scores with phase detection","Specific coaching cues and corrections","Video never leaves your device  only frames are sent"].map((h,p)=>f.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-300",children:[f.jsx($i,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),h]},p))})]}),f.jsx(pQ,{})]})}),f.jsx(Be.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},className:"mb-16",children:f.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:[{icon:ka,label:"AI Workouts"},{icon:Mc,label:"AI Form Check (Beta)"},{icon:ca,label:"Group Training"},{icon:ua,label:"Goal Tracking"},{icon:wq,label:"Exercise Info"},{icon:Aq,label:"1RM Test Mode"},{icon:F2,label:"Cardio Tracking"},{icon:U2,label:"Calendar"},{icon:dr,label:"1RM Calculator"},{icon:iv,label:"AI Coach Chat"}].map(({icon:h,label:p},m)=>f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800/60 border border-iron-700/40 rounded-full text-xs text-iron-300",children:[f.jsx(h,{className:"w-3 h-3 text-iron-500"}),p]},m))})}),f.jsxs(Be.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center pb-12",children:[f.jsx("h2",{className:"font-display text-3xl sm:text-4xl text-iron-100 mb-3",children:"START TRAINING TODAY"}),f.jsx("p",{className:"text-iron-400 mb-6",children:"Free to use. Earn credits by training and completing goals."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[f.jsxs("button",{onClick:u,disabled:i||a,className:`group flex items-center justify-center gap-2.5 px-6 py-3.5 bg-flame-500 text-white\r
                    rounded-xl font-semibold hover:bg-flame-600 transition-all disabled:opacity-50 shadow-lg shadow-flame-500/20`,children:[a?f.jsx(Ei,{className:"w-5 h-5 animate-spin"}):"Get Started Free",!a&&f.jsx(Op,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})]}),f.jsxs("button",{onClick:c,className:`flex items-center justify-center gap-2 px-6 py-3.5 \r
                    bg-iron-800/80 text-iron-200 border border-iron-700\r
                    rounded-xl font-medium hover:bg-iron-700/80 transition-all`,children:[f.jsx(bf,{className:"w-4 h-4"}),"Explore Demo"]})]})]})]})}),f.jsx("footer",{className:"py-6 px-5 sm:px-8 border-t border-iron-800/50",children:f.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-flame-500 flex items-center justify-center",children:f.jsx(dr,{className:"w-3.5 h-3.5 text-white"})}),f.jsx("span",{className:"font-display text-sm text-iron-500",children:"BENCH ONLY"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(at,{to:"/docs",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx(jc,{className:"w-3 h-3"})," Docs"]}),f.jsxs("a",{href:"/ai-form-check",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx(Mc,{className:"w-3 h-3"})," AI Form Check"]}),f.jsxs("a",{href:"https://x.com/BenchPressOnly",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Follow"]}),f.jsx("a",{href:"https://azoni.ai",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Built by Azoni"}),f.jsxs("p",{className:"text-xs text-iron-600",children:[" ",new Date().getFullYear()]})]})]})})]})]})}const Do={NONE:"none",PENDING_SENT:"pending_sent",PENDING_RECEIVED:"pending_received",FRIENDS:"friends"},yv={async sendRequest(t,e){if(t===e)throw new Error("Cannot friend yourself");const n=await this.getFriendshipStatus(t,e);if(n.status===Do.FRIENDS)throw new Error("Already friends");if(n.status===Do.PENDING_SENT)throw new Error("Request already sent");if(n.status===Do.PENDING_RECEIVED)return this.acceptRequest(n.requestId);const r=await Ht(te(L,"friendRequests"),{from:t,to:e,status:"pending",createdAt:de()});try{await Ht(te(L,"notifications"),{userId:e,type:"friend_request",fromUserId:t,read:!1,createdAt:de()})}catch(i){console.error("Notification error:",i)}return{id:r.id}},async acceptRequest(t){const e=J(L,"friendRequests",t),n=await Qe(e);if(!n.exists())throw new Error("Request not found");const{from:r,to:i}=n.data(),s=[r,i].sort(),o=aa(L),a=J(te(L,"friendships"));o.set(a,{users:s,user1:s[0],user2:s[1],createdAt:de()}),o.delete(e),await o.commit();try{await Ht(te(L,"notifications"),{userId:r,type:"friend_accepted",fromUserId:i,read:!1,createdAt:de()})}catch(l){console.error("Notification error:",l)}return{id:a.id}},async declineRequest(t){await pn(J(L,"friendRequests",t))},async cancelRequest(t){await pn(J(L,"friendRequests",t))},async removeFriend(t,e){const n=await this._findFriendship(t,e);n&&await pn(J(L,"friendships",n.id))},async getFriends(t){const e=ve(te(L,"friendships"),ae("user1","==",t)),n=ve(te(L,"friendships"),ae("user2","==",t)),[r,i]=await Promise.all([we(e),we(n)]),s=new Set;return r.docs.forEach(o=>{const l=o.data().users.find(u=>u!==t);l&&s.add(l)}),i.docs.forEach(o=>{const l=o.data().users.find(u=>u!==t);l&&s.add(l)}),[...s]},async getFriendSet(t){const e=await this.getFriends(t);return new Set(e)},async getReceivedRequests(t){const e=ve(te(L,"friendRequests"),ae("to","==",t),ae("status","==","pending"),Gt("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getSentRequests(t){const e=ve(te(L,"friendRequests"),ae("from","==",t),ae("status","==","pending"),Gt("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data()}))},async getFriendshipStatus(t,e){const n=await this._findFriendship(t,e);if(n)return{status:Do.FRIENDS,friendshipId:n.id};const r=ve(te(L,"friendRequests"),ae("from","==",t),ae("to","==",e),ae("status","==","pending")),i=await we(r);if(!i.empty)return{status:Do.PENDING_SENT,requestId:i.docs[0].id};const s=ve(te(L,"friendRequests"),ae("from","==",e),ae("to","==",t),ae("status","==","pending")),o=await we(s);return o.empty?{status:Do.NONE}:{status:Do.PENDING_RECEIVED,requestId:o.docs[0].id}},async getFriendCount(t){return(await this.getFriends(t)).length},async _findFriendship(t,e){const n=[t,e].sort(),r=ve(te(L,"friendships"),ae("user1","==",n[0]),ae("user2","==",n[1])),i=await we(r);return i.empty?null:{id:i.docs[0].id,...i.docs[0].data()}}};function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function bi(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function nn(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function mr(t){nn(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Up(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function gQ(t,e){nn(2,arguments);var n=mr(t),r=bi(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function yQ(t,e){nn(2,arguments);var n=mr(t).getTime(),r=bi(e);return new Date(n+r)}var vQ={};function Du(){return vQ}function gy(t,e){var n,r,i,s,o,a,l,u;nn(1,arguments);var c=Du(),h=bi((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=mr(t),m=p.getDay(),y=(m<h?7:0)+m-h;return p.setDate(p.getDate()-y),p.setHours(0,0,0,0),p}function wQ(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Bp(t){nn(1,arguments);var e=mr(t);return e.setHours(0,0,0,0),e}function xQ(t,e){nn(2,arguments);var n=Bp(t),r=Bp(e);return n.getTime()===r.getTime()}function _Q(t){return nn(1,arguments),t instanceof Date||Up(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function EQ(t){if(nn(1,arguments),!_Q(t)&&typeof t!="number")return!1;var e=mr(t);return!isNaN(Number(e))}function ab(t,e){var n,r,i,s,o,a,l,u;nn(1,arguments);var c=Du(),h=bi((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=mr(t),m=p.getDay(),y=(m<h?-7:0)+6-(m-h);return p.setDate(p.getDate()+y),p.setHours(23,59,59,999),p}function TQ(t,e){nn(2,arguments);var n=bi(e);return yQ(t,-n)}var IQ=864e5;function SQ(t){nn(1,arguments);var e=mr(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/IQ)+1}function zp(t){nn(1,arguments);var e=1,n=mr(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function FD(t){nn(1,arguments);var e=mr(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=zp(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=zp(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function bQ(t){nn(1,arguments);var e=FD(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=zp(n);return r}var kQ=6048e5;function AQ(t){nn(1,arguments);var e=mr(t),n=zp(e).getTime()-bQ(e).getTime();return Math.round(n/kQ)+1}function $p(t,e){var n,r,i,s,o,a,l,u;nn(1,arguments);var c=Du(),h=bi((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=mr(t),m=p.getUTCDay(),y=(m<h?7:0)+m-h;return p.setUTCDate(p.getUTCDate()-y),p.setUTCHours(0,0,0,0),p}function UD(t,e){var n,r,i,s,o,a,l,u;nn(1,arguments);var c=mr(t),h=c.getUTCFullYear(),p=Du(),m=bi((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:p.firstWeekContainsDate)!==null&&r!==void 0?r:(l=p.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(h+1,0,m),y.setUTCHours(0,0,0,0);var v=$p(y,e),I=new Date(0);I.setUTCFullYear(h,0,m),I.setUTCHours(0,0,0,0);var _=$p(I,e);return c.getTime()>=v.getTime()?h+1:c.getTime()>=_.getTime()?h:h-1}function PQ(t,e){var n,r,i,s,o,a,l,u;nn(1,arguments);var c=Du(),h=bi((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=UD(t,e),m=new Date(0);m.setUTCFullYear(p,0,h),m.setUTCHours(0,0,0,0);var y=$p(m,e);return y}var CQ=6048e5;function RQ(t,e){nn(1,arguments);var n=mr(t),r=$p(n,e).getTime()-PQ(n,e).getTime();return Math.round(r/CQ)+1}function lt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ys={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return lt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):lt(r+1,2)},d:function(e,n){return lt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return lt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return lt(e.getUTCHours(),n.length)},m:function(e,n){return lt(e.getUTCMinutes(),n.length)},s:function(e,n){return lt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return lt(s,n.length)}},Ya={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NQ={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return ys.y(e,n)},Y:function(e,n,r,i){var s=UD(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return lt(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):lt(o,n.length)},R:function(e,n){var r=FD(e);return lt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return lt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return lt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return lt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return ys.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return lt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=RQ(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):lt(s,n.length)},I:function(e,n,r){var i=AQ(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):lt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ys.d(e,n)},D:function(e,n,r){var i=SQ(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):lt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return lt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return lt(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return lt(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=Ya.noon:i===0?s=Ya.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=Ya.evening:i>=12?s=Ya.afternoon:i>=4?s=Ya.morning:s=Ya.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ys.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ys.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):lt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):lt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ys.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ys.s(e,n)},S:function(e,n){return ys.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return ub(o);case"XXXX":case"XX":return $o(o);case"XXXXX":case"XXX":default:return $o(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return ub(o);case"xxxx":case"xx":return $o(o);case"xxxxx":case"xxx":default:return $o(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+lb(o,":");case"OOOO":default:return"GMT"+$o(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+lb(o,":");case"zzzz":default:return"GMT"+$o(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return lt(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return lt(o,n.length)}};function lb(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e;return n+String(i)+o+lt(s,2)}function ub(t,e){if(t%60===0){var n=t>0?"-":"+";return n+lt(Math.abs(t)/60,2)}return $o(t,e)}function $o(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=lt(Math.floor(i/60),2),o=lt(i%60,2);return r+s+n+o}var cb=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},BD=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},DQ=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return cb(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",cb(i,n)).replace("{{time}}",BD(s,n))},VQ={p:BD,P:DQ},OQ=["D","DD"],jQ=["YY","YYYY"];function MQ(t){return OQ.indexOf(t)!==-1}function LQ(t){return jQ.indexOf(t)!==-1}function db(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var FQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UQ=function(e,n,r){var i,s=FQ[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function yy(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var BQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$Q={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WQ={date:yy({formats:BQ,defaultWidth:"full"}),time:yy({formats:zQ,defaultWidth:"full"}),dateTime:yy({formats:$Q,defaultWidth:"full"})},qQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GQ=function(e,n,r,i){return qQ[e]};function sc(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var HQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZQ=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},eY={ordinalNumber:ZQ,era:sc({values:HQ,defaultWidth:"wide"}),quarter:sc({values:KQ,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:sc({values:QQ,defaultWidth:"wide"}),day:sc({values:YQ,defaultWidth:"wide"}),dayPeriod:sc({values:JQ,defaultWidth:"wide",formattingValues:XQ,defaultFormattingWidth:"wide"})};function oc(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?nY(a,function(h){return h.test(o)}):tY(a,function(h){return h.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var c=e.slice(o.length);return{value:u,rest:c}}}function tY(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function nY(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function rY(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var iY=/^(\d+)(th|st|nd|rd)?/i,sY=/\d+/i,oY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aY={any:[/^b/i,/^(a|c)/i]},lY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uY={any:[/1/i,/2/i,/3/i,/4/i]},cY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gY={ordinalNumber:rY({matchPattern:iY,parsePattern:sY,valueCallback:function(e){return parseInt(e,10)}}),era:oc({matchPatterns:oY,defaultMatchWidth:"wide",parsePatterns:aY,defaultParseWidth:"any"}),quarter:oc({matchPatterns:lY,defaultMatchWidth:"wide",parsePatterns:uY,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:oc({matchPatterns:cY,defaultMatchWidth:"wide",parsePatterns:dY,defaultParseWidth:"any"}),day:oc({matchPatterns:hY,defaultMatchWidth:"wide",parsePatterns:fY,defaultParseWidth:"any"}),dayPeriod:oc({matchPatterns:pY,defaultMatchWidth:"any",parsePatterns:mY,defaultParseWidth:"any"})},yY={code:"en-US",formatDistance:UQ,formatLong:WQ,formatRelative:GQ,localize:eY,match:gY,options:{weekStartsOn:0,firstWeekContainsDate:1}},vY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xY=/^'([^]*?)'?$/,_Y=/''/g,EY=/[a-zA-Z]/;function Or(t,e,n){var r,i,s,o,a,l,u,c,h,p,m,y,v,I;nn(2,arguments);var _=String(e),x=Du(),E=(r=(i=void 0)!==null&&i!==void 0?i:x.locale)!==null&&r!==void 0?r:yY,V=bi((s=(o=(a=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&o!==void 0?o:(u=x.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(V>=1&&V<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=bi((h=(p=(m=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&m!==void 0?m:x.weekStartsOn)!==null&&p!==void 0?p:(v=x.locale)===null||v===void 0||(I=v.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&h!==void 0?h:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var O=mr(t);if(!EQ(O))throw new RangeError("Invalid time value");var S=wQ(O),T=TQ(O,S),A={firstWeekContainsDate:V,weekStartsOn:M,locale:E,_originalDate:O},b=_.match(wY).map(function(R){var D=R[0];if(D==="p"||D==="P"){var C=VQ[D];return C(R,E.formatLong)}return R}).join("").match(vY).map(function(R){if(R==="''")return"'";var D=R[0];if(D==="'")return TY(R);var C=NQ[D];if(C)return LQ(R)&&db(R,e,String(t)),MQ(R)&&db(R,e,String(t)),C(T,R,E.localize,A);if(D.match(EY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return R}).join("");return b}function TY(t){var e=t.match(xY);return e?e[1].replace(_Y,"'"):t}function hb(t){return nn(1,arguments),xQ(t,Date.now())}function IY(){return Or(new Date,"yyyy-MM-dd")}function SY(t){if(!t)return new Date;if(t instanceof Date)return t;if(t!=null&&t.toDate)return t.toDate();if(typeof t=="string"&&t.includes("T")){const r=new Date(t);if(!isNaN(r.getTime()))return new Date(r.getFullYear(),r.getMonth(),r.getDate(),12,0,0)}const e=String(t).split("-").map(Number);if(e.length>=3&&!isNaN(e[0])&&!isNaN(e[1])&&!isNaN(e[2]))return new Date(e[0],e[1]-1,e[2],12,0,0);const n=new Date(t);return isNaN(n.getTime())?new Date:n}function Vo(t){if(!t)return IY();if(t!=null&&t.toDate&&(t=t.toDate()),typeof t=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;t=new Date(t)}if(t!=null&&t.seconds&&(t=new Date(t.seconds*1e3)),t.getUTCHours()===0&&t.getUTCMinutes()===0){const e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),r=String(t.getUTCDate()).padStart(2,"0");return`${e}-${n}-${r}`}return Or(t,"yyyy-MM-dd")}function IJ(t){if(!t)return new Date;let e;if(t!=null&&t.toDate)e=t.toDate();else{if(typeof t=="string")return SY(t);if(t instanceof Date)e=t;else if(t!=null&&t.seconds)e=new Date(t.seconds*1e3);else return new Date}const n=e.getUTCHours(),r=e.getUTCMinutes();if(n===0&&r===0){const l=e.getUTCFullYear(),u=e.getUTCMonth(),c=e.getUTCDate(),h=new Date(l,u,c,12,0,0);return isNaN(h.getTime())?new Date:h}const i=e.getFullYear(),s=e.getMonth(),o=e.getDate(),a=new Date(i,s,o,12,0,0);return isNaN(a.getTime())?new Date:a}const Ni=[{id:"docs",label:"Read the docs",description:"Learn how BENCH ONLY works",icon:jc,credits:25,link:"/docs",linkLabel:"Open Docs",color:"blue"},{id:"goal",label:"Set your first goal",description:"Pick a lift and set a target",icon:ua,credits:100,link:"/goals",linkLabel:"Go to Goals",color:"flame"},{id:"workout",label:"Complete a workout",description:"Log a workout with actual sets",icon:dr,credits:100,link:"/workouts/new",linkLabel:"New Workout",color:"green"},{id:"aiWorkout",label:"Generate an AI workout",description:"Let AI build a session for you",icon:ka,credits:50,link:"/workouts/generate",linkLabel:"Generate",color:"purple"},{id:"friend",label:"Add a friend",description:"Connect with a training partner",icon:Pq,credits:50,link:"/friends",linkLabel:"Find Friends",color:"cyan"}],bY=Ni.reduce((t,e)=>t+e.credits,0),fb={blue:"bg-blue-500/15 text-blue-400 border-blue-500/20",flame:"bg-flame-500/15 text-flame-400 border-flame-500/20",green:"bg-green-500/15 text-green-400 border-green-500/20",purple:"bg-purple-500/15 text-purple-400 border-purple-500/20",cyan:"bg-cyan-500/15 text-cyan-400 border-cyan-500/20"};function kY({embedded:t=!1}){const{user:e,userProfile:n,updateProfile:r,isGuest:i}=ti(),[s,o]=k.useState(null),[a,l]=k.useState({}),[u,c]=k.useState(null),[h,p]=k.useState(!1),[m,y]=k.useState(!1),[v,I]=k.useState(!1);k.useEffect(()=>{if(!e||i)return;const S=(n==null?void 0:n.onboardingChecklist)||{};o(S),_(S)},[e,n]);const _=async S=>{if(!e)return;const T={};try{T.docs=S.docs===!0?"claimed":"ready";const A=await we(ve(te(L,"goals"),ae("userId","==",e.uid),Wt(1)));T.goal=S.goal===!0?"claimed":A.size>0?"completed":"pending";const b=await we(ve(te(L,"workouts"),ae("userId","==",e.uid),ae("status","==","completed"),Wt(1)));T.workout=S.workout===!0?"claimed":b.size>0?"completed":"pending";const R=await we(ve(te(L,"workouts"),ae("userId","==",e.uid),ae("generatedByAI","==",!0),Wt(1)));T.aiWorkout=S.aiWorkout===!0?"claimed":R.size>0?"completed":"pending";const D=await yv.getFriends(e.uid),C=await yv.getSentRequests(e.uid);T.friend=S.friend===!0?"claimed":D.length>0||C.length>0?"completed":"pending"}catch(A){console.error("Checklist check error:",A),Ni.forEach(b=>{T[b.id]||(T[b.id]=S[b.id]===!0?"claimed":"pending")})}l(T),y(!0)},x=async(S,T)=>{if(!u){c(S);try{await Fp.add(e.uid,T);const A={...(n==null?void 0:n.onboardingChecklist)||{},[S]:!0};await r({onboardingChecklist:A,credits:((n==null?void 0:n.credits)??0)+T}),l(b=>({...b,[S]:"claimed"})),o(A)}catch(A){console.error("Claim error:",A)}finally{c(null)}}},E=async()=>{try{await r({onboardingChecklist:{...(n==null?void 0:n.onboardingChecklist)||{},dismissed:!0}}),o(S=>({...S,dismissed:!0})),I(!0),setTimeout(()=>I(!1),4e3)}catch(S){console.error("Dismiss error:",S)}};if(i||!n||!m||Ni.every(S=>a[S.id]==="claimed"))return null;if(!t&&(s!=null&&s.dismissed))return v?f.jsxs(Be.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-6 p-3 bg-iron-800/80 border border-iron-700 rounded-xl flex items-center gap-3",children:[f.jsx(uS,{className:"w-4 h-4 text-flame-400 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-iron-300 flex-1",children:["You can find the getting started checklist in ",f.jsx(at,{to:"/settings",className:"text-flame-400 hover:underline",children:"Settings"}),"."]}),f.jsx("button",{onClick:()=>I(!1),className:"text-iron-500 hover:text-iron-300",children:f.jsx(uu,{className:"w-4 h-4"})})]}):null;const M=Ni.filter(S=>a[S.id]==="claimed").length,O=Ni.filter(S=>a[S.id]==="claimed").reduce((S,T)=>S+T.credits,0);return f.jsx(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:f.jsxs("div",{className:"card-steel rounded-xl overflow-hidden border border-flame-500/20",children:[f.jsxs("button",{onClick:()=>p(!h),className:"w-full flex items-center gap-3 p-4 hover:bg-iron-800/30 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(uS,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsxs("h3",{className:"text-sm font-semibold text-iron-100",children:["Get Started  Earn ",bY," Credits"]}),f.jsxs("p",{className:"text-xs text-iron-500",children:[M,"/",Ni.length," complete  ",O," credits earned"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"relative w-8 h-8",children:[f.jsxs("svg",{className:"w-8 h-8 -rotate-90",viewBox:"0 0 32 32",children:[f.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-iron-800"}),f.jsx("circle",{cx:"16",cy:"16",r:"13",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:`${M/Ni.length*81.7} 81.7`,className:"text-flame-500 transition-all duration-500"})]}),f.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] font-bold text-iron-300",children:[M,"/",Ni.length]})]}),h?f.jsx(Td,{className:"w-4 h-4 text-iron-500"}):f.jsx(B2,{className:"w-4 h-4 text-iron-500"})]})]}),f.jsx(Ys,{children:!h&&f.jsx(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:f.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[Ni.map(S=>{var Y,ye;const T=a[S.id],A=S.icon,b=T==="claimed",C=T==="completed"||T==="ready";return f.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${b?"bg-iron-800/30 opacity-60":"bg-iron-800/50"}`,children:[f.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${b?"bg-green-500/20":`${((Y=fb[S.color])==null?void 0:Y.split(" ")[0])||"bg-iron-700"}`}`,children:b?f.jsx($i,{className:"w-4 h-4 text-green-400"}):f.jsx(A,{className:`w-4 h-4 ${((ye=fb[S.color])==null?void 0:ye.split(" ")[1])||"text-iron-400"}`})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:`text-sm font-medium ${b?"text-iron-500 line-through":"text-iron-200"}`,children:S.label}),f.jsx("p",{className:"text-[11px] text-iron-600",children:S.description})]}),b?f.jsxs("span",{className:"text-[10px] text-green-400/70 flex items-center gap-1 flex-shrink-0",children:[f.jsx(Aa,{className:"w-3 h-3"}),"+",S.credits]}):C?f.jsx("button",{onClick:()=>x(S.id,S.credits),disabled:!!u,className:"px-2.5 py-1.5 text-xs rounded-lg bg-flame-500/20 text-flame-400 border border-flame-500/30 hover:bg-flame-500/30 transition-colors flex items-center gap-1 flex-shrink-0",children:u===S.id?f.jsx(Ei,{className:"w-3 h-3 animate-spin"}):f.jsxs(f.Fragment,{children:[f.jsx(Aa,{className:"w-3 h-3"}),"Claim ",S.credits]})}):f.jsx(at,{to:S.link,className:"px-2.5 py-1.5 text-xs rounded-lg bg-iron-700/50 text-iron-400 hover:bg-iron-700 transition-colors flex-shrink-0",children:S.linkLabel})]},S.id)}),!t&&f.jsx("button",{onClick:E,className:"w-full text-center text-xs text-iron-600 hover:text-iron-400 py-2 transition-colors",children:"Dismiss checklist"})]})})})]})})}function AY({event:t,onClose:e,userContext:n}){const r=go(),{user:i}=ti(),[s,o]=k.useState(!1),[a,l]=k.useState("intro"),[u,c]=k.useState(null),h=k.useMemo(()=>t?t.buildWorkout(n):null,[t,n]);if(!t)return null;const p=async()=>{if(!(!i||s)){o(!0);try{const v=h,I=new Date;I.setHours(12,0,0,0);const{circuitExercises:_,...x}=v,E=await Pa.create(i.uid,{...x,date:I});e(),E!=null&&E.id&&r(`/workouts/${E.id}`)}catch(v){console.error("Error creating event workout:",v),alert("Something went wrong. Try again!")}finally{o(!1)}}},m=t.theme||{},y=(h==null?void 0:h.circuitExercises)||[];return f.jsx(Ys,{children:f.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs(Be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:v=>v.stopPropagation(),className:"w-full max-w-sm bg-iron-900 rounded-2xl border border-iron-800 overflow-hidden shadow-2xl max-h-[85vh] flex flex-col",children:[f.jsx("div",{className:`h-1.5 flex-shrink-0 ${m.buttonBg||"bg-flame-500"}`}),f.jsx(Ys,{mode:"wait",children:a==="intro"?f.jsxs(Be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-6 text-center",children:[f.jsx("div",{className:"text-5xl mb-4",children:t.emoji}),f.jsx("h2",{className:"text-xl font-display text-iron-50 mb-2",children:t.name}),f.jsx("p",{className:"text-sm text-iron-400 leading-relaxed mb-4",children:t.description}),t.dateLabel&&f.jsxs("p",{className:"text-xs text-iron-500 mb-6",children:["Available ",t.dateLabel]}),f.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[f.jsx(Aa,{className:"w-4 h-4 text-flame-400"}),f.jsxs("span",{className:"text-sm font-medium text-iron-200",children:[t.creditReward," credits"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-iron-800 rounded-lg",children:[f.jsx(fq,{className:"w-4 h-4 text-pink-400"}),f.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Profile badge"})]})]}),f.jsxs("button",{onClick:()=>l("preview"),className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${m.buttonBg||"bg-flame-500"} ${m.buttonHover||"hover:bg-flame-600"}`,children:["See the Workout",f.jsx(Es,{className:"w-5 h-5"})]}),f.jsx("button",{onClick:e,className:"mt-3 text-sm text-iron-500 hover:text-iron-300 transition-colors",children:"Maybe later"})]},"intro"):f.jsxs(Be.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex flex-col min-h-0",children:[f.jsxs("div",{className:"p-4 pb-3 flex-shrink-0",children:[f.jsxs("button",{onClick:()=>l("intro"),className:"flex items-center gap-1 text-xs text-iron-500 hover:text-iron-300 transition-colors mb-3",children:[f.jsx(hq,{className:"w-3.5 h-3.5"}),"Back"]}),f.jsxs("h2",{className:"text-lg font-display text-iron-50 flex items-center gap-2",children:[f.jsx("span",{children:t.emoji}),"Workout Preview"]}),f.jsxs("div",{className:"mt-3 p-3 bg-pink-500/10 border border-pink-500/20 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(dS,{className:"w-4 h-4 text-pink-400"}),f.jsx("span",{className:"text-xs font-semibold text-pink-300",children:"Circuit Format"})]}),f.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:"Do all 6 exercises in order = 1 round. Rest 3060s, then repeat. 3 rounds total. ~10 min."})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-2 space-y-2",children:[y.map((v,I)=>{const _=u===I,E=v.type==="time"?`${v.time}s hold`:`${v.reps} reps`;return f.jsxs("div",{className:"bg-iron-800/50 border border-iron-700/50 rounded-xl overflow-hidden",children:[f.jsxs("button",{onClick:()=>c(_?null:I),className:"w-full flex items-center gap-3 p-3 text-left hover:bg-iron-800/80 transition-colors",children:[f.jsx("span",{className:"w-6 h-6 rounded-full bg-pink-500/15 text-pink-400 text-xs font-bold flex items-center justify-center flex-shrink-0",children:I+1}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:v.name}),f.jsx("p",{className:"text-xs text-iron-500",children:E})]}),v.notes&&(_?f.jsx(B2,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}):f.jsx(Td,{className:"w-4 h-4 text-iron-500 flex-shrink-0"}))]}),f.jsx(Ys,{children:_&&v.notes&&f.jsx(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"overflow-hidden",children:f.jsx("p",{className:"px-3 pb-3 text-xs text-iron-400 leading-relaxed border-t border-iron-700/30 pt-2 mx-3",children:v.notes})})})]},I)}),f.jsxs("div",{className:"flex items-center gap-2 py-2 px-1",children:[f.jsx("div",{className:"flex-1 border-t border-iron-700/40"}),f.jsxs("span",{className:"text-[11px] text-iron-500 flex items-center gap-1.5",children:[f.jsx(dS,{className:"w-3 h-3"}),"Repeat 3"]}),f.jsx("div",{className:"flex-1 border-t border-iron-700/40"})]})]}),f.jsx("div",{className:"p-4 pt-3 flex-shrink-0 border-t border-iron-800/50",children:f.jsx("button",{onClick:p,disabled:s,className:`w-full py-3 rounded-xl font-semibold text-white transition-colors flex items-center justify-center gap-2 ${m.buttonBg||"bg-flame-500"} ${m.buttonHover||"hover:bg-flame-600"} disabled:opacity-50`,children:s?f.jsxs(f.Fragment,{children:[f.jsx(Ei,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):f.jsxs(f.Fragment,{children:[f.jsx(dr,{className:"w-5 h-5"}),"Let's Go"]})})})]},"preview")})]})})})}const Hm=[{id:"valentines-2026",name:"Valentine's Day Challenge",description:"A quick bodyweight workout you can do anywhere  no equipment needed. Scaled to your fitness level.",emoji:"",startDate:"2026-02-14",endDate:"2026-02-17",badgeIcon:"",badgeName:"Valentine's Day 2026  Completed the Valentine's Challenge",creditReward:200,dateLabel:"Feb 1416",theme:{bg:"bg-pink-500/10",border:"border-pink-500/25",accent:"text-pink-400",buttonBg:"bg-pink-500",buttonHover:"hover:bg-pink-600"},buildWorkout(t){var a,l;const e=(t==null?void 0:t.maxLifts)||{},n=Object.keys(e).length>0;let r="beginner";if(n){const u=((a=e["Bench Press"])==null?void 0:a.weight)||((l=e["Dumbbell Bench Press"])==null?void 0:l.weight)||0,c=Math.max(...Object.values(e).map(h=>h.weight||0),0);c>225||u>185?r="advanced":(c>135||u>95)&&(r="intermediate")}const i={beginner:{pushups:8,squats:12,lunges:8,burpees:4,plank:30,mountainClimbers:12},intermediate:{pushups:15,squats:20,lunges:12,burpees:8,plank:45,mountainClimbers:20},advanced:{pushups:25,squats:30,lunges:16,burpees:12,plank:60,mountainClimbers:30}}[r],s=[{name:"Push-ups",type:"bodyweight",notes:"Hands shoulder-width apart, body in a straight line from head to heels. Lower until chest nearly touches the floor, then push back up. Keep core tight throughout. Too hard? Do knee push-ups or incline push-ups with hands on a chair/counter.",reps:i.pushups},{name:"Bodyweight Squats",type:"bodyweight",notes:"Feet shoulder-width apart, toes slightly out. Sit back and down like sitting into a chair  hips below parallel if possible. Drive through your heels to stand. Too hard? Squat to a chair (sit down lightly, then stand back up) or do half squats.",reps:i.squats},{name:"Alternating Lunges",type:"bodyweight",notes:"Step forward with one leg, lower until both knees are at ~90. Front knee stays over the ankle, not past your toes. Push back to standing and alternate legs. Too hard? Do reverse lunges (step backward instead) or hold onto a wall for balance.",reps:`${i.lunges} total`},{name:"Burpees",type:"bodyweight",notes:"From standing: squat down, place hands on the floor, jump feet back into a plank, do a push-up, jump feet forward, then jump up with hands overhead. That's one rep. Too hard? Skip the push-up and/or the jump  just step feet back and forward instead.",reps:i.burpees},{name:"Mountain Climbers",type:"bodyweight",notes:"Start in a high plank position. Drive one knee toward your chest, then quickly switch legs  like running in place horizontally. Keep hips level and core braced. Too hard? Slow it down  step feet in one at a time instead of jumping.",reps:`${i.mountainClimbers} total`},{name:"Plank",type:"time",notes:`Hold for ${i.plank} seconds. Forearms on the ground, elbows under shoulders, body in a straight line. Squeeze your glutes and brace your abs  don't let your hips sag or pike up. Too hard? Drop to your knees or do the plank from your hands instead of forearms.`,time:i.plank}],o=[];for(let u=1;u<=3;u++)s.forEach((c,h)=>{const p=`set-r${u}-${h}`,m=c.type==="time";o.push({id:`ex-r${u}-${h}`,name:`Round ${u}  ${c.name}`,type:c.type,notes:u===1?c.notes:"",sets:[{id:p,...m?{prescribedTime:String(c.time),actualTime:""}:{prescribedReps:String(c.reps),actualWeight:"",actualReps:""},rpe:"",painLevel:0,completed:!1}]})}),u<3&&o.push({id:`ex-rest-${u}`,name:"Rest 3060s",type:"rest",notes:"Catch your breath. Shake it out. Get ready for the next round.",sets:[{id:`set-rest-${u}`,prescribedTime:"60",actualTime:"",rpe:"",painLevel:0,completed:!1}]});return{name:"Valentine's Day Challenge ",notes:`Happy Valentine's Day! This is a circuit workout  do all 6 exercises in order to complete 1 round, then rest and repeat. 3 rounds total, no equipment needed. Scaled for your level (${r}).`,eventId:"valentines-2026",workoutType:"strength",circuitExercises:s,exercises:o}}}];function zD(){const t=new Date;return Hm.find(e=>{const n=new Date(e.startDate+"T00:00:00"),r=new Date(e.endDate+"T00:00:00");return t>=n&&t<r})||null}function PY(t){return t!=null&&t.eventId&&Hm.find(e=>e.id===t.eventId)||null}function CY(t){var e;return(e=t==null?void 0:t.data)!=null&&e.eventId&&Hm.find(n=>n.id===t.data.eventId)||null}const pb=Object.freeze(Object.defineProperty({__proto__:null,SPECIAL_EVENTS:Hm,getActiveEvent:zD,getEventForFeedItem:CY,getEventForWorkout:PY},Symbol.toStringTag,{value:"Module"})),vy="Bench Only";function RY(t){k.useEffect(()=>(document.title=t?`${t} | ${vy}`:vy,()=>{document.title=vy}),[t])}function mb(){var ko,ie,Ue;RY("Today");const{user:t,userProfile:e,isGuest:n,isRealAdmin:r,impersonating:i,realUser:s}=ti(),o=go(),[a,l]=k.useState([]),[u,c]=k.useState([]),[h,p]=k.useState([]),[m,y]=k.useState([]),[v,I]=k.useState([]),[_,x]=k.useState({completed:0,total:0}),[E,V]=k.useState(new Set),[M,O]=k.useState(new Set),[S,T]=k.useState({}),[A,b]=k.useState([]),[R,D]=k.useState({}),[C,Y]=k.useState(new Set),[ye,De]=k.useState([]),[Ie,X]=k.useState(null),[ce,N]=k.useState(null),[ue,Te]=k.useState(null),[j,ot]=k.useState(!0),[mt,Fe]=k.useState(!0),[Ze,Rn]=k.useState(null),[Kt,rn]=k.useState(null),[Qt,Hn]=k.useState(!1),[ni,ri]=k.useState(null),[gr,Ai]=k.useState(!1),[ii,bo]=k.useState(""),[si,$r]=k.useState(""),[H,Se]=k.useState(!1),[ke,Ke]=k.useState(""),[Ve,F]=k.useState("general"),[q,ne]=k.useState(!1),[pe,xe]=k.useState(!1),ft=[{date:"Feb 2026",title:"Workout Sharing",description:"Share workouts with friends. Preview the full exercise breakdown before saving, and optionally have AI adjust the weights to match your training level.",tag:"Social"},{date:"Feb 2026",title:"Exercise How-To Info",description:"AI-generated exercises now include form cues, key instructions, and substitution suggestions. Tap the exercise name to view, plus search YouTube without leaving the app.",tag:"AI"},{date:"Feb 2026",title:"Feed Visibility Controls",description:"Choose who sees your activity  public, friends only, group only, or private. Group workouts show with cyan styling in the feed.",tag:"Social"},{date:"Feb 2025",title:"Form Check Overhaul",description:"Movement quality scores, injury risk detection with severity levels, and a focus drill with a coaching cue for your next session.",tag:"AI"},{date:"Feb 2025",title:"Smarter Video Analysis",description:"Frame extraction now skips your setup and rest to focus on the actual lift. Drag-and-drop upload with video preview.",tag:"UX"},{date:"Feb 2025",title:"RPE Guides",description:"RPE explainers on the workout generator and tooltips on generated sets so you always know what the numbers mean.",tag:"UX"},{date:"Feb 2025",title:"Human Trainer Workouts",description:"Request a custom workout built by a real trainer, or send an existing workout for expert review.",tag:"New"},{date:"Feb 2025",title:"AI Coach Personalities",description:"Choose your coaching style in Settings  Coach, Drill Sergeant, Gym Bro, Sports Scientist, or Comedy Coach.",tag:"AI"},{date:"Feb 2025",title:"Smarter AI Chat",description:"Personalized greetings, full set-by-set workout data for pain diagnosis, and dynamic quick actions.",tag:"AI"},{date:"Feb 2025",title:"Oura Ring Integration",description:"Connect your Oura Ring to feed sleep, readiness, and recovery scores into AI workout generation.",tag:"Integration"},{date:"Feb 2025",title:"Gift Credits to Friends",description:"Send credits to friends from Settings. Search your friends list and pick an amount.",tag:"Social"},{date:"Feb 2025",title:"Premium Model for Everyone",description:"GPT-4o is now available to all users at 100 credits per use.",tag:"AI"},{date:"Feb 2025",title:"Smarter Exercise Input",description:"New autocomplete when creating workouts. Type to search, and new exercises are saved for next time.",tag:"UX"},{date:"Jan 2025",title:"Programs & Scheduling",description:"Generate multi-week training programs. Calendar scheduling with daily workout targets.",tag:"Core"},{date:"Jan 2025",title:"Friends System",description:"Add friends, see their activity in your feed, and control who sees your workouts.",tag:"Social"}],gt=(()=>{const z=parseFloat(ii),he=parseInt(si);return!z||!he||he<1||he>30?null:he===1?z:z*(1+he/30)})(),yn=k.useMemo(()=>gt?[{reps:1,pct:100},{reps:2,pct:97},{reps:3,pct:94},{reps:5,pct:89},{reps:8,pct:81},{reps:10,pct:75},{reps:12,pct:69}].map(z=>({...z,weight:Math.round(gt*z.pct/100)})):null,[gt]),yt=new Date,sn=yt.getHours(),yr=sn<12?"Good morning":sn<17?"Good afternoon":"Good evening",dn=((ko=e==null?void 0:e.displayName)==null?void 0:ko.split(" ")[0])||((ie=t==null?void 0:t.displayName)==null?void 0:ie.split(" ")[0])||"",oi=Vo(yt),Ua=Or(yt,"EEEE").toLowerCase();k.useEffect(()=>{t&&Pi()},[t]);const Pi=async()=>{try{if(n){Fe(!1);return}const z=gy(yt,{weekStartsOn:1}),he=ab(yt,{weekStartsOn:1}),[G,_e,Je,tt,Vt]=await Promise.all([Pa.getByUser(t.uid,50).catch(()=>[]),zc.getByUser(t.uid).catch(()=>[]),g_.getByUser(t.uid).catch(()=>[]),zc.getPendingReviews(t.uid).catch(()=>[]),m_.getByUser(t.uid).catch(()=>[])]),Ot=G.filter(oe=>{var Me;const Ae=(Me=oe.date)!=null&&Me.toDate?oe.date.toDate():new Date(oe.date);return Vo(Ae)===oi});l(Ot);const Yt=_e.filter(oe=>{var Ae;try{const Me=(Ae=oe.date)!=null&&Ae.toDate?oe.date.toDate():new Date(oe.date);return Vo(Me)===oi}catch{return!1}});c(Yt);const Wr=Je.filter(oe=>{var Ae;if(oe.type==="recurring"){const Me=(oe.skippedDates||[]).includes(oi);return((Ae=oe.days)==null?void 0:Ae.includes(Ua))&&!Me}return oe.date===oi});p(Wr),y(tt),De(Object.values(Vt.filter(oe=>oe.status==="active").sort((oe,Ae)=>(oe.targetDate||"").localeCompare(Ae.targetDate||"")).reduce((oe,Ae)=>(oe[Ae.lift]||(oe[Ae.lift]=Ae),oe),{}))),Promise.all([na.getFeed(5),DD.getAll(),Bc.getUnread(t.uid),yv.getFriendSet(t.uid)]).then(([oe,Ae,Me,rt])=>{b((oe==null?void 0:oe.items)||[]);const Rr={};(Ae||[]).forEach(Nr=>{Rr[Nr.uid]=Nr}),D(Rr),I(Me||[]),Y(rt||new Set)}).catch(oe=>console.error("[TodayPage] Feed/notifications load failed:",oe));const Nn=new Set,Dn=new Set,jt={},Cr=G.filter(oe=>{var Me;const Ae=(Me=oe.date)!=null&&Me.toDate?oe.date.toDate():new Date(oe.date);if(Ae>=z&&Ae<=he){const rt=Vo(Ae);return oe.status==="completed"?Nn.add(rt):oe.status==="scheduled"?Dn.add(rt):Nn.add(rt),jt[rt]||(jt[rt]={type:"personal",id:oe.id}),!0}return!1}),Qn=_e.filter(oe=>{var Ae;try{const Me=(Ae=oe.date)!=null&&Ae.toDate?oe.date.toDate():new Date(oe.date);if(Me>=z&&Me<=he){const rt=Vo(Me);return oe.status==="completed"?Nn.add(rt):Dn.add(rt),jt[rt]||(jt[rt]={type:"group",id:oe.id}),!0}}catch{}return!1});Je.filter(oe=>oe.type==="recurring").forEach(oe=>{var Ae;for(let Me=0;Me<7;Me++){const rt=new Date(z);rt.setDate(rt.getDate()+Me);const Rr=Vo(rt),Nr=Or(rt,"EEEE").toLowerCase();rt<Bp(yt)&&!hb(rt)&&((Ae=oe.days)!=null&&Ae.includes(Nr))&&!(oe.skippedDates||[]).includes(Rr)&&Nn.add(Rr)}}),V(Nn),O(Dn),T(jt);const vn=Je.filter(oe=>oe.type==="recurring").reduce((oe,Ae)=>{var Me;return oe+(((Me=Ae.days)==null?void 0:Me.length)||0)},0);x({completed:Nn.size,total:Math.max(vn,Nn.size)});const Vn=new Date(yt);Vn.setHours(23,59,59,999);const tr=[];G.forEach(oe=>{var Me;if(oe.status!=="scheduled")return;const Ae=(Me=oe.date)!=null&&Me.toDate?oe.date.toDate():new Date(oe.date);Ae>Vn&&tr.push({...oe,_date:Ae,_type:"personal"})}),_e.forEach(oe=>{var Me;if(oe.status==="completed")return;const Ae=(Me=oe.date)!=null&&Me.toDate?oe.date.toDate():new Date(oe.date);Ae>Vn&&tr.push({...oe,_date:Ae,_type:"group"})}),tr.sort((oe,Ae)=>oe._date-Ae._date),Te(tr[0]||null);try{const oe=await Cf.getActive(t.uid);ot(oe.length>0);let Ae=!1;for(const Me of oe){const rt=Cf.getProgramDay(Me,yt);if(rt){X(rt),Ae=!0;break}}if(!Ae)for(let Me=1;Me<=14;Me++){const rt=gQ(yt,Me);for(const Rr of oe){const Nr=Cf.getProgramDay(Rr,rt);if(Nr){N({...Nr,date:rt}),Me=15;break}}}}catch(oe){console.error("Error loading program day:",oe)}}catch(z){console.error("Error loading today data:",z)}finally{Fe(!1)}},ls=async z=>{try{await zc.approveReview(z),y(he=>he.filter(G=>G.id!==z))}catch(he){console.error("Error approving:",he)}};k.useEffect(()=>{if(!t||n)return;const z=zD();if(!z)return;Rn(z),(async()=>{try{const{collection:G,query:_e,where:Je,getDocs:tt,limit:Vt}=await Ye(async()=>{const{collection:jt,query:Cr,where:Qn,getDocs:vn,limit:Vn}=await Promise.resolve().then(()=>t1);return{collection:jt,query:Cr,where:Qn,getDocs:vn,limit:Vn}},void 0),{db:Ot}=await Ye(async()=>{const{db:jt}=await Promise.resolve().then(()=>n1);return{db:jt}},void 0),Yt=_e(G(Ot,"workouts"),Je("userId","==",t.uid),Je("eventId","==",z.id),Vt(1)),Wr=await tt(Yt);if(Wr.size>0){const jt=Wr.docs[0];rn({id:jt.id,...jt.data()})}else sessionStorage.getItem(`event_dismissed_${z.id}`)||Hn(!0);const Nn=await Pa.getByUser(t.uid,20).catch(()=>[]),Dn={};Nn.filter(jt=>jt.status==="completed").forEach(jt=>{var Cr;(Cr=jt.exercises)==null||Cr.forEach(Qn=>{var vn;(vn=Qn.sets)==null||vn.forEach(Vn=>{const tr=parseFloat(Vn.actualWeight||Vn.prescribedWeight),oe=parseInt(Vn.actualReps||Vn.prescribedReps);if(tr>0&&oe>0&&oe<=30){const Ae=oe===1?tr:tr*(1+oe/30);(!Dn[Qn.name]||Ae>Dn[Qn.name].weight)&&(Dn[Qn.name]={weight:Math.round(Ae)})}})})}),ri({maxLifts:Dn})}catch(G){console.error("Event check error:",G)}})()},[t]);const us=a.length>0||u.length>0||h.length>0||Ie;a.length>0&&a.every(z=>z.status==="completed"||z.status!=="scheduled");const Kn=async()=>{if(!(!ke.trim()||!t)){ne(!0);try{const{collection:z,addDoc:he,serverTimestamp:G}=await Ye(async()=>{const{collection:Je,addDoc:tt,serverTimestamp:Vt}=await Promise.resolve().then(()=>t1);return{collection:Je,addDoc:tt,serverTimestamp:Vt}},void 0),{db:_e}=await Ye(async()=>{const{db:Je}=await Promise.resolve().then(()=>n1);return{db:Je}},void 0);await he(z(_e,"feedback"),{userId:t.uid,userName:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Unknown",category:Ve,message:ke.trim(),status:"new",createdAt:G()}),Ke(""),xe(!0),setTimeout(()=>xe(!1),3e3)}catch(z){console.error("Failed to submit feedback:",z),alert("Failed to send feedback. Please try again.")}finally{ne(!1)}}};return mt?f.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:f.jsxs("div",{className:"animate-pulse space-y-6",children:[f.jsx("div",{className:"h-8 bg-iron-800 rounded-lg w-2/3"}),f.jsx("div",{className:"h-48 bg-iron-800 rounded-2xl"}),f.jsx("div",{className:"h-24 bg-iron-800 rounded-xl"})]})}):f.jsxs("div",{className:"max-w-2xl mx-auto pb-24 overflow-x-hidden",children:[f.jsxs(Be.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[f.jsx("p",{className:"text-iron-500 text-sm",children:Or(yt,"EEEE, MMMM d")}),f.jsxs("h1",{className:"text-3xl font-display text-iron-50",children:[yr,dn?`, ${dn}`:""]})]}),f.jsx(kY,{}),Ze&&(()=>{const z=Ze.theme||{},he=(Kt==null?void 0:Kt.status)==="completed";return f.jsx(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:f.jsx("div",{className:`card-steel p-4 rounded-xl border ${z.border||"border-flame-500/20"} ${z.bg||"bg-flame-500/5"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-3xl",children:Ze.emoji}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"text-sm font-semibold text-iron-100",children:Ze.name}),f.jsxs("p",{className:"text-xs text-iron-500",children:[he?"Completed! Badge earned + 200 credits":Kt?"In progress  tap to continue":`${Ze.creditReward} credits + profile badge`,Ze.dateLabel&&!he&&f.jsxs(f.Fragment,{children:["  ",Ze.dateLabel]})]})]}),he?f.jsx("span",{className:"text-2xl",children:""}):Kt?f.jsx(at,{to:`/workouts/${Kt.id}`,className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${z.buttonBg||"bg-flame-500"} ${z.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Continue"}):f.jsx("button",{onClick:()=>Hn(!0),className:`px-3 py-1.5 text-xs rounded-lg font-medium text-white ${z.buttonBg||"bg-flame-500"} ${z.buttonHover||"hover:bg-flame-600"} transition-colors`,children:"Start"})]})})})})(),f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[f.jsx(Aa,{className:"w-3.5 h-3.5 text-flame-400"}),"Today's Workout"]}),u.map(z=>{var he;return f.jsx(at,{to:`/workouts/group/${z.id}`,className:"card-steel p-5 mb-3 border-cyan-500/20 hover:border-cyan-500/40 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/10 flex items-center justify-center flex-shrink-0",children:z.status==="completed"?f.jsx($i,{className:"w-7 h-7 text-green-400"}):f.jsx(ca,{className:"w-7 h-7 text-cyan-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name}),f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-cyan-500/20 text-cyan-400 rounded-full flex-shrink-0",children:"Group"})]}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[((he=z.exercises)==null?void 0:he.length)||0," exercises",z.status==="completed"&&"  Completed"]})]}),f.jsx(Es,{className:"w-5 h-5 text-iron-600"})]})},z.id)}),a.map(z=>{var Vt;const he=z.status==="completed"||z.status!=="scheduled",G=!!z.programId,_e=he?"border-green-500/20 hover:border-green-500/40":G?"border-purple-500/20 hover:border-purple-500/40":"border-flame-500/20 hover:border-flame-500/40",Je=he?"bg-green-500/10":G?"bg-purple-500/10":"bg-flame-500/10",tt=he?"text-green-400":G?"text-purple-400":"text-flame-400";return f.jsx(at,{to:`/workouts/${z.id}`,className:`card-steel p-5 mb-3 transition-colors block ${_e}`,children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${Je}`,children:he?f.jsx($i,{className:"w-7 h-7 text-green-400"}):f.jsx(dr,{className:`w-7 h-7 ${tt}`})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[z.workoutType==="cardio"?`${z.duration} min`:`${((Vt=z.exercises)==null?void 0:Vt.length)||0} exercises`,he&&"  Completed",G&&!he&&"  Program"]})]}),f.jsx(Es,{className:"w-5 h-5 text-iron-600"})]})},z.id)}),h.length>0&&u.length===0&&a.length===0&&f.jsx("div",{className:"space-y-3",children:h.map(z=>f.jsx("div",{className:"card-steel p-5 border-emerald-500/20",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(Iq,{className:"w-7 h-7 text-emerald-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:z.name||"Scheduled Activity"}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:["Recurring",z.duration&&`  ${z.duration} min`]})]})]})},z.id))}),Ie&&!a.some(z=>z.programId===Ie.programId)&&f.jsx(at,{to:`/programs/${Ie.programId}`,className:"card-steel p-5 border-amber-500/20 hover:border-amber-500/40 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(ua,{className:"w-7 h-7 text-amber-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:"font-semibold text-lg text-iron-100 truncate",children:Ie.label}),f.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-amber-500/20 text-amber-400 flex-shrink-0",children:Ie.type})]}),f.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:[Ie.programName,"  Wk ",Ie.weekNumber,"  ",Ie.phase]}),f.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:[Ie.primaryLift,": ",Ie.primaryScheme," @ ",Ie.intensity]})]}),f.jsx("div",{className:"flex items-center gap-1 text-flame-400 flex-shrink-0",children:f.jsx(ka,{className:"w-4 h-4"})})]})}),!Ie&&ce&&f.jsx(at,{to:`/programs/${ce.programId}`,className:"card-steel p-4 border-iron-700/50 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(U2,{className:"w-5 h-5 text-amber-400/70"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",Or(ce.date,"EEEE")]}),f.jsxs("p",{className:"text-sm font-medium text-iron-200 truncate",children:[ce.label,f.jsxs("span",{className:"ml-1.5 text-xs text-iron-500 font-normal",children:[ce.primaryLift,": ",ce.primaryScheme," @ ",ce.intensity]})]}),f.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[ce.programName,"  Wk ",ce.weekNumber,"  ",ce.phase]})]}),f.jsx(Op,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!us&&ue&&f.jsx(at,{to:ue._type==="group"?`/workouts/group/${ue.id}`:`/workouts/${ue.id}`,className:"card-steel p-4 mb-3 border-iron-700/50 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${ue._type==="group"?"bg-cyan-500/10":"bg-flame-500/10"}`,children:ue._type==="group"?f.jsx(ca,{className:"w-5 h-5 text-cyan-400"}):f.jsx(dr,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs text-iron-500 mb-0.5",children:["Up Next  ",Or(ue._date,"EEEE")]}),f.jsx("p",{className:"text-sm font-medium text-iron-200 truncate",children:ue.name||"Scheduled Workout"}),f.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:[ue._type==="group"?"Group workout":`${((Ue=ue.exercises)==null?void 0:Ue.length)||0} exercises`,ue.workoutType==="cardio"&&ue.duration?`  ${ue.duration} min`:""]})]}),f.jsx(Op,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]})}),!us&&f.jsxs("div",{className:"card-steel p-8 text-center border-dashed border-iron-700",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-iron-800 flex items-center justify-center mx-auto mb-4",children:f.jsx(dr,{className:"w-8 h-8 text-iron-600"})}),f.jsx("h3",{className:"text-lg font-display text-iron-200 mb-1",children:"Nothing scheduled today"}),f.jsx("p",{className:"text-sm text-iron-500 mb-6",children:"Generate a workout with AI or log one manually."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-center",children:[f.jsxs(at,{to:"/workouts/generate",className:"btn-primary flex items-center gap-2",children:[f.jsx(ka,{className:"w-4 h-4"}),"Generate with AI"]}),f.jsxs(at,{to:"/workouts/new",className:"btn-secondary flex items-center gap-2",children:[f.jsx(Zx,{className:"w-4 h-4"}),"Create Workout"]})]})]})]}),m.length>0&&f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[f.jsxs("h3",{className:"text-xs text-amber-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[f.jsx(jp,{className:"w-3.5 h-3.5"}),"Needs Your Review"]}),f.jsx("div",{className:"space-y-2",children:m.slice(0,3).map(z=>f.jsxs("div",{className:"card-steel p-3 border-amber-500/20 bg-amber-500/5 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(jp,{className:"w-5 h-5 text-amber-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:z.name||"Group Workout"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Coach logged for you"})]}),f.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[f.jsx("button",{onClick:()=>ls(z.id),"aria-label":"Approve review",className:"p-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors",children:f.jsx(kq,{className:"w-4 h-4"})}),f.jsx(at,{to:`/workouts/group/${z.id}`,"aria-label":"View review details",className:"p-2 bg-iron-800 hover:bg-iron-700 text-iron-300 rounded-lg transition-colors",children:f.jsx(Es,{className:"w-4 h-4"})})]})]},z.id))})]}),v.length>0&&f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-cyan-400 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Rl,{className:"w-3.5 h-3.5"}),"New Activity (",v.length,")"]}),f.jsx("button",{onClick:async()=>{await Bc.markAllAsRead(t.uid),I([])},className:"text-xs text-iron-500 hover:text-iron-300",children:"Dismiss all"})]}),f.jsx("div",{className:"space-y-2",children:v.slice(0,3).map(z=>f.jsxs(at,{to:"/feed",onClick:()=>Bc.markAsRead(z.id),className:"card-steel p-3 border-cyan-500/20 bg-cyan-500/5 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Rl,{className:"w-5 h-5 text-cyan-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-sm font-medium text-iron-100 truncate",children:[z.fromUserName||"Someone"," commented on your ",z.feedType==="workout"?"workout":z.feedType==="group_workout"?"group workout":"activity"]}),f.jsxs("p",{className:"text-xs text-iron-500 truncate",children:['"',z.commentText,'"']})]}),f.jsx(Es,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},z.id))})]}),f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(yq,{className:"w-3.5 h-3.5 text-flame-400"}),"This Week"]}),f.jsx(at,{to:"/calendar",className:"text-xs text-flame-400 hover:text-flame-300",children:"Calendar "})]}),f.jsxs("div",{className:"card-steel p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("span",{className:"text-sm text-iron-400",children:[_.completed," workout",_.completed!==1?"s":""," completed"]}),f.jsxs("span",{className:"text-sm font-medium text-flame-400",children:[Or(gy(yt,{weekStartsOn:1}),"MMM d"),"  ",Or(ab(yt,{weekStartsOn:1}),"MMM d")]})]}),f.jsx("div",{className:"flex gap-2",children:["M","T","W","T","F","S","S"].map((z,he)=>{const G=new Date(gy(yt,{weekStartsOn:1}));G.setDate(G.getDate()+he);const _e=Vo(G),Je=hb(G),tt=G<Bp(yt)&&!Je,Vt=E.has(_e),Ot=M.has(_e),Yt=S[_e],Wr=!Vt&&!Ot,Nn=()=>{Yt?Yt.type==="group"?o(`/workouts/group/${Yt.id}`):o(`/workouts/${Yt.id}`):Wr&&!tt&&o(`/workouts/generate?date=${_e}`)};return f.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1.5",children:[f.jsx("span",{className:`text-xs font-medium ${Je?"text-flame-400":"text-iron-600"}`,children:z}),f.jsxs("button",{onClick:Nn,"aria-label":`${Or(G,"EEEE d")}${Vt?", completed":Ot?", scheduled":""}`,className:`w-8 h-8 rounded-lg flex flex-col items-center justify-center text-xs font-medium transition-colors relative ${Je?Vt?"bg-green-500/20 text-green-400 ring-2 ring-flame-500/30":"bg-flame-500/20 text-flame-400 ring-2 ring-flame-500/30":Vt?"bg-green-500/20 text-green-400":Ot?"bg-cyan-500/10 text-cyan-400 ring-1 ring-cyan-500/30":tt?"bg-iron-800/50 text-iron-600":"bg-iron-800/30 text-iron-600"} ${Yt||Wr?"cursor-pointer hover:ring-2 hover:ring-flame-500/30":"cursor-default"}`,children:[Or(G,"d"),Vt&&f.jsx($i,{className:"w-2.5 h-2.5 absolute -bottom-0.5"})]})]},he)})})]})]}),ye.length>0?f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(ua,{className:"w-3.5 h-3.5 text-flame-400"}),"Goals"]}),f.jsx(at,{to:"/goals",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),f.jsx("div",{className:"space-y-2",children:ye.slice(0,3).map(z=>{const he=parseFloat(z.currentValue)||parseFloat(z.currentWeight)||0,G=parseFloat(z.targetValue)||parseFloat(z.targetWeight)||0,_e=parseFloat(z.startValue)||parseFloat(z.startWeight)||0,Je=G>_e?Math.min(100,Math.round((he-_e)/(G-_e)*100)):0,tt=z.metricType==="weight"?"lbs":z.metricType==="reps"?"reps":"sec";return f.jsx(at,{to:"/goals",className:"card-steel p-3 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-sm font-medium text-iron-200 truncate",children:z.lift}),f.jsxs("span",{className:"text-xs text-iron-500",children:[he,"/",G," ",tt]})]}),f.jsx("div",{className:"w-full h-1.5 bg-iron-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-flame-500 rounded-full transition-all",style:{width:`${Math.max(2,Je)}%`}})})]})},z.id)})})]}):!mt&&f.jsx(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:f.jsxs(at,{to:"/goals",className:"card-steel p-4 flex items-center gap-3 hover:border-iron-600 transition-colors block",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/10 flex items-center justify-center flex-shrink-0",children:f.jsx(ua,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"Set a goal"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Track your progress toward a target"})]}),f.jsx(Es,{className:"w-4 h-4 text-iron-600"})]})}),f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:A.length>0?"mt-6":"",children:[f.jsxs("button",{onClick:()=>Se(!H),"aria-expanded":H,"aria-label":"What's New  latest features and updates",className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(_q,{className:"w-5 h-5 text-purple-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"What's New"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Latest features and updates"})]}),f.jsx(Td,{className:`w-4 h-4 text-iron-500 transition-transform ${H?"rotate-180":""}`})]}),H&&f.jsx(Be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 border-purple-500/10 max-h-80 overflow-y-auto",children:f.jsx("div",{className:"space-y-3",children:ft.map((z,he)=>f.jsxs("div",{className:`${he>0?"pt-3 border-t border-iron-800/50":""}`,children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-iron-800 text-iron-400",children:z.tag}),f.jsx("span",{className:"text-xs text-iron-600",children:z.date})]}),f.jsx("p",{className:"text-sm font-medium text-iron-200",children:z.title}),f.jsx("p",{className:"text-xs text-iron-500 mt-0.5",children:z.description})]},he))})})]}),f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-2",children:[f.jsxs("button",{onClick:()=>Ai(!gr),"aria-expanded":gr,"aria-label":"1RM Calculator  estimate your one-rep max",className:"card-steel p-4 w-full flex items-center gap-3 hover:border-iron-600 transition-colors",children:[f.jsx("div",{className:"w-9 h-9 rounded-lg bg-flame-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(mq,{className:"w-5 h-5 text-flame-400"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("p",{className:"text-sm font-medium text-iron-200",children:"1RM Calculator"}),f.jsx("p",{className:"text-xs text-iron-500",children:"Estimate your one-rep max"})]}),f.jsx(Td,{className:`w-4 h-4 text-iron-500 transition-transform ${gr?"rotate-180":""}`})]}),gr&&f.jsxs(Be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card-steel mt-1 p-4 space-y-4 border-flame-500/10",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Weight (lbs)"}),f.jsx("input",{type:"number",inputMode:"decimal",value:ii,onChange:z=>bo(z.target.value),placeholder:"225",className:"input-field w-full text-base py-2.5"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Reps"}),f.jsx("input",{type:"number",inputMode:"numeric",value:si,onChange:z=>$r(z.target.value),placeholder:"5",min:"1",max:"30",className:"input-field w-full text-base py-2.5"})]})]}),gt&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"p-4 bg-gradient-to-br from-flame-500/20 to-flame-600/10 rounded-xl text-center",children:[f.jsx("p",{className:"text-xs text-iron-400 mb-0.5",children:"Estimated 1RM"}),f.jsxs("p",{className:"text-3xl font-display text-flame-400",children:[Math.round(gt)," ",f.jsx("span",{className:"text-base text-iron-400",children:"lbs"})]})]}),f.jsxs("div",{className:"bg-iron-800/50 rounded-lg overflow-hidden",children:[f.jsxs("div",{className:"grid grid-cols-3 text-xs font-medium text-iron-500 uppercase tracking-wider",children:[f.jsx("div",{className:"px-2 py-2 text-center",children:"Reps"}),f.jsx("div",{className:"px-2 py-2 text-center",children:"%1RM"}),f.jsx("div",{className:"px-2 py-2 text-center",children:"Weight"})]}),yn.map(({reps:z,pct:he,weight:G})=>f.jsxs("div",{className:`grid grid-cols-3 text-sm ${z===1?"bg-flame-500/10":""}`,children:[f.jsx("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-400"}`,children:z}),f.jsxs("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-500"}`,children:[he,"%"]}),f.jsxs("div",{className:`px-2 py-2 text-center ${z===1?"text-flame-400 font-medium":"text-iron-200"}`,children:[G," lbs"]})]},z))]})]})]})]}),(()=>{const z=new Set((e==null?void 0:e.groups)||[]),he=A.filter(G=>{if(G.userId===(t==null?void 0:t.uid))return!0;const _e=G.visibility||"public";return _e==="private"?!1:_e==="friends"?C.has(G.userId):_e==="group"?G.groupId&&z.has(G.groupId):!0});return he.length>0?f.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-xs text-iron-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(ca,{className:"w-3.5 h-3.5"}),"Recent Activity"]}),f.jsx(at,{to:"/feed",className:"text-xs text-flame-400 hover:text-flame-300",children:"View all "})]}),f.jsx("div",{className:"card-steel divide-y divide-iron-800",children:he.slice(0,4).map(G=>{var Nn,Dn,jt,Cr,Qn,vn,Vn,tr,oe,Ae;const _e=R[G.userId],Je=(_e==null?void 0:_e.displayName)||"Someone",tt=G.type==="group_workout"||G.groupId||((Nn=G.data)==null?void 0:Nn.groupId),Ot=G.userId===(t==null?void 0:t.uid)&&((Dn=G.data)==null?void 0:Dn.workoutId)?tt?`/workouts/group/${G.data.workoutId}`:`/workouts/${G.data.workoutId}`:null,Yt=Ot?at:"div",Wr=Ot?{to:Ot}:{};return f.jsxs(Yt,{...Wr,className:`flex items-center gap-3 p-3${Ot?" hover:bg-iron-800/50 transition-colors":""}`,children:[f.jsx(at,{to:`/profile/${G.userId}`,className:"w-8 h-8 rounded-full bg-iron-800 flex items-center justify-center text-iron-400 text-xs flex-shrink-0 overflow-hidden",children:_e!=null&&_e.photoURL?f.jsx("img",{src:_e.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover"}):f.jsx("span",{children:Je[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-sm text-iron-300 truncate",children:[f.jsx("span",{className:"text-iron-200 font-medium",children:Je})," ",tt?`completed their workout in ${((jt=G.data)==null?void 0:jt.groupName)||"a group"}`:G.type==="workout"?`completed ${((Cr=G.data)==null?void 0:Cr.name)||"a workout"}`:G.type==="goal_completed"?`achieved ${(Qn=G.data)==null?void 0:Qn.lift}`:G.type==="cardio"?`logged ${(vn=G.data)==null?void 0:vn.duration}min ${((Vn=G.data)==null?void 0:Vn.name)||"cardio"}`:G.type==="personal_record"?`hit a new PR on ${(tr=G.data)==null?void 0:tr.exercise}`:"was active",((oe=G.data)==null?void 0:oe.eventId)&&f.jsx(vq,{className:"w-3.5 h-3.5 text-pink-400 fill-pink-400 inline ml-1 -mt-0.5"})]}),f.jsxs("p",{className:"text-xs text-iron-600",children:[((Ae=G.createdAt)==null?void 0:Ae.toDate)&&Or(G.createdAt.toDate(),"EEE, h:mm a"),(G.type==="workout"||tt)&&(()=>{var rt,Rr;const Me=JK((rt=G.data)==null?void 0:rt.totalSets,(Rr=G.data)==null?void 0:Rr.duration);return Me?`  ${Me}`:""})()]})]}),Ot&&f.jsx(Es,{className:"w-4 h-4 text-iron-600 flex-shrink-0"})]},G.id)})})]}):null})(),!n&&f.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-6 card-steel p-4",children:[f.jsx("h3",{className:"text-sm font-semibold text-iron-300 mb-3",children:"Feedback & Bugs"}),f.jsx("div",{className:"flex gap-2 mb-2",children:["bug","feature","general"].map(z=>f.jsx("button",{onClick:()=>F(z),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors capitalize ${Ve===z?z==="bug"?"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":z==="feature"?"border-blue-500/50 bg-blue-500/10 text-blue-400 font-semibold":"border-flame-500/50 bg-flame-500/10 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:z},z))}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("textarea",{value:ke,onChange:z=>Ke(z.target.value),placeholder:Ve==="bug"?"Describe the bug...":Ve==="feature"?"What would you like to see?":"Any thoughts or feedback...",rows:2,className:"flex-1 input-field text-sm resize-none"}),f.jsx("button",{onClick:Kn,disabled:!ke.trim()||q,"aria-label":q?"Sending feedback":pe?"Feedback sent":"Send feedback",className:"self-end px-3 py-2 rounded-lg bg-flame-500 hover:bg-flame-600 disabled:bg-iron-700 disabled:text-iron-500 text-white transition-colors flex-shrink-0",children:q?f.jsx(Ei,{className:"w-4 h-4 animate-spin"}):pe?f.jsx($i,{className:"w-4 h-4"}):f.jsx($2,{className:"w-4 h-4"})})]}),pe&&f.jsx("p",{className:"text-xs text-green-400 mt-1.5",children:"Thanks for your feedback!"})]}),Qt&&Ze&&f.jsx(AY,{event:Ze,userContext:ni,onClose:()=>{Hn(!1),sessionStorage.setItem(`event_dismissed_${Ze.id}`,"1")}})]})}const NY=k.lazy(()=>Ye(()=>import("./NotFoundPage-BLruCPrw.js"),[])),DY=k.lazy(()=>Ye(()=>import("./DashboardPage-DKcEIga5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),VY=k.lazy(()=>Ye(()=>import("./WorkoutsPage-DCnHPS2s.js"),__vite__mapDeps([11,3,8,12,13,14,15,9,16,17,18]))),gb=k.lazy(()=>Ye(()=>import("./NewWorkoutPage-BG-AWiKT.js"),__vite__mapDeps([19,2,14,20,21,17]))),OY=k.lazy(()=>Ye(()=>import("./WorkoutDetailPage-MKcfNsDg.js"),__vite__mapDeps([22,2,23,24,25,9,15,16,17,26,14,13,27,12]))),jY=k.lazy(()=>Ye(()=>import("./GroupWorkoutPage-DKIegREb.js"),__vite__mapDeps([28,23,24,25,17,16,27,26,13,12,21]))),MY=k.lazy(()=>Ye(()=>import("./CalendarPage-Bh4gSKXL.js"),__vite__mapDeps([29,6,7,1,18,30,8]))),LY=k.lazy(()=>Ye(()=>import("./GroupsPage-BpHu8M2p.js"),__vite__mapDeps([31,12,32]))),FY=k.lazy(()=>Ye(()=>import("./GroupDetailPage-DMvuqKi6.js"),__vite__mapDeps([33,34,13,8,15,17,35,9,32,26,12]))),UY=k.lazy(()=>Ye(()=>import("./GroupBatchViewPage-BQ3oLXC9.js"),__vite__mapDeps([36,25,23,24,13]))),BY=k.lazy(()=>Ye(()=>import("./GoalsPage-CV1M1M_h.js"),__vite__mapDeps([37,18,9,17,38]))),zY=k.lazy(()=>Ye(()=>import("./ToolsPage-DG7G5xIW.js"),__vite__mapDeps([39,21,40,3]))),$Y=k.lazy(()=>Ye(()=>import("./HealthPage-CAmNnHJY.js"),__vite__mapDeps([41,2,3,5,4,42]))),WY=k.lazy(()=>Ye(()=>import("./UsagePage-D99G8CDK.js"),__vite__mapDeps([43,13,12,42,3]))),qY=k.lazy(()=>Ye(()=>import("./SettingsPage-DIMJOf0V.js"),__vite__mapDeps([44,2,45,34,46,47,48,40,12,24,17]))),GY=k.lazy(()=>Ye(()=>import("./AdminPage-GnonfWtt.js"),__vite__mapDeps([49,26,20,27,5,34,35,16,12,9,17,50,7,14,24]))),HY=k.lazy(()=>Ye(()=>import("./FeedPage-DhdoSqLc.js"),__vite__mapDeps([51,12,47,50,7,14,35,17,52,34]))),KY=k.lazy(()=>Ye(()=>import("./FriendsPage-Epeg83bb.js"),__vite__mapDeps([53,14,12,54]))),yb=k.lazy(()=>Ye(()=>import("./ProfilePage-mJVmwJa2.js"),__vite__mapDeps([55,48,54,14,12,1,6,50,7,52,8]))),QY=k.lazy(()=>Ye(()=>import("./GenerateWorkoutPage-BmclN8BH.js"),__vite__mapDeps([56,23,24,34,27,26,17,13]))),YY=k.lazy(()=>Ye(()=>import("./ProgramsPage-C-fXVLY_.js"),__vite__mapDeps([57,58,59,17]))),JY=k.lazy(()=>Ye(()=>import("./ProgramDetailPage-DF53_bRG.js"),__vite__mapDeps([60,58,38,14,30,18]))),XY=k.lazy(()=>Ye(()=>import("./DocsPage-CA4PqEkj.js"),__vite__mapDeps([61,1,24]))),ZY=k.lazy(()=>Ye(()=>import("./PrivacyPage-DDKuMhDj.js"),[])),eJ=k.lazy(()=>Ye(()=>import("./CoachesPage-DXpAycAx.js"),__vite__mapDeps([62,63]))),tJ=k.lazy(()=>Ye(()=>import("./OnboardingPage-3WLXM3wJ.js"),__vite__mapDeps([64,1,46]))),nJ=k.lazy(()=>Ye(()=>import("./TrainerPage-S7SlewZc.js"),__vite__mapDeps([65,63,14,9,26,66,17]))),rJ=k.lazy(()=>Ye(()=>import("./FormCheckPage-CqM-9qLh.js"),__vite__mapDeps([67,59,21,45,14,63,66,10,1])));function st(){return f.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:f.jsx("div",{className:"w-10 h-10 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})})}function iJ({children:t}){const{user:e,userProfile:n,loading:r,isGuest:i}=ti();return r?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"}),f.jsx("p",{className:"text-iron-400 font-medium",children:"Loading..."})]})}):e?!i&&n&&n.onboardingComplete===!1?f.jsx(zl,{to:"/onboarding",replace:!0}):t:f.jsx(zl,{to:"/login",replace:!0})}function sJ({children:t}){const{user:e,userProfile:n,loading:r,isGuest:i}=ti(),s=new URLSearchParams(window.location.search).has("preview");return r?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e?!s&&(i||(n==null?void 0:n.onboardingComplete)!==!1)?f.jsx(zl,{to:"/today",replace:!0}):t:f.jsx(zl,{to:"/login",replace:!0})}function oJ({children:t}){const{user:e,loading:n}=ti(),r=new URLSearchParams(window.location.search).has("preview");return n?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):e&&!r?f.jsx(zl,{to:"/",replace:!0}):t}function aJ(){const{user:t,loading:e,signInAsGuest:n}=ti();return k.useEffect(()=>{!e&&!t&&n()},[e,t,n]),e?f.jsx("div",{className:"min-h-screen bg-iron-950 flex items-center justify-center",children:f.jsx("div",{className:"w-12 h-12 border-4 border-flame-500 border-t-transparent rounded-full animate-spin"})}):t?f.jsx(zl,{to:"/today",replace:!0}):null}function lJ(){return f.jsxs(PM,{children:[f.jsx(We,{path:"/login",element:f.jsx(oJ,{children:f.jsx(mQ,{})})}),f.jsx(We,{path:"/guest",element:f.jsx(aJ,{})}),f.jsx(We,{path:"/docs",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(XY,{})})}),f.jsx(We,{path:"/privacy",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(ZY,{})})}),f.jsx(We,{path:"/coaches",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(eJ,{})})}),f.jsx(We,{path:"/onboarding",element:f.jsx(sJ,{children:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(tJ,{})})})}),f.jsxs(We,{path:"/",element:f.jsx(iJ,{children:f.jsx(cQ,{})}),children:[f.jsx(We,{index:!0,element:f.jsx(mb,{})}),f.jsx(We,{path:"today",element:f.jsx(mb,{})}),f.jsx(We,{path:"dashboard",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(DY,{})})}),f.jsx(We,{path:"workouts",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(VY,{})})}),f.jsx(We,{path:"workouts/group/:id",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(jY,{})})}),f.jsx(We,{path:"workouts/generate",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(QY,{})})}),f.jsx(We,{path:"workouts/new",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(gb,{})})}),f.jsx(We,{path:"workouts/:id/edit",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(gb,{})})}),f.jsx(We,{path:"workouts/:id",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(OY,{})})}),f.jsx(We,{path:"calendar",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(MY,{})})}),f.jsx(We,{path:"programs",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(YY,{})})}),f.jsx(We,{path:"programs/:id",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(JY,{})})}),f.jsx(We,{path:"groups",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(LY,{})})}),f.jsx(We,{path:"groups/:id",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(FY,{})})}),f.jsx(We,{path:"groups/:groupId/batch/:batchKey",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(UY,{})})}),f.jsx(We,{path:"goals",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(BY,{})})}),f.jsx(We,{path:"tools",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(zY,{})})}),f.jsx(We,{path:"form-check",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(rJ,{})})}),f.jsx(We,{path:"health",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx($Y,{})})}),f.jsx(We,{path:"feed",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(HY,{})})}),f.jsx(We,{path:"friends",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(KY,{})})}),f.jsx(We,{path:"profile/:userId",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(yb,{})})}),f.jsx(We,{path:"profile",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(yb,{})})}),f.jsx(We,{path:"usage",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(WY,{})})}),f.jsx(We,{path:"settings",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(qY,{})})}),f.jsx(We,{path:"trainer",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(nJ,{})})}),f.jsx(We,{path:"admin",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(GY,{})})})]}),f.jsx(We,{path:"*",element:f.jsx(k.Suspense,{fallback:f.jsx(st,{}),children:f.jsx(NY,{})})})]})}if("serviceWorker"in navigator){const t=()=>{navigator.serviceWorker.getRegistration().then(e=>{e&&e.update().catch(()=>{})})};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&t()}),setInterval(t,5*60*1e3),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}wy.createRoot(document.getElementById("root")).render(f.jsx(kd.StrictMode,{children:f.jsx(MM,{children:f.jsx(gN,{children:f.jsx(lJ,{})})})}));export{L as $,hq as A,iv as B,$i as C,Pq as D,jp as E,Es as F,Pe as G,wq as H,dr as I,dq as J,ua as K,at as L,yq as M,Aq as N,fq as O,Zx as P,m_ as Q,Tq as R,ka as S,kq as T,ca as U,we as V,ve as W,uu as X,te as Y,Aa as Z,Ye as _,cJ as a,pq as a$,ae as a0,Gt as a1,Wt as a2,Pa as a3,Mc as a4,Op as a5,mq as a6,nn as a7,gQ as a8,bi as a9,Iq as aA,SY as aB,g_ as aC,xJ as aD,J as aE,cz as aF,cS as aG,ZK as aH,xQ as aI,TJ as aJ,wQ as aK,jc as aL,xq as aM,Eq as aN,lS as aO,Rf as aP,Sp as aQ,dS as aR,fN as aS,Oe as aT,de as aU,pn as aV,Qe as aW,zo as aX,kd as aY,Vl as aZ,kY as a_,Bc as aa,na as ab,W2 as ac,JK as ad,Rl as ae,vq as af,DD as ag,Do as ah,hb as ai,Sq as aj,Qo as ak,gy as al,ab as am,Vo as an,mr as ao,dJ as ap,IY as aq,iQ as ar,y_ as as,eQ as at,Cf as au,Bp as av,MD as aw,gv as ax,gq as ay,Fp as az,go as b,uS as b0,ry as b1,sF as b2,tl as b3,yY as b4,Du as b5,Vj as b6,OD as b7,uJ as b8,Wp as b9,Yq as ba,TV as bb,t1 as bc,n1 as bd,yJ as be,wJ as bf,EJ as bg,Na as c,ti as d,Y2 as e,VD as f,zc as g,yv as h,Ei as i,f as j,U2 as k,B2 as l,Be as m,Td as n,Ys as o,_J as p,bf as q,k as r,$2 as s,F2 as t,RY as u,LD as v,Yo as w,r1 as x,IJ as y,Or as z};
