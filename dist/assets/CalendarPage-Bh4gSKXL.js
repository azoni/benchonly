const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-1OrUyFOO.js","assets/index-BV9Y_dbx.css"])))=>i.map(i=>d[i]);
import{G as re,d as be,b as Ne,r as d,_ as ve,a3 as ye,g as ke,aC as G,aH as E,Q as we,au as O,j as e,z as u,F as Se,aI as De,ai as w,P as Me,K as Ce,I as S,L as We,S as Ae,aA as Pe,an as c,av as X,C as $,U as J,O as Y,k as Ge,o as Ee,m as Z,X as ee,al as Oe,am as $e}from"./index-1OrUyFOO.js";import{b as se,s as Le,a as Te,i as Ue}from"./index-BJj5aekW.js";import{e as te}from"./index-CQhaOWXG.js";import{C as _e}from"./chevron-left-BTF9FLn7.js";import{i as ae}from"./index-Rl57QzwM.js";import{S as Ie}from"./skip-forward-9b5JSss2.js";import{e as Re}from"./index-Dn7o6Ot4.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=re("Palmtree",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35z",key:"epoumf"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=re("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);function ss(){const{user:m,isGuest:L}=be();Ne();const[h,T]=d.useState(new Date),[l,ne]=d.useState(new Date),[U,_]=d.useState([]),[I,R]=d.useState([]),[v,y]=d.useState([]),[V,B]=d.useState([]),[z,F]=d.useState([]),[H,ie]=d.useState([]),[ze,q]=d.useState(!0),[le,f]=d.useState(!1),[Fe,He]=d.useState("workout");d.useEffect(()=>{m&&D()},[m,h]);const D=async()=>{const s=se(h),a=te(h);try{if(L){const{getSampleWorkouts:g,SAMPLE_GOALS:A}=await ve(async()=>{const{getSampleWorkouts:j,SAMPLE_GOALS:P}=await import("./index-1OrUyFOO.js").then(b=>b.be);return{getSampleWorkouts:j,SAMPLE_GOALS:P}},__vite__mapDeps([0,1]));_(g()),R([]),y([]),B([]),F(A.filter(j=>j.status==="active")),q(!1);return}const[t,r,n,o,p,W]=await Promise.all([ye.getByDateRange(m.uid,s,a),ke.getByUser(m.uid),G.getByUser(m.uid),E.getByUser(m.uid,s,a),we.getByUser(m.uid),O.getActive(m.uid).catch(()=>[])]);_(t),R(r),y(n),B(o),F(p.filter(g=>g.status==="active")),ie(W)}catch(t){console.error("Error loading calendar data:",t)}finally{q(!1)}},oe=()=>{const s=Oe(se(h),{weekStartsOn:1}),a=$e(te(h),{weekStartsOn:1});return Re({start:s,end:a})},ce=s=>{const a=c(s);return z.find(t=>c(t.targetDate)===a)},K=s=>{const a=c(s);return z.find(t=>{var n;if(t.status!=="completed"||!t.completedAt)return!1;const r=(n=t.completedAt)!=null&&n.toDate?t.completedAt.toDate():new Date(t.completedAt);return c(r)===a})},Q=(s,a)=>(s.skippedDates||[]).includes(a),de=s=>{const a=c(s),t=u(s,"EEEE").toLowerCase(),r=ae(X(s))&&!w(s),n=U.some(i=>c(i.date)===a),o=I.some(i=>{try{return c(i.date)===a}catch{return!1}}),p=V.some(i=>i.date===a&&i.status==="vacation"),W=V.some(i=>i.date===a&&i.status==="missed"),g=v.filter(i=>{var N;return i.type==="recurring"?((N=i.days)==null?void 0:N.includes(t))&&!Q(i,a):i.date===a}),A=g.length>0,j=r&&g.some(i=>i.type==="recurring"),P=!!K(s);let b=null;for(const i of H){const N=O.getProgramDay(i,s);if(N){b=N;break}}return{hasWorkout:n,hasGroupWorkout:o,isVacation:p,isMissed:W,isScheduled:A,hasCompletedGoal:P,hasAutoCompleted:j,hasProgramDay:!!b,programDay:b}},me=()=>{const s=c(l);return U.filter(a=>c(a.date)===s)},xe=()=>{const s=c(l);return I.filter(a=>{try{return c(a.date)===s}catch{return!1}})},pe=()=>{const s=c(l),a=u(l,"EEEE").toLowerCase();return v.filter(t=>{var r;return t.type==="recurring"?(r=t.days)==null?void 0:r.includes(a):t.date===s}).map(t=>({...t,isSkipped:Q(t,s)}))},ue=async(s,a)=>{try{const t=v.find(n=>n.id===s),r=(t==null?void 0:t.skippedDates)||[];await G.update(s,{skippedDates:[...r,a]}),y(n=>n.map(o=>o.id===s?{...o,skippedDates:[...o.skippedDates||[],a]}:o))}catch(t){console.error("Error skipping schedule:",t)}},he=async(s,a)=>{try{const t=v.find(n=>n.id===s),r=(t==null?void 0:t.skippedDates)||[];await G.update(s,{skippedDates:r.filter(n=>n!==a)}),y(n=>n.map(o=>o.id===s?{...o,skippedDates:(o.skippedDates||[]).filter(p=>p!==a)}:o))}catch(t){console.error("Error unskipping schedule:",t)}},ge=async()=>{try{await E.log(m.uid,l,"vacation"),D(),f(!1)}catch(s){console.error("Error marking vacation:",s)}},fe=async()=>{try{await E.log(m.uid,l,"missed"),D(),f(!1)}catch(s){console.error("Error marking missed:",s)}},je=oe(),k=me(),M=xe(),C=pe(),x=(()=>{for(const s of H){const a=O.getProgramDay(s,l);if(a)return a}return null})();return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card-steel rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("button",{onClick:()=>T(s=>Le(s,1)),className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-plate transition-colors",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("h2",{className:"font-display text-xl text-iron-100",children:u(h,"MMMM yyyy")}),e.jsx("button",{onClick:()=>T(s=>Te(s,1)),className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-plate transition-colors",children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 border-b border-iron-800",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(s=>e.jsx("div",{className:"py-3 text-center text-xs font-medium text-iron-500 uppercase",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7",children:je.map((s,a)=>{var p;const t=de(s),r=ce(s),n=De(s,l),o=Ue(s,h);return e.jsx("button",{onClick:()=>ne(s),className:`aspect-square p-1 border-b border-r border-iron-800/50
                      transition-colors relative group
                      ${o?"":"opacity-30"}
                      ${n?"bg-flame-500/10":"hover:bg-iron-800/50"}
                      ${r?"ring-1 ring-inset ring-purple-500/50":""}`,children:e.jsxs("div",{className:`w-full h-full rounded-plate flex flex-col items-center justify-center
                        ${w(s)?"ring-2 ring-flame-500/50":""}`,children:[e.jsx("span",{className:`text-sm font-medium
                          ${n?"text-flame-400":"text-iron-300"}
                          ${w(s)?"text-flame-400":""}
                          ${r?"text-purple-400":""}`,children:u(s,"d")}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[t.hasWorkout&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),t.hasGroupWorkout&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500",title:"Group Workout"}),t.hasAutoCompleted&&!t.hasWorkout&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500/60",title:"Auto-completed"}),t.isScheduled&&!t.hasWorkout&&!t.hasAutoCompleted&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-flame-500/50"}),t.hasProgramDay&&!t.hasWorkout&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500",title:(p=t.programDay)==null?void 0:p.label}),t.isVacation&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),t.isMissed&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),r&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-500",title:`Goal: ${r.lift}`}),t.hasCompletedGoal&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500",title:"Goal Achieved!"})]})]})},a)})}),e.jsxs("div",{className:"flex flex-wrap gap-4 p-4 border-t border-iron-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Completed"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/60"}),"Auto-done"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Group"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-flame-500/50"}),"Scheduled"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),"Program"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Vacation"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Missed"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Goal Deadline"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Goal Achieved"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-iron-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),"Program"]})]})]})}),e.jsxs("div",{className:"card-steel rounded-xl",children:[e.jsx("div",{className:"p-4 border-b border-iron-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-iron-500",children:u(l,"EEEE")}),e.jsx("h3",{className:"font-display text-2xl text-iron-100",children:u(l,"MMMM d")})]}),e.jsx("button",{onClick:()=>f(!0),className:`p-2 bg-flame-500/10 text-flame-400 rounded-plate
                  hover:bg-flame-500/20 transition-colors`,children:e.jsx(Me,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[x&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-3.5 h-3.5"}),"Program"]}),e.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-plate",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-plate bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(S,{className:"w-4 h-4 text-amber-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-100",children:x.label}),e.jsxs("p",{className:"text-xs text-iron-500",children:[x.programName," · Wk ",x.weekNumber," · ",x.phase]}),e.jsxs("p",{className:"text-xs text-amber-400 mt-0.5",children:[x.primaryLift,": ",x.primaryScheme," @ ",x.intensity]})]})]}),!k.some(s=>s.programId===x.programId)&&e.jsxs(We,{to:`/programs/${x.programId}`,className:"mt-2 flex items-center justify-center gap-1.5 py-1.5 bg-amber-500/20 text-amber-300 text-xs font-medium rounded-lg hover:bg-amber-500/30 transition-colors",children:[e.jsx(Ae,{className:"w-3 h-3"})," Generate This Workout"]})]})]}),C.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),"Scheduled"]}),e.jsx("div",{className:"space-y-2",children:C.map(s=>{const a=c(l),r=ae(X(l))&&!w(l)&&s.type==="recurring"&&!s.isSkipped;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-plate transition-colors ${s.isSkipped?"bg-iron-800/30 opacity-50":r?"bg-green-500/10 border border-green-500/20":"bg-iron-800/50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-plate flex items-center justify-center ${s.isSkipped?"bg-iron-700/50":r?"bg-green-500/20":"bg-flame-500/20"}`,children:r?e.jsx($,{className:"w-4 h-4 text-green-400"}):e.jsx(S,{className:`w-4 h-4 ${s.isSkipped?"text-iron-500":"text-flame-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${s.isSkipped?"text-iron-500 line-through":"text-iron-100"}`,children:s.name||"Workout"}),e.jsx("p",{className:"text-xs text-iron-500",children:s.isSkipped?"Skipped":r?"Completed":s.type==="recurring"?"Recurring":"One-time"})]}),s.type==="recurring"&&!L&&(s.isSkipped?e.jsx("button",{onClick:()=>he(s.id,a),className:"p-1.5 text-iron-500 hover:text-iron-300 hover:bg-iron-700 rounded-lg transition-colors",title:"Undo skip",children:e.jsx(Be,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>ue(s.id,a),className:"p-1.5 text-iron-500 hover:text-amber-400 hover:bg-amber-500/10 rounded-lg transition-colors",title:"Skip this day",children:e.jsx(Ie,{className:"w-4 h-4"})}))]},s.id)})})]}),M.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),"Group Workouts"]}),M.map(s=>{var a;return e.jsxs("a",{href:`/workouts/group/${s.id}`,className:"flex items-center gap-3 p-3 bg-cyan-500/10 border border-cyan-500/20 rounded-plate mb-2 hover:border-cyan-500/40 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-plate bg-cyan-500/20 flex items-center justify-center",children:e.jsx(J,{className:"w-4 h-4 text-cyan-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-iron-100",children:s.name||"Group Workout"}),e.jsxs("p",{className:"text-xs text-iron-500",children:[((a=s.exercises)==null?void 0:a.length)||0," exercises · ",s.status==="completed"?"Completed":"Assigned"]})]}),s.status==="completed"&&e.jsx($,{className:"w-4 h-4 text-green-400"})]},s.id)})]}),k.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx($,{className:"w-3.5 h-3.5"}),"Completed"]}),k.map(s=>{var a;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-500/10 border border-green-500/20 rounded-plate",children:[e.jsx("div",{className:"w-8 h-8 rounded-plate bg-green-500/20 flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-iron-100",children:s.name||"Workout"}),e.jsx("p",{className:"text-xs text-iron-500",children:s.workoutType==="cardio"?`${s.duration} min`:`${((a=s.exercises)==null?void 0:a.length)||0} exercises`})]})]},s.id)})]}),(()=>{const s=K(l);return s?e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Y,{className:"w-3.5 h-3.5"}),"Goal Achieved"]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-plate",children:[e.jsx("div",{className:"w-8 h-8 rounded-plate bg-yellow-500/20 flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-yellow-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-iron-100",children:s.lift}),e.jsxs("p",{className:"text-xs text-iron-500",children:[s.targetValue||s.targetWeight," ",s.metricType==="reps"?"reps":s.metricType==="time"?"sec":"lbs"]})]}),e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"!"})]})]}):null})(),C.length===0&&k.length===0&&M.length===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(Ge,{className:"w-10 h-10 text-iron-700 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-iron-500",children:"Nothing scheduled"})]})]})]})]}),e.jsx(Ee,{children:le&&e.jsxs(e.Fragment,{children:[e.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(Z.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`fixed inset-x-4 top-1/2 -translate-y-1/2 max-w-sm mx-auto
                bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:u(l,"MMMM d")}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-full",children:e.jsx(ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("a",{href:`/workouts/new?date=${u(l,"yyyy-MM-dd")}`,className:`flex items-center gap-3 p-4 bg-iron-800/50 hover:bg-iron-800 
                    rounded-plate transition-colors`,children:[e.jsx("div",{className:"w-10 h-10 rounded-plate bg-flame-500/20 flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-flame-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-iron-100",children:"Log Workout"}),e.jsx("p",{className:"text-sm text-iron-500",children:"Record completed training"})]})]}),e.jsxs("button",{onClick:ge,className:`w-full flex items-center gap-3 p-4 bg-iron-800/50 hover:bg-iron-800 
                    rounded-plate transition-colors text-left`,children:[e.jsx("div",{className:"w-10 h-10 rounded-plate bg-blue-500/20 flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-iron-100",children:"Mark as Vacation"}),e.jsx("p",{className:"text-sm text-iron-500",children:"Planned rest day"})]})]}),e.jsxs("button",{onClick:fe,className:`w-full flex items-center gap-3 p-4 bg-iron-800/50 hover:bg-iron-800 
                    rounded-plate transition-colors text-left`,children:[e.jsx("div",{className:"w-10 h-10 rounded-plate bg-red-500/20 flex items-center justify-center",children:e.jsx(ee,{className:"w-5 h-5 text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-iron-100",children:"Mark as Missed"}),e.jsx("p",{className:"text-sm text-iron-500",children:"Unplanned skip"})]})]})]})]})]})})]})}export{ss as default};
