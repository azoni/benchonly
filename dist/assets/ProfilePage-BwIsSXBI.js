import{a as Ze,u as es,d as ss,b as ts,c as as,r as d,ag as ce,ah as o,h as m,a3 as ns,g as is,Q as rs,ab as ls,j as e,i as R,ac as T,A as cs,z as K,L as w,t as oe,U as De,C as de,X as Ce,D as me,K as Fe,n as os,k as Ie,F as Pe,ai as ds,af as Te,aj as ms,V as xs,Y as us,$ as hs,ak as H,I as fs,al as ps,am as Ns,an as Y}from"./index-D8bsGArw.js";import{L as gs}from"./lock-Cku96K7U.js";import{U as js}from"./user-minus-BqBwF8Ty.js";import{C as xe}from"./clock-W--POkTE.js";import{S as Le}from"./search-DzOb7TLu.js";import{C as bs}from"./chevron-left-Usj3rldi.js";import{s as vs,a as ys,i as ws,b as Ss}from"./index-Cd-R0-PV.js";import{f as ks}from"./index-Cv5osjM4.js";import{T as Es}from"./trophy-C-w7U5AY.js";import{e as Rs}from"./index-BVxjEPKs.js";import{e as Ds}from"./index-DIBmGNou.js";function Cs({friendStatus:p,loading:n,onAction:M}){if(!p)return null;const A={[o.NONE]:{label:"Add Friend",icon:me,className:"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"},[o.PENDING_SENT]:{label:"Pending",icon:xe,className:"bg-iron-700 text-iron-300 hover:bg-iron-600"},[o.PENDING_RECEIVED]:{label:"Accept",icon:de,className:"bg-green-500/20 text-green-400 hover:bg-green-500/30"},[o.FRIENDS]:{label:"Friends",icon:Te,className:"bg-blue-500/10 text-blue-400 hover:bg-red-500/10 hover:text-red-400"}},S=A[p.status]||A[o.NONE],c=S.icon;return e.jsxs("button",{onClick:M,disabled:n,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${S.className}`,children:[n?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(c,{className:"w-4 h-4"}),S.label]})}function Gs(){var ve,ye,we;const{userId:p}=Ze();es("Profile");const{user:n,isRealAdmin:M}=ss(),A=ts(),S=as(),[c,z]=d.useState(null),[Ae,q]=d.useState(!0),[D,Me]=d.useState(null),[ue,qe]=d.useState([]),[k,Oe]=d.useState(!1),[C,he]=d.useState(new Date),[Ue,Ve]=d.useState([]),[O,Ge]=d.useState([]),[Q,$e]=d.useState(!1),[l,E]=d.useState(null),[X,U]=d.useState(!1),[J,V]=d.useState(0),[Z,fe]=d.useState("overview"),[F,pe]=d.useState([]),[I,ee]=d.useState([]),[G,se]=d.useState([]),[te,Ne]=d.useState(!1),[$,ge]=d.useState("friends"),[_,_e]=d.useState(""),[ae,We]=d.useState([]),[b,je]=d.useState({}),ne=()=>{var s;(s=S.state)!=null&&s.from?A(S.state.from):A(-1)},Be=((ve=S.state)==null?void 0:ve.fromLabel)||"Back";d.useEffect(()=>{be()},[p,n]);const be=async()=>{q(!0);try{let s=null,t=null;if(p?(s=await ce.getByUsername(p),s?t=s.uid:(s=await ce.get(p),t=p)):(t=n==null?void 0:n.uid,s=await ce.get(t)),Oe(t===(n==null?void 0:n.uid)),!s){z(null),q(!1);return}let r={status:o.NONE};if(n&&t!==n.uid)try{r=await m.getFriendshipStatus(n.uid,t),E(r)}catch(x){console.error("Friend status error:",x)}try{const x=await m.getFriendCount(t);if(V(x),t===(n==null?void 0:n.uid)){const v=await m.getReceivedRequests(n.uid);ee(v)}}catch(x){console.error("Friend count error:",x)}const i=s.defaultVisibility||(s.isPrivate?"private":"public"),a=r.status===o.FRIENDS;if(!(t===(n==null?void 0:n.uid)||M||i==="public"||i==="friends"&&a)){z({...s,isPrivate:!0,defaultVisibility:i,uid:t}),q(!1);return}z(s);const[u,h]=await Promise.all([ns.getByUser(t,500),is.getByUser(t)]),L=u.filter(x=>x.status==="completed"),re=h.filter(x=>x.status==="completed"),W=[...L,...re];Ve([...u,...h]);const g={bench:0,squat:0,deadlift:0},f={bench:null,squat:null,deadlift:null},Qe=(x,v)=>!x||!v||v<1?0:v===1?x:Math.round(x*(1+v/30));W.forEach(x=>{x.exercises&&x.exercises.forEach(v=>{var Se,ke;const j=((Se=v.name)==null?void 0:Se.toLowerCase())||"";let y=null;j.includes("bench")&&!j.includes("incline")&&!j.includes("decline")?y="bench":j.includes("squat")&&!j.includes("front")&&!j.includes("hack")?y="squat":j.includes("deadlift")&&!j.includes("romanian")&&!j.includes("rdl")&&!j.includes("stiff")&&(y="deadlift"),y&&((ke=v.sets)==null||ke.forEach(B=>{const le=parseFloat(B.actualWeight)||parseFloat(B.prescribedWeight)||0,Ee=parseInt(B.actualReps)||parseInt(B.prescribedReps)||1;g[y]=Math.max(g[y],le);const Re=Qe(le,Ee);(!f[y]||Re>f[y].e1rm)&&(f[y]={weight:le,reps:Ee,e1rm:Re})}))})}),Me({totalWorkouts:W.length,bench:g.bench,squat:g.squat,deadlift:g.deadlift,total:g.bench+g.squat+g.deadlift,bestSets:f});const Xe=await rs.getByUser(t);Ge(Xe.filter(x=>x.status==="active"));const Je=await ls.getFeed(5,null,t);qe(Je.items)}catch(s){console.error("Error loading profile:",s)}finally{q(!1)}},ie=async()=>{if(!(!n||te)){Ne(!0);try{const s=await xs(us(hs,"users")),t={},r=[];s.docs.forEach(u=>{const h={id:u.id,uid:u.id,...u.data()};t[u.id]=h,u.id!==n.uid&&r.push(h)}),We(r);const[i,a,N]=await Promise.all([m.getFriends(n.uid),m.getReceivedRequests(n.uid),m.getSentRequests(n.uid)]);pe(i.map(u=>t[u]).filter(Boolean)),ee(a),se(N),V(i.length)}catch(s){console.error("Error loading friends:",s)}finally{Ne(!1)}}},P=async(s,t,r)=>{je(i=>({...i,[t]:!0}));try{if(s==="accept")await m.acceptRequest(t),await ie();else if(s==="decline")await m.declineRequest(t),ee(i=>i.filter(a=>a.id!==t));else if(s==="cancel")await m.cancelRequest(t),se(i=>i.filter(a=>a.id!==t));else if(s==="remove"){if(!confirm("Remove this friend?"))return;await m.removeFriend(n.uid,t),pe(i=>i.filter(a=>(a.uid||a.id)!==t)),V(i=>Math.max(0,i-1))}else if(s==="send"){await m.sendRequest(n.uid,t);const i=await m.getSentRequests(n.uid);se(i)}}catch(i){console.error("Friend action error:",i),alert(i.message)}finally{je(i=>({...i,[t]:!1}))}},Ke=s=>{switch(s){case H.WORKOUT:return e.jsx(fs,{className:"w-4 h-4 text-green-400"});case H.CARDIO:return e.jsx(oe,{className:"w-4 h-4 text-orange-400"});case H.GOAL_COMPLETED:return e.jsx(Es,{className:"w-4 h-4 text-yellow-400"});case H.GOAL_CREATED:return e.jsx(Fe,{className:"w-4 h-4 text-purple-400"});default:return e.jsx(oe,{className:"w-4 h-4 text-iron-400"})}},He=()=>{const s=ps(Ss(C),{weekStartsOn:1}),t=Ns(Rs(C),{weekStartsOn:1});return Ds({start:s,end:t})},Ye=s=>{const t=Y(s);return Ue.filter(r=>{var a;const i=(a=r.date)!=null&&a.toDate?r.date.toDate():new Date(r.date);return Y(i)===t})},ze=s=>{const t=Y(s);return O.find(r=>Y(r.targetDate)===t)};if(Ae)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(R,{className:"w-8 h-8 text-flame-500 animate-spin"})});if(!c)return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(T,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"User Not Found"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"This user doesn't exist or has been deleted."}),e.jsx("button",{onClick:ne,className:"btn-primary",children:"Go Back"})]});if(c.isPrivate&&!k){const s=async()=>{if(n){U(!0);try{!l||l.status===o.NONE?(await m.sendRequest(n.uid,c.uid||p),E({status:o.PENDING_SENT})):l.status===o.PENDING_SENT?(await m.cancelRequest(l.requestId),E({status:o.NONE})):l.status===o.PENDING_RECEIVED&&(await m.acceptRequest(l.requestId),E({status:o.FRIENDS}),be())}catch(t){console.error("Friend action error:",t)}finally{U(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(gs,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:c.defaultVisibility==="friends"?"Friends Only":"Private Profile"}),e.jsx("p",{className:"text-iron-500 mb-6",children:c.defaultVisibility==="friends"?"This user only shares their activity with friends.":"This user has set their profile to private."}),n&&c.defaultVisibility==="friends"&&e.jsxs("button",{onClick:s,disabled:X||(l==null?void 0:l.status)===o.FRIENDS,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors mb-4 ${(l==null?void 0:l.status)===o.PENDING_SENT?"bg-iron-700 text-iron-300 hover:bg-iron-600":(l==null?void 0:l.status)===o.PENDING_RECEIVED?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"}`,children:[X?e.jsx(R,{className:"w-4 h-4 animate-spin inline mr-1"}):null,(l==null?void 0:l.status)===o.PENDING_SENT?"Cancel Request":(l==null?void 0:l.status)===o.PENDING_RECEIVED?"Accept Friend Request":"Send Friend Request"]}),e.jsx("br",{}),e.jsx("button",{onClick:ne,className:"btn-primary",children:"Go Back"})]})}return e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[((ye=S.state)==null?void 0:ye.from)&&e.jsxs("button",{onClick:ne,className:"inline-flex items-center gap-2 text-iron-400 hover:text-iron-200 mb-6",children:[e.jsx(cs,{className:"w-4 h-4"}),Be]}),e.jsx("div",{className:"card-steel p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-iron-800 flex items-center justify-center",children:c.photoURL?e.jsx("img",{src:c.photoURL,alt:"",className:"w-20 h-20 rounded-full"}):e.jsx(T,{className:"w-10 h-10 text-iron-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-display text-iron-100",children:[c.displayName||"User",M&&!k&&e.jsx("span",{className:`ml-2 text-xs font-normal px-2 py-0.5 rounded-full align-middle ${(c.defaultVisibility||"public")==="public"?"bg-green-500/10 text-green-400":c.defaultVisibility==="friends"?"bg-blue-500/10 text-blue-400":"bg-red-500/10 text-red-400"}`,children:c.defaultVisibility||"public"})]}),c.username&&e.jsxs("p",{className:"text-sm text-flame-400",children:["@",c.username]}),c.createdAt&&e.jsxs("p",{className:"text-xs text-iron-500 mt-1",children:["Member since ",K(c.createdAt.toDate?c.createdAt.toDate():new Date(c.createdAt),"MMMM yyyy"),J>0&&e.jsxs(e.Fragment,{children:[" · ",e.jsxs("button",{onClick:()=>{fe("friends"),F.length===0&&ie()},className:"text-flame-400 hover:text-flame-300",children:[J," friend",J!==1?"s":""]})]})]}),((we=c.badges)==null?void 0:we.length)>0&&e.jsx("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:c.badges.map(s=>e.jsx("span",{title:s.name,className:"w-7 h-7 flex items-center justify-center bg-iron-800 border border-iron-700 rounded-lg text-sm cursor-default hover:bg-iron-700 transition-colors",children:s.icon},s.id))})]}),k?e.jsx(w,{to:"/settings",className:"btn-secondary text-sm",children:"Edit Profile"}):n&&e.jsx(Cs,{friendStatus:l,loading:X,onAction:async()=>{U(!0);try{const s=c.uid||p;!l||l.status===o.NONE?(await m.sendRequest(n.uid,s),E({status:o.PENDING_SENT})):l.status===o.PENDING_SENT?(await m.cancelRequest(l.requestId),E({status:o.NONE})):l.status===o.PENDING_RECEIVED?(await m.acceptRequest(l.requestId),E({status:o.FRIENDS})):l.status===o.FRIENDS&&confirm("Remove this friend?")&&(await m.removeFriend(n.uid,s),E({status:o.NONE}),V(t=>Math.max(0,t-1)))}catch(s){console.error("Friend action error:",s),alert(s.message)}finally{U(!1)}}})]})}),k&&e.jsx("div",{className:"flex gap-2 mb-6",children:[{key:"overview",label:"Overview",icon:oe},{key:"friends",label:"Friends",icon:De,badge:I.length||null}].map(s=>e.jsxs("button",{onClick:()=>{fe(s.key),s.key==="friends"&&F.length===0&&!te&&ie()},className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-colors ${Z===s.key?"bg-flame-500/20 text-flame-400 border border-flame-500/30":"bg-iron-800/50 text-iron-400 border border-iron-700/50 hover:text-iron-200"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.badge>0&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-flame-500 text-white font-bold",children:s.badge})]},s.key))}),k&&Z==="friends"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:[{key:"friends",label:"My Friends",count:F.length},{key:"requests",label:"Requests",count:I.length},{key:"sent",label:"Sent",count:G.length},{key:"find",label:"Find People"}].map(s=>e.jsxs("button",{onClick:()=>ge(s.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${$===s.key?"bg-iron-800 text-iron-100":"text-iron-500 hover:text-iron-300"}`,children:[s.label,s.count>0&&e.jsx("span",{className:"ml-1.5 text-xs opacity-60",children:s.count})]},s.key))}),te?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(R,{className:"w-6 h-6 text-flame-500 animate-spin mx-auto"}),e.jsx("p",{className:"text-iron-500 mt-3 text-sm",children:"Loading friends..."})]}):$==="friends"?F.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(De,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500 mb-2",children:"No friends yet"}),e.jsx("button",{onClick:()=>ge("find"),className:"text-sm text-flame-400 hover:text-flame-300",children:"Find people to add"})]}):e.jsx("div",{className:"space-y-2",children:F.map(s=>{const t=s.uid||s.id;return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${s.username||t}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(T,{className:"w-5 h-5 text-iron-400"})}),e.jsxs(w,{to:`/profile/${s.username||t}`,className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:s.displayName||"User"}),s.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",s.username]})]}),e.jsx("button",{onClick:()=>P("remove",t),disabled:b[t],className:"p-2 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Remove friend",children:b[t]?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(js,{className:"w-4 h-4"})})]},t)})}):$==="requests"?e.jsx("div",{className:"space-y-2",children:I.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(xe,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No pending requests"})]}):I.map(s=>{const t=ae.find(r=>r.id===s.from)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${t.username||s.from}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(T,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>P("accept",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(de,{className:"w-3.5 h-3.5"}),"Accept"]}),e.jsx("button",{onClick:()=>P("decline",s.id),disabled:b[s.id],className:"p-1.5 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]},s.id)})}):$==="sent"?e.jsx("div",{className:"space-y-2",children:G.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(me,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No sent requests"})]}):G.map(s=>{const t=ae.find(r=>r.id===s.to)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${t.username||s.to}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(T,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("button",{onClick:()=>P("cancel",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-iron-700 text-iron-300 hover:bg-iron-600 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ce,{className:"w-3.5 h-3.5"}),"Cancel"]})]},s.id)})}):e.jsxs("div",{children:[e.jsx("div",{className:"card-steel p-4 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search by name or username...",value:_,onChange:s=>_e(s.target.value),className:"input-field w-full pl-10",autoFocus:!0})]})}),_.trim()?(()=>{const s=new Set(F.map(a=>a.uid||a.id)),t=new Set(G.map(a=>a.to)),r=new Set(I.map(a=>a.from)),i=ae.filter(a=>{var u,h;const N=_.toLowerCase();return(((u=a.displayName)==null?void 0:u.toLowerCase().includes(N))||((h=a.username)==null?void 0:h.toLowerCase().includes(N)))&&!s.has(a.id)});return i.length===0?e.jsx("div",{className:"card-steel p-8 text-center",children:e.jsxs("p",{className:"text-iron-500",children:['No users found matching "',_,'"']})}):e.jsx("div",{className:"space-y-2",children:i.map(a=>{const N=t.has(a.id),u=r.has(a.id);return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${a.username||a.id}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(T,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:a.displayName||"User"}),a.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",a.username]})]}),N?e.jsxs("span",{className:"text-xs text-iron-500 flex items-center gap-1",children:[e.jsx(xe,{className:"w-3.5 h-3.5"})," Pending"]}):u?e.jsxs("button",{onClick:()=>{const h=I.find(L=>L.from===a.id);h&&P("accept",h.id)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(de,{className:"w-3.5 h-3.5"})," Accept"]}):e.jsxs("button",{onClick:()=>P("send",a.id),disabled:b[a.id],className:"flex items-center gap-1 px-3 py-1.5 bg-flame-500/20 text-flame-400 hover:bg-flame-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[a.id]?e.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(me,{className:"w-3.5 h-3.5"}),"Add"]})]},a.id)})})})():e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"Type a name or username to find people"})]})]})]}),(Z==="overview"||!k)&&e.jsxs(e.Fragment,{children:[D&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Bench Press",key:"bench",color:"text-flame-400",value:D.bench},{label:"Squat",key:"squat",color:"text-purple-400",value:D.squat},{label:"Deadlift",key:"deadlift",color:"text-green-400",value:D.deadlift},{label:"Total",key:"total",color:"text-yellow-400",value:D.total}].map(s=>{var i;const t=s.key!=="total"?(i=D.bestSets)==null?void 0:i[s.key]:null,r=t&&t.e1rm&&t.reps>1;return e.jsxs("div",{className:"card-steel p-4 text-center relative group cursor-default",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:s.label}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:s.value>0?`${s.value}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"}),r&&e.jsxs("div",{className:"absolute inset-0 bg-iron-900/95 rounded-xl flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none",children:[e.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wider",children:"Est. 1RM"}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:t.e1rm}),e.jsxs("p",{className:"text-[10px] text-iron-500",children:["from ",t.weight,"×",t.reps]})]})]},s.key)})}),O.length>0&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>$e(!Q),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-flame-500"}),e.jsx("h2",{className:"font-display text-lg text-iron-100",children:"Goals"}),e.jsx("span",{className:"text-xs text-iron-500 ml-1",children:O.length})]}),e.jsx(os,{className:`w-5 h-5 text-iron-400 transition-transform duration-200 ${Q?"rotate-180":""}`})]}),Q&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[O.map(s=>{const t=s.targetValue&&s.currentValue?Math.min(100,Math.round(s.currentValue/s.targetValue*100)):0,r=s.metricType==="weight"?"lbs":s.metricType==="time"?"s":"reps";return e.jsxs("div",{className:"bg-iron-800/30 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-iron-200",children:s.lift}),e.jsxs("span",{className:"text-xs text-iron-500",children:[s.currentValue||0,r," → ",s.targetValue,r]})]}),e.jsx("div",{className:"w-full h-2 bg-iron-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-flame-500 transition-all duration-500",style:{width:`${t}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsxs("span",{className:"text-[10px] text-iron-500",children:[t,"%"]}),s.targetDate&&e.jsxs("span",{className:"text-[10px] text-iron-500",children:["by ",K(new Date(s.targetDate),"MMM d, yyyy")]})]})]},s.id)}),k&&e.jsx(w,{to:"/goals",className:"block text-center text-xs text-flame-400 hover:text-flame-300 transition-colors pt-1",children:"Manage goals →"})]})]}),e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-display text-lg text-iron-100 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-flame-500"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>he(vs(C,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(bs,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm text-iron-300 w-28 text-center",children:K(C,"MMM yyyy")}),e.jsx("button",{onClick:()=>he(ys(C,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(Pe,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["M","T","W","T","F","S","S"].map((s,t)=>e.jsx("div",{className:"text-center text-xs text-iron-500 py-1",children:s},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:He().map((s,t)=>{const r=Ye(s),i=r.filter(f=>f.workoutType!=="cardio"),a=r.filter(f=>f.workoutType==="cardio");i.length>0;const N=a.length>0,u=i.some(f=>f.status==="completed"),h=i.some(f=>f.status!=="completed"),L=ze(s),re=ws(s,C),W=ds(s),g=u?"bg-green-500/20":h?"bg-flame-500/20":"";return e.jsxs("div",{className:`
                  relative aspect-square flex items-center justify-center text-xs rounded-md
                  ${re?"text-iron-300":"text-iron-600"}
                  ${W?"ring-1 ring-flame-500":""}
                  ${g}
                `,children:[K(s,"d"),(N||L)&&e.jsxs("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 flex items-center gap-0.5",children:[N&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400"}),L&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400"})]})]},t)})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-4 text-xs text-iron-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-flame-500/20"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),e.jsx("span",{children:"Cardio"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),e.jsx("span",{children:"Goal"})]})]})]}),e.jsxs("div",{className:"card-steel p-4",children:[e.jsx("h2",{className:"font-display text-lg text-iron-100 mb-4",children:"Recent Activity"}),ue.length===0?e.jsx("p",{className:"text-center text-iron-500 py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-3",children:ue.map(s=>{var t,r;return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-iron-800 last:border-0",children:[Ke(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-iron-300",children:((t=s.data)==null?void 0:t.name)||s.type.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-iron-600",children:((r=s.createdAt)==null?void 0:r.toDate)&&ks(s.createdAt.toDate(),{addSuffix:!0})})]}),s.reactionCount>0&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-iron-500",children:e.jsxs("span",{children:[s.reactionCount," reaction",s.reactionCount!==1?"s":""]})})]},s.id)})}),e.jsx(w,{to:`/feed?user=${(c==null?void 0:c.uid)||(n==null?void 0:n.uid)}`,className:"block mt-4 text-center text-sm text-flame-400 hover:text-flame-300",children:"View all activity"})]}),k&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"card-steel overflow-hidden divide-y divide-iron-800",children:[{to:"/calendar",icon:Ie,label:"Calendar",desc:"Monthly view & scheduling"},{to:"/health",icon:Te,label:"Health",desc:"Weight, sleep & body metrics"},{to:"/settings",icon:ms,label:"Settings",desc:"Preferences & account"}].map(s=>e.jsxs(w,{to:s.to,state:{from:"/profile",fromLabel:"Back to Profile"},className:"flex items-center gap-4 p-4 hover:bg-iron-800/50 transition-colors",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx(s.icon,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-200",children:s.label}),e.jsx("p",{className:"text-xs text-iron-500",children:s.desc})]}),e.jsx(Pe,{className:"w-4 h-4 text-iron-600"})]},s.to))})})]})]})}export{Gs as default};
