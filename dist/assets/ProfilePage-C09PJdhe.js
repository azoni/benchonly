import{a as as,u as ns,d as ls,b as rs,c as is,r as x,ag as oe,ah as d,h as u,a3 as cs,g as os,Q as ds,ab as xs,j as e,i as C,ac as M,A as ms,z as Y,L as S,t as de,U as Fe,C as xe,X as Ie,D as me,l as us,n as Pe,K as Le,k as Te,F as Ae,ai as hs,af as Oe,aj as fs,V as ps,Y as Ns,$ as gs,ak as z,I as js,al as bs,am as vs,an as Q}from"./index-OFuFeI6c.js";import{g as ys,F as ws}from"./wodLibrary-BricFkkX.js";import{L as Ss}from"./lock-CM9Ob_F9.js";import{U as ks}from"./user-minus-B1k4-uOM.js";import{C as ue}from"./clock-Bf0ZY6q-.js";import{S as Me}from"./search-BEmM8Tc3.js";import{T as qe}from"./trophy-CX7NSjpY.js";import{C as Es}from"./chevron-left-CuEub3SX.js";import{s as Rs,a as Ds,i as Cs,b as Fs}from"./index-EwPM1VkC.js";import{f as Is}from"./index-D6ot5syO.js";import{e as Ps}from"./index-BCrUgKXx.js";import{e as Ls}from"./index-B5kiQ_HH.js";function Ts({friendStatus:N,loading:l,onAction:O}){if(!N)return null;const q={[d.NONE]:{label:"Add Friend",icon:me,className:"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"},[d.PENDING_SENT]:{label:"Pending",icon:ue,className:"bg-iron-700 text-iron-300 hover:bg-iron-600"},[d.PENDING_RECEIVED]:{label:"Accept",icon:xe,className:"bg-green-500/20 text-green-400 hover:bg-green-500/30"},[d.FRIENDS]:{label:"Friends",icon:Oe,className:"bg-blue-500/10 text-blue-400 hover:bg-red-500/10 hover:text-red-400"}},k=q[N.status]||q[d.NONE],c=k.icon;return e.jsxs("button",{onClick:O,disabled:l,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${k.className}`,children:[l?e.jsx(C,{className:"w-4 h-4 animate-spin"}):e.jsx(c,{className:"w-4 h-4"}),k.label]})}function Hs(){var we,Se,ke;const{userId:N}=as();ns("Profile");const{user:l,isRealAdmin:O}=ls(),q=rs(),k=is(),[c,X]=x.useState(null),[Ue,U]=x.useState(!0),[F,Ve]=x.useState(null),[he,$e]=x.useState([]),[E,Ge]=x.useState(!1),[I,fe]=x.useState(new Date),[We,_e]=x.useState([]),[V,Be]=x.useState([]),[J,Ke]=x.useState(!1),[P,pe]=x.useState(!1),[o,R]=x.useState(null),[Z,$]=x.useState(!1),[ee,G]=x.useState(0),[se,Ne]=x.useState("overview"),[L,ge]=x.useState([]),[T,te]=x.useState([]),[W,ae]=x.useState([]),[ne,je]=x.useState(!1),[_,be]=x.useState("friends"),[B,He]=x.useState(""),[le,Ye]=x.useState([]),[b,ve]=x.useState({}),re=()=>{var s;(s=k.state)!=null&&s.from?q(k.state.from):q(-1)},ze=((we=k.state)==null?void 0:we.fromLabel)||"Back";x.useEffect(()=>{ye()},[N,l]);const ye=async()=>{U(!0);try{let s=null,t=null;if(N?(s=await oe.getByUsername(N),s?t=s.uid:(s=await oe.get(N),t=N)):(t=l==null?void 0:l.uid,s=await oe.get(t)),Ge(t===(l==null?void 0:l.uid)),!s){X(null),U(!1);return}let i={status:d.NONE};if(l&&t!==l.uid)try{i=await u.getFriendshipStatus(l.uid,t),R(i)}catch(h){console.error("Friend status error:",h)}try{const h=await u.getFriendCount(t);if(G(h),t===(l==null?void 0:l.uid)){const y=await u.getReceivedRequests(l.uid);te(y)}}catch(h){console.error("Friend count error:",h)}const a=s.defaultVisibility||(s.isPrivate?"private":"public"),n=i.status===d.FRIENDS;if(!(t===(l==null?void 0:l.uid)||O||a==="public"||a==="friends"&&n)){X({...s,isPrivate:!0,defaultVisibility:a,uid:t}),U(!1);return}X(s);const[r,f]=await Promise.all([cs.getByUser(t,500),os.getByUser(t)]),D=r.filter(h=>h.status==="completed"),v=f.filter(h=>h.status==="completed"),K=[...D,...v];_e([...r,...f]);const g={bench:0,squat:0,deadlift:0},p={bench:null,squat:null,deadlift:null},es=(h,y)=>!h||!y||y<1?0:y===1?h:Math.round(h*(1+y/30));K.forEach(h=>{h.exercises&&h.exercises.forEach(y=>{var Ee,Re;const j=((Ee=y.name)==null?void 0:Ee.toLowerCase())||"";let w=null;j.includes("bench")&&!j.includes("incline")&&!j.includes("decline")?w="bench":j.includes("squat")&&!j.includes("front")&&!j.includes("hack")?w="squat":j.includes("deadlift")&&!j.includes("romanian")&&!j.includes("rdl")&&!j.includes("stiff")&&(w="deadlift"),w&&((Re=y.sets)==null||Re.forEach(H=>{const ce=parseFloat(H.actualWeight)||parseFloat(H.prescribedWeight)||0,De=parseInt(H.actualReps)||parseInt(H.prescribedReps)||1;g[w]=Math.max(g[w],ce);const Ce=es(ce,De);(!p[w]||Ce>p[w].e1rm)&&(p[w]={weight:ce,reps:De,e1rm:Ce})}))})}),Ve({totalWorkouts:K.length,bench:g.bench,squat:g.squat,deadlift:g.deadlift,total:g.bench+g.squat+g.deadlift,bestSets:p});const ss=await ds.getByUser(t);Be(ss.filter(h=>h.status==="active"));const ts=await xs.getFeed(5,null,t);$e(ts.items)}catch(s){console.error("Error loading profile:",s)}finally{U(!1)}},ie=async()=>{if(!(!l||ne)){je(!0);try{const s=await ps(Ns(gs,"users")),t={},i=[];s.docs.forEach(r=>{const f={id:r.id,uid:r.id,...r.data()};t[r.id]=f,r.id!==l.uid&&i.push(f)}),Ye(i);const[a,n,m]=await Promise.all([u.getFriends(l.uid),u.getReceivedRequests(l.uid),u.getSentRequests(l.uid)]);ge(a.map(r=>t[r]).filter(Boolean)),te(n),ae(m),G(a.length)}catch(s){console.error("Error loading friends:",s)}finally{je(!1)}}},A=async(s,t,i)=>{ve(a=>({...a,[t]:!0}));try{if(s==="accept")await u.acceptRequest(t),await ie();else if(s==="decline")await u.declineRequest(t),te(a=>a.filter(n=>n.id!==t));else if(s==="cancel")await u.cancelRequest(t),ae(a=>a.filter(n=>n.id!==t));else if(s==="remove"){if(!confirm("Remove this friend?"))return;await u.removeFriend(l.uid,t),ge(a=>a.filter(n=>(n.uid||n.id)!==t)),G(a=>Math.max(0,a-1))}else if(s==="send"){await u.sendRequest(l.uid,t);const a=await u.getSentRequests(l.uid);ae(a)}}catch(a){console.error("Friend action error:",a),alert(a.message)}finally{ve(a=>({...a,[t]:!1}))}},Qe=s=>{switch(s){case z.WORKOUT:return e.jsx(js,{className:"w-4 h-4 text-green-400"});case z.CARDIO:return e.jsx(de,{className:"w-4 h-4 text-orange-400"});case z.GOAL_COMPLETED:return e.jsx(qe,{className:"w-4 h-4 text-yellow-400"});case z.GOAL_CREATED:return e.jsx(Le,{className:"w-4 h-4 text-purple-400"});default:return e.jsx(de,{className:"w-4 h-4 text-iron-400"})}},Xe=()=>{const s=bs(Fs(I),{weekStartsOn:1}),t=vs(Ps(I),{weekStartsOn:1});return Ls({start:s,end:t})},Je=s=>{const t=Q(s);return We.filter(i=>{var n;const a=(n=i.date)!=null&&n.toDate?i.date.toDate():new Date(i.date);return Q(a)===t})},Ze=s=>{const t=Q(s);return V.find(i=>Q(i.targetDate)===t)};if(Ue)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(C,{className:"w-8 h-8 text-flame-500 animate-spin"})});if(!c)return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(M,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"User Not Found"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"This user doesn't exist or has been deleted."}),e.jsx("button",{onClick:re,className:"btn-primary",children:"Go Back"})]});if(c.isPrivate&&!E){const s=async()=>{if(l){$(!0);try{!o||o.status===d.NONE?(await u.sendRequest(l.uid,c.uid||N),R({status:d.PENDING_SENT})):o.status===d.PENDING_SENT?(await u.cancelRequest(o.requestId),R({status:d.NONE})):o.status===d.PENDING_RECEIVED&&(await u.acceptRequest(o.requestId),R({status:d.FRIENDS}),ye())}catch(t){console.error("Friend action error:",t)}finally{$(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(Ss,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:c.defaultVisibility==="friends"?"Friends Only":"Private Profile"}),e.jsx("p",{className:"text-iron-500 mb-6",children:c.defaultVisibility==="friends"?"This user only shares their activity with friends.":"This user has set their profile to private."}),l&&c.defaultVisibility==="friends"&&e.jsxs("button",{onClick:s,disabled:Z||(o==null?void 0:o.status)===d.FRIENDS,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors mb-4 ${(o==null?void 0:o.status)===d.PENDING_SENT?"bg-iron-700 text-iron-300 hover:bg-iron-600":(o==null?void 0:o.status)===d.PENDING_RECEIVED?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"}`,children:[Z?e.jsx(C,{className:"w-4 h-4 animate-spin inline mr-1"}):null,(o==null?void 0:o.status)===d.PENDING_SENT?"Cancel Request":(o==null?void 0:o.status)===d.PENDING_RECEIVED?"Accept Friend Request":"Send Friend Request"]}),e.jsx("br",{}),e.jsx("button",{onClick:re,className:"btn-primary",children:"Go Back"})]})}return e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[((Se=k.state)==null?void 0:Se.from)&&e.jsxs("button",{onClick:re,className:"inline-flex items-center gap-2 text-iron-400 hover:text-iron-200 mb-6",children:[e.jsx(ms,{className:"w-4 h-4"}),ze]}),e.jsx("div",{className:"card-steel p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-iron-800 flex items-center justify-center",children:c.photoURL?e.jsx("img",{src:c.photoURL,alt:"",className:"w-20 h-20 rounded-full"}):e.jsx(M,{className:"w-10 h-10 text-iron-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-display text-iron-100",children:[c.displayName||"User",O&&!E&&e.jsx("span",{className:`ml-2 text-xs font-normal px-2 py-0.5 rounded-full align-middle ${(c.defaultVisibility||"public")==="public"?"bg-green-500/10 text-green-400":c.defaultVisibility==="friends"?"bg-blue-500/10 text-blue-400":"bg-red-500/10 text-red-400"}`,children:c.defaultVisibility||"public"})]}),c.username&&e.jsxs("p",{className:"text-sm text-flame-400",children:["@",c.username]}),c.createdAt&&e.jsxs("p",{className:"text-xs text-iron-500 mt-1",children:["Member since ",Y(c.createdAt.toDate?c.createdAt.toDate():new Date(c.createdAt),"MMMM yyyy"),ee>0&&e.jsxs(e.Fragment,{children:[" · ",e.jsxs("button",{onClick:()=>{Ne("friends"),L.length===0&&ie()},className:"text-flame-400 hover:text-flame-300",children:[ee," friend",ee!==1?"s":""]})]})]}),((ke=c.badges)==null?void 0:ke.length)>0&&e.jsx("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:c.badges.map(s=>e.jsx("span",{title:s.name,className:"w-7 h-7 flex items-center justify-center bg-iron-800 border border-iron-700 rounded-lg text-sm cursor-default hover:bg-iron-700 transition-colors",children:s.icon},s.id))})]}),E?e.jsx(S,{to:"/settings",className:"btn-secondary text-sm",children:"Edit Profile"}):l&&e.jsx(Ts,{friendStatus:o,loading:Z,onAction:async()=>{$(!0);try{const s=c.uid||N;!o||o.status===d.NONE?(await u.sendRequest(l.uid,s),R({status:d.PENDING_SENT})):o.status===d.PENDING_SENT?(await u.cancelRequest(o.requestId),R({status:d.NONE})):o.status===d.PENDING_RECEIVED?(await u.acceptRequest(o.requestId),R({status:d.FRIENDS})):o.status===d.FRIENDS&&confirm("Remove this friend?")&&(await u.removeFriend(l.uid,s),R({status:d.NONE}),G(t=>Math.max(0,t-1)))}catch(s){console.error("Friend action error:",s),alert(s.message)}finally{$(!1)}}})]})}),E&&e.jsx("div",{className:"flex gap-2 mb-6",children:[{key:"overview",label:"Overview",icon:de},{key:"friends",label:"Friends",icon:Fe,badge:T.length||null}].map(s=>e.jsxs("button",{onClick:()=>{Ne(s.key),s.key==="friends"&&L.length===0&&!ne&&ie()},className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-colors ${se===s.key?"bg-flame-500/20 text-flame-400 border border-flame-500/30":"bg-iron-800/50 text-iron-400 border border-iron-700/50 hover:text-iron-200"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.badge>0&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-flame-500 text-white font-bold",children:s.badge})]},s.key))}),E&&se==="friends"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:[{key:"friends",label:"My Friends",count:L.length},{key:"requests",label:"Requests",count:T.length},{key:"sent",label:"Sent",count:W.length},{key:"find",label:"Find People"}].map(s=>e.jsxs("button",{onClick:()=>be(s.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${_===s.key?"bg-iron-800 text-iron-100":"text-iron-500 hover:text-iron-300"}`,children:[s.label,s.count>0&&e.jsx("span",{className:"ml-1.5 text-xs opacity-60",children:s.count})]},s.key))}),ne?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(C,{className:"w-6 h-6 text-flame-500 animate-spin mx-auto"}),e.jsx("p",{className:"text-iron-500 mt-3 text-sm",children:"Loading friends..."})]}):_==="friends"?L.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(Fe,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500 mb-2",children:"No friends yet"}),e.jsx("button",{onClick:()=>be("find"),className:"text-sm text-flame-400 hover:text-flame-300",children:"Find people to add"})]}):e.jsx("div",{className:"space-y-2",children:L.map(s=>{const t=s.uid||s.id;return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(S,{to:`/profile/${s.username||t}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(M,{className:"w-5 h-5 text-iron-400"})}),e.jsxs(S,{to:`/profile/${s.username||t}`,className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:s.displayName||"User"}),s.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",s.username]})]}),e.jsx("button",{onClick:()=>A("remove",t),disabled:b[t],className:"p-2 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Remove friend",children:b[t]?e.jsx(C,{className:"w-4 h-4 animate-spin"}):e.jsx(ks,{className:"w-4 h-4"})})]},t)})}):_==="requests"?e.jsx("div",{className:"space-y-2",children:T.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(ue,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No pending requests"})]}):T.map(s=>{const t=le.find(i=>i.id===s.from)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(S,{to:`/profile/${t.username||s.from}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(M,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>A("accept",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(xe,{className:"w-3.5 h-3.5"}),"Accept"]}),e.jsx("button",{onClick:()=>A("decline",s.id),disabled:b[s.id],className:"p-1.5 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},s.id)})}):_==="sent"?e.jsx("div",{className:"space-y-2",children:W.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(me,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No sent requests"})]}):W.map(s=>{const t=le.find(i=>i.id===s.to)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(S,{to:`/profile/${t.username||s.to}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(M,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("button",{onClick:()=>A("cancel",s.id),disabled:b[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-iron-700 text-iron-300 hover:bg-iron-600 rounded-lg text-sm font-medium transition-colors",children:[b[s.id]?e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ie,{className:"w-3.5 h-3.5"}),"Cancel"]})]},s.id)})}):e.jsxs("div",{children:[e.jsx("div",{className:"card-steel p-4 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search by name or username...",value:B,onChange:s=>He(s.target.value),className:"input-field w-full pl-10",autoFocus:!0})]})}),B.trim()?(()=>{const s=new Set(L.map(n=>n.uid||n.id)),t=new Set(W.map(n=>n.to)),i=new Set(T.map(n=>n.from)),a=le.filter(n=>{var r,f;const m=B.toLowerCase();return(((r=n.displayName)==null?void 0:r.toLowerCase().includes(m))||((f=n.username)==null?void 0:f.toLowerCase().includes(m)))&&!s.has(n.id)});return a.length===0?e.jsx("div",{className:"card-steel p-8 text-center",children:e.jsxs("p",{className:"text-iron-500",children:['No users found matching "',B,'"']})}):e.jsx("div",{className:"space-y-2",children:a.map(n=>{const m=t.has(n.id),r=i.has(n.id);return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(S,{to:`/profile/${n.username||n.id}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:n.photoURL?e.jsx("img",{src:n.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(M,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:n.displayName||"User"}),n.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",n.username]})]}),m?e.jsxs("span",{className:"text-xs text-iron-500 flex items-center gap-1",children:[e.jsx(ue,{className:"w-3.5 h-3.5"})," Pending"]}):r?e.jsxs("button",{onClick:()=>{const f=T.find(D=>D.from===n.id);f&&A("accept",f.id)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(xe,{className:"w-3.5 h-3.5"})," Accept"]}):e.jsxs("button",{onClick:()=>A("send",n.id),disabled:b[n.id],className:"flex items-center gap-1 px-3 py-1.5 bg-flame-500/20 text-flame-400 hover:bg-flame-500/30 rounded-lg text-sm font-medium transition-colors",children:[b[n.id]?e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(me,{className:"w-3.5 h-3.5"}),"Add"]})]},n.id)})})})():e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Me,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"Type a name or username to find people"})]})]})]}),(se==="overview"||!E)&&e.jsxs(e.Fragment,{children:[F&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Bench Press",key:"bench",color:"text-flame-400",value:F.bench},{label:"Squat",key:"squat",color:"text-purple-400",value:F.squat},{label:"Deadlift",key:"deadlift",color:"text-green-400",value:F.deadlift},{label:"Total",key:"total",color:"text-yellow-400",value:F.total}].map(s=>{var a;const t=s.key!=="total"?(a=F.bestSets)==null?void 0:a[s.key]:null,i=t&&t.e1rm&&t.reps>1;return e.jsxs("div",{className:"card-steel p-4 text-center relative group cursor-default",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:s.label}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:s.value>0?`${s.value}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"}),i&&e.jsxs("div",{className:"absolute inset-0 bg-iron-900/95 rounded-xl flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none",children:[e.jsx("p",{className:"text-[10px] text-iron-500 uppercase tracking-wider",children:"Est. 1RM"}),e.jsx("p",{className:`text-2xl font-display ${s.color}`,children:t.e1rm}),e.jsxs("p",{className:"text-[10px] text-iron-500",children:["from ",t.weight,"×",t.reps]})]})]},s.key)})}),(()=>{const s=c==null?void 0:c.wodStats,t=s?Object.entries(s).filter(([,a])=>a==null?void 0:a.pr):[],i=P?t:t.slice(0,4);return e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>pe(!P),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h2",{className:"font-display text-lg text-iron-100",children:"Benchmark WODs"}),t.length>0&&e.jsx("span",{className:"text-xs text-iron-500 ml-1",children:t.length})]}),P?e.jsx(us,{className:"w-5 h-5 text-iron-400"}):e.jsx(Pe,{className:"w-5 h-5 text-iron-400"})]}),P&&e.jsx("div",{className:"px-4 pb-4",children:t.length===0?e.jsx("p",{className:"text-sm text-iron-500 text-center py-4",children:"Complete a benchmark WOD to see your stats here."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map(([a,n])=>{const m=ys(a),r=n.pr,f=(r==null?void 0:r.rxOrScaled)==="rx",D=(m==null?void 0:m.format)||"fortime";let v="—";return D==="amrap"&&(r==null?void 0:r.rounds)!=null?(v=`${r.rounds} rds`,r.extraReps&&(v+=` +${r.extraReps}`)):r!=null&&r.time&&!(r!=null&&r.dnf)?v=r.time:r!=null&&r.dnf&&(v="DNF"),e.jsxs("div",{className:"card-steel p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1 mb-1",children:[e.jsx("p",{className:"text-xs font-semibold text-iron-200 truncate",children:(m==null?void 0:m.name)||a}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold flex-shrink-0 ${f?"bg-flame-500/20 text-flame-400":"bg-iron-700 text-iron-400"}`,children:f?"Rx":"Scaled"})]}),e.jsx("p",{className:"text-lg font-display text-yellow-400",children:v}),m&&e.jsx("p",{className:"text-[10px] text-iron-600 mt-0.5",children:ws[m.format]})]},a)})}),t.length>4&&e.jsx("button",{onClick:()=>pe(!P),className:"mt-3 w-full text-center text-xs text-iron-500 hover:text-iron-300 transition-colors",children:P?"Show less":`Show all ${t.length}`})]})})]})})(),V.length>0&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Ke(!J),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-flame-500"}),e.jsx("h2",{className:"font-display text-lg text-iron-100",children:"Goals"}),e.jsx("span",{className:"text-xs text-iron-500 ml-1",children:V.length})]}),e.jsx(Pe,{className:`w-5 h-5 text-iron-400 transition-transform duration-200 ${J?"rotate-180":""}`})]}),J&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[V.map(s=>{const t=s.targetValue&&s.currentValue?Math.min(100,Math.round(s.currentValue/s.targetValue*100)):0,i=s.metricType==="weight"?"lbs":s.metricType==="time"?"s":"reps";return e.jsxs("div",{className:"bg-iron-800/30 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-iron-200",children:s.lift}),e.jsxs("span",{className:"text-xs text-iron-500",children:[s.currentValue||0,i," → ",s.targetValue,i]})]}),e.jsx("div",{className:"w-full h-2 bg-iron-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-flame-500 transition-all duration-500",style:{width:`${t}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsxs("span",{className:"text-[10px] text-iron-500",children:[t,"%"]}),s.targetDate&&e.jsxs("span",{className:"text-[10px] text-iron-500",children:["by ",Y(new Date(s.targetDate),"MMM d, yyyy")]})]})]},s.id)}),E&&e.jsx(S,{to:"/goals",className:"block text-center text-xs text-flame-400 hover:text-flame-300 transition-colors pt-1",children:"Manage goals →"})]})]}),e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-display text-lg text-iron-100 flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-flame-500"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>fe(Rs(I,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm text-iron-300 w-28 text-center",children:Y(I,"MMM yyyy")}),e.jsx("button",{onClick:()=>fe(Ds(I,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["M","T","W","T","F","S","S"].map((s,t)=>e.jsx("div",{className:"text-center text-xs text-iron-500 py-1",children:s},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Xe().map((s,t)=>{const i=Je(s),a=i.filter(p=>p.workoutType!=="cardio"),n=i.filter(p=>p.workoutType==="cardio");a.length>0;const m=n.length>0,r=a.some(p=>p.status==="completed"),f=a.some(p=>p.status!=="completed"),D=Ze(s),v=Cs(s,I),K=hs(s),g=r?"bg-green-500/20":f?"bg-flame-500/20":"";return e.jsxs("div",{className:`
                  relative aspect-square flex items-center justify-center text-xs rounded-md
                  ${v?"text-iron-300":"text-iron-600"}
                  ${K?"ring-1 ring-flame-500":""}
                  ${g}
                `,children:[Y(s,"d"),(m||D)&&e.jsxs("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 flex items-center gap-0.5",children:[m&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400"}),D&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400"})]})]},t)})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-4 text-xs text-iron-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-flame-500/20"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),e.jsx("span",{children:"Cardio"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),e.jsx("span",{children:"Goal"})]})]})]}),e.jsxs("div",{className:"card-steel p-4",children:[e.jsx("h2",{className:"font-display text-lg text-iron-100 mb-4",children:"Recent Activity"}),he.length===0?e.jsx("p",{className:"text-center text-iron-500 py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-3",children:he.map(s=>{var t,i;return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-iron-800 last:border-0",children:[Qe(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-iron-300",children:((t=s.data)==null?void 0:t.name)||s.type.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-iron-600",children:((i=s.createdAt)==null?void 0:i.toDate)&&Is(s.createdAt.toDate(),{addSuffix:!0})})]}),s.reactionCount>0&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-iron-500",children:e.jsxs("span",{children:[s.reactionCount," reaction",s.reactionCount!==1?"s":""]})})]},s.id)})}),e.jsx(S,{to:`/feed?user=${(c==null?void 0:c.uid)||(l==null?void 0:l.uid)}`,className:"block mt-4 text-center text-sm text-flame-400 hover:text-flame-300",children:"View all activity"})]}),E&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"card-steel overflow-hidden divide-y divide-iron-800",children:[{to:"/calendar",icon:Te,label:"Calendar",desc:"Monthly view & scheduling"},{to:"/health",icon:Oe,label:"Health",desc:"Weight, sleep & body metrics"},{to:"/settings",icon:fs,label:"Settings",desc:"Preferences & account"}].map(s=>e.jsxs(S,{to:s.to,state:{from:"/profile",fromLabel:"Back to Profile"},className:"flex items-center gap-4 p-4 hover:bg-iron-800/50 transition-colors",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx(s.icon,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-200",children:s.label}),e.jsx("p",{className:"text-xs text-iron-500",children:s.desc})]}),e.jsx(Ae,{className:"w-4 h-4 text-iron-600"})]},s.to))})})]})]})}export{Hs as default};
