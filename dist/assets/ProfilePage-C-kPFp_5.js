import{a as Be,d as He,b as Ye,c as ze,r as d,a9 as ee,aa as c,a1 as x,Q as Ke,g as Qe,z as Xe,a2 as Je,j as e,f as S,a4 as F,A as Ze,p as se,L as w,a3 as te,U as ve,h as ae,X as ye,q as ne,C as we,s as Se,ab as es,a8 as Re,ac as ss,D as ts,H as as,I as ns,ad as $,w as is,Y as ls,ae as rs,af as cs,ag as V}from"./index-DavVl6G1.js";import{L as os}from"./lock-B3N8La-m.js";import{U as ds}from"./user-minus-C9uceC_P.js";import{C as ie}from"./clock-CHsUorid.js";import{S as Ee}from"./search-CdPeamcd.js";import{C as xs}from"./chevron-left-BWaiEwwj.js";import{s as ms,a as us,i as hs,b as fs}from"./index-BNCci3qS.js";import{f as ps}from"./index-C4LiAiv3.js";import{T as Ns}from"./trophy-uGPeuKAR.js";import{e as gs}from"./index-JW2v18HP.js";import{e as js}from"./index-UiQdz_qZ.js";function bs({friendStatus:p,loading:n,onAction:L}){if(!p)return null;const I={[c.NONE]:{label:"Add Friend",icon:ne,className:"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"},[c.PENDING_SENT]:{label:"Pending",icon:ie,className:"bg-iron-700 text-iron-300 hover:bg-iron-600"},[c.PENDING_RECEIVED]:{label:"Accept",icon:ae,className:"bg-green-500/20 text-green-400 hover:bg-green-500/30"},[c.FRIENDS]:{label:"Friends",icon:Re,className:"bg-blue-500/10 text-blue-400 hover:bg-red-500/10 hover:text-red-400"}},v=I[p.status]||I[c.NONE],r=v.icon;return e.jsxs("button",{onClick:L,disabled:n,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${v.className}`,children:[n?e.jsx(S,{className:"w-4 h-4 animate-spin"}):e.jsx(r,{className:"w-4 h-4"}),v.label]})}function Ps(){var he,fe,pe;const{userId:p}=Be(),{user:n,isRealAdmin:L}=He(),I=Ye(),v=ze(),[r,_]=d.useState(null),[ke,A]=d.useState(!0),[g,De]=d.useState(null),[le,Ce]=d.useState([]),[E,Fe]=d.useState(!1),[R,re]=d.useState(new Date),[Ie,Pe]=d.useState([]),[Le,Ae]=d.useState([]),[l,y]=d.useState(null),[W,q]=d.useState(!1),[B,T]=d.useState(0),[H,ce]=d.useState("overview"),[k,oe]=d.useState([]),[D,Y]=d.useState([]),[M,z]=d.useState([]),[K,de]=d.useState(!1),[O,xe]=d.useState("friends"),[U,qe]=d.useState(""),[Q,Te]=d.useState([]),[j,me]=d.useState({}),X=()=>{var s;(s=v.state)!=null&&s.from?I(v.state.from):I(-1)},Me=((he=v.state)==null?void 0:he.fromLabel)||"Back";d.useEffect(()=>{ue()},[p,n]);const ue=async()=>{A(!0);try{let s=null,t=null;if(p?(s=await ee.getByUsername(p),s?t=s.uid:(s=await ee.get(p),t=p)):(t=n==null?void 0:n.uid,s=await ee.get(t)),Fe(t===(n==null?void 0:n.uid)),!s){_(null),A(!1);return}let o={status:c.NONE};if(n&&t!==n.uid)try{o=await x.getFriendshipStatus(n.uid,t),y(o)}catch(u){console.error("Friend status error:",u)}try{const u=await x.getFriendCount(t);if(T(u),t===(n==null?void 0:n.uid)){const G=await x.getReceivedRequests(n.uid);Y(G)}}catch(u){console.error("Friend count error:",u)}const i=s.defaultVisibility||(s.isPrivate?"private":"public"),a=o.status===c.FRIENDS;if(!(t===(n==null?void 0:n.uid)||L||i==="public"||i==="friends"&&a)){_({...s,isPrivate:!0,defaultVisibility:i,uid:t}),A(!1);return}_(s);const[m,h]=await Promise.all([Ke.getByUser(t,500),Qe.getByUser(t)]),P=m.filter(u=>u.status==="completed"),Ve=h.filter(u=>u.status==="completed"),Ne=[...P,...Ve];Pe([...m,...h]);const f={bench:0,squat:0,deadlift:0};Ne.forEach(u=>{u.exercises&&u.exercises.forEach(G=>{var ge,je;const N=((ge=G.name)==null?void 0:ge.toLowerCase())||"";(je=G.sets)==null||je.forEach(be=>{const Z=parseFloat(be.actualWeight)||parseFloat(be.prescribedWeight)||0;N.includes("bench")&&!N.includes("incline")&&!N.includes("decline")?f.bench=Math.max(f.bench,Z):N.includes("squat")&&!N.includes("front")&&!N.includes("hack")?f.squat=Math.max(f.squat,Z):N.includes("deadlift")&&!N.includes("romanian")&&!N.includes("rdl")&&!N.includes("stiff")&&(f.deadlift=Math.max(f.deadlift,Z))})})}),De({totalWorkouts:Ne.length,bench:f.bench,squat:f.squat,deadlift:f.deadlift,total:f.bench+f.squat+f.deadlift});const _e=await Xe.getByUser(t);Ae(_e.filter(u=>u.status==="active"));const We=await Je.getFeed(5,null,t);Ce(We.items)}catch(s){console.error("Error loading profile:",s)}finally{A(!1)}},J=async()=>{if(!(!n||K)){de(!0);try{const s=await ts(as(ns,"users")),t={},o=[];s.docs.forEach(m=>{const h={id:m.id,uid:m.id,...m.data()};t[m.id]=h,m.id!==n.uid&&o.push(h)}),Te(o);const[i,a,b]=await Promise.all([x.getFriends(n.uid),x.getReceivedRequests(n.uid),x.getSentRequests(n.uid)]);oe(i.map(m=>t[m]).filter(Boolean)),Y(a),z(b),T(i.length)}catch(s){console.error("Error loading friends:",s)}finally{de(!1)}}},C=async(s,t,o)=>{me(i=>({...i,[t]:!0}));try{if(s==="accept")await x.acceptRequest(t),await J();else if(s==="decline")await x.declineRequest(t),Y(i=>i.filter(a=>a.id!==t));else if(s==="cancel")await x.cancelRequest(t),z(i=>i.filter(a=>a.id!==t));else if(s==="remove"){if(!confirm("Remove this friend?"))return;await x.removeFriend(n.uid,t),oe(i=>i.filter(a=>(a.uid||a.id)!==t)),T(i=>Math.max(0,i-1))}else if(s==="send"){await x.sendRequest(n.uid,t);const i=await x.getSentRequests(n.uid);z(i)}}catch(i){console.error("Friend action error:",i),alert(i.message)}finally{me(i=>({...i,[t]:!1}))}},Oe=s=>{switch(s){case $.WORKOUT:return e.jsx(ls,{className:"w-4 h-4 text-green-400"});case $.CARDIO:return e.jsx(te,{className:"w-4 h-4 text-orange-400"});case $.GOAL_COMPLETED:return e.jsx(Ns,{className:"w-4 h-4 text-yellow-400"});case $.GOAL_CREATED:return e.jsx(is,{className:"w-4 h-4 text-purple-400"});default:return e.jsx(te,{className:"w-4 h-4 text-iron-400"})}},Ue=()=>{const s=rs(fs(R),{weekStartsOn:1}),t=cs(gs(R),{weekStartsOn:1});return js({start:s,end:t})},Ge=s=>{const t=V(s);return Ie.filter(o=>{var a;const i=(a=o.date)!=null&&a.toDate?o.date.toDate():new Date(o.date);return V(i)===t})},$e=s=>{const t=V(s);return Le.find(o=>V(o.targetDate)===t)};if(ke)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(S,{className:"w-8 h-8 text-flame-500 animate-spin"})});if(!r)return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(F,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"User Not Found"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"This user doesn't exist or has been deleted."}),e.jsx("button",{onClick:X,className:"btn-primary",children:"Go Back"})]});if(r.isPrivate&&!E){const s=async()=>{if(n){q(!0);try{!l||l.status===c.NONE?(await x.sendRequest(n.uid,r.uid||p),y({status:c.PENDING_SENT})):l.status===c.PENDING_SENT?(await x.cancelRequest(l.requestId),y({status:c.NONE})):l.status===c.PENDING_RECEIVED&&(await x.acceptRequest(l.requestId),y({status:c.FRIENDS}),ue())}catch(t){console.error("Friend action error:",t)}finally{q(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[e.jsx(os,{className:"w-16 h-16 text-iron-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:r.defaultVisibility==="friends"?"Friends Only":"Private Profile"}),e.jsx("p",{className:"text-iron-500 mb-6",children:r.defaultVisibility==="friends"?"This user only shares their activity with friends.":"This user has set their profile to private."}),n&&r.defaultVisibility==="friends"&&e.jsxs("button",{onClick:s,disabled:W||(l==null?void 0:l.status)===c.FRIENDS,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors mb-4 ${(l==null?void 0:l.status)===c.PENDING_SENT?"bg-iron-700 text-iron-300 hover:bg-iron-600":(l==null?void 0:l.status)===c.PENDING_RECEIVED?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-flame-500/20 text-flame-400 hover:bg-flame-500/30"}`,children:[W?e.jsx(S,{className:"w-4 h-4 animate-spin inline mr-1"}):null,(l==null?void 0:l.status)===c.PENDING_SENT?"Cancel Request":(l==null?void 0:l.status)===c.PENDING_RECEIVED?"Accept Friend Request":"Send Friend Request"]}),e.jsx("br",{}),e.jsx("button",{onClick:X,className:"btn-primary",children:"Go Back"})]})}return e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[((fe=v.state)==null?void 0:fe.from)&&e.jsxs("button",{onClick:X,className:"inline-flex items-center gap-2 text-iron-400 hover:text-iron-200 mb-6",children:[e.jsx(Ze,{className:"w-4 h-4"}),Me]}),e.jsx("div",{className:"card-steel p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-iron-800 flex items-center justify-center",children:r.photoURL?e.jsx("img",{src:r.photoURL,alt:"",className:"w-20 h-20 rounded-full"}):e.jsx(F,{className:"w-10 h-10 text-iron-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-display text-iron-100",children:[r.displayName||"User",L&&!E&&e.jsx("span",{className:`ml-2 text-xs font-normal px-2 py-0.5 rounded-full align-middle ${(r.defaultVisibility||"public")==="public"?"bg-green-500/10 text-green-400":r.defaultVisibility==="friends"?"bg-blue-500/10 text-blue-400":"bg-red-500/10 text-red-400"}`,children:r.defaultVisibility||"public"})]}),r.username&&e.jsxs("p",{className:"text-sm text-flame-400",children:["@",r.username]}),r.createdAt&&e.jsxs("p",{className:"text-xs text-iron-500 mt-1",children:["Member since ",se(r.createdAt.toDate?r.createdAt.toDate():new Date(r.createdAt),"MMMM yyyy"),B>0&&e.jsxs(e.Fragment,{children:[" · ",e.jsxs("button",{onClick:()=>{ce("friends"),k.length===0&&J()},className:"text-flame-400 hover:text-flame-300",children:[B," friend",B!==1?"s":""]})]})]}),((pe=r.badges)==null?void 0:pe.length)>0&&e.jsx("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:r.badges.map(s=>e.jsx("span",{title:s.name,className:"w-7 h-7 flex items-center justify-center bg-iron-800 border border-iron-700 rounded-lg text-sm cursor-default hover:bg-iron-700 transition-colors",children:s.icon},s.id))})]}),E?e.jsx(w,{to:"/settings",className:"btn-secondary text-sm",children:"Edit Profile"}):n&&e.jsx(bs,{friendStatus:l,loading:W,onAction:async()=>{q(!0);try{const s=r.uid||p;!l||l.status===c.NONE?(await x.sendRequest(n.uid,s),y({status:c.PENDING_SENT})):l.status===c.PENDING_SENT?(await x.cancelRequest(l.requestId),y({status:c.NONE})):l.status===c.PENDING_RECEIVED?(await x.acceptRequest(l.requestId),y({status:c.FRIENDS})):l.status===c.FRIENDS&&confirm("Remove this friend?")&&(await x.removeFriend(n.uid,s),y({status:c.NONE}),T(t=>Math.max(0,t-1)))}catch(s){console.error("Friend action error:",s),alert(s.message)}finally{q(!1)}}})]})}),E&&e.jsx("div",{className:"flex gap-2 mb-6",children:[{key:"overview",label:"Overview",icon:te},{key:"friends",label:"Friends",icon:ve,badge:D.length||null}].map(s=>e.jsxs("button",{onClick:()=>{ce(s.key),s.key==="friends"&&k.length===0&&!K&&J()},className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-colors ${H===s.key?"bg-flame-500/20 text-flame-400 border border-flame-500/30":"bg-iron-800/50 text-iron-400 border border-iron-700/50 hover:text-iron-200"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.badge>0&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-flame-500 text-white font-bold",children:s.badge})]},s.key))}),E&&H==="friends"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:[{key:"friends",label:"My Friends",count:k.length},{key:"requests",label:"Requests",count:D.length},{key:"sent",label:"Sent",count:M.length},{key:"find",label:"Find People"}].map(s=>e.jsxs("button",{onClick:()=>xe(s.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${O===s.key?"bg-iron-800 text-iron-100":"text-iron-500 hover:text-iron-300"}`,children:[s.label,s.count>0&&e.jsx("span",{className:"ml-1.5 text-xs opacity-60",children:s.count})]},s.key))}),K?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(S,{className:"w-6 h-6 text-flame-500 animate-spin mx-auto"}),e.jsx("p",{className:"text-iron-500 mt-3 text-sm",children:"Loading friends..."})]}):O==="friends"?k.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(ve,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500 mb-2",children:"No friends yet"}),e.jsx("button",{onClick:()=>xe("find"),className:"text-sm text-flame-400 hover:text-flame-300",children:"Find people to add"})]}):e.jsx("div",{className:"space-y-2",children:k.map(s=>{const t=s.uid||s.id;return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${s.username||t}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(F,{className:"w-5 h-5 text-iron-400"})}),e.jsxs(w,{to:`/profile/${s.username||t}`,className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:s.displayName||"User"}),s.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",s.username]})]}),e.jsx("button",{onClick:()=>C("remove",t),disabled:j[t],className:"p-2 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Remove friend",children:j[t]?e.jsx(S,{className:"w-4 h-4 animate-spin"}):e.jsx(ds,{className:"w-4 h-4"})})]},t)})}):O==="requests"?e.jsx("div",{className:"space-y-2",children:D.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(ie,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No pending requests"})]}):D.map(s=>{const t=Q.find(o=>o.id===s.from)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${t.username||s.from}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(F,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>C("accept",s.id),disabled:j[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[j[s.id]?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ae,{className:"w-3.5 h-3.5"}),"Accept"]}),e.jsx("button",{onClick:()=>C("decline",s.id),disabled:j[s.id],className:"p-1.5 text-iron-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(ye,{className:"w-4 h-4"})})]})]},s.id)})}):O==="sent"?e.jsx("div",{className:"space-y-2",children:M.length===0?e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx(ne,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"No sent requests"})]}):M.map(s=>{const t=Q.find(o=>o.id===s.to)||{displayName:"User"};return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${t.username||s.to}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(F,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:t.displayName}),t.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",t.username]})]}),e.jsxs("button",{onClick:()=>C("cancel",s.id),disabled:j[s.id],className:"flex items-center gap-1 px-3 py-1.5 bg-iron-700 text-iron-300 hover:bg-iron-600 rounded-lg text-sm font-medium transition-colors",children:[j[s.id]?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ye,{className:"w-3.5 h-3.5"}),"Cancel"]})]},s.id)})}):e.jsxs("div",{children:[e.jsx("div",{className:"card-steel p-4 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search by name or username...",value:U,onChange:s=>qe(s.target.value),className:"input-field w-full pl-10",autoFocus:!0})]})}),U.trim()?(()=>{const s=new Set(k.map(a=>a.uid||a.id)),t=new Set(M.map(a=>a.to)),o=new Set(D.map(a=>a.from)),i=Q.filter(a=>{var m,h;const b=U.toLowerCase();return(((m=a.displayName)==null?void 0:m.toLowerCase().includes(b))||((h=a.username)==null?void 0:h.toLowerCase().includes(b)))&&!s.has(a.id)});return i.length===0?e.jsx("div",{className:"card-steel p-8 text-center",children:e.jsxs("p",{className:"text-iron-500",children:['No users found matching "',U,'"']})}):e.jsx("div",{className:"space-y-2",children:i.map(a=>{const b=t.has(a.id),m=o.has(a.id);return e.jsxs("div",{className:"card-steel p-4 flex items-center gap-3",children:[e.jsx(w,{to:`/profile/${a.username||a.id}`,className:"w-10 h-10 rounded-full bg-iron-800 flex items-center justify-center hover:bg-iron-700 transition-colors",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:"",className:"w-10 h-10 rounded-full"}):e.jsx(F,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-iron-200 truncate",children:a.displayName||"User"}),a.username&&e.jsxs("p",{className:"text-xs text-flame-400",children:["@",a.username]})]}),b?e.jsxs("span",{className:"text-xs text-iron-500 flex items-center gap-1",children:[e.jsx(ie,{className:"w-3.5 h-3.5"})," Pending"]}):m?e.jsxs("button",{onClick:()=>{const h=D.find(P=>P.from===a.id);h&&C("accept",h.id)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(ae,{className:"w-3.5 h-3.5"})," Accept"]}):e.jsxs("button",{onClick:()=>C("send",a.id),disabled:j[a.id],className:"flex items-center gap-1 px-3 py-1.5 bg-flame-500/20 text-flame-400 hover:bg-flame-500/30 rounded-lg text-sm font-medium transition-colors",children:[j[a.id]?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ne,{className:"w-3.5 h-3.5"}),"Add"]})]},a.id)})})})():e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Ee,{className:"w-12 h-12 text-iron-600 mx-auto mb-4"}),e.jsx("p",{className:"text-iron-500",children:"Type a name or username to find people"})]})]})]}),(H==="overview"||!E)&&e.jsxs(e.Fragment,{children:[g&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"card-steel p-4 text-center",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:"Bench Press"}),e.jsx("p",{className:"text-2xl font-display text-flame-400",children:g.bench>0?`${g.bench}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"})]}),e.jsxs("div",{className:"card-steel p-4 text-center",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:"Squat"}),e.jsx("p",{className:"text-2xl font-display text-purple-400",children:g.squat>0?`${g.squat}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"})]}),e.jsxs("div",{className:"card-steel p-4 text-center",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:"Deadlift"}),e.jsx("p",{className:"text-2xl font-display text-green-400",children:g.deadlift>0?`${g.deadlift}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"})]}),e.jsxs("div",{className:"card-steel p-4 text-center",children:[e.jsx("p",{className:"text-xs text-iron-500 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-display text-yellow-400",children:g.total>0?`${g.total}`:"—"}),e.jsx("p",{className:"text-xs text-iron-600",children:"lbs"})]})]}),e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-display text-lg text-iron-100 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-flame-500"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re(ms(R,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(xs,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm text-iron-300 w-28 text-center",children:se(R,"MMM yyyy")}),e.jsx("button",{onClick:()=>re(us(R,1)),className:"p-1 text-iron-400 hover:text-iron-200",children:e.jsx(Se,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["M","T","W","T","F","S","S"].map((s,t)=>e.jsx("div",{className:"text-center text-xs text-iron-500 py-1",children:s},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Ue().map((s,t)=>{const o=Ge(s),i=o.length>0,a=o.some(P=>P.status==="completed"),b=$e(s),m=hs(s,R),h=es(s);return e.jsxs("div",{className:`
                  relative aspect-square flex items-center justify-center text-xs rounded-md
                  ${m?"text-iron-300":"text-iron-600"}
                  ${h?"ring-1 ring-flame-500":""}
                  ${a?"bg-green-500/20":i?"bg-flame-500/20":""}
                `,children:[se(s,"d"),b&&e.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-yellow-400"})]},t)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-iron-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-flame-500/20"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),e.jsx("span",{children:"Goal"})]})]})]}),e.jsxs("div",{className:"card-steel p-4",children:[e.jsx("h2",{className:"font-display text-lg text-iron-100 mb-4",children:"Recent Activity"}),le.length===0?e.jsx("p",{className:"text-center text-iron-500 py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-3",children:le.map(s=>{var t,o;return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-iron-800 last:border-0",children:[Oe(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-iron-300",children:((t=s.data)==null?void 0:t.name)||s.type.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-iron-600",children:((o=s.createdAt)==null?void 0:o.toDate)&&ps(s.createdAt.toDate(),{addSuffix:!0})})]}),s.reactionCount>0&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-iron-500",children:e.jsxs("span",{children:[s.reactionCount," reaction",s.reactionCount!==1?"s":""]})})]},s.id)})}),e.jsx(w,{to:`/feed?user=${(r==null?void 0:r.uid)||(n==null?void 0:n.uid)}`,className:"block mt-4 text-center text-sm text-flame-400 hover:text-flame-300",children:"View all activity"})]}),E&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"card-steel overflow-hidden divide-y divide-iron-800",children:[{to:"/calendar",icon:we,label:"Calendar",desc:"Monthly view & scheduling"},{to:"/health",icon:Re,label:"Health",desc:"Weight, sleep & body metrics"},{to:"/settings",icon:ss,label:"Settings",desc:"Preferences & account"}].map(s=>e.jsxs(w,{to:s.to,state:{from:"/profile",fromLabel:"Back to Profile"},className:"flex items-center gap-4 p-4 hover:bg-iron-800/50 transition-colors",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx(s.icon,{className:"w-5 h-5 text-iron-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-200",children:s.label}),e.jsx("p",{className:"text-xs text-iron-500",children:s.desc})]}),e.jsx(Se,{className:"w-4 h-4 text-iron-600"})]},s.to))})})]})]})}export{Ps as default};
