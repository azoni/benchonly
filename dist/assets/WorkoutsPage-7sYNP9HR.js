const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-zXXKWKZ_.js","assets/index-BAW7rKOA.css"])))=>i.map(i=>d[i]);
import{G as Le,u as rs,d as as,b as is,r as m,_ as ns,a3 as Me,g as U,aC as os,v as q,av as ls,z as k,an as cs,y as S,j as e,ay as ie,L as E,S as ne,P as $e,E as qe,T as ds,F as oe,s as le,m as N,aA as xs,U as ms,I as ce,k as us,o as de,X as Ee,as as B,i as xe,aQ as ps,ai as Pe,az as me,aR as hs,ax as gs}from"./index-zXXKWKZ_.js";import{s as _e}from"./index-BKYiw15g.js";import{e as fs}from"./index-BVPfNaAJ.js";import{S as js}from"./search-Igh_rCc0.js";import{M as ue}from"./message-square-MlN3M5Jt.js";import{C as ys}from"./clock-Ca3LuuuN.js";import{M as bs}from"./more-vertical-BHpKLqER.js";import{P as Ns}from"./pen-C6VF8Q3Z.js";import{S as vs}from"./share-2-B3mDeDU6.js";import{T as ws}from"./trash-2-DNWomCfo.js";import{i as ks}from"./index-Cr0qh0Z8.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=Le("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);function _s(){var De,Re,Te,Ae;rs("Workouts");const{user:g,userProfile:W,updateProfile:Q,isGuest:H,isAppAdmin:D}=as(),K=is(),[P,_]=m.useState([]),[V,pe]=m.useState([]),[Oe,he]=m.useState(!0),[Y,Fe]=m.useState(""),[X,b]=m.useState(null),[L,R]=m.useState(null),[h,Z]=m.useState("todo"),[v,ee]=m.useState([]),[O,ge]=m.useState([]),[F,fe]=m.useState(null),[G,je]=m.useState("received"),[p,T]=m.useState(null),[z,ye]=m.useState(!1),[A,C]=m.useState(null),[Ge,I]=m.useState(!1),[y,ze]=m.useState("custom_workout"),[be,Ne]=m.useState(""),[se,ve]=m.useState(""),[M,Ie]=m.useState(null),[te,we]=m.useState(!1);m.useEffect(()=>{g&&Ue()},[g]);const Ue=async()=>{try{if(H){const{getSampleWorkouts:n}=await ns(async()=>{const{getSampleWorkouts:d}=await import("./index-zXXKWKZ_.js").then(f=>f.be);return{getSampleWorkouts:d}},__vite__mapDeps([0,1]));_(n()),he(!1);return}const[s,r,t,i,o,l]=await Promise.all([Me.getByUser(g.uid,100),U.getByUser(g.uid).catch(()=>[]),U.getPendingReviews(g.uid).catch(()=>[]),os.getByUser(g.uid).catch(()=>[]),q.getSharedWithMe(g.uid).catch(n=>(console.error("getSharedWithMe error:",n),[])),q.getSharedByMe(g.uid).catch(n=>(console.error("getSharedByMe error:",n),[]))]);ee(o),ge(l),pe(t);const x=r.map(n=>({...n,isGroupWorkout:!0})),c=i.filter(n=>{var d;return n.type==="recurring"&&((d=n.days)==null?void 0:d.length)>0}),a=[];if(c.length>0){const n=ls(new Date),d=_e(n,30),f=fs({start:d,end:_e(n,1)});for(const j of c){const w=j.skippedDates||[];for(const $ of f){const ts=k($,"EEEE").toLowerCase(),ae=cs($);j.days.includes(ts)&&!w.includes(ae)&&a.push({id:`recurring_${j.id}_${ae}`,name:j.name||"Recurring Activity",date:ae,status:"completed",isRecurring:!0,scheduleId:j.id,workoutType:j.workoutType||"cardio",duration:j.duration,exercises:[]})}}}const u=[...s,...x,...a].sort((n,d)=>{var w,$;const f=(w=n.date)!=null&&w.toDate?n.date.toDate():new Date(n.date);return(($=d.date)!=null&&$.toDate?d.date.toDate():new Date(d.date))-f});_(u)}catch(s){console.error("Error loading workouts:",s)}finally{he(!1)}},Be=async s=>{if(L!==s.id){R(s.id);return}if(H){_(r=>r.filter(t=>t.id!==s.id)),b(null),R(null);return}try{s.isGroupWorkout?await U.delete(s.id):await Me.delete(s.id),_(r=>r.filter(t=>t.id!==s.id)),b(null),R(null)}catch(r){console.error("Error deleting workout:",r),R(null)}},Je=async s=>{try{await U.approveReview(s),pe(r=>r.filter(t=>t.id!==s))}catch(r){console.error("Error approving:",r)}},ke=P.filter(s=>{var o,l;if(!Y)return!0;const r=Y.toLowerCase(),t=(o=s.name)==null?void 0:o.toLowerCase().includes(r),i=(l=s.exercises)==null?void 0:l.some(x=>{var c;return(c=x.name)==null?void 0:c.toLowerCase().includes(r)});return t||i}),re=ke.filter(s=>s.isGroupWorkout?s.status!=="completed":s.status==="scheduled"),Se=ke.filter(s=>s.isGroupWorkout?s.status==="completed":s.status!=="scheduled"),Qe=[...re].sort((s,r)=>{const t=S(s.date),i=S(r.date);return((t==null?void 0:t.getTime())||0)-((i==null?void 0:i.getTime())||0)}),He=[...Se].sort((s,r)=>{const t=S(s.date),i=S(r.date);return((i==null?void 0:i.getTime())||0)-((t==null?void 0:t.getTime())||0)}),Ke=s=>{try{const r=S(s);return isNaN(r.getTime())?"—":Pe(r)?"Today":k(r,"EEE, MMM d")}catch{return"—"}},Ve=s=>{try{const r=S(s);return isNaN(r.getTime())?!1:ks(r)&&!Pe(r)}catch{return!1}},Ye=async(s,r=null)=>{if(!F){fe(s.id);try{const t=await q.saveAsWorkout(s.id,g.uid,r);ee(i=>i.map(o=>o.id===s.id?{...o,status:"saved"}:o)),T(null),C(null),K(`/workouts/${t.id}`)}catch(t){console.error("Save shared error:",t)}finally{fe(null)}}},Xe=async()=>{var s;if(!(z||!p)){ye(!0);try{const r={};P.forEach(n=>{(n.exercises||[]).forEach(d=>{const f=(d.name||"").toLowerCase().trim();(d.sets||[]).forEach(j=>{const w=parseFloat(j.actualWeight||j.prescribedWeight||0);w>(r[f]||0)&&(r[f]=w)})})});const t=((s=p.workout)==null?void 0:s.exercises)||[],i=`Adjust the weights in this shared workout to match my training level. Return ONLY a valid JSON array — no other text.

My heaviest weights per exercise: ${JSON.stringify(r)}

Shared workout exercises to adjust:
${JSON.stringify(t.map(n=>({name:n.name,type:n.type,sets:(n.sets||[]).map(d=>({prescribedWeight:d.prescribedWeight,prescribedReps:d.prescribedReps,prescribedTime:d.prescribedTime}))})))}

Rules:
- Adjust prescribedWeight values proportionally to match my strength level
- If I have no data for an exercise, keep the original weight
- Keep exercise names, set count, reps, and times exactly the same
- Return this exact JSON format: [{"name":"...","type":"...","sets":[{"prescribedWeight":...,"prescribedReps":...,"prescribedTime":...}]}]`,o=(W==null?void 0:W.credits)??0,l=B["ask-assistant"];if(!D&&o<l){alert(`Not enough credits. This costs ${l} credit.`);return}D||(await me.deduct(g.uid,"ask-assistant"),Q({credits:o-l}));const x=await hs.askAssistant(i,{maxLifts:r}),c=x.response||x.message||"";let a=null;const u=c.match(/```(?:json)?\s*([\s\S]*?)```/);if(u)a=JSON.parse(u[1].trim());else{const n=c.trim(),d=n.indexOf("["),f=n.lastIndexOf("]");d!==-1&&f!==-1&&(a=JSON.parse(n.slice(d,f+1)))}Array.isArray(a)&&a.length>0?C(a):alert("Could not parse adjusted weights. Try again.")}catch(r){console.error("Adjust weights error:",r),alert("Failed to adjust weights. Please try again.")}finally{ye(!1)}}},Ze=async s=>{try{await q.dismiss(s),ee(r=>r.map(t=>t.id===s?{...t,status:"dismissed"}:t))}catch(r){console.error("Dismiss error:",r)}},es=async s=>{try{await q.revoke(s),ge(r=>r.filter(t=>t.id!==s))}catch(r){console.error("Revoke error:",r)}},We=(s,r=null)=>{ze(s),Ie(r),Ne(""),ve(""),I(!0)},ss=async()=>{var i;if(!g)return;const s=y==="custom_workout"?"trainer-custom-workout":"trainer-review",r=B[s],t=(W==null?void 0:W.credits)??0;if(!D&&t<r){alert(`Not enough credits. This costs ${r} credits and you have ${t}.`);return}we(!0);try{D||(await me.deduct(g.uid,s),Q({credits:t-r})),await gs.create(g.uid,{type:y,notes:be,targetDate:se||null,workoutId:M||null,workoutName:M?((i=P.find(o=>o.id===M))==null?void 0:i.name)||"":null,creditCost:r}),I(!1),alert(y==="custom_workout"?"Workout request submitted! A trainer will build your workout.":"Review request submitted! A trainer will review your workout.")}catch(o){console.error("Error submitting request:",o),D||(await me.add(g.uid,r),Q({credits:t})),alert("Failed to submit request. Please try again.")}finally{we(!1)}};if(Oe)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-10 bg-iron-800 rounded-lg w-1/3"}),e.jsx("div",{className:"h-12 bg-iron-800 rounded-lg"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-24 bg-iron-800 rounded-xl"},s))})]})});const Ce=h==="todo"?Qe:He;return e.jsxs("div",{className:"max-w-4xl mx-auto pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 gap-3",children:[e.jsx("h1",{className:"text-2xl font-display text-iron-50 flex-shrink-0",children:"Workouts"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>We("custom_workout"),className:"btn-secondary flex items-center gap-1.5 relative text-sm",title:"Request custom workout from a real trainer",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Trainer"}),e.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium leading-none hidden sm:inline",children:"Beta"})]}),e.jsxs(E,{to:"/workouts/generate",className:"btn-secondary flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"AI"})]}),e.jsxs(E,{to:"/workouts/new",className:"btn-primary flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"New"]})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search workouts or exercises...",value:Y,onChange:s=>Fe(s.target.value),className:"input-field pl-12"})]}),V.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-xs text-amber-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(qe,{className:"w-3.5 h-3.5"}),"Needs Your Review (",V.length,")"]}),e.jsx("div",{className:"space-y-2",children:V.map(s=>{let r="";try{const t=S(s.date);isNaN(t.getTime())||(r=k(t,"MMM d"))}catch{}return e.jsxs("div",{className:"card-steel p-3 border-amber-500/20 bg-amber-500/5 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(qe,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-iron-100 truncate",children:s.name||"Group Workout"}),e.jsxs("p",{className:"text-xs text-iron-500",children:[r," · Coach logged for you"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsx("button",{onClick:()=>Je(s.id),className:"p-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors",title:"Approve",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(E,{to:`/workouts/group/${s.id}`,className:"p-2 bg-iron-800 hover:bg-iron-700 text-iron-300 rounded-lg transition-colors",title:"Review details",children:e.jsx(oe,{className:"w-4 h-4"})})]})]},s.id)})})]}),e.jsxs("div",{className:"flex gap-1.5 mb-6",children:[e.jsxs("button",{onClick:()=>Z("todo"),className:`flex-1 py-2.5 px-2 rounded-xl text-sm font-medium transition-colors flex items-center justify-center gap-1.5 ${h==="todo"?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:["To Do",re.length>0&&e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${h==="todo"?"bg-white/20":"bg-flame-500/20 text-flame-400"}`,children:re.length})]}),e.jsxs("button",{onClick:()=>Z("completed"),className:`flex-1 py-2.5 px-2 rounded-xl text-sm font-medium transition-colors flex items-center justify-center gap-1.5 ${h==="completed"?"bg-green-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:["Done",e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${h==="completed"?"bg-white/20":"bg-iron-700"}`,children:Se.length})]}),e.jsxs("button",{onClick:()=>Z("shared"),className:`flex-1 py-2.5 px-2 rounded-xl text-sm font-medium transition-colors flex items-center justify-center gap-1.5 ${h==="shared"?"bg-purple-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:["Shared",v.filter(s=>s.status==="pending").length>0&&e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${h==="shared"?"bg-white/20":"bg-purple-500/20 text-purple-400"}`,children:v.filter(s=>s.status==="pending").length})]})]}),h==="shared"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>je("received"),className:`flex-1 py-2.5 px-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${G==="received"?"bg-purple-500/15 text-purple-400 border border-purple-500/30":"bg-iron-800/50 text-iron-500 hover:text-iron-300"}`,children:[e.jsx(J,{className:"w-4 h-4"}),"Received",v.filter(s=>s.status==="pending").length>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs bg-purple-500/20 text-purple-400",children:v.filter(s=>s.status==="pending").length})]}),e.jsxs("button",{onClick:()=>je("sent"),className:`flex-1 py-2.5 px-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${G==="sent"?"bg-purple-500/15 text-purple-400 border border-purple-500/30":"bg-iron-800/50 text-iron-500 hover:text-iron-300"}`,children:[e.jsx(le,{className:"w-4 h-4"}),"Sent",O.length>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs bg-iron-700 text-iron-400",children:O.length})]})]}),G==="received"&&(()=>{const s=v.filter(t=>t.status==="pending"),r=v.filter(t=>t.status!=="pending");return v.length>0?e.jsxs("div",{className:"space-y-3",children:[s.map((t,i)=>{var o,l,x,c;return e.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.03},onClick:()=>{T(t),C(null)},className:"card-steel rounded-xl cursor-pointer hover:border-purple-500/30 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-purple-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"w-7 h-7 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-iron-100",children:((o=t.workout)==null?void 0:o.name)||"Shared Workout"}),e.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:["From ",t.fromUserName||"someone",((l=t.createdAt)==null?void 0:l.toDate)&&` · ${k(t.createdAt.toDate(),"MMM d")}`]}),t.message&&e.jsxs("div",{className:"flex items-start gap-1.5 mt-1.5",children:[e.jsx(ue,{className:"w-3 h-3 text-iron-600 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-500 italic",children:['"',t.message,'"']})]}),((c=(x=t.workout)==null?void 0:x.exercises)==null?void 0:c.length)>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.workout.exercises.slice(0,3).map((a,u)=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-iron-800 text-iron-400 rounded",children:a.name},u)),t.workout.exercises.length>3&&e.jsxs("span",{className:"text-xs text-iron-500 px-1",children:["+",t.workout.exercises.length-3]})]})]}),e.jsx(oe,{className:"w-5 h-5 text-iron-600 flex-shrink-0"})]})},t.id)}),r.length>0&&e.jsxs(e.Fragment,{children:[s.length>0&&e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("div",{className:"flex-1 h-px bg-iron-800"}),e.jsx("span",{className:"text-[11px] text-iron-600 uppercase tracking-wider",children:"History"}),e.jsx("div",{className:"flex-1 h-px bg-iron-800"})]}),r.map((t,i)=>{var x,c;const o=t.status==="saved"?"Saved":"Dismissed",l=t.status==="saved"?"bg-green-500/15 text-green-400":"bg-iron-700/50 text-iron-500";return e.jsx("div",{className:"card-steel rounded-xl opacity-60",children:e.jsxs("div",{className:"flex items-center gap-3 p-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"w-5 h-5 text-iron-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-iron-300 truncate",children:((x=t.workout)==null?void 0:x.name)||"Shared Workout"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium flex-shrink-0 ${l}`,children:o})]}),e.jsxs("p",{className:"text-xs text-iron-600 mt-0.5",children:["From ",t.fromUserName||"someone",((c=t.createdAt)==null?void 0:c.toDate)&&` · ${k(t.createdAt.toDate(),"MMM d")}`]})]})]})},t.id)})]})]}):e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-iron-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-iron-600"})}),e.jsx("h3",{className:"text-lg font-display text-iron-200 mb-2",children:"No Received Workouts"}),e.jsx("p",{className:"text-iron-500",children:"When friends share workouts with you, they'll appear here."})]})})(),G==="sent"&&(O.length>0?e.jsx("div",{className:"space-y-3",children:O.map((s,r)=>{var o,l,x,c;const t=s.status==="saved"?"Saved":s.status==="dismissed"?"Dismissed":s.status==="pending"?"Pending":s.status,i=s.status==="saved"?"bg-green-500/15 text-green-400":s.status==="dismissed"?"bg-red-500/15 text-red-400":"bg-yellow-500/15 text-yellow-400";return e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:"card-steel rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-purple-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(le,{className:"w-7 h-7 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-iron-100 truncate",children:((o=s.workout)==null?void 0:o.name)||"Shared Workout"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium flex-shrink-0 ${i}`,children:t})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-0.5",children:["To ",s.toUserName||"a friend",((l=s.createdAt)==null?void 0:l.toDate)&&` · ${k(s.createdAt.toDate(),"MMM d")}`]}),s.message&&e.jsxs("div",{className:"flex items-start gap-1.5 mt-1.5",children:[e.jsx(ue,{className:"w-3 h-3 text-iron-600 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-500 italic",children:['"',s.message,'"']})]}),((c=(x=s.workout)==null?void 0:x.exercises)==null?void 0:c.length)>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.workout.exercises.slice(0,3).map((a,u)=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-iron-800 text-iron-400 rounded",children:a.name},u)),s.workout.exercises.length>3&&e.jsxs("span",{className:"text-xs text-iron-500 px-1",children:["+",s.workout.exercises.length-3]})]})]})]}),s.status==="pending"&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{onClick:()=>es(s.id),className:"px-4 py-2 bg-iron-800 text-iron-400 rounded-lg text-sm hover:bg-iron-700 hover:text-red-400 transition-colors",children:"Revoke"})})]},s.id)})}):e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-iron-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(le,{className:"w-8 h-8 text-iron-600"})}),e.jsx("h3",{className:"text-lg font-display text-iron-200 mb-2",children:"No Sent Workouts"}),e.jsx("p",{className:"text-iron-500",children:"Share a workout with a friend and it'll show up here."})]}))]}),h==="shared"?null:Ce.length>0?e.jsx("div",{className:"space-y-3",children:Ce.map((s,r)=>{var x,c;const t=h==="todo"&&Ve(s.date),i=s.isRecurring,o=i?"div":E,l=i?{className:"flex items-center gap-4 p-4 pr-12"}:{to:s.isGroupWorkout?`/workouts/group/${s.id}`:`/workouts/${s.id}`,state:{from:"/workouts",fromLabel:"Back to Workouts"},className:"flex items-center gap-4 p-4 pr-12"};return e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:`card-steel rounded-xl group relative ${t?"border-red-500/50":""}`,children:[e.jsxs(o,{...l,children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 ${i?"bg-emerald-500/10":s.isGroupWorkout?"bg-cyan-500/10":t?"bg-red-500/10":h==="todo"?"bg-yellow-500/10":s.workoutType==="cardio"?"bg-orange-500/10":"bg-green-500/10"}`,children:i?e.jsx(xs,{className:"w-7 h-7 text-emerald-400"}):s.isGroupWorkout?e.jsx(ms,{className:"w-7 h-7 text-cyan-400"}):e.jsx(ce,{className:`w-7 h-7 ${t?"text-red-400":h==="todo"?"text-yellow-400":s.workoutType==="cardio"?"text-orange-400":"text-green-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-iron-100 group-hover:text-flame-400 transition-colors",children:s.name||"Untitled Workout"}),i&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-400 rounded",children:"Recurring"}),s.isGroupWorkout&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-cyan-500/20 text-cyan-400 rounded",children:"Group"}),t&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-500/20 text-red-400 rounded",children:"Overdue"}),s.workoutType==="cardio"&&!i&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-orange-500/20 text-orange-400 rounded",children:"Cardio"}),s.workoutCategory&&s.workoutCategory!=="strength"&&(()=>{const a={hiit:"bg-red-500/20 text-red-400",wod:"bg-yellow-500/20 text-yellow-400",mobility:"bg-green-500/20 text-green-400",calisthenics:"bg-cyan-500/20 text-cyan-400",dynamic:"bg-purple-500/20 text-purple-400"},u={hiit:"HIIT",wod:"WOD",mobility:"Mobility",calisthenics:"Calisthenics",dynamic:"Dynamic"},n=a[s.workoutCategory];return n?e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${n}`,children:u[s.workoutCategory]}):null})()]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-iron-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-3.5 h-3.5"}),Ke(s.date)]}),s.duration&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"w-3.5 h-3.5"}),s.duration," min"]}),!i&&!s.duration&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-3.5 h-3.5"}),((x=s.exercises)==null?void 0:x.length)||0," exercises"]})]}),((c=s.exercises)==null?void 0:c.length)>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.exercises.slice(0,3).map((a,u)=>{var n,d;return e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-iron-800 text-iron-400 rounded",children:[a.name,h==="todo"&&((n=a.sets)==null?void 0:n.length)>0&&e.jsxs("span",{className:"text-iron-500 ml-1",children:["(",a.sets.length,"×",((d=a.sets[0])==null?void 0:d.prescribedReps)||"?",")"]})]},u)}),s.exercises.length>3&&e.jsxs("span",{className:"text-xs text-iron-500 px-1",children:["+",s.exercises.length-3]})]})]}),!i&&e.jsx(oe,{className:"w-5 h-5 text-iron-600 group-hover:text-iron-400 transition-colors flex-shrink-0"})]}),!i&&e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 z-10",onClick:a=>{a.preventDefault(),a.stopPropagation()},children:[e.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),b(X===s.id?null:s.id)},className:`p-2 text-iron-500
                        hover:text-iron-300 hover:bg-iron-800 rounded-lg transition-colors`,children:e.jsx(bs,{className:"w-4 h-4"})}),e.jsx(de,{children:X===s.id&&e.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`absolute right-0 top-full mt-1 bg-iron-800 border border-iron-700
                            rounded-lg shadow-xl z-50 py-1 min-w-[140px]`,onClick:a=>a.stopPropagation(),children:[!s.isGroupWorkout&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),b(null),K(`/workouts/${s.id}/edit`)},className:`flex items-center gap-2 px-4 py-2 text-sm text-iron-300
                                hover:bg-iron-700 transition-colors w-full`,children:[e.jsx(Ns,{className:"w-4 h-4"}),"Edit"]}),!H&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),b(null);const u=s.isGroupWorkout?`/workouts/group/${s.id}`:`/workouts/${s.id}`;K(u,{state:{openShare:!0}})},className:`flex items-center gap-2 px-4 py-2 text-sm text-iron-300
                                hover:bg-iron-700 transition-colors w-full`,children:[e.jsx(vs,{className:"w-4 h-4"}),"Share"]}),!s.isGroupWorkout&&s.status==="scheduled"&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),b(null),We("review",s.id)},className:`flex items-center gap-2 px-4 py-2 text-sm text-purple-300
                                hover:bg-iron-700 transition-colors w-full`,children:[e.jsx(ie,{className:"w-4 h-4"}),"Send for Review"]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),Be(s)},className:`flex items-center gap-2 px-4 py-2 text-sm w-full transition-colors ${L===s.id?"text-white bg-red-500 hover:bg-red-600":"text-red-400 hover:bg-iron-700"}`,children:[e.jsx(ws,{className:"w-4 h-4"}),L===s.id?"Tap to confirm":"Delete"]}),L===s.id&&e.jsx("button",{onClick:a=>{a.stopPropagation(),R(null),b(null)},className:"flex items-center gap-2 px-4 py-2 text-sm text-iron-400 hover:bg-iron-700 transition-colors w-full",children:"Cancel"})]})})]})]},s.id)})}):e.jsxs("div",{className:"card-steel p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-iron-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h==="todo"?e.jsx(Ss,{className:"w-8 h-8 text-green-400"}):e.jsx(ce,{className:"w-8 h-8 text-iron-600"})}),h==="todo"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-display text-iron-200 mb-2",children:"All Caught Up!"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"No pending workouts. Create a new one or check your completed workouts."}),e.jsxs(E,{to:"/workouts/new",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Create Workout"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-display text-iron-200 mb-2",children:"No Completed Workouts"}),e.jsx("p",{className:"text-iron-500",children:"Complete your first workout to see it here."})]})]}),X&&e.jsx("div",{className:"fixed inset-0 z-[5]",onClick:()=>b(null)}),e.jsx(de,{children:Ge&&e.jsxs(e.Fragment,{children:[e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(N.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] mx-auto max-w-md bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:y==="custom_workout"?"Request Custom Workout":"Request Workout Review"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-iron-400",children:y==="custom_workout"?"A real trainer will create a personalized workout based on your training data and goals.":"A trainer will review and optimize your existing workout plan."}),y==="review"&&M&&e.jsxs("div",{className:"p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg text-sm text-purple-300",children:["Reviewing: ",((De=P.find(s=>s.id===M))==null?void 0:De.name)||"Workout"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Notes for the trainer (optional)"}),e.jsx("textarea",{value:be,onChange:s=>Ne(s.target.value),placeholder:y==="custom_workout"?"What are you looking for? Focus areas, time constraints, equipment available...":"Any specific concerns? Areas you want changed or improved...",rows:3,className:"input-field w-full resize-none text-sm"})]}),y==="custom_workout"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-iron-400 mb-1.5",children:"Date of the workout"}),e.jsx("input",{type:"date",value:se,onChange:s=>ve(s.target.value),className:"input-field text-sm",required:!0})]}),e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-iron-400",children:"Cost"}),e.jsxs("span",{className:"text-sm font-medium text-flame-400",children:[B[y==="custom_workout"?"trainer-custom-workout":"trainer-review"]," credits"]})]}),e.jsx("p",{className:"text-xs text-iron-500 text-center",children:"Custom workouts are hand-built and may take up to 24 hours."}),e.jsxs("button",{onClick:ss,disabled:te||y==="custom_workout"&&!se,className:"btn-primary w-full py-3 text-sm flex items-center justify-center gap-2",children:[te?e.jsx(xe,{className:"w-4 h-4 animate-spin"}):e.jsx(ie,{className:"w-4 h-4"}),te?"Submitting...":"Submit Request"]})]})]})]})}),e.jsx(de,{children:p&&e.jsxs(e.Fragment,{children:[e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{T(null),C(null)},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(N.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[8%] mx-auto max-w-lg bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl flex flex-col max-h-[84vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800 flex-shrink-0",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100 truncate pr-2",children:((Re=p.workout)==null?void 0:Re.name)||"Shared Workout"}),e.jsx("button",{onClick:()=>{T(null),C(null)},className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-iron-400",children:[e.jsxs("span",{children:["From ",e.jsx("span",{className:"text-iron-200 font-medium",children:p.fromUserName||"someone"})]}),((Te=p.createdAt)==null?void 0:Te.toDate)&&e.jsxs("span",{className:"text-iron-600",children:["· ",k(p.createdAt.toDate(),"MMM d, yyyy")]})]}),p.message&&e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg flex items-start gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-300 italic",children:['"',p.message,'"']})]}),A&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm text-purple-300",children:"Weights adjusted to your training level"})]}),e.jsx("div",{className:"space-y-3",children:(A||((Ae=p.workout)==null?void 0:Ae.exercises)||[]).map((s,r)=>{var i,o;const t=(o=(i=p.workout)==null?void 0:i.exercises)==null?void 0:o[r];return e.jsxs("div",{className:"bg-iron-800/40 rounded-xl p-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-iron-100 mb-2",children:s.name}),e.jsx("div",{className:"space-y-1",children:(s.sets||[]).map((l,x)=>{var u;const c=(u=t==null?void 0:t.sets)==null?void 0:u[x],a=A&&c&&parseFloat(l.prescribedWeight||0)!==parseFloat(c.prescribedWeight||0);return e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:"text-iron-600 w-12 flex-shrink-0",children:["Set ",x+1]}),(l.prescribedWeight||s.type==="weight")&&e.jsx("span",{className:`${a?"text-purple-400 font-medium":"text-iron-300"}`,children:a&&(c!=null&&c.prescribedWeight)?e.jsxs(e.Fragment,{children:[c.prescribedWeight," → ",l.prescribedWeight," lbs"]}):e.jsxs(e.Fragment,{children:[l.prescribedWeight||"—"," lbs"]})}),l.prescribedReps&&e.jsxs("span",{className:"text-iron-400",children:["× ",l.prescribedReps," reps"]}),l.prescribedTime&&e.jsxs("span",{className:"text-iron-400",children:[l.prescribedTime,"s"]})]},x)})})]},r)})})]}),e.jsxs("div",{className:"p-4 border-t border-iron-800 space-y-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>Ye(p,A),disabled:F===p.id,className:"w-full flex items-center justify-center gap-2 py-3 bg-flame-500/15 text-flame-400 border border-flame-500/30 rounded-lg text-sm font-medium hover:bg-flame-500/25 transition-colors",children:[F===p.id?e.jsx(xe,{className:"w-4 h-4 animate-spin"}):e.jsx(ps,{className:"w-4 h-4"}),F===p.id?"Saving...":"Save to My Workouts"]}),!A&&e.jsxs("button",{onClick:Xe,disabled:z,className:"w-full flex items-center justify-center gap-2 py-3 bg-purple-500/15 text-purple-400 border border-purple-500/30 rounded-lg text-sm font-medium hover:bg-purple-500/25 transition-colors",children:[z?e.jsx(xe,{className:"w-4 h-4 animate-spin"}):e.jsx(ne,{className:"w-4 h-4"}),z?"Adjusting...":`Adjust Weights to My Level · ${B["ask-assistant"]} cr`]}),e.jsx("button",{onClick:()=>{Ze(p.id),T(null),C(null)},className:"w-full py-2.5 text-iron-500 text-sm hover:text-iron-300 transition-colors",children:"Dismiss"})]})]})]})})]})}export{_s as default};
