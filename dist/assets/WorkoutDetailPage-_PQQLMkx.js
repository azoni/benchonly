const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DpwKn0FX.js","assets/index-DEb0eXj3.css"])))=>i.map(i=>d[i]);
import{G as ft,a as bt,b as gt,c as Nt,u as jt,d as vt,e as wt,r as b,h as yt,_ as _e,j as e,I as Oe,A as Rt,i as Ge,C as he,L as Ms,k as kt,z as Wt,y as Ct,B as St,l as ue,n as fe,o as be,m as Y,Z as ge,t as ze,M as Tt,K as Et,X as q,P as Ue,p as Fs,H as Ps,R as $t,q as Mt,s as Ft,a3 as B,v as Pt,w as Ls,x as Ds}from"./index-DpwKn0FX.js";import{A as Lt}from"./calorieService-6-LCVeV1.js";import{E as As}from"./ExerciseInfoModal-C6FwTCfL.js";import{W as Dt}from"./WorkoutSummaryCard-BnwCiMNv.js";import{P as Bs}from"./pen-BSP7XjUM.js";import{M as At}from"./more-vertical-A_d6l-sw.js";import{S as Bt}from"./share-2-Dnkb_t0h.js";import{T as Ne}from"./trash-2-DG9EYLJt.js";import{F as _t}from"./file-text-BK8WypiT.js";import{C as Ot}from"./clock-Clnr1roD.js";import{M as _}from"./message-square-fkuIV_q0.js";import{P as He}from"./pencil-Qj_ZJZUV.js";import{S as Gt}from"./search-mdFNti_z.js";import"./external-link-AgyL_KuP.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ft("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ut=(v,C)=>!v||!C||C<1?null:C===1?v:C>30?null:Math.round(v*(1+C/30)),P=v=>{if(v.type)return v.type;const C=v.sets||[];return C.some(S=>S.prescribedTime||S.actualTime)?"time":!C.some(S=>S.prescribedWeight||S.actualWeight)&&C.some(S=>S.prescribedReps||S.actualReps)?"bodyweight":"weight"},_s=v=>{switch(v){case"time":return{label:"Time",color:"bg-blue-500/20 text-blue-400"};case"bodyweight":return{label:"BW",color:"bg-emerald-500/20 text-emerald-400"};default:return null}};function ra(){var ws,ys,Rs,ks,Ws,Cs,Ss,Ts,Es,$s;const{id:v}=bt(),C=gt(),Z=Nt();jt("Workout");const{user:S,isGuest:T,isAppAdmin:Os,userProfile:z,updateProfile:Gs}=vt(),Ve=wt(s=>s.sidebarOpen),[a,O]=b.useState(null),[zs,Us]=b.useState(!0),[Ye,je]=b.useState(!1),[qe,Ze]=b.useState(!1),[ae,ve]=b.useState(!1),[J,re]=b.useState(!1),[L,$]=b.useState([]),[we,le]=b.useState(!1),[Je,Hs]=b.useState(""),[ye,Ke]=b.useState(""),[Vs,Xe]=b.useState(!1),[Re,Ys]=b.useState(!1),[ke,qs]=b.useState(!1),[Qe,ie]=b.useState(null),[We,K]=b.useState(null),[Ce,X]=b.useState(""),[ne,Q]=b.useState(null),[ce,I]=b.useState(null),[oe,Ie]=b.useState({}),[Se,es]=b.useState({}),[Zs,de]=b.useState(!1),[Te,Js]=b.useState([]),[Ee,Ks]=b.useState({}),[$e,Xs]=b.useState(""),[U,ss]=b.useState(null),[ts,as]=b.useState(""),[xe,rs]=b.useState(!1),[Qs,ls]=b.useState(!1),[M,Me]=b.useState(!1),[ee,G]=b.useState([]),[Fe,Pe]=b.useState(""),[is,ns]=b.useState(!1),[Le,cs]=b.useState(""),[De,os]=b.useState(""),[Ae,ds]=b.useState(""),[H,xs]=b.useState(!1);b.useEffect(()=>{async function s(){var l,t;if(!(!v||!S))try{let r;if(T){const{getSampleWorkouts:c}=await _e(async()=>{const{getSampleWorkouts:d}=await import("./index-DpwKn0FX.js").then(o=>o.be);return{getSampleWorkouts:d}},__vite__mapDeps([0,1]));r=c().find(d=>d.id===v)}else r=await B.getById(v);O(r),Hs((r==null?void 0:r.notes)||""),Ke((r==null?void 0:r.userNotes)||""),r!=null&&r.exercises&&$(r.exercises.map(c=>{var d;return{...c,notes:c.notes||"",userNotes:c.userNotes||"",sets:((d=c.sets)==null?void 0:d.map(o=>({...o})))||[]}})),r!=null&&r.wodResult&&(cs(((l=r.wodResult.rounds)==null?void 0:l.toString())||""),os(((t=r.wodResult.extraReps)==null?void 0:t.toString())||""),ds(r.wodResult.completionTime||""),xs(r.wodResult.dnf||!1))}catch(r){console.error("Error fetching workout:",r)}finally{Us(!1)}}s()},[v,S,T]),b.useEffect(()=>{var s;(s=Z.state)!=null&&s.openShare&&a&&!T&&(window.history.replaceState({},""),setTimeout(()=>ps(),100))},[a]);const ms=()=>{var s;(s=Z.state)!=null&&s.from?C(Z.state.from):C(-1)},Is=async()=>{if(!ae){ve(!0);return}Ze(!0);try{if(T){C("/workouts");return}await B.delete(v),C("/workouts")}catch(s){console.error("Error deleting workout:",s),Ze(!1),ve(!1)}},ps=async()=>{je(!1),de(!0),ss(null),as(""),ls(!1);try{const s=await yt.getFriends(S.uid);Js(s);const l={},{getDoc:t,doc:r}=await _e(async()=>{const{getDoc:d,doc:o}=await import("./index-DpwKn0FX.js").then(x=>x.bc);return{getDoc:d,doc:o}},__vite__mapDeps([0,1])),{db:c}=await _e(async()=>{const{db:d}=await import("./index-DpwKn0FX.js").then(o=>o.bd);return{db:d}},__vite__mapDeps([0,1]));await Promise.all(s.map(async d=>{const o=await t(r(c,"users",d));o.exists()&&(l[d]=o.data())})),Ks(l)}catch(s){console.error("Error loading friends:",s)}},et=async()=>{var s;if(!(!U||!a||xe)){rs(!0);try{const l=((s=Ee[U])==null?void 0:s.displayName)||"";await Pt.share(S.uid,S.displayName||"Someone",U,a,ts,l),ls(!0),setTimeout(()=>de(!1),1500)}catch(l){console.error("Share error:",l)}finally{rs(!1)}}},st=()=>{G(a.exercises.map(s=>{var l;return{...s,sets:((l=s.sets)==null?void 0:l.map(t=>({...t})))||[]}})),Pe(a.notes||""),Me(!0)},tt=()=>{Me(!1),G([]),Pe("")},at=async()=>{ns(!0);try{await B.update(v,{exercises:ee,notes:Fe}),O(s=>({...s,exercises:ee,notes:Fe})),Me(!1)}catch(s){console.error("Error saving edits:",s),alert("Failed to save edits")}finally{ns(!1)}},hs=(s,l,t)=>{G(r=>r.map((c,d)=>d===s?{...c,[l]:t}:c))},se=(s,l,t,r)=>{G(c=>c.map((d,o)=>o===s?{...d,sets:d.sets.map((x,p)=>p===l?{...x,[t]:r}:x)}:d))},rt=s=>{G(l=>l.map((t,r)=>{if(r!==s)return t;const c=t.sets[t.sets.length-1]||{},d=P(t);let o={id:Date.now(),rpe:"",painLevel:0,completed:!1};return d==="time"?o={...o,prescribedTime:c.prescribedTime||"",actualTime:""}:d==="bodyweight"?o={...o,prescribedReps:c.prescribedReps||"",actualReps:""}:o={...o,prescribedWeight:c.prescribedWeight||"",prescribedReps:c.prescribedReps||"",actualWeight:"",actualReps:""},{...t,sets:[...t.sets,o]}}))},lt=(s,l)=>{G(t=>t.map((r,c)=>c!==s||r.sets.length<=1?r:{...r,sets:r.sets.filter((d,o)=>o!==l)}))},it=s=>{G(l=>l.length<=1?l:l.filter((t,r)=>r!==s))},us=async(s,l)=>{const t=a.exercises[s];if(!(!t||T)){ie(s);try{const r=a.exercises.filter((x,p)=>p!==s).map(x=>x.name),c=await Ls(),d=await fetch(Ds("swap-exercise"),{method:"POST",headers:c,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:r},...l?{reason:l}:{}})});if(!d.ok)throw new Error("Swap failed");const o=await d.json();if(o.exercise){const x=a.exercises.map((p,f)=>f===s?{...o.exercise,type:o.exercise.type||p.type||"weight"}:p);await B.update(v,{exercises:x}),O(p=>({...p,exercises:x})),$(x.map(p=>{var f;return{...p,notes:p.notes||"",sets:((f=p.sets)==null?void 0:f.map(i=>({...i})))||[]}}))}}catch(r){console.error("Swap error:",r)}finally{ie(null)}}},fs=async(s,l)=>{var r;const t=J?L[s]:(r=a==null?void 0:a.exercises)==null?void 0:r[s];if(!(!t||T)){ie(s),Q(null),I(null);try{const c=(J?L:a.exercises).filter((p,f)=>f!==s).map(p=>p.name),d=await Ls(),o=await fetch(Ds("swap-exercise"),{method:"POST",headers:d,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:c},preferredReplacement:l})});if(!o.ok)throw new Error("Swap failed");const x=await o.json();if(x.exercise){const p=(J?L:a.exercises).map((f,i)=>i===s?{...x.exercise,type:x.exercise.type||f.type||"weight"}:f);await B.update(v,{exercises:p}),O(f=>({...f,exercises:p})),J&&$(p.map(f=>{var i;return{...f,notes:f.notes||"",sets:((i=f.sets)==null?void 0:i.map(g=>({...g})))||[]}}))}}catch(c){console.error("Substitution swap error:",c)}finally{ie(null)}}},w=(s,l,t,r)=>{$(c=>{const d=[...c];return d[s]={...d[s],sets:d[s].sets.map((o,x)=>x===l?{...o,[t]:r}:o)},d})},Be=(s,l)=>{$(t=>{const r=[...t];return r[s]={...r[s],userNotes:l},r})},me=(s,l,t)=>{$(r=>{const c=[...r];return c[s]={...c[s],[l]:t},c})},bs=s=>{$(l=>{const t=[...l],r=t[s],c=r==null?void 0:r.supersetGroup,d=[s];return c!=null&&t.forEach((o,x)=>{x!==s&&o.supersetGroup===c&&d.push(x)}),d.forEach(o=>{const x=t[o],p=x.sets[x.sets.length-1],f=P(x);let i={rpe:"",painLevel:0,completed:!1};f==="time"?i={...i,prescribedTime:(p==null?void 0:p.prescribedTime)||"",actualTime:""}:f==="bodyweight"?i={...i,prescribedReps:(p==null?void 0:p.prescribedReps)||"",actualReps:""}:i={...i,prescribedWeight:(p==null?void 0:p.prescribedWeight)||"",prescribedReps:(p==null?void 0:p.prescribedReps)||"",actualWeight:"",actualReps:""},t[o]={...x,sets:[...x.sets,i]}}),t})},gs=(s,l)=>{$(t=>{const r=[...t],c=r[s];if(c.sets.length<=1)return t;const d=c==null?void 0:c.supersetGroup;return r[s]={...c,sets:c.sets.filter((o,x)=>x!==l)},d!=null&&r.forEach((o,x)=>{x!==s&&o.supersetGroup===d&&(r[x]={...o,sets:o.sets.filter((p,f)=>f!==l)})}),r})},Ns=s=>{$(l=>{if(l.length<=1)return l;const t=l[s];return(t==null?void 0:t.supersetGroup)!=null?l.filter(r=>r.supersetGroup!==t.supersetGroup):l.filter((r,c)=>c!==s)})},js=s=>{const l={exercises:s,notes:Je,userNotes:ye};return a!=null&&a.coachingNotes&&(l.coachingNotes=a.coachingNotes),a!=null&&a.personalNotes&&(l.personalNotes=a.personalNotes),a!=null&&a.description&&(l.description=a.description),l},nt=async()=>{le(!0);try{const s=js(L);T||await B.update(v,s),O(l=>({...l,...s})),re(!1)}catch(s){console.error("Error saving:",s),alert("Failed to save")}finally{le(!1)}},ct=async()=>{var s,l,t,r,c;le(!0);try{const d=L.map(x=>{const p=P(x);return{...x,sets:x.sets.map(f=>p==="time"?{...f,actualTime:f.actualTime||f.prescribedTime||""}:p==="bodyweight"?{...f,actualReps:f.actualReps||f.prescribedReps||""}:{...f,actualWeight:f.actualWeight||f.prescribedWeight||"",actualReps:f.actualReps||f.prescribedReps||""})}});if(!T){const x=js(d);pe&&(x.wodResult=V==="amrap"?{format:"amrap",rounds:parseInt(Le)||0,extraReps:parseInt(De)||0}:{format:"fortime",completionTime:Ae||"",dnf:H}),await B.complete(v,x)}const o=pe?V==="amrap"?{format:"amrap",rounds:parseInt(Le)||0,extraReps:parseInt(De)||0}:{format:"fortime",completionTime:Ae||"",dnf:H}:void 0;if(O(x=>({...x,exercises:d,notes:Je,userNotes:ye,status:"completed",...o&&{wodResult:o},...(a==null?void 0:a.coachingNotes)&&{coachingNotes:a.coachingNotes},...(a==null?void 0:a.personalNotes)&&{personalNotes:a.personalNotes},...(a==null?void 0:a.description)&&{description:a.description}})),$(d),re(!1),!T&&o&&(a!=null&&a.benchmarkWodId))try{const x=a.benchmarkWodId,p=((s=z==null?void 0:z.wodStats)==null?void 0:s[x])||{history:[]},f=(l=a.benchmarkVariant)==null?void 0:l.startsWith("rx"),i={date:a.date instanceof Date?a.date.toISOString().split("T")[0]:((c=(r=(t=a.date)==null?void 0:t.toDate)==null?void 0:r.call(t))==null?void 0:c.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],rxOrScaled:f?"rx":"scaled",variant:a.benchmarkVariant||null,...o.format==="amrap"?{rounds:o.rounds,extraReps:o.extraReps}:{time:o.completionTime,dnf:o.dnf}},g=[i,...p.history||[]].slice(0,20);let k=i;if(o.format==="amrap"){const j=g.filter(n=>n.rounds!=null).sort((n,y)=>y.rounds*1e3+(y.extraReps||0)-(n.rounds*1e3+(n.extraReps||0)))[0];j&&(k=j)}else{const j=g.filter(n=>n.time&&!n.dnf).sort((n,y)=>n.time.localeCompare(y.time))[0];j&&(k=j)}await Gs({wodStats:{...(z==null?void 0:z.wodStats)||{},[x]:{pr:k,history:g}}})}catch(x){console.error("[WorkoutDetail] Failed to update WOD stats:",x)}}catch(d){console.error("Error completing:",d),alert("Failed to complete")}finally{le(!1)}},ot=async()=>{if(confirm("Mark this workout as incomplete? It will go back to scheduled status."))try{await B.update(v,{status:"scheduled",completedAt:null}),O(s=>({...s,status:"scheduled",completedAt:null}))}catch(s){console.error("Error marking incomplete:",s),alert("Failed to update workout status")}},dt=s=>s>=9?"text-red-400":s>=7?"text-yellow-400":"text-green-400",xt=s=>s>=7?"bg-red-500/20 text-red-400":s>=4?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400";if(zs)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});if(!a)return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-iron-700 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"Workout Not Found"}),e.jsx("button",{onClick:ms,className:"btn-primary mt-4",children:"Go Back"})]});const R=a.status==="scheduled",mt=R&&(a.userNotes||((ws=a.exercises)==null?void 0:ws.some(s=>{var l;return s.userNotes||s.rpe||s.painLevel>0||((l=s.sets)==null?void 0:l.some(t=>t.actualWeight||t.actualReps||t.actualTime||t.rpe))}))),D=a.workoutType==="cardio",pt=((ys=Z.state)==null?void 0:ys.fromLabel)||"Back",vs=a.workoutCategory==="wod",V=(()=>{if(!vs)return null;const s=(a.notes||"").toLowerCase();return s.includes("amrap")?"amrap":s.includes("for time")?"fortime":s.includes("emom")?"emom":"amrap"})(),pe=vs&&(V==="amrap"||V==="fortime"),ht=((Rs=a.exercises)==null?void 0:Rs.reduce((s,l)=>{var t;return s+(((t=l.sets)==null?void 0:t.length)||0)},0))||0,ut=((ks=a.exercises)==null?void 0:ks.length)||0;return J?e.jsxs("div",{className:"max-w-2xl mx-auto pb-36",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>re(!1),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg text-iron-100",children:R?"Log Workout":"Edit Log"}),e.jsx("button",{onClick:()=>Xe(!0),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(_,{className:"w-5 h-5"})})]})}),(a==null?void 0:a.notes)&&e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Coach Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.notes})]}),e.jsxs("div",{className:"card-steel p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-2",children:"Your Notes"}),e.jsx("textarea",{value:ye,onChange:s=>Ke(s.target.value),placeholder:"How did the workout go? Anything feel off?",rows:2,className:"w-full input-field text-sm resize-none"})]}),pe&&e.jsxs("div",{className:"card-steel p-5 mb-4 border border-yellow-500/20 bg-yellow-500/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ge,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:V==="amrap"?"AMRAP Result":"For Time Result"})]}),V==="amrap"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Rounds Completed"}),e.jsx("input",{type:"number",inputMode:"numeric",value:Le,onChange:s=>cs(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-3xl py-3 px-4 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Extra Reps (partial round)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:De,onChange:s=>os(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-xl py-2.5 px-4 text-center font-semibold"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Completion Time (mm:ss)"}),e.jsx("input",{type:"text",value:Ae,onChange:s=>ds(s.target.value),placeholder:"12:30",disabled:H,className:"input-field w-full text-3xl py-3 px-4 text-center font-bold disabled:opacity-40"})]}),e.jsx("button",{onClick:()=>xs(!H),className:`w-full py-2.5 rounded-lg text-sm font-medium transition-colors ${H?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-iron-800 text-iron-500 hover:bg-iron-700"}`,children:H?"DNF (Did Not Finish)":"Mark as DNF"})]}),(($s=a.exercises)==null?void 0:$s.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-iron-800/50",children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2",children:"Movements per round"}),e.jsx("div",{className:"space-y-1",children:a.exercises.map((s,l)=>{var t,r,c,d;return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-iron-300",children:s.name}),e.jsx("span",{className:"text-iron-500",children:(r=(t=s.sets)==null?void 0:t[0])!=null&&r.prescribedReps?`${s.sets[0].prescribedReps} reps`:(d=(c=s.sets)==null?void 0:c[0])!=null&&d.prescribedTime?`${s.sets[0].prescribedTime}s`:"—"})]},l)})})]})]}),!pe&&e.jsx("div",{className:"space-y-4",children:Fs(L).map((s,l)=>{var o,x,p,f;if(s.type==="superset"){const{exerciseA:i,exerciseB:g,indexA:k,indexB:j}=s,n=(h,m,u,N)=>{const E=P(m);return E==="time"?e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:u.actualTime||"",onChange:W=>w(h,N,"actualTime",W.target.value),placeholder:u.prescribedTime||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"seconds"})]}):E==="bodyweight"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:u.actualReps||"",onChange:W=>w(h,N,"actualReps",W.target.value),placeholder:u.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:u.actualWeight||"",onChange:W=>w(h,N,"actualWeight",W.target.value),placeholder:u.prescribedWeight||"BW",className:"w-full input-field text-base py-2 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"+ lbs"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:u.actualWeight||"",onChange:W=>w(h,N,"actualWeight",W.target.value),placeholder:u.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:u.actualReps||"",onChange:W=>w(h,N,"actualReps",W.target.value),placeholder:u.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]})]})},y=(h,m,u,N)=>{const E=P(m);E==="time"?w(h,N,"actualTime",u.prescribedTime||""):E==="bodyweight"?(w(h,N,"actualReps",u.prescribedReps||""),u.prescribedWeight&&w(h,N,"actualWeight",u.prescribedWeight)):(w(h,N,"actualWeight",u.prescribedWeight||""),w(h,N,"actualReps",u.prescribedReps||""))},F=(h,m)=>{const u=P(h);return u==="time"?`${m.prescribedTime||"—"}s`:u==="bodyweight"?`${m.prescribedWeight?`BW+${m.prescribedWeight} ×`:""} ${m.prescribedReps||"—"}`:`${m.prescribedWeight||"—"} × ${m.prescribedReps||"—"}`};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(ge,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[i.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",g.name]}),L.length>2&&e.jsx("button",{onClick:()=>Ns(k),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove superset",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((o=i.sets)==null?void 0:o.length)||0," sets"]}),(i.notes||g.notes)&&e.jsxs("div",{className:"mt-2 space-y-1",children:[i.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"A:"})," ",i.notes]})]}),g.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"B:"})," ",g.notes]})]})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=i.sets)==null?void 0:x.map((h,m)=>{var A;const u=(A=g.sets)==null?void 0:A[m],N=(()=>{const te=P(i);return te==="time"?!!h.actualTime:te==="bodyweight"?!!h.actualReps:!!(h.actualWeight&&h.actualReps)})(),E=u?(()=>{const te=P(g);return te==="time"?!!u.actualTime:te==="bodyweight"?!!u.actualReps:!!(u.actualWeight&&u.actualReps)})():!1,W=N&&E;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${W?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${W?"text-green-400":"text-iron-400"}`,children:m+1})}),e.jsxs("button",{onClick:()=>{y(k,i,h,m),u&&y(j,g,u,m)},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill both with targets",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Targets"}),e.jsxs("span",{className:"text-xs font-medium text-iron-400",children:["A: ",F(i,h)," · B: ",u?F(g,u):"—"]})]}),i.sets.length>1&&e.jsx("button",{onClick:()=>gs(k,m),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["A — ",i.name]}),n(k,i,h,m)]}),u&&e.jsxs("div",{className:"pt-2 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["B — ",g.name]}),n(j,g,u,m)]})]},m)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>bs(k),className:"w-full py-2.5 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Ue,{className:"w-4 h-4"})," Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Ie(h=>({...h,[`ss-${s.supersetGroup}`]:!h[`ss-${s.supersetGroup}`]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"RPE / Pain"}),oe[`ss-${s.supersetGroup}`]?e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(fe,{className:"w-3.5 h-3.5 ml-auto"})]}),oe[`ss-${s.supersetGroup}`]&&e.jsx("div",{className:"space-y-2 pb-2",children:[{label:"A",ex:i,idx:k},{label:"B",ex:g,idx:j}].map(({label:h,ex:m,idx:u})=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-purple-400 font-medium w-3",children:h}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(N=>e.jsx("button",{onClick:()=>me(u,"rpe",m.rpe==N?"":String(N)),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${m.rpe==N?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:N},N))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(N=>e.jsx("button",{onClick:()=>me(u,"painLevel",(m.painLevel||0)===N?0:N),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${(m.painLevel||0)===N?N<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:N},N))]})]},h))})]}),e.jsx("div",{className:"px-4 pb-4",children:i.userNotes||g.userNotes||Se[`ss-${s.supersetGroup}`]?e.jsx("textarea",{value:i.userNotes||"",onChange:h=>{Be(k,h.target.value),Be(j,h.target.value)},placeholder:"How did the superset feel?",rows:2,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>es(h=>({...h,[`ss-${s.supersetGroup}`]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(He,{className:"w-3.5 h-3.5"})," Add notes..."]})})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,c=P(t),d=_s(c);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Q(t),I(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Ps,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),d&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${d.color}`,children:d.label}),L.length>1&&e.jsx("button",{onClick:()=>Ns(r),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove exercise",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((p=t.sets)==null?void 0:p.length)||0," sets"]}),t.notes&&e.jsxs("div",{className:"flex items-start gap-2 mt-2 bg-iron-900/50 rounded-lg p-2.5",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:t.notes})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(f=t.sets)==null?void 0:f.map((i,g)=>{const k=c==="time"?!!i.actualTime:c==="bodyweight"?!!i.actualReps:!!(i.actualWeight&&i.actualReps);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${k?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${k?"text-green-400":"text-iron-400"}`,children:g+1})}),e.jsxs("button",{onClick:()=>{c==="time"?w(r,g,"actualTime",i.prescribedTime||""):c==="bodyweight"?(w(r,g,"actualReps",i.prescribedReps||""),i.prescribedWeight&&w(r,g,"actualWeight",i.prescribedWeight)):(w(r,g,"actualWeight",i.prescribedWeight||""),w(r,g,"actualReps",i.prescribedReps||""))},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill with target values",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Target"}),e.jsxs("span",{className:"text-sm font-medium text-iron-400",children:[c==="time"?`${i.prescribedTime||"—"}s`:c==="bodyweight"?`${i.prescribedWeight?`BW+${i.prescribedWeight} ×`:""} ${i.prescribedReps||"—"} reps`:`${i.prescribedWeight||"—"} lbs × ${i.prescribedReps||"—"}`,i.targetRpe?` @ RPE ${i.targetRpe}`:""]})]}),t.sets.length>1&&e.jsx("button",{onClick:()=>gs(r,g),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]}),c==="time"?e.jsxs("div",{className:"ml-[52px]",children:[i.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mb-2",children:i.setNote}),e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualTime||"",onChange:j=>w(r,g,"actualTime",j.target.value),placeholder:i.prescribedTime||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):c==="bodyweight"?e.jsx("div",{className:"ml-[52px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:j=>w(r,g,"actualReps",j.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:j=>w(r,g,"actualWeight",j.target.value),placeholder:i.prescribedWeight||"BW",className:"w-full input-field text-lg py-3 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"+ added lbs"})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-[52px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const j=parseFloat(i.actualWeight||i.prescribedWeight||0);j>=5&&w(r,g,"actualWeight",String(Math.round(j-5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"−"}),e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:j=>w(r,g,"actualWeight",j.target.value),placeholder:i.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("button",{onClick:()=>{const j=parseFloat(i.actualWeight||i.prescribedWeight||0);w(r,g,"actualWeight",String(Math.round(j+5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"+"})]}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:j=>w(r,g,"actualReps",j.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]})]},g)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>bs(r),className:`w-full py-2.5 border border-dashed border-iron-700 rounded-lg
                  text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600
                  flex items-center justify-center gap-1.5 transition-colors`,children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Ie(i=>({...i,[r]:!i[r]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[t.rpe?`RPE ${t.rpe}`:"RPE",(t.painLevel||0)>0?` · Pain ${t.painLevel}`:""]}),oe[r]?e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(fe,{className:"w-3.5 h-3.5 ml-auto"})]}),oe[r]&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(i=>e.jsx("button",{onClick:()=>me(r,"rpe",t.rpe==i?"":String(i)),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${t.rpe==i?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>me(r,"painLevel",(t.painLevel||0)===i?0:i),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${(t.painLevel||0)===i?i<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:t.userNotes||Se[r]?e.jsx("textarea",{value:t.userNotes||"",onChange:i=>Be(r,i.target.value),placeholder:"How did this feel? Any discomfort?",rows:2,autoFocus:Se[r]&&!t.userNotes,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>es(i=>({...i,[r]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"Add notes..."]})})]},r)})}),e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${Ve?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:nt,disabled:we,className:"btn-secondary py-3 px-4 text-sm flex items-center justify-center gap-1.5 flex-shrink-0",children:"Save Draft"}),e.jsx("button",{onClick:ct,disabled:we,className:"btn-primary flex-1 py-3 text-sm flex items-center justify-center gap-2",children:we?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"}),R?"Complete Workout":"Update"]})})]}),e.jsx("p",{className:"text-xs text-iron-500 text-center mt-1.5",children:"Empty fields filled with targets"})]}),Vs&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:"RPE Scale"}),e.jsx("button",{onClick:()=>Xe(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-iron-400 text-sm mb-4",children:"Rate of Perceived Exertion"}),e.jsx("div",{className:"space-y-2",children:[{value:10,label:"Max effort - could not do more"},{value:9,label:"Very hard - 1 rep left"},{value:8,label:"Hard - 2 reps left"},{value:7,label:"Challenging - 3 reps left"},{value:6,label:"Moderate - 4+ reps left"}].map(({value:s,label:l})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-flame-500/20 text-flame-400 flex items-center justify-center font-medium",children:s}),e.jsx("span",{className:"text-iron-300",children:l})]},s))})]})}),e.jsx(As,{exercise:ne,isOpen:!!ne,onClose:()=>{Q(null),I(null)},onSubstitute:!T&&ce!==null?s=>fs(ce,s):void 0})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:ms,className:"flex items-center gap-2 text-iron-400 hover:text-iron-200 transition-colors",children:[e.jsx(Rt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:pt})]}),e.jsx("div",{className:"flex items-center gap-2",children:M?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:tt,className:"px-3 py-1.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:at,disabled:is,className:"px-3 py-1.5 text-sm bg-flame-500 text-white rounded-lg hover:bg-flame-600 transition-colors disabled:opacity-50 flex items-center gap-1.5",children:[is?e.jsx(Ge,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(he,{className:"w-3.5 h-3.5"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[R?e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium",children:"To Do"}):e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Completed"}),Os&&!M&&e.jsx("button",{onClick:st,className:"p-2 text-iron-400 hover:text-flame-400 transition-colors",title:"Edit workout",children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>je(!Ye),className:"p-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(At,{className:"w-5 h-5"})}),Ye&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>je(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-44 bg-iron-800 border border-iron-700 rounded-xl shadow-xl z-20 overflow-hidden",children:[e.jsxs(Ms,{to:`/workouts/${v}/edit`,className:"flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Edit"]}),!T&&e.jsxs("button",{onClick:ps,className:"w-full flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Share"]}),e.jsxs("button",{onClick:Is,disabled:qe,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors disabled:opacity-50 ${ae?"text-white bg-red-500 hover:bg-red-600":"text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(Ne,{className:"w-4 h-4"}),qe?"Deleting...":ae?"Tap to confirm":"Delete"]}),ae&&e.jsx("button",{onClick:()=>ve(!1),className:"w-full flex items-center gap-3 px-4 py-3 text-iron-400 hover:bg-iron-700 transition-colors text-sm",children:"Cancel"})]})]})]})]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h1",{className:"text-3xl font-display text-iron-50",children:a.name||"Untitled Workout"}),a.workoutCategory&&a.workoutCategory!=="strength"&&(()=>{const l={hiit:{label:"HIIT",color:"bg-red-500/15 text-red-400 border-red-500/30"},wod:{label:"WOD",color:"bg-yellow-500/15 text-yellow-400 border-yellow-500/30"},mobility:{label:"Mobility",color:"bg-green-500/15 text-green-400 border-green-500/30"},calisthenics:{label:"Calisthenics",color:"bg-cyan-500/15 text-cyan-400 border-cyan-500/30"},dynamic:{label:"Dynamic",color:"bg-purple-500/15 text-purple-400 border-purple-500/30"}}[a.workoutCategory];return l?e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-medium ${l.color}`,children:l.label}):null})()]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(kt,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{children:a.date?Wt(Ct(a.date),"EEEE, MMM d"):"No date"})]}),!D&&e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(Oe,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{children:[ut," exercises · ",ht," sets"]})]})]})]}),(a.coachingNotes||a.personalNotes)&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Ys(!Re),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Coaching Notes"})]}),Re?e.jsx(ue,{className:"w-4 h-4 text-iron-500"}):e.jsx(fe,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(be,{children:Re&&e.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 max-h-64 overflow-y-auto space-y-3",children:[a.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.coachingNotes})]}),a.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.personalNotes})]})]})})})]}),a.generationPrompt&&e.jsxs("div",{className:"card-steel mb-3 overflow-hidden",children:[e.jsxs("button",{onClick:()=>qs(!ke),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Generation Prompt"})]}),ke?e.jsx(ue,{className:"w-4 h-4 text-iron-500"}):e.jsx(fe,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(be,{children:ke&&e.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"px-4 pb-4",children:e.jsx("pre",{className:"text-xs text-iron-400 leading-relaxed whitespace-pre-wrap font-mono max-h-96 overflow-y-auto",children:a.generationPrompt})})})})]}),!M&&a.workoutCategory==="wod"&&a.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-400",children:"WOD Format"})]}),e.jsx("p",{className:"text-iron-200 leading-relaxed whitespace-pre-line",children:a.notes})]}),!M&&a.wodResult&&e.jsxs("div",{className:"mb-4 p-5 bg-gradient-to-br from-flame-500/10 to-yellow-500/5 border border-flame-500/20 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-iron-400 uppercase tracking-wider mb-2",children:"Your Result"}),a.wodResult.format==="amrap"?e.jsx("div",{children:e.jsxs("p",{className:"text-4xl font-display text-flame-400",children:[a.wodResult.rounds||0,e.jsx("span",{className:"text-lg text-iron-400 ml-1",children:"rounds"}),a.wodResult.extraReps>0&&e.jsxs("span",{className:"text-2xl text-iron-300 ml-2",children:["+ ",a.wodResult.extraReps," ",e.jsx("span",{className:"text-lg text-iron-400",children:"reps"})]})]})}):a.wodResult.format==="fortime"?e.jsx("div",{children:a.wodResult.dnf?e.jsx("p",{className:"text-2xl font-display text-red-400",children:"DNF"}):e.jsx("p",{className:"text-4xl font-display text-flame-400",children:a.wodResult.completionTime||"—"})}):null]}),M?e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Notes"}),e.jsx("textarea",{value:Fe,onChange:s=>Pe(s.target.value),rows:2,className:"w-full input-field text-sm resize-none",placeholder:"Workout notes..."})]}):a.notes&&a.workoutCategory!=="wod"&&e.jsx("div",{className:"card-steel p-4 mb-3",children:e.jsx("p",{className:"text-iron-300",children:a.notes})}),a.userNotes&&e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.userNotes})]}),D&&e.jsxs("div",{className:"card-steel p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-4 text-center",children:[e.jsx(ze,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-iron-100",children:((Ws=Lt[a.activityType])==null?void 0:Ws.label)||a.activityType||"Activity"}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Activity"})]}),a.estimatedCalories>0&&e.jsxs("div",{className:"bg-flame-500/10 rounded-xl p-4 text-center",children:[e.jsx(Tt,{className:"w-8 h-8 text-flame-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-flame-400",children:a.estimatedCalories}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Calories"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.duration&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(Ot,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[a.duration," min"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Duration"})]})]}),a.distance&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(zt,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[a.distance," mi"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Distance"})]})]})]})]}),!M&&R&&!D&&((Cs=a.exercises)==null?void 0:Cs.length)>0&&e.jsxs("div",{className:"card-steel p-4 mb-6 bg-yellow-500/5 border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Et,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:"Today's Targets"})]}),e.jsx("div",{className:"space-y-2",children:a.exercises.map((s,l)=>{var c,d,o;const t=(c=s.sets)==null?void 0:c[0],r=(d=s.sets)==null?void 0:d.every(x=>x.prescribedWeight===(t==null?void 0:t.prescribedWeight)&&x.prescribedReps===(t==null?void 0:t.prescribedReps));return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-iron-800/50 last:border-0",children:[e.jsx("span",{className:"font-medium text-iron-200",children:s.name}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[(o=s.sets)==null?void 0:o.length,"×"," ",s.type==="time"||t!=null&&t.prescribedTime?`${(t==null?void 0:t.prescribedTime)||"—"}s`:s.type==="bodyweight"?`${t!=null&&t.prescribedWeight?`BW+${t.prescribedWeight} ×`:""} ${(t==null?void 0:t.prescribedReps)||"—"} reps`:r?`${(t==null?void 0:t.prescribedWeight)||"—"}lbs × ${(t==null?void 0:t.prescribedReps)||"—"}`:"varied"]})]},l)})})]}),M&&!D&&ee.length>0&&e.jsx("div",{className:"space-y-4",children:ee.map((s,l)=>{var c;const t=P(s),r=_s(t);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-iron-800/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:d=>hs(l,"name",d.target.value),className:"input-field flex-1 text-lg font-bold"}),r&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.color}`,children:r.label}),ee.length>1&&e.jsx("button",{onClick:()=>it(l),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(c=s.sets)==null?void 0:c.map((d,o)=>e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold text-iron-400",children:o+1})}),t==="time"?e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:d.prescribedTime||"",onChange:x=>se(l,o,"prescribedTime",x.target.value),placeholder:"seconds",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):t==="bodyweight"?e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>se(l,o,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>se(l,o,"prescribedWeight",x.target.value),placeholder:"+ lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"added lbs"})]})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>se(l,o,"prescribedWeight",x.target.value),placeholder:"lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>se(l,o,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]}),s.sets.length>1&&e.jsx("button",{onClick:()=>lt(l,o),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]},o))}),e.jsx("div",{className:"px-4 py-2",children:e.jsxs("button",{onClick:()=>rt(l),className:"w-full py-2 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Set"]})}),s.notes&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("input",{type:"text",value:s.notes,onChange:d=>hs(l,"notes",d.target.value),className:"input-field w-full text-sm",placeholder:"Exercise notes"})})]},l)})}),!M&&!D&&!R&&((Ss=a.exercises)==null?void 0:Ss.length)>0&&e.jsx(Dt,{exercises:a.exercises,isCompleted:!0}),!M&&!D&&((Ts=a.exercises)==null?void 0:Ts.length)>0&&e.jsx("div",{className:"space-y-4",children:Fs(a.exercises).map((s,l)=>{var o,x,p,f,i,g,k,j;if(s.type==="superset"){const{exerciseA:n,exerciseB:y}=s,F=(h,m)=>{var W;const u=h.type==="time"||((W=h.sets)==null?void 0:W.some(A=>A.prescribedTime||A.actualTime)),N=h.type==="bodyweight",E=u?!!m.actualTime:N?!!m.actualReps:!!(m.actualWeight||m.actualReps);if(u)return R?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedTime||"—","s"]}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualTime||"—","s ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedTime||"—","s"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"});if(N){const A=`${m.prescribedWeight?`BW+${m.prescribedWeight}`:"BW"} × ${m.prescribedReps||"—"}`;return R?e.jsx("span",{className:"text-base font-bold text-iron-100",children:A}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight?`BW+${m.actualWeight}`:"BW"," × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",A]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})}return R?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedWeight||"—"," lbs × ",m.prescribedReps||"—"]}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight||"—"," lbs × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedWeight||"—"," × ",m.prescribedReps||"—"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(ge,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[n.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",y.name]})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((o=n.sets)==null?void 0:o.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=n.sets)==null?void 0:x.map((h,m)=>{var N;const u=(N=y.sets)==null?void 0:N[m];return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:m+1})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["A — ",n.name]}),F(n,h)]}),u&&e.jsxs("div",{className:"pt-1.5 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["B — ",y.name]}),F(y,u)]})]})]})},m)})}),(n.notes||y.notes)&&e.jsxs("div",{className:"px-4 pb-2",children:[n.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3 mb-2",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"A:"})," ",n.notes]})]}),y.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"B:"})," ",y.notes]})]})]})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,c=t.type==="time"||((p=t.sets)==null?void 0:p.some(n=>n.prescribedTime||n.actualTime)),d=t.type==="bodyweight";return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Q(t),I(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Ps,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),c&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-500/20 text-blue-400 rounded",children:"Time"}),R&&!T&&e.jsx("button",{onClick:()=>K(r),disabled:Qe!==null,title:"Swap for similar exercise",className:"p-1.5 text-iron-500 hover:text-flame-400 hover:bg-flame-500/10 rounded-lg transition-colors disabled:opacity-30",children:Qe===r?e.jsx(Ge,{className:"w-4 h-4 animate-spin text-flame-400"}):e.jsx($t,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((f=t.sets)==null?void 0:f.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(i=t.sets)==null?void 0:i.map((n,y)=>{const F=c?n.actualTime:d?!!n.actualReps:n.actualWeight||n.actualReps,h=!c&&!d&&F&&n.actualWeight&&n.actualReps&&parseInt(n.actualReps)>1?Ut(parseFloat(n.actualWeight),parseInt(n.actualReps)):null;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:y+1})}),e.jsx("div",{className:"flex-1",children:c?R?e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedTime||"—"," seconds"]}),n.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mt-0.5",children:n.setNote})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedTime||"—","s",n.setNote?` — ${n.setNote}`:""]}),F?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualTime||"—"," seconds"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):d?R?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight?`BW + ${n.prescribedWeight} lbs`:"BW"," ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight?`BW+${n.prescribedWeight}`:"BW"," × ",n.prescribedReps||"—"]}),F?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight?`BW + ${n.actualWeight} lbs`:"BW"," × ",n.actualReps||"—"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):R?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight||"—"," lbs ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight||"—"," × ",n.prescribedReps||"—"]}),F?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight||"—"," lbs × ",n.actualReps||"—"]}),h&&e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded-lg",children:["e1RM: ",h," lbs"]})]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]})})]})},y)})}),!R&&(t.rpe||t.painLevel>0||((g=t.sets)==null?void 0:g.some(n=>n.rpe||n.painLevel>0)))&&e.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[(t.rpe||((k=t.sets)==null?void 0:k.some(n=>n.rpe)))&&e.jsxs("span",{className:`text-sm font-semibold ${dt(t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0)))}`,children:["RPE ",t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0))]}),(t.painLevel>0||((j=t.sets)==null?void 0:j.some(n=>n.painLevel>0)))&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${xt(t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0)))}`,children:["Pain ",t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0))]})]}),t.notes&&e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.notes})]})}),t.userNotes&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 bg-flame-500/5 border border-flame-500/10 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-flame-400/60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-0.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.userNotes})]})]})}),!t.notes&&!t.userNotes&&null]},r)})}),!D&&(!a.exercises||a.exercises.length===0)&&e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-iron-700 mx-auto mb-3"}),e.jsx("p",{className:"text-iron-500",children:"No exercises in this workout"})]}),!D&&!M&&e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${Ve?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsx("button",{onClick:()=>re(!0),className:`w-full py-4 text-lg flex items-center justify-center gap-2 rounded-xl font-semibold ${R?"bg-flame-500 hover:bg-flame-600 text-white":"bg-iron-800 hover:bg-iron-700 text-iron-200"}`,children:R?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"w-6 h-6"}),mt?"Continue Workout":"Log Workout"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-5 h-5"}),"Edit Logged Data"]})}),!R&&!T&&e.jsx("button",{onClick:ot,className:"w-full mt-2 py-2 text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Mark as incomplete"})]}),e.jsx(As,{exercise:ne,isOpen:!!ne,onClose:()=>{Q(null),I(null)},onSubstitute:!T&&ce!==null?s=>fs(ce,s):void 0}),e.jsx(be,{children:We!==null&&e.jsxs(e.Fragment,{children:[e.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{K(null),X("")},className:"fixed inset-0 bg-black/60 z-50"}),e.jsxs(Y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-x-4 top-[30%] mx-auto max-w-sm bg-iron-900 border border-iron-700 rounded-2xl z-50 p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-iron-200",children:"Swap Exercise"}),e.jsx("p",{className:"text-xs text-iron-500",children:`Optionally note why you're swapping (e.g. "shoulder pain", "no cable machine")`}),e.jsx("input",{type:"text",value:Ce,onChange:s=>X(s.target.value),placeholder:"Reason (optional)",className:"input-field w-full text-sm",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&(us(We,Ce),K(null),X(""))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{K(null),X("")},className:"flex-1 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{us(We,Ce),K(null),X("")},className:"flex-1 py-2.5 text-sm bg-flame-500/15 text-flame-400 border border-flame-500/30 rounded-xl hover:bg-flame-500/25 transition-colors",children:"Swap"})]})]})]})}),e.jsx(be,{children:Zs&&e.jsxs(e.Fragment,{children:[e.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>de(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(Y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] mx-auto max-w-md bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Share Workout"}),e.jsx("button",{onClick:()=>de(!1),className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 space-y-4",children:Qs?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(he,{className:"w-7 h-7 text-green-400"})}),e.jsx("p",{className:"text-iron-200 font-medium",children:"Workout Shared!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-iron-300 font-medium",children:(a==null?void 0:a.name)||"Workout"}),e.jsxs("p",{className:"text-xs text-iron-500 mt-0.5",children:[((Es=a==null?void 0:a.exercises)==null?void 0:Es.length)||0," exercises"]})]}),Te.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-iron-500",children:"No friends yet. Add friends to share workouts."}),e.jsx(Ms,{to:"/friends",className:"text-sm text-flame-400 hover:underline mt-1 inline-block",children:"Find Friends"})]}):e.jsxs(e.Fragment,{children:[Te.length>5&&e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:$e,onChange:s=>Xs(s.target.value),className:"input-field pl-9 py-2 text-sm w-full"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:Te.filter(s=>{var t;if(!$e)return!0;const l=Ee[s];return(t=l==null?void 0:l.displayName)==null?void 0:t.toLowerCase().includes($e.toLowerCase())}).map(s=>{const l=Ee[s];return e.jsxs("button",{onClick:()=>ss(s),className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors ${U===s?"bg-flame-500/15 border border-flame-500/30":"hover:bg-iron-800"}`,children:[l!=null&&l.photoURL?e.jsx("img",{src:l.photoURL,alt:"",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-700 flex items-center justify-center text-xs font-medium text-iron-400",children:((l==null?void 0:l.displayName)||"?")[0]}),e.jsx("span",{className:"text-sm text-iron-200 flex-1 text-left truncate",children:(l==null?void 0:l.displayName)||"User"}),U===s&&e.jsx(he,{className:"w-4 h-4 text-flame-400"})]},s)})}),e.jsx("textarea",{placeholder:"Add a message (optional)",value:ts,onChange:s=>as(s.target.value),rows:2,className:"input-field w-full resize-none text-sm"}),e.jsxs("button",{onClick:et,disabled:!U||xe,className:"btn-primary w-full py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:[xe?e.jsx(Ge,{className:"w-4 h-4 animate-spin"}):e.jsx(Ft,{className:"w-4 h-4"}),xe?"Sharing...":"Share Workout"]})]})]})})]})]})})]})}export{ra as default};
