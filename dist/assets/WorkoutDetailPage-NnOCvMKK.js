const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-zXXKWKZ_.js","assets/index-BAW7rKOA.css"])))=>i.map(i=>d[i]);
import{G as tt,a as at,b as rt,c as lt,u as it,d as nt,e as ct,r as g,h as ot,_ as $e,j as e,I as Pe,A as dt,i as Me,C as de,L as Ns,k as xt,z as mt,y as pt,B as ht,l as xe,n as me,o as pe,m as U,Z as Le,t as Fe,M as ut,K as gt,X as H,P as Be,p as js,H as vs,R as bt,q as ft,s as Nt,a3 as D,v as jt,w as ws,x as ys}from"./index-zXXKWKZ_.js";import{A as vt}from"./calorieService-6-LCVeV1.js";import{E as ks}from"./ExerciseInfoModal-D2yitE4k.js";import{W as wt}from"./WorkoutSummaryCard-Ck-B5k46.js";import{P as Ws}from"./pen-C6VF8Q3Z.js";import{M as yt}from"./more-vertical-BHpKLqER.js";import{S as kt}from"./share-2-B3mDeDU6.js";import{T as he}from"./trash-2-DNWomCfo.js";import{F as Wt}from"./file-text-pUvz1RKX.js";import{C as Rt}from"./clock-Ca3LuuuN.js";import{M as _}from"./message-square-MlN3M5Jt.js";import{P as Ae}from"./pencil-6tF9eK0V.js";import{S as Ct}from"./search-Igh_rCc0.js";import"./external-link-D0OY-cpc.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=tt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Et=(j,W)=>!j||!W||W<1?null:W===1?j:W>30?null:Math.round(j*(1+W/30)),M=j=>{if(j.type)return j.type;const W=j.sets||[];return W.some(R=>R.prescribedTime||R.actualTime)?"time":!W.some(R=>R.prescribedWeight||R.actualWeight)&&W.some(R=>R.prescribedReps||R.actualReps)?"bodyweight":"weight"},Rs=j=>{switch(j){case"time":return{label:"Time",color:"bg-blue-500/20 text-blue-400"};case"bodyweight":return{label:"BW",color:"bg-emerald-500/20 text-emerald-400"};default:return null}};function Ht(){var ds,xs,ms,ps,hs,us,gs,bs,fs;const{id:j}=at(),W=rt(),V=lt();it("Workout");const{user:R,isGuest:C,isAppAdmin:Cs}=nt(),De=ct(s=>s.sidebarOpen),[l,G]=g.useState(null),[Ss,Es]=g.useState(!0),[_e,ue]=g.useState(!1),[Ge,Oe]=g.useState(!1),[ee,ge]=g.useState(!1),[Y,se]=g.useState(!1),[F,$]=g.useState([]),[be,te]=g.useState(!1),[ze,Ts]=g.useState(""),[fe,Ue]=g.useState(""),[$s,He]=g.useState(!1),[Ne,Ps]=g.useState(!1),[je,Ms]=g.useState(!1),[Ve,ae]=g.useState(null),[ve,q]=g.useState(null),[we,Z]=g.useState(""),[re,J]=g.useState(null),[le,K]=g.useState(null),[ie,Ye]=g.useState({}),[ye,qe]=g.useState({}),[Ls,ne]=g.useState(!1),[ke,Fs]=g.useState([]),[We,Bs]=g.useState({}),[Re,As]=g.useState(""),[z,Ze]=g.useState(null),[Je,Ke]=g.useState(""),[ce,Xe]=g.useState(!1),[Ds,Qe]=g.useState(!1),[L,Ce]=g.useState(!1),[X,O]=g.useState([]),[Se,Ee]=g.useState(""),[Ie,es]=g.useState(!1);g.useEffect(()=>{async function s(){if(!(!j||!R))try{let a;if(C){const{getSampleWorkouts:t}=await $e(async()=>{const{getSampleWorkouts:r}=await import("./index-zXXKWKZ_.js").then(c=>c.be);return{getSampleWorkouts:r}},__vite__mapDeps([0,1]));a=t().find(r=>r.id===j)}else a=await D.getById(j);G(a),Ts((a==null?void 0:a.notes)||""),Ue((a==null?void 0:a.userNotes)||""),a!=null&&a.exercises&&$(a.exercises.map(t=>{var r;return{...t,notes:t.notes||"",userNotes:t.userNotes||"",sets:((r=t.sets)==null?void 0:r.map(c=>({...c})))||[]}}))}catch(a){console.error("Error fetching workout:",a)}finally{Es(!1)}}s()},[j,R,C]),g.useEffect(()=>{var s;(s=V.state)!=null&&s.openShare&&l&&!C&&(window.history.replaceState({},""),setTimeout(()=>ts(),100))},[l]);const ss=()=>{var s;(s=V.state)!=null&&s.from?W(V.state.from):W(-1)},_s=async()=>{if(!ee){ge(!0);return}Oe(!0);try{if(C){W("/workouts");return}await D.delete(j),W("/workouts")}catch(s){console.error("Error deleting workout:",s),Oe(!1),ge(!1)}},ts=async()=>{ue(!1),ne(!0),Ze(null),Ke(""),Qe(!1);try{const s=await ot.getFriends(R.uid);Fs(s);const a={},{getDoc:t,doc:r}=await $e(async()=>{const{getDoc:d,doc:o}=await import("./index-zXXKWKZ_.js").then(x=>x.bc);return{getDoc:d,doc:o}},__vite__mapDeps([0,1])),{db:c}=await $e(async()=>{const{db:d}=await import("./index-zXXKWKZ_.js").then(o=>o.bd);return{db:d}},__vite__mapDeps([0,1]));await Promise.all(s.map(async d=>{const o=await t(r(c,"users",d));o.exists()&&(a[d]=o.data())})),Bs(a)}catch(s){console.error("Error loading friends:",s)}},Gs=async()=>{var s;if(!(!z||!l||ce)){Xe(!0);try{const a=((s=We[z])==null?void 0:s.displayName)||"";await jt.share(R.uid,R.displayName||"Someone",z,l,Je,a),Qe(!0),setTimeout(()=>ne(!1),1500)}catch(a){console.error("Share error:",a)}finally{Xe(!1)}}},Os=()=>{O(l.exercises.map(s=>{var a;return{...s,sets:((a=s.sets)==null?void 0:a.map(t=>({...t})))||[]}})),Ee(l.notes||""),Ce(!0)},zs=()=>{Ce(!1),O([]),Ee("")},Us=async()=>{es(!0);try{await D.update(j,{exercises:X,notes:Se}),G(s=>({...s,exercises:X,notes:Se})),Ce(!1)}catch(s){console.error("Error saving edits:",s),alert("Failed to save edits")}finally{es(!1)}},as=(s,a,t)=>{O(r=>r.map((c,d)=>d===s?{...c,[a]:t}:c))},Q=(s,a,t,r)=>{O(c=>c.map((d,o)=>o===s?{...d,sets:d.sets.map((x,u)=>u===a?{...x,[t]:r}:x)}:d))},Hs=s=>{O(a=>a.map((t,r)=>{if(r!==s)return t;const c=t.sets[t.sets.length-1]||{},d=M(t);let o={id:Date.now(),rpe:"",painLevel:0,completed:!1};return d==="time"?o={...o,prescribedTime:c.prescribedTime||"",actualTime:""}:d==="bodyweight"?o={...o,prescribedReps:c.prescribedReps||"",actualReps:""}:o={...o,prescribedWeight:c.prescribedWeight||"",prescribedReps:c.prescribedReps||"",actualWeight:"",actualReps:""},{...t,sets:[...t.sets,o]}}))},Vs=(s,a)=>{O(t=>t.map((r,c)=>c!==s||r.sets.length<=1?r:{...r,sets:r.sets.filter((d,o)=>o!==a)}))},Ys=s=>{O(a=>a.length<=1?a:a.filter((t,r)=>r!==s))},rs=async(s,a)=>{const t=l.exercises[s];if(!(!t||C)){ae(s);try{const r=l.exercises.filter((x,u)=>u!==s).map(x=>x.name),c=await ws(),d=await fetch(ys("swap-exercise"),{method:"POST",headers:c,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:r},...a?{reason:a}:{}})});if(!d.ok)throw new Error("Swap failed");const o=await d.json();if(o.exercise){const x=l.exercises.map((u,N)=>N===s?{...o.exercise,type:o.exercise.type||u.type||"weight"}:u);await D.update(j,{exercises:x}),G(u=>({...u,exercises:x})),$(x.map(u=>{var N;return{...u,notes:u.notes||"",sets:((N=u.sets)==null?void 0:N.map(i=>({...i})))||[]}}))}}catch(r){console.error("Swap error:",r)}finally{ae(null)}}},ls=async(s,a)=>{var r;const t=Y?F[s]:(r=l==null?void 0:l.exercises)==null?void 0:r[s];if(!(!t||C)){ae(s),J(null),K(null);try{const c=(Y?F:l.exercises).filter((u,N)=>N!==s).map(u=>u.name),d=await ws(),o=await fetch(ys("swap-exercise"),{method:"POST",headers:d,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:c},preferredReplacement:a})});if(!o.ok)throw new Error("Swap failed");const x=await o.json();if(x.exercise){const u=(Y?F:l.exercises).map((N,i)=>i===s?{...x.exercise,type:x.exercise.type||N.type||"weight"}:N);await D.update(j,{exercises:u}),G(N=>({...N,exercises:u})),Y&&$(u.map(N=>{var i;return{...N,notes:N.notes||"",sets:((i=N.sets)==null?void 0:i.map(b=>({...b})))||[]}}))}}catch(c){console.error("Substitution swap error:",c)}finally{ae(null)}}},v=(s,a,t,r)=>{$(c=>{const d=[...c];return d[s]={...d[s],sets:d[s].sets.map((o,x)=>x===a?{...o,[t]:r}:o)},d})},Te=(s,a)=>{$(t=>{const r=[...t];return r[s]={...r[s],userNotes:a},r})},oe=(s,a,t)=>{$(r=>{const c=[...r];return c[s]={...c[s],[a]:t},c})},is=s=>{$(a=>{const t=[...a],r=t[s],c=r==null?void 0:r.supersetGroup,d=[s];return c!=null&&t.forEach((o,x)=>{x!==s&&o.supersetGroup===c&&d.push(x)}),d.forEach(o=>{const x=t[o],u=x.sets[x.sets.length-1],N=M(x);let i={rpe:"",painLevel:0,completed:!1};N==="time"?i={...i,prescribedTime:(u==null?void 0:u.prescribedTime)||"",actualTime:""}:N==="bodyweight"?i={...i,prescribedReps:(u==null?void 0:u.prescribedReps)||"",actualReps:""}:i={...i,prescribedWeight:(u==null?void 0:u.prescribedWeight)||"",prescribedReps:(u==null?void 0:u.prescribedReps)||"",actualWeight:"",actualReps:""},t[o]={...x,sets:[...x.sets,i]}}),t})},ns=(s,a)=>{$(t=>{const r=[...t],c=r[s];if(c.sets.length<=1)return t;const d=c==null?void 0:c.supersetGroup;return r[s]={...c,sets:c.sets.filter((o,x)=>x!==a)},d!=null&&r.forEach((o,x)=>{x!==s&&o.supersetGroup===d&&(r[x]={...o,sets:o.sets.filter((u,N)=>N!==a)})}),r})},cs=s=>{$(a=>{if(a.length<=1)return a;const t=a[s];return(t==null?void 0:t.supersetGroup)!=null?a.filter(r=>r.supersetGroup!==t.supersetGroup):a.filter((r,c)=>c!==s)})},os=s=>{const a={exercises:s,notes:ze,userNotes:fe};return l!=null&&l.coachingNotes&&(a.coachingNotes=l.coachingNotes),l!=null&&l.personalNotes&&(a.personalNotes=l.personalNotes),l!=null&&l.description&&(a.description=l.description),a},qs=async()=>{te(!0);try{const s=os(F);C||await D.update(j,s),G(a=>({...a,...s})),se(!1)}catch(s){console.error("Error saving:",s),alert("Failed to save")}finally{te(!1)}},Zs=async()=>{te(!0);try{const s=F.map(a=>{const t=M(a);return{...a,sets:a.sets.map(r=>t==="time"?{...r,actualTime:r.actualTime||r.prescribedTime||""}:t==="bodyweight"?{...r,actualReps:r.actualReps||r.prescribedReps||""}:{...r,actualWeight:r.actualWeight||r.prescribedWeight||"",actualReps:r.actualReps||r.prescribedReps||""})}});if(!C){const a=os(s);await D.complete(j,a)}G(a=>({...a,exercises:s,notes:ze,userNotes:fe,status:"completed",...(l==null?void 0:l.coachingNotes)&&{coachingNotes:l.coachingNotes},...(l==null?void 0:l.personalNotes)&&{personalNotes:l.personalNotes},...(l==null?void 0:l.description)&&{description:l.description}})),$(s),se(!1)}catch(s){console.error("Error completing:",s),alert("Failed to complete")}finally{te(!1)}},Js=async()=>{if(confirm("Mark this workout as incomplete? It will go back to scheduled status."))try{await D.update(j,{status:"scheduled",completedAt:null}),G(s=>({...s,status:"scheduled",completedAt:null}))}catch(s){console.error("Error marking incomplete:",s),alert("Failed to update workout status")}},Ks=s=>s>=9?"text-red-400":s>=7?"text-yellow-400":"text-green-400",Xs=s=>s>=7?"bg-red-500/20 text-red-400":s>=4?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400";if(Ss)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});if(!l)return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-12 text-center",children:[e.jsx(Pe,{className:"w-16 h-16 text-iron-700 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"Workout Not Found"}),e.jsx("button",{onClick:ss,className:"btn-primary mt-4",children:"Go Back"})]});const y=l.status==="scheduled",Qs=y&&(l.userNotes||((ds=l.exercises)==null?void 0:ds.some(s=>{var a;return s.userNotes||s.rpe||s.painLevel>0||((a=s.sets)==null?void 0:a.some(t=>t.actualWeight||t.actualReps||t.actualTime||t.rpe))}))),B=l.workoutType==="cardio",Is=((xs=V.state)==null?void 0:xs.fromLabel)||"Back",et=((ms=l.exercises)==null?void 0:ms.reduce((s,a)=>{var t;return s+(((t=a.sets)==null?void 0:t.length)||0)},0))||0,st=((ps=l.exercises)==null?void 0:ps.length)||0;return Y?e.jsxs("div",{className:"max-w-2xl mx-auto pb-36",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>se(!1),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg text-iron-100",children:y?"Log Workout":"Edit Log"}),e.jsx("button",{onClick:()=>He(!0),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(_,{className:"w-5 h-5"})})]})}),(l==null?void 0:l.notes)&&e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Coach Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:l.notes})]}),e.jsxs("div",{className:"card-steel p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-2",children:"Your Notes"}),e.jsx("textarea",{value:fe,onChange:s=>Ue(s.target.value),placeholder:"How did the workout go? Anything feel off?",rows:2,className:"w-full input-field text-sm resize-none"})]}),e.jsx("div",{className:"space-y-4",children:js(F).map((s,a)=>{var o,x,u,N;if(s.type==="superset"){const{exerciseA:i,exerciseB:b,indexA:S,indexB:w}=s,n=(p,m,h,f)=>{const T=M(m);return T==="time"?e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualTime||"",onChange:k=>v(p,f,"actualTime",k.target.value),placeholder:h.prescribedTime||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"seconds"})]}):T==="bodyweight"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualReps||"",onChange:k=>v(p,f,"actualReps",k.target.value),placeholder:h.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:h.actualWeight||"",onChange:k=>v(p,f,"actualWeight",k.target.value),placeholder:h.prescribedWeight||"BW",className:"w-full input-field text-base py-2 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"+ lbs"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:h.actualWeight||"",onChange:k=>v(p,f,"actualWeight",k.target.value),placeholder:h.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualReps||"",onChange:k=>v(p,f,"actualReps",k.target.value),placeholder:h.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]})]})},E=(p,m,h,f)=>{const T=M(m);T==="time"?v(p,f,"actualTime",h.prescribedTime||""):T==="bodyweight"?(v(p,f,"actualReps",h.prescribedReps||""),h.prescribedWeight&&v(p,f,"actualWeight",h.prescribedWeight)):(v(p,f,"actualWeight",h.prescribedWeight||""),v(p,f,"actualReps",h.prescribedReps||""))},P=(p,m)=>{const h=M(p);return h==="time"?`${m.prescribedTime||"—"}s`:h==="bodyweight"?`${m.prescribedWeight?`BW+${m.prescribedWeight} ×`:""} ${m.prescribedReps||"—"}`:`${m.prescribedWeight||"—"} × ${m.prescribedReps||"—"}`};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(Le,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[i.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",b.name]}),F.length>2&&e.jsx("button",{onClick:()=>cs(S),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove superset",children:e.jsx(he,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((o=i.sets)==null?void 0:o.length)||0," sets"]}),(i.notes||b.notes)&&e.jsxs("div",{className:"mt-2 space-y-1",children:[i.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"A:"})," ",i.notes]})]}),b.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"B:"})," ",b.notes]})]})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=i.sets)==null?void 0:x.map((p,m)=>{var A;const h=(A=b.sets)==null?void 0:A[m],f=(()=>{const I=M(i);return I==="time"?!!p.actualTime:I==="bodyweight"?!!p.actualReps:!!(p.actualWeight&&p.actualReps)})(),T=h?(()=>{const I=M(b);return I==="time"?!!h.actualTime:I==="bodyweight"?!!h.actualReps:!!(h.actualWeight&&h.actualReps)})():!1,k=f&&T;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${k?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${k?"text-green-400":"text-iron-400"}`,children:m+1})}),e.jsxs("button",{onClick:()=>{E(S,i,p,m),h&&E(w,b,h,m)},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill both with targets",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Targets"}),e.jsxs("span",{className:"text-xs font-medium text-iron-400",children:["A: ",P(i,p)," · B: ",h?P(b,h):"—"]})]}),i.sets.length>1&&e.jsx("button",{onClick:()=>ns(S,m),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["A — ",i.name]}),n(S,i,p,m)]}),h&&e.jsxs("div",{className:"pt-2 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["B — ",b.name]}),n(w,b,h,m)]})]},m)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>is(S),className:"w-full py-2.5 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Be,{className:"w-4 h-4"})," Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Ye(p=>({...p,[`ss-${s.supersetGroup}`]:!p[`ss-${s.supersetGroup}`]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"RPE / Pain"}),ie[`ss-${s.supersetGroup}`]?e.jsx(xe,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(me,{className:"w-3.5 h-3.5 ml-auto"})]}),ie[`ss-${s.supersetGroup}`]&&e.jsx("div",{className:"space-y-2 pb-2",children:[{label:"A",ex:i,idx:S},{label:"B",ex:b,idx:w}].map(({label:p,ex:m,idx:h})=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-purple-400 font-medium w-3",children:p}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(f=>e.jsx("button",{onClick:()=>oe(h,"rpe",m.rpe==f?"":String(f)),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${m.rpe==f?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:f},f))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(f=>e.jsx("button",{onClick:()=>oe(h,"painLevel",(m.painLevel||0)===f?0:f),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${(m.painLevel||0)===f?f<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:f},f))]})]},p))})]}),e.jsx("div",{className:"px-4 pb-4",children:i.userNotes||b.userNotes||ye[`ss-${s.supersetGroup}`]?e.jsx("textarea",{value:i.userNotes||"",onChange:p=>{Te(S,p.target.value),Te(w,p.target.value)},placeholder:"How did the superset feel?",rows:2,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>qe(p=>({...p,[`ss-${s.supersetGroup}`]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(Ae,{className:"w-3.5 h-3.5"})," Add notes..."]})})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,c=M(t),d=Rs(c);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{J(t),K(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(vs,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),d&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${d.color}`,children:d.label}),F.length>1&&e.jsx("button",{onClick:()=>cs(r),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove exercise",children:e.jsx(he,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((u=t.sets)==null?void 0:u.length)||0," sets"]}),t.notes&&e.jsxs("div",{className:"flex items-start gap-2 mt-2 bg-iron-900/50 rounded-lg p-2.5",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:t.notes})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(N=t.sets)==null?void 0:N.map((i,b)=>{const S=c==="time"?!!i.actualTime:c==="bodyweight"?!!i.actualReps:!!(i.actualWeight&&i.actualReps);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${S?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${S?"text-green-400":"text-iron-400"}`,children:b+1})}),e.jsxs("button",{onClick:()=>{c==="time"?v(r,b,"actualTime",i.prescribedTime||""):c==="bodyweight"?(v(r,b,"actualReps",i.prescribedReps||""),i.prescribedWeight&&v(r,b,"actualWeight",i.prescribedWeight)):(v(r,b,"actualWeight",i.prescribedWeight||""),v(r,b,"actualReps",i.prescribedReps||""))},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill with target values",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Target"}),e.jsxs("span",{className:"text-sm font-medium text-iron-400",children:[c==="time"?`${i.prescribedTime||"—"}s`:c==="bodyweight"?`${i.prescribedWeight?`BW+${i.prescribedWeight} ×`:""} ${i.prescribedReps||"—"} reps`:`${i.prescribedWeight||"—"} lbs × ${i.prescribedReps||"—"}`,i.targetRpe?` @ RPE ${i.targetRpe}`:""]})]}),t.sets.length>1&&e.jsx("button",{onClick:()=>ns(r,b),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]}),c==="time"?e.jsxs("div",{className:"ml-[52px]",children:[i.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mb-2",children:i.setNote}),e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualTime||"",onChange:w=>v(r,b,"actualTime",w.target.value),placeholder:i.prescribedTime||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):c==="bodyweight"?e.jsx("div",{className:"ml-[52px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:w=>v(r,b,"actualReps",w.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:w=>v(r,b,"actualWeight",w.target.value),placeholder:i.prescribedWeight||"BW",className:"w-full input-field text-lg py-3 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"+ added lbs"})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-[52px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const w=parseFloat(i.actualWeight||i.prescribedWeight||0);w>=5&&v(r,b,"actualWeight",String(Math.round(w-5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"−"}),e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:w=>v(r,b,"actualWeight",w.target.value),placeholder:i.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("button",{onClick:()=>{const w=parseFloat(i.actualWeight||i.prescribedWeight||0);v(r,b,"actualWeight",String(Math.round(w+5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"+"})]}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:w=>v(r,b,"actualReps",w.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]})]},b)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>is(r),className:`w-full py-2.5 border border-dashed border-iron-700 rounded-lg
                  text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600
                  flex items-center justify-center gap-1.5 transition-colors`,children:[e.jsx(Be,{className:"w-4 h-4"}),"Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Ye(i=>({...i,[r]:!i[r]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[t.rpe?`RPE ${t.rpe}`:"RPE",(t.painLevel||0)>0?` · Pain ${t.painLevel}`:""]}),ie[r]?e.jsx(xe,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(me,{className:"w-3.5 h-3.5 ml-auto"})]}),ie[r]&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(i=>e.jsx("button",{onClick:()=>oe(r,"rpe",t.rpe==i?"":String(i)),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${t.rpe==i?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>oe(r,"painLevel",(t.painLevel||0)===i?0:i),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${(t.painLevel||0)===i?i<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:t.userNotes||ye[r]?e.jsx("textarea",{value:t.userNotes||"",onChange:i=>Te(r,i.target.value),placeholder:"How did this feel? Any discomfort?",rows:2,autoFocus:ye[r]&&!t.userNotes,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>qe(i=>({...i,[r]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(Ae,{className:"w-3.5 h-3.5"}),"Add notes..."]})})]},r)})}),e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${De?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:qs,disabled:be,className:"btn-secondary py-3 px-4 text-sm flex items-center justify-center gap-1.5 flex-shrink-0",children:"Save Draft"}),e.jsx("button",{onClick:Zs,disabled:be,className:"btn-primary flex-1 py-3 text-sm flex items-center justify-center gap-2",children:be?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4"}),y?"Complete Workout":"Update"]})})]}),e.jsx("p",{className:"text-xs text-iron-500 text-center mt-1.5",children:"Empty fields filled with targets"})]}),$s&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:"RPE Scale"}),e.jsx("button",{onClick:()=>He(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-iron-400 text-sm mb-4",children:"Rate of Perceived Exertion"}),e.jsx("div",{className:"space-y-2",children:[{value:10,label:"Max effort - could not do more"},{value:9,label:"Very hard - 1 rep left"},{value:8,label:"Hard - 2 reps left"},{value:7,label:"Challenging - 3 reps left"},{value:6,label:"Moderate - 4+ reps left"}].map(({value:s,label:a})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-flame-500/20 text-flame-400 flex items-center justify-center font-medium",children:s}),e.jsx("span",{className:"text-iron-300",children:a})]},s))})]})}),e.jsx(ks,{exercise:re,isOpen:!!re,onClose:()=>{J(null),K(null)},onSubstitute:!C&&le!==null?s=>ls(le,s):void 0})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:ss,className:"flex items-center gap-2 text-iron-400 hover:text-iron-200 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:Is})]}),e.jsx("div",{className:"flex items-center gap-2",children:L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:zs,className:"px-3 py-1.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:Us,disabled:Ie,className:"px-3 py-1.5 text-sm bg-flame-500 text-white rounded-lg hover:bg-flame-600 transition-colors disabled:opacity-50 flex items-center gap-1.5",children:[Ie?e.jsx(Me,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(de,{className:"w-3.5 h-3.5"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[y?e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium",children:"To Do"}):e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Completed"}),Cs&&!L&&e.jsx("button",{onClick:Os,className:"p-2 text-iron-400 hover:text-flame-400 transition-colors",title:"Edit workout",children:e.jsx(Ws,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>ue(!_e),className:"p-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})}),_e&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>ue(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-44 bg-iron-800 border border-iron-700 rounded-xl shadow-xl z-20 overflow-hidden",children:[e.jsxs(Ns,{to:`/workouts/${j}/edit`,className:"flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Edit"]}),!C&&e.jsxs("button",{onClick:ts,className:"w-full flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(kt,{className:"w-4 h-4"}),"Share"]}),e.jsxs("button",{onClick:_s,disabled:Ge,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors disabled:opacity-50 ${ee?"text-white bg-red-500 hover:bg-red-600":"text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(he,{className:"w-4 h-4"}),Ge?"Deleting...":ee?"Tap to confirm":"Delete"]}),ee&&e.jsx("button",{onClick:()=>ge(!1),className:"w-full flex items-center gap-3 px-4 py-3 text-iron-400 hover:bg-iron-700 transition-colors text-sm",children:"Cancel"})]})]})]})]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h1",{className:"text-3xl font-display text-iron-50",children:l.name||"Untitled Workout"}),l.workoutCategory&&l.workoutCategory!=="strength"&&(()=>{const a={hiit:{label:"HIIT",color:"bg-red-500/15 text-red-400 border-red-500/30"},wod:{label:"WOD",color:"bg-yellow-500/15 text-yellow-400 border-yellow-500/30"},mobility:{label:"Mobility",color:"bg-green-500/15 text-green-400 border-green-500/30"},calisthenics:{label:"Calisthenics",color:"bg-cyan-500/15 text-cyan-400 border-cyan-500/30"},dynamic:{label:"Dynamic",color:"bg-purple-500/15 text-purple-400 border-purple-500/30"}}[l.workoutCategory];return a?e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-medium ${a.color}`,children:a.label}):null})()]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(xt,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{children:l.date?mt(pt(l.date),"EEEE, MMM d"):"No date"})]}),!B&&e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(Pe,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{children:[st," exercises · ",et," sets"]})]})]})]}),(l.coachingNotes||l.personalNotes)&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Ps(!Ne),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Coaching Notes"})]}),Ne?e.jsx(xe,{className:"w-4 h-4 text-iron-500"}):e.jsx(me,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(pe,{children:Ne&&e.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 max-h-64 overflow-y-auto space-y-3",children:[l.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:l.coachingNotes})]}),l.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:l.personalNotes})]})]})})})]}),l.generationPrompt&&e.jsxs("div",{className:"card-steel mb-3 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Ms(!je),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Generation Prompt"})]}),je?e.jsx(xe,{className:"w-4 h-4 text-iron-500"}):e.jsx(me,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(pe,{children:je&&e.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"px-4 pb-4",children:e.jsx("pre",{className:"text-xs text-iron-400 leading-relaxed whitespace-pre-wrap font-mono max-h-96 overflow-y-auto",children:l.generationPrompt})})})})]}),!L&&l.workoutCategory==="wod"&&l.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-400",children:"WOD Format"})]}),e.jsx("p",{className:"text-iron-200 leading-relaxed whitespace-pre-line",children:l.notes})]}),L?e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Notes"}),e.jsx("textarea",{value:Se,onChange:s=>Ee(s.target.value),rows:2,className:"w-full input-field text-sm resize-none",placeholder:"Workout notes..."})]}):l.notes&&l.workoutCategory!=="wod"&&e.jsx("div",{className:"card-steel p-4 mb-3",children:e.jsx("p",{className:"text-iron-300",children:l.notes})}),l.userNotes&&e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:l.userNotes})]}),B&&e.jsxs("div",{className:"card-steel p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-4 text-center",children:[e.jsx(Fe,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-iron-100",children:((hs=vt[l.activityType])==null?void 0:hs.label)||l.activityType||"Activity"}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Activity"})]}),l.estimatedCalories>0&&e.jsxs("div",{className:"bg-flame-500/10 rounded-xl p-4 text-center",children:[e.jsx(ut,{className:"w-8 h-8 text-flame-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-flame-400",children:l.estimatedCalories}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Calories"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[l.duration&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(Rt,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[l.duration," min"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Duration"})]})]}),l.distance&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[l.distance," mi"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Distance"})]})]})]})]}),!L&&y&&!B&&((us=l.exercises)==null?void 0:us.length)>0&&e.jsxs("div",{className:"card-steel p-4 mb-6 bg-yellow-500/5 border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gt,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:"Today's Targets"})]}),e.jsx("div",{className:"space-y-2",children:l.exercises.map((s,a)=>{var c,d,o;const t=(c=s.sets)==null?void 0:c[0],r=(d=s.sets)==null?void 0:d.every(x=>x.prescribedWeight===(t==null?void 0:t.prescribedWeight)&&x.prescribedReps===(t==null?void 0:t.prescribedReps));return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-iron-800/50 last:border-0",children:[e.jsx("span",{className:"font-medium text-iron-200",children:s.name}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[(o=s.sets)==null?void 0:o.length,"×"," ",s.type==="time"||t!=null&&t.prescribedTime?`${(t==null?void 0:t.prescribedTime)||"—"}s`:s.type==="bodyweight"?`${t!=null&&t.prescribedWeight?`BW+${t.prescribedWeight} ×`:""} ${(t==null?void 0:t.prescribedReps)||"—"} reps`:r?`${(t==null?void 0:t.prescribedWeight)||"—"}lbs × ${(t==null?void 0:t.prescribedReps)||"—"}`:"varied"]})]},a)})})]}),L&&!B&&X.length>0&&e.jsx("div",{className:"space-y-4",children:X.map((s,a)=>{var c;const t=M(s),r=Rs(t);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-iron-800/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:d=>as(a,"name",d.target.value),className:"input-field flex-1 text-lg font-bold"}),r&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.color}`,children:r.label}),X.length>1&&e.jsx("button",{onClick:()=>Ys(a),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(he,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(c=s.sets)==null?void 0:c.map((d,o)=>e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold text-iron-400",children:o+1})}),t==="time"?e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:d.prescribedTime||"",onChange:x=>Q(a,o,"prescribedTime",x.target.value),placeholder:"seconds",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):t==="bodyweight"?e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>Q(a,o,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>Q(a,o,"prescribedWeight",x.target.value),placeholder:"+ lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"added lbs"})]})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>Q(a,o,"prescribedWeight",x.target.value),placeholder:"lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>Q(a,o,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]}),s.sets.length>1&&e.jsx("button",{onClick:()=>Vs(a,o),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]},o))}),e.jsx("div",{className:"px-4 py-2",children:e.jsxs("button",{onClick:()=>Hs(a),className:"w-full py-2 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Be,{className:"w-4 h-4"}),"Add Set"]})}),s.notes&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("input",{type:"text",value:s.notes,onChange:d=>as(a,"notes",d.target.value),className:"input-field w-full text-sm",placeholder:"Exercise notes"})})]},a)})}),!L&&!B&&!y&&((gs=l.exercises)==null?void 0:gs.length)>0&&e.jsx(wt,{exercises:l.exercises,isCompleted:!0}),!L&&!B&&((bs=l.exercises)==null?void 0:bs.length)>0&&e.jsx("div",{className:"space-y-4",children:js(l.exercises).map((s,a)=>{var o,x,u,N,i,b,S,w;if(s.type==="superset"){const{exerciseA:n,exerciseB:E}=s,P=(p,m)=>{var k;const h=p.type==="time"||((k=p.sets)==null?void 0:k.some(A=>A.prescribedTime||A.actualTime)),f=p.type==="bodyweight",T=h?!!m.actualTime:f?!!m.actualReps:!!(m.actualWeight||m.actualReps);if(h)return y?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedTime||"—","s"]}):T?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualTime||"—","s ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedTime||"—","s"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"});if(f){const A=`${m.prescribedWeight?`BW+${m.prescribedWeight}`:"BW"} × ${m.prescribedReps||"—"}`;return y?e.jsx("span",{className:"text-base font-bold text-iron-100",children:A}):T?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight?`BW+${m.actualWeight}`:"BW"," × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",A]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})}return y?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedWeight||"—"," lbs × ",m.prescribedReps||"—"]}):T?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight||"—"," lbs × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedWeight||"—"," × ",m.prescribedReps||"—"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(Le,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[n.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",E.name]})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((o=n.sets)==null?void 0:o.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=n.sets)==null?void 0:x.map((p,m)=>{var f;const h=(f=E.sets)==null?void 0:f[m];return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:m+1})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["A — ",n.name]}),P(n,p)]}),h&&e.jsxs("div",{className:"pt-1.5 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["B — ",E.name]}),P(E,h)]})]})]})},m)})}),(n.notes||E.notes)&&e.jsxs("div",{className:"px-4 pb-2",children:[n.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3 mb-2",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"A:"})," ",n.notes]})]}),E.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"B:"})," ",E.notes]})]})]})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,c=t.type==="time"||((u=t.sets)==null?void 0:u.some(n=>n.prescribedTime||n.actualTime)),d=t.type==="bodyweight";return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{J(t),K(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(vs,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),c&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-500/20 text-blue-400 rounded",children:"Time"}),y&&!C&&e.jsx("button",{onClick:()=>q(r),disabled:Ve!==null,title:"Swap for similar exercise",className:"p-1.5 text-iron-500 hover:text-flame-400 hover:bg-flame-500/10 rounded-lg transition-colors disabled:opacity-30",children:Ve===r?e.jsx(Me,{className:"w-4 h-4 animate-spin text-flame-400"}):e.jsx(bt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((N=t.sets)==null?void 0:N.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(i=t.sets)==null?void 0:i.map((n,E)=>{const P=c?n.actualTime:d?!!n.actualReps:n.actualWeight||n.actualReps,p=!c&&!d&&P&&n.actualWeight&&n.actualReps&&parseInt(n.actualReps)>1?Et(parseFloat(n.actualWeight),parseInt(n.actualReps)):null;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:E+1})}),e.jsx("div",{className:"flex-1",children:c?y?e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedTime||"—"," seconds"]}),n.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mt-0.5",children:n.setNote})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedTime||"—","s",n.setNote?` — ${n.setNote}`:""]}),P?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualTime||"—"," seconds"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):d?y?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight?`BW + ${n.prescribedWeight} lbs`:"BW"," ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight?`BW+${n.prescribedWeight}`:"BW"," × ",n.prescribedReps||"—"]}),P?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight?`BW + ${n.actualWeight} lbs`:"BW"," × ",n.actualReps||"—"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):y?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight||"—"," lbs ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight||"—"," × ",n.prescribedReps||"—"]}),P?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight||"—"," lbs × ",n.actualReps||"—"]}),p&&e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded-lg",children:["e1RM: ",p," lbs"]})]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]})})]})},E)})}),!y&&(t.rpe||t.painLevel>0||((b=t.sets)==null?void 0:b.some(n=>n.rpe||n.painLevel>0)))&&e.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[(t.rpe||((S=t.sets)==null?void 0:S.some(n=>n.rpe)))&&e.jsxs("span",{className:`text-sm font-semibold ${Ks(t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0)))}`,children:["RPE ",t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0))]}),(t.painLevel>0||((w=t.sets)==null?void 0:w.some(n=>n.painLevel>0)))&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Xs(t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0)))}`,children:["Pain ",t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0))]})]}),t.notes&&e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.notes})]})}),t.userNotes&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 bg-flame-500/5 border border-flame-500/10 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-flame-400/60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-0.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.userNotes})]})]})}),!t.notes&&!t.userNotes&&null]},r)})}),!B&&(!l.exercises||l.exercises.length===0)&&e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-iron-700 mx-auto mb-3"}),e.jsx("p",{className:"text-iron-500",children:"No exercises in this workout"})]}),!B&&!L&&e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${De?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsx("button",{onClick:()=>se(!0),className:`w-full py-4 text-lg flex items-center justify-center gap-2 rounded-xl font-semibold ${y?"bg-flame-500 hover:bg-flame-600 text-white":"bg-iron-800 hover:bg-iron-700 text-iron-200"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"w-6 h-6"}),Qs?"Continue Workout":"Log Workout"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5"}),"Edit Logged Data"]})}),!y&&!C&&e.jsx("button",{onClick:Js,className:"w-full mt-2 py-2 text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Mark as incomplete"})]}),e.jsx(ks,{exercise:re,isOpen:!!re,onClose:()=>{J(null),K(null)},onSubstitute:!C&&le!==null?s=>ls(le,s):void 0}),e.jsx(pe,{children:ve!==null&&e.jsxs(e.Fragment,{children:[e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{q(null),Z("")},className:"fixed inset-0 bg-black/60 z-50"}),e.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-x-4 top-[30%] mx-auto max-w-sm bg-iron-900 border border-iron-700 rounded-2xl z-50 p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-iron-200",children:"Swap Exercise"}),e.jsx("p",{className:"text-xs text-iron-500",children:`Optionally note why you're swapping (e.g. "shoulder pain", "no cable machine")`}),e.jsx("input",{type:"text",value:we,onChange:s=>Z(s.target.value),placeholder:"Reason (optional)",className:"input-field w-full text-sm",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&(rs(ve,we),q(null),Z(""))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{q(null),Z("")},className:"flex-1 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{rs(ve,we),q(null),Z("")},className:"flex-1 py-2.5 text-sm bg-flame-500/15 text-flame-400 border border-flame-500/30 rounded-xl hover:bg-flame-500/25 transition-colors",children:"Swap"})]})]})]})}),e.jsx(pe,{children:Ls&&e.jsxs(e.Fragment,{children:[e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ne(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(U.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] mx-auto max-w-md bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Share Workout"}),e.jsx("button",{onClick:()=>ne(!1),className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 space-y-4",children:Ds?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(de,{className:"w-7 h-7 text-green-400"})}),e.jsx("p",{className:"text-iron-200 font-medium",children:"Workout Shared!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-iron-300 font-medium",children:(l==null?void 0:l.name)||"Workout"}),e.jsxs("p",{className:"text-xs text-iron-500 mt-0.5",children:[((fs=l==null?void 0:l.exercises)==null?void 0:fs.length)||0," exercises"]})]}),ke.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-iron-500",children:"No friends yet. Add friends to share workouts."}),e.jsx(Ns,{to:"/friends",className:"text-sm text-flame-400 hover:underline mt-1 inline-block",children:"Find Friends"})]}):e.jsxs(e.Fragment,{children:[ke.length>5&&e.jsxs("div",{className:"relative",children:[e.jsx(Ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:Re,onChange:s=>As(s.target.value),className:"input-field pl-9 py-2 text-sm w-full"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:ke.filter(s=>{var t;if(!Re)return!0;const a=We[s];return(t=a==null?void 0:a.displayName)==null?void 0:t.toLowerCase().includes(Re.toLowerCase())}).map(s=>{const a=We[s];return e.jsxs("button",{onClick:()=>Ze(s),className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors ${z===s?"bg-flame-500/15 border border-flame-500/30":"hover:bg-iron-800"}`,children:[a!=null&&a.photoURL?e.jsx("img",{src:a.photoURL,alt:"",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-700 flex items-center justify-center text-xs font-medium text-iron-400",children:((a==null?void 0:a.displayName)||"?")[0]}),e.jsx("span",{className:"text-sm text-iron-200 flex-1 text-left truncate",children:(a==null?void 0:a.displayName)||"User"}),z===s&&e.jsx(de,{className:"w-4 h-4 text-flame-400"})]},s)})}),e.jsx("textarea",{placeholder:"Add a message (optional)",value:Je,onChange:s=>Ke(s.target.value),rows:2,className:"input-field w-full resize-none text-sm"}),e.jsxs("button",{onClick:Gs,disabled:!z||ce,className:"btn-primary w-full py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:[ce?e.jsx(Me,{className:"w-4 h-4 animate-spin"}):e.jsx(Nt,{className:"w-4 h-4"}),ce?"Sharing...":"Share Workout"]})]})]})})]})]})})]})}export{Ht as default};
