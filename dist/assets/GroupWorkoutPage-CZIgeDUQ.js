import{a as je,b as Ne,c as ve,d as we,r as p,g as y,e as ye,j as e,f as ke,U as A,A as Re,C as Ce,S as Te,m as L,E as Ee,T as We,h as q,B as V,i as X,k as _,l as J,P as Se,X as M,n as Pe,o as Ae,p as Le}from"./index-BH1MXG3y.js";import{T as Me}from"./trash-2-DIsgLbDI.js";import{P as K}from"./pencil-B3kL8D_P.js";import{M as $e}from"./message-square-C07fH1sq.js";import{I as Fe}from"./info-CCpSKipY.js";const Be=(m,x)=>!m||!x||x<1?null:x===1?m:x>30?null:Math.round(m*(1+x/30)),S=m=>{if(m.type)return m.type;const x=m.sets||[];return x.some(d=>d.prescribedTime||d.actualTime)?"time":!x.some(d=>d.prescribedWeight||d.actualWeight)&&x.some(d=>d.prescribedReps||d.actualReps)?"bodyweight":"weight"},Q=m=>{switch(m){case"time":return{label:"Time",color:"bg-blue-500/20 text-blue-400"};case"bodyweight":return{label:"BW",color:"bg-emerald-500/20 text-emerald-400"};default:return null}};function Oe(){var z,O;const{id:m}=je(),x=Ne(),k=ve(),{user:d}=we(),[a,R]=p.useState(null),[u,Z]=p.useState(null),[I,ee]=p.useState(!0),[C,g]=p.useState(!1),[se,b]=p.useState(!1),[P,f]=p.useState([]),[$,F]=p.useState(""),[te,ae]=p.useState(""),[le,B]=p.useState(!1),[j,D]=p.useState(!1);console.log("[DEBUG] GroupWorkoutPage mounted, id:",m,"URL:",window.location.pathname),p.useEffect(()=>{re()},[m]);const re=async()=>{try{const s=await y.get(m);if(s){R(s),F(s.notes||""),ae(s.personalNotes||""),s.exercises&&f(s.exercises.map(n=>{var i;return{...n,type:S(n),notes:n.notes||"",sets:((i=n.sets)==null?void 0:i.map(o=>({...o})))||[]}}));const r=await ye.get(s.groupId);Z(r)}}catch(s){console.error("Error loading workout:",s)}finally{ee(!1)}},Y=()=>{var s,r;(s=k.state)!=null&&s.from?x(k.state.from,{state:(r=k.state)==null?void 0:r.backState}):a!=null&&a.groupId?x(`/groups/${a.groupId}`,{state:{activeTab:"workouts"}}):x(-1)},ie=async()=>{if(confirm("Delete this workout? This cannot be undone."))try{await y.delete(m),a!=null&&a.groupId?x(`/groups/${a.groupId}`,{state:{activeTab:"workouts"}}):x(-1)}catch(s){console.error("Error deleting workout:",s),alert("Failed to delete workout")}},N=(s,r,n,i)=>{f(o=>{const l=[...o];return l[s]={...l[s],sets:l[s].sets.map((t,c)=>c===r?{...t,[n]:i}:t)},l})},ne=(s,r)=>{f(n=>{const i=[...n];return i[s]={...i[s],notes:r},i})},oe=s=>{f(r=>{const n=[...r],i=n[s],o=i.sets[i.sets.length-1],l=i.type||"weight";let t={id:Date.now()+Math.random(),rpe:"",painLevel:0,completed:!1};return l==="time"?t={...t,prescribedTime:(o==null?void 0:o.prescribedTime)||"",actualTime:""}:l==="bodyweight"?t={...t,prescribedReps:(o==null?void 0:o.prescribedReps)||"",actualReps:""}:t={...t,prescribedWeight:(o==null?void 0:o.prescribedWeight)||"",prescribedReps:(o==null?void 0:o.prescribedReps)||"",actualWeight:"",actualReps:""},n[s]={...i,sets:[...i.sets,t]},n})},ce=(s,r)=>{f(n=>{const i=[...n],o=i[s];return o.sets.length<=1?n:(i[s]={...o,sets:o.sets.filter((l,t)=>t!==r)},i)})},G=s=>{const r={exercises:s,notes:$,personalNotes:te};return a.coachingNotes&&(r.coachingNotes=a.coachingNotes),a.description&&(r.description=a.description),r},de=async()=>{g(!0);try{const s=G(P);await y.update(m,s),R(r=>({...r,...s})),b(!1)}catch(s){console.error("Error saving workout:",s),alert("Failed to save workout")}finally{g(!1)}},me=async()=>{g(!0);try{const s=P.map(i=>{const o=i.type||S(i);return{...i,sets:i.sets.map(l=>o==="time"?{...l,actualTime:l.actualTime||l.prescribedTime||""}:o==="bodyweight"?{...l,actualReps:l.actualReps||l.prescribedReps||""}:{...l,actualWeight:l.actualWeight||l.prescribedWeight||"",actualReps:l.actualReps||l.prescribedReps||""})}}),r=G(s);a.completedBy&&a.completedBy!==a.assignedTo&&d.uid===a.assignedTo&&(r.reviewStatus="edited",r.reviewedAt=new Date),await y.complete(m,r,d.uid,a.assignedTo),R(i=>({...i,...r,status:"completed",completedBy:d.uid!==a.assignedTo?d.uid:void 0,reviewStatus:d.uid!==a.assignedTo?"pending":"self"})),f(s),b(!1)}catch(s){console.error("Error completing workout:",s),alert("Failed to complete workout")}finally{g(!1)}},xe=async()=>{g(!0);try{await y.approveReview(m),R(s=>({...s,reviewStatus:"approved"}))}catch(s){console.error("Error approving review:",s),alert("Failed to approve")}finally{g(!1)}},pe=()=>{b(!0)},he=s=>{if(!s)return"";try{const r=Ae(s);return isNaN(r.getTime())?"":Le(r,"EEEE, MMM d")}catch{return""}},ue=s=>s>=9?"text-red-400":s>=7?"text-yellow-400":"text-green-400",ge=s=>s>=7?"bg-red-500/20 text-red-400":s>=4?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400";if(I)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(ke,{className:"w-8 h-8 text-flame-500 animate-spin"})});if(!a)return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-iron-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"w-8 h-8 text-iron-600"})}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"Workout Not Found"}),e.jsx("p",{className:"text-iron-500 mb-6",children:"This workout may have been deleted or you don't have access."}),e.jsx("button",{onClick:Y,className:"btn-primary",children:"Go Back"})]});const h=a.status==="completed",v=a.assignedTo===(d==null?void 0:d.uid),T=(z=u==null?void 0:u.admins)==null?void 0:z.includes(d==null?void 0:d.uid),be=v||T,U=a.coachingNotes||a.personalNotes||a.description,E=v&&a.reviewStatus==="pending"&&a.completedBy,w=a.reviewStatus==="approved",fe=a.reviewStatus==="edited";return se?e.jsxs("div",{className:"max-w-2xl mx-auto pb-36",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>b(!1),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg text-iron-100",children:h?"Edit Log":"Log Workout"}),e.jsx("button",{onClick:()=>B(!0),className:"p-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(Fe,{className:"w-5 h-5"})})]})}),U&&e.jsxs("div",{className:"card-steel mb-4 overflow-hidden",children:[e.jsxs("button",{onClick:()=>D(!j),className:"w-full flex items-center justify-between p-3 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-300",children:"AI Coaching Notes"})]}),j?e.jsx(X,{className:"w-4 h-4 text-iron-500"}):e.jsx(_,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(J,{children:j&&e.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-3 pb-3 max-h-48 overflow-y-auto space-y-2",children:[a.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:a.coachingNotes})]}),a.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"For You"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:a.personalNotes})]})]})})})]}),e.jsxs("div",{className:"card-steel p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-2",children:"Workout Notes"}),e.jsx("textarea",{value:$,onChange:s=>F(s.target.value),placeholder:"How did the workout go?",rows:2,className:"w-full input-field text-sm resize-none"})]}),e.jsx("div",{className:"space-y-4",children:P.map((s,r)=>{var o;const n=s.type||S(s),i=Q(n);return e.jsxs("div",{className:"card-steel p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h3",{className:"font-semibold text-iron-100 text-xl flex-1",children:s.name}),i&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${i.color}`,children:i.label})]}),e.jsx("div",{className:"space-y-4",children:(o=s.sets)==null?void 0:o.map((l,t)=>e.jsxs("div",{className:"bg-iron-800/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-lg font-medium text-iron-200",children:["Set ",t+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded",children:["Target: ",n==="time"?`${l.prescribedTime||"—"}s`:n==="bodyweight"?`${l.prescribedReps||"—"} reps`:`${l.prescribedWeight||"—"} × ${l.prescribedReps||"—"}`,l.targetRpe?` @ RPE ${l.targetRpe}`:""]}),s.sets.length>1&&e.jsx("button",{onClick:()=>ce(r,t),className:"p-1 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(M,{className:"w-4 h-4"})})]})]}),n==="time"?e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1 font-medium",children:"Time (seconds)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:l.actualTime||"",onChange:c=>N(r,t,"actualTime",c.target.value),placeholder:l.prescribedTime||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"})]}):n==="bodyweight"?e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1 font-medium",children:"Reps"}),e.jsx("input",{type:"number",inputMode:"numeric",value:l.actualReps||"",onChange:c=>N(r,t,"actualReps",c.target.value),placeholder:l.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1 font-medium",children:"Weight"}),e.jsx("input",{type:"text",value:l.actualWeight||"",onChange:c=>N(r,t,"actualWeight",c.target.value),placeholder:l.prescribedWeight||"lbs",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1 font-medium",children:"Reps"}),e.jsx("input",{type:"number",inputMode:"numeric",value:l.actualReps||"",onChange:c=>N(r,t,"actualReps",c.target.value),placeholder:l.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"RPE"}),e.jsxs("select",{value:l.rpe||"",onChange:c=>N(r,t,"rpe",c.target.value),className:"w-full input-field py-2 px-3",children:[e.jsx("option",{value:"",children:"—"}),[6,6.5,7,7.5,8,8.5,9,9.5,10].map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Pain Level"}),e.jsxs("select",{value:l.painLevel||0,onChange:c=>N(r,t,"painLevel",parseInt(c.target.value)||0),className:"w-full input-field py-2 px-3",children:[e.jsx("option",{value:"0",children:"None"}),[1,2,3,4,5,6,7,8,9,10].map(c=>e.jsx("option",{value:c,children:c},c))]})]})]})]},t))}),e.jsxs("button",{onClick:()=>oe(r),className:`mt-3 w-full py-2.5 border border-dashed border-iron-700 rounded-lg
                text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600
                flex items-center justify-center gap-1.5 transition-colors`,children:[e.jsx(Pe,{className:"w-4 h-4"}),"Add Set"]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-xs text-iron-500 mb-1",children:["Notes for ",s.name]}),e.jsx("textarea",{value:s.notes||"",onChange:l=>ne(r,l.target.value),placeholder:"How did this exercise feel?",rows:2,className:"w-full input-field text-sm resize-none"})]})]},r)})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800",children:[e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"btn-secondary flex-1 py-3",children:"Cancel"}),e.jsx("button",{onClick:de,disabled:C,className:"btn-secondary flex-1 py-3",children:"Save Progress"})]}),e.jsx("button",{onClick:me,disabled:C,className:"btn-primary w-full py-4 text-lg flex items-center justify-center gap-2",children:C?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-5 h-5"}),E?"Save Changes":h?"Update":"Complete"]})}),e.jsx("p",{className:"text-xs text-iron-500 text-center mt-2",children:E?"Your changes will replace coach data":"Empty fields filled with targets"})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:"RPE Scale"}),e.jsx("button",{onClick:()=>B(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-iron-400 text-sm mb-4",children:"Rate of Perceived Exertion"}),e.jsx("div",{className:"space-y-2",children:[{value:10,label:"Max effort - could not do more"},{value:9,label:"Very hard - 1 rep left"},{value:8,label:"Hard - 2 reps left"},{value:7,label:"Challenging - 3 reps left"},{value:6,label:"Moderate - 4+ reps left"}].map(({value:s,label:r})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-flame-500/20 text-flame-400 flex items-center justify-center font-medium",children:s}),e.jsx("span",{className:"text-iron-300",children:r})]},s))})]})})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:Y,className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(Re,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[T&&e.jsx("button",{onClick:ie,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete workout",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-full text-sm font-medium",children:"Group"}),h?e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Completed"}):e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium",children:"Assigned"}),E&&e.jsx("span",{className:"px-3 py-1 bg-amber-500/20 text-amber-400 rounded-full text-sm font-medium animate-pulse",children:"Review"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-display text-iron-50 mb-2",children:a.name}),a.description&&e.jsx("p",{className:"text-iron-400 mb-2",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(Ce,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{children:he(a.date)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(A,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{children:(u==null?void 0:u.name)||"Group Workout"})]}),a.generatedByAI&&e.jsxs("div",{className:"flex items-center gap-1.5 text-iron-500",children:[e.jsx(Te,{className:"w-3.5 h-3.5 text-flame-400"}),e.jsx("span",{children:"AI Generated"})]})]})]}),!v&&!T&&e.jsx("div",{className:"card-steel p-4 mb-6 border-iron-700",children:e.jsx("p",{className:"text-sm text-iron-400",children:"This workout was assigned to another member. You can view but not edit."})}),!v&&T&&e.jsx("div",{className:"card-steel p-4 mb-6 border-cyan-500/30 bg-cyan-500/5",children:e.jsx("p",{className:"text-sm text-cyan-400",children:"You're viewing as admin. You can log this workout on behalf of the member."})}),E&&e.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 rounded-xl border border-amber-500/30 bg-amber-500/5 overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ee,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-300",children:"Review Required"}),e.jsx("p",{className:"text-sm text-iron-400 mt-1",children:"Your coach logged this workout for you. Review the results and either approve or make changes."})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:xe,disabled:C,className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(We,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:pe,className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-iron-800 hover:bg-iron-700 text-iron-300 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(K,{className:"w-4 h-4"}),"Edit & Fix"]})]})]})}),v&&(w||fe)&&e.jsxs("div",{className:`card-steel p-3 mb-6 flex items-center gap-2 ${w?"border-green-500/20 bg-green-500/5":"border-blue-500/20 bg-blue-500/5"}`,children:[e.jsx(q,{className:`w-4 h-4 ${w?"text-green-400":"text-blue-400"}`}),e.jsx("p",{className:`text-sm ${w?"text-green-400":"text-blue-400"}`,children:w?"You approved this workout logged by your coach.":"You edited and updated this workout."})]}),U&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>D(!j),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Coaching Notes"})]}),j?e.jsx(X,{className:"w-4 h-4 text-iron-500"}):e.jsx(_,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(J,{children:j&&e.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 max-h-64 overflow-y-auto space-y-3",children:[a.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.coachingNotes})]}),a.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.personalNotes})]})]})})})]}),a.notes&&e.jsx("div",{className:"card-steel p-4 mb-6",children:e.jsx("p",{className:"text-iron-300 text-sm",children:a.notes})}),e.jsx("div",{className:"space-y-4",children:(O=a.exercises)==null?void 0:O.map((s,r)=>{var o,l;const n=S(s),i=Q(n);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-iron-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-iron-50",children:s.name}),i&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${i.color}`,children:i.label})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((o=s.sets)==null?void 0:o.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(l=s.sets)==null?void 0:l.map((t,c)=>{const W=n==="time"?t.actualTime:n==="bodyweight"?t.actualReps:t.actualWeight||t.actualReps,H=n==="weight"&&W&&t.actualWeight&&t.actualReps&&parseInt(t.actualReps)>1?Be(parseFloat(t.actualWeight),parseInt(t.actualReps)):null;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold text-iron-400",children:c+1})}),e.jsx("div",{className:"flex-1",children:n==="time"?h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",t.prescribedTime||"—","s"]}),W?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[t.actualTime||"—"," seconds"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[t.prescribedTime||"—"," seconds"]}):n==="bodyweight"?h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",t.prescribedReps||"—"," reps"]}),W?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[t.actualReps||"—"," reps"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[t.prescribedReps||"—"," reps"]}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",t.prescribedWeight||"—"," lbs × ",t.prescribedReps||"—"," reps"]}),W?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[t.actualWeight||"—"," lbs × ",t.actualReps||"—"]}),H&&e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded-lg",children:["e1RM: ",H," lbs"]})]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):e.jsxs("span",{className:"text-2xl font-bold text-iron-100",children:[t.prescribedWeight||"—"," lbs × ",t.prescribedReps||"—"]})}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[t.targetRpe&&!t.rpe&&e.jsxs("span",{className:"text-xs text-iron-500",children:["Target RPE ",t.targetRpe]}),t.rpe&&e.jsxs("span",{className:`text-sm font-semibold ${ue(t.rpe)}`,children:["RPE ",t.rpe]}),t.painLevel>0&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ge(t.painLevel)}`,children:["Pain ",t.painLevel]})]})]})},c)})}),s.notes&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx($e,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-iron-400",children:s.notes})]})})]},r)})}),(!a.exercises||a.exercises.length===0)&&e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-iron-700 mx-auto mb-3"}),e.jsx("p",{className:"text-iron-500",children:"No exercises in this workout"})]}),be&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800",children:e.jsxs("button",{onClick:()=>b(!0),className:`w-full py-4 text-lg flex items-center justify-center gap-2 ${h?"btn-secondary":"btn-primary"}`,children:[h?e.jsx(K,{className:"w-5 h-5"}):e.jsx(Se,{className:"w-5 h-5"}),h?"Edit Logged Data":"Log This Workout"]})})]})}export{Oe as default};
