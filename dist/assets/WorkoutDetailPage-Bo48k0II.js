const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DngWaF3c.js","assets/index-E8keVZPM.css"])))=>i.map(i=>d[i]);
import{G as ft,a as bt,b as gt,c as Nt,u as jt,d as vt,e as wt,r as g,h as yt,_ as _e,j as e,I as Oe,A as Rt,i as Ge,C as he,L as Fs,k as kt,z as Wt,y as Ct,B as St,l as ue,n as fe,o as be,m as Y,Z as ge,t as ze,M as Tt,K as Et,X as q,P as Ue,p as Ds,H as Ls,R as $t,q as Mt,s as Ft,a3 as _,v as Dt,w as Ps,x as As}from"./index-DngWaF3c.js";import{A as Lt}from"./calorieService-6-LCVeV1.js";import{E as Bs}from"./ExerciseInfoModal-DsZL8d_c.js";import{W as Pt}from"./WorkoutSummaryCard-BjOPrzKA.js";import{P as _s}from"./pen-Bt6hHu0V.js";import{M as At}from"./more-vertical-DWFfU6UG.js";import{S as Bt}from"./share-2-Dhl9j_Ey.js";import{T as Ne}from"./trash-2-BfpgiwwA.js";import{F as _t}from"./file-text-4fyQo_E-.js";import{C as Ot}from"./clock-DjapWf3y.js";import{M as O}from"./message-square-DqcUYucI.js";import{P as He}from"./pencil-D1KRYuJz.js";import{S as Gt}from"./search-CjdYFuNf.js";import"./external-link-D9DGizLx.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ft("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ut=(w,S)=>!w||!S||S<1?null:S===1?w:S>30?null:Math.round(w*(1+S/30)),L=w=>{if(w.type)return w.type;const S=w.sets||[];return S.some(T=>T.prescribedTime||T.actualTime)?"time":!S.some(T=>T.prescribedWeight||T.actualWeight)&&S.some(T=>T.prescribedReps||T.actualReps)?"bodyweight":"weight"},Os=w=>{switch(w){case"time":return{label:"Time",color:"bg-blue-500/20 text-blue-400"};case"bodyweight":return{label:"BW",color:"bg-emerald-500/20 text-emerald-400"};default:return null}};function ra(){var ys,Rs,ks,Ws,Cs,Ss,Ts,Es,$s,Ms;const{id:w}=bt(),S=gt(),Z=Nt();jt("Workout");const{user:T,isGuest:E,isAppAdmin:Gs,userProfile:$,updateProfile:Ve}=vt(),Ye=wt(s=>s.sidebarOpen),[a,G]=g.useState(null),[zs,Us]=g.useState(!0),[qe,je]=g.useState(!1),[Ze,Je]=g.useState(!1),[ae,ve]=g.useState(!1),[J,re]=g.useState(!1),[P,F]=g.useState([]),[we,le]=g.useState(!1),[Ke,Hs]=g.useState(""),[ye,Xe]=g.useState(""),[Vs,Qe]=g.useState(!1),[Re,Ys]=g.useState(!1),[ke,qs]=g.useState(!1),[Ie,ie]=g.useState(null),[We,K]=g.useState(null),[Ce,X]=g.useState(""),[ne,Q]=g.useState(null),[oe,I]=g.useState(null),[ce,es]=g.useState({}),[Se,ss]=g.useState({}),[Zs,de]=g.useState(!1),[Te,Js]=g.useState([]),[Ee,Ks]=g.useState({}),[$e,Xs]=g.useState(""),[U,ts]=g.useState(null),[as,rs]=g.useState(""),[xe,ls]=g.useState(!1),[Qs,is]=g.useState(!1),[D,Me]=g.useState(!1),[ee,z]=g.useState([]),[Fe,De]=g.useState(""),[ns,os]=g.useState(!1),[Le,cs]=g.useState(""),[Pe,ds]=g.useState(""),[Ae,xs]=g.useState(""),[H,ms]=g.useState(!1);g.useEffect(()=>{async function s(){var l,t;if(!(!w||!T))try{let r;if(E){const{getSampleWorkouts:o}=await _e(async()=>{const{getSampleWorkouts:d}=await import("./index-DngWaF3c.js").then(c=>c.bg);return{getSampleWorkouts:d}},__vite__mapDeps([0,1]));r=o().find(d=>d.id===w)}else r=await _.getById(w);G(r),Hs((r==null?void 0:r.notes)||""),Xe((r==null?void 0:r.userNotes)||""),r!=null&&r.exercises&&F(r.exercises.map(o=>{var d;return{...o,notes:o.notes||"",userNotes:o.userNotes||"",sets:((d=o.sets)==null?void 0:d.map(c=>({...c})))||[]}})),r!=null&&r.wodResult&&(cs(((l=r.wodResult.rounds)==null?void 0:l.toString())||""),ds(((t=r.wodResult.extraReps)==null?void 0:t.toString())||""),xs(r.wodResult.completionTime||""),ms(r.wodResult.dnf||!1))}catch(r){console.error("Error fetching workout:",r)}finally{Us(!1)}}s()},[w,T,E]),g.useEffect(()=>{var s;(s=Z.state)!=null&&s.openShare&&a&&!E&&(window.history.replaceState({},""),setTimeout(()=>hs(),100))},[a]);const ps=()=>{var s;(s=Z.state)!=null&&s.from?S(Z.state.from):S(-1)},Is=async()=>{var s,l,t,r,o,d,c;if(!ae){ve(!0);return}Je(!0);try{if(E){S("/workouts");return}if(await _.delete(w),a!=null&&a.benchmarkWodId&&((s=$==null?void 0:$.wodStats)!=null&&s[a.benchmarkWodId]))try{const x=a.benchmarkWodId,m=$.wodStats[x];if(((l=m==null?void 0:m.history)==null?void 0:l.length)>0){const u=a.date instanceof Date?a.date.toISOString().split("T")[0]:((o=(r=(t=a.date)==null?void 0:t.toDate)==null?void 0:r.call(t))==null?void 0:o.toISOString().split("T")[0])||"",i=[...m.history],b=i.findIndex(N=>N.date===u);b!==-1&&i.splice(b,1);const R={...$.wodStats};if(i.length===0)delete R[x];else{const N=((d=m.pr)==null?void 0:d.format)||((c=a.wodResult)==null?void 0:c.format);let n=i[0];if(N==="amrap"){const v=i.filter(k=>k.rounds!=null).sort((k,h)=>h.rounds*1e3+(h.extraReps||0)-(k.rounds*1e3+(k.extraReps||0)))[0];v&&(n=v)}else{const v=i.filter(k=>k.time&&!k.dnf).sort((k,h)=>k.time.localeCompare(h.time))[0];v&&(n=v)}R[x]={pr:n,history:i}}await Ve({wodStats:R})}}catch(x){console.error("[WorkoutDetail] WOD stats cleanup failed:",x)}S("/workouts")}catch(x){console.error("Error deleting workout:",x),Je(!1),ve(!1)}},hs=async()=>{je(!1),de(!0),ts(null),rs(""),is(!1);try{const s=await yt.getFriends(T.uid);Js(s);const l={},{getDoc:t,doc:r}=await _e(async()=>{const{getDoc:d,doc:c}=await import("./index-DngWaF3c.js").then(x=>x.be);return{getDoc:d,doc:c}},__vite__mapDeps([0,1])),{db:o}=await _e(async()=>{const{db:d}=await import("./index-DngWaF3c.js").then(c=>c.bf);return{db:d}},__vite__mapDeps([0,1]));await Promise.all(s.map(async d=>{const c=await t(r(o,"users",d));c.exists()&&(l[d]=c.data())})),Ks(l)}catch(s){console.error("Error loading friends:",s)}},et=async()=>{var s;if(!(!U||!a||xe)){ls(!0);try{const l=((s=Ee[U])==null?void 0:s.displayName)||"";await Dt.share(T.uid,T.displayName||"Someone",U,a,as,l),is(!0),setTimeout(()=>de(!1),1500)}catch(l){console.error("Share error:",l)}finally{ls(!1)}}},st=()=>{z(a.exercises.map(s=>{var l;return{...s,sets:((l=s.sets)==null?void 0:l.map(t=>({...t})))||[]}})),De(a.notes||""),Me(!0)},tt=()=>{Me(!1),z([]),De("")},at=async()=>{os(!0);try{await _.update(w,{exercises:ee,notes:Fe}),G(s=>({...s,exercises:ee,notes:Fe})),Me(!1)}catch(s){console.error("Error saving edits:",s),alert("Failed to save edits")}finally{os(!1)}},us=(s,l,t)=>{z(r=>r.map((o,d)=>d===s?{...o,[l]:t}:o))},se=(s,l,t,r)=>{z(o=>o.map((d,c)=>c===s?{...d,sets:d.sets.map((x,m)=>m===l?{...x,[t]:r}:x)}:d))},rt=s=>{z(l=>l.map((t,r)=>{if(r!==s)return t;const o=t.sets[t.sets.length-1]||{},d=L(t);let c={id:Date.now(),rpe:"",painLevel:0,completed:!1};return d==="time"?c={...c,prescribedTime:o.prescribedTime||"",actualTime:""}:d==="bodyweight"?c={...c,prescribedReps:o.prescribedReps||"",actualReps:""}:c={...c,prescribedWeight:o.prescribedWeight||"",prescribedReps:o.prescribedReps||"",actualWeight:"",actualReps:""},{...t,sets:[...t.sets,c]}}))},lt=(s,l)=>{z(t=>t.map((r,o)=>o!==s||r.sets.length<=1?r:{...r,sets:r.sets.filter((d,c)=>c!==l)}))},it=s=>{z(l=>l.length<=1?l:l.filter((t,r)=>r!==s))},fs=async(s,l)=>{const t=a.exercises[s];if(!(!t||E)){ie(s);try{const r=a.exercises.filter((x,m)=>m!==s).map(x=>x.name),o=await Ps(),d=await fetch(As("swap-exercise"),{method:"POST",headers:o,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:r},...l?{reason:l}:{}})});if(!d.ok)throw new Error("Swap failed");const c=await d.json();if(c.exercise){const x=a.exercises.map((m,u)=>u===s?{...c.exercise,type:c.exercise.type||m.type||"weight"}:m);await _.update(w,{exercises:x}),G(m=>({...m,exercises:x})),F(x.map(m=>{var u;return{...m,notes:m.notes||"",sets:((u=m.sets)==null?void 0:u.map(i=>({...i})))||[]}}))}}catch(r){console.error("Swap error:",r)}finally{ie(null)}}},bs=async(s,l)=>{var r;const t=J?P[s]:(r=a==null?void 0:a.exercises)==null?void 0:r[s];if(!(!t||E)){ie(s),Q(null),I(null);try{const o=(J?P:a.exercises).filter((m,u)=>u!==s).map(m=>m.name),d=await Ps(),c=await fetch(As("swap-exercise"),{method:"POST",headers:d,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:o},preferredReplacement:l})});if(!c.ok)throw new Error("Swap failed");const x=await c.json();if(x.exercise){const m=(J?P:a.exercises).map((u,i)=>i===s?{...x.exercise,type:x.exercise.type||u.type||"weight"}:u);await _.update(w,{exercises:m}),G(u=>({...u,exercises:m})),J&&F(m.map(u=>{var i;return{...u,notes:u.notes||"",sets:((i=u.sets)==null?void 0:i.map(b=>({...b})))||[]}}))}}catch(o){console.error("Substitution swap error:",o)}finally{ie(null)}}},y=(s,l,t,r)=>{F(o=>{const d=[...o];return d[s]={...d[s],sets:d[s].sets.map((c,x)=>x===l?{...c,[t]:r}:c)},d})},Be=(s,l)=>{F(t=>{const r=[...t];return r[s]={...r[s],userNotes:l},r})},me=(s,l,t)=>{F(r=>{const o=[...r];return o[s]={...o[s],[l]:t},o})},gs=s=>{F(l=>{const t=[...l],r=t[s],o=r==null?void 0:r.supersetGroup,d=[s];return o!=null&&t.forEach((c,x)=>{x!==s&&c.supersetGroup===o&&d.push(x)}),d.forEach(c=>{const x=t[c],m=x.sets[x.sets.length-1],u=L(x);let i={rpe:"",painLevel:0,completed:!1};u==="time"?i={...i,prescribedTime:(m==null?void 0:m.prescribedTime)||"",actualTime:""}:u==="bodyweight"?i={...i,prescribedReps:(m==null?void 0:m.prescribedReps)||"",actualReps:""}:i={...i,prescribedWeight:(m==null?void 0:m.prescribedWeight)||"",prescribedReps:(m==null?void 0:m.prescribedReps)||"",actualWeight:"",actualReps:""},t[c]={...x,sets:[...x.sets,i]}}),t})},Ns=(s,l)=>{F(t=>{const r=[...t],o=r[s];if(o.sets.length<=1)return t;const d=o==null?void 0:o.supersetGroup;return r[s]={...o,sets:o.sets.filter((c,x)=>x!==l)},d!=null&&r.forEach((c,x)=>{x!==s&&c.supersetGroup===d&&(r[x]={...c,sets:c.sets.filter((m,u)=>u!==l)})}),r})},js=s=>{F(l=>{if(l.length<=1)return l;const t=l[s];return(t==null?void 0:t.supersetGroup)!=null?l.filter(r=>r.supersetGroup!==t.supersetGroup):l.filter((r,o)=>o!==s)})},vs=s=>{const l={exercises:s,notes:Ke,userNotes:ye};return a!=null&&a.coachingNotes&&(l.coachingNotes=a.coachingNotes),a!=null&&a.personalNotes&&(l.personalNotes=a.personalNotes),a!=null&&a.description&&(l.description=a.description),l},nt=async()=>{le(!0);try{const s=vs(P);E||await _.update(w,s),G(l=>({...l,...s})),re(!1)}catch(s){console.error("Error saving:",s),alert("Failed to save")}finally{le(!1)}},ot=async()=>{var s,l,t,r,o;le(!0);try{const d=P.map(x=>{const m=L(x);return{...x,sets:x.sets.map(u=>m==="time"?{...u,actualTime:u.actualTime||u.prescribedTime||""}:m==="bodyweight"?{...u,actualReps:u.actualReps||u.prescribedReps||""}:{...u,actualWeight:u.actualWeight||u.prescribedWeight||"",actualReps:u.actualReps||u.prescribedReps||""})}});if(!E){const x=vs(d);pe&&(x.wodResult=V==="amrap"?{format:"amrap",rounds:parseInt(Le)||0,extraReps:parseInt(Pe)||0}:{format:"fortime",completionTime:Ae||"",dnf:H}),await _.complete(w,x)}const c=pe?V==="amrap"?{format:"amrap",rounds:parseInt(Le)||0,extraReps:parseInt(Pe)||0}:{format:"fortime",completionTime:Ae||"",dnf:H}:void 0;if(G(x=>({...x,exercises:d,notes:Ke,userNotes:ye,status:"completed",...c&&{wodResult:c},...(a==null?void 0:a.coachingNotes)&&{coachingNotes:a.coachingNotes},...(a==null?void 0:a.personalNotes)&&{personalNotes:a.personalNotes},...(a==null?void 0:a.description)&&{description:a.description}})),F(d),re(!1),!E&&c&&(a!=null&&a.benchmarkWodId))try{const x=a.benchmarkWodId,m=((s=$==null?void 0:$.wodStats)==null?void 0:s[x])||{history:[]},u=(l=a.benchmarkVariant)==null?void 0:l.startsWith("rx"),i={date:a.date instanceof Date?a.date.toISOString().split("T")[0]:((o=(r=(t=a.date)==null?void 0:t.toDate)==null?void 0:r.call(t))==null?void 0:o.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],rxOrScaled:u?"rx":"scaled",variant:a.benchmarkVariant||null,...c.format==="amrap"?{rounds:c.rounds,extraReps:c.extraReps}:{time:c.completionTime,dnf:c.dnf}},b=[i,...m.history||[]].slice(0,20);let R=i;if(c.format==="amrap"){const N=b.filter(n=>n.rounds!=null).sort((n,v)=>v.rounds*1e3+(v.extraReps||0)-(n.rounds*1e3+(n.extraReps||0)))[0];N&&(R=N)}else{const N=b.filter(n=>n.time&&!n.dnf).sort((n,v)=>n.time.localeCompare(v.time))[0];N&&(R=N)}await Ve({wodStats:{...($==null?void 0:$.wodStats)||{},[x]:{pr:R,history:b}}})}catch(x){console.error("[WorkoutDetail] Failed to update WOD stats:",x)}}catch(d){console.error("Error completing:",d),alert("Failed to complete")}finally{le(!1)}},ct=async()=>{if(confirm("Mark this workout as incomplete? It will go back to scheduled status."))try{await _.update(w,{status:"scheduled",completedAt:null}),G(s=>({...s,status:"scheduled",completedAt:null}))}catch(s){console.error("Error marking incomplete:",s),alert("Failed to update workout status")}},dt=s=>s>=9?"text-red-400":s>=7?"text-yellow-400":"text-green-400",xt=s=>s>=7?"bg-red-500/20 text-red-400":s>=4?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400";if(zs)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});if(!a)return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-iron-700 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"Workout Not Found"}),e.jsx("button",{onClick:ps,className:"btn-primary mt-4",children:"Go Back"})]});const W=a.status==="scheduled",mt=W&&(a.userNotes||((ys=a.exercises)==null?void 0:ys.some(s=>{var l;return s.userNotes||s.rpe||s.painLevel>0||((l=s.sets)==null?void 0:l.some(t=>t.actualWeight||t.actualReps||t.actualTime||t.rpe))}))),A=a.workoutType==="cardio",pt=((Rs=Z.state)==null?void 0:Rs.fromLabel)||"Back",ws=a.workoutCategory==="wod",V=(()=>{if(!ws)return null;const s=(a.notes||"").toLowerCase();return s.includes("amrap")?"amrap":s.includes("for time")?"fortime":s.includes("emom")?"emom":"amrap"})(),pe=ws&&(V==="amrap"||V==="fortime"),ht=((ks=a.exercises)==null?void 0:ks.reduce((s,l)=>{var t;return s+(((t=l.sets)==null?void 0:t.length)||0)},0))||0,ut=((Ws=a.exercises)==null?void 0:Ws.length)||0;return J?e.jsxs("div",{className:"max-w-2xl mx-auto pb-36",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>re(!1),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg text-iron-100",children:W?"Log Workout":"Edit Log"}),e.jsx("button",{onClick:()=>Qe(!0),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(O,{className:"w-5 h-5"})})]})}),(a==null?void 0:a.notes)&&e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Coach Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.notes})]}),e.jsxs("div",{className:"card-steel p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-2",children:"Your Notes"}),e.jsx("textarea",{value:ye,onChange:s=>Xe(s.target.value),placeholder:"How did the workout go? Anything feel off?",rows:2,className:"w-full input-field text-sm resize-none"})]}),pe&&e.jsxs("div",{className:"card-steel p-5 mb-4 border border-yellow-500/20 bg-yellow-500/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ge,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:V==="amrap"?"AMRAP Result":"For Time Result"})]}),V==="amrap"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Rounds Completed"}),e.jsx("input",{type:"number",inputMode:"numeric",value:Le,onChange:s=>cs(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-3xl py-3 px-4 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Extra Reps (partial round)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:Pe,onChange:s=>ds(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-xl py-2.5 px-4 text-center font-semibold"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Completion Time (mm:ss)"}),e.jsx("input",{type:"text",value:Ae,onChange:s=>xs(s.target.value),placeholder:"12:30",disabled:H,className:"input-field w-full text-3xl py-3 px-4 text-center font-bold disabled:opacity-40"})]}),e.jsx("button",{onClick:()=>ms(!H),className:`w-full py-2.5 rounded-lg text-sm font-medium transition-colors ${H?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-iron-800 text-iron-500 hover:bg-iron-700"}`,children:H?"DNF (Did Not Finish)":"Mark as DNF"})]}),((Ms=a.exercises)==null?void 0:Ms.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-iron-800/50",children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2",children:"Movements per round"}),e.jsx("div",{className:"space-y-1",children:a.exercises.map((s,l)=>{var t,r,o,d;return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-iron-300",children:s.name}),e.jsx("span",{className:"text-iron-500",children:(r=(t=s.sets)==null?void 0:t[0])!=null&&r.prescribedReps?`${s.sets[0].prescribedReps} reps`:(d=(o=s.sets)==null?void 0:o[0])!=null&&d.prescribedTime?`${s.sets[0].prescribedTime}s`:"—"})]},l)})})]})]}),!pe&&e.jsx("div",{className:"space-y-4",children:Ds(P).map((s,l)=>{var c,x,m,u;if(s.type==="superset"){const{exerciseA:i,exerciseB:b,indexA:R,indexB:N}=s,n=(h,p,f,j)=>{const M=L(p);return M==="time"?e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:f.actualTime||"",onChange:C=>y(h,j,"actualTime",C.target.value),placeholder:f.prescribedTime||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"seconds"})]}):M==="bodyweight"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:f.actualReps||"",onChange:C=>y(h,j,"actualReps",C.target.value),placeholder:f.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:f.actualWeight||"",onChange:C=>y(h,j,"actualWeight",C.target.value),placeholder:f.prescribedWeight||"BW",className:"w-full input-field text-base py-2 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"+ lbs"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:f.actualWeight||"",onChange:C=>y(h,j,"actualWeight",C.target.value),placeholder:f.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:f.actualReps||"",onChange:C=>y(h,j,"actualReps",C.target.value),placeholder:f.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]})]})},v=(h,p,f,j)=>{const M=L(p);M==="time"?y(h,j,"actualTime",f.prescribedTime||""):M==="bodyweight"?(y(h,j,"actualReps",f.prescribedReps||""),f.prescribedWeight&&y(h,j,"actualWeight",f.prescribedWeight)):(y(h,j,"actualWeight",f.prescribedWeight||""),y(h,j,"actualReps",f.prescribedReps||""))},k=(h,p)=>{const f=L(h);return f==="time"?`${p.prescribedTime||"—"}s`:f==="bodyweight"?`${p.prescribedWeight?`BW+${p.prescribedWeight} ×`:""} ${p.prescribedReps||"—"}`:`${p.prescribedWeight||"—"} × ${p.prescribedReps||"—"}`};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(ge,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[i.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",b.name]}),P.length>2&&e.jsx("button",{onClick:()=>js(R),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove superset",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((c=i.sets)==null?void 0:c.length)||0," sets"]}),(i.notes||b.notes)&&e.jsxs("div",{className:"mt-2 space-y-1",children:[i.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(O,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"A:"})," ",i.notes]})]}),b.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(O,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"B:"})," ",b.notes]})]})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=i.sets)==null?void 0:x.map((h,p)=>{var B;const f=(B=b.sets)==null?void 0:B[p],j=(()=>{const te=L(i);return te==="time"?!!h.actualTime:te==="bodyweight"?!!h.actualReps:!!(h.actualWeight&&h.actualReps)})(),M=f?(()=>{const te=L(b);return te==="time"?!!f.actualTime:te==="bodyweight"?!!f.actualReps:!!(f.actualWeight&&f.actualReps)})():!1,C=j&&M;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${C?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${C?"text-green-400":"text-iron-400"}`,children:p+1})}),e.jsxs("button",{onClick:()=>{v(R,i,h,p),f&&v(N,b,f,p)},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill both with targets",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Targets"}),e.jsxs("span",{className:"text-xs font-medium text-iron-400",children:["A: ",k(i,h)," · B: ",f?k(b,f):"—"]})]}),i.sets.length>1&&e.jsx("button",{onClick:()=>Ns(R,p),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["A — ",i.name]}),n(R,i,h,p)]}),f&&e.jsxs("div",{className:"pt-2 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["B — ",b.name]}),n(N,b,f,p)]})]},p)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>gs(R),className:"w-full py-2.5 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Ue,{className:"w-4 h-4"})," Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>es(h=>({...h,[`ss-${s.supersetGroup}`]:!h[`ss-${s.supersetGroup}`]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"RPE / Pain"}),ce[`ss-${s.supersetGroup}`]?e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(fe,{className:"w-3.5 h-3.5 ml-auto"})]}),ce[`ss-${s.supersetGroup}`]&&e.jsx("div",{className:"space-y-2 pb-2",children:[{label:"A",ex:i,idx:R},{label:"B",ex:b,idx:N}].map(({label:h,ex:p,idx:f})=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-purple-400 font-medium w-3",children:h}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(j=>e.jsx("button",{onClick:()=>me(f,"rpe",p.rpe==j?"":String(j)),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${p.rpe==j?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:j},j))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(j=>e.jsx("button",{onClick:()=>me(f,"painLevel",(p.painLevel||0)===j?0:j),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${(p.painLevel||0)===j?j<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:j},j))]})]},h))})]}),e.jsx("div",{className:"px-4 pb-4",children:i.userNotes||b.userNotes||Se[`ss-${s.supersetGroup}`]?e.jsx("textarea",{value:i.userNotes||"",onChange:h=>{Be(R,h.target.value),Be(N,h.target.value)},placeholder:"How did the superset feel?",rows:2,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>ss(h=>({...h,[`ss-${s.supersetGroup}`]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(He,{className:"w-3.5 h-3.5"})," Add notes..."]})})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,o=L(t),d=Os(o);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Q(t),I(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Ls,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),d&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${d.color}`,children:d.label}),P.length>1&&e.jsx("button",{onClick:()=>js(r),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove exercise",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((m=t.sets)==null?void 0:m.length)||0," sets"]}),t.notes&&e.jsxs("div",{className:"flex items-start gap-2 mt-2 bg-iron-900/50 rounded-lg p-2.5",children:[e.jsx(O,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:t.notes})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(u=t.sets)==null?void 0:u.map((i,b)=>{const R=o==="time"?!!i.actualTime:o==="bodyweight"?!!i.actualReps:!!(i.actualWeight&&i.actualReps);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${R?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${R?"text-green-400":"text-iron-400"}`,children:b+1})}),e.jsxs("button",{onClick:()=>{o==="time"?y(r,b,"actualTime",i.prescribedTime||""):o==="bodyweight"?(y(r,b,"actualReps",i.prescribedReps||""),i.prescribedWeight&&y(r,b,"actualWeight",i.prescribedWeight)):(y(r,b,"actualWeight",i.prescribedWeight||""),y(r,b,"actualReps",i.prescribedReps||""))},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill with target values",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Target"}),e.jsxs("span",{className:"text-sm font-medium text-iron-400",children:[o==="time"?`${i.prescribedTime||"—"}s`:o==="bodyweight"?`${i.prescribedWeight?`BW+${i.prescribedWeight} ×`:""} ${i.prescribedReps||"—"} reps`:`${i.prescribedWeight||"—"} lbs × ${i.prescribedReps||"—"}`,i.targetRpe?` @ RPE ${i.targetRpe}`:""]})]}),t.sets.length>1&&e.jsx("button",{onClick:()=>Ns(r,b),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]}),o==="time"?e.jsxs("div",{className:"ml-[52px]",children:[i.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mb-2",children:i.setNote}),e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualTime||"",onChange:N=>y(r,b,"actualTime",N.target.value),placeholder:i.prescribedTime||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):o==="bodyweight"?e.jsx("div",{className:"ml-[52px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:N=>y(r,b,"actualReps",N.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:N=>y(r,b,"actualWeight",N.target.value),placeholder:i.prescribedWeight||"BW",className:"w-full input-field text-lg py-3 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"+ added lbs"})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-[52px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const N=parseFloat(i.actualWeight||i.prescribedWeight||0);N>=5&&y(r,b,"actualWeight",String(Math.round(N-5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"−"}),e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:N=>y(r,b,"actualWeight",N.target.value),placeholder:i.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("button",{onClick:()=>{const N=parseFloat(i.actualWeight||i.prescribedWeight||0);y(r,b,"actualWeight",String(Math.round(N+5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"+"})]}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:N=>y(r,b,"actualReps",N.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]})]},b)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>gs(r),className:`w-full py-2.5 border border-dashed border-iron-700 rounded-lg\r
                  text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600\r
                  flex items-center justify-center gap-1.5 transition-colors`,children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>es(i=>({...i,[r]:!i[r]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[t.rpe?`RPE ${t.rpe}`:"RPE",(t.painLevel||0)>0?` · Pain ${t.painLevel}`:""]}),ce[r]?e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(fe,{className:"w-3.5 h-3.5 ml-auto"})]}),ce[r]&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(i=>e.jsx("button",{onClick:()=>me(r,"rpe",t.rpe==i?"":String(i)),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${t.rpe==i?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>me(r,"painLevel",(t.painLevel||0)===i?0:i),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${(t.painLevel||0)===i?i<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:t.userNotes||Se[r]?e.jsx("textarea",{value:t.userNotes||"",onChange:i=>Be(r,i.target.value),placeholder:"How did this feel? Any discomfort?",rows:2,autoFocus:Se[r]&&!t.userNotes,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>ss(i=>({...i,[r]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"Add notes..."]})})]},r)})}),e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${Ye?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:nt,disabled:we,className:"btn-secondary py-3 px-4 text-sm flex items-center justify-center gap-1.5 flex-shrink-0",children:"Save Draft"}),e.jsx("button",{onClick:ot,disabled:we,className:"btn-primary flex-1 py-3 text-sm flex items-center justify-center gap-2",children:we?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"}),W?"Complete Workout":"Update"]})})]}),e.jsx("p",{className:"text-xs text-iron-500 text-center mt-1.5",children:"Empty fields filled with targets"})]}),Vs&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:"RPE Scale"}),e.jsx("button",{onClick:()=>Qe(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-iron-400 text-sm mb-4",children:"Rate of Perceived Exertion"}),e.jsx("div",{className:"space-y-2",children:[{value:10,label:"Max effort - could not do more"},{value:9,label:"Very hard - 1 rep left"},{value:8,label:"Hard - 2 reps left"},{value:7,label:"Challenging - 3 reps left"},{value:6,label:"Moderate - 4+ reps left"}].map(({value:s,label:l})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-flame-500/20 text-flame-400 flex items-center justify-center font-medium",children:s}),e.jsx("span",{className:"text-iron-300",children:l})]},s))})]})}),e.jsx(Bs,{exercise:ne,isOpen:!!ne,onClose:()=>{Q(null),I(null)},onSubstitute:!E&&oe!==null?s=>bs(oe,s):void 0})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:ps,className:"flex items-center gap-2 text-iron-400 hover:text-iron-200 transition-colors",children:[e.jsx(Rt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:pt})]}),e.jsx("div",{className:"flex items-center gap-2",children:D?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:tt,className:"px-3 py-1.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:at,disabled:ns,className:"px-3 py-1.5 text-sm bg-flame-500 text-white rounded-lg hover:bg-flame-600 transition-colors disabled:opacity-50 flex items-center gap-1.5",children:[ns?e.jsx(Ge,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(he,{className:"w-3.5 h-3.5"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[W?e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium",children:"To Do"}):e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Completed"}),Gs&&!D&&e.jsx("button",{onClick:st,className:"p-2 text-iron-400 hover:text-flame-400 transition-colors",title:"Edit workout",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>je(!qe),className:"p-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(At,{className:"w-5 h-5"})}),qe&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>je(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-44 bg-iron-800 border border-iron-700 rounded-xl shadow-xl z-20 overflow-hidden",children:[e.jsxs(Fs,{to:`/workouts/${w}/edit`,className:"flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(_s,{className:"w-4 h-4"}),"Edit"]}),!E&&e.jsxs("button",{onClick:hs,className:"w-full flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Share"]}),e.jsxs("button",{onClick:Is,disabled:Ze,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors disabled:opacity-50 ${ae?"text-white bg-red-500 hover:bg-red-600":"text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(Ne,{className:"w-4 h-4"}),Ze?"Deleting...":ae?"Tap to confirm":"Delete"]}),ae&&e.jsx("button",{onClick:()=>ve(!1),className:"w-full flex items-center gap-3 px-4 py-3 text-iron-400 hover:bg-iron-700 transition-colors text-sm",children:"Cancel"})]})]})]})]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h1",{className:"text-3xl font-display text-iron-50",children:a.name||"Untitled Workout"}),a.workoutCategory&&a.workoutCategory!=="strength"&&(()=>{const l={hiit:{label:"HIIT",color:"bg-red-500/15 text-red-400 border-red-500/30"},wod:{label:"WOD",color:"bg-yellow-500/15 text-yellow-400 border-yellow-500/30"},mobility:{label:"Mobility",color:"bg-green-500/15 text-green-400 border-green-500/30"},calisthenics:{label:"Calisthenics",color:"bg-cyan-500/15 text-cyan-400 border-cyan-500/30"},dynamic:{label:"Dynamic",color:"bg-purple-500/15 text-purple-400 border-purple-500/30"}}[a.workoutCategory];return l?e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-medium ${l.color}`,children:l.label}):null})()]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(kt,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{children:a.date?Wt(Ct(a.date),"EEEE, MMM d"):"No date"})]}),!A&&e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(Oe,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{children:[ut," exercises · ",ht," sets"]})]})]})]}),(a.coachingNotes||a.personalNotes)&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Ys(!Re),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Coaching Notes"})]}),Re?e.jsx(ue,{className:"w-4 h-4 text-iron-500"}):e.jsx(fe,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(be,{children:Re&&e.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 max-h-64 overflow-y-auto space-y-3",children:[a.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.coachingNotes})]}),a.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.personalNotes})]})]})})})]}),a.generationPrompt&&e.jsxs("div",{className:"card-steel mb-3 overflow-hidden",children:[e.jsxs("button",{onClick:()=>qs(!ke),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Generation Prompt"})]}),ke?e.jsx(ue,{className:"w-4 h-4 text-iron-500"}):e.jsx(fe,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(be,{children:ke&&e.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"px-4 pb-4",children:e.jsx("pre",{className:"text-xs text-iron-400 leading-relaxed whitespace-pre-wrap font-mono max-h-96 overflow-y-auto",children:a.generationPrompt})})})})]}),!D&&a.workoutCategory==="wod"&&a.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-400",children:"WOD Format"})]}),e.jsx("p",{className:"text-iron-200 leading-relaxed whitespace-pre-line",children:a.notes})]}),!D&&a.wodResult&&e.jsxs("div",{className:"mb-4 p-5 bg-gradient-to-br from-flame-500/10 to-yellow-500/5 border border-flame-500/20 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-iron-400 uppercase tracking-wider mb-2",children:"Your Result"}),a.wodResult.format==="amrap"?e.jsx("div",{children:e.jsxs("p",{className:"text-4xl font-display text-flame-400",children:[a.wodResult.rounds||0,e.jsx("span",{className:"text-lg text-iron-400 ml-1",children:"rounds"}),a.wodResult.extraReps>0&&e.jsxs("span",{className:"text-2xl text-iron-300 ml-2",children:["+ ",a.wodResult.extraReps," ",e.jsx("span",{className:"text-lg text-iron-400",children:"reps"})]})]})}):a.wodResult.format==="fortime"?e.jsx("div",{children:a.wodResult.dnf?e.jsx("p",{className:"text-2xl font-display text-red-400",children:"DNF"}):e.jsx("p",{className:"text-4xl font-display text-flame-400",children:a.wodResult.completionTime||"—"})}):null]}),D?e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Notes"}),e.jsx("textarea",{value:Fe,onChange:s=>De(s.target.value),rows:2,className:"w-full input-field text-sm resize-none",placeholder:"Workout notes..."})]}):a.notes&&a.workoutCategory!=="wod"&&e.jsx("div",{className:"card-steel p-4 mb-3",children:e.jsx("p",{className:"text-iron-300",children:a.notes})}),a.userNotes&&e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:a.userNotes})]}),A&&e.jsxs("div",{className:"card-steel p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-4 text-center",children:[e.jsx(ze,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-iron-100",children:((Cs=Lt[a.activityType])==null?void 0:Cs.label)||a.activityType||"Activity"}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Activity"})]}),a.estimatedCalories>0&&e.jsxs("div",{className:"bg-flame-500/10 rounded-xl p-4 text-center",children:[e.jsx(Tt,{className:"w-8 h-8 text-flame-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-flame-400",children:a.estimatedCalories}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Calories"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.duration&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(Ot,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[a.duration," min"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Duration"})]})]}),a.distance&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(zt,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[a.distance," mi"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Distance"})]})]})]})]}),!D&&W&&!A&&((Ss=a.exercises)==null?void 0:Ss.length)>0&&e.jsxs("div",{className:"card-steel p-4 mb-6 bg-yellow-500/5 border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Et,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:"Today's Targets"})]}),e.jsx("div",{className:"space-y-2",children:a.exercises.map((s,l)=>{var o,d,c;const t=(o=s.sets)==null?void 0:o[0],r=(d=s.sets)==null?void 0:d.every(x=>x.prescribedWeight===(t==null?void 0:t.prescribedWeight)&&x.prescribedReps===(t==null?void 0:t.prescribedReps));return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-iron-800/50 last:border-0",children:[e.jsx("span",{className:"font-medium text-iron-200",children:s.name}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[(c=s.sets)==null?void 0:c.length,"×"," ",s.type==="time"||t!=null&&t.prescribedTime?`${(t==null?void 0:t.prescribedTime)||"—"}s`:s.type==="bodyweight"?`${t!=null&&t.prescribedWeight?`BW+${t.prescribedWeight} ×`:""} ${(t==null?void 0:t.prescribedReps)||"—"} reps`:r?`${(t==null?void 0:t.prescribedWeight)||"—"}lbs × ${(t==null?void 0:t.prescribedReps)||"—"}`:"varied"]})]},l)})})]}),D&&!A&&ee.length>0&&e.jsx("div",{className:"space-y-4",children:ee.map((s,l)=>{var o;const t=L(s),r=Os(t);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-iron-800/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:d=>us(l,"name",d.target.value),className:"input-field flex-1 text-lg font-bold"}),r&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.color}`,children:r.label}),ee.length>1&&e.jsx("button",{onClick:()=>it(l),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(o=s.sets)==null?void 0:o.map((d,c)=>e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold text-iron-400",children:c+1})}),t==="time"?e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:d.prescribedTime||"",onChange:x=>se(l,c,"prescribedTime",x.target.value),placeholder:"seconds",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):t==="bodyweight"?e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>se(l,c,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>se(l,c,"prescribedWeight",x.target.value),placeholder:"+ lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"added lbs"})]})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedWeight||"",onChange:x=>se(l,c,"prescribedWeight",x.target.value),placeholder:"lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:d.prescribedReps||"",onChange:x=>se(l,c,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]}),s.sets.length>1&&e.jsx("button",{onClick:()=>lt(l,c),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]},c))}),e.jsx("div",{className:"px-4 py-2",children:e.jsxs("button",{onClick:()=>rt(l),className:"w-full py-2 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Set"]})}),s.notes&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("input",{type:"text",value:s.notes,onChange:d=>us(l,"notes",d.target.value),className:"input-field w-full text-sm",placeholder:"Exercise notes"})})]},l)})}),!D&&!A&&!W&&((Ts=a.exercises)==null?void 0:Ts.length)>0&&e.jsx(Pt,{exercises:a.exercises,isCompleted:!0}),!D&&!A&&((Es=a.exercises)==null?void 0:Es.length)>0&&e.jsx("div",{className:"space-y-4",children:Ds(a.exercises).map((s,l)=>{var c,x,m,u,i,b,R,N;if(s.type==="superset"){const{exerciseA:n,exerciseB:v}=s,k=(h,p)=>{var C;const f=h.type==="time"||((C=h.sets)==null?void 0:C.some(B=>B.prescribedTime||B.actualTime)),j=h.type==="bodyweight",M=f?!!p.actualTime:j?!!p.actualReps:!!(p.actualWeight||p.actualReps);if(f)return W?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[p.prescribedTime||"—","s"]}):M?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[p.actualTime||"—","s ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",p.prescribedTime||"—","s"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"});if(j){const B=`${p.prescribedWeight?`BW+${p.prescribedWeight}`:"BW"} × ${p.prescribedReps||"—"}`;return W?e.jsx("span",{className:"text-base font-bold text-iron-100",children:B}):M?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[p.actualWeight?`BW+${p.actualWeight}`:"BW"," × ",p.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",B]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})}return W?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[p.prescribedWeight||"—"," lbs × ",p.prescribedReps||"—"]}):M?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[p.actualWeight||"—"," lbs × ",p.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",p.prescribedWeight||"—"," × ",p.prescribedReps||"—"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(ge,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[n.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",v.name]})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((c=n.sets)==null?void 0:c.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=n.sets)==null?void 0:x.map((h,p)=>{var j;const f=(j=v.sets)==null?void 0:j[p];return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:p+1})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["A — ",n.name]}),k(n,h)]}),f&&e.jsxs("div",{className:"pt-1.5 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["B — ",v.name]}),k(v,f)]})]})]})},p)})}),(n.notes||v.notes)&&e.jsxs("div",{className:"px-4 pb-2",children:[n.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3 mb-2",children:[e.jsx(O,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"A:"})," ",n.notes]})]}),v.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(O,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"B:"})," ",v.notes]})]})]})]},`ss-${s.supersetGroup}`)}const t=s.exercise,r=s.index,o=t.type==="time"||((m=t.sets)==null?void 0:m.some(n=>n.prescribedTime||n.actualTime)),d=t.type==="bodyweight";return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Q(t),I(r)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Ls,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),o&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-500/20 text-blue-400 rounded",children:"Time"}),W&&!E&&e.jsx("button",{onClick:()=>K(r),disabled:Ie!==null,title:"Swap for similar exercise",className:"p-1.5 text-iron-500 hover:text-flame-400 hover:bg-flame-500/10 rounded-lg transition-colors disabled:opacity-30",children:Ie===r?e.jsx(Ge,{className:"w-4 h-4 animate-spin text-flame-400"}):e.jsx($t,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((u=t.sets)==null?void 0:u.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(i=t.sets)==null?void 0:i.map((n,v)=>{const k=o?n.actualTime:d?!!n.actualReps:n.actualWeight||n.actualReps,h=!o&&!d&&k&&n.actualWeight&&n.actualReps&&parseInt(n.actualReps)>1?Ut(parseFloat(n.actualWeight),parseInt(n.actualReps)):null;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:v+1})}),e.jsx("div",{className:"flex-1",children:o?W?e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedTime||"—"," seconds"]}),n.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mt-0.5",children:n.setNote})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedTime||"—","s",n.setNote?` — ${n.setNote}`:""]}),k?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualTime||"—"," seconds"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):d?W?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight?`BW + ${n.prescribedWeight} lbs`:"BW"," ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight?`BW+${n.prescribedWeight}`:"BW"," × ",n.prescribedReps||"—"]}),k?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight?`BW + ${n.actualWeight} lbs`:"BW"," × ",n.actualReps||"—"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):W?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[n.prescribedWeight||"—"," lbs ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",n.prescribedReps||"—"," reps",n.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",n.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",n.prescribedWeight||"—"," × ",n.prescribedReps||"—"]}),k?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[n.actualWeight||"—"," lbs × ",n.actualReps||"—"]}),h&&e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded-lg",children:["e1RM: ",h," lbs"]})]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]})})]})},v)})}),!W&&(t.rpe||t.painLevel>0||((b=t.sets)==null?void 0:b.some(n=>n.rpe||n.painLevel>0)))&&e.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[(t.rpe||((R=t.sets)==null?void 0:R.some(n=>n.rpe)))&&e.jsxs("span",{className:`text-sm font-semibold ${dt(t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0)))}`,children:["RPE ",t.rpe||Math.max(...(t.sets||[]).map(n=>parseFloat(n.rpe)||0))]}),(t.painLevel>0||((N=t.sets)==null?void 0:N.some(n=>n.painLevel>0)))&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${xt(t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0)))}`,children:["Pain ",t.painLevel||Math.max(...(t.sets||[]).map(n=>n.painLevel||0))]})]}),t.notes&&e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(O,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.notes})]})}),t.userNotes&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 bg-flame-500/5 border border-flame-500/10 rounded-lg p-3",children:[e.jsx(O,{className:"w-4 h-4 text-flame-400/60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-0.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.userNotes})]})]})}),!t.notes&&!t.userNotes&&null]},r)})}),!A&&(!a.exercises||a.exercises.length===0)&&e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-iron-700 mx-auto mb-3"}),e.jsx("p",{className:"text-iron-500",children:"No exercises in this workout"})]}),!A&&!D&&e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${Ye?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsx("button",{onClick:()=>re(!0),className:`w-full py-4 text-lg flex items-center justify-center gap-2 rounded-xl font-semibold ${W?"bg-flame-500 hover:bg-flame-600 text-white":"bg-iron-800 hover:bg-iron-700 text-iron-200"}`,children:W?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"w-6 h-6"}),mt?"Continue Workout":"Log Workout"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-5 h-5"}),"Edit Logged Data"]})}),!W&&!E&&e.jsx("button",{onClick:ct,className:"w-full mt-2 py-2 text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Mark as incomplete"})]}),e.jsx(Bs,{exercise:ne,isOpen:!!ne,onClose:()=>{Q(null),I(null)},onSubstitute:!E&&oe!==null?s=>bs(oe,s):void 0}),e.jsx(be,{children:We!==null&&e.jsxs(e.Fragment,{children:[e.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{K(null),X("")},className:"fixed inset-0 bg-black/60 z-50"}),e.jsxs(Y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-x-4 top-[30%] mx-auto max-w-sm bg-iron-900 border border-iron-700 rounded-2xl z-50 p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-iron-200",children:"Swap Exercise"}),e.jsx("p",{className:"text-xs text-iron-500",children:`Optionally note why you're swapping (e.g. "shoulder pain", "no cable machine")`}),e.jsx("input",{type:"text",value:Ce,onChange:s=>X(s.target.value),placeholder:"Reason (optional)",className:"input-field w-full text-sm",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&(fs(We,Ce),K(null),X(""))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{K(null),X("")},className:"flex-1 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{fs(We,Ce),K(null),X("")},className:"flex-1 py-2.5 text-sm bg-flame-500/15 text-flame-400 border border-flame-500/30 rounded-xl hover:bg-flame-500/25 transition-colors",children:"Swap"})]})]})]})}),e.jsx(be,{children:Zs&&e.jsxs(e.Fragment,{children:[e.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>de(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(Y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] mx-auto max-w-md bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Share Workout"}),e.jsx("button",{onClick:()=>de(!1),className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 space-y-4",children:Qs?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(he,{className:"w-7 h-7 text-green-400"})}),e.jsx("p",{className:"text-iron-200 font-medium",children:"Workout Shared!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-iron-300 font-medium",children:(a==null?void 0:a.name)||"Workout"}),e.jsxs("p",{className:"text-xs text-iron-500 mt-0.5",children:[(($s=a==null?void 0:a.exercises)==null?void 0:$s.length)||0," exercises"]})]}),Te.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-iron-500",children:"No friends yet. Add friends to share workouts."}),e.jsx(Fs,{to:"/friends",className:"text-sm text-flame-400 hover:underline mt-1 inline-block",children:"Find Friends"})]}):e.jsxs(e.Fragment,{children:[Te.length>5&&e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:$e,onChange:s=>Xs(s.target.value),className:"input-field pl-9 py-2 text-sm w-full"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:Te.filter(s=>{var t;if(!$e)return!0;const l=Ee[s];return(t=l==null?void 0:l.displayName)==null?void 0:t.toLowerCase().includes($e.toLowerCase())}).map(s=>{const l=Ee[s];return e.jsxs("button",{onClick:()=>ts(s),className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors ${U===s?"bg-flame-500/15 border border-flame-500/30":"hover:bg-iron-800"}`,children:[l!=null&&l.photoURL?e.jsx("img",{src:l.photoURL,alt:"",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-700 flex items-center justify-center text-xs font-medium text-iron-400",children:((l==null?void 0:l.displayName)||"?")[0]}),e.jsx("span",{className:"text-sm text-iron-200 flex-1 text-left truncate",children:(l==null?void 0:l.displayName)||"User"}),U===s&&e.jsx(he,{className:"w-4 h-4 text-flame-400"})]},s)})}),e.jsx("textarea",{placeholder:"Add a message (optional)",value:as,onChange:s=>rs(s.target.value),rows:2,className:"input-field w-full resize-none text-sm"}),e.jsxs("button",{onClick:et,disabled:!U||xe,className:"btn-primary w-full py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:[xe?e.jsx(Ge,{className:"w-4 h-4 animate-spin"}):e.jsx(Ft,{className:"w-4 h-4"}),xe?"Sharing...":"Share Workout"]})]})]})})]})]})})]})}export{ra as default};
