const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D8bsGArw.js","assets/index-DqK9Aklh.css"])))=>i.map(i=>d[i]);
import{G as ht,a as ut,b as ft,c as bt,u as gt,d as Nt,e as jt,r as f,h as vt,_ as De,j as e,I as _e,A as wt,i as Ge,C as pe,L as $s,k as yt,z as Rt,y as kt,B as Wt,l as he,n as ue,o as fe,m as V,Z as be,t as Oe,M as Ct,K as St,X as Y,P as ze,p as Ms,H as Fs,R as Tt,q as Et,s as $t,a3 as D,v as Mt,w as Ps,x as Ls}from"./index-D8bsGArw.js";import{A as Ft}from"./calorieService-6-LCVeV1.js";import{E as As}from"./ExerciseInfoModal-C3hZBvhC.js";import{W as Pt}from"./WorkoutSummaryCard-CxNqMEEw.js";import{P as Bs}from"./pen-D7IwmDi8.js";import{M as Lt}from"./more-vertical-CN_azTXi.js";import{S as At}from"./share-2-BWXiDEYQ.js";import{T as ge}from"./trash-2-CfkC6D_u.js";import{F as Bt}from"./file-text-DGmfzFD3.js";import{C as Dt}from"./clock-W--POkTE.js";import{M as _}from"./message-square-CvI7zWnz.js";import{P as Ue}from"./pencil-DWy5BUF3.js";import{S as _t}from"./search-DzOb7TLu.js";import"./external-link-DJHuUBzf.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ht("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ot=(j,k)=>!j||!k||k<1?null:k===1?j:k>30?null:Math.round(j*(1+k/30)),P=j=>{if(j.type)return j.type;const k=j.sets||[];return k.some(W=>W.prescribedTime||W.actualTime)?"time":!k.some(W=>W.prescribedWeight||W.actualWeight)&&k.some(W=>W.prescribedReps||W.actualReps)?"bodyweight":"weight"},Ds=j=>{switch(j){case"time":return{label:"Time",color:"bg-blue-500/20 text-blue-400"};case"bodyweight":return{label:"BW",color:"bg-emerald-500/20 text-emerald-400"};default:return null}};function ta(){var vs,ws,ys,Rs,ks,Ws,Cs,Ss,Ts,Es;const{id:j}=ut(),k=ft(),q=bt();gt("Workout");const{user:W,isGuest:C,isAppAdmin:_s}=Nt(),He=jt(s=>s.sidebarOpen),[r,G]=f.useState(null),[Gs,Os]=f.useState(!0),[Ve,Ne]=f.useState(!1),[Ye,qe]=f.useState(!1),[te,je]=f.useState(!1),[Z,ae]=f.useState(!1),[L,$]=f.useState([]),[ve,re]=f.useState(!1),[Ze,zs]=f.useState(""),[we,Je]=f.useState(""),[Us,Ke]=f.useState(!1),[ye,Hs]=f.useState(!1),[Re,Vs]=f.useState(!1),[Xe,le]=f.useState(null),[ke,J]=f.useState(null),[We,K]=f.useState(""),[ie,X]=f.useState(null),[ne,Q]=f.useState(null),[ce,Qe]=f.useState({}),[Ce,Ie]=f.useState({}),[Ys,oe]=f.useState(!1),[Se,qs]=f.useState([]),[Te,Zs]=f.useState({}),[Ee,Js]=f.useState(""),[z,es]=f.useState(null),[ss,ts]=f.useState(""),[de,as]=f.useState(!1),[Ks,rs]=f.useState(!1),[M,$e]=f.useState(!1),[I,O]=f.useState([]),[Me,Fe]=f.useState(""),[ls,is]=f.useState(!1),[Pe,ns]=f.useState(""),[Le,cs]=f.useState(""),[Ae,os]=f.useState(""),[U,ds]=f.useState(!1);f.useEffect(()=>{async function s(){var l,t;if(!(!j||!W))try{let a;if(C){const{getSampleWorkouts:n}=await De(async()=>{const{getSampleWorkouts:o}=await import("./index-D8bsGArw.js").then(d=>d.be);return{getSampleWorkouts:o}},__vite__mapDeps([0,1]));a=n().find(o=>o.id===j)}else a=await D.getById(j);G(a),zs((a==null?void 0:a.notes)||""),Je((a==null?void 0:a.userNotes)||""),a!=null&&a.exercises&&$(a.exercises.map(n=>{var o;return{...n,notes:n.notes||"",userNotes:n.userNotes||"",sets:((o=n.sets)==null?void 0:o.map(d=>({...d})))||[]}})),a!=null&&a.wodResult&&(ns(((l=a.wodResult.rounds)==null?void 0:l.toString())||""),cs(((t=a.wodResult.extraReps)==null?void 0:t.toString())||""),os(a.wodResult.completionTime||""),ds(a.wodResult.dnf||!1))}catch(a){console.error("Error fetching workout:",a)}finally{Os(!1)}}s()},[j,W,C]),f.useEffect(()=>{var s;(s=q.state)!=null&&s.openShare&&r&&!C&&(window.history.replaceState({},""),setTimeout(()=>ms(),100))},[r]);const xs=()=>{var s;(s=q.state)!=null&&s.from?k(q.state.from):k(-1)},Xs=async()=>{if(!te){je(!0);return}qe(!0);try{if(C){k("/workouts");return}await D.delete(j),k("/workouts")}catch(s){console.error("Error deleting workout:",s),qe(!1),je(!1)}},ms=async()=>{Ne(!1),oe(!0),es(null),ts(""),rs(!1);try{const s=await vt.getFriends(W.uid);qs(s);const l={},{getDoc:t,doc:a}=await De(async()=>{const{getDoc:o,doc:d}=await import("./index-D8bsGArw.js").then(x=>x.bc);return{getDoc:o,doc:d}},__vite__mapDeps([0,1])),{db:n}=await De(async()=>{const{db:o}=await import("./index-D8bsGArw.js").then(d=>d.bd);return{db:o}},__vite__mapDeps([0,1]));await Promise.all(s.map(async o=>{const d=await t(a(n,"users",o));d.exists()&&(l[o]=d.data())})),Zs(l)}catch(s){console.error("Error loading friends:",s)}},Qs=async()=>{var s;if(!(!z||!r||de)){as(!0);try{const l=((s=Te[z])==null?void 0:s.displayName)||"";await Mt.share(W.uid,W.displayName||"Someone",z,r,ss,l),rs(!0),setTimeout(()=>oe(!1),1500)}catch(l){console.error("Share error:",l)}finally{as(!1)}}},Is=()=>{O(r.exercises.map(s=>{var l;return{...s,sets:((l=s.sets)==null?void 0:l.map(t=>({...t})))||[]}})),Fe(r.notes||""),$e(!0)},et=()=>{$e(!1),O([]),Fe("")},st=async()=>{is(!0);try{await D.update(j,{exercises:I,notes:Me}),G(s=>({...s,exercises:I,notes:Me})),$e(!1)}catch(s){console.error("Error saving edits:",s),alert("Failed to save edits")}finally{is(!1)}},ps=(s,l,t)=>{O(a=>a.map((n,o)=>o===s?{...n,[l]:t}:n))},ee=(s,l,t,a)=>{O(n=>n.map((o,d)=>d===s?{...o,sets:o.sets.map((x,u)=>u===l?{...x,[t]:a}:x)}:o))},tt=s=>{O(l=>l.map((t,a)=>{if(a!==s)return t;const n=t.sets[t.sets.length-1]||{},o=P(t);let d={id:Date.now(),rpe:"",painLevel:0,completed:!1};return o==="time"?d={...d,prescribedTime:n.prescribedTime||"",actualTime:""}:o==="bodyweight"?d={...d,prescribedReps:n.prescribedReps||"",actualReps:""}:d={...d,prescribedWeight:n.prescribedWeight||"",prescribedReps:n.prescribedReps||"",actualWeight:"",actualReps:""},{...t,sets:[...t.sets,d]}}))},at=(s,l)=>{O(t=>t.map((a,n)=>n!==s||a.sets.length<=1?a:{...a,sets:a.sets.filter((o,d)=>d!==l)}))},rt=s=>{O(l=>l.length<=1?l:l.filter((t,a)=>a!==s))},hs=async(s,l)=>{const t=r.exercises[s];if(!(!t||C)){le(s);try{const a=r.exercises.filter((x,u)=>u!==s).map(x=>x.name),n=await Ps(),o=await fetch(Ls("swap-exercise"),{method:"POST",headers:n,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:a},...l?{reason:l}:{}})});if(!o.ok)throw new Error("Swap failed");const d=await o.json();if(d.exercise){const x=r.exercises.map((u,N)=>N===s?{...d.exercise,type:d.exercise.type||u.type||"weight"}:u);await D.update(j,{exercises:x}),G(u=>({...u,exercises:x})),$(x.map(u=>{var N;return{...u,notes:u.notes||"",sets:((N=u.sets)==null?void 0:N.map(i=>({...i})))||[]}}))}}catch(a){console.error("Swap error:",a)}finally{le(null)}}},us=async(s,l)=>{var a;const t=Z?L[s]:(a=r==null?void 0:r.exercises)==null?void 0:a[s];if(!(!t||C)){le(s),X(null),Q(null);try{const n=(Z?L:r.exercises).filter((u,N)=>N!==s).map(u=>u.name),o=await Ps(),d=await fetch(Ls("swap-exercise"),{method:"POST",headers:o,body:JSON.stringify({exerciseName:t.name,exerciseType:t.type||"weight",sets:t.sets,workoutContext:{otherExercises:n},preferredReplacement:l})});if(!d.ok)throw new Error("Swap failed");const x=await d.json();if(x.exercise){const u=(Z?L:r.exercises).map((N,i)=>i===s?{...x.exercise,type:x.exercise.type||N.type||"weight"}:N);await D.update(j,{exercises:u}),G(N=>({...N,exercises:u})),Z&&$(u.map(N=>{var i;return{...N,notes:N.notes||"",sets:((i=N.sets)==null?void 0:i.map(b=>({...b})))||[]}}))}}catch(n){console.error("Substitution swap error:",n)}finally{le(null)}}},v=(s,l,t,a)=>{$(n=>{const o=[...n];return o[s]={...o[s],sets:o[s].sets.map((d,x)=>x===l?{...d,[t]:a}:d)},o})},Be=(s,l)=>{$(t=>{const a=[...t];return a[s]={...a[s],userNotes:l},a})},xe=(s,l,t)=>{$(a=>{const n=[...a];return n[s]={...n[s],[l]:t},n})},fs=s=>{$(l=>{const t=[...l],a=t[s],n=a==null?void 0:a.supersetGroup,o=[s];return n!=null&&t.forEach((d,x)=>{x!==s&&d.supersetGroup===n&&o.push(x)}),o.forEach(d=>{const x=t[d],u=x.sets[x.sets.length-1],N=P(x);let i={rpe:"",painLevel:0,completed:!1};N==="time"?i={...i,prescribedTime:(u==null?void 0:u.prescribedTime)||"",actualTime:""}:N==="bodyweight"?i={...i,prescribedReps:(u==null?void 0:u.prescribedReps)||"",actualReps:""}:i={...i,prescribedWeight:(u==null?void 0:u.prescribedWeight)||"",prescribedReps:(u==null?void 0:u.prescribedReps)||"",actualWeight:"",actualReps:""},t[d]={...x,sets:[...x.sets,i]}}),t})},bs=(s,l)=>{$(t=>{const a=[...t],n=a[s];if(n.sets.length<=1)return t;const o=n==null?void 0:n.supersetGroup;return a[s]={...n,sets:n.sets.filter((d,x)=>x!==l)},o!=null&&a.forEach((d,x)=>{x!==s&&d.supersetGroup===o&&(a[x]={...d,sets:d.sets.filter((u,N)=>N!==l)})}),a})},gs=s=>{$(l=>{if(l.length<=1)return l;const t=l[s];return(t==null?void 0:t.supersetGroup)!=null?l.filter(a=>a.supersetGroup!==t.supersetGroup):l.filter((a,n)=>n!==s)})},Ns=s=>{const l={exercises:s,notes:Ze,userNotes:we};return r!=null&&r.coachingNotes&&(l.coachingNotes=r.coachingNotes),r!=null&&r.personalNotes&&(l.personalNotes=r.personalNotes),r!=null&&r.description&&(l.description=r.description),l},lt=async()=>{re(!0);try{const s=Ns(L);C||await D.update(j,s),G(l=>({...l,...s})),ae(!1)}catch(s){console.error("Error saving:",s),alert("Failed to save")}finally{re(!1)}},it=async()=>{re(!0);try{const s=L.map(t=>{const a=P(t);return{...t,sets:t.sets.map(n=>a==="time"?{...n,actualTime:n.actualTime||n.prescribedTime||""}:a==="bodyweight"?{...n,actualReps:n.actualReps||n.prescribedReps||""}:{...n,actualWeight:n.actualWeight||n.prescribedWeight||"",actualReps:n.actualReps||n.prescribedReps||""})}});if(!C){const t=Ns(s);me&&(t.wodResult=H==="amrap"?{format:"amrap",rounds:parseInt(Pe)||0,extraReps:parseInt(Le)||0}:{format:"fortime",completionTime:Ae||"",dnf:U}),await D.complete(j,t)}const l=me?H==="amrap"?{format:"amrap",rounds:parseInt(Pe)||0,extraReps:parseInt(Le)||0}:{format:"fortime",completionTime:Ae||"",dnf:U}:void 0;G(t=>({...t,exercises:s,notes:Ze,userNotes:we,status:"completed",...l&&{wodResult:l},...(r==null?void 0:r.coachingNotes)&&{coachingNotes:r.coachingNotes},...(r==null?void 0:r.personalNotes)&&{personalNotes:r.personalNotes},...(r==null?void 0:r.description)&&{description:r.description}})),$(s),ae(!1)}catch(s){console.error("Error completing:",s),alert("Failed to complete")}finally{re(!1)}},nt=async()=>{if(confirm("Mark this workout as incomplete? It will go back to scheduled status."))try{await D.update(j,{status:"scheduled",completedAt:null}),G(s=>({...s,status:"scheduled",completedAt:null}))}catch(s){console.error("Error marking incomplete:",s),alert("Failed to update workout status")}},ct=s=>s>=9?"text-red-400":s>=7?"text-yellow-400":"text-green-400",ot=s=>s>=7?"bg-red-500/20 text-red-400":s>=4?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400";if(Gs)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-flame-500 border-t-transparent rounded-full animate-spin"})});if(!r)return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-12 text-center",children:[e.jsx(_e,{className:"w-16 h-16 text-iron-700 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-display text-iron-200 mb-2",children:"Workout Not Found"}),e.jsx("button",{onClick:xs,className:"btn-primary mt-4",children:"Go Back"})]});const y=r.status==="scheduled",dt=y&&(r.userNotes||((vs=r.exercises)==null?void 0:vs.some(s=>{var l;return s.userNotes||s.rpe||s.painLevel>0||((l=s.sets)==null?void 0:l.some(t=>t.actualWeight||t.actualReps||t.actualTime||t.rpe))}))),A=r.workoutType==="cardio",xt=((ws=q.state)==null?void 0:ws.fromLabel)||"Back",js=r.workoutCategory==="wod",H=(()=>{if(!js)return null;const s=(r.notes||"").toLowerCase();return s.includes("amrap")?"amrap":s.includes("for time")?"fortime":s.includes("emom")?"emom":"amrap"})(),me=js&&(H==="amrap"||H==="fortime"),mt=((ys=r.exercises)==null?void 0:ys.reduce((s,l)=>{var t;return s+(((t=l.sets)==null?void 0:t.length)||0)},0))||0,pt=((Rs=r.exercises)==null?void 0:Rs.length)||0;return Z?e.jsxs("div",{className:"max-w-2xl mx-auto pb-36",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>ae(!1),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg text-iron-100",children:y?"Log Workout":"Edit Log"}),e.jsx("button",{onClick:()=>Ke(!0),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(_,{className:"w-5 h-5"})})]})}),(r==null?void 0:r.notes)&&e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Coach Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:r.notes})]}),e.jsxs("div",{className:"card-steel p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-2",children:"Your Notes"}),e.jsx("textarea",{value:we,onChange:s=>Je(s.target.value),placeholder:"How did the workout go? Anything feel off?",rows:2,className:"w-full input-field text-sm resize-none"})]}),me&&e.jsxs("div",{className:"card-steel p-5 mb-4 border border-yellow-500/20 bg-yellow-500/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(be,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:H==="amrap"?"AMRAP Result":"For Time Result"})]}),H==="amrap"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Rounds Completed"}),e.jsx("input",{type:"number",inputMode:"numeric",value:Pe,onChange:s=>ns(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-3xl py-3 px-4 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Extra Reps (partial round)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:Le,onChange:s=>cs(s.target.value),placeholder:"0",min:"0",className:"input-field w-full text-xl py-2.5 px-4 text-center font-semibold"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-iron-400 mb-1.5",children:"Completion Time (mm:ss)"}),e.jsx("input",{type:"text",value:Ae,onChange:s=>os(s.target.value),placeholder:"12:30",disabled:U,className:"input-field w-full text-3xl py-3 px-4 text-center font-bold disabled:opacity-40"})]}),e.jsx("button",{onClick:()=>ds(!U),className:`w-full py-2.5 rounded-lg text-sm font-medium transition-colors ${U?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-iron-800 text-iron-500 hover:bg-iron-700"}`,children:U?"DNF (Did Not Finish)":"Mark as DNF"})]}),((Es=r.exercises)==null?void 0:Es.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-iron-800/50",children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-2",children:"Movements per round"}),e.jsx("div",{className:"space-y-1",children:r.exercises.map((s,l)=>{var t,a,n,o;return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-iron-300",children:s.name}),e.jsx("span",{className:"text-iron-500",children:(a=(t=s.sets)==null?void 0:t[0])!=null&&a.prescribedReps?`${s.sets[0].prescribedReps} reps`:(o=(n=s.sets)==null?void 0:n[0])!=null&&o.prescribedTime?`${s.sets[0].prescribedTime}s`:"—"})]},l)})})]})]}),!me&&e.jsx("div",{className:"space-y-4",children:Ms(L).map((s,l)=>{var d,x,u,N;if(s.type==="superset"){const{exerciseA:i,exerciseB:b,indexA:S,indexB:w}=s,c=(p,m,h,g)=>{const E=P(m);return E==="time"?e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualTime||"",onChange:R=>v(p,g,"actualTime",R.target.value),placeholder:h.prescribedTime||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"seconds"})]}):E==="bodyweight"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualReps||"",onChange:R=>v(p,g,"actualReps",R.target.value),placeholder:h.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:h.actualWeight||"",onChange:R=>v(p,g,"actualWeight",R.target.value),placeholder:h.prescribedWeight||"BW",className:"w-full input-field text-base py-2 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"+ lbs"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:h.actualWeight||"",onChange:R=>v(p,g,"actualWeight",R.target.value),placeholder:h.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:h.actualReps||"",onChange:R=>v(p,g,"actualReps",R.target.value),placeholder:h.prescribedReps||"—",className:"w-full input-field text-lg py-2 px-3 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-0.5",children:"reps"})]})]})},T=(p,m,h,g)=>{const E=P(m);E==="time"?v(p,g,"actualTime",h.prescribedTime||""):E==="bodyweight"?(v(p,g,"actualReps",h.prescribedReps||""),h.prescribedWeight&&v(p,g,"actualWeight",h.prescribedWeight)):(v(p,g,"actualWeight",h.prescribedWeight||""),v(p,g,"actualReps",h.prescribedReps||""))},F=(p,m)=>{const h=P(p);return h==="time"?`${m.prescribedTime||"—"}s`:h==="bodyweight"?`${m.prescribedWeight?`BW+${m.prescribedWeight} ×`:""} ${m.prescribedReps||"—"}`:`${m.prescribedWeight||"—"} × ${m.prescribedReps||"—"}`};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(be,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[i.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",b.name]}),L.length>2&&e.jsx("button",{onClick:()=>gs(S),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove superset",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((d=i.sets)==null?void 0:d.length)||0," sets"]}),(i.notes||b.notes)&&e.jsxs("div",{className:"mt-2 space-y-1",children:[i.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"A:"})," ",i.notes]})]}),b.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-900/50 rounded-lg p-2",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-iron-400",children:[e.jsx("span",{className:"text-purple-400",children:"B:"})," ",b.notes]})]})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=i.sets)==null?void 0:x.map((p,m)=>{var B;const h=(B=b.sets)==null?void 0:B[m],g=(()=>{const se=P(i);return se==="time"?!!p.actualTime:se==="bodyweight"?!!p.actualReps:!!(p.actualWeight&&p.actualReps)})(),E=h?(()=>{const se=P(b);return se==="time"?!!h.actualTime:se==="bodyweight"?!!h.actualReps:!!(h.actualWeight&&h.actualReps)})():!1,R=g&&E;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${R?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${R?"text-green-400":"text-iron-400"}`,children:m+1})}),e.jsxs("button",{onClick:()=>{T(S,i,p,m),h&&T(w,b,h,m)},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill both with targets",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Targets"}),e.jsxs("span",{className:"text-xs font-medium text-iron-400",children:["A: ",F(i,p)," · B: ",h?F(b,h):"—"]})]}),i.sets.length>1&&e.jsx("button",{onClick:()=>bs(S,m),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(Y,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["A — ",i.name]}),c(S,i,p,m)]}),h&&e.jsxs("div",{className:"pt-2 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["B — ",b.name]}),c(w,b,h,m)]})]},m)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>fs(S),className:"w-full py-2.5 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"})," Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Qe(p=>({...p,[`ss-${s.supersetGroup}`]:!p[`ss-${s.supersetGroup}`]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"RPE / Pain"}),ce[`ss-${s.supersetGroup}`]?e.jsx(he,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"})]}),ce[`ss-${s.supersetGroup}`]&&e.jsx("div",{className:"space-y-2 pb-2",children:[{label:"A",ex:i,idx:S},{label:"B",ex:b,idx:w}].map(({label:p,ex:m,idx:h})=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-purple-400 font-medium w-3",children:p}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(g=>e.jsx("button",{onClick:()=>xe(h,"rpe",m.rpe==g?"":String(g)),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${m.rpe==g?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:g},g))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(g=>e.jsx("button",{onClick:()=>xe(h,"painLevel",(m.painLevel||0)===g?0:g),className:`w-7 h-7 text-xs rounded-lg border transition-colors ${(m.painLevel||0)===g?g<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:g},g))]})]},p))})]}),e.jsx("div",{className:"px-4 pb-4",children:i.userNotes||b.userNotes||Ce[`ss-${s.supersetGroup}`]?e.jsx("textarea",{value:i.userNotes||"",onChange:p=>{Be(S,p.target.value),Be(w,p.target.value)},placeholder:"How did the superset feel?",rows:2,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>Ie(p=>({...p,[`ss-${s.supersetGroup}`]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"})," Add notes..."]})})]},`ss-${s.supersetGroup}`)}const t=s.exercise,a=s.index,n=P(t),o=Ds(n);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{X(t),Q(a)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Fs,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),o&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${o.color}`,children:o.label}),L.length>1&&e.jsx("button",{onClick:()=>gs(a),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",title:"Remove exercise",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((u=t.sets)==null?void 0:u.length)||0," sets"]}),t.notes&&e.jsxs("div",{className:"flex items-start gap-2 mt-2 bg-iron-900/50 rounded-lg p-2.5",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-iron-400 leading-relaxed",children:t.notes})]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(N=t.sets)==null?void 0:N.map((i,b)=>{const S=n==="time"?!!i.actualTime:n==="bodyweight"?!!i.actualReps:!!(i.actualWeight&&i.actualReps);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${S?"bg-green-500/15 ring-1 ring-green-500/30":"bg-iron-800"}`,children:e.jsx("span",{className:`text-lg font-bold ${S?"text-green-400":"text-iron-400"}`,children:b+1})}),e.jsxs("button",{onClick:()=>{n==="time"?v(a,b,"actualTime",i.prescribedTime||""):n==="bodyweight"?(v(a,b,"actualReps",i.prescribedReps||""),i.prescribedWeight&&v(a,b,"actualWeight",i.prescribedWeight)):(v(a,b,"actualWeight",i.prescribedWeight||""),v(a,b,"actualReps",i.prescribedReps||""))},className:"flex-1 text-left hover:text-flame-400 active:scale-[0.98] transition-all",title:"Tap to fill with target values",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-iron-600 block",children:"Target"}),e.jsxs("span",{className:"text-sm font-medium text-iron-400",children:[n==="time"?`${i.prescribedTime||"—"}s`:n==="bodyweight"?`${i.prescribedWeight?`BW+${i.prescribedWeight} ×`:""} ${i.prescribedReps||"—"} reps`:`${i.prescribedWeight||"—"} lbs × ${i.prescribedReps||"—"}`,i.targetRpe?` @ RPE ${i.targetRpe}`:""]})]}),t.sets.length>1&&e.jsx("button",{onClick:()=>bs(a,b),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(Y,{className:"w-4 h-4"})})]}),n==="time"?e.jsxs("div",{className:"ml-[52px]",children:[i.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mb-2",children:i.setNote}),e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualTime||"",onChange:w=>v(a,b,"actualTime",w.target.value),placeholder:i.prescribedTime||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):n==="bodyweight"?e.jsx("div",{className:"ml-[52px]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:w=>v(a,b,"actualReps",w.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-xl py-3 px-4 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:w=>v(a,b,"actualWeight",w.target.value),placeholder:i.prescribedWeight||"BW",className:"w-full input-field text-lg py-3 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"+ added lbs"})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-[52px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{const w=parseFloat(i.actualWeight||i.prescribedWeight||0);w>=5&&v(a,b,"actualWeight",String(Math.round(w-5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"−"}),e.jsx("input",{type:"text",value:i.actualWeight||"",onChange:w=>v(a,b,"actualWeight",w.target.value),placeholder:i.prescribedWeight||"lbs",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("button",{onClick:()=>{const w=parseFloat(i.actualWeight||i.prescribedWeight||0);v(a,b,"actualWeight",String(Math.round(w+5)))},className:"w-9 h-11 rounded-lg bg-iron-700/80 text-iron-400 hover:text-iron-200 hover:bg-iron-700 active:scale-95 transition-all text-lg font-bold flex-shrink-0 flex items-center justify-center",children:"+"})]}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",inputMode:"numeric",value:i.actualReps||"",onChange:w=>v(a,b,"actualReps",w.target.value),placeholder:i.prescribedReps||"—",className:"w-full input-field text-lg py-2.5 px-2 text-center font-semibold"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]})]},b)})}),e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsxs("button",{onClick:()=>fs(a),className:`w-full py-2.5 border border-dashed border-iron-700 rounded-lg
                  text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600
                  flex items-center justify-center gap-1.5 transition-colors`,children:[e.jsx(ze,{className:"w-4 h-4"}),"Add Set"]})}),e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("button",{onClick:()=>Qe(i=>({...i,[a]:!i[a]})),className:"flex items-center gap-2 py-2 text-sm text-iron-500 hover:text-iron-300 transition-colors w-full",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[t.rpe?`RPE ${t.rpe}`:"RPE",(t.painLevel||0)>0?` · Pain ${t.painLevel}`:""]}),ce[a]?e.jsx(he,{className:"w-3.5 h-3.5 ml-auto"}):e.jsx(ue,{className:"w-3.5 h-3.5 ml-auto"})]}),ce[a]&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-6",children:"RPE"}),[6,7,8,9,10].map(i=>e.jsx("button",{onClick:()=>xe(a,"rpe",t.rpe==i?"":String(i)),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${t.rpe==i?"border-flame-500 bg-flame-500/15 text-flame-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[10px] text-iron-500 uppercase tracking-wider w-7",children:"Pain"}),[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>xe(a,"painLevel",(t.painLevel||0)===i?0:i),className:`w-8 h-8 text-xs rounded-lg border transition-colors ${(t.painLevel||0)===i?i<=2?"border-yellow-500/50 bg-yellow-500/10 text-yellow-400 font-semibold":"border-red-500/50 bg-red-500/10 text-red-400 font-semibold":"border-iron-700/60 text-iron-500 hover:border-iron-600"}`,children:i},i))]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:t.userNotes||Ce[a]?e.jsx("textarea",{value:t.userNotes||"",onChange:i=>Be(a,i.target.value),placeholder:"How did this feel? Any discomfort?",rows:2,autoFocus:Ce[a]&&!t.userNotes,className:"w-full input-field text-sm resize-none"}):e.jsxs("button",{onClick:()=>Ie(i=>({...i,[a]:!0})),className:"w-full text-left text-sm text-iron-600 hover:text-iron-400 py-2 transition-colors flex items-center gap-2",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"}),"Add notes..."]})})]},a)})}),e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${He?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:lt,disabled:ve,className:"btn-secondary py-3 px-4 text-sm flex items-center justify-center gap-1.5 flex-shrink-0",children:"Save Draft"}),e.jsx("button",{onClick:it,disabled:ve,className:"btn-primary flex-1 py-3 text-sm flex items-center justify-center gap-2",children:ve?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4"}),y?"Complete Workout":"Update"]})})]}),e.jsx("p",{className:"text-xs text-iron-500 text-center mt-1.5",children:"Empty fields filled with targets"})]}),Us&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-iron-900 rounded-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:"RPE Scale"}),e.jsx("button",{onClick:()=>Ke(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-iron-400 text-sm mb-4",children:"Rate of Perceived Exertion"}),e.jsx("div",{className:"space-y-2",children:[{value:10,label:"Max effort - could not do more"},{value:9,label:"Very hard - 1 rep left"},{value:8,label:"Hard - 2 reps left"},{value:7,label:"Challenging - 3 reps left"},{value:6,label:"Moderate - 4+ reps left"}].map(({value:s,label:l})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-flame-500/20 text-flame-400 flex items-center justify-center font-medium",children:s}),e.jsx("span",{className:"text-iron-300",children:l})]},s))})]})}),e.jsx(As,{exercise:ie,isOpen:!!ie,onClose:()=>{X(null),Q(null)},onSubstitute:!C&&ne!==null?s=>us(ne,s):void 0})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-iron-950/95 backdrop-blur-sm border-b border-iron-800 -mx-4 px-4 py-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:xs,className:"flex items-center gap-2 text-iron-400 hover:text-iron-200 transition-colors",children:[e.jsx(wt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:xt})]}),e.jsx("div",{className:"flex items-center gap-2",children:M?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:et,className:"px-3 py-1.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:st,disabled:ls,className:"px-3 py-1.5 text-sm bg-flame-500 text-white rounded-lg hover:bg-flame-600 transition-colors disabled:opacity-50 flex items-center gap-1.5",children:[ls?e.jsx(Ge,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(pe,{className:"w-3.5 h-3.5"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[y?e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium",children:"To Do"}):e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Completed"}),_s&&!M&&e.jsx("button",{onClick:Is,className:"p-2 text-iron-400 hover:text-flame-400 transition-colors",title:"Edit workout",children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>Ne(!Ve),className:"p-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(Lt,{className:"w-5 h-5"})}),Ve&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>Ne(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-44 bg-iron-800 border border-iron-700 rounded-xl shadow-xl z-20 overflow-hidden",children:[e.jsxs($s,{to:`/workouts/${j}/edit`,className:"flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Edit"]}),!C&&e.jsxs("button",{onClick:ms,className:"w-full flex items-center gap-3 px-4 py-3 text-iron-300 hover:bg-iron-700 transition-colors",children:[e.jsx(At,{className:"w-4 h-4"}),"Share"]}),e.jsxs("button",{onClick:Xs,disabled:Ye,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors disabled:opacity-50 ${te?"text-white bg-red-500 hover:bg-red-600":"text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(ge,{className:"w-4 h-4"}),Ye?"Deleting...":te?"Tap to confirm":"Delete"]}),te&&e.jsx("button",{onClick:()=>je(!1),className:"w-full flex items-center gap-3 px-4 py-3 text-iron-400 hover:bg-iron-700 transition-colors text-sm",children:"Cancel"})]})]})]})]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h1",{className:"text-3xl font-display text-iron-50",children:r.name||"Untitled Workout"}),r.workoutCategory&&r.workoutCategory!=="strength"&&(()=>{const l={hiit:{label:"HIIT",color:"bg-red-500/15 text-red-400 border-red-500/30"},wod:{label:"WOD",color:"bg-yellow-500/15 text-yellow-400 border-yellow-500/30"},mobility:{label:"Mobility",color:"bg-green-500/15 text-green-400 border-green-500/30"},calisthenics:{label:"Calisthenics",color:"bg-cyan-500/15 text-cyan-400 border-cyan-500/30"},dynamic:{label:"Dynamic",color:"bg-purple-500/15 text-purple-400 border-purple-500/30"}}[r.workoutCategory];return l?e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-medium ${l.color}`,children:l.label}):null})()]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(yt,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{children:r.date?Rt(kt(r.date),"EEEE, MMM d"):"No date"})]}),!A&&e.jsxs("div",{className:"flex items-center gap-2 text-iron-400",children:[e.jsx(_e,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{children:[pt," exercises · ",mt," sets"]})]})]})]}),(r.coachingNotes||r.personalNotes)&&e.jsxs("div",{className:"card-steel mb-6 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Hs(!ye),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"AI Coaching Notes"})]}),ye?e.jsx(he,{className:"w-4 h-4 text-iron-500"}):e.jsx(ue,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(fe,{children:ye&&e.jsx(V.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 max-h-64 overflow-y-auto space-y-3",children:[r.coachingNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Coaching Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:r.coachingNotes})]}),r.personalNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-iron-500 uppercase tracking-wider mb-1",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:r.personalNotes})]})]})})})]}),r.generationPrompt&&e.jsxs("div",{className:"card-steel mb-3 overflow-hidden",children:[e.jsxs("button",{onClick:()=>Vs(!Re),className:"w-full flex items-center justify-between p-4 hover:bg-iron-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-sm font-medium text-iron-200",children:"Generation Prompt"})]}),Re?e.jsx(he,{className:"w-4 h-4 text-iron-500"}):e.jsx(ue,{className:"w-4 h-4 text-iron-500"})]}),e.jsx(fe,{children:Re&&e.jsx(V.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"px-4 pb-4",children:e.jsx("pre",{className:"text-xs text-iron-400 leading-relaxed whitespace-pre-wrap font-mono max-h-96 overflow-y-auto",children:r.generationPrompt})})})})]}),!M&&r.workoutCategory==="wod"&&r.notes&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(be,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-400",children:"WOD Format"})]}),e.jsx("p",{className:"text-iron-200 leading-relaxed whitespace-pre-line",children:r.notes})]}),!M&&r.wodResult&&e.jsxs("div",{className:"mb-4 p-5 bg-gradient-to-br from-flame-500/10 to-yellow-500/5 border border-flame-500/20 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-iron-400 uppercase tracking-wider mb-2",children:"Your Result"}),r.wodResult.format==="amrap"?e.jsx("div",{children:e.jsxs("p",{className:"text-4xl font-display text-flame-400",children:[r.wodResult.rounds||0,e.jsx("span",{className:"text-lg text-iron-400 ml-1",children:"rounds"}),r.wodResult.extraReps>0&&e.jsxs("span",{className:"text-2xl text-iron-300 ml-2",children:["+ ",r.wodResult.extraReps," ",e.jsx("span",{className:"text-lg text-iron-400",children:"reps"})]})]})}):r.wodResult.format==="fortime"?e.jsx("div",{children:r.wodResult.dnf?e.jsx("p",{className:"text-2xl font-display text-red-400",children:"DNF"}):e.jsx("p",{className:"text-4xl font-display text-flame-400",children:r.wodResult.completionTime||"—"})}):null]}),M?e.jsxs("div",{className:"card-steel p-4 mb-3",children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Notes"}),e.jsx("textarea",{value:Me,onChange:s=>Fe(s.target.value),rows:2,className:"w-full input-field text-sm resize-none",placeholder:"Workout notes..."})]}):r.notes&&r.workoutCategory!=="wod"&&e.jsx("div",{className:"card-steel p-4 mb-3",children:e.jsx("p",{className:"text-iron-300",children:r.notes})}),r.userNotes&&e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-1.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed",children:r.userNotes})]}),A&&e.jsxs("div",{className:"card-steel p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-iron-800/50 rounded-xl p-4 text-center",children:[e.jsx(Oe,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-iron-100",children:((ks=Ft[r.activityType])==null?void 0:ks.label)||r.activityType||"Activity"}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Activity"})]}),r.estimatedCalories>0&&e.jsxs("div",{className:"bg-flame-500/10 rounded-xl p-4 text-center",children:[e.jsx(Ct,{className:"w-8 h-8 text-flame-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-semibold text-flame-400",children:r.estimatedCalories}),e.jsx("p",{className:"text-xs text-iron-500 mt-1",children:"Calories"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[r.duration&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(Dt,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[r.duration," min"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Duration"})]})]}),r.distance&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsx(Gt,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold text-iron-100",children:[r.distance," mi"]}),e.jsx("p",{className:"text-xs text-iron-500",children:"Distance"})]})]})]})]}),!M&&y&&!A&&((Ws=r.exercises)==null?void 0:Ws.length)>0&&e.jsxs("div",{className:"card-steel p-4 mb-6 bg-yellow-500/5 border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(St,{className:"w-5 h-5 text-yellow-400"}),e.jsx("h3",{className:"font-semibold text-iron-100",children:"Today's Targets"})]}),e.jsx("div",{className:"space-y-2",children:r.exercises.map((s,l)=>{var n,o,d;const t=(n=s.sets)==null?void 0:n[0],a=(o=s.sets)==null?void 0:o.every(x=>x.prescribedWeight===(t==null?void 0:t.prescribedWeight)&&x.prescribedReps===(t==null?void 0:t.prescribedReps));return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-iron-800/50 last:border-0",children:[e.jsx("span",{className:"font-medium text-iron-200",children:s.name}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[(d=s.sets)==null?void 0:d.length,"×"," ",s.type==="time"||t!=null&&t.prescribedTime?`${(t==null?void 0:t.prescribedTime)||"—"}s`:s.type==="bodyweight"?`${t!=null&&t.prescribedWeight?`BW+${t.prescribedWeight} ×`:""} ${(t==null?void 0:t.prescribedReps)||"—"} reps`:a?`${(t==null?void 0:t.prescribedWeight)||"—"}lbs × ${(t==null?void 0:t.prescribedReps)||"—"}`:"varied"]})]},l)})})]}),M&&!A&&I.length>0&&e.jsx("div",{className:"space-y-4",children:I.map((s,l)=>{var n;const t=P(s),a=Ds(t);return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-iron-800/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:o=>ps(l,"name",o.target.value),className:"input-field flex-1 text-lg font-bold"}),a&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${a.color}`,children:a.label}),I.length>1&&e.jsx("button",{onClick:()=>rt(l),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(n=s.sets)==null?void 0:n.map((o,d)=>e.jsxs("div",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold text-iron-400",children:d+1})}),t==="time"?e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:o.prescribedTime||"",onChange:x=>ee(l,d,"prescribedTime",x.target.value),placeholder:"seconds",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"seconds"})]}):t==="bodyweight"?e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:o.prescribedReps||"",onChange:x=>ee(l,d,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:o.prescribedWeight||"",onChange:x=>ee(l,d,"prescribedWeight",x.target.value),placeholder:"+ lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"added lbs"})]})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:o.prescribedWeight||"",onChange:x=>ee(l,d,"prescribedWeight",x.target.value),placeholder:"lbs",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"lbs"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:o.prescribedReps||"",onChange:x=>ee(l,d,"prescribedReps",x.target.value),placeholder:"reps",className:"input-field w-full text-center"}),e.jsx("p",{className:"text-[10px] text-iron-600 text-center mt-1",children:"reps"})]})]}),s.sets.length>1&&e.jsx("button",{onClick:()=>at(l,d),className:"p-1.5 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(Y,{className:"w-4 h-4"})})]},d))}),e.jsx("div",{className:"px-4 py-2",children:e.jsxs("button",{onClick:()=>tt(l),className:"w-full py-2 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Add Set"]})}),s.notes&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("input",{type:"text",value:s.notes,onChange:o=>ps(l,"notes",o.target.value),className:"input-field w-full text-sm",placeholder:"Exercise notes"})})]},l)})}),!M&&!A&&!y&&((Cs=r.exercises)==null?void 0:Cs.length)>0&&e.jsx(Pt,{exercises:r.exercises,isCompleted:!0}),!M&&!A&&((Ss=r.exercises)==null?void 0:Ss.length)>0&&e.jsx("div",{className:"space-y-4",children:Ms(r.exercises).map((s,l)=>{var d,x,u,N,i,b,S,w;if(s.type==="superset"){const{exerciseA:c,exerciseB:T}=s,F=(p,m)=>{var R;const h=p.type==="time"||((R=p.sets)==null?void 0:R.some(B=>B.prescribedTime||B.actualTime)),g=p.type==="bodyweight",E=h?!!m.actualTime:g?!!m.actualReps:!!(m.actualWeight||m.actualReps);if(h)return y?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedTime||"—","s"]}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualTime||"—","s ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedTime||"—","s"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"});if(g){const B=`${m.prescribedWeight?`BW+${m.prescribedWeight}`:"BW"} × ${m.prescribedReps||"—"}`;return y?e.jsx("span",{className:"text-base font-bold text-iron-100",children:B}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight?`BW+${m.actualWeight}`:"BW"," × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",B]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})}return y?e.jsxs("span",{className:"text-base font-bold text-iron-100",children:[m.prescribedWeight||"—"," lbs × ",m.prescribedReps||"—"]}):E?e.jsxs("span",{className:"text-base font-bold text-flame-400",children:[m.actualWeight||"—"," lbs × ",m.actualReps||"—"," ",e.jsxs("span",{className:"text-xs text-iron-500 font-normal",children:["target ",m.prescribedWeight||"—"," × ",m.prescribedReps||"—"]})]}):e.jsx("span",{className:"text-sm text-iron-600",children:"Not logged"})};return e.jsxs("div",{className:"card-steel overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(be,{className:"w-3 h-3"})," Superset"]}),e.jsxs("h3",{className:"text-lg font-bold text-iron-50 flex-1",children:[c.name," ",e.jsx("span",{className:"text-iron-600",children:"/"})," ",T.name]})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((d=c.sets)==null?void 0:d.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(x=c.sets)==null?void 0:x.map((p,m)=>{var g;const h=(g=T.sets)==null?void 0:g[m];return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:m+1})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["A — ",c.name]}),F(c,p)]}),h&&e.jsxs("div",{className:"pt-1.5 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-0.5",children:["B — ",T.name]}),F(T,h)]})]})]})},m)})}),(c.notes||T.notes)&&e.jsxs("div",{className:"px-4 pb-2",children:[c.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3 mb-2",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"A:"})," ",c.notes]})]}),T.notes&&e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-iron-400",children:[e.jsx("span",{className:"text-purple-400 font-medium",children:"B:"})," ",T.notes]})]})]})]},`ss-${s.supersetGroup}`)}const t=s.exercise,a=s.index,n=t.type==="time"||((u=t.sets)==null?void 0:u.some(c=>c.prescribedTime||c.actualTime)),o=t.type==="bodyweight";return e.jsxs("div",{className:"card-steel overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-iron-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{X(t),Q(a)},className:"text-xl font-bold text-iron-50 hover:text-flame-400 transition-colors text-left flex-1 flex items-center gap-1.5",children:[t.name,e.jsx(Fs,{className:"w-3.5 h-3.5 text-iron-600 flex-shrink-0"})]}),n&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-500/20 text-blue-400 rounded",children:"Time"}),y&&!C&&e.jsx("button",{onClick:()=>J(a),disabled:Xe!==null,title:"Swap for similar exercise",className:"p-1.5 text-iron-500 hover:text-flame-400 hover:bg-flame-500/10 rounded-lg transition-colors disabled:opacity-30",children:Xe===a?e.jsx(Ge,{className:"w-4 h-4 animate-spin text-flame-400"}):e.jsx(Tt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-iron-500 mt-1",children:[((N=t.sets)==null?void 0:N.length)||0," sets"]})]}),e.jsx("div",{className:"divide-y divide-iron-800/50",children:(i=t.sets)==null?void 0:i.map((c,T)=>{const F=n?c.actualTime:o?!!c.actualReps:c.actualWeight||c.actualReps,p=!n&&!o&&F&&c.actualWeight&&c.actualReps&&parseInt(c.actualReps)>1?Ot(parseFloat(c.actualWeight),parseInt(c.actualReps)):null;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-iron-400",children:T+1})}),e.jsx("div",{className:"flex-1",children:n?y?e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[c.prescribedTime||"—"," seconds"]}),c.setNote&&e.jsx("p",{className:"text-sm text-iron-400 mt-0.5",children:c.setNote})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",c.prescribedTime||"—","s",c.setNote?` — ${c.setNote}`:""]}),F?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[c.actualTime||"—"," seconds"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):o?y?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[c.prescribedWeight?`BW + ${c.prescribedWeight} lbs`:"BW"," ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",c.prescribedReps||"—"," reps",c.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",c.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",c.prescribedWeight?`BW+${c.prescribedWeight}`:"BW"," × ",c.prescribedReps||"—"]}),F?e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[c.actualWeight?`BW + ${c.actualWeight} lbs`:"BW"," × ",c.actualReps||"—"]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]}):y?e.jsxs("div",{className:"text-2xl font-bold text-iron-100",children:[c.prescribedWeight||"—"," lbs ",e.jsx("span",{className:"text-iron-500",children:"×"})," ",c.prescribedReps||"—"," reps",c.targetRpe&&e.jsxs("span",{className:"text-sm text-iron-500 font-normal ml-2",children:["@ RPE ",c.targetRpe]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-iron-500 mb-1",children:["Target: ",c.prescribedWeight||"—"," × ",c.prescribedReps||"—"]}),F?e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-2xl font-bold text-flame-400",children:[c.actualWeight||"—"," lbs × ",c.actualReps||"—"]}),p&&e.jsxs("span",{className:"text-sm text-iron-500 bg-iron-800 px-2 py-1 rounded-lg",children:["e1RM: ",p," lbs"]})]}):e.jsx("span",{className:"text-lg text-iron-600",children:"Not logged"})]})})]})},T)})}),!y&&(t.rpe||t.painLevel>0||((b=t.sets)==null?void 0:b.some(c=>c.rpe||c.painLevel>0)))&&e.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[(t.rpe||((S=t.sets)==null?void 0:S.some(c=>c.rpe)))&&e.jsxs("span",{className:`text-sm font-semibold ${ct(t.rpe||Math.max(...(t.sets||[]).map(c=>parseFloat(c.rpe)||0)))}`,children:["RPE ",t.rpe||Math.max(...(t.sets||[]).map(c=>parseFloat(c.rpe)||0))]}),(t.painLevel>0||((w=t.sets)==null?void 0:w.some(c=>c.painLevel>0)))&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ot(t.painLevel||Math.max(...(t.sets||[]).map(c=>c.painLevel||0)))}`,children:["Pain ",t.painLevel||Math.max(...(t.sets||[]).map(c=>c.painLevel||0))]})]}),t.notes&&e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex items-start gap-2 bg-iron-800/30 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-iron-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.notes})]})}),t.userNotes&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 bg-flame-500/5 border border-flame-500/10 rounded-lg p-3",children:[e.jsx(_,{className:"w-4 h-4 text-flame-400/60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-iron-500 mb-0.5",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-iron-400",children:t.userNotes})]})]})}),!t.notes&&!t.userNotes&&null]},a)})}),!A&&(!r.exercises||r.exercises.length===0)&&e.jsxs("div",{className:"card-steel p-8 text-center",children:[e.jsx(_e,{className:"w-12 h-12 text-iron-700 mx-auto mb-3"}),e.jsx("p",{className:"text-iron-500",children:"No exercises in this workout"})]}),!A&&!M&&e.jsxs("div",{className:`fixed bottom-0 right-0 p-4 bg-iron-950/95 backdrop-blur-sm border-t border-iron-800 left-0 ${He?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:[e.jsx("button",{onClick:()=>ae(!0),className:`w-full py-4 text-lg flex items-center justify-center gap-2 rounded-xl font-semibold ${y?"bg-flame-500 hover:bg-flame-600 text-white":"bg-iron-800 hover:bg-iron-700 text-iron-200"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-6 h-6"}),dt?"Continue Workout":"Log Workout"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-5 h-5"}),"Edit Logged Data"]})}),!y&&!C&&e.jsx("button",{onClick:nt,className:"w-full mt-2 py-2 text-xs text-iron-500 hover:text-iron-300 transition-colors",children:"Mark as incomplete"})]}),e.jsx(As,{exercise:ie,isOpen:!!ie,onClose:()=>{X(null),Q(null)},onSubstitute:!C&&ne!==null?s=>us(ne,s):void 0}),e.jsx(fe,{children:ke!==null&&e.jsxs(e.Fragment,{children:[e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{J(null),K("")},className:"fixed inset-0 bg-black/60 z-50"}),e.jsxs(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-x-4 top-[30%] mx-auto max-w-sm bg-iron-900 border border-iron-700 rounded-2xl z-50 p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-iron-200",children:"Swap Exercise"}),e.jsx("p",{className:"text-xs text-iron-500",children:`Optionally note why you're swapping (e.g. "shoulder pain", "no cable machine")`}),e.jsx("input",{type:"text",value:We,onChange:s=>K(s.target.value),placeholder:"Reason (optional)",className:"input-field w-full text-sm",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&(hs(ke,We),J(null),K(""))}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{J(null),K("")},className:"flex-1 py-2.5 text-sm text-iron-400 hover:text-iron-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{hs(ke,We),J(null),K("")},className:"flex-1 py-2.5 text-sm bg-flame-500/15 text-flame-400 border border-flame-500/30 rounded-xl hover:bg-flame-500/25 transition-colors",children:"Swap"})]})]})]})}),e.jsx(fe,{children:Ys&&e.jsxs(e.Fragment,{children:[e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>oe(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(V.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-[15%] mx-auto max-w-md bg-iron-900 border border-iron-700 rounded-2xl z-50 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-iron-800",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Share Workout"}),e.jsx("button",{onClick:()=>oe(!1),className:"p-1.5 text-iron-400 hover:text-iron-200 rounded-lg",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 space-y-4",children:Ks?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(pe,{className:"w-7 h-7 text-green-400"})}),e.jsx("p",{className:"text-iron-200 font-medium",children:"Workout Shared!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-iron-800/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-iron-300 font-medium",children:(r==null?void 0:r.name)||"Workout"}),e.jsxs("p",{className:"text-xs text-iron-500 mt-0.5",children:[((Ts=r==null?void 0:r.exercises)==null?void 0:Ts.length)||0," exercises"]})]}),Se.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-iron-500",children:"No friends yet. Add friends to share workouts."}),e.jsx($s,{to:"/friends",className:"text-sm text-flame-400 hover:underline mt-1 inline-block",children:"Find Friends"})]}):e.jsxs(e.Fragment,{children:[Se.length>5&&e.jsxs("div",{className:"relative",children:[e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:Ee,onChange:s=>Js(s.target.value),className:"input-field pl-9 py-2 text-sm w-full"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:Se.filter(s=>{var t;if(!Ee)return!0;const l=Te[s];return(t=l==null?void 0:l.displayName)==null?void 0:t.toLowerCase().includes(Ee.toLowerCase())}).map(s=>{const l=Te[s];return e.jsxs("button",{onClick:()=>es(s),className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-colors ${z===s?"bg-flame-500/15 border border-flame-500/30":"hover:bg-iron-800"}`,children:[l!=null&&l.photoURL?e.jsx("img",{src:l.photoURL,alt:"",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-iron-700 flex items-center justify-center text-xs font-medium text-iron-400",children:((l==null?void 0:l.displayName)||"?")[0]}),e.jsx("span",{className:"text-sm text-iron-200 flex-1 text-left truncate",children:(l==null?void 0:l.displayName)||"User"}),z===s&&e.jsx(pe,{className:"w-4 h-4 text-flame-400"})]},s)})}),e.jsx("textarea",{placeholder:"Add a message (optional)",value:ss,onChange:s=>ts(s.target.value),rows:2,className:"input-field w-full resize-none text-sm"}),e.jsxs("button",{onClick:Qs,disabled:!z||de,className:"btn-primary w-full py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:[de?e.jsx(Ge,{className:"w-4 h-4 animate-spin"}):e.jsx($t,{className:"w-4 h-4"}),de?"Sharing...":"Share Workout"]})]})]})})]})]})})]})}export{ta as default};
