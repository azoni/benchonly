import{G as Me,b as Te,d as We,r as f,aq as Ge,j as e,A as Ve,n as Ce,M as Ke,aM as Je,i as oe,X as ae,aZ as Se,a3 as le,aL as Qe,$ as _e,P as H,U as et,V as tt,W as st,a2 as at,Y as lt,ap as rt,a as it,e as nt,I as ot,Z as Ne,t as ct,aI as dt,o as pe,p as mt,m as te,l as $e,aD as se,an as xt,ax as Fe}from"./index-BdPqgTIW.js";import{g as pt,A as ut,c as ht,a as ft}from"./calorieService-6-LCVeV1.js";import{C as Ue}from"./clock-4NhXtrwk.js";import{S as Re}from"./save-DY5gpUvB.js";import{W as fe,F as Be,a as Oe,A as bt}from"./wodLibrary-BricFkkX.js";import{C as gt}from"./chevron-left-BvJExSxF.js";import{T as ye}from"./trophy-DAHMuui3.js";import{S as jt}from"./search-Dq056VB6.js";import{I as we}from"./info-3YvsxJ9T.js";import{T as ue}from"./trash-2-WQaPhAcm.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Me("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=Me("Repeat2",[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]]),wt=[{id:"sunday",short:"Sun",full:"Sunday"},{id:"monday",short:"Mon",full:"Monday"},{id:"tuesday",short:"Tue",full:"Tuesday"},{id:"wednesday",short:"Wed",full:"Wednesday"},{id:"thursday",short:"Thu",full:"Thursday"},{id:"friday",short:"Fri",full:"Friday"},{id:"saturday",short:"Sat",full:"Saturday"}];function kt({onBack:j}){const D=Te(),{user:w,userProfile:h}=We(),[k,A]=f.useState(!1),[V,F]=f.useState(!1),[B,K]=f.useState(!1),[i,O]=f.useState({date:Ge(),activityType:"",duration:"",distance:"",notes:"",recurring:!1,recurringDays:[]}),$=pt(),C=ut[i.activityType],E=i.activityType&&i.duration?ht(i.activityType,parseInt(i.duration),h==null?void 0:h.weight):0,T=u=>{O(v=>({...v,recurringDays:v.recurringDays.includes(u)?v.recurringDays.filter(y=>y!==u):[...v.recurringDays,u]}))},Q=async()=>{if(!i.activityType){alert("Please select an activity");return}if(!i.duration){alert("Please enter duration");return}A(!0);try{const u={workoutType:"cardio",name:(C==null?void 0:C.label)||"Cardio",date:Se(i.date),activityType:i.activityType,duration:parseInt(i.duration),distance:i.distance?parseFloat(i.distance):null,estimatedCalories:E,notes:i.notes};await le.create(w.uid,u),i.recurring&&i.recurringDays.length>0&&await Qe.create(w.uid,{type:"recurring",name:(C==null?void 0:C.label)||"Cardio",days:i.recurringDays,activityType:i.activityType,duration:parseInt(i.duration),distance:i.distance?parseFloat(i.distance):null,workoutType:"cardio"}),D("/workouts")}catch(u){console.error("Error saving cardio:",u),alert("Failed to save activity")}finally{A(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:j,className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-lg transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl text-iron-50",children:"Log Cardio"}),e.jsx("p",{className:"text-iron-400 text-sm",children:"Track your cardio activity"})]})]}),e.jsx("div",{className:"card-steel p-5 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:i.date,onChange:u=>O(v=>({...v,date:u.target.value})),className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Activity Type"}),e.jsxs("button",{onClick:()=>F(!0),className:"input-field w-full text-left flex items-center justify-between",children:[e.jsx("span",{className:C?"text-iron-100":"text-iron-500",children:(C==null?void 0:C.label)||"Select..."}),e.jsx(Ce,{className:"w-4 h-4 text-iron-500"})]})]})]})}),e.jsxs("div",{className:"card-steel p-5 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 inline mr-1"}),"Duration (minutes)"]}),e.jsx("input",{type:"number",value:i.duration,onChange:u=>O(v=>({...v,duration:u.target.value})),placeholder:"30",className:"input-field w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Distance (optional)"}),e.jsx("input",{type:"number",step:"0.1",value:i.distance,onChange:u=>O(v=>({...v,distance:u.target.value})),placeholder:"3.5 mi",className:"input-field w-full"})]})]}),E>0&&e.jsxs("div",{className:"mt-4 p-3 bg-flame-500/10 rounded-lg flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-flame-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-iron-300",children:"Estimated calories burned"}),e.jsxs("p",{className:"text-xl font-display text-flame-400",children:[E," cal"]})]})]})]}),e.jsxs("div",{className:"card-steel p-5 mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:i.notes,onChange:u=>O(v=>({...v,notes:u.target.value})),placeholder:"How did it feel? Any details...",rows:2,className:"input-field w-full resize-none"})]}),e.jsxs("div",{className:"card-steel p-5 mb-6",children:[e.jsxs("button",{onClick:()=>K(!B),className:"w-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-iron-200",children:"Make this recurring"}),e.jsx("p",{className:"text-sm text-iron-500",children:"Auto-schedule weekly"})]})]}),e.jsx("div",{className:`w-12 h-7 rounded-full transition-colors ${i.recurring?"bg-flame-500":"bg-iron-700"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full mt-1 transition-transform ${i.recurring?"translate-x-6":"translate-x-1"}`})})]}),B&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-iron-800",children:[e.jsx("p",{className:"text-sm text-iron-400 mb-3",children:"Repeat on these days:"}),e.jsx("div",{className:"flex gap-2",children:wt.map(u=>e.jsx("button",{onClick:()=>{T(u.id),O(v=>({...v,recurring:!0}))},className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${i.recurringDays.includes(u.id)?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:bg-iron-700"}`,children:u.short},u.id))}),i.recurringDays.length>0&&e.jsx("p",{className:"text-xs text-iron-500 mt-2",children:"This will create a recurring schedule. You can skip individual days or mark them complete."})]})]}),e.jsx("button",{onClick:Q,disabled:k||!i.activityType||!i.duration,className:"btn-primary w-full flex items-center justify-center gap-2 py-3",children:k?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5"}),"Save Activity"]})}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"bg-iron-900 w-full sm:w-[480px] max-h-[80vh] rounded-t-2xl sm:rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-iron-800 flex items-center justify-between sticky top-0 bg-iron-900",children:[e.jsx("h3",{className:"font-display text-lg text-iron-100",children:"Select Activity"}),e.jsx("button",{onClick:()=>F(!1),className:"p-2 text-iron-400 hover:text-iron-200",children:e.jsx(ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] p-4",children:ft.map(u=>{const v=$[u.id]||[];return v.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-iron-400 mb-2",children:u.label}),e.jsx("div",{className:"space-y-1",children:v.map(y=>e.jsxs("button",{onClick:()=>{O(P=>({...P,activityType:y.id})),F(!1)},className:`w-full p-3 rounded-lg text-left transition-colors flex items-center justify-between ${i.activityType===y.id?"bg-flame-500/20 border border-flame-500":"bg-iron-800 hover:bg-iron-700"}`,children:[e.jsx("span",{className:"text-iron-200",children:y.label}),e.jsxs("span",{className:"text-xs text-iron-500",children:[y.met," MET"]})]},y.id))})]},u.id)})})]})})]})}const Ct=["rxMen","rxWomen","scaledMen","scaledWomen"];function he(j,D){if(!j)return null;if(D==="amrap"){const w=[];return j.rounds!=null&&w.push(`${j.rounds} rds`),j.extraReps&&w.push(`+${j.extraReps}`),w.join(" ")||null}return j.time||null}function Ie(j,D){if(!j)return null;if(D==="amrap")return(j.rounds||0)*1e3+(j.extraReps||0);if(j.dnf)return 1/0;const h=(j.time||"").split(":").map(Number);return h.length===2?h[0]*60+h[1]:h.length===3?h[0]*3600+h[1]*60+h[2]:1/0}async function St(j){const D=await tt(st(lt(_e,"users"),at(200))),w=[];return D.forEach(h=>{var V,F;const k=h.data(),A=(V=k.wodStats)==null?void 0:V[j];A!=null&&A.pr&&w.push({uid:h.id,displayName:k.displayName||k.username||"Member",photoURL:k.photoURL||null,pr:A.pr,attempts:((F=A.history)==null?void 0:F.length)||1})}),w}function Rt({isOpen:j,onClose:D,onSelect:w,userWodStats:h={}}){var de;const k=Te(),{user:A}=We(),[V,F]=f.useState(""),[B,K]=f.useState(null),[i,O]=f.useState(null),[$,C]=f.useState("rxMen"),[E,T]=f.useState([]),[Q,u]=f.useState(!1),[v,y]=f.useState(null),[P,ce]=f.useState(!1),[Y,_]=f.useState(null),re=f.useMemo(()=>{let n=fe;if(V.trim()){const x=V.trim().toLowerCase();n=n.filter(b=>b.name.toLowerCase().includes(x)||b.description.toLowerCase().includes(x))}return B&&(n=n.filter(x=>x.focus.includes(B))),n},[V,B]);f.useEffect(()=>{if(!i||!_e){T([]);return}u(!0),T([]),St(i.id).then(n=>{const x=i.format,b=n.sort((N,U)=>{const m=Ie(N.pr,x),W=Ie(U.pr,x);return m==null&&W==null?0:m==null?1:W==null?-1:x==="amrap"?W-m:m-W});T(b)}).catch(n=>{console.warn("[WodLibraryModal] Community stats fetch failed:",n.message),T([])}).finally(()=>u(!1))},[i]);function X(n){O(n),C("rxMen"),y(null),_(null)}function ie(){i&&w(i,$)}async function z(){if(!(!i||!A)){ce(!0);try{const n=i.variants[$],x=i.format==="amrap"?"AMRAP":i.format==="fortime"?"For Time":"EMOM",b=i.timeCap?` ${i.timeCap} min`:"",N=`${x}${b}
${n.movements.map(W=>`${W.reps?W.reps+" ":""}${W.name}`).join(`
`)}`,U=n.movements.map((W,J)=>({id:Date.now()+J,name:W.name,type:"bodyweight",sets:[{id:Date.now()+J+1e3,prescribedReps:W.reps||"",prescribedWeight:""}]})),m=await le.create(A.uid,{name:i.name,date:new Date,notes:N,exercises:U,workoutCategory:"wod",benchmarkWodId:i.id,benchmarkVariant:$});_(m.id)}catch(n){console.error("[WodLibraryModal] Add to workouts failed:",n)}finally{ce(!1)}}}function G(){F(""),K(null),O(null),T([]),y(null),_(null),D()}if(!j)return null;const I=i?h[i.id]:null;return e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-iron-950",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-safe-top pt-4 pb-3 border-b border-iron-800",children:[i?e.jsx("button",{onClick:()=>O(null),className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(gt,{className:"w-5 h-5"})}):e.jsx("button",{onClick:G,className:"p-2 -ml-2 text-iron-400 hover:text-iron-200 transition-colors",children:e.jsx(ae,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-base font-bold text-iron-50",children:i?i.name:"WOD Library"}),!i&&e.jsxs("p",{className:"text-xs text-iron-500",children:[fe.length," benchmark WODs"]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2",children:[Y?e.jsx("button",{onClick:()=>{G(),k(`/workouts/${Y}`)},className:"px-3 py-2 text-xs font-medium bg-green-500/20 text-green-400 border border-green-500/30 rounded-lg",children:"Added â€” View"}):e.jsxs("button",{onClick:z,disabled:P||!A,className:"px-3 py-2 text-xs font-medium bg-iron-700 text-iron-200 border border-iron-600 rounded-lg hover:bg-iron-600 disabled:opacity-50 transition-colors flex items-center gap-1.5",children:[P?e.jsx(oe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(H,{className:"w-3.5 h-3.5"}),"Add"]}),e.jsx("button",{onClick:ie,className:"btn-primary px-4 py-2 text-sm",children:"Use This WOD"})]})]}),i?e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"px-4 py-5 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${Oe[i.format]}`,children:[Be[i.format],i.timeCap&&` Â· ${i.timeCap} min`]}),i.focus.map(n=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-iron-800 text-iron-400 capitalize",children:n},n))]}),e.jsx("p",{className:"text-sm text-iron-300 leading-relaxed mb-5",children:i.description}),e.jsxs("div",{className:"card-steel p-4 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ue,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-xs font-semibold text-iron-400 uppercase tracking-wide",children:i.format==="amrap"?"Score Benchmarks":"Time Benchmarks"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Elite",value:i.targetTime.elite,color:"text-flame-400"},{label:"Intermediate",value:i.targetTime.intermediate,color:"text-yellow-400"},{label:"Beginner",value:i.targetTime.beginner,color:"text-iron-300"}].map(n=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-sm font-bold ${n.color}`,children:n.value}),e.jsx("p",{className:"text-[10px] text-iron-600 mt-0.5",children:n.label})]},n.label))})]}),I&&e.jsxs("div",{className:"card-steel p-4 mb-5 bg-flame-500/5 border-flame-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ye,{className:"w-4 h-4 text-flame-400"}),e.jsx("span",{className:"text-xs font-semibold text-flame-400 uppercase tracking-wide",children:"Your Stats"})]}),I.pr&&e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-iron-300",children:"Personal Record"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-flame-400",children:he(I.pr,i.format)}),I.pr.variant&&e.jsx("span",{className:"block text-[10px] text-iron-600",children:I.pr.variant})]})]}),((de=I.history)==null?void 0:de.length)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(vt,{className:"w-3.5 h-3.5 text-iron-500"}),e.jsx("span",{className:"text-[10px] text-iron-500 uppercase tracking-wide",children:"History"})]}),e.jsx("div",{className:"space-y-1.5",children:I.history.slice(0,5).map((n,x)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-iron-500",children:n.date}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${n.rxOrScaled==="rx"?"bg-flame-500/20 text-flame-400":"bg-iron-800 text-iron-400"}`,children:n.rxOrScaled==="rx"?"Rx":"Scaled"}),e.jsx("span",{className:"text-iron-300 font-medium",children:he(n,i.format)})]})]},x))})]})]}),e.jsxs("div",{className:"card-steel p-4 mb-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-iron-500"}),e.jsx("span",{className:"text-xs font-semibold text-iron-400 uppercase tracking-wide",children:"Community Results"})]}),E.length>0&&e.jsxs("span",{className:"text-[10px] text-iron-600",children:[E.length," logged"]})]}),E.length>0&&(()=>{const x=[{key:null,label:"All"},{key:"rxMen",label:"Rx â™‚"},{key:"rxWomen",label:"Rx â™€"},{key:"scaledMen",label:"Sc â™‚"},{key:"scaledWomen",label:"Sc â™€"}].filter(b=>b.key===null||E.some(N=>{var U;return((U=N.pr)==null?void 0:U.variant)===b.key}));return x.length<=2?null:e.jsx("div",{className:"flex gap-1.5 mb-3 flex-wrap",children:x.map(b=>e.jsx("button",{onClick:()=>y(b.key),className:`px-2 py-0.5 rounded text-[11px] font-medium transition-colors ${v===b.key?"bg-iron-600 text-iron-100":"bg-iron-800 text-iron-500 hover:text-iron-300"}`,children:b.label},b.key||"all"))})})(),Q?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"w-5 h-5 border-2 border-iron-700 border-t-iron-400 rounded-full animate-spin"})}):E.length===0?e.jsxs("div",{className:"py-5 text-center",children:[e.jsx(ye,{className:"w-8 h-8 text-iron-800 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-iron-500",children:"No results yet"}),e.jsxs("p",{className:"text-xs text-iron-700 mt-1",children:["Be the first to log ",i.name,"!"]})]}):(()=>{const n=v?E.filter(x=>{var b;return((b=x.pr)==null?void 0:b.variant)===v}):E;return n.length===0?e.jsx("p",{className:"text-xs text-iron-600 text-center py-3",children:"No results for this variant yet"}):e.jsx("div",{className:"space-y-2",children:n.map((x,b)=>{var me,xe,M,L,Z;const N=he(x.pr,i.format),U=(me=x.pr)==null?void 0:me.variant,m=U?{rxMen:"Rx â™‚",rxWomen:"Rx â™€",scaledMen:"Sc â™‚",scaledWomen:"Sc â™€"}[U]||(((xe=x.pr)==null?void 0:xe.rxOrScaled)==="rx"?"Rx":"Sc"):((M=x.pr)==null?void 0:M.rxOrScaled)==="rx"?"Rx":"Sc",W=((L=x.pr)==null?void 0:L.rxOrScaled)==="rx",J=b===0?"ðŸ¥‡":b===1?"ðŸ¥ˆ":b===2?"ðŸ¥‰":null;return e.jsxs("div",{className:`flex items-center gap-3 py-1.5 ${b<n.length-1?"border-b border-iron-800/50":""}`,children:[e.jsx("div",{className:"w-6 text-center flex-shrink-0",children:J?e.jsx("span",{className:"text-sm",children:J}):e.jsx("span",{className:"text-xs text-iron-600 font-medium",children:b+1})}),x.photoURL?e.jsx("img",{src:x.photoURL,alt:"",className:"w-7 h-7 rounded-full flex-shrink-0"}):e.jsx("div",{className:"w-7 h-7 rounded-full bg-iron-800 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs text-iron-400 font-medium",children:((Z=x.displayName)==null?void 0:Z[0])||"?"})}),e.jsx("span",{className:"text-sm text-iron-200 font-medium flex-1 truncate",children:x.displayName}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${W?"bg-flame-500/20 text-flame-400":"bg-iron-800 text-iron-500"}`,children:m}),e.jsx("span",{className:`text-sm font-bold ${b===0?"text-yellow-400":"text-iron-200"}`,children:N||"â€”"})]})]},x.uid)})})})()]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-iron-400 uppercase tracking-wide mb-2",children:"Select Variant"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ct.filter(n=>i.variants[n]).map(n=>e.jsx("button",{onClick:()=>C(n),className:`px-3 py-2 rounded-lg border text-left transition-colors ${$===n?"border-flame-500 bg-flame-500/10 text-flame-400":"border-iron-700 text-iron-400 hover:border-iron-600"}`,children:e.jsx("span",{className:"text-xs font-medium",children:i.variants[n].label})},n))})]}),i.variants[$]&&e.jsxs("div",{className:"card-steel p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yt,{className:"w-4 h-4 text-iron-500"}),e.jsxs("span",{className:"text-xs font-semibold text-iron-400 uppercase tracking-wide",children:[i.variants[$].label," â€” Movements"]})]}),e.jsx("div",{className:"space-y-2",children:i.variants[$].movements.map((n,x)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-iron-200 font-medium",children:n.name}),e.jsxs("div",{className:"flex items-center gap-2 text-right",children:[n.weight&&e.jsx("span",{className:"text-xs text-iron-500",children:n.weight}),e.jsx("span",{className:"text-sm font-bold text-iron-100",children:n.reps})]})]},x))})]}),e.jsxs("div",{className:"flex gap-3",children:[Y?e.jsx("button",{onClick:()=>{G(),k(`/workouts/${Y}`)},className:"flex-1 py-3 rounded-xl bg-green-500/20 text-green-400 border border-green-500/30 font-medium text-sm",children:"Added â€” View Workout"}):e.jsxs("button",{onClick:z,disabled:P||!A,className:"flex-1 py-3 rounded-xl bg-iron-800 text-iron-200 border border-iron-700 font-medium text-sm hover:bg-iron-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:[P?e.jsx(oe,{className:"w-4 h-4 animate-spin"}):e.jsx(H,{className:"w-4 h-4"}),"Add to My Workouts"]}),e.jsx("button",{onClick:ie,className:"btn-primary flex-1 py-3",children:"Use This WOD"})]})]})}):e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-iron-800/50 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-iron-500"}),e.jsx("input",{type:"text",value:V,onChange:n=>F(n.target.value),placeholder:"Search WODs...",className:"input-field pl-9 w-full"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[e.jsx("button",{onClick:()=>K(null),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors flex-shrink-0 ${B?"bg-iron-800/50 text-iron-400 hover:bg-iron-800":"bg-iron-700 text-iron-100"}`,children:"All"}),bt.map(n=>e.jsx("button",{onClick:()=>K(B===n?null:n),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors flex-shrink-0 capitalize ${B===n?"bg-flame-500 text-white":"bg-iron-800/50 text-iron-400 hover:bg-iron-800"}`,children:n},n))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:re.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-iron-500 text-sm",children:"No WODs match your search"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:re.map(n=>{const x=h[n.id],b=x!=null&&x.pr?he(x.pr,n.format):null;return e.jsxs("button",{onClick:()=>X(n),className:"card-steel p-4 text-left hover:border-iron-600 transition-all hover:bg-iron-800/60 active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-iron-100",children:n.name}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-semibold flex-shrink-0 ${Oe[n.format]}`,children:[Be[n.format],n.timeCap&&` ${n.timeCap}m`]})]}),e.jsx("p",{className:"text-xs text-iron-500 line-clamp-2 mb-3",children:n.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:n.focus.slice(0,3).map(N=>e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-iron-800 text-iron-500 capitalize",children:N},N))}),b&&e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[e.jsx(ye,{className:"w-3 h-3 text-flame-400"}),e.jsx("span",{className:"text-[10px] font-bold text-flame-400",children:b})]})]})]},n.id)})})})]})]})}const ke={title:"Rate of Perceived Exertion (RPE)",description:"A scale from 1-10 that measures how hard a set feels, based on reps in reserve (RIR).",scale:[{value:10,label:"Max effort",description:"Could not do any more reps"},{value:9,label:"Very hard",description:"1 rep left in tank"},{value:8,label:"Hard",description:"2 reps left in tank"},{value:7,label:"Challenging",description:"3 reps left in tank"},{value:6,label:"Moderate",description:"4+ reps left in tank"},{value:5,label:"Easy",description:"Warm-up weight"}]},Pe=[{value:0,label:"None",color:"bg-green-500"},{value:1,label:"1",color:"bg-green-400"},{value:2,label:"2",color:"bg-lime-400"},{value:3,label:"3",color:"bg-yellow-400"},{value:4,label:"4",color:"bg-yellow-500"},{value:5,label:"5",color:"bg-orange-400"},{value:6,label:"6",color:"bg-orange-500"},{value:7,label:"7",color:"bg-red-400"},{value:8,label:"8",color:"bg-red-500"},{value:9,label:"9",color:"bg-red-600"},{value:10,label:"10",color:"bg-red-700"}],Mt=["Bench Press","Incline Bench Press","Close Grip Bench","Dumbbell Press","Overhead Press","Squat","Deadlift","Barbell Row","Pull-ups","Tricep Extension","Bicep Curl","Lateral Raise"],Tt=["Dead Hang","Plank","Wall Sit","L-Sit","Farmers Carry","Static Hold"],Wt=["Pull-ups","Push-ups","Dips","Chin-ups","Muscle-ups","Bodyweight Squats"];function Gt(){const j=Te(),[D]=rt(),{id:w}=it(),{user:h,userProfile:k,updateProfile:A}=We(),V=nt(s=>s.sidebarOpen),[F,B]=f.useState(!1),[K,i]=f.useState(!!w),[O,$]=f.useState(!1),[C,E]=f.useState("strength"),[T,Q]=f.useState("amrap"),[u,v]=f.useState(""),[y,P]=f.useState([{name:"",reps:""}]),[ce,Y]=f.useState(!1),[_,re]=f.useState(null),[X,ie]=f.useState(null),[z,G]=f.useState(null),I=f.useRef(null),[de,n]=f.useState(1),x=D.get("userId")||(h==null?void 0:h.uid),b=D.get("userId")&&D.get("userId")!==(h==null?void 0:h.uid),N=D.get("requestId")||null,U=D.get("date")||null,m=!!w,W=(k==null?void 0:k.customExercises)||{},J=[...Mt,...W.weight||[]],me=[...Wt,...W.bodyweight||[]],xe=[...Tt,...W.time||[]],[M,L]=f.useState({name:"",date:U||Ge(),notes:"",exercises:[Z()]});f.useEffect(()=>{async function s(){var r,a;if(!(!w||!h))try{const t=await le.getById(w);if(t){if(t.workoutType==="cardio"){j(`/workouts/${w}`);return}L({name:t.name||"",date:xt(t.date),notes:t.notes||"",exercises:((r=t.exercises)==null?void 0:r.map(l=>{var c;return{...l,id:l.id||Date.now()+Math.random(),expanded:!0,sets:((c=l.sets)==null?void 0:c.map(d=>({...d,id:d.id||Date.now()+Math.random()})))||[ne()]}}))||[Z()]});const o=((a=t.exercises)==null?void 0:a.reduce((l,c)=>c.supersetGroup!=null?Math.max(l,c.supersetGroup):l,0))||0;n(o+1)}}catch(t){console.error("Error loading workout:",t)}finally{i(!1)}}s()},[w,h]);function Z(s="weight"){return{id:Date.now(),name:"",type:s,sets:[ne(s)],notes:"",expanded:!0}}function ne(s="weight"){const r={id:Date.now()+Math.random(),rpe:"",painLevel:0,completed:!1};return s==="time"?{...r,prescribedTime:"",actualTime:""}:{...r,prescribedWeight:"",prescribedReps:"",actualWeight:"",actualReps:""}}const qe=()=>{L(s=>({...s,exercises:[...s.exercises,Z()]}))},ze=()=>{const s=de,r={...Z(),supersetGroup:s},a={...Z(),supersetGroup:s,id:Date.now()+1};L(t=>({...t,exercises:[...t.exercises,r,a]})),n(t=>t+1)},Le=s=>{L(r=>{const a=r.exercises.find(t=>t.id===s);return(a==null?void 0:a.supersetGroup)!=null?{...r,exercises:r.exercises.filter(t=>t.supersetGroup!==a.supersetGroup)}:{...r,exercises:r.exercises.filter(t=>t.id!==s)}})},q=(s,r)=>{L(a=>({...a,exercises:a.exercises.map(t=>t.id===s?{...t,...r}:t)}))},Ee=s=>{L(r=>{const a=r.exercises.find(o=>o.id===s),t=a==null?void 0:a.supersetGroup;return{...r,exercises:r.exercises.map(o=>{if(o.id!==s&&(t==null||o.supersetGroup!==t))return o;const l=o.sets[o.sets.length-1],c=o.type||"weight";let d={id:Date.now()+Math.random(),rpe:"",painLevel:0,completed:!1};return c==="time"?d={...d,prescribedTime:(l==null?void 0:l.prescribedTime)||"",actualTime:""}:d={...d,prescribedWeight:(l==null?void 0:l.prescribedWeight)||"",prescribedReps:(l==null?void 0:l.prescribedReps)||"",actualWeight:"",actualReps:""},{...o,sets:[...o.sets,d]}})}})},be=(s,r)=>{L(a=>{const t=a.exercises.find(c=>c.id===s),o=t==null?void 0:t.supersetGroup,l=t==null?void 0:t.sets.findIndex(c=>c.id===r);return{...a,exercises:a.exercises.map(c=>c.id===s?{...c,sets:c.sets.filter(d=>d.id!==r)}:o!=null&&c.supersetGroup===o&&l>=0?{...c,sets:c.sets.filter((d,g)=>g!==l)}:c)}})},p=(s,r,a)=>{L(t=>({...t,exercises:t.exercises.map(o=>o.id===s?{...o,sets:o.sets.map(l=>l.id===r?{...l,...a}:l)}:o)}))},ge=s=>s==="time"?xe:s==="bodyweight"?me:J,je=(s,r)=>{if(!s.trim())return ge(r);const a=s.toLowerCase();return ge(r).filter(t=>t.toLowerCase().includes(a))},ee=(s,r)=>{q(s,{name:r}),G(null)},He=async()=>{var t;const s={weight:[],bodyweight:[],time:[]};for(const o of M.exercises){const l=(t=o.name)==null?void 0:t.trim();if(!l)continue;if(!ge(o.type||"weight").some(d=>d.toLowerCase()===l.toLowerCase())){const d=o.type||"weight";s[d].includes(l)||s[d].push(l)}}const r=(k==null?void 0:k.customExercises)||{},a={weight:[...new Set([...r.weight||[],...s.weight])],bodyweight:[...new Set([...r.bodyweight||[],...s.bodyweight])],time:[...new Set([...r.time||[],...s.time])]};(s.weight.length||s.bodyweight.length||s.time.length)&&await A({customExercises:a})};if(f.useEffect(()=>{const s=r=>{I.current&&!I.current.contains(r.target)&&G(null)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[]),C==="cardio")return e.jsx(kt,{onBack:()=>E("strength")});const Ye=(s,r)=>{var t;const a=s.variants[r];L(o=>({...o,name:s.name})),Q(s.format),v(((t=s.timeCap)==null?void 0:t.toString())||""),P(a.movements.map(o=>({name:o.name,reps:o.reps}))),re(s.id),ie(r),Y(!1)},De=f.useMemo(()=>{var a;if(!_||!X)return!1;const s=fe.find(t=>t.id===_);if(!s)return!1;const r=s.variants[X];return!r||M.name.trim()!==s.name||T!==s.format||u!==(((a=s.timeCap)==null?void 0:a.toString())||"")||y.length!==r.movements.length?!1:y.every((t,o)=>t.name.trim()===r.movements[o].name&&t.reps===r.movements[o].reps)},[_,X,M.name,T,u,y]),Xe=async()=>{if(!M.name.trim()){alert("Please enter a workout name");return}const s=y.filter(r=>r.name.trim());if(s.length===0){alert("Add at least one movement");return}B(!0);try{const r=T==="amrap"?"AMRAP":T==="fortime"?"For Time":"EMOM",a=u?` ${u} min`:"",t=s.map(g=>`${g.reps?g.reps+" ":""}${g.name}`).join(`
`),o=`${r}${a}
${t}`,l=s.map((g,S)=>({id:Date.now()+S,name:g.name,type:"bodyweight",sets:[{id:Date.now()+S+1e3,prescribedReps:g.reps||"",prescribedWeight:""}]})),c={name:M.name,date:Se(M.date),notes:o,exercises:l,workoutCategory:"wod",..._&&De&&{benchmarkWodId:_,benchmarkVariant:X}};N&&(c.trainerRequestId=N,c.trainerId=h==null?void 0:h.uid);const d=await le.create(x,c);N&&(d!=null&&d.id)&&await Fe.linkWorkout(N,d.id).catch(console.error),j(N?"/trainer":b?"/admin":"/workouts")}catch(r){console.error("Error saving WOD:",r),alert("Failed to save WOD")}finally{B(!1)}},Ze=async()=>{if(!M.name.trim()){alert("Please enter a workout name");return}B(!0);try{await He();const s={...M,date:Se(M.date)};if(N&&(s.trainerRequestId=N,s.trainerId=h==null?void 0:h.uid),m)await le.update(w,s);else{const r=await le.create(x,s);N&&(r!=null&&r.id)&&await Fe.linkWorkout(N,r.id).catch(console.error)}j(N?"/trainer":b?"/admin":"/workouts")}catch(s){console.error("Error saving workout:",s),alert("Failed to save workout")}finally{B(!1)}};if(K)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(oe,{className:"w-8 h-8 text-flame-500 animate-spin"})});const Ae=(s,r)=>{const a=s.type||"weight";return a==="time"?e.jsxs("div",{className:`grid gap-2 ${m?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target (sec)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:r.prescribedTime||"",onChange:t=>p(s.id,r.id,{prescribedTime:t.target.value}),placeholder:"seconds",className:"w-full input-field text-sm py-2 px-3"})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual (sec)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:r.actualTime||"",onChange:t=>p(s.id,r.id,{actualTime:t.target.value}),placeholder:"seconds",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})]})]}):a==="bodyweight"?e.jsxs("div",{className:`grid gap-2 ${m?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target Reps"}),e.jsx("input",{type:"text",inputMode:"numeric",value:r.prescribedReps||"",onChange:t=>p(s.id,r.id,{prescribedReps:t.target.value}),onBlur:t=>p(s.id,r.id,{prescribedReps:se(t.target.value)}),placeholder:"e.g. 8 or 6-8",className:"w-full input-field text-sm py-2 px-3"})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual Reps"}),e.jsx("input",{type:"number",inputMode:"numeric",value:r.actualReps||"",onChange:t=>p(s.id,r.id,{actualReps:t.target.value}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})]})]}):e.jsxs("div",{className:`grid gap-2 ${m?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("input",{type:"text",value:r.prescribedWeight||"",onChange:t=>p(s.id,r.id,{prescribedWeight:t.target.value}),placeholder:"lbs",className:"w-full input-field text-sm py-2 px-3"}),e.jsx("span",{className:"text-iron-600 text-xs",children:"Ã—"}),e.jsx("input",{type:"text",inputMode:"numeric",value:r.prescribedReps||"",onChange:t=>p(s.id,r.id,{prescribedReps:t.target.value}),onBlur:t=>p(s.id,r.id,{prescribedReps:se(t.target.value)}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3"})]}),m&&e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("input",{type:"text",value:r.actualWeight||"",onChange:t=>p(s.id,r.id,{actualWeight:t.target.value}),placeholder:"lbs",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"}),e.jsx("span",{className:"text-iron-600 text-xs",children:"Ã—"}),e.jsx("input",{type:"number",inputMode:"numeric",value:r.actualReps||"",onChange:t=>p(s.id,r.id,{actualReps:t.target.value}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})]})]})};return e.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>j(-1),className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-plate transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-display-md text-iron-50",children:m?"Edit Workout":N?"Create Trainer Workout":"New Workout"}),e.jsx("p",{className:"text-iron-400",children:m?"Update your training session":N?`Building for user ${x.slice(0,8)}...`:"Log your training session"})]})]}),!m&&e.jsxs("div",{className:"card-steel p-2 mb-6 flex gap-2",children:[e.jsxs("button",{onClick:()=>E("strength"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-colors ${C==="strength"?"bg-flame-500 text-white":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[e.jsx(ot,{className:"w-5 h-5"}),"Strength"]}),e.jsxs("button",{onClick:()=>E("wod"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-colors ${C==="wod"?"bg-yellow-500 text-black":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[e.jsx(Ne,{className:"w-5 h-5"}),"WOD"]}),e.jsxs("button",{onClick:()=>E("cardio"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-colors ${C==="cardio"?"bg-flame-500 text-white":"text-iron-400 hover:text-iron-200 hover:bg-iron-800"}`,children:[e.jsx(ct,{className:"w-5 h-5"}),"Cardio"]})]}),C==="wod"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Y(!0),className:"w-full mb-5 flex items-center justify-center gap-2 py-3 rounded-xl border border-dashed border-yellow-500/50 bg-yellow-500/5 text-yellow-400 hover:bg-yellow-500/10 hover:border-yellow-500 transition-colors text-sm font-medium",children:[e.jsx(dt,{className:"w-4 h-4"}),"Browse Popular WODs"]}),e.jsx("div",{className:"card-steel rounded-xl p-5 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"WOD Name"}),e.jsx("input",{type:"text",value:M.name,onChange:s=>L(r=>({...r,name:s.target.value})),placeholder:"e.g., Cindy, Fran, custom WOD",className:"input-field"}),_&&De&&(()=>{var a;const s=fe.find(t=>t.id===_),r=((a=s==null?void 0:s.variants[X])==null?void 0:a.label)||X;return e.jsxs("div",{className:"flex items-center gap-2 mt-2 px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-xs",children:[e.jsx(Nt,{className:"w-3 h-3 text-yellow-400 flex-shrink-0"}),e.jsxs("span",{className:"text-yellow-300 min-w-0",children:["Logging as ",e.jsx("strong",{children:s==null?void 0:s.name})," Â· ",r]}),e.jsx("button",{type:"button",onClick:()=>{re(null),ie(null)},className:"ml-auto text-iron-500 hover:text-iron-300 flex-shrink-0",children:e.jsx(ae,{className:"w-3 h-3"})})]})})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:M.date,onChange:s=>L(r=>({...r,date:s.target.value})),className:"input-field"})]})]})}),e.jsxs("div",{className:"card-steel rounded-xl p-5 mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-3",children:"Format"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[{value:"amrap",label:"AMRAP",desc:"As Many Rounds As Possible"},{value:"fortime",label:"For Time",desc:"Complete as fast as you can"},{value:"emom",label:"EMOM",desc:"Every Minute On the Minute"}].map(s=>e.jsxs("button",{onClick:()=>Q(s.value),className:`p-3 rounded-lg border text-center transition-colors ${T===s.value?"border-yellow-500 bg-yellow-500/10 text-yellow-400":"border-iron-700 text-iron-400 hover:border-iron-600"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:s.label}),e.jsx("div",{className:"text-[10px] text-iron-500 mt-0.5",children:s.desc})]},s.value))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:T==="amrap"?"Time Cap (minutes)":T==="emom"?"Total Minutes":"Time Cap (minutes, optional)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:u,onChange:s=>v(s.target.value),placeholder:T==="amrap"?"20":T==="emom"?"10":"15",className:"input-field w-full"})]})]}),e.jsxs("div",{className:"card-steel rounded-xl p-5 mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-3",children:"Movements"}),e.jsx("div",{className:"space-y-2",children:y.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s.reps,onChange:a=>{const t=[...y];t[r]={...t[r],reps:a.target.value},P(t)},placeholder:"10",className:"input-field w-20 text-center"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>{const t=[...y];t[r]={...t[r],name:a.target.value},P(t)},placeholder:"e.g., Pull-ups",className:"input-field flex-1"}),y.length>1&&e.jsx("button",{onClick:()=>P(y.filter((a,t)=>t!==r)),className:"p-2 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]},r))}),e.jsxs("button",{onClick:()=>P([...y,{name:"",reps:""}]),className:"mt-3 w-full py-2.5 border border-dashed border-iron-700 rounded-lg text-sm text-flame-400 hover:text-flame-300 hover:border-iron-600 flex items-center justify-center gap-1.5 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Movement"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>j(-1),className:"btn-secondary py-3 px-6",children:"Cancel"}),e.jsx("button",{onClick:Xe,disabled:F,className:"btn-primary flex-1 py-3 flex items-center justify-center gap-2",children:F?e.jsx(oe,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5"}),"Save WOD"]})})]})]}),C==="strength"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-steel rounded-xl p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Workout Name"}),e.jsx("input",{type:"text",value:M.name,onChange:s=>L(r=>({...r,name:s.target.value})),placeholder:"e.g., Bench Day, Upper Body",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:M.date,onChange:s=>L(r=>({...r,date:s.target.value})),className:"input-field"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-iron-300 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:M.notes,onChange:s=>L(r=>({...r,notes:s.target.value})),placeholder:"How did you feel? Any observations?",rows:2,className:"input-field resize-none"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-xl text-iron-100",children:"Exercises"}),m&&e.jsxs("button",{onClick:()=>$(!0),className:"text-sm text-flame-400 hover:text-flame-300 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),"What is RPE?"]})]}),e.jsx(pe,{children:mt(M.exercises).map((s,r)=>{if(s.type==="superset"){const{exerciseA:t,exerciseB:o}=s,l=t.expanded!==!1;return e.jsxs(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"card-steel rounded-xl overflow-hidden border border-purple-500/20",children:[e.jsxs("div",{className:"p-4 border-b border-iron-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-purple-500/10 text-purple-400 text-xs font-semibold",children:[e.jsx(Ne,{className:"w-3.5 h-3.5"}),"Superset"]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:()=>{q(t.id,{expanded:!l}),q(o.id,{expanded:!l})},className:"p-2 text-iron-500 hover:text-iron-300 transition-colors",children:l?e.jsx($e,{className:"w-5 h-5"}):e.jsx(Ce,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Le(t.id),className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-purple-400 bg-purple-500/10 w-5 h-5 rounded flex items-center justify-center",children:"A"}),e.jsxs("div",{className:"flex-1 relative",ref:z===t.id?I:null,children:[e.jsx("input",{type:"text",value:t.name,onChange:c=>{q(t.id,{name:c.target.value}),G(t.id)},onFocus:()=>G(t.id),placeholder:"Search exercise A...",className:"w-full bg-transparent text-iron-100 font-medium border-none focus:outline-none placeholder:text-iron-500"}),z===t.id&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 bg-iron-900 border border-iron-700 rounded-xl shadow-xl max-h-52 overflow-y-auto",children:(()=>{var S;const c=je(t.name,t.type||"weight"),d=(S=t.name)==null?void 0:S.trim().toLowerCase(),g=c.some(R=>R.toLowerCase()===d);return e.jsxs(e.Fragment,{children:[c.map(R=>e.jsx("button",{type:"button",onMouseDown:ve=>ve.preventDefault(),onClick:()=>ee(t.id,R),className:"w-full text-left px-4 py-3 text-sm text-iron-200 hover:bg-iron-800 active:bg-iron-700 transition-colors border-b border-iron-800/50 last:border-b-0",children:R},R)),d&&!g&&e.jsxs("button",{type:"button",onMouseDown:R=>R.preventDefault(),onClick:()=>ee(t.id,t.name.trim()),className:"w-full text-left px-4 py-3 text-sm text-flame-400 hover:bg-iron-800 active:bg-iron-700 transition-colors flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),' Add "',t.name.trim(),'"']})]})})()})]})]}),e.jsx("div",{className:"flex gap-2 ml-7",children:[{type:"weight",label:"Weight"},{type:"bodyweight",label:"Bodyweight"},{type:"time",label:"Time"}].map(({type:c,label:d})=>e.jsx("button",{onClick:()=>q(t.id,{type:c,sets:t.sets.map(g=>({...ne(c),id:g.id,rpe:g.rpe,painLevel:g.painLevel}))}),className:`px-3 py-1 text-xs rounded-lg transition-colors ${(t.type||"weight")===c?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:d},c))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-purple-400 bg-purple-500/10 w-5 h-5 rounded flex items-center justify-center",children:"B"}),e.jsxs("div",{className:"flex-1 relative",ref:z===o.id?I:null,children:[e.jsx("input",{type:"text",value:o.name,onChange:c=>{q(o.id,{name:c.target.value}),G(o.id)},onFocus:()=>G(o.id),placeholder:"Search exercise B...",className:"w-full bg-transparent text-iron-100 font-medium border-none focus:outline-none placeholder:text-iron-500"}),z===o.id&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 bg-iron-900 border border-iron-700 rounded-xl shadow-xl max-h-52 overflow-y-auto",children:(()=>{var S;const c=je(o.name,o.type||"weight"),d=(S=o.name)==null?void 0:S.trim().toLowerCase(),g=c.some(R=>R.toLowerCase()===d);return e.jsxs(e.Fragment,{children:[c.map(R=>e.jsx("button",{type:"button",onMouseDown:ve=>ve.preventDefault(),onClick:()=>ee(o.id,R),className:"w-full text-left px-4 py-3 text-sm text-iron-200 hover:bg-iron-800 active:bg-iron-700 transition-colors border-b border-iron-800/50 last:border-b-0",children:R},R)),d&&!g&&e.jsxs("button",{type:"button",onMouseDown:R=>R.preventDefault(),onClick:()=>ee(o.id,o.name.trim()),className:"w-full text-left px-4 py-3 text-sm text-flame-400 hover:bg-iron-800 active:bg-iron-700 transition-colors flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),' Add "',o.name.trim(),'"']})]})})()})]})]}),e.jsx("div",{className:"flex gap-2 ml-7",children:[{type:"weight",label:"Weight"},{type:"bodyweight",label:"Bodyweight"},{type:"time",label:"Time"}].map(({type:c,label:d})=>e.jsx("button",{onClick:()=>q(o.id,{type:c,sets:o.sets.map(g=>({...ne(c),id:g.id,rpe:g.rpe,painLevel:g.painLevel}))}),className:`px-3 py-1 text-xs rounded-lg transition-colors ${(o.type||"weight")===c?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:d},c))})]})]}),e.jsx(pe,{children:l&&e.jsx(te.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 space-y-3",children:[t.sets.map((c,d)=>{const g=o.sets[d];return g?e.jsxs("div",{className:"p-3 bg-iron-800/30 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-iron-300 font-medium text-sm",children:["Set ",d+1]}),t.sets.length>1&&e.jsx("button",{onClick:()=>be(t.id,c.id),className:"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg",children:e.jsx(ue,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["A â€” ",t.name||"Exercise A"]}),Ae(t,c)]}),e.jsxs("div",{className:"pt-2 border-t border-iron-700/30",children:[e.jsxs("p",{className:"text-xs text-purple-400 font-medium mb-1.5",children:["B â€” ",o.name||"Exercise B"]}),Ae(o,g)]}),m&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-iron-700/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"RPE"}),e.jsxs("select",{value:c.rpe,onChange:S=>{p(t.id,c.id,{rpe:S.target.value}),p(o.id,g.id,{rpe:S.target.value})},className:"input-field text-sm py-2 px-3 w-full",children:[e.jsx("option",{value:"",children:"â€”"}),[5,6,7,8,9,10].map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Pain"}),e.jsx("select",{value:c.painLevel,onChange:S=>{const R=parseInt(S.target.value);p(t.id,c.id,{painLevel:R}),p(o.id,g.id,{painLevel:R})},className:"input-field text-sm py-2 px-3 w-full",children:Pe.map(({value:S,label:R})=>e.jsx("option",{value:S,children:R},S))})]})]})]},c.id):null}),e.jsxs("button",{onClick:()=>Ee(t.id),className:"mt-2 text-sm text-flame-400 hover:text-flame-300 flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"})," Add Set"]})]})})})]},`ss-${s.supersetGroup}`)}const a=s.exercise;return e.jsxs(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"card-steel rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-iron-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-plate bg-flame-500/10 flex items-center justify-center text-flame-400 font-semibold text-sm",children:r+1}),e.jsxs("div",{className:"flex-1 relative",ref:z===a.id?I:null,children:[e.jsx("input",{type:"text",value:a.name,onChange:t=>{q(a.id,{name:t.target.value}),G(a.id)},onFocus:()=>G(a.id),placeholder:"Search or type exercise...",className:`w-full bg-transparent text-iron-100 font-medium
                        border-none focus:outline-none placeholder:text-iron-500`}),z===a.id&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 bg-iron-900 border border-iron-700 rounded-xl shadow-xl max-h-52 overflow-y-auto",children:(()=>{var c;const t=je(a.name,a.type||"weight"),o=(c=a.name)==null?void 0:c.trim().toLowerCase(),l=t.some(d=>d.toLowerCase()===o);return e.jsxs(e.Fragment,{children:[t.length>0?t.map(d=>e.jsx("button",{type:"button",onMouseDown:g=>g.preventDefault(),onClick:()=>ee(a.id,d),className:"w-full text-left px-4 py-3 text-sm text-iron-200 hover:bg-iron-800 active:bg-iron-700 transition-colors border-b border-iron-800/50 last:border-b-0",children:d},d)):null,o&&!l&&e.jsxs("button",{type:"button",onMouseDown:d=>d.preventDefault(),onClick:()=>ee(a.id,a.name.trim()),className:"w-full text-left px-4 py-3 text-sm text-flame-400 hover:bg-iron-800 active:bg-iron-700 transition-colors flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),'Add "',a.name.trim(),'"']}),!o&&t.length===0&&e.jsx("p",{className:"px-4 py-3 text-sm text-iron-500",children:"Type to search..."})]})})()})]}),e.jsx("button",{onClick:()=>q(a.id,{expanded:!a.expanded}),className:"p-2 text-iron-500 hover:text-iron-300 transition-colors",children:a.expanded?e.jsx($e,{className:"w-5 h-5"}):e.jsx(Ce,{className:"w-5 h-5"})}),M.exercises.length>1&&e.jsx("button",{onClick:()=>Le(a.id),className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex gap-2",children:[{type:"weight",label:"Weight"},{type:"bodyweight",label:"Bodyweight"},{type:"time",label:"Time"}].map(({type:t,label:o})=>e.jsx("button",{onClick:()=>{q(a.id,{type:t,sets:a.sets.map(l=>({...ne(t),id:l.id,rpe:l.rpe,painLevel:l.painLevel}))})},className:`px-3 py-1 text-xs rounded-lg transition-colors ${(a.type||"weight")===t?"bg-flame-500 text-white":"bg-iron-800 text-iron-400 hover:text-iron-200"}`,children:o},t))})]}),e.jsx(pe,{children:a.expanded&&e.jsx(te.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:`hidden md:grid gap-2 mb-2 text-xs text-iron-500 uppercase tracking-wider ${m?"grid-cols-12":"grid-cols-8"}`,children:[e.jsx("div",{className:"col-span-1",children:"Set"}),e.jsx("div",{className:m?"col-span-3":"col-span-6",children:"Target"}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-3",children:"Actual"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("span",{className:"flex items-center gap-1",children:["RPE",e.jsx("button",{onClick:()=>$(!0),className:"text-flame-400 hover:text-flame-300",children:e.jsx(we,{className:"w-3 h-3"})})]})}),e.jsx("div",{className:"col-span-2",children:"Pain"})]}),e.jsx("div",{className:"col-span-1"})]}),a.sets.map((t,o)=>e.jsxs("div",{className:"mb-4 md:mb-2",children:[e.jsxs("div",{className:"md:hidden space-y-3 p-3 bg-iron-800/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-iron-300 font-medium",children:["Set ",o+1]}),e.jsx("button",{onClick:()=>be(a.id,t.id),className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg",children:e.jsx(ue,{className:"w-4 h-4"})})]}),a.type==="time"?e.jsxs("div",{className:`grid gap-3 ${m?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target (sec)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:t.prescribedTime||"",onChange:l=>p(a.id,t.id,{prescribedTime:l.target.value}),placeholder:"seconds",className:"w-full input-field text-base py-3 px-4"})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual (sec)"}),e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualTime||"",onChange:l=>p(a.id,t.id,{actualTime:l.target.value}),placeholder:"seconds",className:"w-full input-field text-base py-3 px-4 border-flame-500/30"})]})]}):a.type==="bodyweight"?e.jsxs("div",{className:`grid gap-3 ${m?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target Reps"}),e.jsx("input",{type:"text",inputMode:"numeric",value:t.prescribedReps||"",onChange:l=>p(a.id,t.id,{prescribedReps:l.target.value}),onBlur:l=>p(a.id,t.id,{prescribedReps:se(l.target.value)}),placeholder:"e.g. 8 or 6-8",className:"w-full input-field text-base py-3 px-4"})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual Reps"}),e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualReps||"",onChange:l=>p(a.id,t.id,{actualReps:l.target.value}),placeholder:"reps",className:"w-full input-field text-base py-3 px-4 border-flame-500/30"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target Weight"}),e.jsx("input",{type:"text",value:t.prescribedWeight||"",onChange:l=>p(a.id,t.id,{prescribedWeight:l.target.value}),placeholder:"lbs",className:"w-full input-field text-base py-3 px-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Target Reps"}),e.jsx("input",{type:"text",inputMode:"numeric",value:t.prescribedReps||"",onChange:l=>p(a.id,t.id,{prescribedReps:l.target.value}),onBlur:l=>p(a.id,t.id,{prescribedReps:se(l.target.value)}),placeholder:"e.g. 8 or 6-8",className:"w-full input-field text-base py-3 px-4"})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual Weight"}),e.jsx("input",{type:"text",value:t.actualWeight||"",onChange:l=>p(a.id,t.id,{actualWeight:l.target.value}),placeholder:"lbs",className:"w-full input-field text-base py-3 px-4 border-flame-500/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-flame-400 mb-1",children:"Actual Reps"}),e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualReps||"",onChange:l=>p(a.id,t.id,{actualReps:l.target.value}),placeholder:"reps",className:"w-full input-field text-base py-3 px-4 border-flame-500/30"})]})]})]}),m&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-iron-500 mb-1 flex items-center gap-1",children:["RPE",e.jsx("button",{onClick:()=>$(!0),className:"text-flame-400",children:e.jsx(we,{className:"w-3 h-3"})})]}),e.jsxs("select",{value:t.rpe,onChange:l=>p(a.id,t.id,{rpe:l.target.value}),className:"input-field text-base py-3 px-4 w-full",children:[e.jsx("option",{value:"",children:"â€”"}),[5,6,7,8,9,10].map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-iron-500 mb-1",children:"Pain Level"}),e.jsx("select",{value:t.painLevel,onChange:l=>p(a.id,t.id,{painLevel:parseInt(l.target.value)}),className:"input-field text-base py-3 px-4 w-full",children:Pe.map(({value:l,label:c})=>e.jsx("option",{value:l,children:c},l))})]})]})]}),e.jsxs("div",{className:`hidden md:grid gap-2 items-center ${m?"grid-cols-12":"grid-cols-8"}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsx("span",{className:"text-iron-400 text-sm font-medium",children:o+1})}),a.type==="time"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m?"col-span-3":"col-span-6",children:e.jsx("input",{type:"number",inputMode:"numeric",value:t.prescribedTime||"",onChange:l=>p(a.id,t.id,{prescribedTime:l.target.value}),placeholder:"seconds",className:"w-full input-field text-sm py-2 px-3"})}),m&&e.jsx("div",{className:"col-span-3",children:e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualTime||"",onChange:l=>p(a.id,t.id,{actualTime:l.target.value}),placeholder:"seconds",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})})]}):a.type==="bodyweight"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m?"col-span-3":"col-span-6",children:e.jsx("input",{type:"text",inputMode:"numeric",value:t.prescribedReps||"",onChange:l=>p(a.id,t.id,{prescribedReps:l.target.value}),onBlur:l=>p(a.id,t.id,{prescribedReps:se(l.target.value)}),placeholder:"e.g. 8 or 6-8",className:"w-full input-field text-sm py-2 px-3"})}),m&&e.jsx("div",{className:"col-span-3",children:e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualReps||"",onChange:l=>p(a.id,t.id,{actualReps:l.target.value}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m?"col-span-3":"col-span-6",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("input",{type:"text",value:t.prescribedWeight||"",onChange:l=>p(a.id,t.id,{prescribedWeight:l.target.value}),placeholder:"lbs",className:"w-full input-field text-sm py-2 px-3"}),e.jsx("span",{className:"text-iron-600",children:"Ã—"}),e.jsx("input",{type:"text",inputMode:"numeric",value:t.prescribedReps||"",onChange:l=>p(a.id,t.id,{prescribedReps:l.target.value}),onBlur:l=>p(a.id,t.id,{prescribedReps:se(l.target.value)}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3"})]})}),m&&e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("input",{type:"text",value:t.actualWeight||"",onChange:l=>p(a.id,t.id,{actualWeight:l.target.value}),placeholder:"lbs",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"}),e.jsx("span",{className:"text-iron-600",children:"Ã—"}),e.jsx("input",{type:"number",inputMode:"numeric",value:t.actualReps||"",onChange:l=>p(a.id,t.id,{actualReps:l.target.value}),placeholder:"reps",className:"w-full input-field text-sm py-2 px-3 border-flame-500/30"})]})})]}),m&&e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:t.rpe,onChange:l=>p(a.id,t.id,{rpe:l.target.value}),className:"input-field text-sm py-2 px-3 w-full",children:[e.jsx("option",{value:"",children:"â€”"}),[5,6,7,8,9,10].map(l=>e.jsx("option",{value:l,children:l},l))]})}),m&&e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:t.painLevel,onChange:l=>p(a.id,t.id,{painLevel:parseInt(l.target.value)}),className:`input-field text-sm py-2 px-3 w-full ${t.painLevel>=7?"text-red-400 border-red-500/50":t.painLevel>=4?"text-yellow-400 border-yellow-500/50":"text-green-400"}`,children:[e.jsx("option",{value:"0",children:"0 - None"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3 - Mild"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5 - Moderate"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7 - High"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10 - Severe"})]})}),e.jsx("div",{className:"col-span-1 flex justify-end",children:a.sets.length>1&&e.jsx("button",{onClick:()=>be(a.id,t.id),className:"p-1 text-iron-600 hover:text-red-400 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})})]})]},t.id)),e.jsxs("button",{onClick:()=>Ee(a.id),className:"mt-2 text-sm text-flame-400 hover:text-flame-300 flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Set"]})]})})})]},a.id)})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:qe,className:`flex-1 py-4 border-2 border-dashed border-iron-700 rounded-xl
              text-iron-400 hover:text-iron-200 hover:border-iron-600
              flex items-center justify-center gap-2 transition-colors`,children:[e.jsx(H,{className:"w-5 h-5"}),"Add Exercise"]}),e.jsxs("button",{onClick:ze,className:`flex-1 py-4 border-2 border-dashed border-purple-500/30 rounded-xl
              text-purple-400 hover:text-purple-300 hover:border-purple-500/50
              flex items-center justify-center gap-2 transition-colors`,children:[e.jsx(Ne,{className:"w-5 h-5"}),"Add Superset"]})]})]}),e.jsx("div",{className:`fixed bottom-0 right-0 p-4 bg-gradient-to-t from-iron-950 via-iron-950/95 to-transparent left-0 ${V?"lg:left-64":"lg:left-20"} transition-[left] duration-300`,children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-3",children:[e.jsx("button",{onClick:()=>j(-1),className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:Ze,disabled:F,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:F?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5"}),m?"Update Workout":"Save Workout"]})})]})})]}),e.jsx(pe,{children:O&&e.jsxs(e.Fragment,{children:[e.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>$(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsxs(te.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`fixed inset-4 max-w-lg mx-auto my-auto max-h-[90vh] overflow-y-auto
                bg-iron-900 border border-iron-700 rounded-2xl z-50`,children:[e.jsxs("div",{className:"sticky top-0 flex items-center justify-between p-5 border-b border-iron-800 bg-iron-900",children:[e.jsx("h3",{className:"font-display text-xl text-iron-100",children:ke.title}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 text-iron-400 hover:text-iron-100 hover:bg-iron-800 rounded-full",children:e.jsx(ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-iron-400 mb-6",children:ke.description}),e.jsx("div",{className:"space-y-3",children:ke.scale.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-iron-800/50 rounded-plate",children:[e.jsx("div",{className:"w-10 h-10 rounded-plate bg-flame-500/20 flex items-center justify-center",children:e.jsx("span",{className:"font-display text-lg text-flame-400",children:s.value})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-iron-100",children:s.label}),e.jsx("p",{className:"text-sm text-iron-500",children:s.description})]})]},s.value))})]})]})]})}),e.jsx(Rt,{isOpen:ce,onClose:()=>Y(!1),onSelect:Ye,userWodStats:(k==null?void 0:k.wodStats)||{}})]})}export{Gt as default};
